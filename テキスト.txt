<html><head></head><body contenteditable="true"><pre style="word-wrap: break-word; white-space: pre-wrap;">"use strict";(()=&gt;{var Ufe=Object.create;var kL=Object.defineProperty;var zfe=Object.getOwnPropertyDescriptor;var Hfe=Object.getOwnPropertyNames;var Gfe=Object.getPrototypeOf,Wfe=Object.prototype.hasOwnProperty;var ta=(r=&gt;typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=&gt;(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Qt=(r,e)=&gt;()=&gt;(e||r((e={exports:{}}).exports,e),e.exports),$fe=(r,e)=&gt;{for(var t in e)kL(r,t,{get:e[t],enumerable:!0})},Vfe=(r,e,t,n)=&gt;{if(e&amp;&amp;typeof e=="object"||typeof e=="function")for(let o of Hfe(e))!Wfe.call(r,o)&amp;&amp;o!==t&amp;&amp;kL(r,o,{get:()=&gt;e[o],enumerable:!(n=zfe(e,o))||n.enumerable});return r};var oe=(r,e,t)=&gt;(t=r!=null?Ufe(Gfe(r)):{},Vfe(e||!r||!r.__esModule?kL(t,"default",{value:r,enumerable:!0}):t,r));var jfe=(r,e,t)=&gt;{if(!e.has(r))throw TypeError("Cannot "+t)};var Ch=(r,e,t)=&gt;(jfe(r,e,"read from private field"),t?t.call(r):e.get(r)),V7=(r,e,t)=&gt;{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var K7=Qt((j7,PL)=&gt;{(function(r){if(typeof j7=="object"&amp;&amp;typeof PL!="undefined")PL.exports=r();else if(typeof define=="function"&amp;&amp;define.amd)define([],r);else{var e;typeof window!="undefined"?e=window:typeof globalThis!="undefined"?e=globalThis:typeof self!="undefined"?e=self:e=this,e.Bugsnag=r()}})(function(){var r,e,t,n=["navigation","request","process","log","user","state","error","manual"],o=function(q,ne,le){for(var ue=le,Se=0,Re=q.length;Se&lt;Re;Se++)ue=ne(ue,q[Se],Se,q);return ue},i=function(q,ne){return o(q,function(le,ue,Se,Re){return ne(ue,Se,Re)?le.concat(ue):le},[])},s=function(q,ne){return o(q,function(le,ue,Se,Re){return le===!0||ue===ne},!1)},a=function(q){return Object.prototype.toString.call(q)==="[object Array]"},l=!{toString:null}.propertyIsEnumerable("toString"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(q){var ne=[],le;for(le in q)Object.prototype.hasOwnProperty.call(q,le)&amp;&amp;ne.push(le);if(!l)return ne;for(var ue=0,Se=u.length;ue&lt;Se;ue++)Object.prototype.hasOwnProperty.call(q,u[ue])&amp;&amp;ne.push(u[ue]);return ne},c=function(q,ne){return q===void 0&amp;&amp;(q=1),ne===void 0&amp;&amp;(ne=1/0),function(le){return typeof le=="number"&amp;&amp;parseInt(""+le,10)===le&amp;&amp;le&gt;=q&amp;&amp;le&lt;=ne}},p=function(q){return typeof q=="function"||a(q)&amp;&amp;i(q,function(ne){return typeof ne=="function"}).length===q.length},h=function(q){return typeof q=="string"&amp;&amp;!!q.length},f={},m=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};f.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:h},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(q){return q===void 0||h(q)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(q){return q===void 0||h(q)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(q){return q===!0||q===!1}},enabledErrorTypes:{defaultValue:function(){return m()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(q){if(typeof q!="object"||!q)return!1;var ne=d(q),le=d(m());return!(i(ne,function(ue){return s(le,ue)}).length&lt;ne.length||i(d(q),function(ue){return typeof q[ue]!="boolean"}).length&gt;0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:p},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:p},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:p},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(q){return q&amp;&amp;typeof q=="object"&amp;&amp;h(q.notify)&amp;&amp;h(q.sessions)&amp;&amp;i(d(q),function(ne){return!s(["notify","sessions"],ne)}).length===0}},autoTrackSessions:{defaultValue:function(q){return!0},message:"should be true|false",validate:function(q){return q===!0||q===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(q){return q===null||a(q)&amp;&amp;i(q,function(ne){return typeof ne=="string"}).length===q.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(q){return typeof q=="string"&amp;&amp;q.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(q){return c(0,100)(q)}},enabledBreadcrumbTypes:{defaultValue:function(){return n},message:"should be null or a list of available breadcrumb types ("+n.join(",")+")",validate:function(q){return q===null||a(q)&amp;&amp;o(q,function(ne,le){return ne===!1?ne:s(n,le)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(q){return q===void 0||typeof q=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(q){return q===null||q&amp;&amp;o(d(q),function(ne,le){return ne&amp;&amp;s(["id","email","name"],le)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(q){return typeof q=="object"&amp;&amp;q!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(q){return!q||q&amp;&amp;o(["debug","info","warn","error"],function(ne,le){return ne&amp;&amp;typeof q[le]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(q){return a(q)&amp;&amp;q.length===i(q,function(ne){return typeof ne=="string"||ne&amp;&amp;typeof ne.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(q){return a(q)&amp;&amp;q.length===i(q,function(ne){return ne&amp;&amp;typeof ne=="object"&amp;&amp;typeof ne.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(q){return a(q)&amp;&amp;q.length===i(q,function(ne){return ne&amp;&amp;typeof ne=="object"&amp;&amp;typeof ne.name=="string"}).length}}};var g=function(q){for(var ne=1;ne&lt;arguments.length;ne++){var le=arguments[ne];for(var ue in le)Object.prototype.hasOwnProperty.call(le,ue)&amp;&amp;(q[ue]=le[ue])}return q},v=function(q,ne){return o(q,function(le,ue,Se,Re){return le.concat(ne(ue,Se,Re))},[])};function b(){return b=Object.assign||function(q){for(var ne=1;ne&lt;arguments.length;ne++){var le=arguments[ne];for(var ue in le)Object.prototype.hasOwnProperty.call(le,ue)&amp;&amp;(q[ue]=le[ue])}return q},b.apply(this,arguments)}var C=f.schema,x={releaseStage:g({},C.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:b({},C.appType,{defaultValue:function(){return"browser"}}),logger:g({},C.logger,{defaultValue:function(){return typeof console!="undefined"&amp;&amp;typeof console.debug=="function"?y():void 0}})},y=function(){var q={},ne=console.log;return v(["debug","info","warn","error"],function(le){var ue=console[le];q[le]=typeof ue=="function"?ue.bind(console,"[bugsnag]"):ne.bind(console,"[bugsnag]")}),q},S=function(){function q(le,ue,Se,Re){Re===void 0&amp;&amp;(Re=new Date),this.type=Se,this.message=le,this.metadata=ue,this.timestamp=Re}var ne=q.prototype;return ne.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},q}(),T=S,w={};(function(q,ne){"use strict";typeof r=="function"&amp;&amp;r.amd?r("stackframe",[],ne):typeof w=="object"?w=ne():q.StackFrame=ne()})(this,function(){"use strict";function q(Dt){return!isNaN(parseFloat(Dt))&amp;&amp;isFinite(Dt)}function ne(Dt){return Dt.charAt(0).toUpperCase()+Dt.substring(1)}function le(Dt){return function(){return this[Dt]}}var ue=["isConstructor","isEval","isNative","isToplevel"],Se=["columnNumber","lineNumber"],Re=["fileName","functionName","source"],He=["args"],pt=ue.concat(Se,Re,He);function tt(Dt){if(Dt instanceof Object)for(var Cr=0;Cr&lt;pt.length;Cr++)Dt.hasOwnProperty(pt[Cr])&amp;&amp;Dt[pt[Cr]]!==void 0&amp;&amp;this["set"+ne(pt[Cr])](Dt[pt[Cr]])}tt.prototype={getArgs:function(){return this.args},setArgs:function(Dt){if(Object.prototype.toString.call(Dt)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=Dt},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Dt){if(Dt instanceof tt)this.evalOrigin=Dt;else if(Dt instanceof Object)this.evalOrigin=new tt(Dt);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var Dt=this.getFunctionName()||"{anonymous}",Cr="("+(this.getArgs()||[]).join(",")+")",no=this.getFileName()?"@"+this.getFileName():"",oo=q(this.getLineNumber())?":"+this.getLineNumber():"",vr=q(this.getColumnNumber())?":"+this.getColumnNumber():"";return Dt+Cr+no+oo+vr}};for(var It=0;It&lt;ue.length;It++)tt.prototype["get"+ne(ue[It])]=le(ue[It]),tt.prototype["set"+ne(ue[It])]=function(Dt){return function(Cr){this[Dt]=Boolean(Cr)}}(ue[It]);for(var Tt=0;Tt&lt;Se.length;Tt++)tt.prototype["get"+ne(Se[Tt])]=le(Se[Tt]),tt.prototype["set"+ne(Se[Tt])]=function(Dt){return function(Cr){if(!q(Cr))throw new TypeError(Dt+" must be a Number");this[Dt]=Number(Cr)}}(Se[Tt]);for(var yr=0;yr&lt;Re.length;yr++)tt.prototype["get"+ne(Re[yr])]=le(Re[yr]),tt.prototype["set"+ne(Re[yr])]=function(Dt){return function(Cr){this[Dt]=String(Cr)}}(Re[yr]);return tt});var k={};(function(q,ne){"use strict";typeof r=="function"&amp;&amp;r.amd?r("error-stack-parser",["stackframe"],ne):typeof k=="object"?k=ne(w):q.ErrorStackParser=ne(q.StackFrame)})(this,function(ne){"use strict";var le=/(^|@)\S+\:\d+/,ue=/^\s*at .*(\S+\:\d+|\(native\))/m,Se=/^(eval@)?(\[native code\])?$/;return{parse:function(He){if(typeof He.stacktrace!="undefined"||typeof He["opera#sourceloc"]!="undefined")return this.parseOpera(He);if(He.stack&amp;&amp;He.stack.match(ue))return this.parseV8OrIE(He);if(He.stack)return this.parseFFOrSafari(He);throw new Error("Cannot parse given Error object")},extractLocation:function(He){if(He.indexOf(":")===-1)return[He];var pt=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,tt=pt.exec(He.replace(/[\(\)]/g,""));return[tt[1],tt[2]||void 0,tt[3]||void 0]},parseV8OrIE:function(He){var pt=He.stack.split(`
`).filter(function(tt){return!!tt.match(ue)},this);return pt.map(function(tt){tt.indexOf("(eval ")&gt;-1&amp;&amp;(tt=tt.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var It=tt.replace(/^\s+/,"").replace(/\(eval code/g,"("),Tt=It.match(/ (\((.+):(\d+):(\d+)\)$)/);It=Tt?It.replace(Tt[0],""):It;var yr=It.split(/\s+/).slice(1),Dt=this.extractLocation(Tt?Tt[1]:yr.pop()),Cr=yr.join(" ")||void 0,no=["eval","&lt;anonymous&gt;"].indexOf(Dt[0])&gt;-1?void 0:Dt[0];return new ne({functionName:Cr,fileName:no,lineNumber:Dt[1],columnNumber:Dt[2],source:tt})},this)},parseFFOrSafari:function(He){var pt=He.stack.split(`
`).filter(function(tt){return!tt.match(Se)},this);return pt.map(function(tt){if(tt.indexOf(" &gt; eval")&gt;-1&amp;&amp;(tt=tt.replace(/ line (\d+)(?: &gt; eval line \d+)* &gt; eval\:\d+\:\d+/g,":$1")),tt.indexOf("@")===-1&amp;&amp;tt.indexOf(":")===-1)return new ne({functionName:tt});var It=/((.*".+"[^@]*)?[^@]*)(?:@)/,Tt=tt.match(It),yr=Tt&amp;&amp;Tt[1]?Tt[1]:void 0,Dt=this.extractLocation(tt.replace(It,""));return new ne({functionName:yr,fileName:Dt[0],lineNumber:Dt[1],columnNumber:Dt[2],source:tt})},this)},parseOpera:function(He){return!He.stacktrace||He.message.indexOf(`
`)&gt;-1&amp;&amp;He.message.split(`
`).length&gt;He.stacktrace.split(`
`).length?this.parseOpera9(He):He.stack?this.parseOpera11(He):this.parseOpera10(He)},parseOpera9:function(He){for(var pt=/Line (\d+).*script (?:in )?(\S+)/i,tt=He.message.split(`
`),It=[],Tt=2,yr=tt.length;Tt&lt;yr;Tt+=2){var Dt=pt.exec(tt[Tt]);Dt&amp;&amp;It.push(new ne({fileName:Dt[2],lineNumber:Dt[1],source:tt[Tt]}))}return It},parseOpera10:function(He){for(var pt=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,tt=He.stacktrace.split(`
`),It=[],Tt=0,yr=tt.length;Tt&lt;yr;Tt+=2){var Dt=pt.exec(tt[Tt]);Dt&amp;&amp;It.push(new ne({functionName:Dt[3]||void 0,fileName:Dt[2],lineNumber:Dt[1],source:tt[Tt]}))}return It},parseOpera11:function(He){var pt=He.stack.split(`
`).filter(function(tt){return!!tt.match(le)&amp;&amp;!tt.match(/^Error created at/)},this);return pt.map(function(tt){var It=tt.split("@"),Tt=this.extractLocation(It.pop()),yr=It.shift()||"",Dt=yr.replace(/&lt;anonymous function(: (\w+))?&gt;/,"$2").replace(/\([^\)]*\)/g,"")||void 0,Cr;yr.match(/\(([^\)]*)\)/)&amp;&amp;(Cr=yr.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var no=Cr===void 0||Cr==="[arguments not available]"?void 0:Cr.split(",");return new ne({functionName:Dt,args:no,fileName:Tt[0],lineNumber:Tt[1],columnNumber:Tt[2],source:tt})},this)}}});var A=k,I=function(q,ne,le,ue){var Se=ue&amp;&amp;ue.redactedKeys?ue.redactedKeys:[],Re=ue&amp;&amp;ue.redactedPaths?ue.redactedPaths:[];return JSON.stringify(ge(q,Se,Re),ne,le)},E=20,O=25e3,Q=8,j="...";function U(q){return q instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(q))}function B(q){return"[Throws: "+(q?q.message:"?")+"]"}function z(q,ne){for(var le=0,ue=q.length;le&lt;ue;le++)if(q[le]===ne)return!0;return!1}function N(q,ne){for(var le=0,ue=q.length;le&lt;ue;le++)if(ne.indexOf(q[le])===0)return!0;return!1}function V(q,ne){for(var le=0,ue=q.length;le&lt;ue;le++)if(typeof q[le]=="string"&amp;&amp;q[le].toLowerCase()===ne.toLowerCase()||q[le]&amp;&amp;typeof q[le].test=="function"&amp;&amp;q[le].test(ne))return!0;return!1}function re(q){return Object.prototype.toString.call(q)==="[object Array]"}function ce(q,ne){try{return q[ne]}catch(le){return B(le)}}function ge(q,ne,le){var ue=[],Se=0;function Re(He,pt){function tt(){return pt.length&gt;Q&amp;&amp;Se&gt;O}if(Se++,pt.length&gt;E||tt())return j;if(He===null||typeof He!="object")return He;if(z(ue,He))return"[Circular]";if(ue.push(He),typeof He.toJSON=="function")try{Se--;var It=Re(He.toJSON(),pt);return ue.pop(),It}catch(Yr){return B(Yr)}var Tt=U(He);if(Tt){Se--;var yr=Re({name:He.name,message:He.message},pt);return ue.pop(),yr}if(re(He)){for(var Dt=[],Cr=0,no=He.length;Cr&lt;no;Cr++){if(tt()){Dt.push(j);break}Dt.push(Re(He[Cr],pt.concat("[]")))}return ue.pop(),Dt}var oo={};try{for(var vr in He)if(!!Object.prototype.hasOwnProperty.call(He,vr)){if(N(le,pt.join("."))&amp;&amp;V(ne,vr)){oo[vr]="[REDACTED]";continue}if(tt()){oo[vr]=j;break}oo[vr]=Re(ce(He,vr),pt.concat(vr))}}catch(Yr){}return ue.pop(),oo}return Re(q,[])}function ae(q,ne,le,ue){if(typeof le=="string"){ue===void 0?ue=null:ue!==null&amp;&amp;typeof ue!="string"&amp;&amp;(ue=I(ue));var Se=ne[le];if(typeof Se=="number"){q[Se]={name:le,variant:ue};return}q.push({name:le,variant:ue}),ne[le]=q.length-1}}function Y(q,ne,le){if(!!a(ne)){for(var ue=0;ue&lt;ne.length;++ue){var Se=ne[ue];Se===null||typeof Se!="object"||ae(q,le,Se.name,Se.variant)}return q}}function W(q){return v(i(q,Boolean),function(ne){var le=ne.name,ue=ne.variant,Se={featureFlag:le};return typeof ue=="string"&amp;&amp;(Se.variant=ue),Se})}function G(q,ne,le){var ue=ne[le];typeof ue=="number"&amp;&amp;(q[ue]=null,delete ne[le])}var ee={add:ae,clear:G,merge:Y,toEventApi:W},F=function(q){return!!q&amp;&amp;(!!q.stack||!!q.stacktrace||!!q["opera#sourceloc"])&amp;&amp;typeof(q.stack||q.stacktrace||q["opera#sourceloc"])=="string"&amp;&amp;q.stack!==q.name+": "+q.message},L=$;function $(q){switch(Object.prototype.toString.call(q)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return q instanceof Error}}var P=L,X=function(q,ne,le,ue){var Se;if(!!ne){var Re;if(le===null)return R(q,ne);typeof le=="object"&amp;&amp;(Re=le),typeof le=="string"&amp;&amp;(Re=(Se={},Se[le]=ue,Se)),Re&amp;&amp;(q[ne]||(q[ne]={}),q[ne]=g({},q[ne],Re))}},K=function(q,ne,le){if(typeof ne=="string"){if(!le)return q[ne];if(q[ne])return q[ne][le]}},R=function(q,ne,le){if(typeof ne=="string"){if(!le){delete q[ne];return}q[ne]&amp;&amp;delete q[ne][le]}},H={add:X,get:K,clear:R},J={};(function(q,ne){"use strict";typeof r=="function"&amp;&amp;r.amd?r("stack-generator",["stackframe"],ne):typeof J=="object"?J=ne(w):q.StackGenerator=ne(q.StackFrame)})(this,function(q){return{backtrace:function(le){var ue=[],Se=10;typeof le=="object"&amp;&amp;typeof le.maxStackSize=="number"&amp;&amp;(Se=le.maxStackSize);for(var Re=arguments.callee;Re&amp;&amp;ue.length&lt;Se&amp;&amp;Re.arguments;){for(var He=new Array(Re.arguments.length),pt=0;pt&lt;He.length;++pt)He[pt]=Re.arguments[pt];/function(?:\s+([\w$]+))+\s*\(/.test(Re.toString())?ue.push(new q({functionName:RegExp.$1||void 0,args:He})):ue.push(new q({args:He}));try{Re=Re.caller}catch(tt){break}}return ue}}});var te=function(){function q(le,ue,Se,Re,He){Se===void 0&amp;&amp;(Se=[]),Re===void 0&amp;&amp;(Re=be()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=He,this._handledState=Re,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this.errors=[ke(le,ue,q.__type,Se)]}var ne=q.prototype;return ne.addMetadata=function(ue,Se,Re){return H.add(this._metadata,ue,Se,Re)},ne.getMetadata=function(ue,Se){return H.get(this._metadata,ue,Se)},ne.clearMetadata=function(ue,Se){return H.clear(this._metadata,ue,Se)},ne.addFeatureFlag=function(ue,Se){Se===void 0&amp;&amp;(Se=null),ee.add(this._features,this._featuresIndex,ue,Se)},ne.addFeatureFlags=function(ue){ee.merge(this._features,ue,this._featuresIndex)},ne.getFeatureFlags=function(){return ee.toEventApi(this._features)},ne.clearFeatureFlag=function(ue){ee.clear(this._features,this._featuresIndex,ue)},ne.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},ne.getUser=function(){return this._user},ne.setUser=function(ue,Se,Re){this._user={id:ue,email:Se,name:Re}},ne.toJSON=function(){return{payloadVersion:"4",exceptions:v(this.errors,function(ue){return g({},ue,{message:ue.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags()}},q}(),de=function(q){var ne={file:q.fileName,method:se(q.functionName),lineNumber:q.lineNumber,columnNumber:q.columnNumber,code:void 0,inProject:void 0};return ne.lineNumber&gt;-1&amp;&amp;!ne.file&amp;&amp;!ne.method&amp;&amp;(ne.file="global code"),ne},se=function(q){return/^global code$/i.test(q)?"global code":q},be=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Pe=function(q){return typeof q=="string"?q:""};function ke(q,ne,le,ue){return{errorClass:Pe(q),errorMessage:Pe(ne),type:le,stacktrace:o(ue,function(Se,Re){var He=de(Re);try{return JSON.stringify(He)==="{}"?Se:Se.concat(He)}catch(pt){return Se}},[])}}function Ie(q){return q.cause?[q].concat(Ie(q.cause)):[q]}te.getStacktrace=function(q,ne,le){if(F(q))return A.parse(q).slice(ne);try{return i(J.backtrace(),function(ue){return(ue.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+le)}catch(ue){return[]}},te.create=function(q,ne,le,ue,Se,Re){Se===void 0&amp;&amp;(Se=0);var He=Ae(q,ne,ue,Re),pt=He[0],tt=He[1],It;try{var Tt=te.getStacktrace(pt,tt&gt;0?1+tt+Se:0,1+Se);It=new te(pt.name,pt.message,Tt,le,q)}catch(no){It=new te(pt.name,pt.message,[],le,q)}if(pt.name==="InvalidError"&amp;&amp;It.addMetadata(""+ue,"non-error parameter",Ve(q)),pt.cause){var yr,Dt=Ie(pt).slice(1),Cr=v(Dt,function(no){var oo=P(no)&amp;&amp;F(no)?A.parse(no):[],vr=Ae(no,!0,"error cause"),Yr=vr[0];return Yr.name==="InvalidError"&amp;&amp;It.addMetadata("error cause",Ve(no)),ke(Yr.name,Yr.message,te.__type,oo)});(yr=It.errors).push.apply(yr,Cr)}return It};var Ve=function(q){return q===null?"null":q===void 0?"undefined":q},Ae=function(q,ne,le,ue){var Se,Re=0,He=function(pt){var tt=le==="error cause"?"was":"received";ue&amp;&amp;ue.warn(le+" "+tt+' a non-error: "'+pt+'"');var It=new Error(le+" "+tt+' a non-error. See "'+le+'" tab for more detail.');return It.name="InvalidError",It};if(!ne)P(q)?Se=q:(Se=He(typeof q),Re+=2);else switch(typeof q){case"string":case"number":case"boolean":Se=new Error(String(q)),Re+=1;break;case"function":Se=He("function"),Re+=2;break;case"object":q!==null&amp;&amp;P(q)?Se=q:q!==null&amp;&amp;lt(q)?(Se=new Error(q.message||q.errorMessage),Se.name=q.name||q.errorClass,Re+=1):(Se=He(q===null?"null":"unsupported object"),Re+=2);break;default:Se=He("nothing"),Re+=2}if(!F(Se))try{throw Se}catch(pt){F(pt)&amp;&amp;(Se=pt,Re=1)}return[Se,Re]};te.__type="browserjs";var lt=function(q){return(typeof q.name=="string"||typeof q.errorClass=="string")&amp;&amp;(typeof q.message=="string"||typeof q.errorMessage=="string")},vt=te,et=function(q,ne,le){var ue=0,Se=function(){if(ue&gt;=q.length)return le(null,!0);ne(q[ue],function(Re,He){if(Re)return le(Re);if(He===!1)return le(null,!1);ue++,Se()})};Se()},_e=function(q,ne,le,ue){var Se=function(Re,He){if(typeof Re!="function")return He(null);try{if(Re.length!==2){var pt=Re(ne);return pt&amp;&amp;typeof pt.then=="function"?pt.then(function(tt){return setTimeout(function(){return He(null,tt)})},function(tt){setTimeout(function(){return le(tt),He(null,!0)})}):He(null,pt)}Re(ne,function(tt,It){if(tt)return le(tt),He(null);He(null,It)})}catch(tt){le(tt),He(null)}};et(q,Se,ue)},xe=function(q,ne,le,ue){for(var Se=!1,Re=q.slice();!Se&amp;&amp;Re.length;)try{Se=Re.pop()(ne)===!1}catch(He){ue.error("Error occurred in "+le+" callback, continuing anyway\u2026"),ue.error(He)}return Se},Ge=function(ne,le){var ue="000000000"+ne;return ue.substr(ue.length-le)},ct=typeof window=="object"?window:self,bt=0;for(var Be in ct)Object.hasOwnProperty.call(ct,Be)&amp;&amp;bt++;var Ze=navigator.mimeTypes?navigator.mimeTypes.length:0,St=Ge((Ze+navigator.userAgent.length).toString(36)+bt.toString(36),4),Ne=function(){return St},Ce=0,Te=4,ze=36,wt=Math.pow(ze,Te);function dr(){return Ge((Math.random()*wt&lt;&lt;0).toString(ze),Te)}function Oe(){return Ce=Ce&lt;wt?Ce:0,Ce++,Ce-1}function Fe(){var q="c",ne=new Date().getTime().toString(ze),le=Ge(Oe().toString(ze),Te),ue=Ne(),Se=dr()+dr();return q+ne+le+ue+Se}Fe.fingerprint=Ne;var rt=Fe,Ct=function(){function q(){this.id=rt(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var ne=q.prototype;return ne.getUser=function(){return this._user},ne.setUser=function(ue,Se,Re){this._user={id:ue,email:Se,name:Re}},ne.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},ne._track=function(ue){this[ue._handledState.unhandled?"_unhandled":"_handled"]+=1},q}(),ir=Ct,hr=ee.add,Dr=ee.clear,Er=ee.merge,Ht=function(){},yn=function(){function q(le,ue,Se,Re){var He=this;ue===void 0&amp;&amp;(ue=f.schema),Se===void 0&amp;&amp;(Se=[]),this._notifier=Re,this._config={},this._schema=ue,this._delivery={sendSession:Ht,sendEvent:Ht},this._logger={debug:Ht,info:Ht,warn:Ht,error:Ht},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=q,this.Event=vt,this.Breadcrumb=T,this.Session=ir,this._config=this._configure(le,Se),v(Se.concat(this._config.plugins),function(It){It&amp;&amp;He._loadPlugin(It)}),this._depth=1;var pt=this,tt=this.notify;this.notify=function(){return tt.apply(pt,arguments)}}var ne=q.prototype;return ne.addMetadata=function(ue,Se,Re){return H.add(this._metadata,ue,Se,Re)},ne.getMetadata=function(ue,Se){return H.get(this._metadata,ue,Se)},ne.clearMetadata=function(ue,Se){return H.clear(this._metadata,ue,Se)},ne.addFeatureFlag=function(ue,Se){Se===void 0&amp;&amp;(Se=null),hr(this._features,this._featuresIndex,ue,Se)},ne.addFeatureFlags=function(ue){Er(this._features,ue,this._featuresIndex)},ne.clearFeatureFlag=function(ue){Dr(this._features,this._featuresIndex,ue)},ne.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},ne.getContext=function(){return this._context},ne.setContext=function(ue){this._context=ue},ne._configure=function(ue,Se){var Re=o(Se,function(It,Tt){return Tt&amp;&amp;Tt.configSchema?g({},It,Tt.configSchema):It},this._schema),He=o(d(Re),function(It,Tt){var yr=Re[Tt].defaultValue(ue[Tt]);if(ue[Tt]!==void 0){var Dt=Re[Tt].validate(ue[Tt]);Dt?Re[Tt].allowPartialObject?It.config[Tt]=g(yr,ue[Tt]):It.config[Tt]=ue[Tt]:(It.errors[Tt]=Re[Tt].message,It.config[Tt]=yr)}else It.config[Tt]=yr;return It},{errors:{},config:{}}),pt=He.errors,tt=He.config;if(Re.apiKey){if(!tt.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(tt.apiKey)||(pt.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=g({},tt.metadata),Er(this._features,tt.featureFlags,this._featuresIndex),this._user=g({},tt.user),this._context=tt.context,tt.logger&amp;&amp;(this._logger=tt.logger),tt.onError&amp;&amp;(this._cbs.e=this._cbs.e.concat(tt.onError)),tt.onBreadcrumb&amp;&amp;(this._cbs.b=this._cbs.b.concat(tt.onBreadcrumb)),tt.onSession&amp;&amp;(this._cbs.s=this._cbs.s.concat(tt.onSession)),d(pt).length&amp;&amp;this._logger.warn(Yo(pt,ue)),tt},ne.getUser=function(){return this._user},ne.setUser=function(ue,Se,Re){this._user={id:ue,email:Se,name:Re}},ne._loadPlugin=function(ue){var Se=ue.load(this);return ue.name&amp;&amp;(this._plugins["~"+ue.name+"~"]=Se),this},ne.getPlugin=function(ue){return this._plugins["~"+ue+"~"]},ne._setDelivery=function(ue){this._delivery=ue(this)},ne.startSession=function(){var ue=new ir;ue.app.releaseStage=this._config.releaseStage,ue.app.version=this._config.appVersion,ue.app.type=this._config.appType,ue._user=g({},this._user);var Se=xe(this._cbs.s,ue,"onSession",this._logger);return Se?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,ue)},ne.addOnError=function(ue,Se){Se===void 0&amp;&amp;(Se=!1),this._cbs.e[Se?"unshift":"push"](ue)},ne.removeOnError=function(ue){this._cbs.e=i(this._cbs.e,function(Se){return Se!==ue})},ne._addOnSessionPayload=function(ue){this._cbs.sp.push(ue)},ne.addOnSession=function(ue){this._cbs.s.push(ue)},ne.removeOnSession=function(ue){this._cbs.s=i(this._cbs.s,function(Se){return Se!==ue})},ne.addOnBreadcrumb=function(ue,Se){Se===void 0&amp;&amp;(Se=!1),this._cbs.b[Se?"unshift":"push"](ue)},ne.removeOnBreadcrumb=function(ue){this._cbs.b=i(this._cbs.b,function(Se){return Se!==ue})},ne.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},ne.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},ne.leaveBreadcrumb=function(ue,Se,Re){if(ue=typeof ue=="string"?ue:"",Re=typeof Re=="string"&amp;&amp;s(n,Re)?Re:"manual",Se=typeof Se=="object"&amp;&amp;Se!==null?Se:{},!!ue){var He=new T(ue,Se,Re),pt=xe(this._cbs.b,He,"onBreadcrumb",this._logger);if(pt){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(He),this._breadcrumbs.length&gt;this._config.maxBreadcrumbs&amp;&amp;(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},ne._isBreadcrumbTypeEnabled=function(ue){var Se=this._config.enabledBreadcrumbTypes;return Se===null||s(Se,ue)},ne.notify=function(ue,Se,Re){Re===void 0&amp;&amp;(Re=Ht);var He=vt.create(ue,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(He,Se,Re)},ne._notify=function(ue,Se,Re){var He=this;if(Re===void 0&amp;&amp;(Re=Ht),ue.app=g({},ue.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),ue.context=ue.context||this._context,ue._metadata=g({},ue._metadata,this._metadata),ue._user=g({},ue._user,this._user),ue.breadcrumbs=this._breadcrumbs.slice(),Er(ue._features,this._features,ue._featuresIndex),this._config.enabledReleaseStages!==null&amp;&amp;!s(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),Re(null,ue);var pt=ue.severity,tt=function(Tt){He._logger.error("Error occurred in onError callback, continuing anyway\u2026"),He._logger.error(Tt)},It=[].concat(this._cbs.e).concat(Se);_e(It,ue,tt,function(Tt,yr){if(Tt&amp;&amp;tt(Tt),!yr)return He._logger.debug("Event not sent due to onError callback"),Re(null,ue);He._isBreadcrumbTypeEnabled("error")&amp;&amp;q.prototype.leaveBreadcrumb.call(He,ue.errors[0].errorClass,{errorClass:ue.errors[0].errorClass,errorMessage:ue.errors[0].errorMessage,severity:ue.severity},"error"),pt!==ue.severity&amp;&amp;(ue._handledState.severityReason={type:"userCallbackSetSeverity"}),ue.unhandled!==ue._handledState.unhandled&amp;&amp;(ue._handledState.severityReason.unhandledOverridden=!0,ue._handledState.unhandled=ue.unhandled),He._session&amp;&amp;(He._session._track(ue),ue._session=He._session),He._delivery.sendEvent({apiKey:ue.apiKey||He._config.apiKey,notifier:He._notifier,events:[ue]},function(Dt){return Re(Dt,ue)})})},q}(),Yo=function(q,ne){var le=new Error(`Invalid configuration
`+v(d(q),function(ue){return"  - "+ue+" "+q[ue]+", got "+Dn(ne[ue])}).join(`

`));return le},Dn=function(q){switch(typeof q){case"string":case"number":case"object":return JSON.stringify(q);default:return String(q)}},qn=yn,wo={},ro=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];wo.event=function(q,ne){var le=I(q,null,null,{redactedPaths:ro,redactedKeys:ne});return le.length&gt;1e6&amp;&amp;(q.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+le.length/1e6+`MB (limit = 1MB)
metadata was removed`},le=I(q,null,null,{redactedPaths:ro,redactedKeys:ne})),le},wo.session=function(q,ne){var le=I(q,null,null);return le};var Ni={};Ni=function(q,ne){return ne===void 0&amp;&amp;(ne=window),{sendEvent:function(le,ue){ue===void 0&amp;&amp;(ue=function(){});var Se=Oo(q._config,"notify","4",ne),Re=wo.event(le,q._config.redactedKeys),He=new ne.XDomainRequest;He.onload=function(){ue(null)},He.onerror=function(){var pt=new Error("Event failed to send");q._logger.error("Event failed to send\u2026",pt),Re.length&gt;1e6&amp;&amp;q._logger.warn("Event oversized ("+(Re.length/1e6).toFixed(2)+" MB)"),ue(pt)},He.open("POST",Se),setTimeout(function(){try{He.send(Re)}catch(pt){q._logger.error(pt),ue(pt)}},0)},sendSession:function(le,ue){ue===void 0&amp;&amp;(ue=function(){});var Se=Oo(q._config,"sessions","1",ne),Re=new ne.XDomainRequest;Re.onload=function(){ue(null)},Re.open("POST",Se),setTimeout(function(){try{Re.send(wo.session(le,q._config.redactedKeys))}catch(He){q._logger.error(He),ue(He)}},0)}}};var Oo=function(q,ne,le,ue){var Se=JSON.parse(JSON.stringify(new Date)),Re=Ud(q.endpoints[ne],ue.location.protocol);return Re+"?apiKey="+encodeURIComponent(q.apiKey)+"&amp;payloadVersion="+le+"&amp;sentAt="+encodeURIComponent(Se)},Ud=Ni._matchPageProtocol=function(q,ne){return ne==="http:"?q.replace(/^https:/,"http:"):q},zd=function(q,ne){return ne===void 0&amp;&amp;(ne=window),{sendEvent:function(le,ue){ue===void 0&amp;&amp;(ue=function(){});try{var Se=q._config.endpoints.notify,Re=new ne.XMLHttpRequest,He=wo.event(le,q._config.redactedKeys);Re.onreadystatechange=function(){if(Re.readyState===ne.XMLHttpRequest.DONE){var pt=Re.status;(pt===0||pt&gt;=400)&amp;&amp;(q._logger.error("Event failed to send\u2026"),He.length&gt;1e6&amp;&amp;q._logger.warn("Event oversized ("+(He.length/1e6).toFixed(2)+" MB)")),ue(null)}},Re.open("POST",Se),Re.setRequestHeader("Content-Type","application/json"),Re.setRequestHeader("Bugsnag-Api-Key",le.apiKey||q._config.apiKey),Re.setRequestHeader("Bugsnag-Payload-Version","4"),Re.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Re.send(He)}catch(pt){q._logger.error(pt)}},sendSession:function(le,ue){ue===void 0&amp;&amp;(ue=function(){});try{var Se=q._config.endpoints.sessions,Re=new ne.XMLHttpRequest;Re.onreadystatechange=function(){Re.readyState===ne.XMLHttpRequest.DONE&amp;&amp;ue(null)},Re.open("POST",Se),Re.setRequestHeader("Content-Type","application/json"),Re.setRequestHeader("Bugsnag-Api-Key",q._config.apiKey),Re.setRequestHeader("Bugsnag-Payload-Version","1"),Re.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),Re.send(wo.session(le,q._config.redactedKeys))}catch(He){q._logger.error(He)}}}},Nu=new Date,lm=function(){Nu=new Date},Hd={name:"appDuration",load:function(q){return q.addOnError(function(ne){var le=new Date;ne.app.duration=le-Nu},!0),{reset:lm}}},Kl=function(q){return q===void 0&amp;&amp;(q=window),{load:function(ne){ne.addOnError(function(le){le.context===void 0&amp;&amp;(le.context=q.location.pathname)},!0)}}},ml=function(ne,le){var ue="000000000"+ne;return ue.substr(ue.length-le)},gl=typeof window=="object"?window:self,SC=0;for(var iA in gl)Object.hasOwnProperty.call(gl,iA)&amp;&amp;SC++;var xC=navigator.mimeTypes?navigator.mimeTypes.length:0,wC=ml((xC+navigator.userAgent.length).toString(36)+SC.toString(36),4),Zw=function(){return wC},Xv=0,eT=4,um=36,dm=Math.pow(um,eT);function tT(){return ml((Math.random()*dm&lt;&lt;0).toString(um),eT)}function sA(){return Xv=Xv&lt;dm?Xv:0,Xv++,Xv-1}function aA(){var q="c",ne=new Date().getTime().toString(um),le=ml(sA().toString(um),eT),ue=Zw(),Se=tT()+tT();return q+ne+le+ue+Se}aA.fingerprint=Zw;var lA=aA,TC="bugsnag-anonymous-id",Qv=function(q){try{var ne=q.localStorage,le=ne.getItem(TC);return le&amp;&amp;/^c[a-z0-9]{20,32}$/.test(le)||(le=lA(),ne.setItem(TC,le)),le}catch(ue){}},mh=function(q,ne){return q===void 0&amp;&amp;(q=navigator),ne===void 0&amp;&amp;(ne=window),{load:function(le){var ue={locale:q.browserLanguage||q.systemLanguage||q.userLanguage||q.language,userAgent:q.userAgent};ne&amp;&amp;ne.screen&amp;&amp;ne.screen.orientation&amp;&amp;ne.screen.orientation.type?ue.orientation=ne.screen.orientation.type:ne&amp;&amp;ne.document&amp;&amp;(ue.orientation=ne.document.documentElement.clientWidth&gt;ne.document.documentElement.clientHeight?"landscape":"portrait"),le._config.generateAnonymousId&amp;&amp;(ue.id=Qv(ne)),le.addOnSession(function(Se){Se.device=g({},Se.device,ue),le._config.collectUserIp||rT(Se)}),le.addOnError(function(Se){Se.device=g({},Se.device,ue,{time:new Date}),le._config.collectUserIp||rT(Se)},!0)},configSchema:{generateAnonymousId:{validate:function(le){return le===!0||le===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},rT=function(q){var ne=q.getUser();(!ne||!ne.id)&amp;&amp;q.setUser(q.device.id)},DC=function(q){return q===void 0&amp;&amp;(q=window),{load:function(ne){ne.addOnError(function(le){le.request&amp;&amp;le.request.url||(le.request=g({},le.request,{url:q.location.href}))},!0)}}},Jv={load:function(q){q._sessionDelegate=kC}},kC={startSession:function(q,ne){var le=q;return le._session=ne,le._pausedSession=null,le._config.enabledReleaseStages!==null&amp;&amp;!s(le._config.enabledReleaseStages,le._config.releaseStage)?(le._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),le):(le._delivery.sendSession({notifier:le._notifier,device:ne.device,app:ne.app,sessions:[{id:ne.id,startedAt:ne.startedAt,user:ne._user}]}),le)},resumeSession:function(q){return q._session?q:q._pausedSession?(q._session=q._pausedSession,q._pausedSession=null,q):q.startSession()},pauseSession:function(q){q._pausedSession=q._session,q._session=null}},PC={load:function(q){q._config.collectUserIp||q.addOnError(function(ne){ne._user&amp;&amp;typeof ne._user.id=="undefined"&amp;&amp;delete ne._user.id,ne._user=g({id:"[REDACTED]"},ne._user),ne.request=g({clientIp:"[REDACTED]"},ne.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(q){return q===!0||q===!1}}}},uA={};uA.load=function(q){var ne=/^(local-)?dev(elopment)?$/.test(q._config.releaseStage);ne||!q._isBreadcrumbTypeEnabled("log")||v(uL,function(le){var ue=console[le];console[le]=function(){for(var Se=arguments.length,Re=new Array(Se),He=0;He&lt;Se;He++)Re[He]=arguments[He];q.leaveBreadcrumb("Console output",o(Re,function(pt,tt,It){var Tt="[Unknown value]";try{Tt=String(tt)}catch(yr){}if(Tt==="[object Object]")try{Tt=JSON.stringify(tt)}catch(yr){}return pt["["+It+"]"]=Tt,pt},{severity:le.indexOf("group")===0?"log":le}),"log"),ue.apply(console,Re)},console[le]._restore=function(){console[le]=ue}})};var uL=i(["log","debug","info","warn","error"],function(q){return typeof console!="undefined"&amp;&amp;typeof console[q]=="function"}),dA=200,cA=5e5,dL=function(q,ne){return q===void 0&amp;&amp;(q=document),ne===void 0&amp;&amp;(ne=window),{load:function(le){if(!le._config.trackInlineScripts)return;var ue=ne.location.href,Se="",Re=!!q.attachEvent,He=Re?q.readyState==="complete":q.readyState!=="loading",pt=function(){return q.documentElement.outerHTML};Se=pt();var tt=q.onreadystatechange;q.onreadystatechange=function(){q.readyState==="interactive"&amp;&amp;(Se=pt(),He=!0);try{tt.apply(this,arguments)}catch(vr){}};var It=null,Tt=function(vr){It=vr},yr=function(){var vr=q.currentScript||It;if(!vr&amp;&amp;!He){var Yr=q.scripts||q.getElementsByTagName("script");vr=Yr[Yr.length-1]}return vr},Dt=function(vr){(!He||!Se)&amp;&amp;(Se=pt());var Yr=["&lt;!-- DOC START --&gt;"].concat(Se.split(`
`)),Ci=vr-1,Ao=Math.max(Ci-3,0),ql=Math.min(Ci+3,Yr.length);return o(Yr.slice(Ao,ql),function(Fs,tb,rb){return Fs[Ao+1+rb]=tb.length&lt;=dA?tb:tb.substr(0,dA),Fs},{})};le.addOnError(function(vr){vr.errors[0].stacktrace=i(vr.errors[0].stacktrace,function(ql){return!/__trace__$/.test(ql.method)});var Yr=vr.errors[0].stacktrace[0];if(!(Yr&amp;&amp;Yr.file&amp;&amp;Yr.file.replace(/#.*$/,"")!==ue.replace(/#.*$/,""))){var Ci=yr();if(Ci){var Ao=Ci.innerHTML;vr.addMetadata("script","content",Ao.length&lt;=cA?Ao:Ao.substr(0,cA)),Yr&amp;&amp;Yr.lineNumber&amp;&amp;(Yr.code=Dt(Yr.lineNumber))}}},!0);var Cr=v(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(vr){return nT(ne,vr,function(Yr){return oo(Yr,function(Ci){return{get:function(){return Ci[0]},replace:function(Ao){Ci[0]=Ao}}})})}),no=Cr[0];v(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(vr){!ne[vr]||!ne[vr].prototype||!Object.prototype.hasOwnProperty.call(ne[vr].prototype,"addEventListener")||(nT(ne[vr].prototype,"addEventListener",function(Yr){return oo(Yr,oT)}),nT(ne[vr].prototype,"removeEventListener",function(Yr){return oo(Yr,oT,!0)}))});function oo(vr,Yr,Ci){return Ci===void 0&amp;&amp;(Ci=!1),function(){var Ao=[].slice.call(arguments);try{var ql=Yr(Ao),Fs=ql.get();if(Ci&amp;&amp;vr.apply(this,Ao),typeof Fs!="function")return vr.apply(this,Ao);if(Fs.__trace__)ql.replace(Fs.__trace__);else{var tb=yr();Fs.__trace__=function(){Tt(tb),no(function(){Tt(null)},0);var gA=Fs.apply(this,arguments);return Tt(null),gA},Fs.__trace__.__trace__=Fs.__trace__,ql.replace(Fs.__trace__)}}catch(rb){}if(vr.apply)return vr.apply(this,Ao);switch(Ao.length){case 1:return vr(Ao[0]);case 2:return vr(Ao[0],Ao[1]);default:return vr()}}}},configSchema:{trackInlineScripts:{validate:function(le){return le===!0||le===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function nT(q,ne,le){var ue=q[ne];if(!ue)return ue;var Se=le(ue);return q[ne]=Se,ue}function oT(q){var ne=!!q[1]&amp;&amp;typeof q[1].handleEvent=="function";return{get:function(){return ne?q[1].handleEvent:q[1]},replace:function(le){ne?q[1].handleEvent=le:q[1]=le}}}var cL=function(q){return q===void 0&amp;&amp;(q=window),{load:function(ne){"addEventListener"in q&amp;&amp;(!ne._isBreadcrumbTypeEnabled("user")||q.addEventListener("click",function(le){var ue,Se;try{ue=pL(le.target),Se=pA(le.target,q)}catch(Re){ue="[hidden]",Se="[hidden]",ne._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}ne.leaveBreadcrumb("UI click",{targetText:ue,targetSelector:Se},"user")},!0))}}},pL=function(q){var ne=q.textContent||q.innerText||"";return!ne&amp;&amp;(q.type==="submit"||q.type==="button")&amp;&amp;(ne=q.value),ne=ne.replace(/^\s+|\s+$/g,""),Zv(ne,140)};function pA(q,ne){var le=[q.tagName];if(q.id&amp;&amp;le.push("#"+q.id),q.className&amp;&amp;q.className.length&amp;&amp;le.push("."+q.className.split(" ").join(".")),!ne.document.querySelectorAll||!Array.prototype.indexOf)return le.join("");try{if(ne.document.querySelectorAll(le.join("")).length===1)return le.join("")}catch(Se){return le.join("")}if(q.parentNode.childNodes.length&gt;1){var ue=Array.prototype.indexOf.call(q.parentNode.childNodes,q)+1;le.push(":nth-child("+ue+")")}return ne.document.querySelectorAll(le.join("")).length===1?le.join(""):q.parentNode?pA(q.parentNode,ne)+" &gt; "+le.join(""):le.join("")}function Zv(q,ne){var le="(...)";return q&amp;&amp;q.length&lt;=ne?q:q.slice(0,ne-le.length)+le}var iT={};iT=function(q){q===void 0&amp;&amp;(q=window);var ne={load:function(le){if("addEventListener"in q&amp;&amp;!!le._isBreadcrumbTypeEnabled("navigation")){var ue=function(Se){return function(){return le.leaveBreadcrumb(Se,{},"navigation")}};q.addEventListener("pagehide",ue("Page hidden"),!0),q.addEventListener("pageshow",ue("Page shown"),!0),q.addEventListener("load",ue("Page loaded"),!0),q.document.addEventListener("DOMContentLoaded",ue("DOMContentLoaded"),!0),q.addEventListener("load",function(){return q.addEventListener("popstate",ue("Navigated back"),!0)}),q.addEventListener("hashchange",function(Se){var Re=Se.oldURL?{from:AC(Se.oldURL,q),to:AC(Se.newURL,q),state:vh(q)}:{to:AC(q.location.href,q)};le.leaveBreadcrumb("Hash changed",Re,"navigation")},!0),q.history.replaceState&amp;&amp;gh(le,q.history,"replaceState",q),q.history.pushState&amp;&amp;gh(le,q.history,"pushState",q)}}};return ne};var AC=function(q,ne){var le=ne.document.createElement("A");return le.href=q,""+le.pathname+le.search+le.hash},hA=function(q,ne,le,ue){var Se=AC(q.location.href,q);return{title:le,state:ne,prevState:vh(q),to:ue||Se,from:Se}},gh=function(q,ne,le,ue){var Se=ne[le];ne[le]=function(Re,He,pt){q.leaveBreadcrumb("History "+le,hA(ue,Re,He,pt),"navigation"),typeof q.resetEventCount=="function"&amp;&amp;q.resetEventCount(),q._config.autoTrackSessions&amp;&amp;q.startSession(),Se.apply(ne,[Re,He].concat(pt!==void 0?pt:[]))}},vh=function(q){try{return q.history.state}catch(ne){}},Gd="request",fA=function(q,ne){q===void 0&amp;&amp;(q=[]),ne===void 0&amp;&amp;(ne=window);var le=[],ue={load:function(Se){if(!Se._isBreadcrumbTypeEnabled("request"))return;var Re=[Se._config.endpoints.notify,Se._config.endpoints.sessions].concat(q);He(),It();function He(){if("addEventListener"in ne.XMLHttpRequest.prototype){var Dt=ne.XMLHttpRequest.prototype.open;ne.XMLHttpRequest.prototype.open=function(no,oo){var vr=this,Yr=!1,Ci=function(){return tt(no,oo)},Ao=function(){return pt(no,oo,vr.status)};Yr&amp;&amp;(this.removeEventListener("load",Ao),this.removeEventListener("error",Ci)),this.addEventListener("load",Ao),this.addEventListener("error",Ci),Yr=!0,Dt.apply(this,arguments)}}}function pt(Dt,Cr,no){if(Cr===void 0){Se._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof Cr=="string"&amp;&amp;s(Re,Cr.replace(/\?.*$/,"")))){var oo={status:no,request:Dt+" "+Cr};no&gt;=400?Se.leaveBreadcrumb("XMLHttpRequest failed",oo,Gd):Se.leaveBreadcrumb("XMLHttpRequest succeeded",oo,Gd)}}function tt(Dt,Cr){if(Cr===void 0){Se._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof Cr=="string"&amp;&amp;s(Re,Cr.replace(/\?.*$/,""))||Se.leaveBreadcrumb("XMLHttpRequest error",{request:Dt+" "+Cr},Gd)}function It(){if(!(!("fetch"in ne)||ne.fetch.polyfill)){var Dt=ne.fetch;ne.fetch=function(){var no=arguments,oo=arguments[0],vr=arguments[1],Yr,Ci=null;return oo&amp;&amp;typeof oo=="object"?(Ci=oo.url,vr&amp;&amp;"method"in vr?Yr=vr.method:oo&amp;&amp;"method"in oo&amp;&amp;(Yr=oo.method)):(Ci=oo,vr&amp;&amp;"method"in vr&amp;&amp;(Yr=vr.method)),Yr===void 0&amp;&amp;(Yr="GET"),new Promise(function(Ao,ql){Dt.apply(void 0,no).then(function(Fs){Tt(Fs,Yr,Ci),Ao(Fs)}).catch(function(Fs){yr(Yr,Ci),ql(Fs)})})}}}var Tt=function(Dt,Cr,no){var oo={status:Dt.status,request:Cr+" "+no};Dt.status&gt;=400?Se.leaveBreadcrumb("fetch() failed",oo,Gd):Se.leaveBreadcrumb("fetch() succeeded",oo,Gd)},yr=function(Dt,Cr){Se.leaveBreadcrumb("fetch() error",{request:Dt+" "+Cr},Gd)}}};return ue},hL={load:function(q){var ne=0;q.addOnError(function(le){if(ne&gt;=q._config.maxEvents)return q._logger.warn("Cancelling event send due to maxEvents per session limit of "+q._config.maxEvents+" being reached"),!1;ne++}),q.resetEventCount=function(){ne=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(q){return c(1,100)(q)}}}},eb={};eb={load:function(q){q.addOnError(function(ne){var le=o(ne.errors,function(ue,Se){return ue.concat(Se.stacktrace)},[]);v(le,function(ue){ue.file=sT(ue.file)})})}};var sT=eb._strip=function(q){return typeof q=="string"?q.replace(/\?.*$/,"").replace(/#.*$/,""):q},aT=function(q,ne){return q===void 0&amp;&amp;(q=window),ne===void 0&amp;&amp;(ne="window onerror"),{load:function(le){if(!le._config.autoDetectErrors||!le._config.enabledErrorTypes.unhandledExceptions)return;function ue(Re,He,pt,tt,It){if(pt===0&amp;&amp;/Script error\.?/.test(Re))le._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var Tt={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},yr;if(It)yr=le.Event.create(It,!0,Tt,ne,1),mA(yr.errors[0].stacktrace,He,pt,tt);else if(typeof Re=="object"&amp;&amp;Re!==null&amp;&amp;(!He||typeof He!="string")&amp;&amp;!pt&amp;&amp;!tt&amp;&amp;!It){var Dt=Re.type?"Event: "+Re.type:"Error",Cr=Re.message||Re.detail||"";yr=le.Event.create({name:Dt,message:Cr},!0,Tt,ne,1),yr.originalError=Re,yr.addMetadata(ne,{event:Re,extraParameters:He})}else yr=le.Event.create(Re,!0,Tt,ne,1),mA(yr.errors[0].stacktrace,He,pt,tt);le._notify(yr)}typeof Se=="function"&amp;&amp;Se.apply(this,arguments)}var Se=q.onerror;q.onerror=ue}}},mA=function(q,ne,le,ue){q[0]||q.push({});var Se=q[0];!Se.file&amp;&amp;typeof ne=="string"&amp;&amp;(Se.file=ne),!Se.lineNumber&amp;&amp;lT(le)&amp;&amp;(Se.lineNumber=le),Se.columnNumber||(lT(ue)?Se.columnNumber=ue:window.event&amp;&amp;lT(window.event.errorCharacter)&amp;&amp;(Se.columnNumber=window.event.errorCharacter))},lT=function(q){return typeof q=="number"&amp;&amp;String.call(q)!=="NaN"},fL,mL=function(q){q===void 0&amp;&amp;(q=window);var ne={load:function(le){if(!(!le._config.autoDetectErrors||!le._config.enabledErrorTypes.unhandledRejections)){var ue=function(Se){var Re=Se.reason,He=!1;try{Se.detail&amp;&amp;Se.detail.reason&amp;&amp;(Re=Se.detail.reason,He=!0)}catch(tt){}var pt=le.Event.create(Re,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,le._logger);He&amp;&amp;v(pt.errors[0].stacktrace,Bu(Re)),le._notify(pt,function(tt){if(P(tt.originalError)&amp;&amp;!tt.originalError.stack){var It;tt.addMetadata("unhandledRejection handler",(It={},It[Object.prototype.toString.call(tt.originalError)]={name:tt.originalError.name,message:tt.originalError.message,code:tt.originalError.code},It))}})};"addEventListener"in q?q.addEventListener("unhandledrejection",ue):q.onunhandledrejection=function(Se,Re){ue({detail:{reason:Se,promise:Re}})},fL=ue}}};return ne},Bu=function(q){return function(ne){ne.file!==q.toString()&amp;&amp;ne.method&amp;&amp;(ne.method=ne.method.replace(/^\s+/,""))}},bh={},gL="Bugsnag JavaScript",vL="7.19.0",IC="https://github.com/bugsnag/bugsnag-js",uT=g({},f.schema,x),Bi={_client:null,createClient:function(q){typeof q=="string"&amp;&amp;(q={apiKey:q}),q||(q={});var ne=[Hd,mh(),Kl(),DC(),hL,Jv,PC,eb,aT(),mL(),iT(),cL(),fA(),uA,dL()],le=new qn(q,uT,ne,{name:gL,version:vL,url:IC});return le._setDelivery(window.XDomainRequest?Ni:zd),le._logger.debug("Loaded!"),le.leaveBreadcrumb("Bugsnag loaded",{},"state"),le._config.autoTrackSessions?le.startSession():le},start:function(q){return Bi._client?(Bi._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),Bi._client):(Bi._client=Bi.createClient(q),Bi._client)},isStarted:function(){return Bi._client!=null}};return v(["resetEventCount"].concat(d(qn.prototype)),function(q){/^_/.test(q)||(Bi[q]=function(){if(!Bi._client)return console.log("Bugsnag."+q+"() was called before Bugsnag.start()");Bi._client._depth+=1;var ne=Bi._client[q].apply(Bi._client,arguments);return Bi._client._depth-=1,ne})}),bh=Bi,bh.Client=qn,bh.Event=vt,bh.Session=ir,bh.Breadcrumb=T,bh.default=Bi,bh})});var vm=Qt((AOe,q7)=&gt;{q7.exports=K7()});var X7=Qt((Y7,AL)=&gt;{(function(r){if(typeof Y7=="object"&amp;&amp;typeof AL!="undefined")AL.exports=r();else if(typeof define=="function"&amp;&amp;define.amd)define([],r);else{var e;typeof window!="undefined"?e=window:typeof globalThis!="undefined"?e=globalThis:typeof self!="undefined"?e=self:e=this,e.BugsnagPluginReact=r()}})(function(){var r,e,t,n={};function o(){return o=Object.assign||function(d){for(var c=1;c&lt;arguments.length;c++){var p=arguments[c];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&amp;&amp;(d[h]=p[h])}return d},o.apply(this,arguments)}function i(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function s(d,c){d.prototype=Object.create(c.prototype),d.prototype.constructor=d,a(d,c)}function a(d,c){return a=Object.setPrototypeOf||function(h,f){return h.__proto__=f,h},a(d,c)}n=function(){function d(){var p=typeof window!="undefined"&amp;&amp;window.React;if(this.name="react",this.lazy=arguments.length===0&amp;&amp;!p,!this.lazy&amp;&amp;(this.React=(arguments.length&lt;=0?void 0:arguments[0])||p,!this.React))throw new Error("@bugsnag/plugin-react reference to `React` was undefined")}var c=d.prototype;return c.load=function(h){if(!this.lazy){var f=u(this.React,h);return f.createErrorBoundary=function(){return f},f}var m=function(){throw new Error(`@bugsnag/plugin-react was used incorrectly. Valid usage is as follows:
Pass React to the plugin constructor

  \`Bugsnag.start({ plugins: [new BugsnagPluginReact(React)] })\`
and then call \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary()\`

Or if React is not available until after Bugsnag has started,
construct the plugin with no arguments
  \`Bugsnag.start({ plugins: [new BugsnagPluginReact()] })\`,
then pass in React when available to construct your error boundary
  \`const ErrorBoundary = Bugsnag.getPlugin('react').createErrorBoundary(React)\``)};return m.createErrorBoundary=function(g){if(!g)throw new Error("@bugsnag/plugin-react reference to `React` was undefined");return u(g,h)},m},d}();var l=function(d){for(var c=d.split(/\s*\n\s*/g),p="",h=0,f=c.length;h&lt;f;h++)c[h].length&amp;&amp;(p+=(p.length?`
`:"")+c[h]);return p},u=function(d,c){return function(p){s(h,p);function h(m){var g;return g=p.call(this,m)||this,g.state={error:null,info:null},g.handleClearError=g.handleClearError.bind(i(g)),g}var f=h.prototype;return f.handleClearError=function(){this.setState({error:null,info:null})},f.componentDidCatch=function(g,v){var b=this.props.onError,C={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},x=c.Event.create(g,!0,C,1);v&amp;&amp;v.componentStack&amp;&amp;(v.componentStack=l(v.componentStack)),x.addMetadata("react",v),c._notify(x,b),this.setState({error:g,info:v})},f.render=function(){var g=this.state.error;if(g){var v=this.props.FallbackComponent;return v?d.createElement(v,o({},this.state,{clearError:this.handleClearError})):null}return this.props.children},h}(d.Component)};return n.formatComponentStack=l,n.default=n,n})});var Sh=Qt((IL,EL)=&gt;{(function(r,e){typeof IL=="object"&amp;&amp;typeof EL!="undefined"?EL.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(IL,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",o="second",i="minute",s="hour",a="day",l="week",u="month",d="quarter",c="year",p="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var E=["th","st","nd","rd"],O=I%100;return"["+I+(E[(O-20)%10]||E[O]||E[0])+"]"}},v=function(I,E,O){var Q=String(I);return!Q||Q.length&gt;=E?I:""+Array(E+1-Q.length).join(O)+I},b={s:v,z:function(I){var E=-I.utcOffset(),O=Math.abs(E),Q=Math.floor(O/60),j=O%60;return(E&lt;=0?"+":"-")+v(Q,2,"0")+":"+v(j,2,"0")},m:function I(E,O){if(E.date()&lt;O.date())return-I(O,E);var Q=12*(O.year()-E.year())+(O.month()-E.month()),j=E.clone().add(Q,u),U=O-j&lt;0,B=E.clone().add(Q+(U?-1:1),u);return+(-(Q+(O-j)/(U?j-B:B-j))||0)},a:function(I){return I&lt;0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:u,y:c,w:l,d:a,D:p,h:s,m:i,s:o,ms:n,Q:d}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},C="en",x={};x[C]=g;var y=function(I){return I instanceof k},S=function I(E,O,Q){var j;if(!E)return C;if(typeof E=="string"){var U=E.toLowerCase();x[U]&amp;&amp;(j=U),O&amp;&amp;(x[U]=O,j=U);var B=E.split("-");if(!j&amp;&amp;B.length&gt;1)return I(B[0])}else{var z=E.name;x[z]=E,j=z}return!Q&amp;&amp;j&amp;&amp;(C=j),j||!Q&amp;&amp;C},T=function(I,E){if(y(I))return I.clone();var O=typeof E=="object"?E:{};return O.date=I,O.args=arguments,new k(O)},w=b;w.l=S,w.i=y,w.w=function(I,E){return T(I,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var k=function(){function I(O){this.$L=S(O.locale,null,!0),this.parse(O)}var E=I.prototype;return E.parse=function(O){this.$d=function(Q){var j=Q.date,U=Q.utc;if(j===null)return new Date(NaN);if(w.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&amp;&amp;!/Z$/i.test(j)){var B=j.match(f);if(B){var z=B[2]-1||0,N=(B[7]||"0").substring(0,3);return U?new Date(Date.UTC(B[1],z,B[3]||1,B[4]||0,B[5]||0,B[6]||0,N)):new Date(B[1],z,B[3]||1,B[4]||0,B[5]||0,B[6]||0,N)}}return new Date(j)}(O),this.$x=O.x||{},this.init()},E.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},E.$utils=function(){return w},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(O,Q){var j=T(O);return this.startOf(Q)&lt;=j&amp;&amp;j&lt;=this.endOf(Q)},E.isAfter=function(O,Q){return T(O)&lt;this.startOf(Q)},E.isBefore=function(O,Q){return this.endOf(Q)&lt;T(O)},E.$g=function(O,Q,j){return w.u(O)?this[Q]:this.set(j,O)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(O,Q){var j=this,U=!!w.u(Q)||Q,B=w.p(O),z=function(W,G){var ee=w.w(j.$u?Date.UTC(j.$y,G,W):new Date(j.$y,G,W),j);return U?ee:ee.endOf(a)},N=function(W,G){return w.w(j.toDate()[W].apply(j.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(G)),j)},V=this.$W,re=this.$M,ce=this.$D,ge="set"+(this.$u?"UTC":"");switch(B){case c:return U?z(1,0):z(31,11);case u:return U?z(1,re):z(0,re+1);case l:var ae=this.$locale().weekStart||0,Y=(V&lt;ae?V+7:V)-ae;return z(U?ce-Y:ce+(6-Y),re);case a:case p:return N(ge+"Hours",0);case s:return N(ge+"Minutes",1);case i:return N(ge+"Seconds",2);case o:return N(ge+"Milliseconds",3);default:return this.clone()}},E.endOf=function(O){return this.startOf(O,!1)},E.$set=function(O,Q){var j,U=w.p(O),B="set"+(this.$u?"UTC":""),z=(j={},j[a]=B+"Date",j[p]=B+"Date",j[u]=B+"Month",j[c]=B+"FullYear",j[s]=B+"Hours",j[i]=B+"Minutes",j[o]=B+"Seconds",j[n]=B+"Milliseconds",j)[U],N=U===a?this.$D+(Q-this.$W):Q;if(U===u||U===c){var V=this.clone().set(p,1);V.$d[z](N),V.init(),this.$d=V.set(p,Math.min(this.$D,V.daysInMonth())).$d}else z&amp;&amp;this.$d[z](N);return this.init(),this},E.set=function(O,Q){return this.clone().$set(O,Q)},E.get=function(O){return this[w.p(O)]()},E.add=function(O,Q){var j,U=this;O=Number(O);var B=w.p(Q),z=function(re){var ce=T(U);return w.w(ce.date(ce.date()+Math.round(re*O)),U)};if(B===u)return this.set(u,this.$M+O);if(B===c)return this.set(c,this.$y+O);if(B===a)return z(1);if(B===l)return z(7);var N=(j={},j[i]=e,j[s]=t,j[o]=r,j)[B]||1,V=this.$d.getTime()+O*N;return w.w(V,this)},E.subtract=function(O,Q){return this.add(-1*O,Q)},E.format=function(O){var Q=this,j=this.$locale();if(!this.isValid())return j.invalidDate||h;var U=O||"YYYY-MM-DDTHH:mm:ssZ",B=w.z(this),z=this.$H,N=this.$m,V=this.$M,re=j.weekdays,ce=j.months,ge=function(G,ee,F,L){return G&amp;&amp;(G[ee]||G(Q,U))||F[ee].slice(0,L)},ae=function(G){return w.s(z%12||12,G,"0")},Y=j.meridiem||function(G,ee,F){var L=G&lt;12?"AM":"PM";return F?L.toLowerCase():L},W={YY:String(this.$y).slice(-2),YYYY:this.$y,M:V+1,MM:w.s(V+1,2,"0"),MMM:ge(j.monthsShort,V,ce,3),MMMM:ge(ce,V),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:ge(j.weekdaysMin,this.$W,re,2),ddd:ge(j.weekdaysShort,this.$W,re,3),dddd:re[this.$W],H:String(z),HH:w.s(z,2,"0"),h:ae(1),hh:ae(2),a:Y(z,N,!0),A:Y(z,N,!1),m:String(N),mm:w.s(N,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:B};return U.replace(m,function(G,ee){return ee||W[G]||B.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(O,Q,j){var U,B=w.p(Q),z=T(O),N=(z.utcOffset()-this.utcOffset())*e,V=this-z,re=w.m(this,z);return re=(U={},U[c]=re/12,U[u]=re,U[d]=re/3,U[l]=(V-N)/6048e5,U[a]=(V-N)/864e5,U[s]=V/t,U[i]=V/e,U[o]=V/r,U)[B]||V,j?re:w.a(re)},E.daysInMonth=function(){return this.endOf(u).$D},E.$locale=function(){return x[this.$L]},E.locale=function(O,Q){if(!O)return this.$L;var j=this.clone(),U=S(O,Q,!0);return U&amp;&amp;(j.$L=U),j},E.clone=function(){return w.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},I}(),A=k.prototype;return T.prototype=A,[["$ms",n],["$s",o],["$m",i],["$H",s],["$W",a],["$M",u],["$y",c],["$D",p]].forEach(function(I){A[I[1]]=function(E){return this.$g(E,I[0],I[1])}}),T.extend=function(I,E){return I.$i||(I(E,k,T),I.$i=!0),T},T.locale=S,T.isDayjs=y,T.unix=function(I){return T(1e3*I)},T.en=x[C],T.Ls=x,T.p={},T})});var Q7=Qt((_L,FL)=&gt;{(function(r,e){typeof _L=="object"&amp;&amp;typeof FL!="undefined"?FL.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_locale_en=e()})(_L,function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var e=["th","st","nd","rd"],t=r%100;return"["+r+(e[(t-20)%10]||e[t]||e[0])+"]"}}})});var J7=Qt((ML,NL)=&gt;{(function(r,e){typeof ML=="object"&amp;&amp;typeof NL!="undefined"?NL.exports=e(Sh()):typeof define=="function"&amp;&amp;define.amd?define(["dayjs"],e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_locale_ja=e(r.dayjs)})(ML,function(r){"use strict";function e(o){return o&amp;&amp;typeof o=="object"&amp;&amp;"default"in o?o:{default:o}}var t=e(r),n={name:"ja",weekdays:"\u65E5\u66DC\u65E5_\u6708\u66DC\u65E5_\u706B\u66DC\u65E5_\u6C34\u66DC\u65E5_\u6728\u66DC\u65E5_\u91D1\u66DC\u65E5_\u571F\u66DC\u65E5".split("_"),weekdaysShort:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),weekdaysMin:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(o){return o+"\u65E5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5 HH:mm",LLLL:"YYYY\u5E74M\u6708D\u65E5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5(ddd) HH:mm"},meridiem:function(o){return o&lt;12?"\u5348\u524D":"\u5348\u5F8C"},relativeTime:{future:"%s\u5F8C",past:"%s\u524D",s:"\u6570\u79D2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65E5",dd:"%d\u65E5",M:"1\u30F6\u6708",MM:"%d\u30F6\u6708",y:"1\u5E74",yy:"%d\u5E74"}};return t.default.locale(n,null,!0),n})});var Z7=Qt((BL,RL)=&gt;{(function(r,e){typeof BL=="object"&amp;&amp;typeof RL!="undefined"?RL.exports=e(Sh()):typeof define=="function"&amp;&amp;define.amd?define(["dayjs"],e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_locale_zh_tw=e(r.dayjs)})(BL,function(r){"use strict";function e(o){return o&amp;&amp;typeof o=="object"&amp;&amp;"default"in o?o:{default:o}}var t=e(r),n={name:"zh-tw",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u9031\u65E5_\u9031\u4E00_\u9031\u4E8C_\u9031\u4E09_\u9031\u56DB_\u9031\u4E94_\u9031\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(o,i){return i==="W"?o+"\u9031":o+"\u65E5"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5 HH:mm",LLLL:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5167",past:"%s\u524D",s:"\u5E7E\u79D2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5C0F\u6642",hh:"%d \u5C0F\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500B\u6708",MM:"%d \u500B\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(o,i){var s=100*o+i;return s&lt;600?"\u51CC\u6668":s&lt;900?"\u65E9\u4E0A":s&lt;1100?"\u4E0A\u5348":s&lt;1300?"\u4E2D\u5348":s&lt;1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return t.default.locale(n,null,!0),n})});var e$=Qt((LL,OL)=&gt;{(function(r,e){typeof LL=="object"&amp;&amp;typeof OL!="undefined"?OL.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_localizedFormat=e()})(LL,function(){"use strict";var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(e,t,n){var o=t.prototype,i=o.format;n.en.formats=r,o.format=function(s){s===void 0&amp;&amp;(s="YYYY-MM-DDTHH:mm:ssZ");var a=this.$locale().formats,l=function(u,d){return u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(c,p,h){var f=h&amp;&amp;h.toUpperCase();return p||d[h]||r[h]||d[f].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,g,v){return g||v.slice(1)})})}(s,a===void 0?{}:a);return i.call(this,l)}}})});var t$=Qt((UL,zL)=&gt;{(function(r,e){typeof UL=="object"&amp;&amp;typeof zL!="undefined"?zL.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_relativeTime=e()})(UL,function(){"use strict";return function(r,e,t){r=r||{};var n=e.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(a,l,u,d){return n.fromToBase(a,l,u,d)}t.en.relativeTime=o,n.fromToBase=function(a,l,u,d,c){for(var p,h,f,m=u.$locale().relativeTime||o,g=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=g.length,b=0;b&lt;v;b+=1){var C=g[b];C.d&amp;&amp;(p=d?t(a).diff(u,C.d,!0):u.diff(a,C.d,!0));var x=(r.rounding||Math.round)(Math.abs(p));if(f=p&gt;0,x&lt;=C.r||!C.r){x&lt;=1&amp;&amp;b&gt;0&amp;&amp;(C=g[b-1]);var y=m[C.l];c&amp;&amp;(x=c(""+x)),h=typeof y=="string"?y.replace("%d",x):y(x,l,C.l,f);break}}if(l)return h;var S=f?m.future:m.past;return typeof S=="function"?S(h):S.replace("%s",h)},n.to=function(a,l){return i(a,l,this,!0)},n.from=function(a,l){return i(a,l,this)};var s=function(a){return a.$u?t.utc():t()};n.toNow=function(a){return this.to(s(this),a)},n.fromNow=function(a){return this.from(s(this),a)}}})});var r$=Qt((HL,GL)=&gt;{(function(r,e){typeof HL=="object"&amp;&amp;typeof GL!="undefined"?GL.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_updateLocale=e()})(HL,function(){"use strict";return function(r,e,t){t.updateLocale=function(n,o){var i=t.Ls[n];if(i)return(o?Object.keys(o):[]).forEach(function(s){i[s]=o[s]}),i}}})});var h$=Qt(kn=&gt;{"use strict";var gT=Symbol.for("react.element"),Kfe=Symbol.for("react.portal"),qfe=Symbol.for("react.fragment"),Yfe=Symbol.for("react.strict_mode"),Xfe=Symbol.for("react.profiler"),Qfe=Symbol.for("react.provider"),Jfe=Symbol.for("react.context"),Zfe=Symbol.for("react.forward_ref"),eme=Symbol.for("react.suspense"),tme=Symbol.for("react.memo"),rme=Symbol.for("react.lazy"),n$=Symbol.iterator;function nme(r){return r===null||typeof r!="object"?null:(r=n$&amp;&amp;r[n$]||r["@@iterator"],typeof r=="function"?r:null)}var s$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a$=Object.assign,l$={};function NC(r,e,t){this.props=r,this.context=e,this.refs=l$,this.updater=t||s$}NC.prototype.isReactComponent={};NC.prototype.setState=function(r,e){if(typeof r!="object"&amp;&amp;typeof r!="function"&amp;&amp;r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};NC.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function u$(){}u$.prototype=NC.prototype;function $L(r,e,t){this.props=r,this.context=e,this.refs=l$,this.updater=t||s$}var VL=$L.prototype=new u$;VL.constructor=$L;a$(VL,NC.prototype);VL.isPureReactComponent=!0;var o$=Array.isArray,d$=Object.prototype.hasOwnProperty,jL={current:null},c$={key:!0,ref:!0,__self:!0,__source:!0};function p$(r,e,t){var n,o={},i=null,s=null;if(e!=null)for(n in e.ref!==void 0&amp;&amp;(s=e.ref),e.key!==void 0&amp;&amp;(i=""+e.key),e)d$.call(e,n)&amp;&amp;!c$.hasOwnProperty(n)&amp;&amp;(o[n]=e[n]);var a=arguments.length-2;if(a===1)o.children=t;else if(1&lt;a){for(var l=Array(a),u=0;u&lt;a;u++)l[u]=arguments[u+2];o.children=l}if(r&amp;&amp;r.defaultProps)for(n in a=r.defaultProps,a)o[n]===void 0&amp;&amp;(o[n]=a[n]);return{$$typeof:gT,type:r,key:i,ref:s,props:o,_owner:jL.current}}function ome(r,e){return{$$typeof:gT,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function KL(r){return typeof r=="object"&amp;&amp;r!==null&amp;&amp;r.$$typeof===gT}function ime(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var i$=/\/+/g;function WL(r,e){return typeof r=="object"&amp;&amp;r!==null&amp;&amp;r.key!=null?ime(""+r.key):e.toString(36)}function MA(r,e,t,n,o){var i=typeof r;(i==="undefined"||i==="boolean")&amp;&amp;(r=null);var s=!1;if(r===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(r.$$typeof){case gT:case Kfe:s=!0}}if(s)return s=r,o=o(s),r=n===""?"."+WL(s,0):n,o$(o)?(t="",r!=null&amp;&amp;(t=r.replace(i$,"$&amp;/")+"/"),MA(o,e,t,"",function(u){return u})):o!=null&amp;&amp;(KL(o)&amp;&amp;(o=ome(o,t+(!o.key||s&amp;&amp;s.key===o.key?"":(""+o.key).replace(i$,"$&amp;/")+"/")+r)),e.push(o)),1;if(s=0,n=n===""?".":n+":",o$(r))for(var a=0;a&lt;r.length;a++){i=r[a];var l=n+WL(i,a);s+=MA(i,e,t,l,o)}else if(l=nme(r),typeof l=="function")for(r=l.call(r),a=0;!(i=r.next()).done;)i=i.value,l=n+WL(i,a++),s+=MA(i,e,t,l,o);else if(i==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function FA(r,e,t){if(r==null)return r;var n=[],o=0;return MA(r,n,"","",function(i){return e.call(t,i,o++)}),n}function sme(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&amp;&amp;(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&amp;&amp;(r._status=2,r._result=t)}),r._status===-1&amp;&amp;(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var qa={current:null},NA={transition:null},ame={ReactCurrentDispatcher:qa,ReactCurrentBatchConfig:NA,ReactCurrentOwner:jL};kn.Children={map:FA,forEach:function(r,e,t){FA(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return FA(r,function(){e++}),e},toArray:function(r){return FA(r,function(e){return e})||[]},only:function(r){if(!KL(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};kn.Component=NC;kn.Fragment=qfe;kn.Profiler=Xfe;kn.PureComponent=$L;kn.StrictMode=Yfe;kn.Suspense=eme;kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ame;kn.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=a$({},r.props),o=r.key,i=r.ref,s=r._owner;if(e!=null){if(e.ref!==void 0&amp;&amp;(i=e.ref,s=jL.current),e.key!==void 0&amp;&amp;(o=""+e.key),r.type&amp;&amp;r.type.defaultProps)var a=r.type.defaultProps;for(l in e)d$.call(e,l)&amp;&amp;!c$.hasOwnProperty(l)&amp;&amp;(n[l]=e[l]===void 0&amp;&amp;a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1&lt;l){a=Array(l);for(var u=0;u&lt;l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:gT,type:r.type,key:o,ref:i,props:n,_owner:s}};kn.createContext=function(r){return r={$$typeof:Jfe,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:Qfe,_context:r},r.Consumer=r};kn.createElement=p$;kn.createFactory=function(r){var e=p$.bind(null,r);return e.type=r,e};kn.createRef=function(){return{current:null}};kn.forwardRef=function(r){return{$$typeof:Zfe,render:r}};kn.isValidElement=KL;kn.lazy=function(r){return{$$typeof:rme,_payload:{_status:-1,_result:r},_init:sme}};kn.memo=function(r,e){return{$$typeof:tme,type:r,compare:e===void 0?null:e}};kn.startTransition=function(r){var e=NA.transition;NA.transition={};try{r()}finally{NA.transition=e}};kn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};kn.useCallback=function(r,e){return qa.current.useCallback(r,e)};kn.useContext=function(r){return qa.current.useContext(r)};kn.useDebugValue=function(){};kn.useDeferredValue=function(r){return qa.current.useDeferredValue(r)};kn.useEffect=function(r,e){return qa.current.useEffect(r,e)};kn.useId=function(){return qa.current.useId()};kn.useImperativeHandle=function(r,e,t){return qa.current.useImperativeHandle(r,e,t)};kn.useInsertionEffect=function(r,e){return qa.current.useInsertionEffect(r,e)};kn.useLayoutEffect=function(r,e){return qa.current.useLayoutEffect(r,e)};kn.useMemo=function(r,e){return qa.current.useMemo(r,e)};kn.useReducer=function(r,e,t){return qa.current.useReducer(r,e,t)};kn.useRef=function(r){return qa.current.useRef(r)};kn.useState=function(r){return qa.current.useState(r)};kn.useSyncExternalStore=function(r,e,t){return qa.current.useSyncExternalStore(r,e,t)};kn.useTransition=function(){return qa.current.useTransition()};kn.version="18.2.0"});var ve=Qt((EOe,f$)=&gt;{"use strict";f$.exports=h$()});var T$=Qt(Uo=&gt;{"use strict";function QL(r,e){var t=r.length;r.push(e);e:for(;0&lt;t;){var n=t-1&gt;&gt;&gt;1,o=r[n];if(0&lt;BA(o,e))r[n]=e,r[t]=o,t=n;else break e}}function Vd(r){return r.length===0?null:r[0]}function LA(r){if(r.length===0)return null;var e=r[0],t=r.pop();if(t!==e){r[0]=t;e:for(var n=0,o=r.length,i=o&gt;&gt;&gt;1;n&lt;i;){var s=2*(n+1)-1,a=r[s],l=s+1,u=r[l];if(0&gt;BA(a,t))l&lt;o&amp;&amp;0&gt;BA(u,a)?(r[n]=u,r[l]=t,n=l):(r[n]=a,r[s]=t,n=s);else if(l&lt;o&amp;&amp;0&gt;BA(u,t))r[n]=u,r[l]=t,n=l;else break e}}return e}function BA(r,e){var t=r.sortIndex-e.sortIndex;return t!==0?t:r.id-e.id}typeof performance=="object"&amp;&amp;typeof performance.now=="function"?(m$=performance,Uo.unstable_now=function(){return m$.now()}):(qL=Date,g$=qL.now(),Uo.unstable_now=function(){return qL.now()-g$});var m$,qL,g$,$c=[],bm=[],lme=1,Ru=null,xa=3,OA=!1,ib=!1,bT=!1,y$=typeof setTimeout=="function"?setTimeout:null,C$=typeof clearTimeout=="function"?clearTimeout:null,v$=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&amp;&amp;navigator.scheduling!==void 0&amp;&amp;navigator.scheduling.isInputPending!==void 0&amp;&amp;navigator.scheduling.isInputPending.bind(navigator.scheduling);function JL(r){for(var e=Vd(bm);e!==null;){if(e.callback===null)LA(bm);else if(e.startTime&lt;=r)LA(bm),e.sortIndex=e.expirationTime,QL($c,e);else break;e=Vd(bm)}}function ZL(r){if(bT=!1,JL(r),!ib)if(Vd($c)!==null)ib=!0,tO(eO);else{var e=Vd(bm);e!==null&amp;&amp;rO(ZL,e.startTime-r)}}function eO(r,e){ib=!1,bT&amp;&amp;(bT=!1,C$(yT),yT=-1),OA=!0;var t=xa;try{for(JL(e),Ru=Vd($c);Ru!==null&amp;&amp;(!(Ru.expirationTime&gt;e)||r&amp;&amp;!w$());){var n=Ru.callback;if(typeof n=="function"){Ru.callback=null,xa=Ru.priorityLevel;var o=n(Ru.expirationTime&lt;=e);e=Uo.unstable_now(),typeof o=="function"?Ru.callback=o:Ru===Vd($c)&amp;&amp;LA($c),JL(e)}else LA($c);Ru=Vd($c)}if(Ru!==null)var i=!0;else{var s=Vd(bm);s!==null&amp;&amp;rO(ZL,s.startTime-e),i=!1}return i}finally{Ru=null,xa=t,OA=!1}}var UA=!1,RA=null,yT=-1,S$=5,x$=-1;function w$(){return!(Uo.unstable_now()-x$&lt;S$)}function YL(){if(RA!==null){var r=Uo.unstable_now();x$=r;var e=!0;try{e=RA(!0,r)}finally{e?vT():(UA=!1,RA=null)}}else UA=!1}var vT;typeof v$=="function"?vT=function(){v$(YL)}:typeof MessageChannel!="undefined"?(XL=new MessageChannel,b$=XL.port2,XL.port1.onmessage=YL,vT=function(){b$.postMessage(null)}):vT=function(){y$(YL,0)};var XL,b$;function tO(r){RA=r,UA||(UA=!0,vT())}function rO(r,e){yT=y$(function(){r(Uo.unstable_now())},e)}Uo.unstable_IdlePriority=5;Uo.unstable_ImmediatePriority=1;Uo.unstable_LowPriority=4;Uo.unstable_NormalPriority=3;Uo.unstable_Profiling=null;Uo.unstable_UserBlockingPriority=2;Uo.unstable_cancelCallback=function(r){r.callback=null};Uo.unstable_continueExecution=function(){ib||OA||(ib=!0,tO(eO))};Uo.unstable_forceFrameRate=function(r){0&gt;r||125&lt;r?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S$=0&lt;r?Math.floor(1e3/r):5};Uo.unstable_getCurrentPriorityLevel=function(){return xa};Uo.unstable_getFirstCallbackNode=function(){return Vd($c)};Uo.unstable_next=function(r){switch(xa){case 1:case 2:case 3:var e=3;break;default:e=xa}var t=xa;xa=e;try{return r()}finally{xa=t}};Uo.unstable_pauseExecution=function(){};Uo.unstable_requestPaint=function(){};Uo.unstable_runWithPriority=function(r,e){switch(r){case 1:case 2:case 3:case 4:case 5:break;default:r=3}var t=xa;xa=r;try{return e()}finally{xa=t}};Uo.unstable_scheduleCallback=function(r,e,t){var n=Uo.unstable_now();switch(typeof t=="object"&amp;&amp;t!==null?(t=t.delay,t=typeof t=="number"&amp;&amp;0&lt;t?n+t:n):t=n,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=t+o,r={id:lme++,callback:e,priorityLevel:r,startTime:t,expirationTime:o,sortIndex:-1},t&gt;n?(r.sortIndex=t,QL(bm,r),Vd($c)===null&amp;&amp;r===Vd(bm)&amp;&amp;(bT?(C$(yT),yT=-1):bT=!0,rO(ZL,t-n))):(r.sortIndex=o,QL($c,r),ib||OA||(ib=!0,tO(eO))),r};Uo.unstable_shouldYield=w$;Uo.unstable_wrapCallback=function(r){var e=xa;return function(){var t=xa;xa=e;try{return r.apply(this,arguments)}finally{xa=t}}}});var k$=Qt((FOe,D$)=&gt;{"use strict";D$.exports=T$()});var Fj=Qt(tu=&gt;{"use strict";var M9=ve(),Zl=k$();function ht(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t&lt;arguments.length;t++)e+="&amp;args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N9=new Set,HT={};function bb(r,e){t0(r,e),t0(r+"Capture",e)}function t0(r,e){for(HT[r]=e,r=0;r&lt;e.length;r++)N9.add(e[r])}var Ph=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),DO=Object.prototype.hasOwnProperty,ume=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P$={},A$={};function dme(r){return DO.call(A$,r)?!0:DO.call(P$,r)?!1:ume.test(r)?A$[r]=!0:(P$[r]=!0,!1)}function cme(r,e,t,n){if(t!==null&amp;&amp;t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&amp;&amp;r!=="aria-");default:return!1}}function pme(r,e,t,n){if(e===null||typeof e=="undefined"||cme(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1&gt;e}return!1}function Qa(r,e,t,n,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var oa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){oa[r]=new Qa(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];oa[e]=new Qa(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){oa[r]=new Qa(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){oa[r]=new Qa(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){oa[r]=new Qa(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){oa[r]=new Qa(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){oa[r]=new Qa(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){oa[r]=new Qa(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){oa[r]=new Qa(r,5,!1,r.toLowerCase(),null,!1,!1)});var v3=/[\-:]([a-z])/g;function b3(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(v3,b3);oa[e]=new Qa(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(v3,b3);oa[e]=new Qa(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(v3,b3);oa[e]=new Qa(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){oa[r]=new Qa(r,1,!1,r.toLowerCase(),null,!1,!1)});oa.xlinkHref=new Qa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){oa[r]=new Qa(r,1,!1,r.toLowerCase(),null,!0,!0)});function y3(r,e,t,n){var o=oa.hasOwnProperty(e)?oa[e]:null;(o!==null?o.type!==0:n||!(2&lt;e.length)||e[0]!=="o"&amp;&amp;e[0]!=="O"||e[1]!=="n"&amp;&amp;e[1]!=="N")&amp;&amp;(pme(e,t,o,n)&amp;&amp;(t=null),n||o===null?dme(e)&amp;&amp;(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):o.mustUseProperty?r[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,n=o.attributeNamespace,t===null?r.removeAttribute(e):(o=o.type,t=o===3||o===4&amp;&amp;t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var _h=M9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zA=Symbol.for("react.element"),LC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),C3=Symbol.for("react.strict_mode"),kO=Symbol.for("react.profiler"),B9=Symbol.for("react.provider"),R9=Symbol.for("react.context"),S3=Symbol.for("react.forward_ref"),PO=Symbol.for("react.suspense"),AO=Symbol.for("react.suspense_list"),x3=Symbol.for("react.memo"),Cm=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var L9=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var I$=Symbol.iterator;function CT(r){return r===null||typeof r!="object"?null:(r=I$&amp;&amp;r[I$]||r["@@iterator"],typeof r=="function"?r:null)}var bi=Object.assign,nO;function AT(r){if(nO===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);nO=e&amp;&amp;e[1]||""}return`
`+nO+r}var oO=!1;function iO(r,e){if(!r||oO)return"";oO=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&amp;&amp;Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&amp;&amp;n&amp;&amp;typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=n.stack.split(`
`),s=o.length-1,a=i.length-1;1&lt;=s&amp;&amp;0&lt;=a&amp;&amp;o[s]!==i[a];)a--;for(;1&lt;=s&amp;&amp;0&lt;=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0&gt;a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return r.displayName&amp;&amp;l.includes("&lt;anonymous&gt;")&amp;&amp;(l=l.replace("&lt;anonymous&gt;",r.displayName)),l}while(1&lt;=s&amp;&amp;0&lt;=a);break}}}finally{oO=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?AT(r):""}function hme(r){switch(r.tag){case 5:return AT(r.type);case 16:return AT("Lazy");case 13:return AT("Suspense");case 19:return AT("SuspenseList");case 0:case 2:case 15:return r=iO(r.type,!1),r;case 11:return r=iO(r.type.render,!1),r;case 1:return r=iO(r.type,!0),r;default:return""}}function IO(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case OC:return"Fragment";case LC:return"Portal";case kO:return"Profiler";case C3:return"StrictMode";case PO:return"Suspense";case AO:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case R9:return(r.displayName||"Context")+".Consumer";case B9:return(r._context.displayName||"Context")+".Provider";case S3:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x3:return e=r.displayName||null,e!==null?e:IO(r.type)||"Memo";case Cm:e=r._payload,r=r._init;try{return IO(r(e))}catch(t){}}return null}function fme(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IO(e);case 8:return e===C3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nm(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function O9(r){var e=r.type;return(r=r.nodeName)&amp;&amp;r.toLowerCase()==="input"&amp;&amp;(e==="checkbox"||e==="radio")}function mme(r){var e=O9(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&amp;&amp;typeof t!="undefined"&amp;&amp;typeof t.get=="function"&amp;&amp;typeof t.set=="function"){var o=t.get,i=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function HA(r){r._valueTracker||(r._valueTracker=mme(r))}function U9(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&amp;&amp;(n=O9(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function mI(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(e){return r.body}}function EO(r,e){var t=e.checked;return bi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function E$(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Nm(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function z9(r,e){e=e.checked,e!=null&amp;&amp;y3(r,"checked",e,!1)}function _O(r,e){z9(r,e);var t=Nm(e.value),n=e.type;if(t!=null)n==="number"?(t===0&amp;&amp;r.value===""||r.value!=t)&amp;&amp;(r.value=""+t):r.value!==""+t&amp;&amp;(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?FO(r,e.type,t):e.hasOwnProperty("defaultValue")&amp;&amp;FO(r,e.type,Nm(e.defaultValue)),e.checked==null&amp;&amp;e.defaultChecked!=null&amp;&amp;(r.defaultChecked=!!e.defaultChecked)}function _$(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&amp;&amp;n!=="reset"||e.value!==void 0&amp;&amp;e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&amp;&amp;(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&amp;&amp;(r.name=t)}function FO(r,e,t){(e!=="number"||mI(r.ownerDocument)!==r)&amp;&amp;(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&amp;&amp;(r.defaultValue=""+t))}var IT=Array.isArray;function YC(r,e,t,n){if(r=r.options,e){e={};for(var o=0;o&lt;t.length;o++)e["$"+t[o]]=!0;for(t=0;t&lt;r.length;t++)o=e.hasOwnProperty("$"+r[t].value),r[t].selected!==o&amp;&amp;(r[t].selected=o),o&amp;&amp;n&amp;&amp;(r[t].defaultSelected=!0)}else{for(t=""+Nm(t),e=null,o=0;o&lt;r.length;o++){if(r[o].value===t){r[o].selected=!0,n&amp;&amp;(r[o].defaultSelected=!0);return}e!==null||r[o].disabled||(e=r[o])}e!==null&amp;&amp;(e.selected=!0)}}function MO(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ht(91));return bi({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function F$(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ht(92));if(IT(t)){if(1&lt;t.length)throw Error(ht(93));t=t[0]}e=t}e==null&amp;&amp;(e=""),t=e}r._wrapperState={initialValue:Nm(t)}}function H9(r,e){var t=Nm(e.value),n=Nm(e.defaultValue);t!=null&amp;&amp;(t=""+t,t!==r.value&amp;&amp;(r.value=t),e.defaultValue==null&amp;&amp;r.defaultValue!==t&amp;&amp;(r.defaultValue=t)),n!=null&amp;&amp;(r.defaultValue=""+n)}function M$(r){var e=r.textContent;e===r._wrapperState.initialValue&amp;&amp;e!==""&amp;&amp;e!==null&amp;&amp;(r.value=e)}function G9(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function NO(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?G9(e):r==="http://www.w3.org/2000/svg"&amp;&amp;e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var GA,W9=function(r){return typeof MSApp!="undefined"&amp;&amp;MSApp.execUnsafeLocalFunction?function(e,t,n,o){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,o)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(GA=GA||document.createElement("div"),GA.innerHTML="&lt;svg&gt;"+e.valueOf().toString()+"&lt;/svg&gt;",e=GA.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function GT(r,e){if(e){var t=r.firstChild;if(t&amp;&amp;t===r.lastChild&amp;&amp;t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var FT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gme=["Webkit","ms","Moz","O"];Object.keys(FT).forEach(function(r){gme.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),FT[e]=FT[r]})});function $9(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||FT.hasOwnProperty(r)&amp;&amp;FT[r]?(""+e).trim():e+"px"}function V9(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,o=$9(t,e[t],n);t==="float"&amp;&amp;(t="cssFloat"),n?r.setProperty(t,o):r[t]=o}}var vme=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BO(r,e){if(e){if(vme[r]&amp;&amp;(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ht(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ht(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ht(61))}if(e.style!=null&amp;&amp;typeof e.style!="object")throw Error(ht(62))}}function RO(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LO=null;function w3(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&amp;&amp;(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var OO=null,XC=null,QC=null;function N$(r){if(r=s1(r)){if(typeof OO!="function")throw Error(ht(280));var e=r.stateNode;e&amp;&amp;(e=WI(e),OO(r.stateNode,r.type,e))}}function j9(r){XC?QC?QC.push(r):QC=[r]:XC=r}function K9(){if(XC){var r=XC,e=QC;if(QC=XC=null,N$(r),e)for(r=0;r&lt;e.length;r++)N$(e[r])}}function q9(r,e){return r(e)}function Y9(){}var sO=!1;function X9(r,e,t){if(sO)return r(e,t);sO=!0;try{return q9(r,e,t)}finally{sO=!1,(XC!==null||QC!==null)&amp;&amp;(Y9(),K9())}}function WT(r,e){var t=r.stateNode;if(t===null)return null;var n=WI(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&amp;&amp;typeof t!="function")throw Error(ht(231,e,typeof t));return t}var UO=!1;if(Ph)try{BC={},Object.defineProperty(BC,"passive",{get:function(){UO=!0}}),window.addEventListener("test",BC,BC),window.removeEventListener("test",BC,BC)}catch(r){UO=!1}var BC;function bme(r,e,t,n,o,i,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var MT=!1,gI=null,vI=!1,zO=null,yme={onError:function(r){MT=!0,gI=r}};function Cme(r,e,t,n,o,i,s,a,l){MT=!1,gI=null,bme.apply(yme,arguments)}function Sme(r,e,t,n,o,i,s,a,l){if(Cme.apply(this,arguments),MT){if(MT){var u=gI;MT=!1,gI=null}else throw Error(ht(198));vI||(vI=!0,zO=u)}}function yb(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,(e.flags&amp;4098)!==0&amp;&amp;(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function Q9(r){if(r.tag===13){var e=r.memoizedState;if(e===null&amp;&amp;(r=r.alternate,r!==null&amp;&amp;(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function B$(r){if(yb(r)!==r)throw Error(ht(188))}function xme(r){var e=r.alternate;if(!e){if(e=yb(r),e===null)throw Error(ht(188));return e!==r?null:r}for(var t=r,n=e;;){var o=t.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){t=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===t)return B$(o),r;if(i===n)return B$(o),e;i=i.sibling}throw Error(ht(188))}if(t.return!==n.return)t=o,n=i;else{for(var s=!1,a=o.child;a;){if(a===t){s=!0,t=o,n=i;break}if(a===n){s=!0,n=o,t=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===t){s=!0,t=i,n=o;break}if(a===n){s=!0,n=i,t=o;break}a=a.sibling}if(!s)throw Error(ht(189))}}if(t.alternate!==n)throw Error(ht(190))}if(t.tag!==3)throw Error(ht(188));return t.stateNode.current===t?r:e}function J9(r){return r=xme(r),r!==null?Z9(r):null}function Z9(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=Z9(r);if(e!==null)return e;r=r.sibling}return null}var eV=Zl.unstable_scheduleCallback,R$=Zl.unstable_cancelCallback,wme=Zl.unstable_shouldYield,Tme=Zl.unstable_requestPaint,Ri=Zl.unstable_now,Dme=Zl.unstable_getCurrentPriorityLevel,T3=Zl.unstable_ImmediatePriority,tV=Zl.unstable_UserBlockingPriority,bI=Zl.unstable_NormalPriority,kme=Zl.unstable_LowPriority,rV=Zl.unstable_IdlePriority,UI=null,qc=null;function Pme(r){if(qc&amp;&amp;typeof qc.onCommitFiberRoot=="function")try{qc.onCommitFiberRoot(UI,r,void 0,(r.current.flags&amp;128)===128)}catch(e){}}var Xd=Math.clz32?Math.clz32:Eme,Ame=Math.log,Ime=Math.LN2;function Eme(r){return r&gt;&gt;&gt;=0,r===0?32:31-(Ame(r)/Ime|0)|0}var WA=64,$A=4194304;function ET(r){switch(r&amp;-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&amp;4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&amp;130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function yI(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,o=r.suspendedLanes,i=r.pingedLanes,s=t&amp;268435455;if(s!==0){var a=s&amp;~o;a!==0?n=ET(a):(i&amp;=s,i!==0&amp;&amp;(n=ET(i)))}else s=t&amp;~o,s!==0?n=ET(s):i!==0&amp;&amp;(n=ET(i));if(n===0)return 0;if(e!==0&amp;&amp;e!==n&amp;&amp;(e&amp;o)===0&amp;&amp;(o=n&amp;-n,i=e&amp;-e,o&gt;=i||o===16&amp;&amp;(i&amp;4194240)!==0))return e;if((n&amp;4)!==0&amp;&amp;(n|=t&amp;16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&amp;=n;0&lt;e;)t=31-Xd(e),o=1&lt;&lt;t,n|=r[t],e&amp;=~o;return n}function _me(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fme(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,o=r.expirationTimes,i=r.pendingLanes;0&lt;i;){var s=31-Xd(i),a=1&lt;&lt;s,l=o[s];l===-1?((a&amp;t)===0||(a&amp;n)!==0)&amp;&amp;(o[s]=_me(a,e)):l&lt;=e&amp;&amp;(r.expiredLanes|=a),i&amp;=~a}}function HO(r){return r=r.pendingLanes&amp;-1073741825,r!==0?r:r&amp;1073741824?1073741824:0}function nV(){var r=WA;return WA&lt;&lt;=1,(WA&amp;4194240)===0&amp;&amp;(WA=64),r}function aO(r){for(var e=[],t=0;31&gt;t;t++)e.push(r);return e}function o1(r,e,t){r.pendingLanes|=e,e!==536870912&amp;&amp;(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Xd(e),r[e]=t}function Mme(r,e){var t=r.pendingLanes&amp;~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&amp;=e,r.mutableReadLanes&amp;=e,r.entangledLanes&amp;=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0&lt;t;){var o=31-Xd(t),i=1&lt;&lt;o;e[o]=0,n[o]=-1,r[o]=-1,t&amp;=~i}}function D3(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Xd(t),o=1&lt;&lt;n;o&amp;e|r[n]&amp;e&amp;&amp;(r[n]|=e),t&amp;=~o}}var yo=0;function oV(r){return r&amp;=-r,1&lt;r?4&lt;r?(r&amp;268435455)!==0?16:536870912:4:1}var iV,k3,sV,aV,lV,GO=!1,VA=[],km=null,Pm=null,Am=null,$T=new Map,VT=new Map,xm=[],Nme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L$(r,e){switch(r){case"focusin":case"focusout":km=null;break;case"dragenter":case"dragleave":Pm=null;break;case"mouseover":case"mouseout":Am=null;break;case"pointerover":case"pointerout":$T.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":VT.delete(e.pointerId)}}function ST(r,e,t,n,o,i){return r===null||r.nativeEvent!==i?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},e!==null&amp;&amp;(e=s1(e),e!==null&amp;&amp;k3(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,o!==null&amp;&amp;e.indexOf(o)===-1&amp;&amp;e.push(o),r)}function Bme(r,e,t,n,o){switch(e){case"focusin":return km=ST(km,r,e,t,n,o),!0;case"dragenter":return Pm=ST(Pm,r,e,t,n,o),!0;case"mouseover":return Am=ST(Am,r,e,t,n,o),!0;case"pointerover":var i=o.pointerId;return $T.set(i,ST($T.get(i)||null,r,e,t,n,o)),!0;case"gotpointercapture":return i=o.pointerId,VT.set(i,ST(VT.get(i)||null,r,e,t,n,o)),!0}return!1}function uV(r){var e=lb(r.target);if(e!==null){var t=yb(e);if(t!==null){if(e=t.tag,e===13){if(e=Q9(t),e!==null){r.blockedOn=e,lV(r.priority,function(){sV(t)});return}}else if(e===3&amp;&amp;t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function iI(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0&lt;e.length;){var t=WO(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);LO=n,t.target.dispatchEvent(n),LO=null}else return e=s1(t),e!==null&amp;&amp;k3(e),r.blockedOn=t,!1;e.shift()}return!0}function O$(r,e,t){iI(r)&amp;&amp;t.delete(e)}function Rme(){GO=!1,km!==null&amp;&amp;iI(km)&amp;&amp;(km=null),Pm!==null&amp;&amp;iI(Pm)&amp;&amp;(Pm=null),Am!==null&amp;&amp;iI(Am)&amp;&amp;(Am=null),$T.forEach(O$),VT.forEach(O$)}function xT(r,e){r.blockedOn===e&amp;&amp;(r.blockedOn=null,GO||(GO=!0,Zl.unstable_scheduleCallback(Zl.unstable_NormalPriority,Rme)))}function jT(r){function e(o){return xT(o,r)}if(0&lt;VA.length){xT(VA[0],r);for(var t=1;t&lt;VA.length;t++){var n=VA[t];n.blockedOn===r&amp;&amp;(n.blockedOn=null)}}for(km!==null&amp;&amp;xT(km,r),Pm!==null&amp;&amp;xT(Pm,r),Am!==null&amp;&amp;xT(Am,r),$T.forEach(e),VT.forEach(e),t=0;t&lt;xm.length;t++)n=xm[t],n.blockedOn===r&amp;&amp;(n.blockedOn=null);for(;0&lt;xm.length&amp;&amp;(t=xm[0],t.blockedOn===null);)uV(t),t.blockedOn===null&amp;&amp;xm.shift()}var JC=_h.ReactCurrentBatchConfig,CI=!0;function Lme(r,e,t,n){var o=yo,i=JC.transition;JC.transition=null;try{yo=1,P3(r,e,t,n)}finally{yo=o,JC.transition=i}}function Ome(r,e,t,n){var o=yo,i=JC.transition;JC.transition=null;try{yo=4,P3(r,e,t,n)}finally{yo=o,JC.transition=i}}function P3(r,e,t,n){if(CI){var o=WO(r,e,t,n);if(o===null)fO(r,e,n,SI,t),L$(r,n);else if(Bme(o,r,e,t,n))n.stopPropagation();else if(L$(r,n),e&amp;4&amp;&amp;-1&lt;Nme.indexOf(r)){for(;o!==null;){var i=s1(o);if(i!==null&amp;&amp;iV(i),i=WO(r,e,t,n),i===null&amp;&amp;fO(r,e,n,SI,t),i===o)break;o=i}o!==null&amp;&amp;n.stopPropagation()}else fO(r,e,n,null,t)}}var SI=null;function WO(r,e,t,n){if(SI=null,r=w3(n),r=lb(r),r!==null)if(e=yb(r),e===null)r=null;else if(t=e.tag,t===13){if(r=Q9(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&amp;&amp;(r=null);return SI=r,null}function dV(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dme()){case T3:return 1;case tV:return 4;case bI:case kme:return 16;case rV:return 536870912;default:return 16}default:return 16}}var Tm=null,A3=null,sI=null;function cV(){if(sI)return sI;var r,e=A3,t=e.length,n,o="value"in Tm?Tm.value:Tm.textContent,i=o.length;for(r=0;r&lt;t&amp;&amp;e[r]===o[r];r++);var s=t-r;for(n=1;n&lt;=s&amp;&amp;e[t-n]===o[i-n];n++);return sI=o.slice(r,1&lt;n?1-n:void 0)}function aI(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&amp;&amp;e===13&amp;&amp;(r=13)):r=e,r===10&amp;&amp;(r=13),32&lt;=r||r===13?r:0}function jA(){return!0}function U$(){return!1}function eu(r){function e(t,n,o,i,s){this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&amp;&amp;(t=r[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jA:U$,this.isPropagationStopped=U$,this}return bi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&amp;&amp;(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&amp;&amp;(t.returnValue=!1),this.isDefaultPrevented=jA)},stopPropagation:function(){var t=this.nativeEvent;t&amp;&amp;(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&amp;&amp;(t.cancelBubble=!0),this.isPropagationStopped=jA)},persist:function(){},isPersistent:jA}),e}var l0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I3=eu(l0),i1=bi({},l0,{view:0,detail:0}),Ume=eu(i1),lO,uO,wT,zI=bi({},i1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:E3,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==wT&amp;&amp;(wT&amp;&amp;r.type==="mousemove"?(lO=r.screenX-wT.screenX,uO=r.screenY-wT.screenY):uO=lO=0,wT=r),lO)},movementY:function(r){return"movementY"in r?r.movementY:uO}}),z$=eu(zI),zme=bi({},zI,{dataTransfer:0}),Hme=eu(zme),Gme=bi({},i1,{relatedTarget:0}),dO=eu(Gme),Wme=bi({},l0,{animationName:0,elapsedTime:0,pseudoElement:0}),$me=eu(Wme),Vme=bi({},l0,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),jme=eu(Vme),Kme=bi({},l0,{data:0}),H$=eu(Kme),qme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qme(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=Xme[r])?!!e[r]:!1}function E3(){return Qme}var Jme=bi({},i1,{key:function(r){if(r.key){var e=qme[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=aI(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Yme[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:E3,charCode:function(r){return r.type==="keypress"?aI(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?aI(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Zme=eu(Jme),ege=bi({},zI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G$=eu(ege),tge=bi({},i1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:E3}),rge=eu(tge),nge=bi({},l0,{propertyName:0,elapsedTime:0,pseudoElement:0}),oge=eu(nge),ige=bi({},zI,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),sge=eu(ige),age=[9,13,27,32],_3=Ph&amp;&amp;"CompositionEvent"in window,NT=null;Ph&amp;&amp;"documentMode"in document&amp;&amp;(NT=document.documentMode);var lge=Ph&amp;&amp;"TextEvent"in window&amp;&amp;!NT,pV=Ph&amp;&amp;(!_3||NT&amp;&amp;8&lt;NT&amp;&amp;11&gt;=NT),W$=String.fromCharCode(32),$$=!1;function hV(r,e){switch(r){case"keyup":return age.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fV(r){return r=r.detail,typeof r=="object"&amp;&amp;"data"in r?r.data:null}var UC=!1;function uge(r,e){switch(r){case"compositionend":return fV(e);case"keypress":return e.which!==32?null:($$=!0,W$);case"textInput":return r=e.data,r===W$&amp;&amp;$$?null:r;default:return null}}function dge(r,e){if(UC)return r==="compositionend"||!_3&amp;&amp;hV(r,e)?(r=cV(),sI=A3=Tm=null,UC=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&amp;&amp;e.altKey){if(e.char&amp;&amp;1&lt;e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pV&amp;&amp;e.locale!=="ko"?null:e.data;default:return null}}var cge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V$(r){var e=r&amp;&amp;r.nodeName&amp;&amp;r.nodeName.toLowerCase();return e==="input"?!!cge[r.type]:e==="textarea"}function mV(r,e,t,n){j9(n),e=xI(e,"onChange"),0&lt;e.length&amp;&amp;(t=new I3("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var BT=null,KT=null;function pge(r){kV(r,0)}function HI(r){var e=GC(r);if(U9(e))return r}function hge(r,e){if(r==="change")return e}var gV=!1;Ph&amp;&amp;(Ph?(qA="oninput"in document,qA||(cO=document.createElement("div"),cO.setAttribute("oninput","return;"),qA=typeof cO.oninput=="function"),KA=qA):KA=!1,gV=KA&amp;&amp;(!document.documentMode||9&lt;document.documentMode));var KA,qA,cO;function j$(){BT&amp;&amp;(BT.detachEvent("onpropertychange",vV),KT=BT=null)}function vV(r){if(r.propertyName==="value"&amp;&amp;HI(KT)){var e=[];mV(e,KT,r,w3(r)),X9(pge,e)}}function fge(r,e,t){r==="focusin"?(j$(),BT=e,KT=t,BT.attachEvent("onpropertychange",vV)):r==="focusout"&amp;&amp;j$()}function mge(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return HI(KT)}function gge(r,e){if(r==="click")return HI(e)}function vge(r,e){if(r==="input"||r==="change")return HI(e)}function bge(r,e){return r===e&amp;&amp;(r!==0||1/r===1/e)||r!==r&amp;&amp;e!==e}var Jd=typeof Object.is=="function"?Object.is:bge;function qT(r,e){if(Jd(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n&lt;t.length;n++){var o=t[n];if(!DO.call(e,o)||!Jd(r[o],e[o]))return!1}return!0}function K$(r){for(;r&amp;&amp;r.firstChild;)r=r.firstChild;return r}function q$(r,e){var t=K$(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r&lt;=e&amp;&amp;n&gt;=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=K$(t)}}function bV(r,e){return r&amp;&amp;e?r===e?!0:r&amp;&amp;r.nodeType===3?!1:e&amp;&amp;e.nodeType===3?bV(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&amp;16):!1:!1}function yV(){for(var r=window,e=mI();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch(n){t=!1}if(t)r=e.contentWindow;else break;e=mI(r.document)}return e}function F3(r){var e=r&amp;&amp;r.nodeName&amp;&amp;r.nodeName.toLowerCase();return e&amp;&amp;(e==="input"&amp;&amp;(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function yge(r){var e=yV(),t=r.focusedElem,n=r.selectionRange;if(e!==t&amp;&amp;t&amp;&amp;t.ownerDocument&amp;&amp;bV(t.ownerDocument.documentElement,t)){if(n!==null&amp;&amp;F3(t)){if(e=n.start,r=n.end,r===void 0&amp;&amp;(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&amp;&amp;e.defaultView||window,r.getSelection){r=r.getSelection();var o=t.textContent.length,i=Math.min(n.start,o);n=n.end===void 0?i:Math.min(n.end,o),!r.extend&amp;&amp;i&gt;n&amp;&amp;(o=n,n=i,i=o),o=q$(t,i);var s=q$(t,n);o&amp;&amp;s&amp;&amp;(r.rangeCount!==1||r.anchorNode!==o.node||r.anchorOffset!==o.offset||r.focusNode!==s.node||r.focusOffset!==s.offset)&amp;&amp;(e=e.createRange(),e.setStart(o.node,o.offset),r.removeAllRanges(),i&gt;n?(r.addRange(e),r.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&amp;&amp;e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&amp;&amp;t.focus(),t=0;t&lt;e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Cge=Ph&amp;&amp;"documentMode"in document&amp;&amp;11&gt;=document.documentMode,zC=null,$O=null,RT=null,VO=!1;function Y$(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;VO||zC==null||zC!==mI(n)||(n=zC,"selectionStart"in n&amp;&amp;F3(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&amp;&amp;n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),RT&amp;&amp;qT(RT,n)||(RT=n,n=xI($O,"onSelect"),0&lt;n.length&amp;&amp;(e=new I3("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=zC)))}function YA(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var HC={animationend:YA("Animation","AnimationEnd"),animationiteration:YA("Animation","AnimationIteration"),animationstart:YA("Animation","AnimationStart"),transitionend:YA("Transition","TransitionEnd")},pO={},CV={};Ph&amp;&amp;(CV=document.createElement("div").style,"AnimationEvent"in window||(delete HC.animationend.animation,delete HC.animationiteration.animation,delete HC.animationstart.animation),"TransitionEvent"in window||delete HC.transitionend.transition);function GI(r){if(pO[r])return pO[r];if(!HC[r])return r;var e=HC[r],t;for(t in e)if(e.hasOwnProperty(t)&amp;&amp;t in CV)return pO[r]=e[t];return r}var SV=GI("animationend"),xV=GI("animationiteration"),wV=GI("animationstart"),TV=GI("transitionend"),DV=new Map,X$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rm(r,e){DV.set(r,e),bb(e,[r])}for(XA=0;XA&lt;X$.length;XA++)QA=X$[XA],Q$=QA.toLowerCase(),J$=QA[0].toUpperCase()+QA.slice(1),Rm(Q$,"on"+J$);var QA,Q$,J$,XA;Rm(SV,"onAnimationEnd");Rm(xV,"onAnimationIteration");Rm(wV,"onAnimationStart");Rm("dblclick","onDoubleClick");Rm("focusin","onFocus");Rm("focusout","onBlur");Rm(TV,"onTransitionEnd");t0("onMouseEnter",["mouseout","mouseover"]);t0("onMouseLeave",["mouseout","mouseover"]);t0("onPointerEnter",["pointerout","pointerover"]);t0("onPointerLeave",["pointerout","pointerover"]);bb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bb("onBeforeInput",["compositionend","keypress","textInput","paste"]);bb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sge=new Set("cancel close invalid load scroll toggle".split(" ").concat(_T));function Z$(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,Sme(n,e,void 0,r),r.currentTarget=null}function kV(r,e){e=(e&amp;4)!==0;for(var t=0;t&lt;r.length;t++){var n=r[t],o=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0&lt;=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&amp;&amp;o.isPropagationStopped())break e;Z$(o,a,u),i=l}else for(s=0;s&lt;n.length;s++){if(a=n[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&amp;&amp;o.isPropagationStopped())break e;Z$(o,a,u),i=l}}}if(vI)throw r=zO,vI=!1,zO=null,r}function Xo(r,e){var t=e[XO];t===void 0&amp;&amp;(t=e[XO]=new Set);var n=r+"__bubble";t.has(n)||(PV(e,r,2,!1),t.add(n))}function hO(r,e,t){var n=0;e&amp;&amp;(n|=4),PV(t,r,n,e)}var JA="_reactListening"+Math.random().toString(36).slice(2);function YT(r){if(!r[JA]){r[JA]=!0,N9.forEach(function(t){t!=="selectionchange"&amp;&amp;(Sge.has(t)||hO(t,!1,r),hO(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[JA]||(e[JA]=!0,hO("selectionchange",!1,e))}}function PV(r,e,t,n){switch(dV(e)){case 1:var o=Lme;break;case 4:o=Ome;break;default:o=P3}t=o.bind(null,e,t,r),o=void 0,!UO||e!=="touchstart"&amp;&amp;e!=="touchmove"&amp;&amp;e!=="wheel"||(o=!0),n?o!==void 0?r.addEventListener(e,t,{capture:!0,passive:o}):r.addEventListener(e,t,!0):o!==void 0?r.addEventListener(e,t,{passive:o}):r.addEventListener(e,t,!1)}function fO(r,e,t,n,o){var i=n;if((e&amp;1)===0&amp;&amp;(e&amp;2)===0&amp;&amp;n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===o||a.nodeType===8&amp;&amp;a.parentNode===o)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&amp;&amp;(l=s.stateNode.containerInfo,l===o||l.nodeType===8&amp;&amp;l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=lb(a),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}a=a.parentNode}}n=n.return}X9(function(){var u=i,d=w3(t),c=[];e:{var p=DV.get(r);if(p!==void 0){var h=I3,f=r;switch(r){case"keypress":if(aI(t)===0)break e;case"keydown":case"keyup":h=Zme;break;case"focusin":f="focus",h=dO;break;case"focusout":f="blur",h=dO;break;case"beforeblur":case"afterblur":h=dO;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=z$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Hme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=rge;break;case SV:case xV:case wV:h=$me;break;case TV:h=oge;break;case"scroll":h=Ume;break;case"wheel":h=sge;break;case"copy":case"cut":case"paste":h=jme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=G$}var m=(e&amp;4)!==0,g=!m&amp;&amp;r==="scroll",v=m?p!==null?p+"Capture":null:p;m=[];for(var b=u,C;b!==null;){C=b;var x=C.stateNode;if(C.tag===5&amp;&amp;x!==null&amp;&amp;(C=x,v!==null&amp;&amp;(x=WT(b,v),x!=null&amp;&amp;m.push(XT(b,x,C)))),g)break;b=b.return}0&lt;m.length&amp;&amp;(p=new h(p,f,null,t,d),c.push({event:p,listeners:m}))}}if((e&amp;7)===0){e:{if(p=r==="mouseover"||r==="pointerover",h=r==="mouseout"||r==="pointerout",p&amp;&amp;t!==LO&amp;&amp;(f=t.relatedTarget||t.fromElement)&amp;&amp;(lb(f)||f[Ah]))break e;if((h||p)&amp;&amp;(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(f=t.relatedTarget||t.toElement,h=u,f=f?lb(f):null,f!==null&amp;&amp;(g=yb(f),f!==g||f.tag!==5&amp;&amp;f.tag!==6)&amp;&amp;(f=null)):(h=null,f=u),h!==f)){if(m=z$,x="onMouseLeave",v="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&amp;&amp;(m=G$,x="onPointerLeave",v="onPointerEnter",b="pointer"),g=h==null?p:GC(h),C=f==null?p:GC(f),p=new m(x,b+"leave",h,t,d),p.target=g,p.relatedTarget=C,x=null,lb(d)===u&amp;&amp;(m=new m(v,b+"enter",f,t,d),m.target=C,m.relatedTarget=g,x=m),g=x,h&amp;&amp;f)t:{for(m=h,v=f,b=0,C=m;C;C=RC(C))b++;for(C=0,x=v;x;x=RC(x))C++;for(;0&lt;b-C;)m=RC(m),b--;for(;0&lt;C-b;)v=RC(v),C--;for(;b--;){if(m===v||v!==null&amp;&amp;m===v.alternate)break t;m=RC(m),v=RC(v)}m=null}else m=null;h!==null&amp;&amp;e9(c,p,h,m,!1),f!==null&amp;&amp;g!==null&amp;&amp;e9(c,g,f,m,!0)}}e:{if(p=u?GC(u):window,h=p.nodeName&amp;&amp;p.nodeName.toLowerCase(),h==="select"||h==="input"&amp;&amp;p.type==="file")var y=hge;else if(V$(p))if(gV)y=vge;else{y=mge;var S=fge}else(h=p.nodeName)&amp;&amp;h.toLowerCase()==="input"&amp;&amp;(p.type==="checkbox"||p.type==="radio")&amp;&amp;(y=gge);if(y&amp;&amp;(y=y(r,u))){mV(c,y,t,d);break e}S&amp;&amp;S(r,p,u),r==="focusout"&amp;&amp;(S=p._wrapperState)&amp;&amp;S.controlled&amp;&amp;p.type==="number"&amp;&amp;FO(p,"number",p.value)}switch(S=u?GC(u):window,r){case"focusin":(V$(S)||S.contentEditable==="true")&amp;&amp;(zC=S,$O=u,RT=null);break;case"focusout":RT=$O=zC=null;break;case"mousedown":VO=!0;break;case"contextmenu":case"mouseup":case"dragend":VO=!1,Y$(c,t,d);break;case"selectionchange":if(Cge)break;case"keydown":case"keyup":Y$(c,t,d)}var T;if(_3)e:{switch(r){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else UC?hV(r,t)&amp;&amp;(w="onCompositionEnd"):r==="keydown"&amp;&amp;t.keyCode===229&amp;&amp;(w="onCompositionStart");w&amp;&amp;(pV&amp;&amp;t.locale!=="ko"&amp;&amp;(UC||w!=="onCompositionStart"?w==="onCompositionEnd"&amp;&amp;UC&amp;&amp;(T=cV()):(Tm=d,A3="value"in Tm?Tm.value:Tm.textContent,UC=!0)),S=xI(u,w),0&lt;S.length&amp;&amp;(w=new H$(w,r,null,t,d),c.push({event:w,listeners:S}),T?w.data=T:(T=fV(t),T!==null&amp;&amp;(w.data=T)))),(T=lge?uge(r,t):dge(r,t))&amp;&amp;(u=xI(u,"onBeforeInput"),0&lt;u.length&amp;&amp;(d=new H$("onBeforeInput","beforeinput",null,t,d),c.push({event:d,listeners:u}),d.data=T))}kV(c,e)})}function XT(r,e,t){return{instance:r,listener:e,currentTarget:t}}function xI(r,e){for(var t=e+"Capture",n=[];r!==null;){var o=r,i=o.stateNode;o.tag===5&amp;&amp;i!==null&amp;&amp;(o=i,i=WT(r,t),i!=null&amp;&amp;n.unshift(XT(r,i,o)),i=WT(r,e),i!=null&amp;&amp;n.push(XT(r,i,o))),r=r.return}return n}function RC(r){if(r===null)return null;do r=r.return;while(r&amp;&amp;r.tag!==5);return r||null}function e9(r,e,t,n,o){for(var i=e._reactName,s=[];t!==null&amp;&amp;t!==n;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&amp;&amp;l===n)break;a.tag===5&amp;&amp;u!==null&amp;&amp;(a=u,o?(l=WT(t,i),l!=null&amp;&amp;s.unshift(XT(t,l,a))):o||(l=WT(t,i),l!=null&amp;&amp;s.push(XT(t,l,a)))),t=t.return}s.length!==0&amp;&amp;r.push({event:e,listeners:s})}var xge=/\r\n?/g,wge=/\u0000|\uFFFD/g;function t9(r){return(typeof r=="string"?r:""+r).replace(xge,`
`).replace(wge,"")}function ZA(r,e,t){if(e=t9(e),t9(r)!==e&amp;&amp;t)throw Error(ht(425))}function wI(){}var jO=null,KO=null;function qO(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&amp;&amp;e.dangerouslySetInnerHTML!==null&amp;&amp;e.dangerouslySetInnerHTML.__html!=null}var YO=typeof setTimeout=="function"?setTimeout:void 0,Tge=typeof clearTimeout=="function"?clearTimeout:void 0,r9=typeof Promise=="function"?Promise:void 0,Dge=typeof queueMicrotask=="function"?queueMicrotask:typeof r9!="undefined"?function(r){return r9.resolve(null).then(r).catch(kge)}:YO;function kge(r){setTimeout(function(){throw r})}function mO(r,e){var t=e,n=0;do{var o=t.nextSibling;if(r.removeChild(t),o&amp;&amp;o.nodeType===8)if(t=o.data,t==="/$"){if(n===0){r.removeChild(o),jT(e);return}n--}else t!=="$"&amp;&amp;t!=="$?"&amp;&amp;t!=="$!"||n++;t=o}while(t);jT(e)}function Im(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function n9(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&amp;&amp;e++}r=r.previousSibling}return null}var u0=Math.random().toString(36).slice(2),Kc="__reactFiber$"+u0,QT="__reactProps$"+u0,Ah="__reactContainer$"+u0,XO="__reactEvents$"+u0,Pge="__reactListeners$"+u0,Age="__reactHandles$"+u0;function lb(r){var e=r[Kc];if(e)return e;for(var t=r.parentNode;t;){if(e=t[Ah]||t[Kc]){if(t=e.alternate,e.child!==null||t!==null&amp;&amp;t.child!==null)for(r=n9(r);r!==null;){if(t=r[Kc])return t;r=n9(r)}return e}r=t,t=r.parentNode}return null}function s1(r){return r=r[Kc]||r[Ah],!r||r.tag!==5&amp;&amp;r.tag!==6&amp;&amp;r.tag!==13&amp;&amp;r.tag!==3?null:r}function GC(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ht(33))}function WI(r){return r[QT]||null}var QO=[],WC=-1;function Lm(r){return{current:r}}function Qo(r){0&gt;WC||(r.current=QO[WC],QO[WC]=null,WC--)}function zo(r,e){WC++,QO[WC]=r.current,r.current=e}var Bm={},ka=Lm(Bm),yl=Lm(!1),hb=Bm;function r0(r,e){var t=r.type.contextTypes;if(!t)return Bm;var n=r.stateNode;if(n&amp;&amp;n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in t)o[i]=e[i];return n&amp;&amp;(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=o),o}function Cl(r){return r=r.childContextTypes,r!=null}function TI(){Qo(yl),Qo(ka)}function o9(r,e,t){if(ka.current!==Bm)throw Error(ht(168));zo(ka,e),zo(yl,t)}function AV(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(ht(108,fme(r)||"Unknown",o));return bi({},t,n)}function DI(r){return r=(r=r.stateNode)&amp;&amp;r.__reactInternalMemoizedMergedChildContext||Bm,hb=ka.current,zo(ka,r),zo(yl,yl.current),!0}function i9(r,e,t){var n=r.stateNode;if(!n)throw Error(ht(169));t?(r=AV(r,e,hb),n.__reactInternalMemoizedMergedChildContext=r,Qo(yl),Qo(ka),zo(ka,r)):Qo(yl),zo(yl,t)}var wh=null,$I=!1,gO=!1;function IV(r){wh===null?wh=[r]:wh.push(r)}function Ige(r){$I=!0,IV(r)}function Om(){if(!gO&amp;&amp;wh!==null){gO=!0;var r=0,e=yo;try{var t=wh;for(yo=1;r&lt;t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}wh=null,$I=!1}catch(o){throw wh!==null&amp;&amp;(wh=wh.slice(r+1)),eV(T3,Om),o}finally{yo=e,gO=!1}}return null}var $C=[],VC=0,kI=null,PI=0,Lu=[],Ou=0,fb=null,Th=1,Dh="";function sb(r,e){$C[VC++]=PI,$C[VC++]=kI,kI=r,PI=e}function EV(r,e,t){Lu[Ou++]=Th,Lu[Ou++]=Dh,Lu[Ou++]=fb,fb=r;var n=Th;r=Dh;var o=32-Xd(n)-1;n&amp;=~(1&lt;&lt;o),t+=1;var i=32-Xd(e)+o;if(30&lt;i){var s=o-o%5;i=(n&amp;(1&lt;&lt;s)-1).toString(32),n&gt;&gt;=s,o-=s,Th=1&lt;&lt;32-Xd(e)+o|t&lt;&lt;o|n,Dh=i+r}else Th=1&lt;&lt;i|t&lt;&lt;o|n,Dh=r}function M3(r){r.return!==null&amp;&amp;(sb(r,1),EV(r,1,0))}function N3(r){for(;r===kI;)kI=$C[--VC],$C[VC]=null,PI=$C[--VC],$C[VC]=null;for(;r===fb;)fb=Lu[--Ou],Lu[Ou]=null,Dh=Lu[--Ou],Lu[Ou]=null,Th=Lu[--Ou],Lu[Ou]=null}var Jl=null,Ql=null,di=!1,Yd=null;function _V(r,e){var t=Uu(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function s9(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Jl=r,Ql=Im(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Jl=r,Ql=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=fb!==null?{id:Th,overflow:Dh}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Uu(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Jl=r,Ql=null,!0):!1;default:return!1}}function JO(r){return(r.mode&amp;1)!==0&amp;&amp;(r.flags&amp;128)===0}function ZO(r){if(di){var e=Ql;if(e){var t=e;if(!s9(r,e)){if(JO(r))throw Error(ht(418));e=Im(t.nextSibling);var n=Jl;e&amp;&amp;s9(r,e)?_V(n,t):(r.flags=r.flags&amp;-4097|2,di=!1,Jl=r)}}else{if(JO(r))throw Error(ht(418));r.flags=r.flags&amp;-4097|2,di=!1,Jl=r}}}function a9(r){for(r=r.return;r!==null&amp;&amp;r.tag!==5&amp;&amp;r.tag!==3&amp;&amp;r.tag!==13;)r=r.return;Jl=r}function eI(r){if(r!==Jl)return!1;if(!di)return a9(r),di=!0,!1;var e;if((e=r.tag!==3)&amp;&amp;!(e=r.tag!==5)&amp;&amp;(e=r.type,e=e!=="head"&amp;&amp;e!=="body"&amp;&amp;!qO(r.type,r.memoizedProps)),e&amp;&amp;(e=Ql)){if(JO(r))throw FV(),Error(ht(418));for(;e;)_V(r,e),e=Im(e.nextSibling)}if(a9(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ht(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Ql=Im(r.nextSibling);break e}e--}else t!=="$"&amp;&amp;t!=="$!"&amp;&amp;t!=="$?"||e++}r=r.nextSibling}Ql=null}}else Ql=Jl?Im(r.stateNode.nextSibling):null;return!0}function FV(){for(var r=Ql;r;)r=Im(r.nextSibling)}function n0(){Ql=Jl=null,di=!1}function B3(r){Yd===null?Yd=[r]:Yd.push(r)}var Ege=_h.ReactCurrentBatchConfig;function Kd(r,e){if(r&amp;&amp;r.defaultProps){e=bi({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&amp;&amp;(e[t]=r[t]);return e}return e}var AI=Lm(null),II=null,jC=null,R3=null;function L3(){R3=jC=II=null}function O3(r){var e=AI.current;Qo(AI),r._currentValue=e}function e3(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&amp;e)!==e?(r.childLanes|=e,n!==null&amp;&amp;(n.childLanes|=e)):n!==null&amp;&amp;(n.childLanes&amp;e)!==e&amp;&amp;(n.childLanes|=e),r===t)break;r=r.return}}function ZC(r,e){II=r,R3=jC=null,r=r.dependencies,r!==null&amp;&amp;r.firstContext!==null&amp;&amp;((r.lanes&amp;e)!==0&amp;&amp;(bl=!0),r.firstContext=null)}function Hu(r){var e=r._currentValue;if(R3!==r)if(r={context:r,memoizedValue:e,next:null},jC===null){if(II===null)throw Error(ht(308));jC=r,II.dependencies={lanes:0,firstContext:r}}else jC=jC.next=r;return e}var ub=null;function U3(r){ub===null?ub=[r]:ub.push(r)}function MV(r,e,t,n){var o=e.interleaved;return o===null?(t.next=t,U3(e)):(t.next=o.next,o.next=t),e.interleaved=t,Ih(r,n)}function Ih(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&amp;&amp;(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&amp;&amp;(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Sm=!1;function z3(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NV(r,e){r=r.updateQueue,e.updateQueue===r&amp;&amp;(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function kh(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Em(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,(Vn&amp;2)!==0){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,Ih(r,t)}return o=n.interleaved,o===null?(e.next=e,U3(n)):(e.next=o.next,o.next=e),n.interleaved=e,Ih(r,t)}function lI(r,e,t){if(e=e.updateQueue,e!==null&amp;&amp;(e=e.shared,(t&amp;4194240)!==0)){var n=e.lanes;n&amp;=r.pendingLanes,t|=n,e.lanes=t,D3(r,t)}}function l9(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&amp;&amp;(n=n.updateQueue,t===n)){var o=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?o=i=s:i=i.next=s,t=t.next}while(t!==null);i===null?o=i=e:i=i.next=e}else o=i=e;t={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function EI(r,e,t,n){var o=r.updateQueue;Sm=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var d=r.alternate;d!==null&amp;&amp;(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&amp;&amp;(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var c=o.baseState;s=0,d=u=l=null,a=i;do{var p=a.lane,h=a.eventTime;if((n&amp;p)===p){d!==null&amp;&amp;(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=r,m=a;switch(p=e,h=t,m.tag){case 1:if(f=m.payload,typeof f=="function"){c=f.call(h,c,p);break e}c=f;break e;case 3:f.flags=f.flags&amp;-65537|128;case 0:if(f=m.payload,p=typeof f=="function"?f.call(h,c,p):f,p==null)break e;c=bi({},c,p);break e;case 2:Sm=!0}}a.callback!==null&amp;&amp;a.lane!==0&amp;&amp;(r.flags|=64,p=o.effects,p===null?o.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=h,l=c):d=d.next=h,s|=p;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;p=a,a=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(1);if(d===null&amp;&amp;(l=c),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&amp;&amp;(o.shared.lanes=0);gb|=s,r.lanes=s,r.memoizedState=c}}function u9(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e&lt;r.length;e++){var n=r[e],o=n.callback;if(o!==null){if(n.callback=null,n=t,typeof o!="function")throw Error(ht(191,o));o.call(n)}}}var BV=new M9.Component().refs;function t3(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:bi({},e,t),r.memoizedState=t,r.lanes===0&amp;&amp;(r.updateQueue.baseState=t)}var VI={isMounted:function(r){return(r=r._reactInternals)?yb(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Xa(),o=Fm(r),i=kh(n,o);i.payload=e,t!=null&amp;&amp;(i.callback=t),e=Em(r,i,o),e!==null&amp;&amp;(Qd(e,r,o,n),lI(e,r,o))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Xa(),o=Fm(r),i=kh(n,o);i.tag=1,i.payload=e,t!=null&amp;&amp;(i.callback=t),e=Em(r,i,o),e!==null&amp;&amp;(Qd(e,r,o,n),lI(e,r,o))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Xa(),n=Fm(r),o=kh(t,n);o.tag=2,e!=null&amp;&amp;(o.callback=e),e=Em(r,o,n),e!==null&amp;&amp;(Qd(e,r,n,t),lI(e,r,n))}};function d9(r,e,t,n,o,i,s){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,i,s):e.prototype&amp;&amp;e.prototype.isPureReactComponent?!qT(t,n)||!qT(o,i):!0}function RV(r,e,t){var n=!1,o=Bm,i=e.contextType;return typeof i=="object"&amp;&amp;i!==null?i=Hu(i):(o=Cl(e)?hb:ka.current,n=e.contextTypes,i=(n=n!=null)?r0(r,o):Bm),e=new e(t,i),r.memoizedState=e.state!==null&amp;&amp;e.state!==void 0?e.state:null,e.updater=VI,r.stateNode=e,e._reactInternals=r,n&amp;&amp;(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=i),e}function c9(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&amp;&amp;e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&amp;&amp;e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&amp;&amp;VI.enqueueReplaceState(e,e.state,null)}function r3(r,e,t,n){var o=r.stateNode;o.props=t,o.state=r.memoizedState,o.refs=BV,z3(r);var i=e.contextType;typeof i=="object"&amp;&amp;i!==null?o.context=Hu(i):(i=Cl(e)?hb:ka.current,o.context=r0(r,i)),o.state=r.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&amp;&amp;(t3(r,e,i,t),o.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&amp;&amp;typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&amp;&amp;o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&amp;&amp;o.UNSAFE_componentWillMount(),e!==o.state&amp;&amp;VI.enqueueReplaceState(o,o.state,null),EI(r,t,o,n),o.state=r.memoizedState),typeof o.componentDidMount=="function"&amp;&amp;(r.flags|=4194308)}function TT(r,e,t){if(r=t.ref,r!==null&amp;&amp;typeof r!="function"&amp;&amp;typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ht(309));var n=t.stateNode}if(!n)throw Error(ht(147,r));var o=n,i=""+r;return e!==null&amp;&amp;e.ref!==null&amp;&amp;typeof e.ref=="function"&amp;&amp;e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;a===BV&amp;&amp;(a=o.refs={}),s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof r!="string")throw Error(ht(284));if(!t._owner)throw Error(ht(290,r))}return r}function tI(r,e){throw r=Object.prototype.toString.call(e),Error(ht(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function p9(r){var e=r._init;return e(r._payload)}function LV(r){function e(v,b){if(r){var C=v.deletions;C===null?(v.deletions=[b],v.flags|=16):C.push(b)}}function t(v,b){if(!r)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function o(v,b){return v=Mm(v,b),v.index=0,v.sibling=null,v}function i(v,b,C){return v.index=C,r?(C=v.alternate,C!==null?(C=C.index,C&lt;b?(v.flags|=2,b):C):(v.flags|=2,b)):(v.flags|=1048576,b)}function s(v){return r&amp;&amp;v.alternate===null&amp;&amp;(v.flags|=2),v}function a(v,b,C,x){return b===null||b.tag!==6?(b=wO(C,v.mode,x),b.return=v,b):(b=o(b,C),b.return=v,b)}function l(v,b,C,x){var y=C.type;return y===OC?d(v,b,C.props.children,x,C.key):b!==null&amp;&amp;(b.elementType===y||typeof y=="object"&amp;&amp;y!==null&amp;&amp;y.$$typeof===Cm&amp;&amp;p9(y)===b.type)?(x=o(b,C.props),x.ref=TT(v,b,C),x.return=v,x):(x=fI(C.type,C.key,C.props,null,v.mode,x),x.ref=TT(v,b,C),x.return=v,x)}function u(v,b,C,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=TO(C,v.mode,x),b.return=v,b):(b=o(b,C.children||[]),b.return=v,b)}function d(v,b,C,x,y){return b===null||b.tag!==7?(b=pb(C,v.mode,x,y),b.return=v,b):(b=o(b,C),b.return=v,b)}function c(v,b,C){if(typeof b=="string"&amp;&amp;b!==""||typeof b=="number")return b=wO(""+b,v.mode,C),b.return=v,b;if(typeof b=="object"&amp;&amp;b!==null){switch(b.$$typeof){case zA:return C=fI(b.type,b.key,b.props,null,v.mode,C),C.ref=TT(v,null,b),C.return=v,C;case LC:return b=TO(b,v.mode,C),b.return=v,b;case Cm:var x=b._init;return c(v,x(b._payload),C)}if(IT(b)||CT(b))return b=pb(b,v.mode,C,null),b.return=v,b;tI(v,b)}return null}function p(v,b,C,x){var y=b!==null?b.key:null;if(typeof C=="string"&amp;&amp;C!==""||typeof C=="number")return y!==null?null:a(v,b,""+C,x);if(typeof C=="object"&amp;&amp;C!==null){switch(C.$$typeof){case zA:return C.key===y?l(v,b,C,x):null;case LC:return C.key===y?u(v,b,C,x):null;case Cm:return y=C._init,p(v,b,y(C._payload),x)}if(IT(C)||CT(C))return y!==null?null:d(v,b,C,x,null);tI(v,C)}return null}function h(v,b,C,x,y){if(typeof x=="string"&amp;&amp;x!==""||typeof x=="number")return v=v.get(C)||null,a(b,v,""+x,y);if(typeof x=="object"&amp;&amp;x!==null){switch(x.$$typeof){case zA:return v=v.get(x.key===null?C:x.key)||null,l(b,v,x,y);case LC:return v=v.get(x.key===null?C:x.key)||null,u(b,v,x,y);case Cm:var S=x._init;return h(v,b,C,S(x._payload),y)}if(IT(x)||CT(x))return v=v.get(C)||null,d(b,v,x,y,null);tI(b,x)}return null}function f(v,b,C,x){for(var y=null,S=null,T=b,w=b=0,k=null;T!==null&amp;&amp;w&lt;C.length;w++){T.index&gt;w?(k=T,T=null):k=T.sibling;var A=p(v,T,C[w],x);if(A===null){T===null&amp;&amp;(T=k);break}r&amp;&amp;T&amp;&amp;A.alternate===null&amp;&amp;e(v,T),b=i(A,b,w),S===null?y=A:S.sibling=A,S=A,T=k}if(w===C.length)return t(v,T),di&amp;&amp;sb(v,w),y;if(T===null){for(;w&lt;C.length;w++)T=c(v,C[w],x),T!==null&amp;&amp;(b=i(T,b,w),S===null?y=T:S.sibling=T,S=T);return di&amp;&amp;sb(v,w),y}for(T=n(v,T);w&lt;C.length;w++)k=h(T,v,w,C[w],x),k!==null&amp;&amp;(r&amp;&amp;k.alternate!==null&amp;&amp;T.delete(k.key===null?w:k.key),b=i(k,b,w),S===null?y=k:S.sibling=k,S=k);return r&amp;&amp;T.forEach(function(I){return e(v,I)}),di&amp;&amp;sb(v,w),y}function m(v,b,C,x){var y=CT(C);if(typeof y!="function")throw Error(ht(150));if(C=y.call(C),C==null)throw Error(ht(151));for(var S=y=null,T=b,w=b=0,k=null,A=C.next();T!==null&amp;&amp;!A.done;w++,A=C.next()){T.index&gt;w?(k=T,T=null):k=T.sibling;var I=p(v,T,A.value,x);if(I===null){T===null&amp;&amp;(T=k);break}r&amp;&amp;T&amp;&amp;I.alternate===null&amp;&amp;e(v,T),b=i(I,b,w),S===null?y=I:S.sibling=I,S=I,T=k}if(A.done)return t(v,T),di&amp;&amp;sb(v,w),y;if(T===null){for(;!A.done;w++,A=C.next())A=c(v,A.value,x),A!==null&amp;&amp;(b=i(A,b,w),S===null?y=A:S.sibling=A,S=A);return di&amp;&amp;sb(v,w),y}for(T=n(v,T);!A.done;w++,A=C.next())A=h(T,v,w,A.value,x),A!==null&amp;&amp;(r&amp;&amp;A.alternate!==null&amp;&amp;T.delete(A.key===null?w:A.key),b=i(A,b,w),S===null?y=A:S.sibling=A,S=A);return r&amp;&amp;T.forEach(function(E){return e(v,E)}),di&amp;&amp;sb(v,w),y}function g(v,b,C,x){if(typeof C=="object"&amp;&amp;C!==null&amp;&amp;C.type===OC&amp;&amp;C.key===null&amp;&amp;(C=C.props.children),typeof C=="object"&amp;&amp;C!==null){switch(C.$$typeof){case zA:e:{for(var y=C.key,S=b;S!==null;){if(S.key===y){if(y=C.type,y===OC){if(S.tag===7){t(v,S.sibling),b=o(S,C.props.children),b.return=v,v=b;break e}}else if(S.elementType===y||typeof y=="object"&amp;&amp;y!==null&amp;&amp;y.$$typeof===Cm&amp;&amp;p9(y)===S.type){t(v,S.sibling),b=o(S,C.props),b.ref=TT(v,S,C),b.return=v,v=b;break e}t(v,S);break}else e(v,S);S=S.sibling}C.type===OC?(b=pb(C.props.children,v.mode,x,C.key),b.return=v,v=b):(x=fI(C.type,C.key,C.props,null,v.mode,x),x.ref=TT(v,b,C),x.return=v,v=x)}return s(v);case LC:e:{for(S=C.key;b!==null;){if(b.key===S)if(b.tag===4&amp;&amp;b.stateNode.containerInfo===C.containerInfo&amp;&amp;b.stateNode.implementation===C.implementation){t(v,b.sibling),b=o(b,C.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=TO(C,v.mode,x),b.return=v,v=b}return s(v);case Cm:return S=C._init,g(v,b,S(C._payload),x)}if(IT(C))return f(v,b,C,x);if(CT(C))return m(v,b,C,x);tI(v,C)}return typeof C=="string"&amp;&amp;C!==""||typeof C=="number"?(C=""+C,b!==null&amp;&amp;b.tag===6?(t(v,b.sibling),b=o(b,C),b.return=v,v=b):(t(v,b),b=wO(C,v.mode,x),b.return=v,v=b),s(v)):t(v,b)}return g}var o0=LV(!0),OV=LV(!1),a1={},Yc=Lm(a1),JT=Lm(a1),ZT=Lm(a1);function db(r){if(r===a1)throw Error(ht(174));return r}function H3(r,e){switch(zo(ZT,e),zo(JT,r),zo(Yc,a1),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:NO(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=NO(e,r)}Qo(Yc),zo(Yc,e)}function i0(){Qo(Yc),Qo(JT),Qo(ZT)}function UV(r){db(ZT.current);var e=db(Yc.current),t=NO(e,r.type);e!==t&amp;&amp;(zo(JT,r),zo(Yc,t))}function G3(r){JT.current===r&amp;&amp;(Qo(Yc),Qo(JT))}var gi=Lm(0);function _I(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&amp;&amp;(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&amp;&amp;e.memoizedProps.revealOrder!==void 0){if((e.flags&amp;128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vO=[];function W3(){for(var r=0;r&lt;vO.length;r++)vO[r]._workInProgressVersionPrimary=null;vO.length=0}var uI=_h.ReactCurrentDispatcher,bO=_h.ReactCurrentBatchConfig,mb=0,vi=null,xs=null,Ms=null,FI=!1,LT=!1,e1=0,_ge=0;function wa(){throw Error(ht(321))}function $3(r,e){if(e===null)return!1;for(var t=0;t&lt;e.length&amp;&amp;t&lt;r.length;t++)if(!Jd(r[t],e[t]))return!1;return!0}function V3(r,e,t,n,o,i){if(mb=i,vi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uI.current=r===null||r.memoizedState===null?Bge:Rge,r=t(n,o),LT){i=0;do{if(LT=!1,e1=0,25&lt;=i)throw Error(ht(301));i+=1,Ms=xs=null,e.updateQueue=null,uI.current=Lge,r=t(n,o)}while(LT)}if(uI.current=MI,e=xs!==null&amp;&amp;xs.next!==null,mb=0,Ms=xs=vi=null,FI=!1,e)throw Error(ht(300));return r}function j3(){var r=e1!==0;return e1=0,r}function jc(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?vi.memoizedState=Ms=r:Ms=Ms.next=r,Ms}function Gu(){if(xs===null){var r=vi.alternate;r=r!==null?r.memoizedState:null}else r=xs.next;var e=Ms===null?vi.memoizedState:Ms.next;if(e!==null)Ms=e,xs=r;else{if(r===null)throw Error(ht(310));xs=r,r={memoizedState:xs.memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},Ms===null?vi.memoizedState=Ms=r:Ms=Ms.next=r}return Ms}function t1(r,e){return typeof e=="function"?e(r):e}function yO(r){var e=Gu(),t=e.queue;if(t===null)throw Error(ht(311));t.lastRenderedReducer=r;var n=xs,o=n.baseQueue,i=t.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}n.baseQueue=o=i,t.pending=null}if(o!==null){i=o.next,n=n.baseState;var a=s=null,l=null,u=i;do{var d=u.lane;if((mb&amp;d)===d)l!==null&amp;&amp;(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,s=n):l=l.next=c,vi.lanes|=d,gb|=d}u=u.next}while(u!==null&amp;&amp;u!==i);l===null?s=n:l.next=a,Jd(n,e.memoizedState)||(bl=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){o=r;do i=o.lane,vi.lanes|=i,gb|=i,o=o.next;while(o!==r)}else o===null&amp;&amp;(t.lanes=0);return[e.memoizedState,t.dispatch]}function CO(r){var e=Gu(),t=e.queue;if(t===null)throw Error(ht(311));t.lastRenderedReducer=r;var n=t.dispatch,o=t.pending,i=e.memoizedState;if(o!==null){t.pending=null;var s=o=o.next;do i=r(i,s.action),s=s.next;while(s!==o);Jd(i,e.memoizedState)||(bl=!0),e.memoizedState=i,e.baseQueue===null&amp;&amp;(e.baseState=i),t.lastRenderedState=i}return[i,n]}function zV(){}function HV(r,e){var t=vi,n=Gu(),o=e(),i=!Jd(n.memoizedState,o);if(i&amp;&amp;(n.memoizedState=o,bl=!0),n=n.queue,K3($V.bind(null,t,n,r),[r]),n.getSnapshot!==e||i||Ms!==null&amp;&amp;Ms.memoizedState.tag&amp;1){if(t.flags|=2048,r1(9,WV.bind(null,t,n,o,e),void 0,null),Ns===null)throw Error(ht(349));(mb&amp;30)!==0||GV(t,e,o)}return o}function GV(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=vi.updateQueue,e===null?(e={lastEffect:null,stores:null},vi.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function WV(r,e,t,n){e.value=t,e.getSnapshot=n,VV(e)&amp;&amp;jV(r)}function $V(r,e,t){return t(function(){VV(e)&amp;&amp;jV(r)})}function VV(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Jd(r,t)}catch(n){return!0}}function jV(r){var e=Ih(r,1);e!==null&amp;&amp;Qd(e,r,1,-1)}function h9(r){var e=jc();return typeof r=="function"&amp;&amp;(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t1,lastRenderedState:r},e.queue=r,r=r.dispatch=Nge.bind(null,vi,r),[e.memoizedState,r]}function r1(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=vi.updateQueue,e===null?(e={lastEffect:null,stores:null},vi.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function KV(){return Gu().memoizedState}function dI(r,e,t,n){var o=jc();vi.flags|=r,o.memoizedState=r1(1|e,t,void 0,n===void 0?null:n)}function jI(r,e,t,n){var o=Gu();n=n===void 0?null:n;var i=void 0;if(xs!==null){var s=xs.memoizedState;if(i=s.destroy,n!==null&amp;&amp;$3(n,s.deps)){o.memoizedState=r1(e,t,i,n);return}}vi.flags|=r,o.memoizedState=r1(1|e,t,i,n)}function f9(r,e){return dI(8390656,8,r,e)}function K3(r,e){return jI(2048,8,r,e)}function qV(r,e){return jI(4,2,r,e)}function YV(r,e){return jI(4,4,r,e)}function XV(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function QV(r,e,t){return t=t!=null?t.concat([r]):null,jI(4,4,XV.bind(null,e,r),t)}function q3(){}function JV(r,e){var t=Gu();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&amp;&amp;e!==null&amp;&amp;$3(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function ZV(r,e){var t=Gu();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&amp;&amp;e!==null&amp;&amp;$3(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function ej(r,e,t){return(mb&amp;21)===0?(r.baseState&amp;&amp;(r.baseState=!1,bl=!0),r.memoizedState=t):(Jd(t,e)||(t=nV(),vi.lanes|=t,gb|=t,r.baseState=!0),e)}function Fge(r,e){var t=yo;yo=t!==0&amp;&amp;4&gt;t?t:4,r(!0);var n=bO.transition;bO.transition={};try{r(!1),e()}finally{yo=t,bO.transition=n}}function tj(){return Gu().memoizedState}function Mge(r,e,t){var n=Fm(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},rj(r))nj(e,t);else if(t=MV(r,e,t,n),t!==null){var o=Xa();Qd(t,r,n,o),oj(t,e,n)}}function Nge(r,e,t){var n=Fm(r),o={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(rj(r))nj(e,o);else{var i=r.alternate;if(r.lanes===0&amp;&amp;(i===null||i.lanes===0)&amp;&amp;(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,t);if(o.hasEagerState=!0,o.eagerState=a,Jd(a,s)){var l=e.interleaved;l===null?(o.next=o,U3(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch(u){}finally{}t=MV(r,e,o,n),t!==null&amp;&amp;(o=Xa(),Qd(t,r,n,o),oj(t,e,n))}}function rj(r){var e=r.alternate;return r===vi||e!==null&amp;&amp;e===vi}function nj(r,e){LT=FI=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function oj(r,e,t){if((t&amp;4194240)!==0){var n=e.lanes;n&amp;=r.pendingLanes,t|=n,e.lanes=t,D3(r,t)}}var MI={readContext:Hu,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},Bge={readContext:Hu,useCallback:function(r,e){return jc().memoizedState=[r,e===void 0?null:e],r},useContext:Hu,useEffect:f9,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,dI(4194308,4,XV.bind(null,e,r),t)},useLayoutEffect:function(r,e){return dI(4194308,4,r,e)},useInsertionEffect:function(r,e){return dI(4,2,r,e)},useMemo:function(r,e){var t=jc();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=jc();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=Mge.bind(null,vi,r),[n.memoizedState,r]},useRef:function(r){var e=jc();return r={current:r},e.memoizedState=r},useState:h9,useDebugValue:q3,useDeferredValue:function(r){return jc().memoizedState=r},useTransition:function(){var r=h9(!1),e=r[0];return r=Fge.bind(null,r[1]),jc().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=vi,o=jc();if(di){if(t===void 0)throw Error(ht(407));t=t()}else{if(t=e(),Ns===null)throw Error(ht(349));(mb&amp;30)!==0||GV(n,e,t)}o.memoizedState=t;var i={value:t,getSnapshot:e};return o.queue=i,f9($V.bind(null,n,i,r),[r]),n.flags|=2048,r1(9,WV.bind(null,n,i,t,e),void 0,null),t},useId:function(){var r=jc(),e=Ns.identifierPrefix;if(di){var t=Dh,n=Th;t=(n&amp;~(1&lt;&lt;32-Xd(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=e1++,0&lt;t&amp;&amp;(e+="H"+t.toString(32)),e+=":"}else t=_ge++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},Rge={readContext:Hu,useCallback:JV,useContext:Hu,useEffect:K3,useImperativeHandle:QV,useInsertionEffect:qV,useLayoutEffect:YV,useMemo:ZV,useReducer:yO,useRef:KV,useState:function(){return yO(t1)},useDebugValue:q3,useDeferredValue:function(r){var e=Gu();return ej(e,xs.memoizedState,r)},useTransition:function(){var r=yO(t1)[0],e=Gu().memoizedState;return[r,e]},useMutableSource:zV,useSyncExternalStore:HV,useId:tj,unstable_isNewReconciler:!1},Lge={readContext:Hu,useCallback:JV,useContext:Hu,useEffect:K3,useImperativeHandle:QV,useInsertionEffect:qV,useLayoutEffect:YV,useMemo:ZV,useReducer:CO,useRef:KV,useState:function(){return CO(t1)},useDebugValue:q3,useDeferredValue:function(r){var e=Gu();return xs===null?e.memoizedState=r:ej(e,xs.memoizedState,r)},useTransition:function(){var r=CO(t1)[0],e=Gu().memoizedState;return[r,e]},useMutableSource:zV,useSyncExternalStore:HV,useId:tj,unstable_isNewReconciler:!1};function s0(r,e){try{var t="",n=e;do t+=hme(n),n=n.return;while(n);var o=t}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:r,source:e,stack:o,digest:null}}function SO(r,e,t){return{value:r,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function n3(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Oge=typeof WeakMap=="function"?WeakMap:Map;function ij(r,e,t){t=kh(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){BI||(BI=!0,h3=n),n3(r,e)},t}function sj(r,e,t){t=kh(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;t.payload=function(){return n(o)},t.callback=function(){n3(r,e)}}var i=r.stateNode;return i!==null&amp;&amp;typeof i.componentDidCatch=="function"&amp;&amp;(t.callback=function(){n3(r,e),typeof n!="function"&amp;&amp;(_m===null?_m=new Set([this]):_m.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function m9(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new Oge;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&amp;&amp;(o=new Set,n.set(e,o));o.has(t)||(o.add(t),r=Jge.bind(null,r,e,t),e.then(r,r))}function g9(r){do{var e;if((e=r.tag===13)&amp;&amp;(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function v9(r,e,t,n,o){return(r.mode&amp;1)===0?(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&amp;=-52805,t.tag===1&amp;&amp;(t.alternate===null?t.tag=17:(e=kh(-1,1),e.tag=2,Em(t,e,1))),t.lanes|=1),r):(r.flags|=65536,r.lanes=o,r)}var Uge=_h.ReactCurrentOwner,bl=!1;function Ya(r,e,t,n){e.child=r===null?OV(e,null,t,n):o0(e,r.child,t,n)}function b9(r,e,t,n,o){t=t.render;var i=e.ref;return ZC(e,o),n=V3(r,e,t,n,i,o),t=j3(),r!==null&amp;&amp;!bl?(e.updateQueue=r.updateQueue,e.flags&amp;=-2053,r.lanes&amp;=~o,Eh(r,e,o)):(di&amp;&amp;t&amp;&amp;M3(e),e.flags|=1,Ya(r,e,n,o),e.child)}function y9(r,e,t,n,o){if(r===null){var i=t.type;return typeof i=="function"&amp;&amp;!r4(i)&amp;&amp;i.defaultProps===void 0&amp;&amp;t.compare===null&amp;&amp;t.defaultProps===void 0?(e.tag=15,e.type=i,aj(r,e,i,n,o)):(r=fI(t.type,null,n,e,e.mode,o),r.ref=e.ref,r.return=e,e.child=r)}if(i=r.child,(r.lanes&amp;o)===0){var s=i.memoizedProps;if(t=t.compare,t=t!==null?t:qT,t(s,n)&amp;&amp;r.ref===e.ref)return Eh(r,e,o)}return e.flags|=1,r=Mm(i,n),r.ref=e.ref,r.return=e,e.child=r}function aj(r,e,t,n,o){if(r!==null){var i=r.memoizedProps;if(qT(i,n)&amp;&amp;r.ref===e.ref)if(bl=!1,e.pendingProps=n=i,(r.lanes&amp;o)!==0)(r.flags&amp;131072)!==0&amp;&amp;(bl=!0);else return e.lanes=r.lanes,Eh(r,e,o)}return o3(r,e,t,n,o)}function lj(r,e,t){var n=e.pendingProps,o=n.children,i=r!==null?r.memoizedState:null;if(n.mode==="hidden")if((e.mode&amp;1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zo(qC,Xl),Xl|=t;else{if((t&amp;1073741824)===0)return r=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,zo(qC,Xl),Xl|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,zo(qC,Xl),Xl|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,zo(qC,Xl),Xl|=n;return Ya(r,e,o,t),e.child}function uj(r,e){var t=e.ref;(r===null&amp;&amp;t!==null||r!==null&amp;&amp;r.ref!==t)&amp;&amp;(e.flags|=512,e.flags|=2097152)}function o3(r,e,t,n,o){var i=Cl(t)?hb:ka.current;return i=r0(e,i),ZC(e,o),t=V3(r,e,t,n,i,o),n=j3(),r!==null&amp;&amp;!bl?(e.updateQueue=r.updateQueue,e.flags&amp;=-2053,r.lanes&amp;=~o,Eh(r,e,o)):(di&amp;&amp;n&amp;&amp;M3(e),e.flags|=1,Ya(r,e,t,o),e.child)}function C9(r,e,t,n,o){if(Cl(t)){var i=!0;DI(e)}else i=!1;if(ZC(e,o),e.stateNode===null)cI(r,e),RV(e,t,n),r3(e,t,n,o),n=!0;else if(r===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=t.contextType;typeof u=="object"&amp;&amp;u!==null?u=Hu(u):(u=Cl(t)?hb:ka.current,u=r0(e,u));var d=t.getDerivedStateFromProps,c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&amp;&amp;typeof s.componentWillReceiveProps!="function"||(a!==n||l!==u)&amp;&amp;c9(e,s,n,u),Sm=!1;var p=e.memoizedState;s.state=p,EI(e,n,s,o),l=e.memoizedState,a!==n||p!==l||yl.current||Sm?(typeof d=="function"&amp;&amp;(t3(e,t,d,n),l=e.memoizedState),(a=Sm||d9(e,t,a,n,p,l,u))?(c||typeof s.UNSAFE_componentWillMount!="function"&amp;&amp;typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&amp;&amp;s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&amp;&amp;s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&amp;&amp;(e.flags|=4194308)):(typeof s.componentDidMount=="function"&amp;&amp;(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):(typeof s.componentDidMount=="function"&amp;&amp;(e.flags|=4194308),n=!1)}else{s=e.stateNode,NV(r,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kd(e.type,a),s.props=u,c=e.pendingProps,p=s.context,l=t.contextType,typeof l=="object"&amp;&amp;l!==null?l=Hu(l):(l=Cl(t)?hb:ka.current,l=r0(e,l));var h=t.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&amp;&amp;typeof s.componentWillReceiveProps!="function"||(a!==c||p!==l)&amp;&amp;c9(e,s,n,l),Sm=!1,p=e.memoizedState,s.state=p,EI(e,n,s,o);var f=e.memoizedState;a!==c||p!==f||yl.current||Sm?(typeof h=="function"&amp;&amp;(t3(e,t,h,n),f=e.memoizedState),(u=Sm||d9(e,t,u,n,p,f,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&amp;&amp;typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&amp;&amp;s.componentWillUpdate(n,f,l),typeof s.UNSAFE_componentWillUpdate=="function"&amp;&amp;s.UNSAFE_componentWillUpdate(n,f,l)),typeof s.componentDidUpdate=="function"&amp;&amp;(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&amp;&amp;(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===r.memoizedProps&amp;&amp;p===r.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&amp;&amp;p===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),s.props=n,s.state=f,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||a===r.memoizedProps&amp;&amp;p===r.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&amp;&amp;p===r.memoizedState||(e.flags|=1024),n=!1)}return i3(r,e,t,n,i,o)}function i3(r,e,t,n,o,i){uj(r,e);var s=(e.flags&amp;128)!==0;if(!n&amp;&amp;!s)return o&amp;&amp;i9(e,t,!1),Eh(r,e,i);n=e.stateNode,Uge.current=e;var a=s&amp;&amp;typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&amp;&amp;s?(e.child=o0(e,r.child,null,i),e.child=o0(e,null,a,i)):Ya(r,e,a,i),e.memoizedState=n.state,o&amp;&amp;i9(e,t,!0),e.child}function dj(r){var e=r.stateNode;e.pendingContext?o9(r,e.pendingContext,e.pendingContext!==e.context):e.context&amp;&amp;o9(r,e.context,!1),H3(r,e.containerInfo)}function S9(r,e,t,n,o){return n0(),B3(o),e.flags|=256,Ya(r,e,t,n),e.child}var s3={dehydrated:null,treeContext:null,retryLane:0};function a3(r){return{baseLanes:r,cachePool:null,transitions:null}}function cj(r,e,t){var n=e.pendingProps,o=gi.current,i=!1,s=(e.flags&amp;128)!==0,a;if((a=s)||(a=r!==null&amp;&amp;r.memoizedState===null?!1:(o&amp;2)!==0),a?(i=!0,e.flags&amp;=-129):(r===null||r.memoizedState!==null)&amp;&amp;(o|=1),zo(gi,o&amp;1),r===null)return ZO(e),r=e.memoizedState,r!==null&amp;&amp;(r=r.dehydrated,r!==null)?((e.mode&amp;1)===0?e.lanes=1:r.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=n.children,r=n.fallback,i?(n=e.mode,i=e.child,s={mode:"hidden",children:s},(n&amp;1)===0&amp;&amp;i!==null?(i.childLanes=0,i.pendingProps=s):i=YI(s,n,0,null),r=pb(r,n,t,null),i.return=e,r.return=e,i.sibling=r,e.child=i,e.child.memoizedState=a3(t),e.memoizedState=s3,r):Y3(e,s));if(o=r.memoizedState,o!==null&amp;&amp;(a=o.dehydrated,a!==null))return zge(r,e,s,n,a,o,t);if(i){i=n.fallback,s=e.mode,o=r.child,a=o.sibling;var l={mode:"hidden",children:n.children};return(s&amp;1)===0&amp;&amp;e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Mm(o,l),n.subtreeFlags=o.subtreeFlags&amp;14680064),a!==null?i=Mm(a,i):(i=pb(i,s,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,s=r.child.memoizedState,s=s===null?a3(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=r.childLanes&amp;~t,e.memoizedState=s3,n}return i=r.child,r=i.sibling,n=Mm(i,{mode:"visible",children:n.children}),(e.mode&amp;1)===0&amp;&amp;(n.lanes=t),n.return=e,n.sibling=null,r!==null&amp;&amp;(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function Y3(r,e){return e=YI({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function rI(r,e,t,n){return n!==null&amp;&amp;B3(n),o0(e,r.child,null,t),r=Y3(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function zge(r,e,t,n,o,i,s){if(t)return e.flags&amp;256?(e.flags&amp;=-257,n=SO(Error(ht(422))),rI(r,e,s,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(i=n.fallback,o=e.mode,n=YI({mode:"visible",children:n.children},o,0,null),i=pb(i,o,s,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,(e.mode&amp;1)!==0&amp;&amp;o0(e,r.child,null,s),e.child.memoizedState=a3(s),e.memoizedState=s3,i);if((e.mode&amp;1)===0)return rI(r,e,s,null);if(o.data==="$!"){if(n=o.nextSibling&amp;&amp;o.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(ht(419)),n=SO(i,n,void 0),rI(r,e,s,n)}if(a=(s&amp;r.childLanes)!==0,bl||a){if(n=Ns,n!==null){switch(s&amp;-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&amp;(n.suspendedLanes|s))!==0?0:o,o!==0&amp;&amp;o!==i.retryLane&amp;&amp;(i.retryLane=o,Ih(r,o),Qd(n,r,o,-1))}return t4(),n=SO(Error(ht(421))),rI(r,e,s,n)}return o.data==="$?"?(e.flags|=128,e.child=r.child,e=Zge.bind(null,r),o._reactRetry=e,null):(r=i.treeContext,Ql=Im(o.nextSibling),Jl=e,di=!0,Yd=null,r!==null&amp;&amp;(Lu[Ou++]=Th,Lu[Ou++]=Dh,Lu[Ou++]=fb,Th=r.id,Dh=r.overflow,fb=e),e=Y3(e,n.children),e.flags|=4096,e)}function x9(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&amp;&amp;(n.lanes|=e),e3(r.return,e,t)}function xO(r,e,t,n,o){var i=r.memoizedState;i===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=o)}function pj(r,e,t){var n=e.pendingProps,o=n.revealOrder,i=n.tail;if(Ya(r,e,n.children,t),n=gi.current,(n&amp;2)!==0)n=n&amp;1|2,e.flags|=128;else{if(r!==null&amp;&amp;(r.flags&amp;128)!==0)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&amp;&amp;x9(r,t,e);else if(r.tag===19)x9(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&amp;=1}if(zo(gi,n),(e.mode&amp;1)===0)e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)r=t.alternate,r!==null&amp;&amp;_I(r)===null&amp;&amp;(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),xO(e,!1,o,t,i);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(r=o.alternate,r!==null&amp;&amp;_I(r)===null){e.child=o;break}r=o.sibling,o.sibling=t,t=o,o=r}xO(e,!0,t,null,i);break;case"together":xO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cI(r,e){(e.mode&amp;1)===0&amp;&amp;r!==null&amp;&amp;(r.alternate=null,e.alternate=null,e.flags|=2)}function Eh(r,e,t){if(r!==null&amp;&amp;(e.dependencies=r.dependencies),gb|=e.lanes,(t&amp;e.childLanes)===0)return null;if(r!==null&amp;&amp;e.child!==r.child)throw Error(ht(153));if(e.child!==null){for(r=e.child,t=Mm(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Mm(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function Hge(r,e,t){switch(e.tag){case 3:dj(e),n0();break;case 5:UV(e);break;case 1:Cl(e.type)&amp;&amp;DI(e);break;case 4:H3(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;zo(AI,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(zo(gi,gi.current&amp;1),e.flags|=128,null):(t&amp;e.child.childLanes)!==0?cj(r,e,t):(zo(gi,gi.current&amp;1),r=Eh(r,e,t),r!==null?r.sibling:null);zo(gi,gi.current&amp;1);break;case 19:if(n=(t&amp;e.childLanes)!==0,(r.flags&amp;128)!==0){if(n)return pj(r,e,t);e.flags|=128}if(o=e.memoizedState,o!==null&amp;&amp;(o.rendering=null,o.tail=null,o.lastEffect=null),zo(gi,gi.current),n)break;return null;case 22:case 23:return e.lanes=0,lj(r,e,t)}return Eh(r,e,t)}var hj,l3,fj,mj;hj=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&amp;&amp;t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};l3=function(){};fj=function(r,e,t,n){var o=r.memoizedProps;if(o!==n){r=e.stateNode,db(Yc.current);var i=null;switch(t){case"input":o=EO(r,o),n=EO(r,n),i=[];break;case"select":o=bi({},o,{value:void 0}),n=bi({},n,{value:void 0}),i=[];break;case"textarea":o=MO(r,o),n=MO(r,n),i=[];break;default:typeof o.onClick!="function"&amp;&amp;typeof n.onClick=="function"&amp;&amp;(r.onclick=wI)}BO(t,n);var s;t=null;for(u in o)if(!n.hasOwnProperty(u)&amp;&amp;o.hasOwnProperty(u)&amp;&amp;o[u]!=null)if(u==="style"){var a=o[u];for(s in a)a.hasOwnProperty(s)&amp;&amp;(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&amp;&amp;u!=="children"&amp;&amp;u!=="suppressContentEditableWarning"&amp;&amp;u!=="suppressHydrationWarning"&amp;&amp;u!=="autoFocus"&amp;&amp;(HT.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=o!=null?o[u]:void 0,n.hasOwnProperty(u)&amp;&amp;l!==a&amp;&amp;(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&amp;&amp;l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&amp;&amp;a[s]!==l[s]&amp;&amp;(t||(t={}),t[s]=l[s])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&amp;&amp;a!==l&amp;&amp;(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&amp;&amp;typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&amp;&amp;u!=="suppressHydrationWarning"&amp;&amp;(HT.hasOwnProperty(u)?(l!=null&amp;&amp;u==="onScroll"&amp;&amp;Xo("scroll",r),i||a===l||(i=[])):(i=i||[]).push(u,l))}t&amp;&amp;(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&amp;&amp;(e.flags|=4)}};mj=function(r,e,t,n){t!==n&amp;&amp;(e.flags|=4)};function DT(r,e){if(!di)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&amp;&amp;(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&amp;&amp;(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Ta(r){var e=r.alternate!==null&amp;&amp;r.alternate.child===r.child,t=0,n=0;if(e)for(var o=r.child;o!==null;)t|=o.lanes|o.childLanes,n|=o.subtreeFlags&amp;14680064,n|=o.flags&amp;14680064,o.return=r,o=o.sibling;else for(o=r.child;o!==null;)t|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=r,o=o.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function Gge(r,e,t){var n=e.pendingProps;switch(N3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ta(e),null;case 1:return Cl(e.type)&amp;&amp;TI(),Ta(e),null;case 3:return n=e.stateNode,i0(),Qo(yl),Qo(ka),W3(),n.pendingContext&amp;&amp;(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&amp;&amp;(eI(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&amp;&amp;(e.flags&amp;256)===0||(e.flags|=1024,Yd!==null&amp;&amp;(g3(Yd),Yd=null))),l3(r,e),Ta(e),null;case 5:G3(e);var o=db(ZT.current);if(t=e.type,r!==null&amp;&amp;e.stateNode!=null)fj(r,e,t,n,o),r.ref!==e.ref&amp;&amp;(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ht(166));return Ta(e),null}if(r=db(Yc.current),eI(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Kc]=e,n[QT]=i,r=(e.mode&amp;1)!==0,t){case"dialog":Xo("cancel",n),Xo("close",n);break;case"iframe":case"object":case"embed":Xo("load",n);break;case"video":case"audio":for(o=0;o&lt;_T.length;o++)Xo(_T[o],n);break;case"source":Xo("error",n);break;case"img":case"image":case"link":Xo("error",n),Xo("load",n);break;case"details":Xo("toggle",n);break;case"input":E$(n,i),Xo("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xo("invalid",n);break;case"textarea":F$(n,i),Xo("invalid",n)}BO(t,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?n.textContent!==a&amp;&amp;(i.suppressHydrationWarning!==!0&amp;&amp;ZA(n.textContent,a,r),o=["children",a]):typeof a=="number"&amp;&amp;n.textContent!==""+a&amp;&amp;(i.suppressHydrationWarning!==!0&amp;&amp;ZA(n.textContent,a,r),o=["children",""+a]):HT.hasOwnProperty(s)&amp;&amp;a!=null&amp;&amp;s==="onScroll"&amp;&amp;Xo("scroll",n)}switch(t){case"input":HA(n),_$(n,i,!0);break;case"textarea":HA(n),M$(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&amp;&amp;(n.onclick=wI)}n=o,e.updateQueue=n,n!==null&amp;&amp;(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,r==="http://www.w3.org/1999/xhtml"&amp;&amp;(r=G9(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=s.createElement("div"),r.innerHTML="&lt;script&gt;&lt;\/script&gt;",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=s.createElement(t,{is:n.is}):(r=s.createElement(t),t==="select"&amp;&amp;(s=r,n.multiple?s.multiple=!0:n.size&amp;&amp;(s.size=n.size))):r=s.createElementNS(r,t),r[Kc]=e,r[QT]=n,hj(r,e,!1,!1),e.stateNode=r;e:{switch(s=RO(t,n),t){case"dialog":Xo("cancel",r),Xo("close",r),o=n;break;case"iframe":case"object":case"embed":Xo("load",r),o=n;break;case"video":case"audio":for(o=0;o&lt;_T.length;o++)Xo(_T[o],r);o=n;break;case"source":Xo("error",r),o=n;break;case"img":case"image":case"link":Xo("error",r),Xo("load",r),o=n;break;case"details":Xo("toggle",r),o=n;break;case"input":E$(r,n),o=EO(r,n),Xo("invalid",r);break;case"option":o=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},o=bi({},n,{value:void 0}),Xo("invalid",r);break;case"textarea":F$(r,n),o=MO(r,n),Xo("invalid",r);break;default:o=n}BO(t,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?V9(r,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&amp;&amp;W9(r,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&amp;&amp;GT(r,l):typeof l=="number"&amp;&amp;GT(r,""+l):i!=="suppressContentEditableWarning"&amp;&amp;i!=="suppressHydrationWarning"&amp;&amp;i!=="autoFocus"&amp;&amp;(HT.hasOwnProperty(i)?l!=null&amp;&amp;i==="onScroll"&amp;&amp;Xo("scroll",r):l!=null&amp;&amp;y3(r,i,l,s))}switch(t){case"input":HA(r),_$(r,n,!1);break;case"textarea":HA(r),M$(r);break;case"option":n.value!=null&amp;&amp;r.setAttribute("value",""+Nm(n.value));break;case"select":r.multiple=!!n.multiple,i=n.value,i!=null?YC(r,!!n.multiple,i,!1):n.defaultValue!=null&amp;&amp;YC(r,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&amp;&amp;(r.onclick=wI)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&amp;&amp;(e.flags|=4)}e.ref!==null&amp;&amp;(e.flags|=512,e.flags|=2097152)}return Ta(e),null;case 6:if(r&amp;&amp;e.stateNode!=null)mj(r,e,r.memoizedProps,n);else{if(typeof n!="string"&amp;&amp;e.stateNode===null)throw Error(ht(166));if(t=db(ZT.current),db(Yc.current),eI(e)){if(n=e.stateNode,t=e.memoizedProps,n[Kc]=e,(i=n.nodeValue!==t)&amp;&amp;(r=Jl,r!==null))switch(r.tag){case 3:ZA(n.nodeValue,t,(r.mode&amp;1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&amp;&amp;ZA(n.nodeValue,t,(r.mode&amp;1)!==0)}i&amp;&amp;(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Kc]=e,e.stateNode=n}return Ta(e),null;case 13:if(Qo(gi),n=e.memoizedState,r===null||r.memoizedState!==null&amp;&amp;r.memoizedState.dehydrated!==null){if(di&amp;&amp;Ql!==null&amp;&amp;(e.mode&amp;1)!==0&amp;&amp;(e.flags&amp;128)===0)FV(),n0(),e.flags|=98560,i=!1;else if(i=eI(e),n!==null&amp;&amp;n.dehydrated!==null){if(r===null){if(!i)throw Error(ht(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ht(317));i[Kc]=e}else n0(),(e.flags&amp;128)===0&amp;&amp;(e.memoizedState=null),e.flags|=4;Ta(e),i=!1}else Yd!==null&amp;&amp;(g3(Yd),Yd=null),i=!0;if(!i)return e.flags&amp;65536?e:null}return(e.flags&amp;128)!==0?(e.lanes=t,e):(n=n!==null,n!==(r!==null&amp;&amp;r.memoizedState!==null)&amp;&amp;n&amp;&amp;(e.child.flags|=8192,(e.mode&amp;1)!==0&amp;&amp;(r===null||(gi.current&amp;1)!==0?ws===0&amp;&amp;(ws=3):t4())),e.updateQueue!==null&amp;&amp;(e.flags|=4),Ta(e),null);case 4:return i0(),l3(r,e),r===null&amp;&amp;YT(e.stateNode.containerInfo),Ta(e),null;case 10:return O3(e.type._context),Ta(e),null;case 17:return Cl(e.type)&amp;&amp;TI(),Ta(e),null;case 19:if(Qo(gi),i=e.memoizedState,i===null)return Ta(e),null;if(n=(e.flags&amp;128)!==0,s=i.rendering,s===null)if(n)DT(i,!1);else{if(ws!==0||r!==null&amp;&amp;(r.flags&amp;128)!==0)for(r=e.child;r!==null;){if(s=_I(r),s!==null){for(e.flags|=128,DT(i,!1),n=s.updateQueue,n!==null&amp;&amp;(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,r=n,i.flags&amp;=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,r=s.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return zo(gi,gi.current&amp;1|2),e.child}r=r.sibling}i.tail!==null&amp;&amp;Ri()&gt;a0&amp;&amp;(e.flags|=128,n=!0,DT(i,!1),e.lanes=4194304)}else{if(!n)if(r=_I(s),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&amp;&amp;(e.updateQueue=t,e.flags|=4),DT(i,!0),i.tail===null&amp;&amp;i.tailMode==="hidden"&amp;&amp;!s.alternate&amp;&amp;!di)return Ta(e),null}else 2*Ri()-i.renderingStartTime&gt;a0&amp;&amp;t!==1073741824&amp;&amp;(e.flags|=128,n=!0,DT(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ri(),e.sibling=null,t=gi.current,zo(gi,n?t&amp;1|2:t&amp;1),e):(Ta(e),null);case 22:case 23:return e4(),n=e.memoizedState!==null,r!==null&amp;&amp;r.memoizedState!==null!==n&amp;&amp;(e.flags|=8192),n&amp;&amp;(e.mode&amp;1)!==0?(Xl&amp;1073741824)!==0&amp;&amp;(Ta(e),e.subtreeFlags&amp;6&amp;&amp;(e.flags|=8192)):Ta(e),null;case 24:return null;case 25:return null}throw Error(ht(156,e.tag))}function Wge(r,e){switch(N3(e),e.tag){case 1:return Cl(e.type)&amp;&amp;TI(),r=e.flags,r&amp;65536?(e.flags=r&amp;-65537|128,e):null;case 3:return i0(),Qo(yl),Qo(ka),W3(),r=e.flags,(r&amp;65536)!==0&amp;&amp;(r&amp;128)===0?(e.flags=r&amp;-65537|128,e):null;case 5:return G3(e),null;case 13:if(Qo(gi),r=e.memoizedState,r!==null&amp;&amp;r.dehydrated!==null){if(e.alternate===null)throw Error(ht(340));n0()}return r=e.flags,r&amp;65536?(e.flags=r&amp;-65537|128,e):null;case 19:return Qo(gi),null;case 4:return i0(),null;case 10:return O3(e.type._context),null;case 22:case 23:return e4(),null;case 24:return null;default:return null}}var nI=!1,Da=!1,$ge=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function KC(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Si(r,e,n)}else t.current=null}function u3(r,e,t){try{t()}catch(n){Si(r,e,n)}}var w9=!1;function Vge(r,e){if(jO=CI,r=yV(),F3(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&amp;&amp;t.defaultView||window;var n=t.getSelection&amp;&amp;t.getSelection();if(n&amp;&amp;n.rangeCount!==0){t=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(x){t=null;break e}var s=0,a=-1,l=-1,u=0,d=0,c=r,p=null;t:for(;;){for(var h;c!==t||o!==0&amp;&amp;c.nodeType!==3||(a=s+o),c!==i||n!==0&amp;&amp;c.nodeType!==3||(l=s+n),c.nodeType===3&amp;&amp;(s+=c.nodeValue.length),(h=c.firstChild)!==null;)p=c,c=h;for(;;){if(c===r)break t;if(p===t&amp;&amp;++u===o&amp;&amp;(a=s),p===i&amp;&amp;++d===n&amp;&amp;(l=s),(h=c.nextSibling)!==null)break;c=p,p=c.parentNode}c=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(KO={focusedElem:r,selectionRange:t},CI=!1,Ut=e;Ut!==null;)if(e=Ut,r=e.child,(e.subtreeFlags&amp;1028)!==0&amp;&amp;r!==null)r.return=e,Ut=r;else for(;Ut!==null;){e=Ut;try{var f=e.alternate;if((e.flags&amp;1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Kd(e.type,m),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&amp;&amp;C.documentElement&amp;&amp;C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ht(163))}}catch(x){Si(e,e.return,x)}if(r=e.sibling,r!==null){r.return=e.return,Ut=r;break}Ut=e.return}return f=w9,w9=!1,f}function OT(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&amp;r)===r){var i=o.destroy;o.destroy=void 0,i!==void 0&amp;&amp;u3(e,t,i)}o=o.next}while(o!==n)}}function KI(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&amp;r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function d3(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function gj(r){var e=r.alternate;e!==null&amp;&amp;(r.alternate=null,gj(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&amp;&amp;(e=r.stateNode,e!==null&amp;&amp;(delete e[Kc],delete e[QT],delete e[XO],delete e[Pge],delete e[Age])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function vj(r){return r.tag===5||r.tag===3||r.tag===4}function T9(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vj(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&amp;&amp;r.tag!==6&amp;&amp;r.tag!==18;){if(r.flags&amp;2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&amp;2))return r.stateNode}}function c3(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=wI));else if(n!==4&amp;&amp;(r=r.child,r!==null))for(c3(r,e,t),r=r.sibling;r!==null;)c3(r,e,t),r=r.sibling}function p3(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&amp;&amp;(r=r.child,r!==null))for(p3(r,e,t),r=r.sibling;r!==null;)p3(r,e,t),r=r.sibling}var ra=null,qd=!1;function ym(r,e,t){for(t=t.child;t!==null;)bj(r,e,t),t=t.sibling}function bj(r,e,t){if(qc&amp;&amp;typeof qc.onCommitFiberUnmount=="function")try{qc.onCommitFiberUnmount(UI,t)}catch(a){}switch(t.tag){case 5:Da||KC(t,e);case 6:var n=ra,o=qd;ra=null,ym(r,e,t),ra=n,qd=o,ra!==null&amp;&amp;(qd?(r=ra,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):ra.removeChild(t.stateNode));break;case 18:ra!==null&amp;&amp;(qd?(r=ra,t=t.stateNode,r.nodeType===8?mO(r.parentNode,t):r.nodeType===1&amp;&amp;mO(r,t),jT(r)):mO(ra,t.stateNode));break;case 4:n=ra,o=qd,ra=t.stateNode.containerInfo,qd=!0,ym(r,e,t),ra=n,qd=o;break;case 0:case 11:case 14:case 15:if(!Da&amp;&amp;(n=t.updateQueue,n!==null&amp;&amp;(n=n.lastEffect,n!==null))){o=n=n.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&amp;&amp;((i&amp;2)!==0||(i&amp;4)!==0)&amp;&amp;u3(t,e,s),o=o.next}while(o!==n)}ym(r,e,t);break;case 1:if(!Da&amp;&amp;(KC(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Si(t,e,a)}ym(r,e,t);break;case 21:ym(r,e,t);break;case 22:t.mode&amp;1?(Da=(n=Da)||t.memoizedState!==null,ym(r,e,t),Da=n):ym(r,e,t);break;default:ym(r,e,t)}}function D9(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&amp;&amp;(t=r.stateNode=new $ge),e.forEach(function(n){var o=eve.bind(null,r,n);t.has(n)||(t.add(n),n.then(o,o))})}}function jd(r,e){var t=e.deletions;if(t!==null)for(var n=0;n&lt;t.length;n++){var o=t[n];try{var i=r,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ra=a.stateNode,qd=!1;break e;case 3:ra=a.stateNode.containerInfo,qd=!0;break e;case 4:ra=a.stateNode.containerInfo,qd=!0;break e}a=a.return}if(ra===null)throw Error(ht(160));bj(i,s,o),ra=null,qd=!1;var l=o.alternate;l!==null&amp;&amp;(l.return=null),o.return=null}catch(u){Si(o,e,u)}}if(e.subtreeFlags&amp;12854)for(e=e.child;e!==null;)yj(e,r),e=e.sibling}function yj(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(jd(e,r),Vc(r),n&amp;4){try{OT(3,r,r.return),KI(3,r)}catch(m){Si(r,r.return,m)}try{OT(5,r,r.return)}catch(m){Si(r,r.return,m)}}break;case 1:jd(e,r),Vc(r),n&amp;512&amp;&amp;t!==null&amp;&amp;KC(t,t.return);break;case 5:if(jd(e,r),Vc(r),n&amp;512&amp;&amp;t!==null&amp;&amp;KC(t,t.return),r.flags&amp;32){var o=r.stateNode;try{GT(o,"")}catch(m){Si(r,r.return,m)}}if(n&amp;4&amp;&amp;(o=r.stateNode,o!=null)){var i=r.memoizedProps,s=t!==null?t.memoizedProps:i,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&amp;&amp;i.type==="radio"&amp;&amp;i.name!=null&amp;&amp;z9(o,i),RO(a,s);var u=RO(a,i);for(s=0;s&lt;l.length;s+=2){var d=l[s],c=l[s+1];d==="style"?V9(o,c):d==="dangerouslySetInnerHTML"?W9(o,c):d==="children"?GT(o,c):y3(o,d,c,u)}switch(a){case"input":_O(o,i);break;case"textarea":H9(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?YC(o,!!i.multiple,h,!1):p!==!!i.multiple&amp;&amp;(i.defaultValue!=null?YC(o,!!i.multiple,i.defaultValue,!0):YC(o,!!i.multiple,i.multiple?[]:"",!1))}o[QT]=i}catch(m){Si(r,r.return,m)}}break;case 6:if(jd(e,r),Vc(r),n&amp;4){if(r.stateNode===null)throw Error(ht(162));o=r.stateNode,i=r.memoizedProps;try{o.nodeValue=i}catch(m){Si(r,r.return,m)}}break;case 3:if(jd(e,r),Vc(r),n&amp;4&amp;&amp;t!==null&amp;&amp;t.memoizedState.isDehydrated)try{jT(e.containerInfo)}catch(m){Si(r,r.return,m)}break;case 4:jd(e,r),Vc(r);break;case 13:jd(e,r),Vc(r),o=r.child,o.flags&amp;8192&amp;&amp;(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&amp;&amp;o.alternate.memoizedState!==null||(J3=Ri())),n&amp;4&amp;&amp;D9(r);break;case 22:if(d=t!==null&amp;&amp;t.memoizedState!==null,r.mode&amp;1?(Da=(u=Da)||d,jd(e,r),Da=u):jd(e,r),Vc(r),n&amp;8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&amp;&amp;!d&amp;&amp;(r.mode&amp;1)!==0)for(Ut=r,d=r.child;d!==null;){for(c=Ut=d;Ut!==null;){switch(p=Ut,h=p.child,p.tag){case 0:case 11:case 14:case 15:OT(4,p,p.return);break;case 1:KC(p,p.return);var f=p.stateNode;if(typeof f.componentWillUnmount=="function"){n=p,t=p.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){Si(n,t,m)}}break;case 5:KC(p,p.return);break;case 22:if(p.memoizedState!==null){P9(c);continue}}h!==null?(h.return=p,Ut=h):P9(c)}d=d.sibling}e:for(d=null,c=r;;){if(c.tag===5){if(d===null){d=c;try{o=c.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=c.stateNode,l=c.memoizedProps.style,s=l!=null&amp;&amp;l.hasOwnProperty("display")?l.display:null,a.style.display=$9("display",s))}catch(m){Si(r,r.return,m)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(m){Si(r,r.return,m)}}else if((c.tag!==22&amp;&amp;c.tag!==23||c.memoizedState===null||c===r)&amp;&amp;c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;d===c&amp;&amp;(d=null),c=c.return}d===c&amp;&amp;(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:jd(e,r),Vc(r),n&amp;4&amp;&amp;D9(r);break;case 21:break;default:jd(e,r),Vc(r)}}function Vc(r){var e=r.flags;if(e&amp;2){try{e:{for(var t=r.return;t!==null;){if(vj(t)){var n=t;break e}t=t.return}throw Error(ht(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&amp;32&amp;&amp;(GT(o,""),n.flags&amp;=-33);var i=T9(r);p3(r,i,o);break;case 3:case 4:var s=n.stateNode.containerInfo,a=T9(r);c3(r,a,s);break;default:throw Error(ht(161))}}catch(l){Si(r,r.return,l)}r.flags&amp;=-3}e&amp;4096&amp;&amp;(r.flags&amp;=-4097)}function jge(r,e,t){Ut=r,Cj(r,e,t)}function Cj(r,e,t){for(var n=(r.mode&amp;1)!==0;Ut!==null;){var o=Ut,i=o.child;if(o.tag===22&amp;&amp;n){var s=o.memoizedState!==null||nI;if(!s){var a=o.alternate,l=a!==null&amp;&amp;a.memoizedState!==null||Da;a=nI;var u=Da;if(nI=s,(Da=l)&amp;&amp;!u)for(Ut=o;Ut!==null;)s=Ut,l=s.child,s.tag===22&amp;&amp;s.memoizedState!==null?A9(o):l!==null?(l.return=s,Ut=l):A9(o);for(;i!==null;)Ut=i,Cj(i,e,t),i=i.sibling;Ut=o,nI=a,Da=u}k9(r,e,t)}else(o.subtreeFlags&amp;8772)!==0&amp;&amp;i!==null?(i.return=o,Ut=i):k9(r,e,t)}}function k9(r){for(;Ut!==null;){var e=Ut;if((e.flags&amp;8772)!==0){var t=e.alternate;try{if((e.flags&amp;8772)!==0)switch(e.tag){case 0:case 11:case 15:Da||KI(5,e);break;case 1:var n=e.stateNode;if(e.flags&amp;4&amp;&amp;!Da)if(t===null)n.componentDidMount();else{var o=e.elementType===e.type?t.memoizedProps:Kd(e.type,t.memoizedProps);n.componentDidUpdate(o,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&amp;&amp;u9(e,i,n);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}u9(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&amp;&amp;e.flags&amp;4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&amp;&amp;t.focus();break;case"img":l.src&amp;&amp;(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&amp;&amp;jT(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ht(163))}Da||e.flags&amp;512&amp;&amp;d3(e)}catch(p){Si(e,e.return,p)}}if(e===r){Ut=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ut=t;break}Ut=e.return}}function P9(r){for(;Ut!==null;){var e=Ut;if(e===r){Ut=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ut=t;break}Ut=e.return}}function A9(r){for(;Ut!==null;){var e=Ut;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{KI(4,e)}catch(l){Si(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(l){Si(e,o,l)}}var i=e.return;try{d3(e)}catch(l){Si(e,i,l)}break;case 5:var s=e.return;try{d3(e)}catch(l){Si(e,s,l)}}}catch(l){Si(e,e.return,l)}if(e===r){Ut=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ut=a;break}Ut=e.return}}var Kge=Math.ceil,NI=_h.ReactCurrentDispatcher,X3=_h.ReactCurrentOwner,zu=_h.ReactCurrentBatchConfig,Vn=0,Ns=null,ns=null,na=0,Xl=0,qC=Lm(0),ws=0,n1=null,gb=0,qI=0,Q3=0,UT=null,vl=null,J3=0,a0=1/0,xh=null,BI=!1,h3=null,_m=null,oI=!1,Dm=null,RI=0,zT=0,f3=null,pI=-1,hI=0;function Xa(){return(Vn&amp;6)!==0?Ri():pI!==-1?pI:pI=Ri()}function Fm(r){return(r.mode&amp;1)===0?1:(Vn&amp;2)!==0&amp;&amp;na!==0?na&amp;-na:Ege.transition!==null?(hI===0&amp;&amp;(hI=nV()),hI):(r=yo,r!==0||(r=window.event,r=r===void 0?16:dV(r.type)),r)}function Qd(r,e,t,n){if(50&lt;zT)throw zT=0,f3=null,Error(ht(185));o1(r,t,n),((Vn&amp;2)===0||r!==Ns)&amp;&amp;(r===Ns&amp;&amp;((Vn&amp;2)===0&amp;&amp;(qI|=t),ws===4&amp;&amp;wm(r,na)),Sl(r,n),t===1&amp;&amp;Vn===0&amp;&amp;(e.mode&amp;1)===0&amp;&amp;(a0=Ri()+500,$I&amp;&amp;Om()))}function Sl(r,e){var t=r.callbackNode;Fme(r,e);var n=yI(r,r===Ns?na:0);if(n===0)t!==null&amp;&amp;R$(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&amp;-n,r.callbackPriority!==e){if(t!=null&amp;&amp;R$(t),e===1)r.tag===0?Ige(I9.bind(null,r)):IV(I9.bind(null,r)),Dge(function(){(Vn&amp;6)===0&amp;&amp;Om()}),t=null;else{switch(oV(n)){case 1:t=T3;break;case 4:t=tV;break;case 16:t=bI;break;case 536870912:t=rV;break;default:t=bI}t=Aj(t,Sj.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function Sj(r,e){if(pI=-1,hI=0,(Vn&amp;6)!==0)throw Error(ht(327));var t=r.callbackNode;if(e0()&amp;&amp;r.callbackNode!==t)return null;var n=yI(r,r===Ns?na:0);if(n===0)return null;if((n&amp;30)!==0||(n&amp;r.expiredLanes)!==0||e)e=LI(r,n);else{e=n;var o=Vn;Vn|=2;var i=wj();(Ns!==r||na!==e)&amp;&amp;(xh=null,a0=Ri()+500,cb(r,e));do try{Xge();break}catch(a){xj(r,a)}while(1);L3(),NI.current=i,Vn=o,ns!==null?e=0:(Ns=null,na=0,e=ws)}if(e!==0){if(e===2&amp;&amp;(o=HO(r),o!==0&amp;&amp;(n=o,e=m3(r,o))),e===1)throw t=n1,cb(r,0),wm(r,n),Sl(r,Ri()),t;if(e===6)wm(r,n);else{if(o=r.current.alternate,(n&amp;30)===0&amp;&amp;!qge(o)&amp;&amp;(e=LI(r,n),e===2&amp;&amp;(i=HO(r),i!==0&amp;&amp;(n=i,e=m3(r,i))),e===1))throw t=n1,cb(r,0),wm(r,n),Sl(r,Ri()),t;switch(r.finishedWork=o,r.finishedLanes=n,e){case 0:case 1:throw Error(ht(345));case 2:ab(r,vl,xh);break;case 3:if(wm(r,n),(n&amp;130023424)===n&amp;&amp;(e=J3+500-Ri(),10&lt;e)){if(yI(r,0)!==0)break;if(o=r.suspendedLanes,(o&amp;n)!==n){Xa(),r.pingedLanes|=r.suspendedLanes&amp;o;break}r.timeoutHandle=YO(ab.bind(null,r,vl,xh),e);break}ab(r,vl,xh);break;case 4:if(wm(r,n),(n&amp;4194240)===n)break;for(e=r.eventTimes,o=-1;0&lt;n;){var s=31-Xd(n);i=1&lt;&lt;s,s=e[s],s&gt;o&amp;&amp;(o=s),n&amp;=~i}if(n=o,n=Ri()-n,n=(120&gt;n?120:480&gt;n?480:1080&gt;n?1080:1920&gt;n?1920:3e3&gt;n?3e3:4320&gt;n?4320:1960*Kge(n/1960))-n,10&lt;n){r.timeoutHandle=YO(ab.bind(null,r,vl,xh),n);break}ab(r,vl,xh);break;case 5:ab(r,vl,xh);break;default:throw Error(ht(329))}}}return Sl(r,Ri()),r.callbackNode===t?Sj.bind(null,r):null}function m3(r,e){var t=UT;return r.current.memoizedState.isDehydrated&amp;&amp;(cb(r,e).flags|=256),r=LI(r,e),r!==2&amp;&amp;(e=vl,vl=t,e!==null&amp;&amp;g3(e)),r}function g3(r){vl===null?vl=r:vl.push.apply(vl,r)}function qge(r){for(var e=r;;){if(e.flags&amp;16384){var t=e.updateQueue;if(t!==null&amp;&amp;(t=t.stores,t!==null))for(var n=0;n&lt;t.length;n++){var o=t[n],i=o.getSnapshot;o=o.value;try{if(!Jd(i(),o))return!1}catch(s){return!1}}}if(t=e.child,e.subtreeFlags&amp;16384&amp;&amp;t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wm(r,e){for(e&amp;=~Q3,e&amp;=~qI,r.suspendedLanes|=e,r.pingedLanes&amp;=~e,r=r.expirationTimes;0&lt;e;){var t=31-Xd(e),n=1&lt;&lt;t;r[t]=-1,e&amp;=~n}}function I9(r){if((Vn&amp;6)!==0)throw Error(ht(327));e0();var e=yI(r,0);if((e&amp;1)===0)return Sl(r,Ri()),null;var t=LI(r,e);if(r.tag!==0&amp;&amp;t===2){var n=HO(r);n!==0&amp;&amp;(e=n,t=m3(r,n))}if(t===1)throw t=n1,cb(r,0),wm(r,e),Sl(r,Ri()),t;if(t===6)throw Error(ht(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,ab(r,vl,xh),Sl(r,Ri()),null}function Z3(r,e){var t=Vn;Vn|=1;try{return r(e)}finally{Vn=t,Vn===0&amp;&amp;(a0=Ri()+500,$I&amp;&amp;Om())}}function vb(r){Dm!==null&amp;&amp;Dm.tag===0&amp;&amp;(Vn&amp;6)===0&amp;&amp;e0();var e=Vn;Vn|=1;var t=zu.transition,n=yo;try{if(zu.transition=null,yo=1,r)return r()}finally{yo=n,zu.transition=t,Vn=e,(Vn&amp;6)===0&amp;&amp;Om()}}function e4(){Xl=qC.current,Qo(qC)}function cb(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&amp;&amp;(r.timeoutHandle=-1,Tge(t)),ns!==null)for(t=ns.return;t!==null;){var n=t;switch(N3(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&amp;&amp;TI();break;case 3:i0(),Qo(yl),Qo(ka),W3();break;case 5:G3(n);break;case 4:i0();break;case 13:Qo(gi);break;case 19:Qo(gi);break;case 10:O3(n.type._context);break;case 22:case 23:e4()}t=t.return}if(Ns=r,ns=r=Mm(r.current,null),na=Xl=e,ws=0,n1=null,Q3=qI=gb=0,vl=UT=null,ub!==null){for(e=0;e&lt;ub.length;e++)if(t=ub[e],n=t.interleaved,n!==null){t.interleaved=null;var o=n.next,i=t.pending;if(i!==null){var s=i.next;i.next=o,n.next=s}t.pending=n}ub=null}return r}function xj(r,e){do{var t=ns;try{if(L3(),uI.current=MI,FI){for(var n=vi.memoizedState;n!==null;){var o=n.queue;o!==null&amp;&amp;(o.pending=null),n=n.next}FI=!1}if(mb=0,Ms=xs=vi=null,LT=!1,e1=0,X3.current=null,t===null||t.return===null){ws=1,n1=e,ns=null;break}e:{var i=r,s=t.return,a=t,l=e;if(e=na,a.flags|=32768,l!==null&amp;&amp;typeof l=="object"&amp;&amp;typeof l.then=="function"){var u=l,d=a,c=d.tag;if((d.mode&amp;1)===0&amp;&amp;(c===0||c===11||c===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=g9(s);if(h!==null){h.flags&amp;=-257,v9(h,s,a,i,e),h.mode&amp;1&amp;&amp;m9(i,u,e),e=h,l=u;var f=e.updateQueue;if(f===null){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break e}else{if((e&amp;1)===0){m9(i,u,e),t4();break e}l=Error(ht(426))}}else if(di&amp;&amp;a.mode&amp;1){var g=g9(s);if(g!==null){(g.flags&amp;65536)===0&amp;&amp;(g.flags|=256),v9(g,s,a,i,e),B3(s0(l,a));break e}}i=l=s0(l,a),ws!==4&amp;&amp;(ws=2),UT===null?UT=[i]:UT.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&amp;=-e,i.lanes|=e;var v=ij(i,l,e);l9(i,v);break e;case 1:a=l;var b=i.type,C=i.stateNode;if((i.flags&amp;128)===0&amp;&amp;(typeof b.getDerivedStateFromError=="function"||C!==null&amp;&amp;typeof C.componentDidCatch=="function"&amp;&amp;(_m===null||!_m.has(C)))){i.flags|=65536,e&amp;=-e,i.lanes|=e;var x=sj(i,a,e);l9(i,x);break e}}i=i.return}while(i!==null)}Dj(t)}catch(y){e=y,ns===t&amp;&amp;t!==null&amp;&amp;(ns=t=t.return);continue}break}while(1)}function wj(){var r=NI.current;return NI.current=MI,r===null?MI:r}function t4(){(ws===0||ws===3||ws===2)&amp;&amp;(ws=4),Ns===null||(gb&amp;268435455)===0&amp;&amp;(qI&amp;268435455)===0||wm(Ns,na)}function LI(r,e){var t=Vn;Vn|=2;var n=wj();(Ns!==r||na!==e)&amp;&amp;(xh=null,cb(r,e));do try{Yge();break}catch(o){xj(r,o)}while(1);if(L3(),Vn=t,NI.current=n,ns!==null)throw Error(ht(261));return Ns=null,na=0,ws}function Yge(){for(;ns!==null;)Tj(ns)}function Xge(){for(;ns!==null&amp;&amp;!wme();)Tj(ns)}function Tj(r){var e=Pj(r.alternate,r,Xl);r.memoizedProps=r.pendingProps,e===null?Dj(r):ns=e,X3.current=null}function Dj(r){var e=r;do{var t=e.alternate;if(r=e.return,(e.flags&amp;32768)===0){if(t=Gge(t,e,Xl),t!==null){ns=t;return}}else{if(t=Wge(t,e),t!==null){t.flags&amp;=32767,ns=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ws=6,ns=null;return}}if(e=e.sibling,e!==null){ns=e;return}ns=e=r}while(e!==null);ws===0&amp;&amp;(ws=5)}function ab(r,e,t){var n=yo,o=zu.transition;try{zu.transition=null,yo=1,Qge(r,e,t,n)}finally{zu.transition=o,yo=n}return null}function Qge(r,e,t,n){do e0();while(Dm!==null);if((Vn&amp;6)!==0)throw Error(ht(327));t=r.finishedWork;var o=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(ht(177));r.callbackNode=null,r.callbackPriority=0;var i=t.lanes|t.childLanes;if(Mme(r,i),r===Ns&amp;&amp;(ns=Ns=null,na=0),(t.subtreeFlags&amp;2064)===0&amp;&amp;(t.flags&amp;2064)===0||oI||(oI=!0,Aj(bI,function(){return e0(),null})),i=(t.flags&amp;15990)!==0,(t.subtreeFlags&amp;15990)!==0||i){i=zu.transition,zu.transition=null;var s=yo;yo=1;var a=Vn;Vn|=4,X3.current=null,Vge(r,t),yj(t,r),yge(KO),CI=!!jO,KO=jO=null,r.current=t,jge(t,r,o),Tme(),Vn=a,yo=s,zu.transition=i}else r.current=t;if(oI&amp;&amp;(oI=!1,Dm=r,RI=o),i=r.pendingLanes,i===0&amp;&amp;(_m=null),Pme(t.stateNode,n),Sl(r,Ri()),e!==null)for(n=r.onRecoverableError,t=0;t&lt;e.length;t++)o=e[t],n(o.value,{componentStack:o.stack,digest:o.digest});if(BI)throw BI=!1,r=h3,h3=null,r;return(RI&amp;1)!==0&amp;&amp;r.tag!==0&amp;&amp;e0(),i=r.pendingLanes,(i&amp;1)!==0?r===f3?zT++:(zT=0,f3=r):zT=0,Om(),null}function e0(){if(Dm!==null){var r=oV(RI),e=zu.transition,t=yo;try{if(zu.transition=null,yo=16&gt;r?16:r,Dm===null)var n=!1;else{if(r=Dm,Dm=null,RI=0,(Vn&amp;6)!==0)throw Error(ht(331));var o=Vn;for(Vn|=4,Ut=r.current;Ut!==null;){var i=Ut,s=i.child;if((Ut.flags&amp;16)!==0){var a=i.deletions;if(a!==null){for(var l=0;l&lt;a.length;l++){var u=a[l];for(Ut=u;Ut!==null;){var d=Ut;switch(d.tag){case 0:case 11:case 15:OT(8,d,i)}var c=d.child;if(c!==null)c.return=d,Ut=c;else for(;Ut!==null;){d=Ut;var p=d.sibling,h=d.return;if(gj(d),d===u){Ut=null;break}if(p!==null){p.return=h,Ut=p;break}Ut=h}}}var f=i.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ut=i}}if((i.subtreeFlags&amp;2064)!==0&amp;&amp;s!==null)s.return=i,Ut=s;else e:for(;Ut!==null;){if(i=Ut,(i.flags&amp;2048)!==0)switch(i.tag){case 0:case 11:case 15:OT(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ut=v;break e}Ut=i.return}}var b=r.current;for(Ut=b;Ut!==null;){s=Ut;var C=s.child;if((s.subtreeFlags&amp;2064)!==0&amp;&amp;C!==null)C.return=s,Ut=C;else e:for(s=b;Ut!==null;){if(a=Ut,(a.flags&amp;2048)!==0)try{switch(a.tag){case 0:case 11:case 15:KI(9,a)}}catch(y){Si(a,a.return,y)}if(a===s){Ut=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ut=x;break e}Ut=a.return}}if(Vn=o,Om(),qc&amp;&amp;typeof qc.onPostCommitFiberRoot=="function")try{qc.onPostCommitFiberRoot(UI,r)}catch(y){}n=!0}return n}finally{yo=t,zu.transition=e}}return!1}function E9(r,e,t){e=s0(t,e),e=ij(r,e,1),r=Em(r,e,1),e=Xa(),r!==null&amp;&amp;(o1(r,1,e),Sl(r,e))}function Si(r,e,t){if(r.tag===3)E9(r,r,t);else for(;e!==null;){if(e.tag===3){E9(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&amp;&amp;(_m===null||!_m.has(n))){r=s0(t,r),r=sj(e,r,1),e=Em(e,r,1),r=Xa(),e!==null&amp;&amp;(o1(e,1,r),Sl(e,r));break}}e=e.return}}function Jge(r,e,t){var n=r.pingCache;n!==null&amp;&amp;n.delete(e),e=Xa(),r.pingedLanes|=r.suspendedLanes&amp;t,Ns===r&amp;&amp;(na&amp;t)===t&amp;&amp;(ws===4||ws===3&amp;&amp;(na&amp;130023424)===na&amp;&amp;500&gt;Ri()-J3?cb(r,0):Q3|=t),Sl(r,e)}function kj(r,e){e===0&amp;&amp;((r.mode&amp;1)===0?e=1:(e=$A,$A&lt;&lt;=1,($A&amp;130023424)===0&amp;&amp;($A=4194304)));var t=Xa();r=Ih(r,e),r!==null&amp;&amp;(o1(r,e,t),Sl(r,t))}function Zge(r){var e=r.memoizedState,t=0;e!==null&amp;&amp;(t=e.retryLane),kj(r,t)}function eve(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,o=r.memoizedState;o!==null&amp;&amp;(t=o.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(ht(314))}n!==null&amp;&amp;n.delete(e),kj(r,t)}var Pj;Pj=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||yl.current)bl=!0;else{if((r.lanes&amp;t)===0&amp;&amp;(e.flags&amp;128)===0)return bl=!1,Hge(r,e,t);bl=(r.flags&amp;131072)!==0}else bl=!1,di&amp;&amp;(e.flags&amp;1048576)!==0&amp;&amp;EV(e,PI,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;cI(r,e),r=e.pendingProps;var o=r0(e,ka.current);ZC(e,t),o=V3(null,e,n,r,o,t);var i=j3();return e.flags|=1,typeof o=="object"&amp;&amp;o!==null&amp;&amp;typeof o.render=="function"&amp;&amp;o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cl(n)?(i=!0,DI(e)):i=!1,e.memoizedState=o.state!==null&amp;&amp;o.state!==void 0?o.state:null,z3(e),o.updater=VI,e.stateNode=o,o._reactInternals=e,r3(e,n,r,t),e=i3(null,e,n,!0,i,t)):(e.tag=0,di&amp;&amp;i&amp;&amp;M3(e),Ya(null,e,o,t),e=e.child),e;case 16:n=e.elementType;e:{switch(cI(r,e),r=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=rve(n),r=Kd(n,r),o){case 0:e=o3(null,e,n,r,t);break e;case 1:e=C9(null,e,n,r,t);break e;case 11:e=b9(null,e,n,r,t);break e;case 14:e=y9(null,e,n,Kd(n.type,r),t);break e}throw Error(ht(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Kd(n,o),o3(r,e,n,o,t);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Kd(n,o),C9(r,e,n,o,t);case 3:e:{if(dj(e),r===null)throw Error(ht(387));n=e.pendingProps,i=e.memoizedState,o=i.element,NV(r,e),EI(e,n,null,t);var s=e.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&amp;256){o=s0(Error(ht(423)),e),e=S9(r,e,n,t,o);break e}else if(n!==o){o=s0(Error(ht(424)),e),e=S9(r,e,n,t,o);break e}else for(Ql=Im(e.stateNode.containerInfo.firstChild),Jl=e,di=!0,Yd=null,t=OV(e,null,n,t),e.child=t;t;)t.flags=t.flags&amp;-3|4096,t=t.sibling;else{if(n0(),n===o){e=Eh(r,e,t);break e}Ya(r,e,n,t)}e=e.child}return e;case 5:return UV(e),r===null&amp;&amp;ZO(e),n=e.type,o=e.pendingProps,i=r!==null?r.memoizedProps:null,s=o.children,qO(n,o)?s=null:i!==null&amp;&amp;qO(n,i)&amp;&amp;(e.flags|=32),uj(r,e),Ya(r,e,s,t),e.child;case 6:return r===null&amp;&amp;ZO(e),null;case 13:return cj(r,e,t);case 4:return H3(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=o0(e,null,n,t):Ya(r,e,n,t),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Kd(n,o),b9(r,e,n,o,t);case 7:return Ya(r,e,e.pendingProps,t),e.child;case 8:return Ya(r,e,e.pendingProps.children,t),e.child;case 12:return Ya(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,zo(AI,n._currentValue),n._currentValue=s,i!==null)if(Jd(i.value,s)){if(i.children===o.children&amp;&amp;!yl.current){e=Eh(r,e,t);break e}}else for(i=e.child,i!==null&amp;&amp;(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=kh(-1,t&amp;-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&amp;&amp;(l.lanes|=t),e3(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(ht(341));s.lanes|=t,a=s.alternate,a!==null&amp;&amp;(a.lanes|=t),e3(s,t,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ya(r,e,o.children,t),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,ZC(e,t),o=Hu(o),n=n(o),e.flags|=1,Ya(r,e,n,t),e.child;case 14:return n=e.type,o=Kd(n,e.pendingProps),o=Kd(n.type,o),y9(r,e,n,o,t);case 15:return aj(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Kd(n,o),cI(r,e),e.tag=1,Cl(n)?(r=!0,DI(e)):r=!1,ZC(e,t),RV(e,n,o),r3(e,n,o,t),i3(null,e,n,!0,r,t);case 19:return pj(r,e,t);case 22:return lj(r,e,t)}throw Error(ht(156,e.tag))};function Aj(r,e){return eV(r,e)}function tve(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(r,e,t,n){return new tve(r,e,t,n)}function r4(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rve(r){if(typeof r=="function")return r4(r)?1:0;if(r!=null){if(r=r.$$typeof,r===S3)return 11;if(r===x3)return 14}return 2}function Mm(r,e){var t=r.alternate;return t===null?(t=Uu(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&amp;14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function fI(r,e,t,n,o,i){var s=2;if(n=r,typeof r=="function")r4(r)&amp;&amp;(s=1);else if(typeof r=="string")s=5;else e:switch(r){case OC:return pb(t.children,o,i,e);case C3:s=8,o|=8;break;case kO:return r=Uu(12,t,e,o|2),r.elementType=kO,r.lanes=i,r;case PO:return r=Uu(13,t,e,o),r.elementType=PO,r.lanes=i,r;case AO:return r=Uu(19,t,e,o),r.elementType=AO,r.lanes=i,r;case L9:return YI(t,o,i,e);default:if(typeof r=="object"&amp;&amp;r!==null)switch(r.$$typeof){case B9:s=10;break e;case R9:s=9;break e;case S3:s=11;break e;case x3:s=14;break e;case Cm:s=16,n=null;break e}throw Error(ht(130,r==null?r:typeof r,""))}return e=Uu(s,t,e,o),e.elementType=r,e.type=n,e.lanes=i,e}function pb(r,e,t,n){return r=Uu(7,r,n,e),r.lanes=t,r}function YI(r,e,t,n){return r=Uu(22,r,n,e),r.elementType=L9,r.lanes=t,r.stateNode={isHidden:!1},r}function wO(r,e,t){return r=Uu(6,r,null,e),r.lanes=t,r}function TO(r,e,t){return e=Uu(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function nve(r,e,t,n,o){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aO(0),this.expirationTimes=aO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aO(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function n4(r,e,t,n,o,i,s,a,l){return r=new nve(r,e,t,a,l),e===1?(e=1,i===!0&amp;&amp;(e|=8)):e=0,i=Uu(3,null,null,e),r.current=i,i.stateNode=r,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},z3(i),r}function ove(r,e,t){var n=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:LC,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function Ij(r){if(!r)return Bm;r=r._reactInternals;e:{if(yb(r)!==r||r.tag!==1)throw Error(ht(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ht(171))}if(r.tag===1){var t=r.type;if(Cl(t))return AV(r,t,e)}return e}function Ej(r,e,t,n,o,i,s,a,l){return r=n4(t,n,!0,r,o,i,s,a,l),r.context=Ij(null),t=r.current,n=Xa(),o=Fm(t),i=kh(n,o),i.callback=e!=null?e:null,Em(t,i,o),r.current.lanes=o,o1(r,o,n),Sl(r,n),r}function XI(r,e,t,n){var o=e.current,i=Xa(),s=Fm(o);return t=Ij(t),e.context===null?e.context=t:e.pendingContext=t,e=kh(i,s),e.payload={element:r},n=n===void 0?null:n,n!==null&amp;&amp;(e.callback=n),r=Em(o,e,s),r!==null&amp;&amp;(Qd(r,o,s,i),lI(r,o,s)),s}function OI(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function _9(r,e){if(r=r.memoizedState,r!==null&amp;&amp;r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&amp;&amp;t&lt;e?t:e}}function o4(r,e){_9(r,e),(r=r.alternate)&amp;&amp;_9(r,e)}function ive(){return null}var _j=typeof reportError=="function"?reportError:function(r){console.error(r)};function i4(r){this._internalRoot=r}QI.prototype.render=i4.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(ht(409));XI(r,e,null,null)};QI.prototype.unmount=i4.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;vb(function(){XI(null,r,null,null)}),e[Ah]=null}};function QI(r){this._internalRoot=r}QI.prototype.unstable_scheduleHydration=function(r){if(r){var e=aV();r={blockedOn:null,target:r,priority:e};for(var t=0;t&lt;xm.length&amp;&amp;e!==0&amp;&amp;e&lt;xm[t].priority;t++);xm.splice(t,0,r),t===0&amp;&amp;uV(r)}};function s4(r){return!(!r||r.nodeType!==1&amp;&amp;r.nodeType!==9&amp;&amp;r.nodeType!==11)}function JI(r){return!(!r||r.nodeType!==1&amp;&amp;r.nodeType!==9&amp;&amp;r.nodeType!==11&amp;&amp;(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function F9(){}function sve(r,e,t,n,o){if(o){if(typeof n=="function"){var i=n;n=function(){var u=OI(s);i.call(u)}}var s=Ej(e,n,r,0,null,!1,!1,"",F9);return r._reactRootContainer=s,r[Ah]=s.current,YT(r.nodeType===8?r.parentNode:r),vb(),s}for(;o=r.lastChild;)r.removeChild(o);if(typeof n=="function"){var a=n;n=function(){var u=OI(l);a.call(u)}}var l=n4(r,0,!1,null,null,!1,!1,"",F9);return r._reactRootContainer=l,r[Ah]=l.current,YT(r.nodeType===8?r.parentNode:r),vb(function(){XI(e,l,t,n)}),l}function ZI(r,e,t,n,o){var i=t._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=OI(s);a.call(l)}}XI(e,s,r,o)}else s=sve(t,e,r,o,n);return OI(s)}iV=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=ET(e.pendingLanes);t!==0&amp;&amp;(D3(e,t|1),Sl(e,Ri()),(Vn&amp;6)===0&amp;&amp;(a0=Ri()+500,Om()))}break;case 13:vb(function(){var n=Ih(r,1);if(n!==null){var o=Xa();Qd(n,r,1,o)}}),o4(r,1)}};k3=function(r){if(r.tag===13){var e=Ih(r,134217728);if(e!==null){var t=Xa();Qd(e,r,134217728,t)}o4(r,134217728)}};sV=function(r){if(r.tag===13){var e=Fm(r),t=Ih(r,e);if(t!==null){var n=Xa();Qd(t,r,e,n)}o4(r,e)}};aV=function(){return yo};lV=function(r,e){var t=yo;try{return yo=r,e()}finally{yo=t}};OO=function(r,e,t){switch(e){case"input":if(_O(r,t),e=t.name,t.type==="radio"&amp;&amp;e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e&lt;t.length;e++){var n=t[e];if(n!==r&amp;&amp;n.form===r.form){var o=WI(n);if(!o)throw Error(ht(90));U9(n),_O(n,o)}}}break;case"textarea":H9(r,t);break;case"select":e=t.value,e!=null&amp;&amp;YC(r,!!t.multiple,e,!1)}};q9=Z3;Y9=vb;var ave={usingClientEntryPoint:!1,Events:[s1,GC,WI,j9,K9,Z3]},kT={findFiberByHostInstance:lb,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lve={bundleType:kT.bundleType,version:kT.version,rendererPackageName:kT.rendererPackageName,rendererConfig:kT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_h.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=J9(r),r===null?null:r.stateNode},findFiberByHostInstance:kT.findFiberByHostInstance||ive,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&amp;&amp;(PT=__REACT_DEVTOOLS_GLOBAL_HOOK__,!PT.isDisabled&amp;&amp;PT.supportsFiber))try{UI=PT.inject(lve),qc=PT}catch(r){}var PT;tu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ave;tu.createPortal=function(r,e){var t=2&lt;arguments.length&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!s4(e))throw Error(ht(200));return ove(r,e,null,t)};tu.createRoot=function(r,e){if(!s4(r))throw Error(ht(299));var t=!1,n="",o=_j;return e!=null&amp;&amp;(e.unstable_strictMode===!0&amp;&amp;(t=!0),e.identifierPrefix!==void 0&amp;&amp;(n=e.identifierPrefix),e.onRecoverableError!==void 0&amp;&amp;(o=e.onRecoverableError)),e=n4(r,1,!1,null,null,t,!1,n,o),r[Ah]=e.current,YT(r.nodeType===8?r.parentNode:r),new i4(e)};tu.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(ht(188)):(r=Object.keys(r).join(","),Error(ht(268,r)));return r=J9(e),r=r===null?null:r.stateNode,r};tu.flushSync=function(r){return vb(r)};tu.hydrate=function(r,e,t){if(!JI(e))throw Error(ht(200));return ZI(null,r,e,!0,t)};tu.hydrateRoot=function(r,e,t){if(!s4(r))throw Error(ht(405));var n=t!=null&amp;&amp;t.hydratedSources||null,o=!1,i="",s=_j;if(t!=null&amp;&amp;(t.unstable_strictMode===!0&amp;&amp;(o=!0),t.identifierPrefix!==void 0&amp;&amp;(i=t.identifierPrefix),t.onRecoverableError!==void 0&amp;&amp;(s=t.onRecoverableError)),e=Ej(e,null,r,1,t!=null?t:null,o,!1,i,s),r[Ah]=e.current,YT(r),n)for(r=0;r&lt;n.length;r++)t=n[r],o=t._getVersion,o=o(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,o]:e.mutableSourceEagerHydrationData.push(t,o);return new QI(e)};tu.render=function(r,e,t){if(!JI(e))throw Error(ht(200));return ZI(null,r,e,!1,t)};tu.unmountComponentAtNode=function(r){if(!JI(r))throw Error(ht(40));return r._reactRootContainer?(vb(function(){ZI(null,null,r,!1,function(){r._reactRootContainer=null,r[Ah]=null})}),!0):!1};tu.unstable_batchedUpdates=Z3;tu.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!JI(t))throw Error(ht(200));if(r==null||r._reactInternals===void 0)throw Error(ht(38));return ZI(r,e,t,!1,n)};tu.version="18.2.0-next-9e3b772b8-20220608"});var eE=Qt((NOe,Nj)=&gt;{"use strict";function Mj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mj)}catch(r){console.error(r)}}Mj(),Nj.exports=Fj()});var Rj=Qt(a4=&gt;{"use strict";var Bj=eE();a4.createRoot=Bj.createRoot,a4.hydrateRoot=Bj.hydrateRoot;var BOe});var jK=Qt((rp,VK)=&gt;{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});function rc(r){return typeof r=="object"&amp;&amp;!("toString"in r)?Object.prototype.toString.call(r).slice(8,-1):r}var Ive=typeof process=="object"&amp;&amp;!0;function qu(r,e){if(!r)throw Ive?new Error("Invariant failed"):new Error(e())}rp.invariant=qu;var _4=Object.prototype.hasOwnProperty,Eve=Array.prototype.splice,_ve=Object.prototype.toString;function Tb(r){return _ve.call(r).slice(8,-1)}var kE=Object.assign||function(r,e){return F4(e).forEach(function(t){_4.call(e,t)&amp;&amp;(r[t]=e[t])}),r},F4=typeof Object.getOwnPropertySymbols=="function"?function(r){return Object.keys(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.keys(r)};function jm(r){return Array.isArray(r)?kE(r.constructor(r.length),r):Tb(r)==="Map"?new Map(r):Tb(r)==="Set"?new Set(r):r&amp;&amp;typeof r=="object"?kE(Object.create(Object.getPrototypeOf(r)),r):r}var WK=function(){function r(){this.commands=kE({},Fve),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return new r().update}}return Object.defineProperty(r.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),r.prototype.extend=function(e,t){this.commands[e]=t},r.prototype.update=function(e,t){var n=this,o=typeof t=="function"?{$apply:t}:t;Array.isArray(e)&amp;&amp;Array.isArray(o)||qu(!Array.isArray(o),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),qu(typeof o=="object"&amp;&amp;o!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var i=e;return F4(o).forEach(function(s){if(_4.call(n.commands,s)){var a=e===i;i=n.commands[s](o[s],i,o,e),a&amp;&amp;n.isEquals(i,e)&amp;&amp;(i=e)}else{var l=Tb(e)==="Map"?n.update(e.get(s),o[s]):n.update(e[s],o[s]),u=Tb(i)==="Map"?i.get(s):i[s];(!n.isEquals(l,u)||typeof l=="undefined"&amp;&amp;!_4.call(e,s))&amp;&amp;(i===e&amp;&amp;(i=jm(e)),Tb(i)==="Map"?i.set(s,l):i[s]=l)}}),i},r}();rp.Context=WK;var Fve={$push:function(r,e,t){return HK(e,t,"$push"),r.length?e.concat(r):e},$unshift:function(r,e,t){return HK(e,t,"$unshift"),r.length?r.concat(e):e},$splice:function(r,e,t,n){return Mve(e,t),r.forEach(function(o){$K(o),e===n&amp;&amp;o.length&amp;&amp;(e=jm(n)),Eve.apply(e,o)}),e},$set:function(r,e,t){return Bve(t),r},$toggle:function(r,e){v1(r,"$toggle");var t=r.length?jm(e):e;return r.forEach(function(n){t[n]=!e[n]}),t},$unset:function(r,e,t,n){return v1(r,"$unset"),r.forEach(function(o){Object.hasOwnProperty.call(e,o)&amp;&amp;(e===n&amp;&amp;(e=jm(n)),delete e[o])}),e},$add:function(r,e,t,n){return GK(e,"$add"),v1(r,"$add"),Tb(e)==="Map"?r.forEach(function(o){var i=o[0],s=o[1];e===n&amp;&amp;e.get(i)!==s&amp;&amp;(e=jm(n)),e.set(i,s)}):r.forEach(function(o){e===n&amp;&amp;!e.has(o)&amp;&amp;(e=jm(n)),e.add(o)}),e},$remove:function(r,e,t,n){return GK(e,"$remove"),v1(r,"$remove"),r.forEach(function(o){e===n&amp;&amp;e.has(o)&amp;&amp;(e=jm(n)),e.delete(o)}),e},$merge:function(r,e,t,n){return Rve(e,r),F4(r).forEach(function(o){r[o]!==e[o]&amp;&amp;(e===n&amp;&amp;(e=jm(n)),e[o]=r[o])}),e},$apply:function(r,e){return Nve(r),r(e)}},M4=new WK;rp.isEquals=M4.update.isEquals;rp.extend=M4.extend;rp.default=M4.update;rp.default.default=VK.exports=kE(rp.default,rp);function HK(r,e,t){qu(Array.isArray(r),function(){return"update(): expected target of "+rc(t)+" to be an array; got "+rc(r)+"."}),v1(e[t],t)}function v1(r,e){qu(Array.isArray(r),function(){return"update(): expected spec of "+rc(e)+" to be an array; got "+rc(r)+". Did you forget to wrap your parameter in an array?"})}function Mve(r,e){qu(Array.isArray(r),function(){return"Expected $splice target to be an array; got "+rc(r)}),$K(e.$splice)}function $K(r){qu(Array.isArray(r),function(){return"update(): expected spec of $splice to be an array of arrays; got "+rc(r)+". Did you forget to wrap your parameters in an array?"})}function Nve(r){qu(typeof r=="function",function(){return"update(): expected spec of $apply to be a function; got "+rc(r)+"."})}function Bve(r){qu(Object.keys(r).length===1,function(){return"Cannot have more than one key in an object with $set"})}function Rve(r,e){qu(e&amp;&amp;typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+rc(e)}),qu(r&amp;&amp;typeof r=="object",function(){return"update(): $merge expects a target of type 'object'; got "+rc(r)})}function GK(r,e){var t=Tb(r);qu(t==="Map"||t==="Set",function(){return"update(): "+rc(e)+" expects a target of type Set or Map; got "+rc(t)})}});var Wr=Qt(RE=&gt;{(function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(s){return n(i(s),arguments)}function t(s,a){return e.apply(null,[s].concat(a||[]))}function n(s,a){var l=1,u=s.length,d,c="",p,h,f,m,g,v,b,C;for(p=0;p&lt;u;p++)if(typeof s[p]=="string")c+=s[p];else if(typeof s[p]=="object"){if(f=s[p],f.keys)for(d=a[l],h=0;h&lt;f.keys.length;h++){if(d==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',f.keys[h],f.keys[h-1]));d=d[f.keys[h]]}else f.param_no?d=a[f.param_no]:d=a[l++];if(r.not_type.test(f.type)&amp;&amp;r.not_primitive.test(f.type)&amp;&amp;d instanceof Function&amp;&amp;(d=d()),r.numeric_arg.test(f.type)&amp;&amp;typeof d!="number"&amp;&amp;isNaN(d))throw new TypeError(e("[sprintf] expecting number but found %T",d));switch(r.number.test(f.type)&amp;&amp;(b=d&gt;=0),f.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,f.width?parseInt(f.width):0);break;case"e":d=f.precision?parseFloat(d).toExponential(f.precision):parseFloat(d).toExponential();break;case"f":d=f.precision?parseFloat(d).toFixed(f.precision):parseFloat(d);break;case"g":d=f.precision?String(Number(d.toPrecision(f.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)&gt;&gt;&gt;0).toString(8);break;case"s":d=String(d),d=f.precision?d.substring(0,f.precision):d;break;case"t":d=String(!!d),d=f.precision?d.substring(0,f.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=f.precision?d.substring(0,f.precision):d;break;case"u":d=parseInt(d,10)&gt;&gt;&gt;0;break;case"v":d=d.valueOf(),d=f.precision?d.substring(0,f.precision):d;break;case"x":d=(parseInt(d,10)&gt;&gt;&gt;0).toString(16);break;case"X":d=(parseInt(d,10)&gt;&gt;&gt;0).toString(16).toUpperCase();break}r.json.test(f.type)?c+=d:(r.number.test(f.type)&amp;&amp;(!b||f.sign)?(C=b?"+":"-",d=d.toString().replace(r.sign,"")):C="",g=f.pad_char?f.pad_char==="0"?"0":f.pad_char.charAt(1):" ",v=f.width-(C+d).length,m=f.width&amp;&amp;v&gt;0?g.repeat(v):"",c+=f.align?C+d+m:g==="0"?C+m+d:m+C+d)}return c}var o=Object.create(null);function i(s){if(o[s])return o[s];for(var a=s,l,u=[],d=0;a;){if((l=r.text.exec(a))!==null)u.push(l[0]);else if((l=r.modulo.exec(a))!==null)u.push("%");else if((l=r.placeholder.exec(a))!==null){if(l[2]){d|=1;var c=[],p=l[2],h=[];if((h=r.key.exec(p))!==null)for(c.push(h[1]);(p=p.substring(h[0].length))!=="";)if((h=r.key_access.exec(p))!==null)c.push(h[1]);else if((h=r.index_access.exec(p))!==null)c.push(h[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=c}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(l[0].length)}return o[s]=u}typeof RE!="undefined"&amp;&amp;(RE.sprintf=e,RE.vsprintf=t),typeof window!="undefined"&amp;&amp;(window.sprintf=e,window.vsprintf=t,typeof define=="function"&amp;&amp;define.amd&amp;&amp;define(function(){return{sprintf:e,vsprintf:t}}))})()});var Eq=Qt(GE=&gt;{"use strict";Object.defineProperty(GE,"__esModule",{value:!0});GE.DI=void 0;var Y4=class{constructor(){this.registry=new Map,this.flags=new Map,this.loaders=new Map}get(e){return this.has(e)?this.registry.get(e):this.load(e)}load(e){let t=this.loaders.get(e);if(!t)throw new Error(`${e} is not registered`);let n=t();return this.set(e,n),this.loaders.delete(e),n}has(e){return this.flags.has(e)}set(e,t){this.registry.set(e,t),this.flags.set(e,!0)}setLazy(e,t){this.loaders.set(e,t)}unset(e){this.registry.delete(e),this.flags.delete(e)}reset(){this.registry.clear(),this.flags.clear()}};GE.DI=Y4});var bS=Qt((lX,IU)=&gt;{(function(r){typeof lX=="object"&amp;&amp;typeof IU!="undefined"?IU.exports=r():typeof define=="function"&amp;&amp;define.amd?define([],r):(typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:this).JSZip=r()})(function(){return function r(e,t,n){function o(a,l){if(!t[a]){if(!e[a]){var u=typeof ta=="function"&amp;&amp;ta;if(!l&amp;&amp;u)return u(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(p){var h=e[a][1][p];return o(h||p)},c,c.exports,r,e,t,n)}return t[a].exports}for(var i=typeof ta=="function"&amp;&amp;ta,s=0;s&lt;n.length;s++)o(n[s]);return o}({1:[function(r,e,t){"use strict";var n=r("./utils"),o=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(s){for(var a,l,u,d,c,p,h,f=[],m=0,g=s.length,v=g,b=n.getTypeOf(s)!=="string";m&lt;s.length;)v=g-m,u=b?(a=s[m++],l=m&lt;g?s[m++]:0,m&lt;g?s[m++]:0):(a=s.charCodeAt(m++),l=m&lt;g?s.charCodeAt(m++):0,m&lt;g?s.charCodeAt(m++):0),d=a&gt;&gt;2,c=(3&amp;a)&lt;&lt;4|l&gt;&gt;4,p=1&lt;v?(15&amp;l)&lt;&lt;2|u&gt;&gt;6:64,h=2&lt;v?63&amp;u:64,f.push(i.charAt(d)+i.charAt(c)+i.charAt(p)+i.charAt(h));return f.join("")},t.decode=function(s){var a,l,u,d,c,p,h=0,f=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var g,v=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&amp;&amp;v--,s.charAt(s.length-2)===i.charAt(64)&amp;&amp;v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=o.uint8array?new Uint8Array(0|v):new Array(0|v);h&lt;s.length;)a=i.indexOf(s.charAt(h++))&lt;&lt;2|(d=i.indexOf(s.charAt(h++)))&gt;&gt;4,l=(15&amp;d)&lt;&lt;4|(c=i.indexOf(s.charAt(h++)))&gt;&gt;2,u=(3&amp;c)&lt;&lt;6|(p=i.indexOf(s.charAt(h++))),g[f++]=a,c!==64&amp;&amp;(g[f++]=l),p!==64&amp;&amp;(g[f++]=u);return g}},{"./support":30,"./utils":32}],2:[function(r,e,t){"use strict";var n=r("./external"),o=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),s=r("./stream/DataLengthProbe");function a(l,u,d,c,p){this.compressedSize=l,this.uncompressedSize=u,this.crc32=d,this.compression=c,this.compressedContent=p}a.prototype={getContentWorker:function(){var l=new o(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),u=this;return l.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,u,d){return l.pipe(new i).pipe(new s("uncompressedSize")).pipe(u.compressWorker(d)).pipe(new s("compressedSize")).withStreamInfo("compression",u)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,e,t){"use strict";var n=r("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},t.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,e,t){"use strict";var n=r("./utils"),o=function(){for(var i,s=[],a=0;a&lt;256;a++){i=a;for(var l=0;l&lt;8;l++)i=1&amp;i?3988292384^i&gt;&gt;&gt;1:i&gt;&gt;&gt;1;s[a]=i}return s}();e.exports=function(i,s){return i!==void 0&amp;&amp;i.length?n.getTypeOf(i)!=="string"?function(a,l,u,d){var c=o,p=d+u;a^=-1;for(var h=d;h&lt;p;h++)a=a&gt;&gt;&gt;8^c[255&amp;(a^l[h])];return-1^a}(0|s,i,i.length,0):function(a,l,u,d){var c=o,p=d+u;a^=-1;for(var h=d;h&lt;p;h++)a=a&gt;&gt;&gt;8^c[255&amp;(a^l.charCodeAt(h))];return-1^a}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(r,e,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(r,e,t){"use strict";var n=null;n=typeof Promise!="undefined"?Promise:r("lie"),e.exports={Promise:n}},{lie:37}],7:[function(r,e,t){"use strict";var n=typeof Uint8Array!="undefined"&amp;&amp;typeof Uint16Array!="undefined"&amp;&amp;typeof Uint32Array!="undefined",o=r("pako"),i=r("./utils"),s=r("./stream/GenericWorker"),a=n?"uint8array":"array";function l(u,d){s.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=d,this.meta={}}t.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&amp;&amp;this._createPako(),this._pako.push(i.transformTo(a,u.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&amp;&amp;this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(d){u.push({data:d,meta:u.meta})}},t.compressWorker=function(u){return new l("Deflate",u)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,e,t){"use strict";function n(c,p){var h,f="";for(h=0;h&lt;p;h++)f+=String.fromCharCode(255&amp;c),c&gt;&gt;&gt;=8;return f}function o(c,p,h,f,m,g){var v,b,C=c.file,x=c.compression,y=g!==a.utf8encode,S=i.transformTo("string",g(C.name)),T=i.transformTo("string",a.utf8encode(C.name)),w=C.comment,k=i.transformTo("string",g(w)),A=i.transformTo("string",a.utf8encode(w)),I=T.length!==C.name.length,E=A.length!==w.length,O="",Q="",j="",U=C.dir,B=C.date,z={crc32:0,compressedSize:0,uncompressedSize:0};p&amp;&amp;!h||(z.crc32=c.crc32,z.compressedSize=c.compressedSize,z.uncompressedSize=c.uncompressedSize);var N=0;p&amp;&amp;(N|=8),y||!I&amp;&amp;!E||(N|=2048);var V=0,re=0;U&amp;&amp;(V|=16),m==="UNIX"?(re=798,V|=function(ge,ae){var Y=ge;return ge||(Y=ae?16893:33204),(65535&amp;Y)&lt;&lt;16}(C.unixPermissions,U)):(re=20,V|=function(ge){return 63&amp;(ge||0)}(C.dosPermissions)),v=B.getUTCHours(),v&lt;&lt;=6,v|=B.getUTCMinutes(),v&lt;&lt;=5,v|=B.getUTCSeconds()/2,b=B.getUTCFullYear()-1980,b&lt;&lt;=4,b|=B.getUTCMonth()+1,b&lt;&lt;=5,b|=B.getUTCDate(),I&amp;&amp;(Q=n(1,1)+n(l(S),4)+T,O+="up"+n(Q.length,2)+Q),E&amp;&amp;(j=n(1,1)+n(l(k),4)+A,O+="uc"+n(j.length,2)+j);var ce="";return ce+=`
\0`,ce+=n(N,2),ce+=x.magic,ce+=n(v,2),ce+=n(b,2),ce+=n(z.crc32,4),ce+=n(z.compressedSize,4),ce+=n(z.uncompressedSize,4),ce+=n(S.length,2),ce+=n(O.length,2),{fileRecord:u.LOCAL_FILE_HEADER+ce+S+O,dirRecord:u.CENTRAL_FILE_HEADER+n(re,2)+ce+n(k.length,2)+"\0\0\0\0"+n(V,4)+n(f,4)+S+O+k}}var i=r("../utils"),s=r("../stream/GenericWorker"),a=r("../utf8"),l=r("../crc32"),u=r("../signature");function d(c,p,h,f){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=f,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(d,s),d.prototype.push=function(c){var p=c.meta.percent||0,h=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,s.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-f-1))/h:100}}))},d.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var p=this.streamFiles&amp;&amp;!c.file.dir;if(p){var h=o(c,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(c){this.accumulate=!1;var p=this.streamFiles&amp;&amp;!c.file.dir,h=o(c,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:function(f){return u.DATA_DESCRIPTOR+n(f.crc32,4)+n(f.compressedSize,4)+n(f.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var c=this.bytesWritten,p=0;p&lt;this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-c,f=function(m,g,v,b,C){var x=i.transformTo("string",C(b));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(m,2)+n(m,2)+n(g,4)+n(v,4)+n(x.length,2)+x}(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(c){this._sources.push(c);var p=this;return c.on("data",function(h){p.processChunk(h)}),c.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),c.on("error",function(h){p.error(h)}),this},d.prototype.resume=function(){return!!s.prototype.resume.call(this)&amp;&amp;(!this.previous&amp;&amp;this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(c){var p=this._sources;if(!s.prototype.error.call(this,c))return!1;for(var h=0;h&lt;p.length;h++)try{p[h].error(c)}catch(f){}return!0},d.prototype.lock=function(){s.prototype.lock.call(this);for(var c=this._sources,p=0;p&lt;c.length;p++)c[p].lock()},e.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,e,t){"use strict";var n=r("../compressions"),o=r("./ZipFileWorker");t.generateWorker=function(i,s,a){var l=new o(s.streamFiles,a,s.platform,s.encodeFileName),u=0;try{i.forEach(function(d,c){u++;var p=function(g,v){var b=g||v,C=n[b];if(!C)throw new Error(b+" is not a valid compression method !");return C}(c.options.compression,s.compression),h=c.options.compressionOptions||s.compressionOptions||{},f=c.dir,m=c.date;c._compressWorker(p,h).withStreamInfo("file",{name:d,dir:f,date:m,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(l)}),l.entriesCount=u}catch(d){l.error(d)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,e,t){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new n;for(var i in this)typeof this[i]!="function"&amp;&amp;(o[i]=this[i]);return o}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(o,i){return new n().loadAsync(o,i)},n.external=r("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,e,t){"use strict";var n=r("./utils"),o=r("./external"),i=r("./utf8"),s=r("./zipEntries"),a=r("./stream/Crc32Probe"),l=r("./nodejsUtils");function u(d){return new o.Promise(function(c,p){var h=d.decompressed.getContentWorker().pipe(new a);h.on("error",function(f){p(f)}).on("end",function(){h.streamInfo.crc32!==d.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}e.exports=function(d,c){var p=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&amp;&amp;l.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",d,!0,c.optimizedBinaryString,c.base64).then(function(h){var f=new s(c);return f.load(h),f}).then(function(h){var f=[o.Promise.resolve(h)],m=h.files;if(c.checkCRC32)for(var g=0;g&lt;m.length;g++)f.push(u(m[g]));return o.Promise.all(f)}).then(function(h){for(var f=h.shift(),m=f.files,g=0;g&lt;m.length;g++){var v=m[g],b=v.fileNameStr,C=n.resolve(v.fileNameStr);p.file(C,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:c.createFolders}),v.dir||(p.file(C).unsafeOriginalName=b)}return f.zipComment.length&amp;&amp;(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,e,t){"use strict";var n=r("../utils"),o=r("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}n.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&amp;&amp;(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&amp;&amp;(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,e,t){"use strict";var n=r("readable-stream").Readable;function o(i,s,a){n.call(this,s),this._helper=i;var l=this;i.on("data",function(u,d){l.push(u)||l._helper.pause(),a&amp;&amp;a(d)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}r("../utils").inherits(o,n),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,e,t){"use strict";e.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,o){if(Buffer.from&amp;&amp;Buffer.from!==Uint8Array.from)return Buffer.from(n,o);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,o)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var o=new Buffer(n);return o.fill(0),o},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&amp;&amp;typeof n.on=="function"&amp;&amp;typeof n.pause=="function"&amp;&amp;typeof n.resume=="function"}}},{}],15:[function(r,e,t){"use strict";function n(C,x,y){var S,T=i.getTypeOf(x),w=i.extend(y||{},l);w.date=w.date||new Date,w.compression!==null&amp;&amp;(w.compression=w.compression.toUpperCase()),typeof w.unixPermissions=="string"&amp;&amp;(w.unixPermissions=parseInt(w.unixPermissions,8)),w.unixPermissions&amp;&amp;16384&amp;w.unixPermissions&amp;&amp;(w.dir=!0),w.dosPermissions&amp;&amp;16&amp;w.dosPermissions&amp;&amp;(w.dir=!0),w.dir&amp;&amp;(C=m(C)),w.createFolders&amp;&amp;(S=f(C))&amp;&amp;g.call(this,S,!0);var k=T==="string"&amp;&amp;w.binary===!1&amp;&amp;w.base64===!1;y&amp;&amp;y.binary!==void 0||(w.binary=!k),(x instanceof u&amp;&amp;x.uncompressedSize===0||w.dir||!x||x.length===0)&amp;&amp;(w.base64=!1,w.binary=!0,x="",w.compression="STORE",T="string");var A=null;A=x instanceof u||x instanceof s?x:p.isNode&amp;&amp;p.isStream(x)?new h(C,x):i.prepareContent(C,x,w.binary,w.optimizedBinaryString,w.base64);var I=new d(C,A,w);this.files[C]=I}var o=r("./utf8"),i=r("./utils"),s=r("./stream/GenericWorker"),a=r("./stream/StreamHelper"),l=r("./defaults"),u=r("./compressedObject"),d=r("./zipObject"),c=r("./generate"),p=r("./nodejsUtils"),h=r("./nodejs/NodejsStreamInputAdapter"),f=function(C){C.slice(-1)==="/"&amp;&amp;(C=C.substring(0,C.length-1));var x=C.lastIndexOf("/");return 0&lt;x?C.substring(0,x):""},m=function(C){return C.slice(-1)!=="/"&amp;&amp;(C+="/"),C},g=function(C,x){return x=x!==void 0?x:l.createFolders,C=m(C),this.files[C]||n.call(this,C,null,{dir:!0,createFolders:x}),this.files[C]};function v(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var x,y,S;for(x in this.files)S=this.files[x],(y=x.slice(this.root.length,x.length))&amp;&amp;x.slice(0,this.root.length)===this.root&amp;&amp;C(y,S)},filter:function(C){var x=[];return this.forEach(function(y,S){C(y,S)&amp;&amp;x.push(S)}),x},file:function(C,x,y){if(arguments.length!==1)return C=this.root+C,n.call(this,C,x,y),this;if(v(C)){var S=C;return this.filter(function(w,k){return!k.dir&amp;&amp;S.test(w)})}var T=this.files[this.root+C];return T&amp;&amp;!T.dir?T:null},folder:function(C){if(!C)return this;if(v(C))return this.filter(function(T,w){return w.dir&amp;&amp;C.test(T)});var x=this.root+C,y=g.call(this,x),S=this.clone();return S.root=y.name,S},remove:function(C){C=this.root+C;var x=this.files[C];if(x||(C.slice(-1)!=="/"&amp;&amp;(C+="/"),x=this.files[C]),x&amp;&amp;!x.dir)delete this.files[C];else for(var y=this.filter(function(T,w){return w.name.slice(0,C.length)===C}),S=0;S&lt;y.length;S++)delete this.files[y[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var x,y={};try{if((y=i.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=y.type.toLowerCase(),y.compression=y.compression.toUpperCase(),y.type==="binarystring"&amp;&amp;(y.type="string"),!y.type)throw new Error("No output type specified.");i.checkSupport(y.type),y.platform!=="darwin"&amp;&amp;y.platform!=="freebsd"&amp;&amp;y.platform!=="linux"&amp;&amp;y.platform!=="sunos"||(y.platform="UNIX"),y.platform==="win32"&amp;&amp;(y.platform="DOS");var S=y.comment||this.comment||"";x=c.generateWorker(this,y,S)}catch(T){(x=new s("error")).error(T)}return new a(x,y.type||"string",y.mimeType)},generateAsync:function(C,x){return this.generateInternalStream(C).accumulate(x)},generateNodeStream:function(C,x){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(x)}};e.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,e,t){"use strict";e.exports=r("stream")},{stream:void 0}],17:[function(r,e,t){"use strict";var n=r("./DataReader");function o(i){n.call(this,i);for(var s=0;s&lt;this.data.length;s++)i[s]=255&amp;i[s]}r("../utils").inherits(o,n),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),u=i.charCodeAt(3),d=this.length-4;0&lt;=d;--d)if(this.data[d]===s&amp;&amp;this.data[d+1]===a&amp;&amp;this.data[d+2]===l&amp;&amp;this.data[d+3]===u)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),u=i.charCodeAt(3),d=this.readData(4);return s===d[0]&amp;&amp;a===d[1]&amp;&amp;l===d[2]&amp;&amp;u===d[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,e,t){"use strict";var n=r("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length&lt;this.zero+i||i&lt;0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s&gt;=this.index;s--)a=(a&lt;&lt;8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return n.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i&gt;&gt;25&amp;127),(i&gt;&gt;21&amp;15)-1,i&gt;&gt;16&amp;31,i&gt;&gt;11&amp;31,i&gt;&gt;5&amp;63,(31&amp;i)&lt;&lt;1))}},e.exports=o},{"../utils":32}],19:[function(r,e,t){"use strict";var n=r("./Uint8ArrayReader");function o(i){n.call(this,i)}r("../utils").inherits(o,n),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,e,t){"use strict";var n=r("./DataReader");function o(i){n.call(this,i)}r("../utils").inherits(o,n),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,e,t){"use strict";var n=r("./ArrayReader");function o(i){n.call(this,i)}r("../utils").inherits(o,n),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,e,t){"use strict";var n=r("../utils"),o=r("../support"),i=r("./ArrayReader"),s=r("./StringReader"),a=r("./NodeBufferReader"),l=r("./Uint8ArrayReader");e.exports=function(u){var d=n.getTypeOf(u);return n.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new a(u):o.uint8array?new l(n.transformTo("uint8array",u)):new i(n.transformTo("array",u)):new s(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,e,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,e,t){"use strict";var n=r("./GenericWorker"),o=r("../utils");function i(s){n.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,n),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},e.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,e,t){"use strict";var n=r("./GenericWorker"),o=r("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,n),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},e.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,e,t){"use strict";var n=r("../utils"),o=r("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},e.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,e,t){"use strict";var n=r("../utils"),o=r("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&amp;&amp;l.length||0,a.type=n.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}n.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&amp;&amp;(!this._tickScheduled&amp;&amp;this.dataIsReady&amp;&amp;(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index&gt;=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,e,t){"use strict";function n(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&amp;&amp;(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&amp;&amp;this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s&lt;this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&amp;&amp;!this.isFinished&amp;&amp;(this.isPaused=!0,this.previous&amp;&amp;this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&amp;&amp;(this.error(this.generatedError),o=!0),this.previous&amp;&amp;this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&amp;&amp;(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&amp;&amp;this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -&gt; "+o:o}},e.exports=n},{}],29:[function(r,e,t){"use strict";var n=r("../utils"),o=r("./ConvertWorker"),i=r("./GenericWorker"),s=r("../base64"),a=r("../support"),l=r("../external"),u=null;if(a.nodestream)try{u=r("../nodejs/NodejsStreamOutputAdapter")}catch(p){}function d(p,h){return new l.Promise(function(f,m){var g=[],v=p._internalType,b=p._outputType,C=p._mimeType;p.on("data",function(x,y){g.push(x),h&amp;&amp;h(y)}).on("error",function(x){g=[],m(x)}).on("end",function(){try{var x=function(y,S,T){switch(y){case"blob":return n.newBlob(n.transformTo("arraybuffer",S),T);case"base64":return s.encode(S);default:return n.transformTo(y,S)}}(b,function(y,S){var T,w=0,k=null,A=0;for(T=0;T&lt;S.length;T++)A+=S[T].length;switch(y){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(k=new Uint8Array(A),T=0;T&lt;S.length;T++)k.set(S[T],w),w+=S[T].length;return k;case"nodebuffer":return Buffer.concat(S);default:throw new Error("concat : unsupported type '"+y+"'")}}(v,g),C);f(x)}catch(y){m(y)}g=[]}).resume()})}function c(p,h,f){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=f,n.checkSupport(m),this._worker=p.pipe(new o(m)),p.lock()}catch(g){this._worker=new i("error"),this._worker.error(g)}}c.prototype={accumulate:function(p){return d(this,p)},on:function(p,h){var f=this;return p==="data"?this._worker.on(p,function(m){h.call(f,m.data,m.meta)}):this._worker.on(p,function(){n.delay(h,arguments,f)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},p)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,e,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer!="undefined"&amp;&amp;typeof Uint8Array!="undefined",t.nodebuffer=typeof Buffer!="undefined",t.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")t.blob=!1;else{var n=new ArrayBuffer(0);try{t.blob=new Blob([n],{type:"application/zip"}).size===0}catch(i){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),t.blob=o.getBlob("application/zip").size===0}catch(s){t.blob=!1}}}try{t.nodestream=!!r("readable-stream").Readable}catch(i){t.nodestream=!1}},{"readable-stream":16}],31:[function(r,e,t){"use strict";for(var n=r("./utils"),o=r("./support"),i=r("./nodejsUtils"),s=r("./stream/GenericWorker"),a=new Array(256),l=0;l&lt;256;l++)a[l]=252&lt;=l?6:248&lt;=l?5:240&lt;=l?4:224&lt;=l?3:192&lt;=l?2:1;a[254]=a[254]=1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function d(){s.call(this,"utf-8 encode")}t.utf8encode=function(c){return o.nodebuffer?i.newBufferFrom(c,"utf-8"):function(p){var h,f,m,g,v,b=p.length,C=0;for(g=0;g&lt;b;g++)(64512&amp;(f=p.charCodeAt(g)))==55296&amp;&amp;g+1&lt;b&amp;&amp;(64512&amp;(m=p.charCodeAt(g+1)))==56320&amp;&amp;(f=65536+(f-55296&lt;&lt;10)+(m-56320),g++),C+=f&lt;128?1:f&lt;2048?2:f&lt;65536?3:4;for(h=o.uint8array?new Uint8Array(C):new Array(C),g=v=0;v&lt;C;g++)(64512&amp;(f=p.charCodeAt(g)))==55296&amp;&amp;g+1&lt;b&amp;&amp;(64512&amp;(m=p.charCodeAt(g+1)))==56320&amp;&amp;(f=65536+(f-55296&lt;&lt;10)+(m-56320),g++),f&lt;128?h[v++]=f:(f&lt;2048?h[v++]=192|f&gt;&gt;&gt;6:(f&lt;65536?h[v++]=224|f&gt;&gt;&gt;12:(h[v++]=240|f&gt;&gt;&gt;18,h[v++]=128|f&gt;&gt;&gt;12&amp;63),h[v++]=128|f&gt;&gt;&gt;6&amp;63),h[v++]=128|63&amp;f);return h}(c)},t.utf8decode=function(c){return o.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(p){var h,f,m,g,v=p.length,b=new Array(2*v);for(h=f=0;h&lt;v;)if((m=p[h++])&lt;128)b[f++]=m;else if(4&lt;(g=a[m]))b[f++]=65533,h+=g-1;else{for(m&amp;=g===2?31:g===3?15:7;1&lt;g&amp;&amp;h&lt;v;)m=m&lt;&lt;6|63&amp;p[h++],g--;1&lt;g?b[f++]=65533:m&lt;65536?b[f++]=m:(m-=65536,b[f++]=55296|m&gt;&gt;10&amp;1023,b[f++]=56320|1023&amp;m)}return b.length!==f&amp;&amp;(b.subarray?b=b.subarray(0,f):b.length=f),n.applyFromCharCode(b)}(c=n.transformTo(o.uint8array?"uint8array":"array",c))},n.inherits(u,s),u.prototype.processChunk=function(c){var p=n.transformTo(o.uint8array?"uint8array":"array",c.data);if(this.leftOver&amp;&amp;this.leftOver.length){if(o.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=function(g,v){var b;for((v=v||g.length)&gt;g.length&amp;&amp;(v=g.length),b=v-1;0&lt;=b&amp;&amp;(192&amp;g[b])==128;)b--;return b&lt;0||b===0?v:b+a[g[b]]&gt;v?b:v}(p),m=p;f!==p.length&amp;&amp;(o.uint8array?(m=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(m=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:t.utf8decode(m),meta:c.meta})},u.prototype.flush=function(){this.leftOver&amp;&amp;this.leftOver.length&amp;&amp;(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=u,n.inherits(d,s),d.prototype.processChunk=function(c){this.push({data:t.utf8encode(c.data),meta:c.meta})},t.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,e,t){"use strict";var n=r("./support"),o=r("./base64"),i=r("./nodejsUtils"),s=r("./external");function a(h){return h}function l(h,f){for(var m=0;m&lt;h.length;++m)f[m]=255&amp;h.charCodeAt(m);return f}r("setimmediate"),t.newBlob=function(h,f){t.checkSupport("blob");try{return new Blob([h],{type:f})}catch(g){try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(f)}catch(v){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(h,f,m){var g=[],v=0,b=h.length;if(b&lt;=m)return String.fromCharCode.apply(null,h);for(;v&lt;b;)f==="array"||f==="nodebuffer"?g.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+m,b)))):g.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+m,b)))),v+=m;return g.join("")},stringifyByChar:function(h){for(var f="",m=0;m&lt;h.length;m++)f+=String.fromCharCode(h[m]);return f},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&amp;&amp;String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(h){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&amp;&amp;String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(h){return!1}}()}};function d(h){var f=65536,m=t.getTypeOf(h),g=!0;if(m==="uint8array"?g=u.applyCanBeUsed.uint8array:m==="nodebuffer"&amp;&amp;(g=u.applyCanBeUsed.nodebuffer),g)for(;1&lt;f;)try{return u.stringifyByChunk(h,m,f)}catch(v){f=Math.floor(f/2)}return u.stringifyByChar(h)}function c(h,f){for(var m=0;m&lt;h.length;m++)f[m]=h[m];return f}t.applyFromCharCode=d;var p={};p.string={string:a,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:function(h){return l(h,i.allocBuffer(h.length))}},p.array={string:d,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},p.arraybuffer={string:function(h){return d(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:d,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return i.newBufferFrom(h)}},p.nodebuffer={string:d,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:a},t.transformTo=function(h,f){if(f=f||"",!h)return f;t.checkSupport(h);var m=t.getTypeOf(f);return p[m][h](f)},t.resolve=function(h){for(var f=h.split("/"),m=[],g=0;g&lt;f.length;g++){var v=f[g];v==="."||v===""&amp;&amp;g!==0&amp;&amp;g!==f.length-1||(v===".."?m.pop():m.push(v))}return m.join("/")},t.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&amp;&amp;i.isBuffer(h)?"nodebuffer":n.uint8array&amp;&amp;h instanceof Uint8Array?"uint8array":n.arraybuffer&amp;&amp;h instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(h){var f,m,g="";for(m=0;m&lt;(h||"").length;m++)g+="\\x"+((f=h.charCodeAt(m))&lt;16?"0":"")+f.toString(16).toUpperCase();return g},t.delay=function(h,f,m){setImmediate(function(){h.apply(m||null,f||[])})},t.inherits=function(h,f){function m(){}m.prototype=f.prototype,h.prototype=new m},t.extend=function(){var h,f,m={};for(h=0;h&lt;arguments.length;h++)for(f in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],f)&amp;&amp;m[f]===void 0&amp;&amp;(m[f]=arguments[h][f]);return m},t.prepareContent=function(h,f,m,g,v){return s.Promise.resolve(f).then(function(b){return n.blob&amp;&amp;(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&amp;&amp;typeof FileReader!="undefined"?new s.Promise(function(C,x){var y=new FileReader;y.onload=function(S){C(S.target.result)},y.onerror=function(S){x(S.target.error)},y.readAsArrayBuffer(b)}):b}).then(function(b){var C=t.getTypeOf(b);return C?(C==="arraybuffer"?b=t.transformTo("uint8array",b):C==="string"&amp;&amp;(v?b=o.decode(b):m&amp;&amp;g!==!0&amp;&amp;(b=function(x){return l(x,n.uint8array?new Uint8Array(x.length):new Array(x.length))}(b))),b):s.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,e,t){"use strict";var n=r("./reader/readerFor"),o=r("./utils"),i=r("./signature"),s=r("./zipEntry"),a=r("./support");function l(u){this.files=[],this.loadOptions=u}l.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(u)+")")}},isSignature:function(u,d){var c=this.reader.index;this.reader.setIndex(u);var p=this.reader.readString(4)===d;return this.reader.setIndex(c),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),d=a.uint8array?"uint8array":"array",c=o.transformTo(d,u);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,d,c,p=this.zip64EndOfCentralSize-44;0&lt;p;)u=this.reader.readInt(2),d=this.reader.readInt(4),c=this.reader.readData(d),this.zip64ExtensibleData[u]={id:u,length:d,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1&lt;this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,d;for(u=0;u&lt;this.files.length;u++)d=this.files[u],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(u=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&amp;&amp;this.centralDirRecords!==0&amp;&amp;this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(u&lt;0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var d=u;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))&lt;0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&amp;&amp;(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir&lt;0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&amp;&amp;(c+=20,c+=12+this.zip64EndOfCentralSize);var p=d-c;if(0&lt;p)this.isSignature(d,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p&lt;0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=n(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,e,t){"use strict";var n=r("./reader/readerFor"),o=r("./utils"),i=r("./compressedObject"),s=r("./crc32"),a=r("./utf8"),l=r("./compressions"),u=r("./support");function d(c,p){this.options=c,this.loadOptions=p}d.prototype={isEncrypted:function(){return(1&amp;this.bitFlag)==1},useUTF8:function(){return(2048&amp;this.bitFlag)==2048},readLocalPart:function(c){var p,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(f){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&amp;&amp;l[m].magic===f)return l[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var p=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(p),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy&gt;&gt;8;this.dir=!!(16&amp;this.externalFileAttributes),c==0&amp;&amp;(this.dosPermissions=63&amp;this.externalFileAttributes),c==3&amp;&amp;(this.unixPermissions=this.externalFileAttributes&gt;&gt;16&amp;65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&amp;&amp;(this.uncompressedSize=c.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&amp;&amp;(this.compressedSize=c.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&amp;&amp;(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&amp;&amp;(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var p,h,f,m=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4&lt;m;)p=c.readInt(2),h=c.readInt(2),f=c.readData(h),this.extraFields[p]={id:p,length:h,value:f};c.setIndex(m)},handleUTF8:function(){var c=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=o.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var m=o.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var p=n(c.value);return p.readInt(1)!==1||s(this.fileName)!==p.readInt(4)?null:a.utf8decode(p.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var p=n(c.value);return p.readInt(1)!==1||s(this.fileComment)!==p.readInt(4)?null:a.utf8decode(p.readData(c.length-5))}return null}},e.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,e,t){"use strict";function n(p,h,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=h,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var o=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),s=r("./utf8"),a=r("./compressedObject"),l=r("./stream/GenericWorker");n.prototype={internalStream:function(p){var h=null,f="string";try{if(!p)throw new Error("No output type specified.");var m=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&amp;&amp;f!=="text"||(f="string"),h=this._decompressWorker();var g=!this._dataBinary;g&amp;&amp;!m&amp;&amp;(h=h.pipe(new s.Utf8EncodeWorker)),!g&amp;&amp;m&amp;&amp;(h=h.pipe(new s.Utf8DecodeWorker))}catch(v){(h=new l("error")).error(v)}return new o(h,f,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof a&amp;&amp;this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(f,p,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c&lt;u.length;c++)n.prototype[u[c]]=d;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,e,t){(function(n){"use strict";var o,i,s=n.MutationObserver||n.WebKitMutationObserver;if(s){var a=0,l=new s(p),u=n.document.createTextNode("");l.observe(u,{characterData:!0}),o=function(){u.data=a=++a%2}}else if(n.setImmediate||n.MessageChannel===void 0)o="document"in n&amp;&amp;"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var d=new n.MessageChannel;d.port1.onmessage=p,o=function(){d.port2.postMessage(0)}}var c=[];function p(){var h,f;i=!0;for(var m=c.length;m;){for(f=c,c=[],h=-1;++h&lt;m;)f[h]();m=c.length}i=!1}e.exports=function(h){c.push(h)!==1||i||o()}}).call(this,typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,e,t){"use strict";var n=r("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==o&amp;&amp;h(this,m)}function d(m,g,v){this.promise=m,typeof g=="function"&amp;&amp;(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&amp;&amp;(this.onRejected=v,this.callRejected=this.otherCallRejected)}function c(m,g,v){n(function(){var b;try{b=g(v)}catch(C){return i.reject(m,C)}b===m?i.reject(m,new TypeError("Cannot resolve promise with itself")):i.resolve(m,b)})}function p(m){var g=m&amp;&amp;m.then;if(m&amp;&amp;(typeof m=="object"||typeof m=="function")&amp;&amp;typeof g=="function")return function(){g.apply(m,arguments)}}function h(m,g){var v=!1;function b(y){v||(v=!0,i.reject(m,y))}function C(y){v||(v=!0,i.resolve(m,y))}var x=f(function(){g(C,b)});x.status==="error"&amp;&amp;b(x.value)}function f(m,g){var v={};try{v.value=m(g),v.status="success"}catch(b){v.status="error",v.value=b}return v}(e.exports=u).prototype.finally=function(m){if(typeof m!="function")return this;var g=this.constructor;return this.then(function(v){return g.resolve(m()).then(function(){return v})},function(v){return g.resolve(m()).then(function(){throw v})})},u.prototype.catch=function(m){return this.then(null,m)},u.prototype.then=function(m,g){if(typeof m!="function"&amp;&amp;this.state===a||typeof g!="function"&amp;&amp;this.state===s)return this;var v=new this.constructor(o);return this.state!==l?c(v,this.state===a?m:g,this.outcome):this.queue.push(new d(v,m,g)),v},d.prototype.callFulfilled=function(m){i.resolve(this.promise,m)},d.prototype.otherCallFulfilled=function(m){c(this.promise,this.onFulfilled,m)},d.prototype.callRejected=function(m){i.reject(this.promise,m)},d.prototype.otherCallRejected=function(m){c(this.promise,this.onRejected,m)},i.resolve=function(m,g){var v=f(p,g);if(v.status==="error")return i.reject(m,v.value);var b=v.value;if(b)h(m,b);else{m.state=a,m.outcome=g;for(var C=-1,x=m.queue.length;++C&lt;x;)m.queue[C].callFulfilled(g)}return m},i.reject=function(m,g){m.state=s,m.outcome=g;for(var v=-1,b=m.queue.length;++v&lt;b;)m.queue[v].callRejected(g);return m},u.resolve=function(m){return m instanceof this?m:i.resolve(new this(o),m)},u.reject=function(m){var g=new this(o);return i.reject(g,m)},u.all=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,b=!1;if(!v)return this.resolve([]);for(var C=new Array(v),x=0,y=-1,S=new this(o);++y&lt;v;)T(m[y],y);return S;function T(w,k){g.resolve(w).then(function(A){C[k]=A,++x!==v||b||(b=!0,i.resolve(S,C))},function(A){b||(b=!0,i.reject(S,A))})}},u.race=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,b=!1;if(!v)return this.resolve([]);for(var C=-1,x=new this(o);++C&lt;v;)y=m[C],g.resolve(y).then(function(S){b||(b=!0,i.resolve(x,S))},function(S){b||(b=!0,i.reject(x,S))});var y;return x}},{immediate:36}],38:[function(r,e,t){"use strict";var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,e,t){"use strict";var n=r("./zlib/deflate"),o=r("./utils/common"),i=r("./utils/strings"),s=r("./zlib/messages"),a=r("./zlib/zstream"),l=Object.prototype.toString,u=0,d=-1,c=0,p=8;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},m||{});var g=this.options;g.raw&amp;&amp;0&lt;g.windowBits?g.windowBits=-g.windowBits:g.gzip&amp;&amp;0&lt;g.windowBits&amp;&amp;g.windowBits&lt;16&amp;&amp;(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var v=n.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(v!==u)throw new Error(s[v]);if(g.header&amp;&amp;n.deflateSetHeader(this.strm,g.header),g.dictionary){var b;if(b=typeof g.dictionary=="string"?i.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(v=n.deflateSetDictionary(this.strm,b))!==u)throw new Error(s[v]);this._dict_set=!0}}function f(m,g){var v=new h(g);if(v.push(m,!0),v.err)throw v.msg||s[v.err];return v.result}h.prototype.push=function(m,g){var v,b,C=this.strm,x=this.options.chunkSize;if(this.ended)return!1;b=g===~~g?g:g===!0?4:0,typeof m=="string"?C.input=i.string2buf(m):l.call(m)==="[object ArrayBuffer]"?C.input=new Uint8Array(m):C.input=m,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&amp;&amp;(C.output=new o.Buf8(x),C.next_out=0,C.avail_out=x),(v=n.deflate(C,b))!==1&amp;&amp;v!==u)return this.onEnd(v),!(this.ended=!0);C.avail_out!==0&amp;&amp;(C.avail_in!==0||b!==4&amp;&amp;b!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(C.output,C.next_out))):this.onData(o.shrinkBuf(C.output,C.next_out)))}while((0&lt;C.avail_in||C.avail_out===0)&amp;&amp;v!==1);return b===4?(v=n.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u):b!==2||(this.onEnd(u),!(C.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===u&amp;&amp;(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},t.Deflate=h,t.deflate=f,t.deflateRaw=function(m,g){return(g=g||{}).raw=!0,f(m,g)},t.gzip=function(m,g){return(g=g||{}).gzip=!0,f(m,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,e,t){"use strict";var n=r("./zlib/inflate"),o=r("./utils/common"),i=r("./utils/strings"),s=r("./zlib/constants"),a=r("./zlib/messages"),l=r("./zlib/zstream"),u=r("./zlib/gzheader"),d=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var f=this.options;f.raw&amp;&amp;0&lt;=f.windowBits&amp;&amp;f.windowBits&lt;16&amp;&amp;(f.windowBits=-f.windowBits,f.windowBits===0&amp;&amp;(f.windowBits=-15)),!(0&lt;=f.windowBits&amp;&amp;f.windowBits&lt;16)||h&amp;&amp;h.windowBits||(f.windowBits+=32),15&lt;f.windowBits&amp;&amp;f.windowBits&lt;48&amp;&amp;(15&amp;f.windowBits)==0&amp;&amp;(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=n.inflateInit2(this.strm,f.windowBits);if(m!==s.Z_OK)throw new Error(a[m]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function p(h,f){var m=new c(f);if(m.push(h,!0),m.err)throw m.msg||a[m.err];return m.result}c.prototype.push=function(h,f){var m,g,v,b,C,x,y=this.strm,S=this.options.chunkSize,T=this.options.dictionary,w=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof h=="string"?y.input=i.binstring2buf(h):d.call(h)==="[object ArrayBuffer]"?y.input=new Uint8Array(h):y.input=h,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&amp;&amp;(y.output=new o.Buf8(S),y.next_out=0,y.avail_out=S),(m=n.inflate(y,s.Z_NO_FLUSH))===s.Z_NEED_DICT&amp;&amp;T&amp;&amp;(x=typeof T=="string"?i.string2buf(T):d.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,m=n.inflateSetDictionary(this.strm,x)),m===s.Z_BUF_ERROR&amp;&amp;w===!0&amp;&amp;(m=s.Z_OK,w=!1),m!==s.Z_STREAM_END&amp;&amp;m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);y.next_out&amp;&amp;(y.avail_out!==0&amp;&amp;m!==s.Z_STREAM_END&amp;&amp;(y.avail_in!==0||g!==s.Z_FINISH&amp;&amp;g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=i.utf8border(y.output,y.next_out),b=y.next_out-v,C=i.buf2string(y.output,v),y.next_out=b,y.avail_out=S-b,b&amp;&amp;o.arraySet(y.output,y.output,v,b,0),this.onData(C)):this.onData(o.shrinkBuf(y.output,y.next_out)))),y.avail_in===0&amp;&amp;y.avail_out===0&amp;&amp;(w=!0)}while((0&lt;y.avail_in||y.avail_out===0)&amp;&amp;m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&amp;&amp;(g=s.Z_FINISH),g===s.Z_FINISH?(m=n.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(y.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===s.Z_OK&amp;&amp;(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},t.Inflate=c,t.inflate=p,t.inflateRaw=function(h,f){return(f=f||{}).raw=!0,p(h,f)},t.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,e,t){"use strict";var n=typeof Uint8Array!="undefined"&amp;&amp;typeof Uint16Array!="undefined"&amp;&amp;typeof Int32Array!="undefined";t.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var u in l)l.hasOwnProperty(u)&amp;&amp;(s[u]=l[u])}}return s},t.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,l,u,d){if(a.subarray&amp;&amp;s.subarray)s.set(a.subarray(l,l+u),d);else for(var c=0;c&lt;u;c++)s[d+c]=a[l+c]},flattenChunks:function(s){var a,l,u,d,c,p;for(a=u=0,l=s.length;a&lt;l;a++)u+=s[a].length;for(p=new Uint8Array(u),a=d=0,l=s.length;a&lt;l;a++)c=s[a],p.set(c,d),d+=c.length;return p}},i={arraySet:function(s,a,l,u,d){for(var c=0;c&lt;u;c++)s[d+c]=a[l+c]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},{}],42:[function(r,e,t){"use strict";var n=r("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(u){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){i=!1}for(var s=new n.Buf8(256),a=0;a&lt;256;a++)s[a]=252&lt;=a?6:248&lt;=a?5:240&lt;=a?4:224&lt;=a?3:192&lt;=a?2:1;function l(u,d){if(d&lt;65537&amp;&amp;(u.subarray&amp;&amp;i||!u.subarray&amp;&amp;o))return String.fromCharCode.apply(null,n.shrinkBuf(u,d));for(var c="",p=0;p&lt;d;p++)c+=String.fromCharCode(u[p]);return c}s[254]=s[254]=1,t.string2buf=function(u){var d,c,p,h,f,m=u.length,g=0;for(h=0;h&lt;m;h++)(64512&amp;(c=u.charCodeAt(h)))==55296&amp;&amp;h+1&lt;m&amp;&amp;(64512&amp;(p=u.charCodeAt(h+1)))==56320&amp;&amp;(c=65536+(c-55296&lt;&lt;10)+(p-56320),h++),g+=c&lt;128?1:c&lt;2048?2:c&lt;65536?3:4;for(d=new n.Buf8(g),h=f=0;f&lt;g;h++)(64512&amp;(c=u.charCodeAt(h)))==55296&amp;&amp;h+1&lt;m&amp;&amp;(64512&amp;(p=u.charCodeAt(h+1)))==56320&amp;&amp;(c=65536+(c-55296&lt;&lt;10)+(p-56320),h++),c&lt;128?d[f++]=c:(c&lt;2048?d[f++]=192|c&gt;&gt;&gt;6:(c&lt;65536?d[f++]=224|c&gt;&gt;&gt;12:(d[f++]=240|c&gt;&gt;&gt;18,d[f++]=128|c&gt;&gt;&gt;12&amp;63),d[f++]=128|c&gt;&gt;&gt;6&amp;63),d[f++]=128|63&amp;c);return d},t.buf2binstring=function(u){return l(u,u.length)},t.binstring2buf=function(u){for(var d=new n.Buf8(u.length),c=0,p=d.length;c&lt;p;c++)d[c]=u.charCodeAt(c);return d},t.buf2string=function(u,d){var c,p,h,f,m=d||u.length,g=new Array(2*m);for(c=p=0;c&lt;m;)if((h=u[c++])&lt;128)g[p++]=h;else if(4&lt;(f=s[h]))g[p++]=65533,c+=f-1;else{for(h&amp;=f===2?31:f===3?15:7;1&lt;f&amp;&amp;c&lt;m;)h=h&lt;&lt;6|63&amp;u[c++],f--;1&lt;f?g[p++]=65533:h&lt;65536?g[p++]=h:(h-=65536,g[p++]=55296|h&gt;&gt;10&amp;1023,g[p++]=56320|1023&amp;h)}return l(g,p)},t.utf8border=function(u,d){var c;for((d=d||u.length)&gt;u.length&amp;&amp;(d=u.length),c=d-1;0&lt;=c&amp;&amp;(192&amp;u[c])==128;)c--;return c&lt;0||c===0?d:c+s[u[c]]&gt;d?c:d}},{"./common":41}],43:[function(r,e,t){"use strict";e.exports=function(n,o,i,s){for(var a=65535&amp;n|0,l=n&gt;&gt;&gt;16&amp;65535|0,u=0;i!==0;){for(i-=u=2e3&lt;i?2e3:i;l=l+(a=a+o[s++]|0)|0,--u;);a%=65521,l%=65521}return a|l&lt;&lt;16|0}},{}],44:[function(r,e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,e,t){"use strict";var n=function(){for(var o,i=[],s=0;s&lt;256;s++){o=s;for(var a=0;a&lt;8;a++)o=1&amp;o?3988292384^o&gt;&gt;&gt;1:o&gt;&gt;&gt;1;i[s]=o}return i}();e.exports=function(o,i,s,a){var l=n,u=a+s;o^=-1;for(var d=a;d&lt;u;d++)o=o&gt;&gt;&gt;8^l[255&amp;(o^i[d])];return-1^o}},{}],46:[function(r,e,t){"use strict";var n,o=r("../utils/common"),i=r("./trees"),s=r("./adler32"),a=r("./crc32"),l=r("./messages"),u=0,d=4,c=0,p=-2,h=-1,f=4,m=2,g=8,v=9,b=286,C=30,x=19,y=2*b+1,S=15,T=3,w=258,k=w+T+1,A=42,I=113,E=1,O=2,Q=3,j=4;function U(P,X){return P.msg=l[X],X}function B(P){return(P&lt;&lt;1)-(4&lt;P?9:0)}function z(P){for(var X=P.length;0&lt;=--X;)P[X]=0}function N(P){var X=P.state,K=X.pending;K&gt;P.avail_out&amp;&amp;(K=P.avail_out),K!==0&amp;&amp;(o.arraySet(P.output,X.pending_buf,X.pending_out,K,P.next_out),P.next_out+=K,X.pending_out+=K,P.total_out+=K,P.avail_out-=K,X.pending-=K,X.pending===0&amp;&amp;(X.pending_out=0))}function V(P,X){i._tr_flush_block(P,0&lt;=P.block_start?P.block_start:-1,P.strstart-P.block_start,X),P.block_start=P.strstart,N(P.strm)}function re(P,X){P.pending_buf[P.pending++]=X}function ce(P,X){P.pending_buf[P.pending++]=X&gt;&gt;&gt;8&amp;255,P.pending_buf[P.pending++]=255&amp;X}function ge(P,X){var K,R,H=P.max_chain_length,J=P.strstart,te=P.prev_length,de=P.nice_match,se=P.strstart&gt;P.w_size-k?P.strstart-(P.w_size-k):0,be=P.window,Pe=P.w_mask,ke=P.prev,Ie=P.strstart+w,Ve=be[J+te-1],Ae=be[J+te];P.prev_length&gt;=P.good_match&amp;&amp;(H&gt;&gt;=2),de&gt;P.lookahead&amp;&amp;(de=P.lookahead);do if(be[(K=X)+te]===Ae&amp;&amp;be[K+te-1]===Ve&amp;&amp;be[K]===be[J]&amp;&amp;be[++K]===be[J+1]){J+=2,K++;do;while(be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;be[++J]===be[++K]&amp;&amp;J&lt;Ie);if(R=w-(Ie-J),J=Ie-w,te&lt;R){if(P.match_start=X,de&lt;=(te=R))break;Ve=be[J+te-1],Ae=be[J+te]}}while((X=ke[X&amp;Pe])&gt;se&amp;&amp;--H!=0);return te&lt;=P.lookahead?te:P.lookahead}function ae(P){var X,K,R,H,J,te,de,se,be,Pe,ke=P.w_size;do{if(H=P.window_size-P.lookahead-P.strstart,P.strstart&gt;=ke+(ke-k)){for(o.arraySet(P.window,P.window,ke,ke,0),P.match_start-=ke,P.strstart-=ke,P.block_start-=ke,X=K=P.hash_size;R=P.head[--X],P.head[X]=ke&lt;=R?R-ke:0,--K;);for(X=K=ke;R=P.prev[--X],P.prev[X]=ke&lt;=R?R-ke:0,--K;);H+=ke}if(P.strm.avail_in===0)break;if(te=P.strm,de=P.window,se=P.strstart+P.lookahead,be=H,Pe=void 0,Pe=te.avail_in,be&lt;Pe&amp;&amp;(Pe=be),K=Pe===0?0:(te.avail_in-=Pe,o.arraySet(de,te.input,te.next_in,Pe,se),te.state.wrap===1?te.adler=s(te.adler,de,Pe,se):te.state.wrap===2&amp;&amp;(te.adler=a(te.adler,de,Pe,se)),te.next_in+=Pe,te.total_in+=Pe,Pe),P.lookahead+=K,P.lookahead+P.insert&gt;=T)for(J=P.strstart-P.insert,P.ins_h=P.window[J],P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[J+1])&amp;P.hash_mask;P.insert&amp;&amp;(P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[J+T-1])&amp;P.hash_mask,P.prev[J&amp;P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=J,J++,P.insert--,!(P.lookahead+P.insert&lt;T)););}while(P.lookahead&lt;k&amp;&amp;P.strm.avail_in!==0)}function Y(P,X){for(var K,R;;){if(P.lookahead&lt;k){if(ae(P),P.lookahead&lt;k&amp;&amp;X===u)return E;if(P.lookahead===0)break}if(K=0,P.lookahead&gt;=T&amp;&amp;(P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[P.strstart+T-1])&amp;P.hash_mask,K=P.prev[P.strstart&amp;P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),K!==0&amp;&amp;P.strstart-K&lt;=P.w_size-k&amp;&amp;(P.match_length=ge(P,K)),P.match_length&gt;=T)if(R=i._tr_tally(P,P.strstart-P.match_start,P.match_length-T),P.lookahead-=P.match_length,P.match_length&lt;=P.max_lazy_match&amp;&amp;P.lookahead&gt;=T){for(P.match_length--;P.strstart++,P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[P.strstart+T-1])&amp;P.hash_mask,K=P.prev[P.strstart&amp;P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart,--P.match_length!=0;);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[P.strstart+1])&amp;P.hash_mask;else R=i._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(R&amp;&amp;(V(P,!1),P.strm.avail_out===0))return E}return P.insert=P.strstart&lt;T-1?P.strstart:T-1,X===d?(V(P,!0),P.strm.avail_out===0?Q:j):P.last_lit&amp;&amp;(V(P,!1),P.strm.avail_out===0)?E:O}function W(P,X){for(var K,R,H;;){if(P.lookahead&lt;k){if(ae(P),P.lookahead&lt;k&amp;&amp;X===u)return E;if(P.lookahead===0)break}if(K=0,P.lookahead&gt;=T&amp;&amp;(P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[P.strstart+T-1])&amp;P.hash_mask,K=P.prev[P.strstart&amp;P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=T-1,K!==0&amp;&amp;P.prev_length&lt;P.max_lazy_match&amp;&amp;P.strstart-K&lt;=P.w_size-k&amp;&amp;(P.match_length=ge(P,K),P.match_length&lt;=5&amp;&amp;(P.strategy===1||P.match_length===T&amp;&amp;4096&lt;P.strstart-P.match_start)&amp;&amp;(P.match_length=T-1)),P.prev_length&gt;=T&amp;&amp;P.match_length&lt;=P.prev_length){for(H=P.strstart+P.lookahead-T,R=i._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-T),P.lookahead-=P.prev_length-1,P.prev_length-=2;++P.strstart&lt;=H&amp;&amp;(P.ins_h=(P.ins_h&lt;&lt;P.hash_shift^P.window[P.strstart+T-1])&amp;P.hash_mask,K=P.prev[P.strstart&amp;P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),--P.prev_length!=0;);if(P.match_available=0,P.match_length=T-1,P.strstart++,R&amp;&amp;(V(P,!1),P.strm.avail_out===0))return E}else if(P.match_available){if((R=i._tr_tally(P,0,P.window[P.strstart-1]))&amp;&amp;V(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return E}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&amp;&amp;(R=i._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart&lt;T-1?P.strstart:T-1,X===d?(V(P,!0),P.strm.avail_out===0?Q:j):P.last_lit&amp;&amp;(V(P,!1),P.strm.avail_out===0)?E:O}function G(P,X,K,R,H){this.good_length=P,this.max_lazy=X,this.nice_length=K,this.max_chain=R,this.func=H}function ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*y),this.dyn_dtree=new o.Buf16(2*(2*C+1)),this.bl_tree=new o.Buf16(2*(2*x+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(S+1),this.heap=new o.Buf16(2*b+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function F(P){var X;return P&amp;&amp;P.state?(P.total_in=P.total_out=0,P.data_type=m,(X=P.state).pending=0,X.pending_out=0,X.wrap&lt;0&amp;&amp;(X.wrap=-X.wrap),X.status=X.wrap?A:I,P.adler=X.wrap===2?0:1,X.last_flush=u,i._tr_init(X),c):U(P,p)}function L(P){var X=F(P);return X===c&amp;&amp;function(K){K.window_size=2*K.w_size,z(K.head),K.max_lazy_match=n[K.level].max_lazy,K.good_match=n[K.level].good_length,K.nice_match=n[K.level].nice_length,K.max_chain_length=n[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=T-1,K.match_available=0,K.ins_h=0}(P.state),X}function $(P,X,K,R,H,J){if(!P)return p;var te=1;if(X===h&amp;&amp;(X=6),R&lt;0?(te=0,R=-R):15&lt;R&amp;&amp;(te=2,R-=16),H&lt;1||v&lt;H||K!==g||R&lt;8||15&lt;R||X&lt;0||9&lt;X||J&lt;0||f&lt;J)return U(P,p);R===8&amp;&amp;(R=9);var de=new ee;return(P.state=de).strm=P,de.wrap=te,de.gzhead=null,de.w_bits=R,de.w_size=1&lt;&lt;de.w_bits,de.w_mask=de.w_size-1,de.hash_bits=H+7,de.hash_size=1&lt;&lt;de.hash_bits,de.hash_mask=de.hash_size-1,de.hash_shift=~~((de.hash_bits+T-1)/T),de.window=new o.Buf8(2*de.w_size),de.head=new o.Buf16(de.hash_size),de.prev=new o.Buf16(de.w_size),de.lit_bufsize=1&lt;&lt;H+6,de.pending_buf_size=4*de.lit_bufsize,de.pending_buf=new o.Buf8(de.pending_buf_size),de.d_buf=1*de.lit_bufsize,de.l_buf=3*de.lit_bufsize,de.level=X,de.strategy=J,de.method=K,L(P)}n=[new G(0,0,0,0,function(P,X){var K=65535;for(K&gt;P.pending_buf_size-5&amp;&amp;(K=P.pending_buf_size-5);;){if(P.lookahead&lt;=1){if(ae(P),P.lookahead===0&amp;&amp;X===u)return E;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var R=P.block_start+K;if((P.strstart===0||P.strstart&gt;=R)&amp;&amp;(P.lookahead=P.strstart-R,P.strstart=R,V(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start&gt;=P.w_size-k&amp;&amp;(V(P,!1),P.strm.avail_out===0))return E}return P.insert=0,X===d?(V(P,!0),P.strm.avail_out===0?Q:j):(P.strstart&gt;P.block_start&amp;&amp;(V(P,!1),P.strm.avail_out),E)}),new G(4,4,8,4,Y),new G(4,5,16,8,Y),new G(4,6,32,32,Y),new G(4,4,16,16,W),new G(8,16,32,32,W),new G(8,16,128,128,W),new G(8,32,128,256,W),new G(32,128,258,1024,W),new G(32,258,258,4096,W)],t.deflateInit=function(P,X){return $(P,X,g,15,8,0)},t.deflateInit2=$,t.deflateReset=L,t.deflateResetKeep=F,t.deflateSetHeader=function(P,X){return P&amp;&amp;P.state?P.state.wrap!==2?p:(P.state.gzhead=X,c):p},t.deflate=function(P,X){var K,R,H,J;if(!P||!P.state||5&lt;X||X&lt;0)return P?U(P,p):p;if(R=P.state,!P.output||!P.input&amp;&amp;P.avail_in!==0||R.status===666&amp;&amp;X!==d)return U(P,P.avail_out===0?-5:p);if(R.strm=P,K=R.last_flush,R.last_flush=X,R.status===A)if(R.wrap===2)P.adler=0,re(R,31),re(R,139),re(R,8),R.gzhead?(re(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),re(R,255&amp;R.gzhead.time),re(R,R.gzhead.time&gt;&gt;8&amp;255),re(R,R.gzhead.time&gt;&gt;16&amp;255),re(R,R.gzhead.time&gt;&gt;24&amp;255),re(R,R.level===9?2:2&lt;=R.strategy||R.level&lt;2?4:0),re(R,255&amp;R.gzhead.os),R.gzhead.extra&amp;&amp;R.gzhead.extra.length&amp;&amp;(re(R,255&amp;R.gzhead.extra.length),re(R,R.gzhead.extra.length&gt;&gt;8&amp;255)),R.gzhead.hcrc&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=69):(re(R,0),re(R,0),re(R,0),re(R,0),re(R,0),re(R,R.level===9?2:2&lt;=R.strategy||R.level&lt;2?4:0),re(R,3),R.status=I);else{var te=g+(R.w_bits-8&lt;&lt;4)&lt;&lt;8;te|=(2&lt;=R.strategy||R.level&lt;2?0:R.level&lt;6?1:R.level===6?2:3)&lt;&lt;6,R.strstart!==0&amp;&amp;(te|=32),te+=31-te%31,R.status=I,ce(R,te),R.strstart!==0&amp;&amp;(ce(R,P.adler&gt;&gt;&gt;16),ce(R,65535&amp;P.adler)),P.adler=1}if(R.status===69)if(R.gzhead.extra){for(H=R.pending;R.gzindex&lt;(65535&amp;R.gzhead.extra.length)&amp;&amp;(R.pending!==R.pending_buf_size||(R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),N(P),H=R.pending,R.pending!==R.pending_buf_size));)re(R,255&amp;R.gzhead.extra[R.gzindex]),R.gzindex++;R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),R.gzindex===R.gzhead.extra.length&amp;&amp;(R.gzindex=0,R.status=73)}else R.status=73;if(R.status===73)if(R.gzhead.name){H=R.pending;do{if(R.pending===R.pending_buf_size&amp;&amp;(R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),N(P),H=R.pending,R.pending===R.pending_buf_size)){J=1;break}J=R.gzindex&lt;R.gzhead.name.length?255&amp;R.gzhead.name.charCodeAt(R.gzindex++):0,re(R,J)}while(J!==0);R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),J===0&amp;&amp;(R.gzindex=0,R.status=91)}else R.status=91;if(R.status===91)if(R.gzhead.comment){H=R.pending;do{if(R.pending===R.pending_buf_size&amp;&amp;(R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),N(P),H=R.pending,R.pending===R.pending_buf_size)){J=1;break}J=R.gzindex&lt;R.gzhead.comment.length?255&amp;R.gzhead.comment.charCodeAt(R.gzindex++):0,re(R,J)}while(J!==0);R.gzhead.hcrc&amp;&amp;R.pending&gt;H&amp;&amp;(P.adler=a(P.adler,R.pending_buf,R.pending-H,H)),J===0&amp;&amp;(R.status=103)}else R.status=103;if(R.status===103&amp;&amp;(R.gzhead.hcrc?(R.pending+2&gt;R.pending_buf_size&amp;&amp;N(P),R.pending+2&lt;=R.pending_buf_size&amp;&amp;(re(R,255&amp;P.adler),re(R,P.adler&gt;&gt;8&amp;255),P.adler=0,R.status=I)):R.status=I),R.pending!==0){if(N(P),P.avail_out===0)return R.last_flush=-1,c}else if(P.avail_in===0&amp;&amp;B(X)&lt;=B(K)&amp;&amp;X!==d)return U(P,-5);if(R.status===666&amp;&amp;P.avail_in!==0)return U(P,-5);if(P.avail_in!==0||R.lookahead!==0||X!==u&amp;&amp;R.status!==666){var de=R.strategy===2?function(se,be){for(var Pe;;){if(se.lookahead===0&amp;&amp;(ae(se),se.lookahead===0)){if(be===u)return E;break}if(se.match_length=0,Pe=i._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,Pe&amp;&amp;(V(se,!1),se.strm.avail_out===0))return E}return se.insert=0,be===d?(V(se,!0),se.strm.avail_out===0?Q:j):se.last_lit&amp;&amp;(V(se,!1),se.strm.avail_out===0)?E:O}(R,X):R.strategy===3?function(se,be){for(var Pe,ke,Ie,Ve,Ae=se.window;;){if(se.lookahead&lt;=w){if(ae(se),se.lookahead&lt;=w&amp;&amp;be===u)return E;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead&gt;=T&amp;&amp;0&lt;se.strstart&amp;&amp;(ke=Ae[Ie=se.strstart-1])===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]){Ve=se.strstart+w;do;while(ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;ke===Ae[++Ie]&amp;&amp;Ie&lt;Ve);se.match_length=w-(Ve-Ie),se.match_length&gt;se.lookahead&amp;&amp;(se.match_length=se.lookahead)}if(se.match_length&gt;=T?(Pe=i._tr_tally(se,1,se.match_length-T),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(Pe=i._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),Pe&amp;&amp;(V(se,!1),se.strm.avail_out===0))return E}return se.insert=0,be===d?(V(se,!0),se.strm.avail_out===0?Q:j):se.last_lit&amp;&amp;(V(se,!1),se.strm.avail_out===0)?E:O}(R,X):n[R.level].func(R,X);if(de!==Q&amp;&amp;de!==j||(R.status=666),de===E||de===Q)return P.avail_out===0&amp;&amp;(R.last_flush=-1),c;if(de===O&amp;&amp;(X===1?i._tr_align(R):X!==5&amp;&amp;(i._tr_stored_block(R,0,0,!1),X===3&amp;&amp;(z(R.head),R.lookahead===0&amp;&amp;(R.strstart=0,R.block_start=0,R.insert=0))),N(P),P.avail_out===0))return R.last_flush=-1,c}return X!==d?c:R.wrap&lt;=0?1:(R.wrap===2?(re(R,255&amp;P.adler),re(R,P.adler&gt;&gt;8&amp;255),re(R,P.adler&gt;&gt;16&amp;255),re(R,P.adler&gt;&gt;24&amp;255),re(R,255&amp;P.total_in),re(R,P.total_in&gt;&gt;8&amp;255),re(R,P.total_in&gt;&gt;16&amp;255),re(R,P.total_in&gt;&gt;24&amp;255)):(ce(R,P.adler&gt;&gt;&gt;16),ce(R,65535&amp;P.adler)),N(P),0&lt;R.wrap&amp;&amp;(R.wrap=-R.wrap),R.pending!==0?c:1)},t.deflateEnd=function(P){var X;return P&amp;&amp;P.state?(X=P.state.status)!==A&amp;&amp;X!==69&amp;&amp;X!==73&amp;&amp;X!==91&amp;&amp;X!==103&amp;&amp;X!==I&amp;&amp;X!==666?U(P,p):(P.state=null,X===I?U(P,-3):c):p},t.deflateSetDictionary=function(P,X){var K,R,H,J,te,de,se,be,Pe=X.length;if(!P||!P.state||(J=(K=P.state).wrap)===2||J===1&amp;&amp;K.status!==A||K.lookahead)return p;for(J===1&amp;&amp;(P.adler=s(P.adler,X,Pe,0)),K.wrap=0,Pe&gt;=K.w_size&amp;&amp;(J===0&amp;&amp;(z(K.head),K.strstart=0,K.block_start=0,K.insert=0),be=new o.Buf8(K.w_size),o.arraySet(be,X,Pe-K.w_size,K.w_size,0),X=be,Pe=K.w_size),te=P.avail_in,de=P.next_in,se=P.input,P.avail_in=Pe,P.next_in=0,P.input=X,ae(K);K.lookahead&gt;=T;){for(R=K.strstart,H=K.lookahead-(T-1);K.ins_h=(K.ins_h&lt;&lt;K.hash_shift^K.window[R+T-1])&amp;K.hash_mask,K.prev[R&amp;K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=R,R++,--H;);K.strstart=R,K.lookahead=T-1,ae(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=T-1,K.match_available=0,P.next_in=de,P.input=se,P.avail_in=te,K.wrap=J,c},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,e,t){"use strict";e.exports=function(n,o){var i,s,a,l,u,d,c,p,h,f,m,g,v,b,C,x,y,S,T,w,k,A,I,E,O;i=n.state,s=n.next_in,E=n.input,a=s+(n.avail_in-5),l=n.next_out,O=n.output,u=l-(o-n.avail_out),d=l+(n.avail_out-257),c=i.dmax,p=i.wsize,h=i.whave,f=i.wnext,m=i.window,g=i.hold,v=i.bits,b=i.lencode,C=i.distcode,x=(1&lt;&lt;i.lenbits)-1,y=(1&lt;&lt;i.distbits)-1;e:do{v&lt;15&amp;&amp;(g+=E[s++]&lt;&lt;v,v+=8,g+=E[s++]&lt;&lt;v,v+=8),S=b[g&amp;x];t:for(;;){if(g&gt;&gt;&gt;=T=S&gt;&gt;&gt;24,v-=T,(T=S&gt;&gt;&gt;16&amp;255)===0)O[l++]=65535&amp;S;else{if(!(16&amp;T)){if((64&amp;T)==0){S=b[(65535&amp;S)+(g&amp;(1&lt;&lt;T)-1)];continue t}if(32&amp;T){i.mode=12;break e}n.msg="invalid literal/length code",i.mode=30;break e}w=65535&amp;S,(T&amp;=15)&amp;&amp;(v&lt;T&amp;&amp;(g+=E[s++]&lt;&lt;v,v+=8),w+=g&amp;(1&lt;&lt;T)-1,g&gt;&gt;&gt;=T,v-=T),v&lt;15&amp;&amp;(g+=E[s++]&lt;&lt;v,v+=8,g+=E[s++]&lt;&lt;v,v+=8),S=C[g&amp;y];r:for(;;){if(g&gt;&gt;&gt;=T=S&gt;&gt;&gt;24,v-=T,!(16&amp;(T=S&gt;&gt;&gt;16&amp;255))){if((64&amp;T)==0){S=C[(65535&amp;S)+(g&amp;(1&lt;&lt;T)-1)];continue r}n.msg="invalid distance code",i.mode=30;break e}if(k=65535&amp;S,v&lt;(T&amp;=15)&amp;&amp;(g+=E[s++]&lt;&lt;v,(v+=8)&lt;T&amp;&amp;(g+=E[s++]&lt;&lt;v,v+=8)),c&lt;(k+=g&amp;(1&lt;&lt;T)-1)){n.msg="invalid distance too far back",i.mode=30;break e}if(g&gt;&gt;&gt;=T,v-=T,(T=l-u)&lt;k){if(h&lt;(T=k-T)&amp;&amp;i.sane){n.msg="invalid distance too far back",i.mode=30;break e}if(I=m,(A=0)===f){if(A+=p-T,T&lt;w){for(w-=T;O[l++]=m[A++],--T;);A=l-k,I=O}}else if(f&lt;T){if(A+=p+f-T,(T-=f)&lt;w){for(w-=T;O[l++]=m[A++],--T;);if(A=0,f&lt;w){for(w-=T=f;O[l++]=m[A++],--T;);A=l-k,I=O}}}else if(A+=f-T,T&lt;w){for(w-=T;O[l++]=m[A++],--T;);A=l-k,I=O}for(;2&lt;w;)O[l++]=I[A++],O[l++]=I[A++],O[l++]=I[A++],w-=3;w&amp;&amp;(O[l++]=I[A++],1&lt;w&amp;&amp;(O[l++]=I[A++]))}else{for(A=l-k;O[l++]=O[A++],O[l++]=O[A++],O[l++]=O[A++],2&lt;(w-=3););w&amp;&amp;(O[l++]=O[A++],1&lt;w&amp;&amp;(O[l++]=O[A++]))}break}}break}}while(s&lt;a&amp;&amp;l&lt;d);s-=w=v&gt;&gt;3,g&amp;=(1&lt;&lt;(v-=w&lt;&lt;3))-1,n.next_in=s,n.next_out=l,n.avail_in=s&lt;a?a-s+5:5-(s-a),n.avail_out=l&lt;d?d-l+257:257-(l-d),i.hold=g,i.bits=v}},{}],49:[function(r,e,t){"use strict";var n=r("../utils/common"),o=r("./adler32"),i=r("./crc32"),s=r("./inffast"),a=r("./inftrees"),l=1,u=2,d=0,c=-2,p=1,h=852,f=592;function m(A){return(A&gt;&gt;&gt;24&amp;255)+(A&gt;&gt;&gt;8&amp;65280)+((65280&amp;A)&lt;&lt;8)+((255&amp;A)&lt;&lt;24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(A){var I;return A&amp;&amp;A.state?(I=A.state,A.total_in=A.total_out=I.total=0,A.msg="",I.wrap&amp;&amp;(A.adler=1&amp;I.wrap),I.mode=p,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new n.Buf32(h),I.distcode=I.distdyn=new n.Buf32(f),I.sane=1,I.back=-1,d):c}function b(A){var I;return A&amp;&amp;A.state?((I=A.state).wsize=0,I.whave=0,I.wnext=0,v(A)):c}function C(A,I){var E,O;return A&amp;&amp;A.state?(O=A.state,I&lt;0?(E=0,I=-I):(E=1+(I&gt;&gt;4),I&lt;48&amp;&amp;(I&amp;=15)),I&amp;&amp;(I&lt;8||15&lt;I)?c:(O.window!==null&amp;&amp;O.wbits!==I&amp;&amp;(O.window=null),O.wrap=E,O.wbits=I,b(A))):c}function x(A,I){var E,O;return A?(O=new g,(A.state=O).window=null,(E=C(A,I))!==d&amp;&amp;(A.state=null),E):c}var y,S,T=!0;function w(A){if(T){var I;for(y=new n.Buf32(512),S=new n.Buf32(32),I=0;I&lt;144;)A.lens[I++]=8;for(;I&lt;256;)A.lens[I++]=9;for(;I&lt;280;)A.lens[I++]=7;for(;I&lt;288;)A.lens[I++]=8;for(a(l,A.lens,0,288,y,0,A.work,{bits:9}),I=0;I&lt;32;)A.lens[I++]=5;a(u,A.lens,0,32,S,0,A.work,{bits:5}),T=!1}A.lencode=y,A.lenbits=9,A.distcode=S,A.distbits=5}function k(A,I,E,O){var Q,j=A.state;return j.window===null&amp;&amp;(j.wsize=1&lt;&lt;j.wbits,j.wnext=0,j.whave=0,j.window=new n.Buf8(j.wsize)),O&gt;=j.wsize?(n.arraySet(j.window,I,E-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(O&lt;(Q=j.wsize-j.wnext)&amp;&amp;(Q=O),n.arraySet(j.window,I,E-O,Q,j.wnext),(O-=Q)?(n.arraySet(j.window,I,E-O,O,0),j.wnext=O,j.whave=j.wsize):(j.wnext+=Q,j.wnext===j.wsize&amp;&amp;(j.wnext=0),j.whave&lt;j.wsize&amp;&amp;(j.whave+=Q))),0}t.inflateReset=b,t.inflateReset2=C,t.inflateResetKeep=v,t.inflateInit=function(A){return x(A,15)},t.inflateInit2=x,t.inflate=function(A,I){var E,O,Q,j,U,B,z,N,V,re,ce,ge,ae,Y,W,G,ee,F,L,$,P,X,K,R,H=0,J=new n.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&amp;&amp;A.avail_in!==0)return c;(E=A.state).mode===12&amp;&amp;(E.mode=13),U=A.next_out,Q=A.output,z=A.avail_out,j=A.next_in,O=A.input,B=A.avail_in,N=E.hold,V=E.bits,re=B,ce=z,X=d;e:for(;;)switch(E.mode){case p:if(E.wrap===0){E.mode=13;break}for(;V&lt;16;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(2&amp;E.wrap&amp;&amp;N===35615){J[E.check=0]=255&amp;N,J[1]=N&gt;&gt;&gt;8&amp;255,E.check=i(E.check,J,2,0),V=N=0,E.mode=2;break}if(E.flags=0,E.head&amp;&amp;(E.head.done=!1),!(1&amp;E.wrap)||(((255&amp;N)&lt;&lt;8)+(N&gt;&gt;8))%31){A.msg="incorrect header check",E.mode=30;break}if((15&amp;N)!=8){A.msg="unknown compression method",E.mode=30;break}if(V-=4,P=8+(15&amp;(N&gt;&gt;&gt;=4)),E.wbits===0)E.wbits=P;else if(P&gt;E.wbits){A.msg="invalid window size",E.mode=30;break}E.dmax=1&lt;&lt;P,A.adler=E.check=1,E.mode=512&amp;N?10:12,V=N=0;break;case 2:for(;V&lt;16;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(E.flags=N,(255&amp;E.flags)!=8){A.msg="unknown compression method",E.mode=30;break}if(57344&amp;E.flags){A.msg="unknown header flags set",E.mode=30;break}E.head&amp;&amp;(E.head.text=N&gt;&gt;8&amp;1),512&amp;E.flags&amp;&amp;(J[0]=255&amp;N,J[1]=N&gt;&gt;&gt;8&amp;255,E.check=i(E.check,J,2,0)),V=N=0,E.mode=3;case 3:for(;V&lt;32;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.head&amp;&amp;(E.head.time=N),512&amp;E.flags&amp;&amp;(J[0]=255&amp;N,J[1]=N&gt;&gt;&gt;8&amp;255,J[2]=N&gt;&gt;&gt;16&amp;255,J[3]=N&gt;&gt;&gt;24&amp;255,E.check=i(E.check,J,4,0)),V=N=0,E.mode=4;case 4:for(;V&lt;16;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.head&amp;&amp;(E.head.xflags=255&amp;N,E.head.os=N&gt;&gt;8),512&amp;E.flags&amp;&amp;(J[0]=255&amp;N,J[1]=N&gt;&gt;&gt;8&amp;255,E.check=i(E.check,J,2,0)),V=N=0,E.mode=5;case 5:if(1024&amp;E.flags){for(;V&lt;16;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.length=N,E.head&amp;&amp;(E.head.extra_len=N),512&amp;E.flags&amp;&amp;(J[0]=255&amp;N,J[1]=N&gt;&gt;&gt;8&amp;255,E.check=i(E.check,J,2,0)),V=N=0}else E.head&amp;&amp;(E.head.extra=null);E.mode=6;case 6:if(1024&amp;E.flags&amp;&amp;(B&lt;(ge=E.length)&amp;&amp;(ge=B),ge&amp;&amp;(E.head&amp;&amp;(P=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),n.arraySet(E.head.extra,O,j,ge,P)),512&amp;E.flags&amp;&amp;(E.check=i(E.check,O,ge,j)),B-=ge,j+=ge,E.length-=ge),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&amp;E.flags){if(B===0)break e;for(ge=0;P=O[j+ge++],E.head&amp;&amp;P&amp;&amp;E.length&lt;65536&amp;&amp;(E.head.name+=String.fromCharCode(P)),P&amp;&amp;ge&lt;B;);if(512&amp;E.flags&amp;&amp;(E.check=i(E.check,O,ge,j)),B-=ge,j+=ge,P)break e}else E.head&amp;&amp;(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&amp;E.flags){if(B===0)break e;for(ge=0;P=O[j+ge++],E.head&amp;&amp;P&amp;&amp;E.length&lt;65536&amp;&amp;(E.head.comment+=String.fromCharCode(P)),P&amp;&amp;ge&lt;B;);if(512&amp;E.flags&amp;&amp;(E.check=i(E.check,O,ge,j)),B-=ge,j+=ge,P)break e}else E.head&amp;&amp;(E.head.comment=null);E.mode=9;case 9:if(512&amp;E.flags){for(;V&lt;16;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(N!==(65535&amp;E.check)){A.msg="header crc mismatch",E.mode=30;break}V=N=0}E.head&amp;&amp;(E.head.hcrc=E.flags&gt;&gt;9&amp;1,E.head.done=!0),A.adler=E.check=0,E.mode=12;break;case 10:for(;V&lt;32;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}A.adler=E.check=m(N),V=N=0,E.mode=11;case 11:if(E.havedict===0)return A.next_out=U,A.avail_out=z,A.next_in=j,A.avail_in=B,E.hold=N,E.bits=V,2;A.adler=E.check=1,E.mode=12;case 12:if(I===5||I===6)break e;case 13:if(E.last){N&gt;&gt;&gt;=7&amp;V,V-=7&amp;V,E.mode=27;break}for(;V&lt;3;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}switch(E.last=1&amp;N,V-=1,3&amp;(N&gt;&gt;&gt;=1)){case 0:E.mode=14;break;case 1:if(w(E),E.mode=20,I!==6)break;N&gt;&gt;&gt;=2,V-=2;break e;case 2:E.mode=17;break;case 3:A.msg="invalid block type",E.mode=30}N&gt;&gt;&gt;=2,V-=2;break;case 14:for(N&gt;&gt;&gt;=7&amp;V,V-=7&amp;V;V&lt;32;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if((65535&amp;N)!=(N&gt;&gt;&gt;16^65535)){A.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&amp;N,V=N=0,E.mode=15,I===6)break e;case 15:E.mode=16;case 16:if(ge=E.length){if(B&lt;ge&amp;&amp;(ge=B),z&lt;ge&amp;&amp;(ge=z),ge===0)break e;n.arraySet(Q,O,j,ge,U),B-=ge,j+=ge,z-=ge,U+=ge,E.length-=ge;break}E.mode=12;break;case 17:for(;V&lt;14;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(E.nlen=257+(31&amp;N),N&gt;&gt;&gt;=5,V-=5,E.ndist=1+(31&amp;N),N&gt;&gt;&gt;=5,V-=5,E.ncode=4+(15&amp;N),N&gt;&gt;&gt;=4,V-=4,286&lt;E.nlen||30&lt;E.ndist){A.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have&lt;E.ncode;){for(;V&lt;3;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.lens[te[E.have++]]=7&amp;N,N&gt;&gt;&gt;=3,V-=3}for(;E.have&lt;19;)E.lens[te[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,K={bits:E.lenbits},X=a(0,E.lens,0,19,E.lencode,0,E.work,K),E.lenbits=K.bits,X){A.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have&lt;E.nlen+E.ndist;){for(;G=(H=E.lencode[N&amp;(1&lt;&lt;E.lenbits)-1])&gt;&gt;&gt;16&amp;255,ee=65535&amp;H,!((W=H&gt;&gt;&gt;24)&lt;=V);){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(ee&lt;16)N&gt;&gt;&gt;=W,V-=W,E.lens[E.have++]=ee;else{if(ee===16){for(R=W+2;V&lt;R;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(N&gt;&gt;&gt;=W,V-=W,E.have===0){A.msg="invalid bit length repeat",E.mode=30;break}P=E.lens[E.have-1],ge=3+(3&amp;N),N&gt;&gt;&gt;=2,V-=2}else if(ee===17){for(R=W+3;V&lt;R;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}V-=W,P=0,ge=3+(7&amp;(N&gt;&gt;&gt;=W)),N&gt;&gt;&gt;=3,V-=3}else{for(R=W+7;V&lt;R;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}V-=W,P=0,ge=11+(127&amp;(N&gt;&gt;&gt;=W)),N&gt;&gt;&gt;=7,V-=7}if(E.have+ge&gt;E.nlen+E.ndist){A.msg="invalid bit length repeat",E.mode=30;break}for(;ge--;)E.lens[E.have++]=P}}if(E.mode===30)break;if(E.lens[256]===0){A.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,K={bits:E.lenbits},X=a(l,E.lens,0,E.nlen,E.lencode,0,E.work,K),E.lenbits=K.bits,X){A.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,K={bits:E.distbits},X=a(u,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,K),E.distbits=K.bits,X){A.msg="invalid distances set",E.mode=30;break}if(E.mode=20,I===6)break e;case 20:E.mode=21;case 21:if(6&lt;=B&amp;&amp;258&lt;=z){A.next_out=U,A.avail_out=z,A.next_in=j,A.avail_in=B,E.hold=N,E.bits=V,s(A,ce),U=A.next_out,Q=A.output,z=A.avail_out,j=A.next_in,O=A.input,B=A.avail_in,N=E.hold,V=E.bits,E.mode===12&amp;&amp;(E.back=-1);break}for(E.back=0;G=(H=E.lencode[N&amp;(1&lt;&lt;E.lenbits)-1])&gt;&gt;&gt;16&amp;255,ee=65535&amp;H,!((W=H&gt;&gt;&gt;24)&lt;=V);){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(G&amp;&amp;(240&amp;G)==0){for(F=W,L=G,$=ee;G=(H=E.lencode[$+((N&amp;(1&lt;&lt;F+L)-1)&gt;&gt;F)])&gt;&gt;&gt;16&amp;255,ee=65535&amp;H,!(F+(W=H&gt;&gt;&gt;24)&lt;=V);){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}N&gt;&gt;&gt;=F,V-=F,E.back+=F}if(N&gt;&gt;&gt;=W,V-=W,E.back+=W,E.length=ee,G===0){E.mode=26;break}if(32&amp;G){E.back=-1,E.mode=12;break}if(64&amp;G){A.msg="invalid literal/length code",E.mode=30;break}E.extra=15&amp;G,E.mode=22;case 22:if(E.extra){for(R=E.extra;V&lt;R;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.length+=N&amp;(1&lt;&lt;E.extra)-1,N&gt;&gt;&gt;=E.extra,V-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;G=(H=E.distcode[N&amp;(1&lt;&lt;E.distbits)-1])&gt;&gt;&gt;16&amp;255,ee=65535&amp;H,!((W=H&gt;&gt;&gt;24)&lt;=V);){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if((240&amp;G)==0){for(F=W,L=G,$=ee;G=(H=E.distcode[$+((N&amp;(1&lt;&lt;F+L)-1)&gt;&gt;F)])&gt;&gt;&gt;16&amp;255,ee=65535&amp;H,!(F+(W=H&gt;&gt;&gt;24)&lt;=V);){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}N&gt;&gt;&gt;=F,V-=F,E.back+=F}if(N&gt;&gt;&gt;=W,V-=W,E.back+=W,64&amp;G){A.msg="invalid distance code",E.mode=30;break}E.offset=ee,E.extra=15&amp;G,E.mode=24;case 24:if(E.extra){for(R=E.extra;V&lt;R;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}E.offset+=N&amp;(1&lt;&lt;E.extra)-1,N&gt;&gt;&gt;=E.extra,V-=E.extra,E.back+=E.extra}if(E.offset&gt;E.dmax){A.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(z===0)break e;if(ge=ce-z,E.offset&gt;ge){if((ge=E.offset-ge)&gt;E.whave&amp;&amp;E.sane){A.msg="invalid distance too far back",E.mode=30;break}ae=ge&gt;E.wnext?(ge-=E.wnext,E.wsize-ge):E.wnext-ge,ge&gt;E.length&amp;&amp;(ge=E.length),Y=E.window}else Y=Q,ae=U-E.offset,ge=E.length;for(z&lt;ge&amp;&amp;(ge=z),z-=ge,E.length-=ge;Q[U++]=Y[ae++],--ge;);E.length===0&amp;&amp;(E.mode=21);break;case 26:if(z===0)break e;Q[U++]=E.length,z--,E.mode=21;break;case 27:if(E.wrap){for(;V&lt;32;){if(B===0)break e;B--,N|=O[j++]&lt;&lt;V,V+=8}if(ce-=z,A.total_out+=ce,E.total+=ce,ce&amp;&amp;(A.adler=E.check=E.flags?i(E.check,Q,ce,U-ce):o(E.check,Q,ce,U-ce)),ce=z,(E.flags?N:m(N))!==E.check){A.msg="incorrect data check",E.mode=30;break}V=N=0}E.mode=28;case 28:if(E.wrap&amp;&amp;E.flags){for(;V&lt;32;){if(B===0)break e;B--,N+=O[j++]&lt;&lt;V,V+=8}if(N!==(4294967295&amp;E.total)){A.msg="incorrect length check",E.mode=30;break}V=N=0}E.mode=29;case 29:X=1;break e;case 30:X=-3;break e;case 31:return-4;case 32:default:return c}return A.next_out=U,A.avail_out=z,A.next_in=j,A.avail_in=B,E.hold=N,E.bits=V,(E.wsize||ce!==A.avail_out&amp;&amp;E.mode&lt;30&amp;&amp;(E.mode&lt;27||I!==4))&amp;&amp;k(A,A.output,A.next_out,ce-A.avail_out)?(E.mode=31,-4):(re-=A.avail_in,ce-=A.avail_out,A.total_in+=re,A.total_out+=ce,E.total+=ce,E.wrap&amp;&amp;ce&amp;&amp;(A.adler=E.check=E.flags?i(E.check,Q,ce,A.next_out-ce):o(E.check,Q,ce,A.next_out-ce)),A.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(re==0&amp;&amp;ce===0||I===4)&amp;&amp;X===d&amp;&amp;(X=-5),X)},t.inflateEnd=function(A){if(!A||!A.state)return c;var I=A.state;return I.window&amp;&amp;(I.window=null),A.state=null,d},t.inflateGetHeader=function(A,I){var E;return A&amp;&amp;A.state?(2&amp;(E=A.state).wrap)==0?c:((E.head=I).done=!1,d):c},t.inflateSetDictionary=function(A,I){var E,O=I.length;return A&amp;&amp;A.state?(E=A.state).wrap!==0&amp;&amp;E.mode!==11?c:E.mode===11&amp;&amp;o(1,I,O,0)!==E.check?-3:k(A,I,O,O)?(E.mode=31,-4):(E.havedict=1,d):c},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,e,t){"use strict";var n=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(l,u,d,c,p,h,f,m){var g,v,b,C,x,y,S,T,w,k=m.bits,A=0,I=0,E=0,O=0,Q=0,j=0,U=0,B=0,z=0,N=0,V=null,re=0,ce=new n.Buf16(16),ge=new n.Buf16(16),ae=null,Y=0;for(A=0;A&lt;=15;A++)ce[A]=0;for(I=0;I&lt;c;I++)ce[u[d+I]]++;for(Q=k,O=15;1&lt;=O&amp;&amp;ce[O]===0;O--);if(O&lt;Q&amp;&amp;(Q=O),O===0)return p[h++]=20971520,p[h++]=20971520,m.bits=1,0;for(E=1;E&lt;O&amp;&amp;ce[E]===0;E++);for(Q&lt;E&amp;&amp;(Q=E),A=B=1;A&lt;=15;A++)if(B&lt;&lt;=1,(B-=ce[A])&lt;0)return-1;if(0&lt;B&amp;&amp;(l===0||O!==1))return-1;for(ge[1]=0,A=1;A&lt;15;A++)ge[A+1]=ge[A]+ce[A];for(I=0;I&lt;c;I++)u[d+I]!==0&amp;&amp;(f[ge[u[d+I]]++]=I);if(y=l===0?(V=ae=f,19):l===1?(V=o,re-=257,ae=i,Y-=257,256):(V=s,ae=a,-1),A=E,x=h,U=I=N=0,b=-1,C=(z=1&lt;&lt;(j=Q))-1,l===1&amp;&amp;852&lt;z||l===2&amp;&amp;592&lt;z)return 1;for(;;){for(S=A-U,w=f[I]&lt;y?(T=0,f[I]):f[I]&gt;y?(T=ae[Y+f[I]],V[re+f[I]]):(T=96,0),g=1&lt;&lt;A-U,E=v=1&lt;&lt;j;p[x+(N&gt;&gt;U)+(v-=g)]=S&lt;&lt;24|T&lt;&lt;16|w|0,v!==0;);for(g=1&lt;&lt;A-1;N&amp;g;)g&gt;&gt;=1;if(g!==0?(N&amp;=g-1,N+=g):N=0,I++,--ce[A]==0){if(A===O)break;A=u[d+f[I]]}if(Q&lt;A&amp;&amp;(N&amp;C)!==b){for(U===0&amp;&amp;(U=Q),x+=E,B=1&lt;&lt;(j=A-U);j+U&lt;O&amp;&amp;!((B-=ce[j+U])&lt;=0);)j++,B&lt;&lt;=1;if(z+=1&lt;&lt;j,l===1&amp;&amp;852&lt;z||l===2&amp;&amp;592&lt;z)return 1;p[b=N&amp;C]=Q&lt;&lt;24|j&lt;&lt;16|x-h|0}}return N!==0&amp;&amp;(p[x+N]=A-U&lt;&lt;24|64&lt;&lt;16|0),m.bits=Q,0}},{"../utils/common":41}],51:[function(r,e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,e,t){"use strict";var n=r("../utils/common"),o=0,i=1;function s(H){for(var J=H.length;0&lt;=--J;)H[J]=0}var a=0,l=29,u=256,d=u+1+l,c=30,p=19,h=2*d+1,f=15,m=16,g=7,v=256,b=16,C=17,x=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(d+2));s(k);var A=new Array(2*c);s(A);var I=new Array(512);s(I);var E=new Array(256);s(E);var O=new Array(l);s(O);var Q,j,U,B=new Array(c);function z(H,J,te,de,se){this.static_tree=H,this.extra_bits=J,this.extra_base=te,this.elems=de,this.max_length=se,this.has_stree=H&amp;&amp;H.length}function N(H,J){this.dyn_tree=H,this.max_code=0,this.stat_desc=J}function V(H){return H&lt;256?I[H]:I[256+(H&gt;&gt;&gt;7)]}function re(H,J){H.pending_buf[H.pending++]=255&amp;J,H.pending_buf[H.pending++]=J&gt;&gt;&gt;8&amp;255}function ce(H,J,te){H.bi_valid&gt;m-te?(H.bi_buf|=J&lt;&lt;H.bi_valid&amp;65535,re(H,H.bi_buf),H.bi_buf=J&gt;&gt;m-H.bi_valid,H.bi_valid+=te-m):(H.bi_buf|=J&lt;&lt;H.bi_valid&amp;65535,H.bi_valid+=te)}function ge(H,J,te){ce(H,te[2*J],te[2*J+1])}function ae(H,J){for(var te=0;te|=1&amp;H,H&gt;&gt;&gt;=1,te&lt;&lt;=1,0&lt;--J;);return te&gt;&gt;&gt;1}function Y(H,J,te){var de,se,be=new Array(f+1),Pe=0;for(de=1;de&lt;=f;de++)be[de]=Pe=Pe+te[de-1]&lt;&lt;1;for(se=0;se&lt;=J;se++){var ke=H[2*se+1];ke!==0&amp;&amp;(H[2*se]=ae(be[ke]++,ke))}}function W(H){var J;for(J=0;J&lt;d;J++)H.dyn_ltree[2*J]=0;for(J=0;J&lt;c;J++)H.dyn_dtree[2*J]=0;for(J=0;J&lt;p;J++)H.bl_tree[2*J]=0;H.dyn_ltree[2*v]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function G(H){8&lt;H.bi_valid?re(H,H.bi_buf):0&lt;H.bi_valid&amp;&amp;(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function ee(H,J,te,de){var se=2*J,be=2*te;return H[se]&lt;H[be]||H[se]===H[be]&amp;&amp;de[J]&lt;=de[te]}function F(H,J,te){for(var de=H.heap[te],se=te&lt;&lt;1;se&lt;=H.heap_len&amp;&amp;(se&lt;H.heap_len&amp;&amp;ee(J,H.heap[se+1],H.heap[se],H.depth)&amp;&amp;se++,!ee(J,de,H.heap[se],H.depth));)H.heap[te]=H.heap[se],te=se,se&lt;&lt;=1;H.heap[te]=de}function L(H,J,te){var de,se,be,Pe,ke=0;if(H.last_lit!==0)for(;de=H.pending_buf[H.d_buf+2*ke]&lt;&lt;8|H.pending_buf[H.d_buf+2*ke+1],se=H.pending_buf[H.l_buf+ke],ke++,de===0?ge(H,se,J):(ge(H,(be=E[se])+u+1,J),(Pe=y[be])!==0&amp;&amp;ce(H,se-=O[be],Pe),ge(H,be=V(--de),te),(Pe=S[be])!==0&amp;&amp;ce(H,de-=B[be],Pe)),ke&lt;H.last_lit;);ge(H,v,J)}function $(H,J){var te,de,se,be=J.dyn_tree,Pe=J.stat_desc.static_tree,ke=J.stat_desc.has_stree,Ie=J.stat_desc.elems,Ve=-1;for(H.heap_len=0,H.heap_max=h,te=0;te&lt;Ie;te++)be[2*te]!==0?(H.heap[++H.heap_len]=Ve=te,H.depth[te]=0):be[2*te+1]=0;for(;H.heap_len&lt;2;)be[2*(se=H.heap[++H.heap_len]=Ve&lt;2?++Ve:0)]=1,H.depth[se]=0,H.opt_len--,ke&amp;&amp;(H.static_len-=Pe[2*se+1]);for(J.max_code=Ve,te=H.heap_len&gt;&gt;1;1&lt;=te;te--)F(H,be,te);for(se=Ie;te=H.heap[1],H.heap[1]=H.heap[H.heap_len--],F(H,be,1),de=H.heap[1],H.heap[--H.heap_max]=te,H.heap[--H.heap_max]=de,be[2*se]=be[2*te]+be[2*de],H.depth[se]=(H.depth[te]&gt;=H.depth[de]?H.depth[te]:H.depth[de])+1,be[2*te+1]=be[2*de+1]=se,H.heap[1]=se++,F(H,be,1),2&lt;=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],function(Ae,lt){var vt,et,_e,xe,Ge,ct,bt=lt.dyn_tree,Be=lt.max_code,Ze=lt.stat_desc.static_tree,St=lt.stat_desc.has_stree,Ne=lt.stat_desc.extra_bits,Ce=lt.stat_desc.extra_base,Te=lt.stat_desc.max_length,ze=0;for(xe=0;xe&lt;=f;xe++)Ae.bl_count[xe]=0;for(bt[2*Ae.heap[Ae.heap_max]+1]=0,vt=Ae.heap_max+1;vt&lt;h;vt++)Te&lt;(xe=bt[2*bt[2*(et=Ae.heap[vt])+1]+1]+1)&amp;&amp;(xe=Te,ze++),bt[2*et+1]=xe,Be&lt;et||(Ae.bl_count[xe]++,Ge=0,Ce&lt;=et&amp;&amp;(Ge=Ne[et-Ce]),ct=bt[2*et],Ae.opt_len+=ct*(xe+Ge),St&amp;&amp;(Ae.static_len+=ct*(Ze[2*et+1]+Ge)));if(ze!==0){do{for(xe=Te-1;Ae.bl_count[xe]===0;)xe--;Ae.bl_count[xe]--,Ae.bl_count[xe+1]+=2,Ae.bl_count[Te]--,ze-=2}while(0&lt;ze);for(xe=Te;xe!==0;xe--)for(et=Ae.bl_count[xe];et!==0;)Be&lt;(_e=Ae.heap[--vt])||(bt[2*_e+1]!==xe&amp;&amp;(Ae.opt_len+=(xe-bt[2*_e+1])*bt[2*_e],bt[2*_e+1]=xe),et--)}}(H,J),Y(be,Ve,H.bl_count)}function P(H,J,te){var de,se,be=-1,Pe=J[1],ke=0,Ie=7,Ve=4;for(Pe===0&amp;&amp;(Ie=138,Ve=3),J[2*(te+1)+1]=65535,de=0;de&lt;=te;de++)se=Pe,Pe=J[2*(de+1)+1],++ke&lt;Ie&amp;&amp;se===Pe||(ke&lt;Ve?H.bl_tree[2*se]+=ke:se!==0?(se!==be&amp;&amp;H.bl_tree[2*se]++,H.bl_tree[2*b]++):ke&lt;=10?H.bl_tree[2*C]++:H.bl_tree[2*x]++,be=se,Ve=(ke=0)===Pe?(Ie=138,3):se===Pe?(Ie=6,3):(Ie=7,4))}function X(H,J,te){var de,se,be=-1,Pe=J[1],ke=0,Ie=7,Ve=4;for(Pe===0&amp;&amp;(Ie=138,Ve=3),de=0;de&lt;=te;de++)if(se=Pe,Pe=J[2*(de+1)+1],!(++ke&lt;Ie&amp;&amp;se===Pe)){if(ke&lt;Ve)for(;ge(H,se,H.bl_tree),--ke!=0;);else se!==0?(se!==be&amp;&amp;(ge(H,se,H.bl_tree),ke--),ge(H,b,H.bl_tree),ce(H,ke-3,2)):ke&lt;=10?(ge(H,C,H.bl_tree),ce(H,ke-3,3)):(ge(H,x,H.bl_tree),ce(H,ke-11,7));be=se,Ve=(ke=0)===Pe?(Ie=138,3):se===Pe?(Ie=6,3):(Ie=7,4)}}s(B);var K=!1;function R(H,J,te,de){ce(H,(a&lt;&lt;1)+(de?1:0),3),function(se,be,Pe,ke){G(se),ke&amp;&amp;(re(se,Pe),re(se,~Pe)),n.arraySet(se.pending_buf,se.window,be,Pe,se.pending),se.pending+=Pe}(H,J,te,!0)}t._tr_init=function(H){K||(function(){var J,te,de,se,be,Pe=new Array(f+1);for(se=de=0;se&lt;l-1;se++)for(O[se]=de,J=0;J&lt;1&lt;&lt;y[se];J++)E[de++]=se;for(E[de-1]=se,se=be=0;se&lt;16;se++)for(B[se]=be,J=0;J&lt;1&lt;&lt;S[se];J++)I[be++]=se;for(be&gt;&gt;=7;se&lt;c;se++)for(B[se]=be&lt;&lt;7,J=0;J&lt;1&lt;&lt;S[se]-7;J++)I[256+be++]=se;for(te=0;te&lt;=f;te++)Pe[te]=0;for(J=0;J&lt;=143;)k[2*J+1]=8,J++,Pe[8]++;for(;J&lt;=255;)k[2*J+1]=9,J++,Pe[9]++;for(;J&lt;=279;)k[2*J+1]=7,J++,Pe[7]++;for(;J&lt;=287;)k[2*J+1]=8,J++,Pe[8]++;for(Y(k,d+1,Pe),J=0;J&lt;c;J++)A[2*J+1]=5,A[2*J]=ae(J,5);Q=new z(k,y,u+1,d,f),j=new z(A,S,0,c,f),U=new z(new Array(0),T,0,p,g)}(),K=!0),H.l_desc=new N(H.dyn_ltree,Q),H.d_desc=new N(H.dyn_dtree,j),H.bl_desc=new N(H.bl_tree,U),H.bi_buf=0,H.bi_valid=0,W(H)},t._tr_stored_block=R,t._tr_flush_block=function(H,J,te,de){var se,be,Pe=0;0&lt;H.level?(H.strm.data_type===2&amp;&amp;(H.strm.data_type=function(ke){var Ie,Ve=4093624447;for(Ie=0;Ie&lt;=31;Ie++,Ve&gt;&gt;&gt;=1)if(1&amp;Ve&amp;&amp;ke.dyn_ltree[2*Ie]!==0)return o;if(ke.dyn_ltree[18]!==0||ke.dyn_ltree[20]!==0||ke.dyn_ltree[26]!==0)return i;for(Ie=32;Ie&lt;u;Ie++)if(ke.dyn_ltree[2*Ie]!==0)return i;return o}(H)),$(H,H.l_desc),$(H,H.d_desc),Pe=function(ke){var Ie;for(P(ke,ke.dyn_ltree,ke.l_desc.max_code),P(ke,ke.dyn_dtree,ke.d_desc.max_code),$(ke,ke.bl_desc),Ie=p-1;3&lt;=Ie&amp;&amp;ke.bl_tree[2*w[Ie]+1]===0;Ie--);return ke.opt_len+=3*(Ie+1)+5+5+4,Ie}(H),se=H.opt_len+3+7&gt;&gt;&gt;3,(be=H.static_len+3+7&gt;&gt;&gt;3)&lt;=se&amp;&amp;(se=be)):se=be=te+5,te+4&lt;=se&amp;&amp;J!==-1?R(H,J,te,de):H.strategy===4||be===se?(ce(H,2+(de?1:0),3),L(H,k,A)):(ce(H,4+(de?1:0),3),function(ke,Ie,Ve,Ae){var lt;for(ce(ke,Ie-257,5),ce(ke,Ve-1,5),ce(ke,Ae-4,4),lt=0;lt&lt;Ae;lt++)ce(ke,ke.bl_tree[2*w[lt]+1],3);X(ke,ke.dyn_ltree,Ie-1),X(ke,ke.dyn_dtree,Ve-1)}(H,H.l_desc.max_code+1,H.d_desc.max_code+1,Pe+1),L(H,H.dyn_ltree,H.dyn_dtree)),W(H),de&amp;&amp;G(H)},t._tr_tally=function(H,J,te){return H.pending_buf[H.d_buf+2*H.last_lit]=J&gt;&gt;&gt;8&amp;255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&amp;J,H.pending_buf[H.l_buf+H.last_lit]=255&amp;te,H.last_lit++,J===0?H.dyn_ltree[2*te]++:(H.matches++,J--,H.dyn_ltree[2*(E[te]+u+1)]++,H.dyn_dtree[2*V(J)]++),H.last_lit===H.lit_bufsize-1},t._tr_align=function(H){ce(H,2,3),ge(H,v,k),function(J){J.bi_valid===16?(re(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8&lt;=J.bi_valid&amp;&amp;(J.pending_buf[J.pending++]=255&amp;J.bi_buf,J.bi_buf&gt;&gt;=8,J.bi_valid-=8)}(H)}},{"../utils/common":41}],53:[function(r,e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,e,t){(function(n){(function(o,i){"use strict";if(!o.setImmediate){var s,a,l,u,d=1,c={},p=!1,h=o.document,f=Object.getPrototypeOf&amp;&amp;Object.getPrototypeOf(o);f=f&amp;&amp;f.setTimeout?f:o,s={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){g(b)})}:function(){if(o.postMessage&amp;&amp;!o.importScripts){var b=!0,C=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=C,b}}()?(u="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(b){o.postMessage(u+b,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(b){g(b.data)},function(b){l.port2.postMessage(b)}):h&amp;&amp;"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(b){var C=h.createElement("script");C.onreadystatechange=function(){g(b),C.onreadystatechange=null,a.removeChild(C),C=null},a.appendChild(C)}):function(b){setTimeout(g,0,b)},f.setImmediate=function(b){typeof b!="function"&amp;&amp;(b=new Function(""+b));for(var C=new Array(arguments.length-1),x=0;x&lt;C.length;x++)C[x]=arguments[x+1];var y={callback:b,args:C};return c[d]=y,s(d),d++},f.clearImmediate=m}function m(b){delete c[b]}function g(b){if(p)setTimeout(g,0,b);else{var C=c[b];if(C){p=!0;try{(function(x){var y=x.callback,S=x.args;switch(S.length){case 0:y();break;case 1:y(S[0]);break;case 2:y(S[0],S[1]);break;case 3:y(S[0],S[1],S[2]);break;default:y.apply(i,S)}})(C)}finally{m(b),p=!1}}}}function v(b){b.source===o&amp;&amp;typeof b.data=="string"&amp;&amp;b.data.indexOf(u)===0&amp;&amp;g(+b.data.slice(u.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var PX=Qt((LU,OU)=&gt;{(function(r,e){typeof LU=="object"&amp;&amp;typeof OU!="undefined"?OU.exports=e():typeof define=="function"&amp;&amp;define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self,r.CSSMatrix=e())})(LU,function(){"use strict";function r(g){var v=new p,b=Array.from(g);if(!b.every(function(Y){return!Number.isNaN(Y)}))throw TypeError('CSSMatrix: "'+g+'" must only have numbers.');if(b.length===16){var C=b[0],x=b[1],y=b[2],S=b[3],T=b[4],w=b[5],k=b[6],A=b[7],I=b[8],E=b[9],O=b[10],Q=b[11],j=b[12],U=b[13],B=b[14],z=b[15];v.m11=C,v.a=C,v.m21=T,v.c=T,v.m31=I,v.m41=j,v.e=j,v.m12=x,v.b=x,v.m22=w,v.d=w,v.m32=E,v.m42=U,v.f=U,v.m13=y,v.m23=k,v.m33=O,v.m43=B,v.m14=S,v.m24=A,v.m34=Q,v.m44=z}else if(b.length===6){var N=b[0],V=b[1],re=b[2],ce=b[3],ge=b[4],ae=b[5];v.m11=N,v.a=N,v.m12=V,v.b=V,v.m21=re,v.c=re,v.m22=ce,v.d=ce,v.m41=ge,v.e=ge,v.m42=ae,v.f=ae}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return v}function e(g){var v=Object.keys(new p);if(typeof g=="object"&amp;&amp;v.every(function(b){return b in g}))return r([g.m11,g.m12,g.m13,g.m14,g.m21,g.m22,g.m23,g.m24,g.m31,g.m32,g.m33,g.m34,g.m41,g.m42,g.m43,g.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(g)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function t(g){if(typeof g!="string")throw TypeError('CSSMatrix: "'+g+'" is not a string.');var v=String(g).replace(/\s/g,""),b=new p,C='CSSMatrix: invalid transform string "'+g+'"';return v.split(")").filter(function(x){return x}).forEach(function(x){var y=x.split("("),S=y[0],T=y[1];if(!T)throw TypeError(C);var w=T.split(",").map(function(ge){return ge.includes("rad")?parseFloat(ge)*(180/Math.PI):parseFloat(ge)}),k=w[0],A=w[1],I=w[2],E=w[3],O=[k,A,I],Q=[k,A,I,E];if(S==="perspective"&amp;&amp;k&amp;&amp;[A,I].every(function(ge){return ge===void 0}))b.m34=-1/k;else if(S.includes("matrix")&amp;&amp;[6,16].includes(w.length)&amp;&amp;w.every(function(ge){return!Number.isNaN(+ge)})){var j=w.map(function(ge){return Math.abs(ge)&lt;1e-6?0:ge});b=b.multiply(r(j))}else if(S==="translate3d"&amp;&amp;O.every(function(ge){return!Number.isNaN(+ge)}))b=b.translate(k,A,I);else if(S==="translate"&amp;&amp;k&amp;&amp;I===void 0)b=b.translate(k,A||0,0);else if(S==="rotate3d"&amp;&amp;Q.every(function(ge){return!Number.isNaN(+ge)})&amp;&amp;E)b=b.rotateAxisAngle(k,A,I,E);else if(S==="rotate"&amp;&amp;k&amp;&amp;[A,I].every(function(ge){return ge===void 0}))b=b.rotate(0,0,k);else if(S==="scale3d"&amp;&amp;O.every(function(ge){return!Number.isNaN(+ge)})&amp;&amp;O.some(function(ge){return ge!==1}))b=b.scale(k,A,I);else if(S==="scale"&amp;&amp;!Number.isNaN(k)&amp;&amp;k!==1&amp;&amp;I===void 0){var U=Number.isNaN(+A),B=U?k:A;b=b.scale(k,B,1)}else if(S==="skew"&amp;&amp;(k||!Number.isNaN(k)&amp;&amp;A)&amp;&amp;I===void 0)b=b.skew(k,A||0);else if(/[XYZ]/.test(S)&amp;&amp;k&amp;&amp;[A,I].every(function(ge){return ge===void 0})&amp;&amp;["translate","rotate","scale","skew"].some(function(ge){return S.includes(ge)}))if(["skewX","skewY"].includes(S))b=b[S](k);else{var z=S.replace(/[XYZ]/,""),N=S.replace(z,""),V=["X","Y","Z"].indexOf(N),re=z==="scale"?1:0,ce=[V===0?k:re,V===1?k:re,V===2?k:re];b=b[z].apply(b,ce)}else throw TypeError(C)}),b}function n(g,v){return v?[g.a,g.b,g.c,g.d,g.e,g.f]:[g.m11,g.m12,g.m13,g.m14,g.m21,g.m22,g.m23,g.m24,g.m31,g.m32,g.m33,g.m34,g.m41,g.m42,g.m43,g.m44]}function o(g,v,b){var C=new p;return C.m41=g,C.e=g,C.m42=v,C.f=v,C.m43=b,C}function i(g,v,b){var C=new p,x=Math.PI/180,y=g*x,S=v*x,T=b*x,w=Math.cos(y),k=-Math.sin(y),A=Math.cos(S),I=-Math.sin(S),E=Math.cos(T),O=-Math.sin(T),Q=A*E,j=-A*O;C.m11=Q,C.a=Q,C.m12=j,C.b=j,C.m13=I;var U=k*I*E+w*O;C.m21=U,C.c=U;var B=w*E-k*I*O;return C.m22=B,C.d=B,C.m23=-k*A,C.m31=k*O-w*I*E,C.m32=k*E+w*I*O,C.m33=w*A,C}function s(g,v,b,C){var x=new p,y=Math.sqrt(g*g+v*v+b*b);if(y===0)return x;var S=g/y,T=v/y,w=b/y,k=C*(Math.PI/360),A=Math.sin(k),I=Math.cos(k),E=A*A,O=S*S,Q=T*T,j=w*w,U=1-2*(Q+j)*E;x.m11=U,x.a=U;var B=2*(S*T*E+w*A*I);x.m12=B,x.b=B,x.m13=2*(S*w*E-T*A*I);var z=2*(T*S*E-w*A*I);x.m21=z,x.c=z;var N=1-2*(j+O)*E;return x.m22=N,x.d=N,x.m23=2*(T*w*E+S*A*I),x.m31=2*(w*S*E+T*A*I),x.m32=2*(w*T*E-S*A*I),x.m33=1-2*(O+Q)*E,x}function a(g,v,b){var C=new p;return C.m11=g,C.a=g,C.m22=v,C.d=v,C.m33=b,C}function l(g,v){var b=new p;if(g){var C=g*Math.PI/180,x=Math.tan(C);b.m21=x,b.c=x}if(v){var y=v*Math.PI/180,S=Math.tan(y);b.m12=S,b.b=S}return b}function u(g){return l(g,0)}function d(g){return l(0,g)}function c(g,v){var b=v.m11*g.m11+v.m12*g.m21+v.m13*g.m31+v.m14*g.m41,C=v.m11*g.m12+v.m12*g.m22+v.m13*g.m32+v.m14*g.m42,x=v.m11*g.m13+v.m12*g.m23+v.m13*g.m33+v.m14*g.m43,y=v.m11*g.m14+v.m12*g.m24+v.m13*g.m34+v.m14*g.m44,S=v.m21*g.m11+v.m22*g.m21+v.m23*g.m31+v.m24*g.m41,T=v.m21*g.m12+v.m22*g.m22+v.m23*g.m32+v.m24*g.m42,w=v.m21*g.m13+v.m22*g.m23+v.m23*g.m33+v.m24*g.m43,k=v.m21*g.m14+v.m22*g.m24+v.m23*g.m34+v.m24*g.m44,A=v.m31*g.m11+v.m32*g.m21+v.m33*g.m31+v.m34*g.m41,I=v.m31*g.m12+v.m32*g.m22+v.m33*g.m32+v.m34*g.m42,E=v.m31*g.m13+v.m32*g.m23+v.m33*g.m33+v.m34*g.m43,O=v.m31*g.m14+v.m32*g.m24+v.m33*g.m34+v.m34*g.m44,Q=v.m41*g.m11+v.m42*g.m21+v.m43*g.m31+v.m44*g.m41,j=v.m41*g.m12+v.m42*g.m22+v.m43*g.m32+v.m44*g.m42,U=v.m41*g.m13+v.m42*g.m23+v.m43*g.m33+v.m44*g.m43,B=v.m41*g.m14+v.m42*g.m24+v.m43*g.m34+v.m44*g.m44;return r([b,C,x,y,S,T,w,k,A,I,E,O,Q,j,U,B])}var p=function(){for(var v=[],b=arguments.length;b--;)v[b]=arguments[b];var C=this;if(C.a=1,C.b=0,C.c=0,C.d=1,C.e=0,C.f=0,C.m11=1,C.m12=0,C.m13=0,C.m14=0,C.m21=0,C.m22=1,C.m23=0,C.m24=0,C.m31=0,C.m32=0,C.m33=1,C.m34=0,C.m41=0,C.m42=0,C.m43=0,C.m44=1,v.length){var x=[16,6].some(function(y){return y===v.length})?v:v[0];return C.setMatrixValue(x)}return C},h={isIdentity:{configurable:!0},is2D:{configurable:!0}};h.isIdentity.get=function(){var g=this;return g.m11===1&amp;&amp;g.m12===0&amp;&amp;g.m13===0&amp;&amp;g.m14===0&amp;&amp;g.m21===0&amp;&amp;g.m22===1&amp;&amp;g.m23===0&amp;&amp;g.m24===0&amp;&amp;g.m31===0&amp;&amp;g.m32===0&amp;&amp;g.m33===1&amp;&amp;g.m34===0&amp;&amp;g.m41===0&amp;&amp;g.m42===0&amp;&amp;g.m43===0&amp;&amp;g.m44===1},h.is2D.get=function(){var g=this;return g.m31===0&amp;&amp;g.m32===0&amp;&amp;g.m33===1&amp;&amp;g.m34===0&amp;&amp;g.m43===0&amp;&amp;g.m44===1},p.prototype.setMatrixValue=function(v){var b=this;return typeof v=="string"&amp;&amp;v.length&amp;&amp;v!=="none"?t(v):[Array,Float64Array,Float32Array].some(function(C){return v instanceof C})?r(v):[p,DOMMatrix,Object].some(function(C){return v instanceof C})?e(v):b},p.prototype.toFloat32Array=function(v){return Float32Array.from(n(this,v))},p.prototype.toFloat64Array=function(v){return Float64Array.from(n(this,v))},p.prototype.toString=function(){var v=this,b=v.is2D,C=v.toFloat64Array(b).join(", "),x=b?"matrix":"matrix3d";return x+"("+C+")"},p.prototype.toJSON=function(){var v=this,b=v.is2D,C=v.isIdentity;return Object.assign({},v,{is2D:b,isIdentity:C})},p.prototype.multiply=function(v){return c(this,v)},p.prototype.translate=function(v,b,C){var x=v,y=b,S=C;return y===void 0&amp;&amp;(y=0),S===void 0&amp;&amp;(S=0),c(this,o(x,y,S))},p.prototype.scale=function(v,b,C){var x=v,y=b,S=C;return y===void 0&amp;&amp;(y=v),S===void 0&amp;&amp;(S=1),c(this,a(x,y,S))},p.prototype.rotate=function(v,b,C){var x=v,y=b||0,S=C||0;return typeof v=="number"&amp;&amp;b===void 0&amp;&amp;C===void 0&amp;&amp;(S=x,x=0,y=0),c(this,i(x,y,S))},p.prototype.rotateAxisAngle=function(v,b,C,x){if([v,b,C,x].some(function(y){return Number.isNaN(+y)}))throw new TypeError("CSSMatrix: expecting 4 values");return c(this,s(v,b,C,x))},p.prototype.skewX=function(v){return c(this,u(v))},p.prototype.skewY=function(v){return c(this,d(v))},p.prototype.skew=function(v,b){return c(this,l(v,b))},p.prototype.transformPoint=function(v){var b=this,C=b.m11*v.x+b.m21*v.y+b.m31*v.z+b.m41*v.w,x=b.m12*v.x+b.m22*v.y+b.m32*v.z+b.m42*v.w,y=b.m13*v.x+b.m23*v.y+b.m33*v.z+b.m43*v.w,S=b.m14*v.x+b.m24*v.y+b.m34*v.z+b.m44*v.w;return v instanceof DOMPoint?new DOMPoint(C,x,y,S):{x:C,y:x,z:y,w:S}},Object.defineProperties(p.prototype,h),Object.assign(p,{Translate:o,Rotate:i,RotateAxisAngle:s,Scale:a,SkewX:u,SkewY:d,Skew:l,Multiply:c,fromArray:r,fromMatrix:e,fromString:t,toArray:n});var f="1.0.3",m=f;return Object.assign(p,{Version:m}),p})});var IX=Qt((G_,AX)=&gt;{(function(r,e){typeof G_=="object"&amp;&amp;typeof AX!="undefined"?e(G_):typeof define=="function"&amp;&amp;define.amd?define(["exports"],e):(r=typeof globalThis!="undefined"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(G_,function(r){"use strict";var e=typeof Symbol=="function"&amp;&amp;typeof Symbol.iterator=="symbol"?Symbol:function(D){return"Symbol("+D+")"};function t(){}function n(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof globalThis!="undefined")return globalThis}var o=n();function i(D){return typeof D=="object"&amp;&amp;D!==null||typeof D=="function"}var s=t,a=Promise,l=Promise.prototype.then,u=Promise.resolve.bind(a),d=Promise.reject.bind(a);function c(D){return new a(D)}function p(D){return u(D)}function h(D){return d(D)}function f(D,M,Z){return l.call(D,M,Z)}function m(D,M,Z){f(f(D,M,Z),void 0,s)}function g(D,M){m(D,M)}function v(D,M){m(D,void 0,M)}function b(D,M,Z){return f(D,M,Z)}function C(D){f(D,void 0,s)}var x=function(){var D=o&amp;&amp;o.queueMicrotask;if(typeof D=="function")return D;var M=p(void 0);return function(Z){return f(M,Z)}}();function y(D,M,Z){if(typeof D!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(D,M,Z)}function S(D,M,Z){try{return p(y(D,M,Z))}catch(ye){return h(ye)}}var T=16384,w=function(){function D(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(D.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),D.prototype.push=function(M){var Z=this._back,ye=Z;Z._elements.length===T-1&amp;&amp;(ye={_elements:[],_next:void 0}),Z._elements.push(M),ye!==Z&amp;&amp;(this._back=ye,Z._next=ye),++this._size},D.prototype.shift=function(){var M=this._front,Z=M,ye=this._cursor,Le=ye+1,Ke=M._elements,ut=Ke[ye];return Le===T&amp;&amp;(Z=M._next,Le=0),--this._size,this._cursor=Le,M!==Z&amp;&amp;(this._front=Z),Ke[ye]=void 0,ut},D.prototype.forEach=function(M){for(var Z=this._cursor,ye=this._front,Le=ye._elements;(Z!==Le.length||ye._next!==void 0)&amp;&amp;!(Z===Le.length&amp;&amp;(ye=ye._next,Le=ye._elements,Z=0,Le.length===0));)M(Le[Z]),++Z},D.prototype.peek=function(){var M=this._front,Z=this._cursor;return M._elements[Z]},D}();function k(D,M){D._ownerReadableStream=M,M._reader=D,M._state==="readable"?O(D):M._state==="closed"?j(D):Q(D,M._storedError)}function A(D,M){var Z=D._ownerReadableStream;return Wd(Z,M)}function I(D){D._ownerReadableStream._state==="readable"?U(D,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):B(D,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),D._ownerReadableStream._reader=void 0,D._ownerReadableStream=void 0}function E(D){return new TypeError("Cannot "+D+" a stream using a released reader")}function O(D){D._closedPromise=c(function(M,Z){D._closedPromise_resolve=M,D._closedPromise_reject=Z})}function Q(D,M){O(D),U(D,M)}function j(D){O(D),z(D)}function U(D,M){D._closedPromise_reject!==void 0&amp;&amp;(C(D._closedPromise),D._closedPromise_reject(M),D._closedPromise_resolve=void 0,D._closedPromise_reject=void 0)}function B(D,M){Q(D,M)}function z(D){D._closedPromise_resolve!==void 0&amp;&amp;(D._closedPromise_resolve(void 0),D._closedPromise_resolve=void 0,D._closedPromise_reject=void 0)}var N=e("[[AbortSteps]]"),V=e("[[ErrorSteps]]"),re=e("[[CancelSteps]]"),ce=e("[[PullSteps]]"),ge=Number.isFinite||function(D){return typeof D=="number"&amp;&amp;isFinite(D)},ae=Math.trunc||function(D){return D&lt;0?Math.ceil(D):Math.floor(D)};function Y(D){return typeof D=="object"||typeof D=="function"}function W(D,M){if(D!==void 0&amp;&amp;!Y(D))throw new TypeError(M+" is not an object.")}function G(D,M){if(typeof D!="function")throw new TypeError(M+" is not a function.")}function ee(D){return typeof D=="object"&amp;&amp;D!==null||typeof D=="function"}function F(D,M){if(!ee(D))throw new TypeError(M+" is not an object.")}function L(D,M,Z){if(D===void 0)throw new TypeError("Parameter "+M+" is required in '"+Z+"'.")}function $(D,M,Z){if(D===void 0)throw new TypeError(M+" is required in '"+Z+"'.")}function P(D){return Number(D)}function X(D){return D===0?0:D}function K(D){return X(ae(D))}function R(D,M){var Z=0,ye=Number.MAX_SAFE_INTEGER,Le=Number(D);if(Le=X(Le),!ge(Le))throw new TypeError(M+" is not a finite number");if(Le=K(Le),Le&lt;Z||Le&gt;ye)throw new TypeError(M+" is outside the accepted range of "+Z+" to "+ye+", inclusive");return!ge(Le)||Le===0?0:Le}function H(D,M){if(!hm(D))throw new TypeError(M+" is not a ReadableStream.")}function J(D){return new Pe(D)}function te(D,M){D._reader._readRequests.push(M)}function de(D,M,Z){var ye=D._reader,Le=ye._readRequests.shift();Z?Le._closeSteps():Le._chunkSteps(M)}function se(D){return D._reader._readRequests.length}function be(D){var M=D._reader;return!(M===void 0||!ke(M))}var Pe=function(){function D(M){if(L(M,1,"ReadableStreamDefaultReader"),H(M,"First parameter"),fm(M))throw new TypeError("This stream has already been locked for exclusive reading by another reader");k(this,M),this._readRequests=new w}return Object.defineProperty(D.prototype,"closed",{get:function(){return ke(this)?this._closedPromise:h(Ve("closed"))},enumerable:!1,configurable:!0}),D.prototype.cancel=function(M){return M===void 0&amp;&amp;(M=void 0),ke(this)?this._ownerReadableStream===void 0?h(E("cancel")):A(this,M):h(Ve("cancel"))},D.prototype.read=function(){if(!ke(this))return h(Ve("read"));if(this._ownerReadableStream===void 0)return h(E("read from"));var M,Z,ye=c(function(Ke,ut){M=Ke,Z=ut}),Le={_chunkSteps:function(Ke){return M({value:Ke,done:!1})},_closeSteps:function(){return M({value:void 0,done:!0})},_errorSteps:function(Ke){return Z(Ke)}};return Ie(this,Le),ye},D.prototype.releaseLock=function(){if(!ke(this))throw Ve("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length&gt;0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},D}();Object.defineProperties(Pe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Pe.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ke(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_readRequests")?!1:D instanceof Pe}function Ie(D,M){var Z=D._ownerReadableStream;Z._disturbed=!0,Z._state==="closed"?M._closeSteps():Z._state==="errored"?M._errorSteps(Z._storedError):Z._readableStreamController[ce](M)}function Ve(D){return new TypeError("ReadableStreamDefaultReader.prototype."+D+" can only be used on a ReadableStreamDefaultReader")}var Ae,lt;typeof e.asyncIterator=="symbol"&amp;&amp;(lt=(Ae={},Ae[e.asyncIterator]=function(){return this},Ae),Object.defineProperty(lt,e.asyncIterator,{enumerable:!1}));var vt=function(){function D(M,Z){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=M,this._preventCancel=Z}return D.prototype.next=function(){var M=this,Z=function(){return M._nextSteps()};return this._ongoingPromise=this._ongoingPromise?b(this._ongoingPromise,Z,Z):Z(),this._ongoingPromise},D.prototype.return=function(M){var Z=this,ye=function(){return Z._returnSteps(M)};return this._ongoingPromise?b(this._ongoingPromise,ye,ye):ye()},D.prototype._nextSteps=function(){var M=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var Z=this._reader;if(Z._ownerReadableStream===void 0)return h(E("iterate"));var ye,Le,Ke=c(function(Lt,en){ye=Lt,Le=en}),ut={_chunkSteps:function(Lt){M._ongoingPromise=void 0,x(function(){return ye({value:Lt,done:!1})})},_closeSteps:function(){M._ongoingPromise=void 0,M._isFinished=!0,I(Z),ye({value:void 0,done:!0})},_errorSteps:function(Lt){M._ongoingPromise=void 0,M._isFinished=!0,I(Z),Le(Lt)}};return Ie(Z,ut),Ke},D.prototype._returnSteps=function(M){if(this._isFinished)return Promise.resolve({value:M,done:!0});this._isFinished=!0;var Z=this._reader;if(Z._ownerReadableStream===void 0)return h(E("finish iterating"));if(!this._preventCancel){var ye=A(Z,M);return I(Z),b(ye,function(){return{value:M,done:!0}})}return I(Z),p({value:M,done:!0})},D}(),et={next:function(){return xe(this)?this._asyncIteratorImpl.next():h(Ge("next"))},return:function(D){return xe(this)?this._asyncIteratorImpl.return(D):h(Ge("return"))}};lt!==void 0&amp;&amp;Object.setPrototypeOf(et,lt);function _e(D,M){var Z=J(D),ye=new vt(Z,M),Le=Object.create(et);return Le._asyncIteratorImpl=ye,Le}function xe(D){if(!i(D)||!Object.prototype.hasOwnProperty.call(D,"_asyncIteratorImpl"))return!1;try{return D._asyncIteratorImpl instanceof vt}catch(M){return!1}}function Ge(D){return new TypeError("ReadableStreamAsyncIterator."+D+" can only be used on a ReadableSteamAsyncIterator")}var ct=Number.isNaN||function(D){return D!==D};function bt(D){return D.slice()}function Be(D,M,Z,ye,Le){new Uint8Array(D).set(new Uint8Array(Z,ye,Le),M)}function Ze(D){return D}function St(D){return!1}function Ne(D,M,Z){if(D.slice)return D.slice(M,Z);var ye=Z-M,Le=new ArrayBuffer(ye);return Be(Le,0,D,M,ye),Le}function Ce(D){return!(typeof D!="number"||ct(D)||D&lt;0)}function Te(D){var M=Ne(D.buffer,D.byteOffset,D.byteOffset+D.byteLength);return new Uint8Array(M)}function ze(D){var M=D._queue.shift();return D._queueTotalSize-=M.size,D._queueTotalSize&lt;0&amp;&amp;(D._queueTotalSize=0),M.value}function wt(D,M,Z){if(!Ce(Z)||Z===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");D._queue.push({value:M,size:Z}),D._queueTotalSize+=Z}function dr(D){var M=D._queue.peek();return M.value}function Oe(D){D._queue=new w,D._queueTotalSize=0}var Fe=function(){function D(){throw new TypeError("Illegal constructor")}return Object.defineProperty(D.prototype,"view",{get:function(){if(!ir(this))throw um("view");return this._view},enumerable:!1,configurable:!0}),D.prototype.respond=function(M){if(!ir(this))throw um("respond");if(L(M,1,"respond"),M=R(M,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");St(this._view.buffer),xC(this._associatedReadableByteStreamController,M)},D.prototype.respondWithNewView=function(M){if(!ir(this))throw um("respondWithNewView");if(L(M,1,"respondWithNewView"),!ArrayBuffer.isView(M))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");St(M.buffer),wC(this._associatedReadableByteStreamController,M)},D}();Object.defineProperties(Fe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Fe.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var rt=function(){function D(){throw new TypeError("Illegal constructor")}return Object.defineProperty(D.prototype,"byobRequest",{get:function(){if(!Ct(this))throw dm("byobRequest");return SC(this)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"desiredSize",{get:function(){if(!Ct(this))throw dm("desiredSize");return iA(this)},enumerable:!1,configurable:!0}),D.prototype.close=function(){if(!Ct(this))throw dm("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var M=this._controlledReadableByteStream._state;if(M!=="readable")throw new TypeError("The stream (in "+M+" state) is not in the readable state and cannot be closed");Kl(this)},D.prototype.enqueue=function(M){if(!Ct(this))throw dm("enqueue");if(L(M,1,"enqueue"),!ArrayBuffer.isView(M))throw new TypeError("chunk must be an array buffer view");if(M.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(M.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var Z=this._controlledReadableByteStream._state;if(Z!=="readable")throw new TypeError("The stream (in "+Z+" state) is not in the readable state and cannot be enqueued to");ml(this,M)},D.prototype.error=function(M){if(M===void 0&amp;&amp;(M=void 0),!Ct(this))throw dm("error");gl(this,M)},D.prototype[re]=function(M){Dr(this),Oe(this);var Z=this._cancelAlgorithm(M);return Hd(this),Z},D.prototype[ce]=function(M){var Z=this._controlledReadableByteStream;if(this._queueTotalSize&gt;0){var ye=this._queue.shift();this._queueTotalSize-=ye.byteLength,qn(this);var Le=new Uint8Array(ye.buffer,ye.byteOffset,ye.byteLength);M._chunkSteps(Le);return}var Ke=this._autoAllocateChunkSize;if(Ke!==void 0){var ut=void 0;try{ut=new ArrayBuffer(Ke)}catch(en){M._errorSteps(en);return}var Lt={buffer:ut,bufferByteLength:Ke,byteOffset:0,byteLength:Ke,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Lt)}te(Z,M),hr(this)},D}();Object.defineProperties(rt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(rt.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ct(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_controlledReadableByteStream")?!1:D instanceof rt}function ir(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_associatedReadableByteStreamController")?!1:D instanceof Fe}function hr(D){var M=lm(D);if(!!M){if(D._pulling){D._pullAgain=!0;return}D._pulling=!0;var Z=D._pullAlgorithm();m(Z,function(){D._pulling=!1,D._pullAgain&amp;&amp;(D._pullAgain=!1,hr(D))},function(ye){gl(D,ye)})}}function Dr(D){wo(D),D._pendingPullIntos=new w}function Er(D,M){var Z=!1;D._state==="closed"&amp;&amp;(Z=!0);var ye=Ht(M);M.readerType==="default"?de(D,ye,Z):aA(D,ye,Z)}function Ht(D){var M=D.bytesFilled,Z=D.elementSize;return new D.viewConstructor(D.buffer,D.byteOffset,M/Z)}function yn(D,M,Z,ye){D._queue.push({buffer:M,byteOffset:Z,byteLength:ye}),D._queueTotalSize+=ye}function Yo(D,M){var Z=M.elementSize,ye=M.bytesFilled-M.bytesFilled%Z,Le=Math.min(D._queueTotalSize,M.byteLength-M.bytesFilled),Ke=M.bytesFilled+Le,ut=Ke-Ke%Z,Lt=Le,en=!1;ut&gt;ye&amp;&amp;(Lt=ut-M.bytesFilled,en=!0);for(var Cn=D._queue;Lt&gt;0;){var _n=Cn.peek(),Yn=Math.min(Lt,_n.byteLength),rs=M.byteOffset+M.bytesFilled;Be(M.buffer,rs,_n.buffer,_n.byteOffset,Yn),_n.byteLength===Yn?Cn.shift():(_n.byteOffset+=Yn,_n.byteLength-=Yn),D._queueTotalSize-=Yn,Dn(D,Yn,M),Lt-=Yn}return en}function Dn(D,M,Z){Z.bytesFilled+=M}function qn(D){D._queueTotalSize===0&amp;&amp;D._closeRequested?(Hd(D),hT(D._controlledReadableByteStream)):hr(D)}function wo(D){D._byobRequest!==null&amp;&amp;(D._byobRequest._associatedReadableByteStreamController=void 0,D._byobRequest._view=null,D._byobRequest=null)}function ro(D){for(;D._pendingPullIntos.length&gt;0;){if(D._queueTotalSize===0)return;var M=D._pendingPullIntos.peek();Yo(D,M)&amp;&amp;(Nu(D),Er(D._controlledReadableByteStream,M))}}function Ni(D,M,Z){var ye=D._controlledReadableByteStream,Le=1;M.constructor!==DataView&amp;&amp;(Le=M.constructor.BYTES_PER_ELEMENT);var Ke=M.constructor,ut=M.buffer,Lt={buffer:ut,bufferByteLength:ut.byteLength,byteOffset:M.byteOffset,byteLength:M.byteLength,bytesFilled:0,elementSize:Le,viewConstructor:Ke,readerType:"byob"};if(D._pendingPullIntos.length&gt;0){D._pendingPullIntos.push(Lt),sA(ye,Z);return}if(ye._state==="closed"){var en=new Ke(Lt.buffer,Lt.byteOffset,0);Z._closeSteps(en);return}if(D._queueTotalSize&gt;0){if(Yo(D,Lt)){var Cn=Ht(Lt);qn(D),Z._chunkSteps(Cn);return}if(D._closeRequested){var _n=new TypeError("Insufficient bytes to fill elements in the given buffer");gl(D,_n),Z._errorSteps(_n);return}}D._pendingPullIntos.push(Lt),sA(ye,Z),hr(D)}function Oo(D,M){var Z=D._controlledReadableByteStream;if(TC(Z))for(;lA(Z)&gt;0;){var ye=Nu(D);Er(Z,ye)}}function Ud(D,M,Z){if(Dn(D,M,Z),!(Z.bytesFilled&lt;Z.elementSize)){Nu(D);var ye=Z.bytesFilled%Z.elementSize;if(ye&gt;0){var Le=Z.byteOffset+Z.bytesFilled,Ke=Ne(Z.buffer,Le-ye,Le);yn(D,Ke,0,Ke.byteLength)}Z.bytesFilled-=ye,Er(D._controlledReadableByteStream,Z),ro(D)}}function zd(D,M){var Z=D._pendingPullIntos.peek();wo(D);var ye=D._controlledReadableByteStream._state;ye==="closed"?Oo(D):Ud(D,M,Z),hr(D)}function Nu(D){var M=D._pendingPullIntos.shift();return M}function lm(D){var M=D._controlledReadableByteStream;if(M._state!=="readable"||D._closeRequested||!D._started)return!1;if(be(M)&amp;&amp;se(M)&gt;0||TC(M)&amp;&amp;lA(M)&gt;0)return!0;var Z=iA(D);return Z&gt;0}function Hd(D){D._pullAlgorithm=void 0,D._cancelAlgorithm=void 0}function Kl(D){var M=D._controlledReadableByteStream;if(!(D._closeRequested||M._state!=="readable")){if(D._queueTotalSize&gt;0){D._closeRequested=!0;return}if(D._pendingPullIntos.length&gt;0){var Z=D._pendingPullIntos.peek();if(Z.bytesFilled&gt;0){var ye=new TypeError("Insufficient bytes to fill elements in the given buffer");throw gl(D,ye),ye}}Hd(D),hT(M)}}function ml(D,M){var Z=D._controlledReadableByteStream;if(!(D._closeRequested||Z._state!=="readable")){var ye=M.buffer,Le=M.byteOffset,Ke=M.byteLength,ut=ye;if(D._pendingPullIntos.length&gt;0){var Lt=D._pendingPullIntos.peek();St(Lt.buffer),Lt.buffer=Lt.buffer}if(wo(D),be(Z))if(se(Z)===0)yn(D,ut,Le,Ke);else{D._pendingPullIntos.length&gt;0&amp;&amp;Nu(D);var en=new Uint8Array(ut,Le,Ke);de(Z,en,!1)}else TC(Z)?(yn(D,ut,Le,Ke),ro(D)):yn(D,ut,Le,Ke);hr(D)}}function gl(D,M){var Z=D._controlledReadableByteStream;Z._state==="readable"&amp;&amp;(Dr(D),Oe(D),Hd(D),_7(Z,M))}function SC(D){if(D._byobRequest===null&amp;&amp;D._pendingPullIntos.length&gt;0){var M=D._pendingPullIntos.peek(),Z=new Uint8Array(M.buffer,M.byteOffset+M.bytesFilled,M.byteLength-M.bytesFilled),ye=Object.create(Fe.prototype);eT(ye,D,Z),D._byobRequest=ye}return D._byobRequest}function iA(D){var M=D._controlledReadableByteStream._state;return M==="errored"?null:M==="closed"?0:D._strategyHWM-D._queueTotalSize}function xC(D,M){var Z=D._pendingPullIntos.peek(),ye=D._controlledReadableByteStream._state;if(ye==="closed"){if(M!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(M===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(Z.bytesFilled+M&gt;Z.byteLength)throw new RangeError("bytesWritten out of range")}Z.buffer=Z.buffer,zd(D,M)}function wC(D,M){var Z=D._pendingPullIntos.peek(),ye=D._controlledReadableByteStream._state;if(ye==="closed"){if(M.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(M.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(Z.byteOffset+Z.bytesFilled!==M.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(Z.bufferByteLength!==M.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(Z.bytesFilled+M.byteLength&gt;Z.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var Le=M.byteLength;Z.buffer=M.buffer,zd(D,Le)}function Zw(D,M,Z,ye,Le,Ke,ut){M._controlledReadableByteStream=D,M._pullAgain=!1,M._pulling=!1,M._byobRequest=null,M._queue=M._queueTotalSize=void 0,Oe(M),M._closeRequested=!1,M._started=!1,M._strategyHWM=Ke,M._pullAlgorithm=ye,M._cancelAlgorithm=Le,M._autoAllocateChunkSize=ut,M._pendingPullIntos=new w,D._readableStreamController=M;var Lt=Z();m(p(Lt),function(){M._started=!0,hr(M)},function(en){gl(M,en)})}function Xv(D,M,Z){var ye=Object.create(rt.prototype),Le=function(){},Ke=function(){return p(void 0)},ut=function(){return p(void 0)};M.start!==void 0&amp;&amp;(Le=function(){return M.start(ye)}),M.pull!==void 0&amp;&amp;(Ke=function(){return M.pull(ye)}),M.cancel!==void 0&amp;&amp;(ut=function(en){return M.cancel(en)});var Lt=M.autoAllocateChunkSize;if(Lt===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Zw(D,ye,Le,Ke,ut,Z,Lt)}function eT(D,M,Z){D._associatedReadableByteStreamController=M,D._view=Z}function um(D){return new TypeError("ReadableStreamBYOBRequest.prototype."+D+" can only be used on a ReadableStreamBYOBRequest")}function dm(D){return new TypeError("ReadableByteStreamController.prototype."+D+" can only be used on a ReadableByteStreamController")}function tT(D){return new Qv(D)}function sA(D,M){D._reader._readIntoRequests.push(M)}function aA(D,M,Z){var ye=D._reader,Le=ye._readIntoRequests.shift();Z?Le._closeSteps(M):Le._chunkSteps(M)}function lA(D){return D._reader._readIntoRequests.length}function TC(D){var M=D._reader;return!(M===void 0||!mh(M))}var Qv=function(){function D(M){if(L(M,1,"ReadableStreamBYOBReader"),H(M,"First parameter"),fm(M))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ct(M._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");k(this,M),this._readIntoRequests=new w}return Object.defineProperty(D.prototype,"closed",{get:function(){return mh(this)?this._closedPromise:h(DC("closed"))},enumerable:!1,configurable:!0}),D.prototype.cancel=function(M){return M===void 0&amp;&amp;(M=void 0),mh(this)?this._ownerReadableStream===void 0?h(E("cancel")):A(this,M):h(DC("cancel"))},D.prototype.read=function(M){if(!mh(this))return h(DC("read"));if(!ArrayBuffer.isView(M))return h(new TypeError("view must be an array buffer view"));if(M.byteLength===0)return h(new TypeError("view must have non-zero byteLength"));if(M.buffer.byteLength===0)return h(new TypeError("view's buffer must have non-zero byteLength"));if(St(M.buffer),this._ownerReadableStream===void 0)return h(E("read from"));var Z,ye,Le=c(function(ut,Lt){Z=ut,ye=Lt}),Ke={_chunkSteps:function(ut){return Z({value:ut,done:!1})},_closeSteps:function(ut){return Z({value:ut,done:!0})},_errorSteps:function(ut){return ye(ut)}};return rT(this,M,Ke),Le},D.prototype.releaseLock=function(){if(!mh(this))throw DC("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length&gt;0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},D}();Object.defineProperties(Qv.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Qv.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function mh(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_readIntoRequests")?!1:D instanceof Qv}function rT(D,M,Z){var ye=D._ownerReadableStream;ye._disturbed=!0,ye._state==="errored"?Z._errorSteps(ye._storedError):Ni(ye._readableStreamController,M,Z)}function DC(D){return new TypeError("ReadableStreamBYOBReader.prototype."+D+" can only be used on a ReadableStreamBYOBReader")}function Jv(D,M){var Z=D.highWaterMark;if(Z===void 0)return M;if(ct(Z)||Z&lt;0)throw new RangeError("Invalid highWaterMark");return Z}function kC(D){var M=D.size;return M||function(){return 1}}function PC(D,M){W(D,M);var Z=D==null?void 0:D.highWaterMark,ye=D==null?void 0:D.size;return{highWaterMark:Z===void 0?void 0:P(Z),size:ye===void 0?void 0:uA(ye,M+" has member 'size' that")}}function uA(D,M){return G(D,M),function(Z){return P(D(Z))}}function uL(D,M){W(D,M);var Z=D==null?void 0:D.abort,ye=D==null?void 0:D.close,Le=D==null?void 0:D.start,Ke=D==null?void 0:D.type,ut=D==null?void 0:D.write;return{abort:Z===void 0?void 0:dA(Z,D,M+" has member 'abort' that"),close:ye===void 0?void 0:cA(ye,D,M+" has member 'close' that"),start:Le===void 0?void 0:dL(Le,D,M+" has member 'start' that"),write:ut===void 0?void 0:nT(ut,D,M+" has member 'write' that"),type:Ke}}function dA(D,M,Z){return G(D,Z),function(ye){return S(D,M,[ye])}}function cA(D,M,Z){return G(D,Z),function(){return S(D,M,[])}}function dL(D,M,Z){return G(D,Z),function(ye){return y(D,M,[ye])}}function nT(D,M,Z){return G(D,Z),function(ye,Le){return S(D,M,[ye,Le])}}function oT(D,M){if(!gh(D))throw new TypeError(M+" is not a WritableStream.")}function cL(D){if(typeof D!="object"||D===null)return!1;try{return typeof D.aborted=="boolean"}catch(M){return!1}}var pL=typeof AbortController=="function";function pA(){if(pL)return new AbortController}var Zv=function(){function D(M,Z){M===void 0&amp;&amp;(M={}),Z===void 0&amp;&amp;(Z={}),M===void 0?M=null:F(M,"First parameter");var ye=PC(Z,"Second parameter"),Le=uL(M,"First parameter");hA(this);var Ke=Le.type;if(Ke!==void 0)throw new RangeError("Invalid type is specified");var ut=kC(ye),Lt=Jv(ye,1);Cr(this,Le,Lt,ut)}return Object.defineProperty(D.prototype,"locked",{get:function(){if(!gh(this))throw vA("locked");return vh(this)},enumerable:!1,configurable:!0}),D.prototype.abort=function(M){return M===void 0&amp;&amp;(M=void 0),gh(this)?vh(this)?h(new TypeError("Cannot abort a stream that already has a writer")):Gd(this,M):h(vA("abort"))},D.prototype.close=function(){return gh(this)?vh(this)?h(new TypeError("Cannot close a stream that already has a writer")):Bu(this)?h(new TypeError("Cannot close an already-closing stream")):fA(this):h(vA("close"))},D.prototype.getWriter=function(){if(!gh(this))throw vA("getWriter");return iT(this)},D}();Object.defineProperties(Zv.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Zv.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function iT(D){return new Bi(D)}function AC(D,M,Z,ye,Le,Ke){Le===void 0&amp;&amp;(Le=1),Ke===void 0&amp;&amp;(Ke=function(){return 1});var ut=Object.create(Zv.prototype);hA(ut);var Lt=Object.create(Tt.prototype);return Dt(ut,Lt,D,M,Z,ye,Le,Ke),ut}function hA(D){D._state="writable",D._storedError=void 0,D._writer=void 0,D._writableStreamController=void 0,D._writeRequests=new w,D._inFlightWriteRequest=void 0,D._closeRequest=void 0,D._inFlightCloseRequest=void 0,D._pendingAbortRequest=void 0,D._backpressure=!1}function gh(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_writableStreamController")?!1:D instanceof Zv}function vh(D){return D._writer!==void 0}function Gd(D,M){var Z;if(D._state==="closed"||D._state==="errored")return p(void 0);D._writableStreamController._abortReason=M,(Z=D._writableStreamController._abortController)===null||Z===void 0||Z.abort();var ye=D._state;if(ye==="closed"||ye==="errored")return p(void 0);if(D._pendingAbortRequest!==void 0)return D._pendingAbortRequest._promise;var Le=!1;ye==="erroring"&amp;&amp;(Le=!0,M=void 0);var Ke=c(function(ut,Lt){D._pendingAbortRequest={_promise:void 0,_resolve:ut,_reject:Lt,_reason:M,_wasAlreadyErroring:Le}});return D._pendingAbortRequest._promise=Ke,Le||sT(D,M),Ke}function fA(D){var M=D._state;if(M==="closed"||M==="errored")return h(new TypeError("The stream (in "+M+" state) is not in the writable state and cannot be closed"));var Z=c(function(Le,Ke){var ut={_resolve:Le,_reject:Ke};D._closeRequest=ut}),ye=D._writer;return ye!==void 0&amp;&amp;D._backpressure&amp;&amp;M==="writable"&amp;&amp;SL(ye),oo(D._writableStreamController),Z}function hL(D){var M=c(function(Z,ye){var Le={_resolve:Z,_reject:ye};D._writeRequests.push(Le)});return M}function eb(D,M){var Z=D._state;if(Z==="writable"){sT(D,M);return}aT(D)}function sT(D,M){var Z=D._writableStreamController;D._state="erroring",D._storedError=M;var ye=D._writer;ye!==void 0&amp;&amp;Re(ye,M),!bh(D)&amp;&amp;Z._started&amp;&amp;aT(D)}function aT(D){D._state="errored",D._writableStreamController[V]();var M=D._storedError;if(D._writeRequests.forEach(function(Le){Le._reject(M)}),D._writeRequests=new w,D._pendingAbortRequest===void 0){IC(D);return}var Z=D._pendingAbortRequest;if(D._pendingAbortRequest=void 0,Z._wasAlreadyErroring){Z._reject(M),IC(D);return}var ye=D._writableStreamController[N](Z._reason);m(ye,function(){Z._resolve(),IC(D)},function(Le){Z._reject(Le),IC(D)})}function mA(D){D._inFlightWriteRequest._resolve(void 0),D._inFlightWriteRequest=void 0}function lT(D,M){D._inFlightWriteRequest._reject(M),D._inFlightWriteRequest=void 0,eb(D,M)}function fL(D){D._inFlightCloseRequest._resolve(void 0),D._inFlightCloseRequest=void 0;var M=D._state;M==="erroring"&amp;&amp;(D._storedError=void 0,D._pendingAbortRequest!==void 0&amp;&amp;(D._pendingAbortRequest._resolve(),D._pendingAbortRequest=void 0)),D._state="closed";var Z=D._writer;Z!==void 0&amp;&amp;x7(Z)}function mL(D,M){D._inFlightCloseRequest._reject(M),D._inFlightCloseRequest=void 0,D._pendingAbortRequest!==void 0&amp;&amp;(D._pendingAbortRequest._reject(M),D._pendingAbortRequest=void 0),eb(D,M)}function Bu(D){return!(D._closeRequest===void 0&amp;&amp;D._inFlightCloseRequest===void 0)}function bh(D){return!(D._inFlightWriteRequest===void 0&amp;&amp;D._inFlightCloseRequest===void 0)}function gL(D){D._inFlightCloseRequest=D._closeRequest,D._closeRequest=void 0}function vL(D){D._inFlightWriteRequest=D._writeRequests.shift()}function IC(D){D._closeRequest!==void 0&amp;&amp;(D._closeRequest._reject(D._storedError),D._closeRequest=void 0);var M=D._writer;M!==void 0&amp;&amp;yL(M,D._storedError)}function uT(D,M){var Z=D._writer;Z!==void 0&amp;&amp;M!==D._backpressure&amp;&amp;(M?sfe(Z):SL(Z)),D._backpressure=M}var Bi=function(){function D(M){if(L(M,1,"WritableStreamDefaultWriter"),oT(M,"First parameter"),vh(M))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=M,M._writer=this;var Z=M._state;if(Z==="writable")!Bu(M)&amp;&amp;M._backpressure?yA(this):w7(this),bA(this);else if(Z==="erroring")CL(this,M._storedError),bA(this);else if(Z==="closed")w7(this),ofe(this);else{var ye=M._storedError;CL(this,ye),S7(this,ye)}}return Object.defineProperty(D.prototype,"closed",{get:function(){return q(this)?this._closedPromise:h(nb("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"desiredSize",{get:function(){if(!q(this))throw nb("desiredSize");if(this._ownerWritableStream===void 0)throw dT("desiredSize");return He(this)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"ready",{get:function(){return q(this)?this._readyPromise:h(nb("ready"))},enumerable:!1,configurable:!0}),D.prototype.abort=function(M){return M===void 0&amp;&amp;(M=void 0),q(this)?this._ownerWritableStream===void 0?h(dT("abort")):ne(this,M):h(nb("abort"))},D.prototype.close=function(){if(!q(this))return h(nb("close"));var M=this._ownerWritableStream;return M===void 0?h(dT("close")):Bu(M)?h(new TypeError("Cannot close an already-closing stream")):le(this)},D.prototype.releaseLock=function(){if(!q(this))throw nb("releaseLock");var M=this._ownerWritableStream;M!==void 0&amp;&amp;pt(this)},D.prototype.write=function(M){return M===void 0&amp;&amp;(M=void 0),q(this)?this._ownerWritableStream===void 0?h(dT("write to")):tt(this,M):h(nb("write"))},D}();Object.defineProperties(Bi.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Bi.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function q(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_ownerWritableStream")?!1:D instanceof Bi}function ne(D,M){var Z=D._ownerWritableStream;return Gd(Z,M)}function le(D){var M=D._ownerWritableStream;return fA(M)}function ue(D){var M=D._ownerWritableStream,Z=M._state;return Bu(M)||Z==="closed"?p(void 0):Z==="errored"?h(M._storedError):le(D)}function Se(D,M){D._closedPromiseState==="pending"?yL(D,M):ife(D,M)}function Re(D,M){D._readyPromiseState==="pending"?T7(D,M):afe(D,M)}function He(D){var M=D._ownerWritableStream,Z=M._state;return Z==="errored"||Z==="erroring"?null:Z==="closed"?0:Yr(M._writableStreamController)}function pt(D){var M=D._ownerWritableStream,Z=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Re(D,Z),Se(D,Z),M._writer=void 0,D._ownerWritableStream=void 0}function tt(D,M){var Z=D._ownerWritableStream,ye=Z._writableStreamController,Le=vr(ye,M);if(Z!==D._ownerWritableStream)return h(dT("write to"));var Ke=Z._state;if(Ke==="errored")return h(Z._storedError);if(Bu(Z)||Ke==="closed")return h(new TypeError("The stream is closing or closed and cannot be written to"));if(Ke==="erroring")return h(Z._storedError);var ut=hL(Z);return Ci(ye,M,Le),ut}var It={},Tt=function(){function D(){throw new TypeError("Illegal constructor")}return Object.defineProperty(D.prototype,"abortReason",{get:function(){if(!yr(this))throw bL("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"signal",{get:function(){if(!yr(this))throw bL("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),D.prototype.error=function(M){if(M===void 0&amp;&amp;(M=void 0),!yr(this))throw bL("error");var Z=this._controlledWritableStream._state;Z==="writable"&amp;&amp;gA(this,M)},D.prototype[N]=function(M){var Z=this._abortAlgorithm(M);return no(this),Z},D.prototype[V]=function(){Oe(this)},D}();Object.defineProperties(Tt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(Tt.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function yr(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_controlledWritableStream")?!1:D instanceof Tt}function Dt(D,M,Z,ye,Le,Ke,ut,Lt){M._controlledWritableStream=D,D._writableStreamController=M,M._queue=void 0,M._queueTotalSize=void 0,Oe(M),M._abortReason=void 0,M._abortController=pA(),M._started=!1,M._strategySizeAlgorithm=Lt,M._strategyHWM=ut,M._writeAlgorithm=ye,M._closeAlgorithm=Le,M._abortAlgorithm=Ke;var en=rb(M);uT(D,en);var Cn=Z(),_n=p(Cn);m(_n,function(){M._started=!0,Ao(M)},function(Yn){M._started=!0,eb(D,Yn)})}function Cr(D,M,Z,ye){var Le=Object.create(Tt.prototype),Ke=function(){},ut=function(){return p(void 0)},Lt=function(){return p(void 0)},en=function(){return p(void 0)};M.start!==void 0&amp;&amp;(Ke=function(){return M.start(Le)}),M.write!==void 0&amp;&amp;(ut=function(Cn){return M.write(Cn,Le)}),M.close!==void 0&amp;&amp;(Lt=function(){return M.close()}),M.abort!==void 0&amp;&amp;(en=function(Cn){return M.abort(Cn)}),Dt(D,Le,Ke,ut,Lt,en,Z,ye)}function no(D){D._writeAlgorithm=void 0,D._closeAlgorithm=void 0,D._abortAlgorithm=void 0,D._strategySizeAlgorithm=void 0}function oo(D){wt(D,It,0),Ao(D)}function vr(D,M){try{return D._strategySizeAlgorithm(M)}catch(Z){return ql(D,Z),1}}function Yr(D){return D._strategyHWM-D._queueTotalSize}function Ci(D,M,Z){try{wt(D,M,Z)}catch(Ke){ql(D,Ke);return}var ye=D._controlledWritableStream;if(!Bu(ye)&amp;&amp;ye._state==="writable"){var Le=rb(D);uT(ye,Le)}Ao(D)}function Ao(D){var M=D._controlledWritableStream;if(!!D._started&amp;&amp;M._inFlightWriteRequest===void 0){var Z=M._state;if(Z==="erroring"){aT(M);return}if(D._queue.length!==0){var ye=dr(D);ye===It?Fs(D):tb(D,ye)}}}function ql(D,M){D._controlledWritableStream._state==="writable"&amp;&amp;gA(D,M)}function Fs(D){var M=D._controlledWritableStream;gL(M),ze(D);var Z=D._closeAlgorithm();no(D),m(Z,function(){fL(M)},function(ye){mL(M,ye)})}function tb(D,M){var Z=D._controlledWritableStream;vL(Z);var ye=D._writeAlgorithm(M);m(ye,function(){mA(Z);var Le=Z._state;if(ze(D),!Bu(Z)&amp;&amp;Le==="writable"){var Ke=rb(D);uT(Z,Ke)}Ao(D)},function(Le){Z._state==="writable"&amp;&amp;no(D),lT(Z,Le)})}function rb(D){var M=Yr(D);return M&lt;=0}function gA(D,M){var Z=D._controlledWritableStream;no(D),sT(Z,M)}function vA(D){return new TypeError("WritableStream.prototype."+D+" can only be used on a WritableStream")}function bL(D){return new TypeError("WritableStreamDefaultController.prototype."+D+" can only be used on a WritableStreamDefaultController")}function nb(D){return new TypeError("WritableStreamDefaultWriter.prototype."+D+" can only be used on a WritableStreamDefaultWriter")}function dT(D){return new TypeError("Cannot "+D+" a stream using a released writer")}function bA(D){D._closedPromise=c(function(M,Z){D._closedPromise_resolve=M,D._closedPromise_reject=Z,D._closedPromiseState="pending"})}function S7(D,M){bA(D),yL(D,M)}function ofe(D){bA(D),x7(D)}function yL(D,M){D._closedPromise_reject!==void 0&amp;&amp;(C(D._closedPromise),D._closedPromise_reject(M),D._closedPromise_resolve=void 0,D._closedPromise_reject=void 0,D._closedPromiseState="rejected")}function ife(D,M){S7(D,M)}function x7(D){D._closedPromise_resolve!==void 0&amp;&amp;(D._closedPromise_resolve(void 0),D._closedPromise_resolve=void 0,D._closedPromise_reject=void 0,D._closedPromiseState="resolved")}function yA(D){D._readyPromise=c(function(M,Z){D._readyPromise_resolve=M,D._readyPromise_reject=Z}),D._readyPromiseState="pending"}function CL(D,M){yA(D),T7(D,M)}function w7(D){yA(D),SL(D)}function T7(D,M){D._readyPromise_reject!==void 0&amp;&amp;(C(D._readyPromise),D._readyPromise_reject(M),D._readyPromise_resolve=void 0,D._readyPromise_reject=void 0,D._readyPromiseState="rejected")}function sfe(D){yA(D)}function afe(D,M){CL(D,M)}function SL(D){D._readyPromise_resolve!==void 0&amp;&amp;(D._readyPromise_resolve(void 0),D._readyPromise_resolve=void 0,D._readyPromise_reject=void 0,D._readyPromiseState="fulfilled")}var D7=typeof DOMException!="undefined"?DOMException:void 0;function lfe(D){if(!(typeof D=="function"||typeof D=="object"))return!1;try{return new D,!0}catch(M){return!1}}function ufe(){var D=function(Z,ye){this.message=Z||"",this.name=ye||"Error",Error.captureStackTrace&amp;&amp;Error.captureStackTrace(this,this.constructor)};return D.prototype=Object.create(Error.prototype),Object.defineProperty(D.prototype,"constructor",{value:D,writable:!0,configurable:!0}),D}var dfe=lfe(D7)?D7:ufe();function k7(D,M,Z,ye,Le,Ke){var ut=J(D),Lt=iT(M);D._disturbed=!0;var en=!1,Cn=p(void 0);return c(function(_n,Yn){var rs;if(Ke!==void 0){if(rs=function(){var _r=new dfe("Aborted","AbortError"),lo=[];ye||lo.push(function(){return M._state==="writable"?Gd(M,_r):p(void 0)}),Le||lo.push(function(){return D._state==="readable"?Wd(D,_r):p(void 0)}),Yl(function(){return Promise.all(lo.map(function(mi){return mi()}))},!0,_r)},Ke.aborted){rs();return}Ke.addEventListener("abort",rs)}function $d(){return c(function(_r,lo){function mi(Wc){Wc?_r():f(FC(),mi,lo)}mi(!1)})}function FC(){return en?p(!0):f(Lt._readyPromise,function(){return c(function(_r,lo){Ie(ut,{_chunkSteps:function(mi){Cn=f(tt(Lt,mi),void 0,t),_r(!1)},_closeSteps:function(){return _r(!0)},_errorSteps:lo})})})}if(ea(D,ut._closedPromise,function(_r){ye?yh(!0,_r):Yl(function(){return Gd(M,_r)},!0,_r)}),ea(M,Lt._closedPromise,function(_r){Le?yh(!0,_r):Yl(function(){return Wd(D,_r)},!0,_r)}),Gc(D,ut._closedPromise,function(){Z?yh():Yl(function(){return ue(Lt)})}),Bu(M)||M._state==="closed"){var mm=new TypeError("the destination writable stream closed before all data could be piped to it");Le?yh(!0,mm):Yl(function(){return Wd(D,mm)},!0,mm)}C($d());function Hc(){var _r=Cn;return f(Cn,function(){return _r!==Cn?Hc():void 0})}function ea(_r,lo,mi){_r._state==="errored"?mi(_r._storedError):v(lo,mi)}function Gc(_r,lo,mi){_r._state==="closed"?mi():g(lo,mi)}function Yl(_r,lo,mi){if(en)return;en=!0,M._state==="writable"&amp;&amp;!Bu(M)?g(Hc(),Wc):Wc();function Wc(){m(_r(),function(){return fi(lo,mi)},function(gm){return fi(!0,gm)})}}function yh(_r,lo){en||(en=!0,M._state==="writable"&amp;&amp;!Bu(M)?g(Hc(),function(){return fi(_r,lo)}):fi(_r,lo))}function fi(_r,lo){pt(Lt),I(ut),Ke!==void 0&amp;&amp;Ke.removeEventListener("abort",rs),_r?Yn(lo):_n(void 0)}})}var EC=function(){function D(){throw new TypeError("Illegal constructor")}return Object.defineProperty(D.prototype,"desiredSize",{get:function(){if(!CA(this))throw wA("desiredSize");return xL(this)},enumerable:!1,configurable:!0}),D.prototype.close=function(){if(!CA(this))throw wA("close");if(!_C(this))throw new TypeError("The stream is not in a state that permits close");pT(this)},D.prototype.enqueue=function(M){if(M===void 0&amp;&amp;(M=void 0),!CA(this))throw wA("enqueue");if(!_C(this))throw new TypeError("The stream is not in a state that permits enqueue");return xA(this,M)},D.prototype.error=function(M){if(M===void 0&amp;&amp;(M=void 0),!CA(this))throw wA("error");cm(this,M)},D.prototype[re]=function(M){Oe(this);var Z=this._cancelAlgorithm(M);return SA(this),Z},D.prototype[ce]=function(M){var Z=this._controlledReadableStream;if(this._queue.length&gt;0){var ye=ze(this);this._closeRequested&amp;&amp;this._queue.length===0?(SA(this),hT(Z)):cT(this),M._chunkSteps(ye)}else te(Z,M),cT(this)},D}();Object.defineProperties(EC.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(EC.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function CA(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_controlledReadableStream")?!1:D instanceof EC}function cT(D){var M=P7(D);if(!!M){if(D._pulling){D._pullAgain=!0;return}D._pulling=!0;var Z=D._pullAlgorithm();m(Z,function(){D._pulling=!1,D._pullAgain&amp;&amp;(D._pullAgain=!1,cT(D))},function(ye){cm(D,ye)})}}function P7(D){var M=D._controlledReadableStream;if(!_C(D)||!D._started)return!1;if(fm(M)&amp;&amp;se(M)&gt;0)return!0;var Z=xL(D);return Z&gt;0}function SA(D){D._pullAlgorithm=void 0,D._cancelAlgorithm=void 0,D._strategySizeAlgorithm=void 0}function pT(D){if(!!_C(D)){var M=D._controlledReadableStream;D._closeRequested=!0,D._queue.length===0&amp;&amp;(SA(D),hT(M))}}function xA(D,M){if(!!_C(D)){var Z=D._controlledReadableStream;if(fm(Z)&amp;&amp;se(Z)&gt;0)de(Z,M,!1);else{var ye=void 0;try{ye=D._strategySizeAlgorithm(M)}catch(Le){throw cm(D,Le),Le}try{wt(D,M,ye)}catch(Le){throw cm(D,Le),Le}}cT(D)}}function cm(D,M){var Z=D._controlledReadableStream;Z._state==="readable"&amp;&amp;(Oe(D),SA(D),_7(Z,M))}function xL(D){var M=D._controlledReadableStream._state;return M==="errored"?null:M==="closed"?0:D._strategyHWM-D._queueTotalSize}function cfe(D){return!P7(D)}function _C(D){var M=D._controlledReadableStream._state;return!D._closeRequested&amp;&amp;M==="readable"}function A7(D,M,Z,ye,Le,Ke,ut){M._controlledReadableStream=D,M._queue=void 0,M._queueTotalSize=void 0,Oe(M),M._started=!1,M._closeRequested=!1,M._pullAgain=!1,M._pulling=!1,M._strategySizeAlgorithm=ut,M._strategyHWM=Ke,M._pullAlgorithm=ye,M._cancelAlgorithm=Le,D._readableStreamController=M;var Lt=Z();m(p(Lt),function(){M._started=!0,cT(M)},function(en){cm(M,en)})}function pfe(D,M,Z,ye){var Le=Object.create(EC.prototype),Ke=function(){},ut=function(){return p(void 0)},Lt=function(){return p(void 0)};M.start!==void 0&amp;&amp;(Ke=function(){return M.start(Le)}),M.pull!==void 0&amp;&amp;(ut=function(){return M.pull(Le)}),M.cancel!==void 0&amp;&amp;(Lt=function(en){return M.cancel(en)}),A7(D,Le,Ke,ut,Lt,Z,ye)}function wA(D){return new TypeError("ReadableStreamDefaultController.prototype."+D+" can only be used on a ReadableStreamDefaultController")}function hfe(D,M){return Ct(D._readableStreamController)?mfe(D):ffe(D)}function ffe(D,M){var Z=J(D),ye=!1,Le=!1,Ke=!1,ut=!1,Lt,en,Cn,_n,Yn,rs=c(function(ea){Yn=ea});function $d(){if(ye)return Le=!0,p(void 0);ye=!0;var ea={_chunkSteps:function(Gc){x(function(){Le=!1;var Yl=Gc,yh=Gc;Ke||xA(Cn._readableStreamController,Yl),ut||xA(_n._readableStreamController,yh),ye=!1,Le&amp;&amp;$d()})},_closeSteps:function(){ye=!1,Ke||pT(Cn._readableStreamController),ut||pT(_n._readableStreamController),(!Ke||!ut)&amp;&amp;Yn(void 0)},_errorSteps:function(){ye=!1}};return Ie(Z,ea),p(void 0)}function FC(ea){if(Ke=!0,Lt=ea,ut){var Gc=bt([Lt,en]),Yl=Wd(D,Gc);Yn(Yl)}return rs}function mm(ea){if(ut=!0,en=ea,Ke){var Gc=bt([Lt,en]),Yl=Wd(D,Gc);Yn(Yl)}return rs}function Hc(){}return Cn=wL(Hc,$d,FC),_n=wL(Hc,$d,mm),v(Z._closedPromise,function(ea){cm(Cn._readableStreamController,ea),cm(_n._readableStreamController,ea),(!Ke||!ut)&amp;&amp;Yn(void 0)}),[Cn,_n]}function mfe(D){var M=J(D),Z=!1,ye=!1,Le=!1,Ke=!1,ut=!1,Lt,en,Cn,_n,Yn,rs=c(function(fi){Yn=fi});function $d(fi){v(fi._closedPromise,function(_r){fi===M&amp;&amp;(gl(Cn._readableStreamController,_r),gl(_n._readableStreamController,_r),(!Ke||!ut)&amp;&amp;Yn(void 0))})}function FC(){mh(M)&amp;&amp;(I(M),M=J(D),$d(M));var fi={_chunkSteps:function(_r){x(function(){ye=!1,Le=!1;var lo=_r,mi=_r;if(!Ke&amp;&amp;!ut)try{mi=Te(_r)}catch(Wc){gl(Cn._readableStreamController,Wc),gl(_n._readableStreamController,Wc),Yn(Wd(D,Wc));return}Ke||ml(Cn._readableStreamController,lo),ut||ml(_n._readableStreamController,mi),Z=!1,ye?Hc():Le&amp;&amp;ea()})},_closeSteps:function(){Z=!1,Ke||Kl(Cn._readableStreamController),ut||Kl(_n._readableStreamController),Cn._readableStreamController._pendingPullIntos.length&gt;0&amp;&amp;xC(Cn._readableStreamController,0),_n._readableStreamController._pendingPullIntos.length&gt;0&amp;&amp;xC(_n._readableStreamController,0),(!Ke||!ut)&amp;&amp;Yn(void 0)},_errorSteps:function(){Z=!1}};Ie(M,fi)}function mm(fi,_r){ke(M)&amp;&amp;(I(M),M=tT(D),$d(M));var lo=_r?_n:Cn,mi=_r?Cn:_n,Wc={_chunkSteps:function(gm){x(function(){ye=!1,Le=!1;var MC=_r?ut:Ke,mT=_r?Ke:ut;if(mT)MC||wC(lo._readableStreamController,gm);else{var $7=void 0;try{$7=Te(gm)}catch(DL){gl(lo._readableStreamController,DL),gl(mi._readableStreamController,DL),Yn(Wd(D,DL));return}MC||wC(lo._readableStreamController,gm),ml(mi._readableStreamController,$7)}Z=!1,ye?Hc():Le&amp;&amp;ea()})},_closeSteps:function(gm){Z=!1;var MC=_r?ut:Ke,mT=_r?Ke:ut;MC||Kl(lo._readableStreamController),mT||Kl(mi._readableStreamController),gm!==void 0&amp;&amp;(MC||wC(lo._readableStreamController,gm),!mT&amp;&amp;mi._readableStreamController._pendingPullIntos.length&gt;0&amp;&amp;xC(mi._readableStreamController,0)),(!MC||!mT)&amp;&amp;Yn(void 0)},_errorSteps:function(){Z=!1}};rT(M,fi,Wc)}function Hc(){if(Z)return ye=!0,p(void 0);Z=!0;var fi=SC(Cn._readableStreamController);return fi===null?FC():mm(fi._view,!1),p(void 0)}function ea(){if(Z)return Le=!0,p(void 0);Z=!0;var fi=SC(_n._readableStreamController);return fi===null?FC():mm(fi._view,!0),p(void 0)}function Gc(fi){if(Ke=!0,Lt=fi,ut){var _r=bt([Lt,en]),lo=Wd(D,_r);Yn(lo)}return rs}function Yl(fi){if(ut=!0,en=fi,Ke){var _r=bt([Lt,en]),lo=Wd(D,_r);Yn(lo)}return rs}function yh(){}return Cn=E7(yh,Hc,Gc),_n=E7(yh,ea,Yl),$d(M),[Cn,_n]}function gfe(D,M){W(D,M);var Z=D,ye=Z==null?void 0:Z.autoAllocateChunkSize,Le=Z==null?void 0:Z.cancel,Ke=Z==null?void 0:Z.pull,ut=Z==null?void 0:Z.start,Lt=Z==null?void 0:Z.type;return{autoAllocateChunkSize:ye===void 0?void 0:R(ye,M+" has member 'autoAllocateChunkSize' that"),cancel:Le===void 0?void 0:vfe(Le,Z,M+" has member 'cancel' that"),pull:Ke===void 0?void 0:bfe(Ke,Z,M+" has member 'pull' that"),start:ut===void 0?void 0:yfe(ut,Z,M+" has member 'start' that"),type:Lt===void 0?void 0:Cfe(Lt,M+" has member 'type' that")}}function vfe(D,M,Z){return G(D,Z),function(ye){return S(D,M,[ye])}}function bfe(D,M,Z){return G(D,Z),function(ye){return S(D,M,[ye])}}function yfe(D,M,Z){return G(D,Z),function(ye){return y(D,M,[ye])}}function Cfe(D,M){if(D=""+D,D!=="bytes")throw new TypeError(M+" '"+D+"' is not a valid enumeration value for ReadableStreamType");return D}function Sfe(D,M){W(D,M);var Z=D==null?void 0:D.mode;return{mode:Z===void 0?void 0:xfe(Z,M+" has member 'mode' that")}}function xfe(D,M){if(D=""+D,D!=="byob")throw new TypeError(M+" '"+D+"' is not a valid enumeration value for ReadableStreamReaderMode");return D}function wfe(D,M){W(D,M);var Z=D==null?void 0:D.preventCancel;return{preventCancel:Boolean(Z)}}function I7(D,M){W(D,M);var Z=D==null?void 0:D.preventAbort,ye=D==null?void 0:D.preventCancel,Le=D==null?void 0:D.preventClose,Ke=D==null?void 0:D.signal;return Ke!==void 0&amp;&amp;Tfe(Ke,M+" has member 'signal' that"),{preventAbort:Boolean(Z),preventCancel:Boolean(ye),preventClose:Boolean(Le),signal:Ke}}function Tfe(D,M){if(!cL(D))throw new TypeError(M+" is not an AbortSignal.")}function Dfe(D,M){W(D,M);var Z=D==null?void 0:D.readable;$(Z,"readable","ReadableWritablePair"),H(Z,M+" has member 'readable' that");var ye=D==null?void 0:D.writable;return $(ye,"writable","ReadableWritablePair"),oT(ye,M+" has member 'writable' that"),{readable:Z,writable:ye}}var pm=function(){function D(M,Z){M===void 0&amp;&amp;(M={}),Z===void 0&amp;&amp;(Z={}),M===void 0?M=null:F(M,"First parameter");var ye=PC(Z,"Second parameter"),Le=gfe(M,"First parameter");if(TL(this),Le.type==="bytes"){if(ye.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var Ke=Jv(ye,0);Xv(this,Le,Ke)}else{var ut=kC(ye),Ke=Jv(ye,1);pfe(this,Le,Ke,ut)}}return Object.defineProperty(D.prototype,"locked",{get:function(){if(!hm(this))throw ob("locked");return fm(this)},enumerable:!1,configurable:!0}),D.prototype.cancel=function(M){return M===void 0&amp;&amp;(M=void 0),hm(this)?fm(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):Wd(this,M):h(ob("cancel"))},D.prototype.getReader=function(M){if(M===void 0&amp;&amp;(M=void 0),!hm(this))throw ob("getReader");var Z=Sfe(M,"First parameter");return Z.mode===void 0?J(this):tT(this)},D.prototype.pipeThrough=function(M,Z){if(Z===void 0&amp;&amp;(Z={}),!hm(this))throw ob("pipeThrough");L(M,1,"pipeThrough");var ye=Dfe(M,"First parameter"),Le=I7(Z,"Second parameter");if(fm(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(vh(ye.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var Ke=k7(this,ye.writable,Le.preventClose,Le.preventAbort,Le.preventCancel,Le.signal);return C(Ke),ye.readable},D.prototype.pipeTo=function(M,Z){if(Z===void 0&amp;&amp;(Z={}),!hm(this))return h(ob("pipeTo"));if(M===void 0)return h("Parameter 1 is required in 'pipeTo'.");if(!gh(M))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var ye;try{ye=I7(Z,"Second parameter")}catch(Le){return h(Le)}return fm(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):vh(M)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):k7(this,M,ye.preventClose,ye.preventAbort,ye.preventCancel,ye.signal)},D.prototype.tee=function(){if(!hm(this))throw ob("tee");var M=hfe(this);return bt(M)},D.prototype.values=function(M){if(M===void 0&amp;&amp;(M=void 0),!hm(this))throw ob("values");var Z=wfe(M,"First parameter");return _e(this,Z.preventCancel)},D}();Object.defineProperties(pm.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(pm.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&amp;&amp;Object.defineProperty(pm.prototype,e.asyncIterator,{value:pm.prototype.values,writable:!0,configurable:!0});function wL(D,M,Z,ye,Le){ye===void 0&amp;&amp;(ye=1),Le===void 0&amp;&amp;(Le=function(){return 1});var Ke=Object.create(pm.prototype);TL(Ke);var ut=Object.create(EC.prototype);return A7(Ke,ut,D,M,Z,ye,Le),Ke}function E7(D,M,Z){var ye=Object.create(pm.prototype);TL(ye);var Le=Object.create(rt.prototype);return Zw(ye,Le,D,M,Z,0,void 0),ye}function TL(D){D._state="readable",D._reader=void 0,D._storedError=void 0,D._disturbed=!1}function hm(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_readableStreamController")?!1:D instanceof pm}function fm(D){return D._reader!==void 0}function Wd(D,M){if(D._disturbed=!0,D._state==="closed")return p(void 0);if(D._state==="errored")return h(D._storedError);hT(D);var Z=D._reader;Z!==void 0&amp;&amp;mh(Z)&amp;&amp;(Z._readIntoRequests.forEach(function(Le){Le._closeSteps(void 0)}),Z._readIntoRequests=new w);var ye=D._readableStreamController[re](M);return b(ye,t)}function hT(D){D._state="closed";var M=D._reader;M!==void 0&amp;&amp;(z(M),ke(M)&amp;&amp;(M._readRequests.forEach(function(Z){Z._closeSteps()}),M._readRequests=new w))}function _7(D,M){D._state="errored",D._storedError=M;var Z=D._reader;Z!==void 0&amp;&amp;(U(Z,M),ke(Z)?(Z._readRequests.forEach(function(ye){ye._errorSteps(M)}),Z._readRequests=new w):(Z._readIntoRequests.forEach(function(ye){ye._errorSteps(M)}),Z._readIntoRequests=new w))}function ob(D){return new TypeError("ReadableStream.prototype."+D+" can only be used on a ReadableStream")}function F7(D,M){W(D,M);var Z=D==null?void 0:D.highWaterMark;return $(Z,"highWaterMark","QueuingStrategyInit"),{highWaterMark:P(Z)}}var M7=function(D){return D.byteLength};try{Object.defineProperty(M7,"name",{value:"size",configurable:!0})}catch(D){}var TA=function(){function D(M){L(M,1,"ByteLengthQueuingStrategy"),M=F7(M,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=M.highWaterMark}return Object.defineProperty(D.prototype,"highWaterMark",{get:function(){if(!B7(this))throw N7("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"size",{get:function(){if(!B7(this))throw N7("size");return M7},enumerable:!1,configurable:!0}),D}();Object.defineProperties(TA.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(TA.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function N7(D){return new TypeError("ByteLengthQueuingStrategy.prototype."+D+" can only be used on a ByteLengthQueuingStrategy")}function B7(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_byteLengthQueuingStrategyHighWaterMark")?!1:D instanceof TA}var R7=function(){return 1};try{Object.defineProperty(R7,"name",{value:"size",configurable:!0})}catch(D){}var DA=function(){function D(M){L(M,1,"CountQueuingStrategy"),M=F7(M,"First parameter"),this._countQueuingStrategyHighWaterMark=M.highWaterMark}return Object.defineProperty(D.prototype,"highWaterMark",{get:function(){if(!O7(this))throw L7("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"size",{get:function(){if(!O7(this))throw L7("size");return R7},enumerable:!1,configurable:!0}),D}();Object.defineProperties(DA.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(DA.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function L7(D){return new TypeError("CountQueuingStrategy.prototype."+D+" can only be used on a CountQueuingStrategy")}function O7(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_countQueuingStrategyHighWaterMark")?!1:D instanceof DA}function kfe(D,M){W(D,M);var Z=D==null?void 0:D.flush,ye=D==null?void 0:D.readableType,Le=D==null?void 0:D.start,Ke=D==null?void 0:D.transform,ut=D==null?void 0:D.writableType;return{flush:Z===void 0?void 0:Pfe(Z,D,M+" has member 'flush' that"),readableType:ye,start:Le===void 0?void 0:Afe(Le,D,M+" has member 'start' that"),transform:Ke===void 0?void 0:Ife(Ke,D,M+" has member 'transform' that"),writableType:ut}}function Pfe(D,M,Z){return G(D,Z),function(ye){return S(D,M,[ye])}}function Afe(D,M,Z){return G(D,Z),function(ye){return y(D,M,[ye])}}function Ife(D,M,Z){return G(D,Z),function(ye,Le){return S(D,M,[ye,Le])}}var kA=function(){function D(M,Z,ye){M===void 0&amp;&amp;(M={}),Z===void 0&amp;&amp;(Z={}),ye===void 0&amp;&amp;(ye={}),M===void 0&amp;&amp;(M=null);var Le=PC(Z,"Second parameter"),Ke=PC(ye,"Third parameter"),ut=kfe(M,"First parameter");if(ut.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(ut.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Lt=Jv(Ke,0),en=kC(Ke),Cn=Jv(Le,1),_n=kC(Le),Yn,rs=c(function($d){Yn=$d});Efe(this,rs,Cn,_n,Lt,en),Ffe(this,ut),ut.start!==void 0?Yn(ut.start(this._transformStreamController)):Yn(void 0)}return Object.defineProperty(D.prototype,"readable",{get:function(){if(!U7(this))throw W7("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"writable",{get:function(){if(!U7(this))throw W7("writable");return this._writable},enumerable:!1,configurable:!0}),D}();Object.defineProperties(kA.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(kA.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function Efe(D,M,Z,ye,Le,Ke){function ut(){return M}function Lt(rs){return Bfe(D,rs)}function en(rs){return Rfe(D,rs)}function Cn(){return Lfe(D)}D._writable=AC(ut,Lt,Cn,en,Z,ye);function _n(){return Ofe(D)}function Yn(rs){return AA(D,rs),p(void 0)}D._readable=wL(ut,_n,Yn,Le,Ke),D._backpressure=void 0,D._backpressureChangePromise=void 0,D._backpressureChangePromise_resolve=void 0,IA(D,!0),D._transformStreamController=void 0}function U7(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_transformStreamController")?!1:D instanceof kA}function PA(D,M){cm(D._readable._readableStreamController,M),AA(D,M)}function AA(D,M){z7(D._transformStreamController),ql(D._writable._writableStreamController,M),D._backpressure&amp;&amp;IA(D,!1)}function IA(D,M){D._backpressureChangePromise!==void 0&amp;&amp;D._backpressureChangePromise_resolve(),D._backpressureChangePromise=c(function(Z){D._backpressureChangePromise_resolve=Z}),D._backpressure=M}var fT=function(){function D(){throw new TypeError("Illegal constructor")}return Object.defineProperty(D.prototype,"desiredSize",{get:function(){if(!EA(this))throw _A("desiredSize");var M=this._controlledTransformStream._readable._readableStreamController;return xL(M)},enumerable:!1,configurable:!0}),D.prototype.enqueue=function(M){if(M===void 0&amp;&amp;(M=void 0),!EA(this))throw _A("enqueue");H7(this,M)},D.prototype.error=function(M){if(M===void 0&amp;&amp;(M=void 0),!EA(this))throw _A("error");Mfe(this,M)},D.prototype.terminate=function(){if(!EA(this))throw _A("terminate");Nfe(this)},D}();Object.defineProperties(fT.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&amp;&amp;Object.defineProperty(fT.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function EA(D){return!i(D)||!Object.prototype.hasOwnProperty.call(D,"_controlledTransformStream")?!1:D instanceof fT}function _fe(D,M,Z,ye){M._controlledTransformStream=D,D._transformStreamController=M,M._transformAlgorithm=Z,M._flushAlgorithm=ye}function Ffe(D,M){var Z=Object.create(fT.prototype),ye=function(Ke){try{return H7(Z,Ke),p(void 0)}catch(ut){return h(ut)}},Le=function(){return p(void 0)};M.transform!==void 0&amp;&amp;(ye=function(Ke){return M.transform(Ke,Z)}),M.flush!==void 0&amp;&amp;(Le=function(){return M.flush(Z)}),_fe(D,Z,ye,Le)}function z7(D){D._transformAlgorithm=void 0,D._flushAlgorithm=void 0}function H7(D,M){var Z=D._controlledTransformStream,ye=Z._readable._readableStreamController;if(!_C(ye))throw new TypeError("Readable side is not in a state that permits enqueue");try{xA(ye,M)}catch(Ke){throw AA(Z,Ke),Z._readable._storedError}var Le=cfe(ye);Le!==Z._backpressure&amp;&amp;IA(Z,!0)}function Mfe(D,M){PA(D._controlledTransformStream,M)}function G7(D,M){var Z=D._transformAlgorithm(M);return b(Z,void 0,function(ye){throw PA(D._controlledTransformStream,ye),ye})}function Nfe(D){var M=D._controlledTransformStream,Z=M._readable._readableStreamController;pT(Z);var ye=new TypeError("TransformStream terminated");AA(M,ye)}function Bfe(D,M){var Z=D._transformStreamController;if(D._backpressure){var ye=D._backpressureChangePromise;return b(ye,function(){var Le=D._writable,Ke=Le._state;if(Ke==="erroring")throw Le._storedError;return G7(Z,M)})}return G7(Z,M)}function Rfe(D,M){return PA(D,M),p(void 0)}function Lfe(D){var M=D._readable,Z=D._transformStreamController,ye=Z._flushAlgorithm();return z7(Z),b(ye,function(){if(M._state==="errored")throw M._storedError;pT(M._readableStreamController)},function(Le){throw PA(D,Le),M._storedError})}function Ofe(D){return IA(D,!1),D._backpressureChangePromise}function _A(D){return new TypeError("TransformStreamDefaultController.prototype."+D+" can only be used on a TransformStreamDefaultController")}function W7(D){return new TypeError("TransformStream.prototype."+D+" can only be used on a TransformStream")}r.ByteLengthQueuingStrategy=TA,r.CountQueuingStrategy=DA,r.ReadableByteStreamController=rt,r.ReadableStream=pm,r.ReadableStreamBYOBReader=Qv,r.ReadableStreamBYOBRequest=Fe,r.ReadableStreamDefaultController=EC,r.ReadableStreamDefaultReader=Pe,r.TransformStream=kA,r.TransformStreamDefaultController=fT,r.WritableStream=Zv,r.WritableStreamDefaultController=Tt,r.WritableStreamDefaultWriter=Bi,Object.defineProperty(r,"__esModule",{value:!0})})});var EX=Qt(()=&gt;{});var _X=Qt(()=&gt;{});var FX=Qt((exports,module)=&gt;{(function(e,t){typeof exports=="object"&amp;&amp;typeof module=="object"?module.exports=t():typeof define=="function"&amp;&amp;define.amd?define("pdfjs-dist/build/pdf",[],t):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=t():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=t()})(globalThis,()=&gt;(()=&gt;{var __webpack_modules__=[,(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=J,e.arraysToBytes=te,e.assert=ge,e.bytesToString=R,e.createPromiseCapability=St,e.createValidAbsoluteUrl=Y,e.escapeString=et,e.getModificationDate=Ze,e.getVerbosityLevel=N,e.info=V,e.isArrayBuffer=bt,e.isArrayEqual=Be,e.isAscii=_e,e.objectFromMap=be,e.objectSize=se,e.setVerbosityLevel=z,e.shadow=W,e.string32=de,e.stringToBytes=H,e.stringToPDFString=vt,e.stringToUTF16BEString=xe,e.stringToUTF8String=Ge,e.unreachable=ce,e.utf8StringToString=ct,e.warn=re,t(2);let n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;let o=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=o;let i=1.35;e.LINE_FACTOR=i;let s=.35;e.LINE_DESCENT_FACTOR=s;let a={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=a;let l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=l;let u="pdfjs_internal_editor_";e.AnnotationEditorPrefix=u;let d={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=d;let c={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=c;let p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=p;let h={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=h;let f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=f;let m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=m;let g={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=g;let v={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=v;let b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=b;let C={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=C;let x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=x;let y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=y;let S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=S;let T={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=T;let w={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=w;let k={O:"PageOpen",C:"PageClose"};e.PageActionEventType=k;let A={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=A;let I={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=I;let E={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=E;let O={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=O;let Q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Q;let j={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=j;let U={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=U;let B=E.WARNINGS;function z(Ne){Number.isInteger(Ne)&amp;&amp;(B=Ne)}function N(){return B}function V(Ne){B&gt;=E.INFOS&amp;&amp;console.log(`Info: ${Ne}`)}function re(Ne){B&gt;=E.WARNINGS&amp;&amp;console.log(`Warning: ${Ne}`)}function ce(Ne){throw new Error(Ne)}function ge(Ne,Ce){Ne||ce(Ce)}function ae(Ne){if(!Ne)return!1;switch(Ne.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Y(Ne){let Ce=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null,Te=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!Ne)return null;try{if(Te&amp;&amp;typeof Ne=="string"){if(Te.addDefaultProtocol&amp;&amp;Ne.startsWith("www.")){let wt=Ne.match(/\./g);wt&amp;&amp;wt.length&gt;=2&amp;&amp;(Ne=`http://${Ne}`)}if(Te.tryConvertEncoding)try{Ne=Ge(Ne)}catch(wt){}}let ze=Ce?new URL(Ne,Ce):new URL(Ne);if(ae(ze))return ze}catch(ze){}return null}function W(Ne,Ce,Te){return Object.defineProperty(Ne,Ce,{value:Te,enumerable:!0,configurable:!0,writable:!1}),Te}let G=function(){function Ce(Te,ze){this.constructor===Ce&amp;&amp;ce("Cannot initialize BaseException."),this.message=Te,this.name=ze}return Ce.prototype=new Error,Ce.constructor=Ce,Ce}();e.BaseException=G;class ee extends G{constructor(Ce,Te){super(Ce,"PasswordException"),this.code=Te}}e.PasswordException=ee;class F extends G{constructor(Ce,Te){super(Ce,"UnknownErrorException"),this.details=Te}}e.UnknownErrorException=F;class L extends G{constructor(Ce){super(Ce,"InvalidPDFException")}}e.InvalidPDFException=L;class $ extends G{constructor(Ce){super(Ce,"MissingPDFException")}}e.MissingPDFException=$;class P extends G{constructor(Ce,Te){super(Ce,"UnexpectedResponseException"),this.status=Te}}e.UnexpectedResponseException=P;class X extends G{constructor(Ce){super(Ce,"FormatError")}}e.FormatError=X;class K extends G{constructor(Ce){super(Ce,"AbortException")}}e.AbortException=K;function R(Ne){(typeof Ne!="object"||Ne===null||Ne.length===void 0)&amp;&amp;ce("Invalid argument for bytesToString");let Ce=Ne.length,Te=8192;if(Ce&lt;Te)return String.fromCharCode.apply(null,Ne);let ze=[];for(let wt=0;wt&lt;Ce;wt+=Te){let dr=Math.min(wt+Te,Ce),Oe=Ne.subarray(wt,dr);ze.push(String.fromCharCode.apply(null,Oe))}return ze.join("")}function H(Ne){typeof Ne!="string"&amp;&amp;ce("Invalid argument for stringToBytes");let Ce=Ne.length,Te=new Uint8Array(Ce);for(let ze=0;ze&lt;Ce;++ze)Te[ze]=Ne.charCodeAt(ze)&amp;255;return Te}function J(Ne){if(Ne.length!==void 0)return Ne.length;if(Ne.byteLength!==void 0)return Ne.byteLength;ce("Invalid argument for arrayByteLength")}function te(Ne){let Ce=Ne.length;if(Ce===1&amp;&amp;Ne[0]instanceof Uint8Array)return Ne[0];let Te=0;for(let dr=0;dr&lt;Ce;dr++)Te+=J(Ne[dr]);let ze=0,wt=new Uint8Array(Te);for(let dr=0;dr&lt;Ce;dr++){let Oe=Ne[dr];Oe instanceof Uint8Array||(typeof Oe=="string"?Oe=H(Oe):Oe=new Uint8Array(Oe));let Fe=Oe.byteLength;wt.set(Oe,ze),ze+=Fe}return wt}function de(Ne){return String.fromCharCode(Ne&gt;&gt;24&amp;255,Ne&gt;&gt;16&amp;255,Ne&gt;&gt;8&amp;255,Ne&amp;255)}function se(Ne){return Object.keys(Ne).length}function be(Ne){let Ce=Object.create(null);for(let[Te,ze]of Ne)Ce[Te]=ze;return Ce}function Pe(){let Ne=new Uint8Array(4);return Ne[0]=1,new Uint32Array(Ne.buffer,0,1)[0]===1}function ke(){try{return new Function(""),!0}catch(Ne){return!1}}class Ie{static get isLittleEndian(){return W(this,"isLittleEndian",Pe())}static get isEvalSupported(){return W(this,"isEvalSupported",ke())}static get isOffscreenCanvasSupported(){return W(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}e.FeatureTest=Ie;let Ve=[...Array(256).keys()].map(Ne=&gt;Ne.toString(16).padStart(2,"0"));class Ae{static makeHexColor(Ce,Te,ze){return`#${Ve[Ce]}${Ve[Te]}${Ve[ze]}`}static scaleMinMax(Ce,Te){let ze;Ce[0]?(Ce[0]&lt;0&amp;&amp;(ze=Te[0],Te[0]=Te[1],Te[1]=ze),Te[0]*=Ce[0],Te[1]*=Ce[0],Ce[3]&lt;0&amp;&amp;(ze=Te[2],Te[2]=Te[3],Te[3]=ze),Te[2]*=Ce[3],Te[3]*=Ce[3]):(ze=Te[0],Te[0]=Te[2],Te[2]=ze,ze=Te[1],Te[1]=Te[3],Te[3]=ze,Ce[1]&lt;0&amp;&amp;(ze=Te[2],Te[2]=Te[3],Te[3]=ze),Te[2]*=Ce[1],Te[3]*=Ce[1],Ce[2]&lt;0&amp;&amp;(ze=Te[0],Te[0]=Te[1],Te[1]=ze),Te[0]*=Ce[2],Te[1]*=Ce[2]),Te[0]+=Ce[4],Te[1]+=Ce[4],Te[2]+=Ce[5],Te[3]+=Ce[5]}static transform(Ce,Te){return[Ce[0]*Te[0]+Ce[2]*Te[1],Ce[1]*Te[0]+Ce[3]*Te[1],Ce[0]*Te[2]+Ce[2]*Te[3],Ce[1]*Te[2]+Ce[3]*Te[3],Ce[0]*Te[4]+Ce[2]*Te[5]+Ce[4],Ce[1]*Te[4]+Ce[3]*Te[5]+Ce[5]]}static applyTransform(Ce,Te){let ze=Ce[0]*Te[0]+Ce[1]*Te[2]+Te[4],wt=Ce[0]*Te[1]+Ce[1]*Te[3]+Te[5];return[ze,wt]}static applyInverseTransform(Ce,Te){let ze=Te[0]*Te[3]-Te[1]*Te[2],wt=(Ce[0]*Te[3]-Ce[1]*Te[2]+Te[2]*Te[5]-Te[4]*Te[3])/ze,dr=(-Ce[0]*Te[1]+Ce[1]*Te[0]+Te[4]*Te[1]-Te[5]*Te[0])/ze;return[wt,dr]}static getAxialAlignedBoundingBox(Ce,Te){let ze=Ae.applyTransform(Ce,Te),wt=Ae.applyTransform(Ce.slice(2,4),Te),dr=Ae.applyTransform([Ce[0],Ce[3]],Te),Oe=Ae.applyTransform([Ce[2],Ce[1]],Te);return[Math.min(ze[0],wt[0],dr[0],Oe[0]),Math.min(ze[1],wt[1],dr[1],Oe[1]),Math.max(ze[0],wt[0],dr[0],Oe[0]),Math.max(ze[1],wt[1],dr[1],Oe[1])]}static inverseTransform(Ce){let Te=Ce[0]*Ce[3]-Ce[1]*Ce[2];return[Ce[3]/Te,-Ce[1]/Te,-Ce[2]/Te,Ce[0]/Te,(Ce[2]*Ce[5]-Ce[4]*Ce[3])/Te,(Ce[4]*Ce[1]-Ce[5]*Ce[0])/Te]}static apply3dTransform(Ce,Te){return[Ce[0]*Te[0]+Ce[1]*Te[1]+Ce[2]*Te[2],Ce[3]*Te[0]+Ce[4]*Te[1]+Ce[5]*Te[2],Ce[6]*Te[0]+Ce[7]*Te[1]+Ce[8]*Te[2]]}static singularValueDecompose2dScale(Ce){let Te=[Ce[0],Ce[2],Ce[1],Ce[3]],ze=Ce[0]*Te[0]+Ce[1]*Te[2],wt=Ce[0]*Te[1]+Ce[1]*Te[3],dr=Ce[2]*Te[0]+Ce[3]*Te[2],Oe=Ce[2]*Te[1]+Ce[3]*Te[3],Fe=(ze+Oe)/2,rt=Math.sqrt((ze+Oe)**2-4*(ze*Oe-dr*wt))/2,Ct=Fe+rt||1,ir=Fe-rt||1;return[Math.sqrt(Ct),Math.sqrt(ir)]}static normalizeRect(Ce){let Te=Ce.slice(0);return Ce[0]&gt;Ce[2]&amp;&amp;(Te[0]=Ce[2],Te[2]=Ce[0]),Ce[1]&gt;Ce[3]&amp;&amp;(Te[1]=Ce[3],Te[3]=Ce[1]),Te}static intersect(Ce,Te){let ze=Math.max(Math.min(Ce[0],Ce[2]),Math.min(Te[0],Te[2])),wt=Math.min(Math.max(Ce[0],Ce[2]),Math.max(Te[0],Te[2]));if(ze&gt;wt)return null;let dr=Math.max(Math.min(Ce[1],Ce[3]),Math.min(Te[1],Te[3])),Oe=Math.min(Math.max(Ce[1],Ce[3]),Math.max(Te[1],Te[3]));return dr&gt;Oe?null:[ze,dr,wt,Oe]}static bezierBoundingBox(Ce,Te,ze,wt,dr,Oe,Fe,rt){let Ct=[],ir=[[],[]],hr,Dr,Er,Ht,yn,Yo,Dn,qn;for(let Oo=0;Oo&lt;2;++Oo){if(Oo===0?(Dr=6*Ce-12*ze+6*dr,hr=-3*Ce+9*ze-9*dr+3*Fe,Er=3*ze-3*Ce):(Dr=6*Te-12*wt+6*Oe,hr=-3*Te+9*wt-9*Oe+3*rt,Er=3*wt-3*Te),Math.abs(hr)&lt;1e-12){if(Math.abs(Dr)&lt;1e-12)continue;Ht=-Er/Dr,0&lt;Ht&amp;&amp;Ht&lt;1&amp;&amp;Ct.push(Ht);continue}Dn=Dr*Dr-4*Er*hr,qn=Math.sqrt(Dn),!(Dn&lt;0)&amp;&amp;(yn=(-Dr+qn)/(2*hr),0&lt;yn&amp;&amp;yn&lt;1&amp;&amp;Ct.push(yn),Yo=(-Dr-qn)/(2*hr),0&lt;Yo&amp;&amp;Yo&lt;1&amp;&amp;Ct.push(Yo))}let wo=Ct.length,ro,Ni=wo;for(;wo--;)Ht=Ct[wo],ro=1-Ht,ir[0][wo]=ro*ro*ro*Ce+3*ro*ro*Ht*ze+3*ro*Ht*Ht*dr+Ht*Ht*Ht*Fe,ir[1][wo]=ro*ro*ro*Te+3*ro*ro*Ht*wt+3*ro*Ht*Ht*Oe+Ht*Ht*Ht*rt;return ir[0][Ni]=Ce,ir[1][Ni]=Te,ir[0][Ni+1]=Fe,ir[1][Ni+1]=rt,ir[0].length=ir[1].length=Ni+2,[Math.min(...ir[0]),Math.min(...ir[1]),Math.max(...ir[0]),Math.max(...ir[1])]}}e.Util=Ae;let lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(Ne){if(Ne[0]&gt;="\xEF"){let Te;if(Ne[0]==="\xFE"&amp;&amp;Ne[1]==="\xFF"?Te="utf-16be":Ne[0]==="\xFF"&amp;&amp;Ne[1]==="\xFE"?Te="utf-16le":Ne[0]==="\xEF"&amp;&amp;Ne[1]==="\xBB"&amp;&amp;Ne[2]==="\xBF"&amp;&amp;(Te="utf-8"),Te)try{let ze=new TextDecoder(Te,{fatal:!0}),wt=H(Ne);return ze.decode(wt)}catch(ze){re(`stringToPDFString: "${ze}".`)}}let Ce=[];for(let Te=0,ze=Ne.length;Te&lt;ze;Te++){let wt=lt[Ne.charCodeAt(Te)];Ce.push(wt?String.fromCharCode(wt):Ne.charAt(Te))}return Ce.join("")}function et(Ne){return Ne.replace(/([()\\\n\r])/g,Ce=&gt;Ce===`
`?"\\n":Ce==="\r"?"\\r":`\\${Ce}`)}function _e(Ne){return/^[\x00-\x7F]*$/.test(Ne)}function xe(Ne){let Ce=["\xFE\xFF"];for(let Te=0,ze=Ne.length;Te&lt;ze;Te++){let wt=Ne.charCodeAt(Te);Ce.push(String.fromCharCode(wt&gt;&gt;8&amp;255),String.fromCharCode(wt&amp;255))}return Ce.join("")}function Ge(Ne){return decodeURIComponent(escape(Ne))}function ct(Ne){return unescape(encodeURIComponent(Ne))}function bt(Ne){return typeof Ne=="object"&amp;&amp;Ne!==null&amp;&amp;Ne.byteLength!==void 0}function Be(Ne,Ce){if(Ne.length!==Ce.length)return!1;for(let Te=0,ze=Ne.length;Te&lt;ze;Te++)if(Ne[Te]!==Ce[Te])return!1;return!0}function Ze(){let Ne=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:new Date;return[Ne.getUTCFullYear().toString(),(Ne.getUTCMonth()+1).toString().padStart(2,"0"),Ne.getUTCDate().toString().padStart(2,"0"),Ne.getUTCHours().toString().padStart(2,"0"),Ne.getUTCMinutes().toString().padStart(2,"0"),Ne.getUTCSeconds().toString().padStart(2,"0")].join("")}function St(){let Ne=Object.create(null),Ce=!1;return Object.defineProperty(Ne,"settled",{get(){return Ce}}),Ne.promise=new Promise(function(Te,ze){Ne.resolve=function(wt){Ce=!0,Te(wt)},Ne.reject=function(wt){Ce=!0,ze(wt)}}),Ne}},(r,e,t)=&gt;{"use strict";var n=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!n.isNodeJS||(globalThis.btoa=function(i){return Buffer.from(i,"binary").toString("base64")})}(),function(){globalThis.atob||!n.isNodeJS||(globalThis.atob=function(i){return Buffer.from(i,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!n.isNodeJS||(globalThis.DOMMatrix=PX())}(),function(){globalThis.ReadableStream||!n.isNodeJS||(globalThis.ReadableStream=IX().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(76)}(),function(){globalThis.structuredClone||t(86)}())},(r,e)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;let t=typeof process=="object"&amp;&amp;process+""=="[object process]"&amp;&amp;!process.versions.nw&amp;&amp;!(process.versions.electron&amp;&amp;process.type&amp;&amp;process.type!=="browser");e.isNodeJS=t},(r,e,t)=&gt;{t(5);var n=t(75);r.exports=n("Array","at")},(r,e,t)=&gt;{"use strict";var n=t(6),o=t(41),i=t(65),s=t(63),a=t(70);n({target:"Array",proto:!0},{at:function(u){var d=o(this),c=i(d),p=s(u),h=p&gt;=0?p:c+p;return h&lt;0||h&gt;=c?void 0:d[h]}}),a("at")},(r,e,t)=&gt;{var n=t(7),o=t(8).f,i=t(45),s=t(49),a=t(39),l=t(57),u=t(69);r.exports=function(d,c){var p=d.target,h=d.global,f=d.stat,m,g,v,b,C,x;if(h?g=n:f?g=n[p]||a(p,{}):g=(n[p]||{}).prototype,g)for(v in c){if(C=c[v],d.dontCallGetSet?(x=o(g,v),b=x&amp;&amp;x.value):b=g[v],m=u(h?v:p+(f?".":"#")+v,d.forced),!m&amp;&amp;b!==void 0){if(typeof C==typeof b)continue;l(C,b)}(d.sham||b&amp;&amp;b.sham)&amp;&amp;i(C,"sham",!0),s(g,v,C,d)}}},r=&gt;{var e=function(t){return t&amp;&amp;t.Math==Math&amp;&amp;t};r.exports=e(typeof globalThis=="object"&amp;&amp;globalThis)||e(typeof window=="object"&amp;&amp;window)||e(typeof self=="object"&amp;&amp;self)||e(typeof globalThis=="object"&amp;&amp;globalThis)||function(){return this}()||Function("return this")()},(r,e,t)=&gt;{var n=t(9),o=t(11),i=t(13),s=t(14),a=t(15),l=t(20),u=t(40),d=t(43),c=Object.getOwnPropertyDescriptor;e.f=n?c:function(h,f){if(h=a(h),f=l(f),d)try{return c(h,f)}catch(m){}if(u(h,f))return s(!o(i.f,h,f),h[f])}},(r,e,t)=&gt;{var n=t(10);r.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},r=&gt;{r.exports=function(e){try{return!!e()}catch(t){return!0}}},(r,e,t)=&gt;{var n=t(12),o=Function.prototype.call;r.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},(r,e,t)=&gt;{var n=t(10);r.exports=!n(function(){var o=function(){}.bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(r,e)=&gt;{"use strict";var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&amp;&amp;!t.call({1:2},1);e.f=o?function(s){var a=n(this,s);return!!a&amp;&amp;a.enumerable}:t},r=&gt;{r.exports=function(e,t){return{enumerable:!(e&amp;1),configurable:!(e&amp;2),writable:!(e&amp;4),value:t}}},(r,e,t)=&gt;{var n=t(16),o=t(19);r.exports=function(i){return n(o(i))}},(r,e,t)=&gt;{var n=t(17),o=t(10),i=t(18),s=Object,a=n("".split);r.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(l){return i(l)=="String"?a(l,""):s(l)}:s},(r,e,t)=&gt;{var n=t(12),o=Function.prototype,i=o.bind,s=o.call,a=n&amp;&amp;i.bind(s,s);r.exports=n?function(l){return l&amp;&amp;a(l)}:function(l){return l&amp;&amp;function(){return s.apply(l,arguments)}}},(r,e,t)=&gt;{var n=t(17),o=n({}.toString),i=n("".slice);r.exports=function(s){return i(o(s),8,-1)}},r=&gt;{var e=TypeError;r.exports=function(t){if(t==null)throw e("Can't call method on "+t);return t}},(r,e,t)=&gt;{var n=t(21),o=t(24);r.exports=function(i){var s=n(i,"string");return o(s)?s:s+""}},(r,e,t)=&gt;{var n=t(11),o=t(22),i=t(24),s=t(31),a=t(34),l=t(35),u=TypeError,d=l("toPrimitive");r.exports=function(c,p){if(!o(c)||i(c))return c;var h=s(c,d),f;if(h){if(p===void 0&amp;&amp;(p="default"),f=n(h,c,p),!o(f)||i(f))return f;throw u("Can't convert object to primitive value")}return p===void 0&amp;&amp;(p="number"),a(c,p)}},(r,e,t)=&gt;{var n=t(23);r.exports=function(o){return typeof o=="object"?o!==null:n(o)}},r=&gt;{r.exports=function(e){return typeof e=="function"}},(r,e,t)=&gt;{var n=t(25),o=t(23),i=t(26),s=t(27),a=Object;r.exports=s?function(l){return typeof l=="symbol"}:function(l){var u=n("Symbol");return o(u)&amp;&amp;i(u.prototype,a(l))}},(r,e,t)=&gt;{var n=t(7),o=t(23),i=function(s){return o(s)?s:void 0};r.exports=function(s,a){return arguments.length&lt;2?i(n[s]):n[s]&amp;&amp;n[s][a]}},(r,e,t)=&gt;{var n=t(17);r.exports=n({}.isPrototypeOf)},(r,e,t)=&gt;{var n=t(28);r.exports=n&amp;&amp;!Symbol.sham&amp;&amp;typeof Symbol.iterator=="symbol"},(r,e,t)=&gt;{var n=t(29),o=t(10);r.exports=!!Object.getOwnPropertySymbols&amp;&amp;!o(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&amp;&amp;n&amp;&amp;n&lt;41})},(r,e,t)=&gt;{var n=t(7),o=t(30),i=n.process,s=n.Deno,a=i&amp;&amp;i.versions||s&amp;&amp;s.version,l=a&amp;&amp;a.v8,u,d;l&amp;&amp;(u=l.split("."),d=u[0]&gt;0&amp;&amp;u[0]&lt;4?1:+(u[0]+u[1])),!d&amp;&amp;o&amp;&amp;(u=o.match(/Edge\/(\d+)/),(!u||u[1]&gt;=74)&amp;&amp;(u=o.match(/Chrome\/(\d+)/),u&amp;&amp;(d=+u[1]))),r.exports=d},(r,e,t)=&gt;{var n=t(25);r.exports=n("navigator","userAgent")||""},(r,e,t)=&gt;{var n=t(32);r.exports=function(o,i){var s=o[i];return s==null?void 0:n(s)}},(r,e,t)=&gt;{var n=t(23),o=t(33),i=TypeError;r.exports=function(s){if(n(s))return s;throw i(o(s)+" is not a function")}},r=&gt;{var e=String;r.exports=function(t){try{return e(t)}catch(n){return"Object"}}},(r,e,t)=&gt;{var n=t(11),o=t(23),i=t(22),s=TypeError;r.exports=function(a,l){var u,d;if(l==="string"&amp;&amp;o(u=a.toString)&amp;&amp;!i(d=n(u,a))||o(u=a.valueOf)&amp;&amp;!i(d=n(u,a))||l!=="string"&amp;&amp;o(u=a.toString)&amp;&amp;!i(d=n(u,a)))return d;throw s("Can't convert object to primitive value")}},(r,e,t)=&gt;{var n=t(7),o=t(36),i=t(40),s=t(42),a=t(28),l=t(27),u=o("wks"),d=n.Symbol,c=d&amp;&amp;d.for,p=l?d:d&amp;&amp;d.withoutSetter||s;r.exports=function(h){if(!i(u,h)||!(a||typeof u[h]=="string")){var f="Symbol."+h;a&amp;&amp;i(d,h)?u[h]=d[h]:l&amp;&amp;c?u[h]=c(f):u[h]=p(f)}return u[h]}},(r,e,t)=&gt;{var n=t(37),o=t(38);(r.exports=function(i,s){return o[i]||(o[i]=s!==void 0?s:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},r=&gt;{r.exports=!1},(r,e,t)=&gt;{var n=t(7),o=t(39),i="__core-js_shared__",s=n[i]||o(i,{});r.exports=s},(r,e,t)=&gt;{var n=t(7),o=Object.defineProperty;r.exports=function(i,s){try{o(n,i,{value:s,configurable:!0,writable:!0})}catch(a){n[i]=s}return s}},(r,e,t)=&gt;{var n=t(17),o=t(41),i=n({}.hasOwnProperty);r.exports=Object.hasOwn||function(a,l){return i(o(a),l)}},(r,e,t)=&gt;{var n=t(19),o=Object;r.exports=function(i){return o(n(i))}},(r,e,t)=&gt;{var n=t(17),o=0,i=Math.random(),s=n(1 .toString);r.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+s(++o+i,36)}},(r,e,t)=&gt;{var n=t(9),o=t(10),i=t(44);r.exports=!n&amp;&amp;!o(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},(r,e,t)=&gt;{var n=t(7),o=t(22),i=n.document,s=o(i)&amp;&amp;o(i.createElement);r.exports=function(a){return s?i.createElement(a):{}}},(r,e,t)=&gt;{var n=t(9),o=t(46),i=t(14);r.exports=n?function(s,a,l){return o.f(s,a,i(1,l))}:function(s,a,l){return s[a]=l,s}},(r,e,t)=&gt;{var n=t(9),o=t(43),i=t(47),s=t(48),a=t(20),l=TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,c="enumerable",p="configurable",h="writable";e.f=n?i?function(m,g,v){if(s(m),g=a(g),s(v),typeof m=="function"&amp;&amp;g==="prototype"&amp;&amp;"value"in v&amp;&amp;h in v&amp;&amp;!v[h]){var b=d(m,g);b&amp;&amp;b[h]&amp;&amp;(m[g]=v.value,v={configurable:p in v?v[p]:b[p],enumerable:c in v?v[c]:b[c],writable:!1})}return u(m,g,v)}:u:function(m,g,v){if(s(m),g=a(g),s(v),o)try{return u(m,g,v)}catch(b){}if("get"in v||"set"in v)throw l("Accessors not supported");return"value"in v&amp;&amp;(m[g]=v.value),m}},(r,e,t)=&gt;{var n=t(9),o=t(10);r.exports=n&amp;&amp;o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(r,e,t)=&gt;{var n=t(22),o=String,i=TypeError;r.exports=function(s){if(n(s))return s;throw i(o(s)+" is not an object")}},(r,e,t)=&gt;{var n=t(23),o=t(46),i=t(50),s=t(39);r.exports=function(a,l,u,d){d||(d={});var c=d.enumerable,p=d.name!==void 0?d.name:l;if(n(u)&amp;&amp;i(u,p,d),d.global)c?a[l]=u:s(l,u);else{try{d.unsafe?a[l]&amp;&amp;(c=!0):delete a[l]}catch(h){}c?a[l]=u:o.f(a,l,{value:u,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return a}},(r,e,t)=&gt;{var n=t(10),o=t(23),i=t(40),s=t(9),a=t(51).CONFIGURABLE,l=t(52),u=t(53),d=u.enforce,c=u.get,p=Object.defineProperty,h=s&amp;&amp;!n(function(){return p(function(){},"length",{value:8}).length!==8}),f=String(String).split("String"),m=r.exports=function(g,v,b){String(v).slice(0,7)==="Symbol("&amp;&amp;(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),b&amp;&amp;b.getter&amp;&amp;(v="get "+v),b&amp;&amp;b.setter&amp;&amp;(v="set "+v),(!i(g,"name")||a&amp;&amp;g.name!==v)&amp;&amp;(s?p(g,"name",{value:v,configurable:!0}):g.name=v),h&amp;&amp;b&amp;&amp;i(b,"arity")&amp;&amp;g.length!==b.arity&amp;&amp;p(g,"length",{value:b.arity});try{b&amp;&amp;i(b,"constructor")&amp;&amp;b.constructor?s&amp;&amp;p(g,"prototype",{writable:!1}):g.prototype&amp;&amp;(g.prototype=void 0)}catch(x){}var C=d(g);return i(C,"source")||(C.source=f.join(typeof v=="string"?v:"")),g};Function.prototype.toString=m(function(){return o(this)&amp;&amp;c(this).source||l(this)},"toString")},(r,e,t)=&gt;{var n=t(9),o=t(40),i=Function.prototype,s=n&amp;&amp;Object.getOwnPropertyDescriptor,a=o(i,"name"),l=a&amp;&amp;function(){}.name==="something",u=a&amp;&amp;(!n||n&amp;&amp;s(i,"name").configurable);r.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},(r,e,t)=&gt;{var n=t(17),o=t(23),i=t(38),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(a){return s(a)}),r.exports=i.inspectSource},(r,e,t)=&gt;{var n=t(54),o=t(7),i=t(17),s=t(22),a=t(45),l=t(40),u=t(38),d=t(55),c=t(56),p="Object already initialized",h=o.TypeError,f=o.WeakMap,m,g,v,b=function(k){return v(k)?g(k):m(k,{})},C=function(k){return function(A){var I;if(!s(A)||(I=g(A)).type!==k)throw h("Incompatible receiver, "+k+" required");return I}};if(n||u.state){var x=u.state||(u.state=new f),y=i(x.get),S=i(x.has),T=i(x.set);m=function(k,A){if(S(x,k))throw new h(p);return A.facade=k,T(x,k,A),A},g=function(k){return y(x,k)||{}},v=function(k){return S(x,k)}}else{var w=d("state");c[w]=!0,m=function(k,A){if(l(k,w))throw new h(p);return A.facade=k,a(k,w,A),A},g=function(k){return l(k,w)?k[w]:{}},v=function(k){return l(k,w)}}r.exports={set:m,get:g,has:v,enforce:b,getterFor:C}},(r,e,t)=&gt;{var n=t(7),o=t(23),i=t(52),s=n.WeakMap;r.exports=o(s)&amp;&amp;/native code/.test(i(s))},(r,e,t)=&gt;{var n=t(36),o=t(42),i=n("keys");r.exports=function(s){return i[s]||(i[s]=o(s))}},r=&gt;{r.exports={}},(r,e,t)=&gt;{var n=t(40),o=t(58),i=t(8),s=t(46);r.exports=function(a,l,u){for(var d=o(l),c=s.f,p=i.f,h=0;h&lt;d.length;h++){var f=d[h];!n(a,f)&amp;&amp;!(u&amp;&amp;n(u,f))&amp;&amp;c(a,f,p(l,f))}}},(r,e,t)=&gt;{var n=t(25),o=t(17),i=t(59),s=t(68),a=t(48),l=o([].concat);r.exports=n("Reflect","ownKeys")||function(d){var c=i.f(a(d)),p=s.f;return p?l(c,p(d)):c}},(r,e,t)=&gt;{var n=t(60),o=t(67),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(a){return n(a,i)}},(r,e,t)=&gt;{var n=t(17),o=t(40),i=t(15),s=t(61).indexOf,a=t(56),l=n([].push);r.exports=function(u,d){var c=i(u),p=0,h=[],f;for(f in c)!o(a,f)&amp;&amp;o(c,f)&amp;&amp;l(h,f);for(;d.length&gt;p;)o(c,f=d[p++])&amp;&amp;(~s(h,f)||l(h,f));return h}},(r,e,t)=&gt;{var n=t(15),o=t(62),i=t(65),s=function(a){return function(l,u,d){var c=n(l),p=i(c),h=o(d,p),f;if(a&amp;&amp;u!=u){for(;p&gt;h;)if(f=c[h++],f!=f)return!0}else for(;p&gt;h;h++)if((a||h in c)&amp;&amp;c[h]===u)return a||h||0;return!a&amp;&amp;-1}};r.exports={includes:s(!0),indexOf:s(!1)}},(r,e,t)=&gt;{var n=t(63),o=Math.max,i=Math.min;r.exports=function(s,a){var l=n(s);return l&lt;0?o(l+a,0):i(l,a)}},(r,e,t)=&gt;{var n=t(64);r.exports=function(o){var i=+o;return i!==i||i===0?0:n(i)}},r=&gt;{var e=Math.ceil,t=Math.floor;r.exports=Math.trunc||function(o){var i=+o;return(i&gt;0?t:e)(i)}},(r,e,t)=&gt;{var n=t(66);r.exports=function(o){return n(o.length)}},(r,e,t)=&gt;{var n=t(63),o=Math.min;r.exports=function(i){return i&gt;0?o(n(i),9007199254740991):0}},r=&gt;{r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(r,e)=&gt;{e.f=Object.getOwnPropertySymbols},(r,e,t)=&gt;{var n=t(10),o=t(23),i=/#|\.prototype\./,s=function(c,p){var h=l[a(c)];return h==d?!0:h==u?!1:o(p)?n(p):!!p},a=s.normalize=function(c){return String(c).replace(i,".").toLowerCase()},l=s.data={},u=s.NATIVE="N",d=s.POLYFILL="P";r.exports=s},(r,e,t)=&gt;{var n=t(35),o=t(71),i=t(46).f,s=n("unscopables"),a=Array.prototype;a[s]==null&amp;&amp;i(a,s,{configurable:!0,value:o(null)}),r.exports=function(l){a[s][l]=!0}},(r,e,t)=&gt;{var n=t(48),o=t(72),i=t(67),s=t(56),a=t(74),l=t(44),u=t(55),d="&gt;",c="&lt;",p="prototype",h="script",f=u("IE_PROTO"),m=function(){},g=function(y){return c+h+d+y+c+"/"+h+d},v=function(y){y.write(g("")),y.close();var S=y.parentWindow.Object;return y=null,S},b=function(){var y=l("iframe"),S="java"+h+":",T;return y.style.display="none",a.appendChild(y),y.src=String(S),T=y.contentWindow.document,T.open(),T.write(g("document.F=Object")),T.close(),T.F},C,x=function(){try{C=new ActiveXObject("htmlfile")}catch(S){}x=typeof document!="undefined"?document.domain&amp;&amp;C?v(C):b():v(C);for(var y=i.length;y--;)delete x[p][i[y]];return x()};s[f]=!0,r.exports=Object.create||function(S,T){var w;return S!==null?(m[p]=n(S),w=new m,m[p]=null,w[f]=S):w=x(),T===void 0?w:o.f(w,T)}},(r,e,t)=&gt;{var n=t(9),o=t(47),i=t(46),s=t(48),a=t(15),l=t(73);e.f=n&amp;&amp;!o?Object.defineProperties:function(d,c){s(d);for(var p=a(c),h=l(c),f=h.length,m=0,g;f&gt;m;)i.f(d,g=h[m++],p[g]);return d}},(r,e,t)=&gt;{var n=t(60),o=t(67);r.exports=Object.keys||function(s){return n(s,o)}},(r,e,t)=&gt;{var n=t(25);r.exports=n("document","documentElement")},(r,e,t)=&gt;{var n=t(7),o=t(17);r.exports=function(i,s){return o(n[i].prototype[s])}},(r,e,t)=&gt;{t(77)},(r,e,t)=&gt;{"use strict";var n=t(78),o=t(65),i=t(63),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("at",function(u){var d=s(this),c=o(d),p=i(u),h=p&gt;=0?p:c+p;return h&lt;0||h&gt;=c?void 0:d[h]})},(r,e,t)=&gt;{"use strict";var n=t(79),o=t(9),i=t(7),s=t(23),a=t(22),l=t(40),u=t(80),d=t(33),c=t(45),p=t(49),h=t(46).f,f=t(26),m=t(82),g=t(84),v=t(35),b=t(42),C=t(53),x=C.enforce,y=C.get,S=i.Int8Array,T=S&amp;&amp;S.prototype,w=i.Uint8ClampedArray,k=w&amp;&amp;w.prototype,A=S&amp;&amp;m(S),I=T&amp;&amp;m(T),E=Object.prototype,O=i.TypeError,Q=v("toStringTag"),j=b("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",B=n&amp;&amp;!!g&amp;&amp;u(i.opera)!=="Opera",z=!1,N,V,re,ce={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ge={BigInt64Array:8,BigUint64Array:8},ae=function(P){if(!a(P))return!1;var X=u(P);return X==="DataView"||l(ce,X)||l(ge,X)},Y=function($){var P=m($);if(!!a(P)){var X=y(P);return X&amp;&amp;l(X,U)?X[U]:Y(P)}},W=function($){if(!a($))return!1;var P=u($);return l(ce,P)||l(ge,P)},G=function($){if(W($))return $;throw O("Target is not a typed array")},ee=function($){if(s($)&amp;&amp;(!g||f(A,$)))return $;throw O(d($)+" is not a typed array constructor")},F=function($,P,X,K){if(!!o){if(X)for(var R in ce){var H=i[R];if(H&amp;&amp;l(H.prototype,$))try{delete H.prototype[$]}catch(J){try{H.prototype[$]=P}catch(te){}}}(!I[$]||X)&amp;&amp;p(I,$,X?P:B&amp;&amp;T[$]||P,K)}},L=function($,P,X){var K,R;if(!!o){if(g){if(X){for(K in ce)if(R=i[K],R&amp;&amp;l(R,$))try{delete R[$]}catch(H){}}if(!A[$]||X)try{return p(A,$,X?P:B&amp;&amp;A[$]||P)}catch(H){}else return}for(K in ce)R=i[K],R&amp;&amp;(!R[$]||X)&amp;&amp;p(R,$,P)}};for(N in ce)V=i[N],re=V&amp;&amp;V.prototype,re?x(re)[U]=V:B=!1;for(N in ge)V=i[N],re=V&amp;&amp;V.prototype,re&amp;&amp;(x(re)[U]=V);if((!B||!s(A)||A===Function.prototype)&amp;&amp;(A=function(){throw O("Incorrect invocation")},B))for(N in ce)i[N]&amp;&amp;g(i[N],A);if((!B||!I||I===E)&amp;&amp;(I=A.prototype,B))for(N in ce)i[N]&amp;&amp;g(i[N].prototype,I);if(B&amp;&amp;m(k)!==I&amp;&amp;g(k,I),o&amp;&amp;!l(I,Q)){z=!0,h(I,Q,{get:function(){return a(this)?this[j]:void 0}});for(N in ce)i[N]&amp;&amp;c(i[N],j,N)}r.exports={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_TAG:z&amp;&amp;j,aTypedArray:G,aTypedArrayConstructor:ee,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:L,getTypedArrayConstructor:Y,isView:ae,isTypedArray:W,TypedArray:A,TypedArrayPrototype:I}},r=&gt;{r.exports=typeof ArrayBuffer!="undefined"&amp;&amp;typeof DataView!="undefined"},(r,e,t)=&gt;{var n=t(81),o=t(23),i=t(18),s=t(35),a=s("toStringTag"),l=Object,u=i(function(){return arguments}())=="Arguments",d=function(c,p){try{return c[p]}catch(h){}};r.exports=n?i:function(c){var p,h,f;return c===void 0?"Undefined":c===null?"Null":typeof(h=d(p=l(c),a))=="string"?h:u?i(p):(f=i(p))=="Object"&amp;&amp;o(p.callee)?"Arguments":f}},(r,e,t)=&gt;{var n=t(35),o=n("toStringTag"),i={};i[o]="z",r.exports=String(i)==="[object z]"},(r,e,t)=&gt;{var n=t(40),o=t(23),i=t(41),s=t(55),a=t(83),l=s("IE_PROTO"),u=Object,d=u.prototype;r.exports=a?u.getPrototypeOf:function(c){var p=i(c);if(n(p,l))return p[l];var h=p.constructor;return o(h)&amp;&amp;p instanceof h?h.prototype:p instanceof u?d:null}},(r,e,t)=&gt;{var n=t(10);r.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(r,e,t)=&gt;{var n=t(17),o=t(48),i=t(85);r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,a={},l;try{l=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),l(a,[]),s=a instanceof Array}catch(u){}return function(d,c){return o(d),i(c),s?l(d,c):d.__proto__=c,d}}():void 0)},(r,e,t)=&gt;{var n=t(23),o=String,i=TypeError;r.exports=function(s){if(typeof s=="object"||n(s))return s;throw i("Can't set "+o(s)+" as a prototype")}},(r,e,t)=&gt;{t(87),t(93),t(95),t(117),t(119);var n=t(128);r.exports=n.structuredClone},(r,e,t)=&gt;{"use strict";var n=t(15),o=t(70),i=t(88),s=t(53),a=t(46).f,l=t(89),u=t(37),d=t(9),c="Array Iterator",p=s.set,h=s.getterFor(c);r.exports=l(Array,"Array",function(m,g){p(this,{type:c,target:n(m),index:0,kind:g})},function(){var m=h(this),g=m.target,v=m.kind,b=m.index++;return!g||b&gt;=g.length?(m.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:b,done:!1}:v=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values");var f=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!u&amp;&amp;d&amp;&amp;f.name!=="values")try{a(f,"name",{value:"values"})}catch(m){}},r=&gt;{r.exports={}},(r,e,t)=&gt;{"use strict";var n=t(6),o=t(11),i=t(37),s=t(51),a=t(23),l=t(90),u=t(82),d=t(84),c=t(92),p=t(45),h=t(49),f=t(35),m=t(88),g=t(91),v=s.PROPER,b=s.CONFIGURABLE,C=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,y=f("iterator"),S="keys",T="values",w="entries",k=function(){return this};r.exports=function(A,I,E,O,Q,j,U){l(E,I,O);var B=function(G){if(G===Q&amp;&amp;ce)return ce;if(!x&amp;&amp;G in V)return V[G];switch(G){case S:return function(){return new E(this,G)};case T:return function(){return new E(this,G)};case w:return function(){return new E(this,G)}}return function(){return new E(this)}},z=I+" Iterator",N=!1,V=A.prototype,re=V[y]||V["@@iterator"]||Q&amp;&amp;V[Q],ce=!x&amp;&amp;re||B(Q),ge=I=="Array"&amp;&amp;V.entries||re,ae,Y,W;if(ge&amp;&amp;(ae=u(ge.call(new A)),ae!==Object.prototype&amp;&amp;ae.next&amp;&amp;(!i&amp;&amp;u(ae)!==C&amp;&amp;(d?d(ae,C):a(ae[y])||h(ae,y,k)),c(ae,z,!0,!0),i&amp;&amp;(m[z]=k))),v&amp;&amp;Q==T&amp;&amp;re&amp;&amp;re.name!==T&amp;&amp;(!i&amp;&amp;b?p(V,"name",T):(N=!0,ce=function(){return o(re,this)})),Q)if(Y={values:B(T),keys:j?ce:B(S),entries:B(w)},U)for(W in Y)(x||N||!(W in V))&amp;&amp;h(V,W,Y[W]);else n({target:I,proto:!0,forced:x||N},Y);return(!i||U)&amp;&amp;V[y]!==ce&amp;&amp;h(V,y,ce,{name:Q}),m[I]=ce,Y}},(r,e,t)=&gt;{"use strict";var n=t(91).IteratorPrototype,o=t(71),i=t(14),s=t(92),a=t(88),l=function(){return this};r.exports=function(u,d,c,p){var h=d+" Iterator";return u.prototype=o(n,{next:i(+!p,c)}),s(u,h,!1,!0),a[h]=l,u}},(r,e,t)=&gt;{"use strict";var n=t(10),o=t(23),i=t(71),s=t(82),a=t(49),l=t(35),u=t(37),d=l("iterator"),c=!1,p,h,f;[].keys&amp;&amp;(f=[].keys(),"next"in f?(h=s(s(f)),h!==Object.prototype&amp;&amp;(p=h)):c=!0);var m=p==null||n(function(){var g={};return p[d].call(g)!==g});m?p={}:u&amp;&amp;(p=i(p)),o(p[d])||a(p,d,function(){return this}),r.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:c}},(r,e,t)=&gt;{var n=t(46).f,o=t(40),i=t(35),s=i("toStringTag");r.exports=function(a,l,u){a&amp;&amp;!u&amp;&amp;(a=a.prototype),a&amp;&amp;!o(a,s)&amp;&amp;n(a,s,{configurable:!0,value:l})}},(r,e,t)=&gt;{var n=t(81),o=t(49),i=t(94);n||o(Object.prototype,"toString",i,{unsafe:!0})},(r,e,t)=&gt;{"use strict";var n=t(81),o=t(80);r.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},(r,e,t)=&gt;{t(96)},(r,e,t)=&gt;{"use strict";var n=t(97),o=t(114);n("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},o)},(r,e,t)=&gt;{"use strict";var n=t(6),o=t(7),i=t(17),s=t(69),a=t(49),l=t(98),u=t(105),d=t(111),c=t(23),p=t(22),h=t(10),f=t(112),m=t(92),g=t(113);r.exports=function(v,b,C){var x=v.indexOf("Map")!==-1,y=v.indexOf("Weak")!==-1,S=x?"set":"add",T=o[v],w=T&amp;&amp;T.prototype,k=T,A={},I=function(z){var N=i(w[z]);a(w,z,z=="add"?function(re){return N(this,re===0?0:re),this}:z=="delete"?function(V){return y&amp;&amp;!p(V)?!1:N(this,V===0?0:V)}:z=="get"?function(re){return y&amp;&amp;!p(re)?void 0:N(this,re===0?0:re)}:z=="has"?function(re){return y&amp;&amp;!p(re)?!1:N(this,re===0?0:re)}:function(re,ce){return N(this,re===0?0:re,ce),this})},E=s(v,!c(T)||!(y||w.forEach&amp;&amp;!h(function(){new T().entries().next()})));if(E)k=C.getConstructor(b,v,x,S),l.enable();else if(s(v,!0)){var O=new k,Q=O[S](y?{}:-0,1)!=O,j=h(function(){O.has(1)}),U=f(function(z){new T(z)}),B=!y&amp;&amp;h(function(){for(var z=new T,N=5;N--;)z[S](N,N);return!z.has(-0)});U||(k=b(function(z,N){d(z,w);var V=g(new T,z,k);return N!=null&amp;&amp;u(N,V[S],{that:V,AS_ENTRIES:x}),V}),k.prototype=w,w.constructor=k),(j||B)&amp;&amp;(I("delete"),I("has"),x&amp;&amp;I("get")),(B||Q)&amp;&amp;I(S),y&amp;&amp;w.clear&amp;&amp;delete w.clear}return A[v]=k,n({global:!0,constructor:!0,forced:k!=T},A),m(k,v),y||C.setStrong(k,v,x),k}},(r,e,t)=&gt;{var n=t(6),o=t(17),i=t(56),s=t(22),a=t(40),l=t(46).f,u=t(59),d=t(99),c=t(102),p=t(42),h=t(104),f=!1,m=p("meta"),g=0,v=function(T){l(T,m,{value:{objectID:"O"+g++,weakData:{}}})},b=function(T,w){if(!s(T))return typeof T=="symbol"?T:(typeof T=="string"?"S":"P")+T;if(!a(T,m)){if(!c(T))return"F";if(!w)return"E";v(T)}return T[m].objectID},C=function(T,w){if(!a(T,m)){if(!c(T))return!0;if(!w)return!1;v(T)}return T[m].weakData},x=function(T){return h&amp;&amp;f&amp;&amp;c(T)&amp;&amp;!a(T,m)&amp;&amp;v(T),T},y=function(){S.enable=function(){},f=!0;var T=u.f,w=o([].splice),k={};k[m]=1,T(k).length&amp;&amp;(u.f=function(A){for(var I=T(A),E=0,O=I.length;E&lt;O;E++)if(I[E]===m){w(I,E,1);break}return I},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},S=r.exports={enable:y,fastKey:b,getWeakData:C,onFreeze:x};i[m]=!0},(r,e,t)=&gt;{var n=t(18),o=t(15),i=t(59).f,s=t(100),a=typeof window=="object"&amp;&amp;window&amp;&amp;Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(u){try{return i(u)}catch(d){return s(a)}};r.exports.f=function(d){return a&amp;&amp;n(d)=="Window"?l(d):i(o(d))}},(r,e,t)=&gt;{var n=t(62),o=t(65),i=t(101),s=Array,a=Math.max;r.exports=function(l,u,d){for(var c=o(l),p=n(u,c),h=n(d===void 0?c:d,c),f=s(a(h-p,0)),m=0;p&lt;h;p++,m++)i(f,m,l[p]);return f.length=m,f}},(r,e,t)=&gt;{"use strict";var n=t(20),o=t(46),i=t(14);r.exports=function(s,a,l){var u=n(a);u in s?o.f(s,u,i(0,l)):s[u]=l}},(r,e,t)=&gt;{var n=t(10),o=t(22),i=t(18),s=t(103),a=Object.isExtensible,l=n(function(){a(1)});r.exports=l||s?function(d){return!o(d)||s&amp;&amp;i(d)=="ArrayBuffer"?!1:a?a(d):!0}:a},(r,e,t)=&gt;{var n=t(10);r.exports=n(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&amp;&amp;Object.defineProperty(o,"a",{value:8})}})},(r,e,t)=&gt;{var n=t(10);r.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(r,e,t)=&gt;{var n=t(106),o=t(11),i=t(48),s=t(33),a=t(107),l=t(65),u=t(26),d=t(108),c=t(109),p=t(110),h=TypeError,f=function(g,v){this.stopped=g,this.result=v},m=f.prototype;r.exports=function(g,v,b){var C=b&amp;&amp;b.that,x=!!(b&amp;&amp;b.AS_ENTRIES),y=!!(b&amp;&amp;b.IS_RECORD),S=!!(b&amp;&amp;b.IS_ITERATOR),T=!!(b&amp;&amp;b.INTERRUPTED),w=n(v,C),k,A,I,E,O,Q,j,U=function(z){return k&amp;&amp;p(k,"normal",z),new f(!0,z)},B=function(z){return x?(i(z),T?w(z[0],z[1],U):w(z[0],z[1])):T?w(z,U):w(z)};if(y)k=g.iterator;else if(S)k=g;else{if(A=c(g),!A)throw h(s(g)+" is not iterable");if(a(A)){for(I=0,E=l(g);E&gt;I;I++)if(O=B(g[I]),O&amp;&amp;u(m,O))return O;return new f(!1)}k=d(g,A)}for(Q=y?g.next:k.next;!(j=o(Q,k)).done;){try{O=B(j.value)}catch(z){p(k,"throw",z)}if(typeof O=="object"&amp;&amp;O&amp;&amp;u(m,O))return O}return new f(!1)}},(r,e,t)=&gt;{var n=t(17),o=t(32),i=t(12),s=n(n.bind);r.exports=function(a,l){return o(a),l===void 0?a:i?s(a,l):function(){return a.apply(l,arguments)}}},(r,e,t)=&gt;{var n=t(35),o=t(88),i=n("iterator"),s=Array.prototype;r.exports=function(a){return a!==void 0&amp;&amp;(o.Array===a||s[i]===a)}},(r,e,t)=&gt;{var n=t(11),o=t(32),i=t(48),s=t(33),a=t(109),l=TypeError;r.exports=function(u,d){var c=arguments.length&lt;2?a(u):d;if(o(c))return i(n(c,u));throw l(s(u)+" is not iterable")}},(r,e,t)=&gt;{var n=t(80),o=t(31),i=t(88),s=t(35),a=s("iterator");r.exports=function(l){if(l!=null)return o(l,a)||o(l,"@@iterator")||i[n(l)]}},(r,e,t)=&gt;{var n=t(11),o=t(48),i=t(31);r.exports=function(s,a,l){var u,d;o(s);try{if(u=i(s,"return"),!u){if(a==="throw")throw l;return l}u=n(u,s)}catch(c){d=!0,u=c}if(a==="throw")throw l;if(d)throw u;return o(u),l}},(r,e,t)=&gt;{var n=t(26),o=TypeError;r.exports=function(i,s){if(n(s,i))return i;throw o("Incorrect invocation")}},(r,e,t)=&gt;{var n=t(35),o=n("iterator"),i=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){i=!0}};a[o]=function(){return this},Array.from(a,function(){throw 2})}catch(l){}r.exports=function(l,u){if(!u&amp;&amp;!i)return!1;var d=!1;try{var c={};c[o]=function(){return{next:function(){return{done:d=!0}}}},l(c)}catch(p){}return d}},(r,e,t)=&gt;{var n=t(23),o=t(22),i=t(84);r.exports=function(s,a,l){var u,d;return i&amp;&amp;n(u=a.constructor)&amp;&amp;u!==l&amp;&amp;o(d=u.prototype)&amp;&amp;d!==l.prototype&amp;&amp;i(s,d),s}},(r,e,t)=&gt;{"use strict";var n=t(46).f,o=t(71),i=t(115),s=t(106),a=t(111),l=t(105),u=t(89),d=t(116),c=t(9),p=t(98).fastKey,h=t(53),f=h.set,m=h.getterFor;r.exports={getConstructor:function(g,v,b,C){var x=g(function(k,A){a(k,y),f(k,{type:v,index:o(null),first:void 0,last:void 0,size:0}),c||(k.size=0),A!=null&amp;&amp;l(A,k[C],{that:k,AS_ENTRIES:b})}),y=x.prototype,S=m(v),T=function(k,A,I){var E=S(k),O=w(k,A),Q,j;return O?O.value=I:(E.last=O={index:j=p(A,!0),key:A,value:I,previous:Q=E.last,next:void 0,removed:!1},E.first||(E.first=O),Q&amp;&amp;(Q.next=O),c?E.size++:k.size++,j!=="F"&amp;&amp;(E.index[j]=O)),k},w=function(k,A){var I=S(k),E=p(A),O;if(E!=="F")return I.index[E];for(O=I.first;O;O=O.next)if(O.key==A)return O};return i(y,{clear:function(){for(var A=this,I=S(A),E=I.index,O=I.first;O;)O.removed=!0,O.previous&amp;&amp;(O.previous=O.previous.next=void 0),delete E[O.index],O=O.next;I.first=I.last=void 0,c?I.size=0:A.size=0},delete:function(k){var A=this,I=S(A),E=w(A,k);if(E){var O=E.next,Q=E.previous;delete I.index[E.index],E.removed=!0,Q&amp;&amp;(Q.next=O),O&amp;&amp;(O.previous=Q),I.first==E&amp;&amp;(I.first=O),I.last==E&amp;&amp;(I.last=Q),c?I.size--:A.size--}return!!E},forEach:function(A){for(var I=S(this),E=s(A,arguments.length&gt;1?arguments[1]:void 0),O;O=O?O.next:I.first;)for(E(O.value,O.key,this);O&amp;&amp;O.removed;)O=O.previous},has:function(A){return!!w(this,A)}}),i(y,b?{get:function(A){var I=w(this,A);return I&amp;&amp;I.value},set:function(A,I){return T(this,A===0?0:A,I)}}:{add:function(A){return T(this,A=A===0?0:A,A)}}),c&amp;&amp;n(y,"size",{get:function(){return S(this).size}}),x},setStrong:function(g,v,b){var C=v+" Iterator",x=m(v),y=m(C);u(g,v,function(S,T){f(this,{type:C,target:S,state:x(S),kind:T,last:void 0})},function(){for(var S=y(this),T=S.kind,w=S.last;w&amp;&amp;w.removed;)w=w.previous;return!S.target||!(S.last=w=w?w.next:S.state.first)?(S.target=void 0,{value:void 0,done:!0}):T=="keys"?{value:w.key,done:!1}:T=="values"?{value:w.value,done:!1}:{value:[w.key,w.value],done:!1}},b?"entries":"values",!b,!0),d(v)}}},(r,e,t)=&gt;{var n=t(49);r.exports=function(o,i,s){for(var a in i)n(o,a,i[a],s);return o}},(r,e,t)=&gt;{"use strict";var n=t(25),o=t(46),i=t(35),s=t(9),a=i("species");r.exports=function(l){var u=n(l),d=o.f;s&amp;&amp;u&amp;&amp;!u[a]&amp;&amp;d(u,a,{configurable:!0,get:function(){return this}})}},(r,e,t)=&gt;{t(118)},(r,e,t)=&gt;{"use strict";var n=t(97),o=t(114);n("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},o)},(r,e,t)=&gt;{var n=t(37),o=t(6),i=t(7),s=t(25),a=t(17),l=t(10),u=t(42),d=t(23),c=t(120),p=t(22),h=t(24),f=t(105),m=t(48),g=t(80),v=t(40),b=t(101),C=t(45),x=t(65),y=t(121),S=t(122),T=t(124),w=t(29),k=t(125),A=t(126),I=t(127),E=i.Object,O=i.Date,Q=i.Error,j=i.EvalError,U=i.RangeError,B=i.ReferenceError,z=i.SyntaxError,N=i.TypeError,V=i.URIError,re=i.PerformanceMark,ce=i.WebAssembly,ge=ce&amp;&amp;ce.CompileError||Q,ae=ce&amp;&amp;ce.LinkError||Q,Y=ce&amp;&amp;ce.RuntimeError||Q,W=s("DOMException"),G=s("Set"),ee=s("Map"),F=ee.prototype,L=a(F.has),$=a(F.get),P=a(F.set),X=a(G.prototype.add),K=s("Object","keys"),R=a([].push),H=a((!0).valueOf),J=a(1 .valueOf),te=a("".valueOf),de=a(O.prototype.getTime),se=u("structuredClone"),be="DataCloneError",Pe="Transferring",ke=function(Be){return!l(function(){var Ze=new i.Set([7]),St=Be(Ze),Ne=Be(E(7));return St==Ze||!St.has(7)||typeof Ne!="object"||Ne!=7})&amp;&amp;Be},Ie=function(Be,Ze){return!l(function(){var St=new Ze,Ne=Be({a:St,b:St});return!(Ne&amp;&amp;Ne.a===Ne.b&amp;&amp;Ne.a instanceof Ze&amp;&amp;Ne.a.stack===St.stack)})},Ve=function(Be){return!l(function(){var Ze=Be(new i.AggregateError([1],se,{cause:3}));return Ze.name!="AggregateError"||Ze.errors[0]!=1||Ze.message!=se||Ze.cause!=3})},Ae=i.structuredClone,lt=n||!Ie(Ae,Q)||!Ie(Ae,W)||!Ve(Ae),vt=!Ae&amp;&amp;ke(function(Be){return new re(se,{detail:Be}).detail}),et=ke(Ae)||vt,_e=function(Be){throw new W("Uncloneable type: "+Be,be)},xe=function(Be,Ze){throw new W((Ze||"Cloning")+" of "+Be+" cannot be properly polyfilled in this engine",be)},Ge=function(Be,Ze){if(h(Be)&amp;&amp;_e("Symbol"),!p(Be))return Be;if(Ze){if(L(Ze,Be))return $(Ze,Be)}else Ze=new ee;var St=g(Be),Ne=!1,Ce,Te,ze,wt,dr,Oe,Fe,rt,Ct,ir;switch(St){case"Array":ze=[],Ne=!0;break;case"Object":ze={},Ne=!0;break;case"Map":ze=new ee,Ne=!0;break;case"Set":ze=new G,Ne=!0;break;case"RegExp":ze=new RegExp(Be.source,S(Be));break;case"Error":switch(Te=Be.name,Te){case"AggregateError":ze=s("AggregateError")([]);break;case"EvalError":ze=j();break;case"RangeError":ze=U();break;case"ReferenceError":ze=B();break;case"SyntaxError":ze=z();break;case"TypeError":ze=N();break;case"URIError":ze=V();break;case"CompileError":ze=ge();break;case"LinkError":ze=ae();break;case"RuntimeError":ze=Y();break;default:ze=Q()}Ne=!0;break;case"DOMException":ze=new W(Be.message,Be.name),Ne=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Ce=i[St],p(Ce)||xe(St),ze=new Ce(Ge(Be.buffer,Ze),Be.byteOffset,St==="DataView"?Be.byteLength:Be.length);break;case"DOMQuad":try{ze=new DOMQuad(Ge(Be.p1,Ze),Ge(Be.p2,Ze),Ge(Be.p3,Ze),Ge(Be.p4,Ze))}catch(hr){et?ze=et(Be):xe(St)}break;case"FileList":if(Ce=i.DataTransfer,c(Ce)){for(wt=new Ce,dr=0,Oe=x(Be);dr&lt;Oe;dr++)wt.items.add(Ge(Be[dr],Ze));ze=wt.files}else et?ze=et(Be):xe(St);break;case"ImageData":try{ze=new ImageData(Ge(Be.data,Ze),Be.width,Be.height,{colorSpace:Be.colorSpace})}catch(hr){et?ze=et(Be):xe(St)}break;default:if(et)ze=et(Be);else switch(St){case"BigInt":ze=E(Be.valueOf());break;case"Boolean":ze=E(H(Be));break;case"Number":ze=E(J(Be));break;case"String":ze=E(te(Be));break;case"Date":ze=new O(de(Be));break;case"ArrayBuffer":Ce=i.DataView,!Ce&amp;&amp;typeof Be.slice!="function"&amp;&amp;xe(St);try{if(typeof Be.slice=="function")ze=Be.slice(0);else for(Oe=Be.byteLength,ze=new ArrayBuffer(Oe),Ct=new Ce(Be),ir=new Ce(ze),dr=0;dr&lt;Oe;dr++)ir.setUint8(dr,Ct.getUint8(dr))}catch(hr){throw new W("ArrayBuffer is detached",be)}break;case"SharedArrayBuffer":ze=Be;break;case"Blob":try{ze=Be.slice(0,Be.size,Be.type)}catch(hr){xe(St)}break;case"DOMPoint":case"DOMPointReadOnly":Ce=i[St];try{ze=Ce.fromPoint?Ce.fromPoint(Be):new Ce(Be.x,Be.y,Be.z,Be.w)}catch(hr){xe(St)}break;case"DOMRect":case"DOMRectReadOnly":Ce=i[St];try{ze=Ce.fromRect?Ce.fromRect(Be):new Ce(Be.x,Be.y,Be.width,Be.height)}catch(hr){xe(St)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Ce=i[St];try{ze=Ce.fromMatrix?Ce.fromMatrix(Be):new Ce(Be)}catch(hr){xe(St)}break;case"AudioData":case"VideoFrame":d(Be.clone)||xe(St);try{ze=Be.clone()}catch(hr){_e(St)}break;case"File":try{ze=new File([Be],Be.name,Be)}catch(hr){xe(St)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":xe(St);default:_e(St)}}if(P(Ze,Be,ze),Ne)switch(St){case"Array":case"Object":for(Fe=K(Be),dr=0,Oe=x(Fe);dr&lt;Oe;dr++)rt=Fe[dr],b(ze,rt,Ge(Be[rt],Ze));break;case"Map":Be.forEach(function(hr,Dr){P(ze,Ge(Dr,Ze),Ge(hr,Ze))});break;case"Set":Be.forEach(function(hr){X(ze,Ge(hr,Ze))});break;case"Error":C(ze,"message",Ge(Be.message,Ze)),v(Be,"cause")&amp;&amp;C(ze,"cause",Ge(Be.cause,Ze)),Te=="AggregateError"&amp;&amp;(ze.errors=Ge(Be.errors,Ze));case"DOMException":T&amp;&amp;C(ze,"stack",Ge(Be.stack,Ze))}return ze},ct=Ae&amp;&amp;!l(function(){if(A&amp;&amp;w&gt;92||I&amp;&amp;w&gt;94||k&amp;&amp;w&gt;97)return!1;var Be=new ArrayBuffer(8),Ze=Ae(Be,{transfer:[Be]});return Be.byteLength!=0||Ze.byteLength!=8}),bt=function(Be,Ze){if(!p(Be))throw N("Transfer option cannot be converted to a sequence");var St=[];f(Be,function(Ct){R(St,m(Ct))});var Ne=0,Ce=x(St),Te,ze,wt,dr,Oe,Fe,rt;if(ct)for(dr=Ae(St,{transfer:St});Ne&lt;Ce;)P(Ze,St[Ne],dr[Ne++]);else for(;Ne&lt;Ce;){if(Te=St[Ne++],L(Ze,Te))throw new W("Duplicate transferable",be);switch(ze=g(Te),ze){case"ImageBitmap":wt=i.OffscreenCanvas,c(wt)||xe(ze,Pe);try{Fe=new wt(Te.width,Te.height),rt=Fe.getContext("bitmaprenderer"),rt.transferFromImageBitmap(Te),Oe=Fe.transferToImageBitmap()}catch(Ct){}break;case"AudioData":case"VideoFrame":(!d(Te.clone)||!d(Te.close))&amp;&amp;xe(ze,Pe);try{Oe=Te.clone(),Te.close()}catch(Ct){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":xe(ze,Pe)}if(Oe===void 0)throw new W("This object cannot be transferred: "+ze,be);P(Ze,Te,Oe)}};o({global:!0,enumerable:!0,sham:!ct,forced:lt},{structuredClone:function(Ze){var St=y(arguments.length,1)&gt;1&amp;&amp;arguments[1]!=null?m(arguments[1]):void 0,Ne=St?St.transfer:void 0,Ce;return Ne!==void 0&amp;&amp;(Ce=new ee,bt(Ne,Ce)),Ge(Ze,Ce)}})},(r,e,t)=&gt;{var n=t(17),o=t(10),i=t(23),s=t(80),a=t(25),l=t(52),u=function(){},d=[],c=a("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=n(p.exec),f=!p.exec(u),m=function(b){if(!i(b))return!1;try{return c(u,d,b),!0}catch(C){return!1}},g=function(b){if(!i(b))return!1;switch(s(b)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(p,l(b))}catch(C){return!0}};g.sham=!0,r.exports=!c||o(function(){var v;return m(m.call)||!m(Object)||!m(function(){v=!0})||v})?g:m},r=&gt;{var e=TypeError;r.exports=function(t,n){if(t&lt;n)throw e("Not enough arguments");return t}},(r,e,t)=&gt;{var n=t(11),o=t(40),i=t(26),s=t(123),a=RegExp.prototype;r.exports=function(l){var u=l.flags;return u===void 0&amp;&amp;!("flags"in a)&amp;&amp;!o(l,"flags")&amp;&amp;i(a,l)?n(s,l):u}},(r,e,t)=&gt;{"use strict";var n=t(48);r.exports=function(){var o=n(this),i="";return o.hasIndices&amp;&amp;(i+="d"),o.global&amp;&amp;(i+="g"),o.ignoreCase&amp;&amp;(i+="i"),o.multiline&amp;&amp;(i+="m"),o.dotAll&amp;&amp;(i+="s"),o.unicode&amp;&amp;(i+="u"),o.unicodeSets&amp;&amp;(i+="v"),o.sticky&amp;&amp;(i+="y"),i}},(r,e,t)=&gt;{var n=t(10),o=t(14);r.exports=!n(function(){var i=Error("a");return"stack"in i?(Object.defineProperty(i,"stack",o(1,7)),i.stack!==7):!0})},(r,e,t)=&gt;{var n=t(126),o=t(127);r.exports=!n&amp;&amp;!o&amp;&amp;typeof window=="object"&amp;&amp;typeof document=="object"},r=&gt;{r.exports=typeof Deno=="object"&amp;&amp;Deno&amp;&amp;typeof Deno.version=="object"},(r,e,t)=&gt;{var n=t(18),o=t(7);r.exports=n(o.process)=="process"},(r,e,t)=&gt;{var n=t(7);r.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=&gt;{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(r,e){_checkPrivateRedeclaration(r,e),e.add(r)}function _classPrivateMethodGet(r,e,t){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(r,e,t){_checkPrivateRedeclaration(r,e),e.set(r,t)}function _checkPrivateRedeclaration(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(r,e,t){var n=_classExtractFieldDescriptor(r,e,"set");return _classApplyDescriptorSet(r,n,t),t}function _classPrivateFieldGet(r,e){var t=_classExtractFieldDescriptor(r,e,"get");return _classApplyDescriptorGet(r,t)}function _classExtractFieldDescriptor(r,e,t){if(!e.has(r))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(r)}function _classStaticPrivateFieldSpecSet(r,e,t,n){return _classCheckPrivateStaticAccess(r,e),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(r,t,n),n}function _classApplyDescriptorSet(r,e,t){if(e.set)e.set.call(r,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function _classStaticPrivateFieldSpecGet(r,e,t){return _classCheckPrivateStaticAccess(r,e),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(r,t)}function _classCheckPrivateStaticFieldDescriptor(r,e){if(r===void 0)throw new TypeError("attempted to "+e+" private static field before its declaration")}function _classCheckPrivateStaticAccess(r,e){if(r!==e)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(r,e){return e.get?e.get.call(r):e.value}let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){let{NodeCanvasFactory:r,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=r,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;function setPDFNetworkStreamFactory(r){createPDFNetworkStream=r}function getDocument(r){let e=new PDFDocumentLoadingTask,t;if(typeof r=="string"||r instanceof URL)t={url:r};else if((0,_util.isArrayBuffer)(r))t={data:r};else if(r instanceof PDFDataRangeTransport)t={range:r};else{if(typeof r!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!r.url&amp;&amp;!r.data&amp;&amp;!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=r}let n=Object.create(null),o=null,i=null;for(let a in t){let l=t[a];switch(a){case"url":if(typeof window!="undefined")try{n[a]=new URL(l,window.location).href;continue}catch(u){(0,_util.warn)(`Cannot create valid URL: "${u}".`)}else if(typeof l=="string"||l instanceof URL){n[a]=l.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=l;continue;case"worker":i=l;continue;case"data":if(_is_node.isNodeJS&amp;&amp;typeof Buffer!="undefined"&amp;&amp;l instanceof Buffer)n[a]=new Uint8Array(l);else{if(l instanceof Uint8Array)break;if(typeof l=="string")n[a]=(0,_util.stringToBytes)(l);else if(typeof l=="object"&amp;&amp;l!==null&amp;&amp;!isNaN(l.length))n[a]=new Uint8Array(l);else if((0,_util.isArrayBuffer)(l))n[a]=new Uint8Array(l);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}n[a]=l}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=n.stopAtErrors!==!0,n.fontExtraProperties=n.fontExtraProperties===!0,n.pdfBug=n.pdfBug===!0,n.enableXfa=n.enableXfa===!0,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize&lt;1)&amp;&amp;(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof n.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(n.docBaseUrl))&amp;&amp;(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize&lt;-1)&amp;&amp;(n.maxImageSize=-1),typeof n.cMapUrl!="string"&amp;&amp;(n.cMapUrl=null),typeof n.standardFontDataUrl!="string"&amp;&amp;(n.standardFontDataUrl=null),typeof n.useWorkerFetch!="boolean"&amp;&amp;(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&amp;&amp;n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof n.isEvalSupported!="boolean"&amp;&amp;(n.isEvalSupported=!0),typeof n.disableFontFace!="boolean"&amp;&amp;(n.disableFontFace=_is_node.isNodeJS),typeof n.useSystemFonts!="boolean"&amp;&amp;(n.useSystemFonts=!_is_node.isNodeJS&amp;&amp;!n.disableFontFace),(typeof n.ownerDocument!="object"||n.ownerDocument===null)&amp;&amp;(n.ownerDocument=globalThis.document),typeof n.disableRange!="boolean"&amp;&amp;(n.disableRange=!1),typeof n.disableStream!="boolean"&amp;&amp;(n.disableStream=!1),typeof n.disableAutoFetch!="boolean"&amp;&amp;(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!i){let a={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=a.port?_PDFWorker.fromPort(a):new _PDFWorker(a),e._worker=i}let s=e.docId;return i.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");let a=_fetchDocument(i,n,o,s),l=new Promise(function(u){let d;o?d=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},o):n.data||(d=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),u(d)});return Promise.all([a,l]).then(function(u){let[d,c]=u;if(e.destroyed)throw new Error("Loading aborted");let p=new _message_handler.MessageHandler(s,d,i.port),h=new WorkerTransport(p,e,c,n);e._transport=h,p.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(r,e,t,n){if(r.destroyed)throw new Error("Worker was destroyed");t&amp;&amp;(e.length=t.length,e.initialData=t.initialData,e.progressiveDone=t.progressiveDone,e.contentDispositionFilename=t.contentDispositionFilename);let o=await r.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(e.data&amp;&amp;(e.data=null),r.destroyed)throw new Error("Worker was destroyed");return o}class PDFDocumentLoadingTask{constructor(){var e,t;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(e=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=e++,e)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)===null||e===void 0?void 0:e.destroy()),this._transport=null,this._worker&amp;&amp;(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(e,t){let n=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:!1,o=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=&gt;{for(let n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=&gt;{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=&gt;{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=&gt;((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size&lt;=0&amp;&amp;(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,n,o){let i=arguments.length&gt;4&amp;&amp;arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=e,this._pageInfo=t,this._ownerDocument=o,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:o=0,dontFlip:i=!1}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:o,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},t=this._transport.getRenderingIntent(e),n=this._annotationPromises.get(t.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,n),n=n.then(o=&gt;{for(let i of o)i.titleObj!==void 0&amp;&amp;Object.defineProperty(i,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),i.titleObj.str}}),i.contentsObj!==void 0&amp;&amp;Object.defineProperty(i,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),i.contentsObj.str}});return o})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)===null||e===void 0?void 0:e.children[this._pageIndex])||null}render(e){var t,n,o;let{canvasContext:i,viewport:s,intent:a="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:u=null,imageLayer:d=null,canvasFactory:c=null,background:p=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:g=null}=e;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&amp;&amp;((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&amp;&amp;l===_util.AnnotationMode.ENABLE&amp;&amp;(l=_util.AnnotationMode.ENABLE_FORMS)),((n=arguments[0])===null||n===void 0?void 0:n.includeAnnotationStorage)!==void 0&amp;&amp;((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&amp;&amp;l===_util.AnnotationMode.ENABLE&amp;&amp;(l=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&amp;&amp;this._stats.time("Overall");let v=this._transport.getRenderingIntent(a,l,g);this.pendingCleanup=!1,h||(h=this._transport.getOptionalContentConfig());let b=this._intentStates.get(v.cacheKey);b||(b=Object.create(null),this._intentStates.set(v.cacheKey,b)),b.streamReaderCancelTimeout&amp;&amp;(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);let C=c||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),x=!!(v.renderingIntent&amp;_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=(0,_util.createPromiseCapability)(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&amp;&amp;this._stats.time("Page Request"),this._pumpOperatorList(v));let y=w=&gt;{b.renderTasks.delete(S),(this.cleanupAfterRender||x)&amp;&amp;(this.pendingCleanup=!0),this._tryCleanup(),w?(S.capability.reject(w),this._abortOperatorList({intentState:b,reason:w instanceof Error?w:new Error(w)})):S.capability.resolve(),this._stats&amp;&amp;(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},S=new InternalRenderTask({callback:y,params:{canvasContext:i,viewport:s,transform:u,imageLayer:d,background:p},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:C,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:m});((o=b).renderTasks||(o.renderTasks=new Set)).add(S);let T=S.task;return Promise.all([b.displayReadyCapability.promise,h]).then(w=&gt;{let[k,A]=w;if(this.pendingCleanup){y();return}this._stats&amp;&amp;this._stats.time("Rendering"),S.initializeGraphics({transparency:k,optionalContentConfig:A}),S.operatorListChanged()}).catch(y),T}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};function o(){s.operatorList.lastChunk&amp;&amp;(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(a))}let i=this._transport.getRenderingIntent(e,t,n,!0),s=this._intentStates.get(i.cacheKey);s||(s=Object.create(null),this._intentStates.set(i.cacheKey,s));let a;if(!s.opListReadCapability){var l;a=Object.create(null),a.operatorListChanged=o,s.opListReadCapability=(0,_util.createPromiseCapability)(),((l=s).renderTasks||(l.renderTasks=new Set)).add(a),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&amp;&amp;this._stats.time("Page Request"),this._pumpOperatorList(i)}return s.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:e=!1,includeMarkedContent:t=!1}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},n=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:t===!0},{highWaterMark:n,size(o){return o.items.length}})}getTextContent(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(n=&gt;_xfa_text.XfaText.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,o){function i(){s.read().then(function(l){let{value:u,done:d}=l;if(d){n(a);return}Object.assign(a.styles,u.styles),a.items.push(...u.items),i()},o)}let s=t.getReader(),a={items:[],styles:Object.create(null)};i()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();this.objs.clear();for(let t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(let{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size&gt;0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&amp;&amp;this._stats&amp;&amp;(this._stats=new _display_utils.StatTimer);for(let t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,t){let n=this._intentStates.get(t);!n||(this._stats&amp;&amp;this._stats.timeEnd("Page Request"),n.displayReadyCapability&amp;&amp;n.displayReadyCapability.resolve(e))}_renderPageChunk(e,t){for(let n=0,o=e.length;n&lt;o;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&amp;&amp;this._tryCleanup()}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageMap:o}=e,s=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o}).getReader(),a=this._intentStates.get(n);a.streamReader=s;let l=()=&gt;{s.read().then(u=&gt;{let{value:d,done:c}=u;if(c){a.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,a),l())},u=&gt;{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(let d of a.renderTasks)d.operatorListChanged();this._tryCleanup()}if(a.displayReadyCapability)a.displayReadyCapability.reject(u);else if(a.opListReadCapability)a.opListReadCapability.reject(u);else throw u}})};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:o=!1}=e;if(!!t.streamReader){if(!o){if(t.renderTasks.size&gt;0)return;if(n instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=&gt;{this._abortOperatorList({intentState:t,reason:n,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=&gt;{}),t.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,t){let n={data:structuredClone(e,t)};this._deferred.then(()=&gt;{for(let o of this._listeners)o.call(this,n)})}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){let n=this._listeners.indexOf(t);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&amp;&amp;typeof ta=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;let r=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;r&amp;&amp;(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,e){let t;try{if(t=new URL(r),!t.origin||t.origin==="null")return!1}catch(o){return!1}let n=new URL(e,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(r){let e=`importScripts("${r}");`;return URL.createObjectURL(new Blob([e]))}}class _PDFWorker{constructor(){let{name:r=null,port:e=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};if(e&amp;&amp;_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&amp;&amp;!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));let e=new Worker(r),t=new _message_handler.MessageHandler("main","worker",e),n=()=&gt;{e.removeEventListener("error",o),t.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=&gt;{this._webWorker||n()};e.addEventListener("error",o),t.on("test",s=&gt;{if(e.removeEventListener("error",o),this.destroyed){n();return}s?(this._messageHandler=t,this._port=e,this._webWorker=e,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),e.terminate())}),t.on("ready",s=&gt;{if(e.removeEventListener("error",o),this.destroyed){n();return}try{i()}catch(a){this._setupFakeWorker()}});let i=()=&gt;{let s=new Uint8Array;t.send("test",s,[s.buffer])};i();return}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=&gt;{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new LoopbackPort;this._port=e;let t=`fake${PDFWorkerUtil.fakeWorkerId++}`,n=new _message_handler.MessageHandler(t+"_worker",t,e);r.setup(n,e);let o=new _message_handler.MessageHandler(t,t+"_worker",e);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(r=&gt;{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&amp;&amp;(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(_PDFWorker,_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&amp;&amp;(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!(r!=null&amp;&amp;r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).has(r.port)?_classStaticPrivateFieldSpecGet(this,_PDFWorker,_workerPorts).get(r.port):new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var r;return((r=globalThis.pdfjsWorker)===null||r===void 0?void 0:r.WorkerMessageHandler)||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){let loader=async()=&gt;{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&amp;&amp;typeof ta=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(e,t,n,o){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,o.useWorkerFetch||(this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.StandardFontDataFactory=new o.StandardFontDataFactory({baseUrl:o.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(e){let t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:null,o=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:!1,i=_util.RenderingIntentFlag.DISPLAY,s=null;switch(e){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(i&amp;_util.RenderingIntentFlag.PRINT&amp;&amp;n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return o&amp;&amp;(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&amp;&amp;this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of _classPrivateFieldGet(this,_pageCache).values())e.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&amp;&amp;this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=&gt;{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&amp;&amp;this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&amp;&amp;(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,o)=&gt;{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=&gt;{this._lastProgress={loaded:i.loaded,total:i.total}},o.onPull=()=&gt;{this._fullReader.read().then(function(i){let{value:s,done:a}=i;if(a){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(s),"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(s),1,[s])}).catch(i=&gt;{o.error(i)})},o.onCancel=i=&gt;{this._fullReader.cancel(i),o.ready.catch(s=&gt;{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",n=&gt;{let o=(0,_util.createPromiseCapability)(),i=this._fullReader;return i.headersReady.then(()=&gt;{if(!i.isStreamingSupported||!i.isRangeSupported){if(this._lastProgress){var s;(s=t.onProgress)===null||s===void 0||s.call(t,this._lastProgress)}i.onProgress=a=&gt;{var l;(l=t.onProgress)===null||l===void 0||l.call(t,{loaded:a.loaded,total:a.total})}}o.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},o.reject),o.promise}),e.on("GetRangeReader",(n,o)=&gt;{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){o.close();return}o.onPull=()=&gt;{i.read().then(function(s){let{value:a,done:l}=s;if(l){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(a),"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(a),1,[a])}).catch(s=&gt;{o.error(s)})},o.onCancel=s=&gt;{i.cancel(s),o.ready.catch(a=&gt;{if(!this.destroyed)throw a})}}),e.on("GetDoc",n=&gt;{let{pdfInfo:o}=n;this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(o,this))}),e.on("DocException",function(n){let o;switch(n.name){case"PasswordException":o=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":o=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(o)}),e.on("PasswordRequest",n=&gt;{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){let o=i=&gt;{i instanceof Error?this._passwordCapability.reject(i):this._passwordCapability.resolve({password:i})};try{t.onPassword(o,n.code)}catch(i){this._passwordCapability.reject(i)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),e.on("DataLoaded",n=&gt;{var o;(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=&gt;{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",n=&gt;{var o;let[i,s,a]=n;if(!this.destroyed&amp;&amp;!this.commonObjs.has(i))switch(s){case"Font":let l=this._params;if("error"in a){let c=a.error;(0,_util.warn)(`Error during font loading: ${c}`),this.commonObjs.resolve(i,c);break}let u=null;l.pdfBug&amp;&amp;(o=globalThis.FontInspector)!==null&amp;&amp;o!==void 0&amp;&amp;o.enabled&amp;&amp;(u={registerFont(c,p){globalThis.FontInspector.fontAdded(c,p)}});let d=new _font_loader.FontFaceObject(a,{isEvalSupported:l.isEvalSupported,disableFontFace:l.disableFontFace,ignoreErrors:l.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:u});this.fontLoader.bind(d).catch(c=&gt;e.sendWithPromise("FontFallback",{id:i})).finally(()=&gt;{!l.fontExtraProperties&amp;&amp;d.data&amp;&amp;(d.data=null),this.commonObjs.resolve(i,d)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${s}`)}}),e.on("obj",n=&gt;{let[o,i,s,a]=n;if(this.destroyed)return;let l=_classPrivateFieldGet(this,_pageCache).get(i);if(!l.objs.has(o))switch(s){case"Image":l.objs.resolve(o,a);let d=8e6;if(a){let c;if(a.bitmap){let{bitmap:p,width:h,height:f}=a;c=h*f*4,l._bitmaps.add(p)}else{var u;c=((u=a.data)===null||u===void 0?void 0:u.length)||0}c&gt;d&amp;&amp;(l.cleanupAfterRender=!0)}break;case"Pattern":l.objs.resolve(o,a);break;default:throw new Error(`Got unknown object type ${s}`)}}),e.on("DocProgress",n=&gt;{var o;this.destroyed||(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.loaded,total:n.total})}),e.on("DocStats",n=&gt;{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",n=&gt;this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=&gt;this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(e){var t,n;let{featureId:o}=e;this.destroyed||(t=(n=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(n,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e&lt;=0||e&gt;this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=_classPrivateFieldGet(this,_pagePromises).get(t);if(n)return n;let o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=&gt;{if(this.destroyed)throw new Error("Transport destroyed");let s=new PDFPageProxy(t,i,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,s),s});return _classPrivateFieldGet(this,_pagePromises).set(t,o),o}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num&lt;0||!Number.isInteger(e.gen)||e.gen&lt;0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(){var e,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(e=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&amp;&amp;e!==void 0?e:null}).finally(()=&gt;{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=&gt;new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=&gt;{var t,n,o,i;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(t=(n=this._fullReader)===null||n===void 0?void 0:n.filename)!==null&amp;&amp;t!==void 0?t:null,contentLength:(o=(i=this._fullReader)===null||i===void 0?void 0:i.contentLength)!==null&amp;&amp;o!==void 0?o:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){let e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(e){let t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;if(t){let o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);return o.capability.promise.then(()=&gt;t(o.data)),null}let n=_classPrivateFieldGet(this,_objs)[e];if(!(n!=null&amp;&amp;n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=_classPrivateFieldGet(this,_objs)[e];return(t==null?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null,n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);n.data=t,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(r){let e=_classPrivateFieldGet(this,_objs)[r];return e||(_classPrivateFieldGet(this,_objs)[r]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,e),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){let{separateAnnots:e}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return e.form||e.canvas&amp;&amp;(t==null?void 0:t.size)&gt;0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:n,objs:o,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:u,useRequestAnimationFrame:d=!1,pdfBug:c=!1,pageColors:p=null}=e;this.callback=t,this.params=n,this.objs=o,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=u,this._pdfBug=c,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&amp;&amp;typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t;let{transparency:n=!1,optionalContentConfig:o}=e;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&amp;&amp;(t=globalThis.StepperManager)!==null&amp;&amp;t!==void 0&amp;&amp;t.enabled&amp;&amp;(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:s,transform:a,imageLayer:l,background:u}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,l,o,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:n,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&amp;&amp;this.graphicsReadyCallback()}cancel(){let e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&amp;&amp;this.gfx.endDrawing(),this._canvas&amp;&amp;_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&amp;&amp;this.stepper.updateOperatorList(this.operatorList),!this.running&amp;&amp;this._continue()}_continue(){this.running=!0,!this.cancelled&amp;&amp;(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=&gt;{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&amp;&amp;(this.running=!1,this.operatorList.lastChunk&amp;&amp;(this.gfx.endDrawing(),this._canvas&amp;&amp;_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={writable:!0,value:new WeakSet};let version="2.16.105";exports.version=version;let build="172ccdbe5";exports.build=build},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=t(1),o=t(131),i=t(135);function s(x,y,S){h(x,y),y.set(x,S)}function a(x,y){var S=d(x,y,"get");return l(x,S)}function l(x,y){return y.get?y.get.call(x):y.value}function u(x,y,S){var T=d(x,y,"set");return c(x,T,S),S}function d(x,y,S){if(!y.has(x))throw new TypeError("attempted to "+S+" private field on non-instance");return y.get(x)}function c(x,y,S){if(y.set)y.set.call(x,S);else{if(!y.writable)throw new TypeError("attempted to set read only private field");y.value=S}}function p(x,y){h(x,y),y.add(x)}function h(x,y){if(y.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(x,y,S){if(!y.has(x))throw new TypeError("attempted to get private field on non-instance");return S}var m=new WeakSet;class g{constructor(){p(this,m),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(y,S){let T=this._storage.get(y);return T===void 0?S:Object.assign(S,T)}getRawValue(y){return this._storage.get(y)}remove(y){if(this._storage.delete(y),this._storage.size===0&amp;&amp;this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let S of this._storage.values())if(S instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(y,S){let T=this._storage.get(y),w=!1;if(T!==void 0)for(let[k,A]of Object.entries(S))T[k]!==A&amp;&amp;(w=!0,T[k]=A);else w=!0,this._storage.set(y,S);w&amp;&amp;f(this,m,v).call(this),S instanceof o.AnnotationEditor&amp;&amp;typeof this.onAnnotationEditor=="function"&amp;&amp;this.onAnnotationEditor(S.constructor._type)}has(y){return this._storage.has(y)}getAll(){return this._storage.size&gt;0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&amp;&amp;(this._modified=!1,typeof this.onResetModified=="function"&amp;&amp;this.onResetModified())}get print(){return new C(this)}get serializable(){if(this._storage.size===0)return null;let y=new Map;for(let[S,T]of this._storage){let w=T instanceof o.AnnotationEditor?T.serialize():T;w&amp;&amp;y.set(S,w)}return y}static getHash(y){if(!y)return"";let S=new i.MurmurHash3_64;for(let[T,w]of y)S.update(`${T}:${JSON.stringify(w)}`);return S.hexdigest()}}e.AnnotationStorage=g;function v(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&amp;&amp;this.onSetModified())}var b=new WeakMap;class C extends g{constructor(y){super(),s(this,b,{writable:!0,value:null}),u(this,b,structuredClone(y.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,b)}}e.PrintAnnotationStorage=C},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=t(132),o=t(1);function i(x,y,S){return y in x?Object.defineProperty(x,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):x[y]=S,x}function s(x,y,S){a(x,y),y.set(x,S)}function a(x,y){if(y.has(x))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(x,y,S){var T=c(x,y,"set");return u(x,T,S),S}function u(x,y,S){if(y.set)y.set.call(x,S);else{if(!y.writable)throw new TypeError("attempted to set read only private field");y.value=S}}function d(x,y){var S=c(x,y,"get");return p(x,S)}function c(x,y,S){if(!y.has(x))throw new TypeError("attempted to "+S+" private field on non-instance");return y.get(x)}function p(x,y){return y.get?y.get.call(x):y.value}var h=new WeakMap,f=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap;class C{constructor(y){s(this,h,{writable:!0,value:this.focusin.bind(this)}),s(this,f,{writable:!0,value:this.focusout.bind(this)}),s(this,m,{writable:!0,value:!1}),s(this,g,{writable:!0,value:!1}),s(this,v,{writable:!0,value:!1}),s(this,b,{writable:!0,value:C._zIndex++}),this.constructor===C&amp;&amp;(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=y.parent,this.id=y.id,this.width=this.height=null,this.pageIndex=y.parent.pageIndex,this.name=y.name,this.div=null;let[S,T]=this.parent.viewportBaseDimensions;this.x=y.x/S,this.y=y.y/T,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,b)}focusin(y){d(this,m)?l(this,m,!1):this.parent.setSelected(this)}focusout(y){if(!this.isAttachedToDOM)return;let S=y.relatedTarget;S!=null&amp;&amp;S.closest(`#${this.id}`)||(y.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(y){let S=this.parent.div.getBoundingClientRect();this.startX=y.clientX-S.x,this.startY=y.clientY-S.y,y.dataTransfer.setData("text/plain",this.id),y.dataTransfer.effectAllowed="move"}setAt(y,S,T,w){let[k,A]=this.parent.viewportBaseDimensions;[T,w]=this.screenToPageTranslation(T,w),this.x=(y+T)/k,this.y=(S+w)/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(y,S){let[T,w]=this.parent.viewportBaseDimensions;[y,S]=this.screenToPageTranslation(y,S),this.x+=y/T,this.y+=S/w,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(y,S){let{rotation:T}=this.parent.viewport;switch(T){case 90:return[S,-y];case 180:return[-y,-S];case 270:return[-S,y];default:return[y,S]}}setDims(y,S){let[T,w]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*y/T}%`,this.div.style.height=`${100*S/w}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",d(this,h)),this.div.addEventListener("focusout",d(this,f));let[y,S]=this.getInitialTranslation();return this.translate(y,S),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(y){let S=n.KeyboardManager.platform.isMac;if(y.button!==0||y.ctrlKey&amp;&amp;S){y.preventDefault();return}y.ctrlKey&amp;&amp;!S||y.shiftKey||y.metaKey&amp;&amp;S?this.parent.toggleSelected(this):this.parent.setSelected(this),l(this,m,!0)}getRect(y,S){let[T,w]=this.parent.viewportBaseDimensions,[k,A]=this.parent.pageDimensions,I=k*y/T,E=A*S/w,O=this.x*k,Q=this.y*A,j=this.width*k,U=this.height*A;switch(this.rotation){case 0:return[O+I,A-Q-E-U,O+I+j,A-Q-E];case 90:return[O+E,A-Q+I,O+E+U,A-Q+I+j];case 180:return[O-I-j,A-Q+E,O-I,A-Q+E+U];case 270:return[O-E-U,A-Q-I-j,O-E,A-Q-I];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(y,S){let[T,w,k,A]=y,I=k-T,E=A-w;switch(this.rotation){case 0:return[T,S-A,I,E];case 90:return[T,S-w,E,I];case 180:return[k,S-w,I,E];case 270:return[k,S-A,E,I];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){l(this,v,!0)}disableEditMode(){l(this,v,!1)}isInEditMode(){return d(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&amp;&amp;!this.isAttachedToDOM}rebuild(){var y;(y=this.div)===null||y===void 0||y.addEventListener("focusin",d(this,h))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(y,S){let T=new this.prototype.constructor({parent:S,id:S.getNextId()});T.rotation=y.rotation;let[w,k]=S.pageDimensions,[A,I,E,O]=T.getRectInCurrentCoords(y.rect,k);return T.x=A/w,T.y=I/k,T.width=E/w,T.height=O/k,T}remove(){this.div.removeEventListener("focusin",d(this,h)),this.div.removeEventListener("focusout",d(this,f)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var y;(y=this.div)===null||y===void 0||y.classList.add("selectedEditor")}unselect(){var y;(y=this.div)===null||y===void 0||y.classList.remove("selectedEditor")}updateParams(y,S){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return d(this,g)}set isEditing(y){l(this,g,y),y?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=C,i(C,"_colorManager",new n.ColorManager),i(C,"_zIndex",1)},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=m,e.opacityToHex=g;var n=t(1),o=t(133);function i(_e,xe,Ge){return xe in _e?Object.defineProperty(_e,xe,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):_e[xe]=Ge,_e}function s(_e,xe){u(_e,xe),xe.add(_e)}function a(_e,xe,Ge){if(!xe.has(_e))throw new TypeError("attempted to get private field on non-instance");return Ge}function l(_e,xe,Ge){u(_e,xe),xe.set(_e,Ge)}function u(_e,xe){if(xe.has(_e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(_e,xe,Ge){var ct=h(_e,xe,"set");return c(_e,ct,Ge),Ge}function c(_e,xe,Ge){if(xe.set)xe.set.call(_e,Ge);else{if(!xe.writable)throw new TypeError("attempted to set read only private field");xe.value=Ge}}function p(_e,xe){var Ge=h(_e,xe,"get");return f(_e,Ge)}function h(_e,xe,Ge){if(!xe.has(_e))throw new TypeError("attempted to "+Ge+" private field on non-instance");return xe.get(_e)}function f(_e,xe){return xe.get?xe.get.call(_e):xe.value}function m(_e,xe,Ge){for(let ct of Ge)xe.addEventListener(ct,_e[ct].bind(_e))}function g(_e){return Math.round(Math.min(255,Math.max(1,255*_e))).toString(16).padStart(2,"0")}var v=new WeakMap;class b{constructor(){l(this,v,{writable:!0,value:0})}getId(){var xe,Ge;return`${n.AnnotationEditorPrefix}${d(this,v,(xe=p(this,v),Ge=xe++,xe)),Ge}`}}var C=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap;class T{constructor(){let xe=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:128;l(this,C,{writable:!0,value:[]}),l(this,x,{writable:!0,value:!1}),l(this,y,{writable:!0,value:void 0}),l(this,S,{writable:!0,value:-1}),d(this,y,xe)}add(xe){let{cmd:Ge,undo:ct,mustExec:bt,type:Be=NaN,overwriteIfSameType:Ze=!1,keepUndo:St=!1}=xe;if(bt&amp;&amp;Ge(),p(this,x))return;let Ne={cmd:Ge,undo:ct,type:Be};if(p(this,S)===-1){p(this,C).length&gt;0&amp;&amp;(p(this,C).length=0),d(this,S,0),p(this,C).push(Ne);return}if(Ze&amp;&amp;p(this,C)[p(this,S)].type===Be){St&amp;&amp;(Ne.undo=p(this,C)[p(this,S)].undo),p(this,C)[p(this,S)]=Ne;return}let Ce=p(this,S)+1;Ce===p(this,y)?p(this,C).splice(0,1):(d(this,S,Ce),Ce&lt;p(this,C).length&amp;&amp;p(this,C).splice(Ce)),p(this,C).push(Ne)}undo(){p(this,S)!==-1&amp;&amp;(d(this,x,!0),p(this,C)[p(this,S)].undo(),d(this,x,!1),d(this,S,p(this,S)-1))}redo(){p(this,S)&lt;p(this,C).length-1&amp;&amp;(d(this,S,p(this,S)+1),d(this,x,!0),p(this,C)[p(this,S)].cmd(),d(this,x,!1))}hasSomethingToUndo(){return p(this,S)!==-1}hasSomethingToRedo(){return p(this,S)&lt;p(this,C).length-1}destroy(){d(this,C,null)}}e.CommandManager=T;var w=new WeakSet;class k{constructor(xe){s(this,w),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let Ge=k.platform.isMac;for(let[ct,bt]of xe)for(let Be of ct){let Ze=Be.startsWith("mac+");Ge&amp;&amp;Ze?(this.callbacks.set(Be.slice(4),bt),this.allKeys.add(Be.split("+").at(-1))):!Ge&amp;&amp;!Ze&amp;&amp;(this.callbacks.set(Be,bt),this.allKeys.add(Be.split("+").at(-1)))}}static get platform(){let xe=typeof navigator!="undefined"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:xe.includes("Win"),isMac:xe.includes("Mac")})}exec(xe,Ge){if(!this.allKeys.has(Ge.key))return;let ct=this.callbacks.get(a(this,w,A).call(this,Ge));!ct||(ct.bind(xe)(),Ge.stopPropagation(),Ge.preventDefault())}}e.KeyboardManager=k;function A(_e){_e.altKey&amp;&amp;this.buffer.push("alt"),_e.ctrlKey&amp;&amp;this.buffer.push("ctrl"),_e.metaKey&amp;&amp;this.buffer.push("meta"),_e.shiftKey&amp;&amp;this.buffer.push("shift"),this.buffer.push(_e.key);let xe=this.buffer.join("+");return this.buffer.length=0,xe}var I=new WeakMap;class E{constructor(){l(this,I,{writable:!0,value:null})}copy(xe){!xe||(Array.isArray(xe)?d(this,I,xe.map(Ge=&gt;Ge.serialize())):d(this,I,[xe.serialize()]),d(this,I,p(this,I).filter(Ge=&gt;!!Ge)),p(this,I).length===0&amp;&amp;d(this,I,null))}paste(){return p(this,I)}isEmpty(){return p(this,I)===null}destroy(){d(this,I,null)}}class O{get _colors(){let xe=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(xe),(0,n.shadow)(this,"_colors",xe)}convert(xe){let Ge=(0,o.getRGB)(xe);if(!window.matchMedia("(forced-colors: active)").matches)return Ge;for(let[ct,bt]of this._colors)if(bt.every((Be,Ze)=&gt;Be===Ge[Ze]))return O._colorsMapping.get(ct);return Ge}getHexCode(xe){let Ge=this._colors.get(xe);return Ge?n.Util.makeHexColor(...Ge):xe}}e.ColorManager=O,i(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Q=new WeakMap,j=new WeakMap,U=new WeakMap,B=new WeakMap,z=new WeakMap,N=new WeakMap,V=new WeakMap,re=new WeakMap,ce=new WeakMap,ge=new WeakMap,ae=new WeakMap,Y=new WeakMap,W=new WeakMap,G=new WeakMap,ee=new WeakMap,F=new WeakMap,L=new WeakMap,$=new WeakSet,P=new WeakSet,X=new WeakSet,K=new WeakSet,R=new WeakSet,H=new WeakSet,J=new WeakSet,te=new WeakSet,de=new WeakSet;class se{constructor(xe,Ge){s(this,de),s(this,te),s(this,J),s(this,H),s(this,R),s(this,K),s(this,X),s(this,P),s(this,$),l(this,Q,{writable:!0,value:null}),l(this,j,{writable:!0,value:new Map}),l(this,U,{writable:!0,value:new Map}),l(this,B,{writable:!0,value:new E}),l(this,z,{writable:!0,value:new T}),l(this,N,{writable:!0,value:0}),l(this,V,{writable:!0,value:null}),l(this,re,{writable:!0,value:null}),l(this,ce,{writable:!0,value:new b}),l(this,ge,{writable:!0,value:!1}),l(this,ae,{writable:!0,value:n.AnnotationEditorType.NONE}),l(this,Y,{writable:!0,value:new Set}),l(this,W,{writable:!0,value:this.keydown.bind(this)}),l(this,G,{writable:!0,value:this.onEditingAction.bind(this)}),l(this,ee,{writable:!0,value:this.onPageChanging.bind(this)}),l(this,F,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),l(this,L,{writable:!0,value:null}),d(this,L,xe),d(this,re,Ge),p(this,re)._on("editingaction",p(this,G)),p(this,re)._on("pagechanging",p(this,ee))}destroy(){a(this,P,Pe).call(this),p(this,re)._off("editingaction",p(this,G)),p(this,re)._off("pagechanging",p(this,ee));for(let xe of p(this,U).values())xe.destroy();p(this,U).clear(),p(this,j).clear(),d(this,Q,null),p(this,Y).clear(),p(this,B).destroy(),p(this,z).destroy()}onPageChanging(xe){let{pageNumber:Ge}=xe;d(this,N,Ge-1)}focusMainContainer(){p(this,L).focus()}keydown(xe){var Ge;(Ge=this.getActive())!==null&amp;&amp;Ge!==void 0&amp;&amp;Ge.shouldGetKeyboardEvents()||se._keyboardManager.exec(this,xe)}onEditingAction(xe){["undo","redo","cut","copy","paste","delete","selectAll"].includes(xe.name)&amp;&amp;this[xe.name]()}setEditingState(xe){xe?(a(this,$,be).call(this),a(this,X,ke).call(this,{isEditing:p(this,ae)!==n.AnnotationEditorType.NONE,isEmpty:a(this,te,vt).call(this),hasSomethingToUndo:p(this,z).hasSomethingToUndo(),hasSomethingToRedo:p(this,z).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:p(this,B).isEmpty()})):(a(this,P,Pe).call(this),a(this,X,ke).call(this,{isEditing:!1}))}registerEditorTypes(xe){d(this,V,xe);for(let Ge of p(this,V))a(this,K,Ie).call(this,Ge.defaultPropertiesToUpdate)}getId(){return p(this,ce).getId()}addLayer(xe){p(this,U).set(xe.pageIndex,xe),p(this,ge)?xe.enable():xe.disable()}removeLayer(xe){p(this,U).delete(xe.pageIndex)}updateMode(xe){if(d(this,ae,xe),xe===n.AnnotationEditorType.NONE)this.setEditingState(!1),a(this,H,Ae).call(this);else{this.setEditingState(!0),a(this,R,Ve).call(this);for(let Ge of p(this,U).values())Ge.updateMode(xe)}}updateToolbar(xe){xe!==p(this,ae)&amp;&amp;p(this,re).dispatch("switchannotationeditormode",{source:this,mode:xe})}updateParams(xe,Ge){for(let ct of p(this,Y))ct.updateParams(xe,Ge);for(let ct of p(this,V))ct.updateDefaultParams(xe,Ge)}getEditors(xe){let Ge=[];for(let ct of p(this,j).values())ct.pageIndex===xe&amp;&amp;Ge.push(ct);return Ge}getEditor(xe){return p(this,j).get(xe)}addEditor(xe){p(this,j).set(xe.id,xe)}removeEditor(xe){p(this,j).delete(xe.id),this.unselect(xe)}setActiveEditor(xe){p(this,Q)!==xe&amp;&amp;(d(this,Q,xe),xe&amp;&amp;a(this,K,Ie).call(this,xe.propertiesToUpdate))}toggleSelected(xe){if(p(this,Y).has(xe)){p(this,Y).delete(xe),xe.unselect(),a(this,X,ke).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,Y).add(xe),xe.select(),a(this,K,Ie).call(this,xe.propertiesToUpdate),a(this,X,ke).call(this,{hasSelectedEditor:!0})}setSelected(xe){for(let Ge of p(this,Y))Ge!==xe&amp;&amp;Ge.unselect();p(this,Y).clear(),p(this,Y).add(xe),xe.select(),a(this,K,Ie).call(this,xe.propertiesToUpdate),a(this,X,ke).call(this,{hasSelectedEditor:!0})}isSelected(xe){return p(this,Y).has(xe)}unselect(xe){xe.unselect(),p(this,Y).delete(xe),a(this,X,ke).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,Y).size!==0}undo(){p(this,z).undo(),a(this,X,ke).call(this,{hasSomethingToUndo:p(this,z).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:a(this,te,vt).call(this)})}redo(){p(this,z).redo(),a(this,X,ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,z).hasSomethingToRedo(),isEmpty:a(this,te,vt).call(this)})}addCommands(xe){p(this,z).add(xe),a(this,X,ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:a(this,te,vt).call(this)})}delete(){if(p(this,Q)&amp;&amp;p(this,Q).commitOrRemove(),!this.hasSelection)return;let xe=[...p(this,Y)],Ge=()=&gt;{for(let bt of xe)bt.remove()},ct=()=&gt;{for(let bt of xe)a(this,J,lt).call(this,bt)};this.addCommands({cmd:Ge,undo:ct,mustExec:!0})}copy(){if(p(this,Q)&amp;&amp;p(this,Q).commitOrRemove(),this.hasSelection){let xe=[];for(let Ge of p(this,Y))Ge.isEmpty()||xe.push(Ge);if(xe.length===0)return;p(this,B).copy(xe),a(this,X,ke).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(p(this,B).isEmpty())return;this.unselectAll();let xe=p(this,U).get(p(this,N)),Ge=p(this,B).paste().map(Be=&gt;xe.deserialize(Be)),ct=()=&gt;{for(let Be of Ge)a(this,J,lt).call(this,Be);a(this,de,et).call(this,Ge)},bt=()=&gt;{for(let Be of Ge)Be.remove()};this.addCommands({cmd:ct,undo:bt,mustExec:!0})}selectAll(){for(let xe of p(this,Y))xe.commit();a(this,de,et).call(this,p(this,j).values())}unselectAll(){if(p(this,Q)){p(this,Q).commitOrRemove();return}if(a(this,de,et).size!==0){for(let xe of p(this,Y))xe.unselect();p(this,Y).clear(),a(this,X,ke).call(this,{hasSelectedEditor:!1})}}isActive(xe){return p(this,Q)===xe}getActive(){return p(this,Q)}getMode(){return p(this,ae)}}e.AnnotationEditorUIManager=se;function be(){p(this,L).addEventListener("keydown",p(this,W))}function Pe(){p(this,L).removeEventListener("keydown",p(this,W))}function ke(_e){Object.entries(_e).some(Ge=&gt;{let[ct,bt]=Ge;return p(this,F)[ct]!==bt})&amp;&amp;p(this,re).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,F),_e)})}function Ie(_e){p(this,re).dispatch("annotationeditorparamschanged",{source:this,details:_e})}function Ve(){if(!p(this,ge)){d(this,ge,!0);for(let _e of p(this,U).values())_e.enable()}}function Ae(){if(this.unselectAll(),p(this,ge)){d(this,ge,!1);for(let _e of p(this,U).values())_e.disable()}}function lt(_e){let xe=p(this,U).get(_e.pageIndex);xe?xe.addOrRebuild(_e):this.addEditor(_e)}function vt(){if(p(this,j).size===0)return!0;if(p(this,j).size===1)for(let _e of p(this,j).values())return _e.isEmpty();return!1}function et(_e){p(this,Y).clear();for(let xe of _e)xe.isEmpty()||(p(this,Y).add(xe),xe.select());a(this,X,ke).call(this,{hasSelectedEditor:!0})}i(se,"_keyboardManager",new k([[["ctrl+a","mac+meta+a"],se.prototype.selectAll],[["ctrl+c","mac+meta+c"],se.prototype.copy],[["ctrl+v","mac+meta+v"],se.prototype.paste],[["ctrl+x","mac+meta+x"],se.prototype.cut],[["ctrl+z","mac+meta+z"],se.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],se.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],se.prototype.delete],[["Escape","mac+Escape"],se.prototype.unselectAll]]))},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=T,e.getColorValues=E,e.getCurrentTransform=O,e.getCurrentTransformInverse=Q,e.getFilenameFromUrl=b,e.getPdfFilenameFromUrl=C,e.getRGB=I,e.getXfaPageViewport=A,e.isDataScheme=g,e.isPdfFile=v,e.isValidFetchUrl=y,e.loadScript=S;var n=t(134),o=t(1);function i(j,U,B){return U in j?Object.defineProperty(j,U,{value:B,enumerable:!0,configurable:!0,writable:!0}):j[U]=B,j}let s="http://www.w3.org/2000/svg",a="pdfjs_internal_id_";e.AnnotationPrefix=a;class l{}e.PixelsPerInch=l,i(l,"CSS",96),i(l,"PDF",72),i(l,"PDF_TO_CSS_UNITS",l.CSS/l.PDF);class u extends n.BaseCanvasFactory{constructor(){let{ownerDocument:U=globalThis.document}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};super(),this._document=U}_createCanvas(U,B){let z=this._document.createElement("canvas");return z.width=U,z.height=B,z}}e.DOMCanvasFactory=u;async function d(j){let U=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!1;if(y(j,document.baseURI)){let B=await fetch(j);if(!B.ok)throw new Error(B.statusText);return U?new Uint8Array(await B.arrayBuffer()):(0,o.stringToBytes)(await B.text())}return new Promise((B,z)=&gt;{let N=new XMLHttpRequest;N.open("GET",j,!0),U&amp;&amp;(N.responseType="arraybuffer"),N.onreadystatechange=()=&gt;{if(N.readyState===XMLHttpRequest.DONE){if(N.status===200||N.status===0){let V;if(U&amp;&amp;N.response?V=new Uint8Array(N.response):!U&amp;&amp;N.responseText&amp;&amp;(V=(0,o.stringToBytes)(N.responseText)),V){B(V);return}}z(new Error(N.statusText))}},N.send(null)})}class c extends n.BaseCMapReaderFactory{_fetchData(U,B){return d(U,this.isCompressed).then(z=&gt;({cMapData:z,compressionType:B}))}}e.DOMCMapReaderFactory=c;class p extends n.BaseStandardFontDataFactory{_fetchData(U){return d(U,!0)}}e.DOMStandardFontDataFactory=p;class h extends n.BaseSVGFactory{_createSVG(U){return document.createElementNS(s,U)}}e.DOMSVGFactory=h;class f{constructor(U){let{viewBox:B,scale:z,rotation:N,offsetX:V=0,offsetY:re=0,dontFlip:ce=!1}=U;this.viewBox=B,this.scale=z,this.rotation=N,this.offsetX=V,this.offsetY=re;let ge=(B[2]+B[0])/2,ae=(B[3]+B[1])/2,Y,W,G,ee;switch(N%=360,N&lt;0&amp;&amp;(N+=360),N){case 180:Y=-1,W=0,G=0,ee=1;break;case 90:Y=0,W=1,G=1,ee=0;break;case 270:Y=0,W=-1,G=-1,ee=0;break;case 0:Y=1,W=0,G=0,ee=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ce&amp;&amp;(G=-G,ee=-ee);let F,L,$,P;Y===0?(F=Math.abs(ae-B[1])*z+V,L=Math.abs(ge-B[0])*z+re,$=Math.abs(B[3]-B[1])*z,P=Math.abs(B[2]-B[0])*z):(F=Math.abs(ge-B[0])*z+V,L=Math.abs(ae-B[1])*z+re,$=Math.abs(B[2]-B[0])*z,P=Math.abs(B[3]-B[1])*z),this.transform=[Y*z,W*z,G*z,ee*z,F-Y*z*ge-G*z*ae,L-W*z*ge-ee*z*ae],this.width=$,this.height=P}clone(){let{scale:U=this.scale,rotation:B=this.rotation,offsetX:z=this.offsetX,offsetY:N=this.offsetY,dontFlip:V=!1}=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};return new f({viewBox:this.viewBox.slice(),scale:U,rotation:B,offsetX:z,offsetY:N,dontFlip:V})}convertToViewportPoint(U,B){return o.Util.applyTransform([U,B],this.transform)}convertToViewportRectangle(U){let B=o.Util.applyTransform([U[0],U[1]],this.transform),z=o.Util.applyTransform([U[2],U[3]],this.transform);return[B[0],B[1],z[0],z[1]]}convertToPdfPoint(U,B){return o.Util.applyInverseTransform([U,B],this.transform)}}e.PageViewport=f;class m extends o.BaseException{constructor(U,B){super(U,"RenderingCancelledException"),this.type=B}}e.RenderingCancelledException=m;function g(j){let U=j.length,B=0;for(;B&lt;U&amp;&amp;j[B].trim()==="";)B++;return j.substring(B,B+5).toLowerCase()==="data:"}function v(j){return typeof j=="string"&amp;&amp;/\.pdf$/i.test(j)}function b(j){let U=j.indexOf("#"),B=j.indexOf("?"),z=Math.min(U&gt;0?U:j.length,B&gt;0?B:j.length);return j.substring(j.lastIndexOf("/",z)+1,z)}function C(j){let U=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof j!="string")return U;if(g(j))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),U;let B=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,N=B.exec(j),V=z.exec(N[1])||z.exec(N[2])||z.exec(N[3]);if(V&amp;&amp;(V=V[0],V.includes("%")))try{V=z.exec(decodeURIComponent(V))[0]}catch(re){}return V||U}class x{constructor(){this.started=Object.create(null),this.times=[]}time(U){U in this.started&amp;&amp;(0,o.warn)(`Timer is already running for ${U}`),this.started[U]=Date.now()}timeEnd(U){U in this.started||(0,o.warn)(`Timer has not been started for ${U}`),this.times.push({name:U,start:this.started[U],end:Date.now()}),delete this.started[U]}toString(){let U=[],B=0;for(let z of this.times){let N=z.name;N.length&gt;B&amp;&amp;(B=N.length)}for(let z of this.times){let N=z.end-z.start;U.push(`${z.name.padEnd(B)} ${N}ms
`)}return U.join("")}}e.StatTimer=x;function y(j,U){try{let{protocol:B}=U?new URL(j,U):new URL(j);return B==="http:"||B==="https:"}catch(B){return!1}}function S(j){let U=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!1;return new Promise((B,z)=&gt;{let N=document.createElement("script");N.src=j,N.onload=function(V){U&amp;&amp;N.remove(),B(V)},N.onerror=function(){z(new Error(`Cannot load script at: ${N.src}`))},(document.head||document.documentElement).append(N)})}function T(j){console.log("Deprecated API usage: "+j)}let w;class k{static toDateObject(U){if(!U||typeof U!="string")return null;w||(w=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let B=w.exec(U);if(!B)return null;let z=parseInt(B[1],10),N=parseInt(B[2],10);N=N&gt;=1&amp;&amp;N&lt;=12?N-1:0;let V=parseInt(B[3],10);V=V&gt;=1&amp;&amp;V&lt;=31?V:1;let re=parseInt(B[4],10);re=re&gt;=0&amp;&amp;re&lt;=23?re:0;let ce=parseInt(B[5],10);ce=ce&gt;=0&amp;&amp;ce&lt;=59?ce:0;let ge=parseInt(B[6],10);ge=ge&gt;=0&amp;&amp;ge&lt;=59?ge:0;let ae=B[7]||"Z",Y=parseInt(B[8],10);Y=Y&gt;=0&amp;&amp;Y&lt;=23?Y:0;let W=parseInt(B[9],10)||0;return W=W&gt;=0&amp;&amp;W&lt;=59?W:0,ae==="-"?(re+=Y,ce+=W):ae==="+"&amp;&amp;(re-=Y,ce-=W),new Date(Date.UTC(z,N,V,re,ce,ge))}}e.PDFDateString=k;function A(j,U){let{scale:B=1,rotation:z=0}=U,{width:N,height:V}=j.attributes.style,re=[0,0,parseInt(N),parseInt(V)];return new f({viewBox:re,scale:B,rotation:z})}function I(j){if(j.startsWith("#")){let U=parseInt(j.slice(1),16);return[(U&amp;16711680)&gt;&gt;16,(U&amp;65280)&gt;&gt;8,U&amp;255]}return j.startsWith("rgb(")?j.slice(4,-1).split(",").map(U=&gt;parseInt(U)):j.startsWith("rgba(")?j.slice(5,-1).split(",").map(U=&gt;parseInt(U)).slice(0,3):((0,o.warn)(`Not a valid color format: "${j}"`),[0,0,0])}function E(j){let U=document.createElement("span");U.style.visibility="hidden",document.body.append(U);for(let B of j.keys()){U.style.color=B;let z=window.getComputedStyle(U).color;j.set(B,I(z))}U.remove()}function O(j){let{a:U,b:B,c:z,d:N,e:V,f:re}=j.getTransform();return[U,B,z,N,V,re]}function Q(j){let{a:U,b:B,c:z,d:N,e:V,f:re}=j.getTransform().invertSelf();return[U,B,z,N,V,re]}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=t(1);class o{constructor(){this.constructor===o&amp;&amp;(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,d){if(u&lt;=0||d&lt;=0)throw new Error("Invalid canvas size");let c=this._createCanvas(u,d);return{canvas:c,context:c.getContext("2d")}}reset(u,d,c){if(!u.canvas)throw new Error("Canvas is not specified");if(d&lt;=0||c&lt;=0)throw new Error("Invalid canvas size");u.canvas.width=d,u.canvas.height=c}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,d){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class i{constructor(u){let{baseUrl:d=null,isCompressed:c=!1}=u;this.constructor===i&amp;&amp;(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=c}async fetch(u){let{name:d}=u;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");let c=this.baseUrl+d+(this.isCompressed?".bcmap":""),p=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(c,p).catch(h=&gt;{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${c}`)})}_fetchData(u,d){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=i;class s{constructor(u){let{baseUrl:d=null}=u;this.constructor===s&amp;&amp;(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch(u){let{filename:d}=u;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");let c=`${this.baseUrl}${d}`;return this._fetchData(c).catch(p=&gt;{throw new Error(`Unable to load font data at: ${c}`)})}_fetchData(u){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=s;class a{constructor(){this.constructor===a&amp;&amp;(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,d){let c=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:!1;if(u&lt;=0||d&lt;=0)throw new Error("Invalid SVG dimensions");let p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),c||(p.setAttribute("width",`${u}px`),p.setAttribute("height",`${d}px`)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${u} ${d}`),p}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=a},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=t(1);let o=3285377520,i=4294901760,s=65535;class a{constructor(u){this.h1=u?u&amp;4294967295:o,this.h2=u?u&amp;4294967295:o}update(u){let d,c;if(typeof u=="string"){d=new Uint8Array(u.length*2),c=0;for(let T=0,w=u.length;T&lt;w;T++){let k=u.charCodeAt(T);k&lt;=255?d[c++]=k:(d[c++]=k&gt;&gt;&gt;8,d[c++]=k&amp;255)}}else if((0,n.isArrayBuffer)(u))d=u.slice(),c=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let p=c&gt;&gt;2,h=c-p*4,f=new Uint32Array(d.buffer,0,p),m=0,g=0,v=this.h1,b=this.h2,C=3432918353,x=461845907,y=C&amp;s,S=x&amp;s;for(let T=0;T&lt;p;T++)T&amp;1?(m=f[T],m=m*C&amp;i|m*y&amp;s,m=m&lt;&lt;15|m&gt;&gt;&gt;17,m=m*x&amp;i|m*S&amp;s,v^=m,v=v&lt;&lt;13|v&gt;&gt;&gt;19,v=v*5+3864292196):(g=f[T],g=g*C&amp;i|g*y&amp;s,g=g&lt;&lt;15|g&gt;&gt;&gt;17,g=g*x&amp;i|g*S&amp;s,b^=g,b=b&lt;&lt;13|b&gt;&gt;&gt;19,b=b*5+3864292196);switch(m=0,h){case 3:m^=d[p*4+2]&lt;&lt;16;case 2:m^=d[p*4+1]&lt;&lt;8;case 1:m^=d[p*4],m=m*C&amp;i|m*y&amp;s,m=m&lt;&lt;15|m&gt;&gt;&gt;17,m=m*x&amp;i|m*S&amp;s,p&amp;1?v^=m:b^=m}this.h1=v,this.h2=b}hexdigest(){let u=this.h1,d=this.h2;u^=d&gt;&gt;&gt;1,u=u*3981806797&amp;i|u*36045&amp;s,d=d*4283543511&amp;i|((d&lt;&lt;16|u&gt;&gt;&gt;16)*2950163797&amp;i)&gt;&gt;&gt;16,u^=d&gt;&gt;&gt;1,u=u*444984403&amp;i|u*60499&amp;s,d=d*3301882366&amp;i|((d&lt;&lt;16|u&gt;&gt;&gt;16)*3120437893&amp;i)&gt;&gt;&gt;16,u^=d&gt;&gt;&gt;1;let c=(u&gt;&gt;&gt;0).toString(16),p=(d&gt;&gt;&gt;0).toString(16);return c.padStart(8,"0")+p.padStart(8,"0")}}e.MurmurHash3_64=a},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=t(1);class o{constructor(l){let{docId:u,onUnsupportedFeature:d,ownerDocument:c=globalThis.document,styleElement:p=null}=l;this.constructor===o&amp;&amp;(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=u,this._onUnsupportedFeature=d,this._document=c,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(l){this.nativeFontFaces.push(l),this._document.fonts.add(l)}insertRule(l){let u=this.styleElement;u||(u=this.styleElement=this._document.createElement("style"),u.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(u));let d=u.sheet;d.insertRule(l,d.cssRules.length)}clear(){for(let l of this.nativeFontFaces)this._document.fonts.delete(l);this.nativeFontFaces.length=0,this.styleElement&amp;&amp;(this.styleElement.remove(),this.styleElement=null)}async bind(l){if(l.attached||l.missingFile)return;if(l.attached=!0,this.isFontLoadingAPISupported){let d=l.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(c){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${d.family}': '${c}'.`),l.disableFontFace=!0,c}}return}let u=l.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(d=&gt;{let c=this._queueLoadingCallback(d);this._prepareFontLoadEvent([u],[l],c)})}}_queueLoadingCallback(l){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var l;let u=!!((l=this._document)!==null&amp;&amp;l!==void 0&amp;&amp;l.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",u)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(l,u,d){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let i;e.FontLoader=i,e.FontLoader=i=class extends o{constructor(l){super(l),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let l=!1;if(typeof navigator=="undefined")l=!0;else{let u=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(u==null?void 0:u[1])&gt;=14&amp;&amp;(l=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",l)}_queueLoadingCallback(l){function u(){for((0,n.assert)(!c.done,"completeRequest() cannot be called twice."),c.done=!0;d.requests.length&gt;0&amp;&amp;d.requests[0].done;){let p=d.requests.shift();setTimeout(p.callback,0)}}let d=this.loadingContext,c={id:`pdfjs-font-loading-${d.nextRequestId++}`,done:!1,complete:u,callback:l};return d.requests.push(c),c}get _loadTestFont(){let l=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",l())}_prepareFontLoadEvent(l,u,d){function c(O,Q){return O.charCodeAt(Q)&lt;&lt;24|O.charCodeAt(Q+1)&lt;&lt;16|O.charCodeAt(Q+2)&lt;&lt;8|O.charCodeAt(Q+3)&amp;255}function p(O,Q,j,U){let B=O.substring(0,Q),z=O.substring(Q+j);return B+U+z}let h,f,m=this._document.createElement("canvas");m.width=1,m.height=1;let g=m.getContext("2d"),v=0;function b(O,Q){if(v++,v&gt;30){(0,n.warn)("Load test font never loaded."),Q();return}if(g.font="30px "+O,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]&gt;0){Q();return}setTimeout(b.bind(null,O,Q))}let C=`lt${Date.now()}${this.loadTestFontId++}`,x=this._loadTestFont;x=p(x,976,C.length,C);let S=16,T=1482184792,w=c(x,S);for(h=0,f=C.length-3;h&lt;f;h+=4)w=w-T+c(C,h)|0;h&lt;C.length&amp;&amp;(w=w-T+c(C+"XXX",h)|0),x=p(x,S,4,(0,n.string32)(w));let k=`url(data:font/opentype;base64,${btoa(x)});`,A=`@font-face {font-family:"${C}";src:${k}}`;this.insertRule(A);let I=[];for(let O of u)I.push(O.loadedName);I.push(C);let E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(let O of I){let Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=O,E.append(Q)}this._document.body.append(E),b(C,()=&gt;{E.remove(),d.complete()})}};class s{constructor(l,u){let{isEvalSupported:d=!0,disableFontFace:c=!1,ignoreErrors:p=!1,onUnsupportedFeature:h,fontRegistry:f=null}=u;this.compiledGlyphs=Object.create(null);for(let m in l)this[m]=l[m];this.isEvalSupported=d!==!1,this.disableFontFace=c===!0,this.ignoreErrors=p===!0,this._onUnsupportedFeature=h,this.fontRegistry=f}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let l;if(!this.cssFontInfo)l=new FontFace(this.loadedName,this.data,{});else{let u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&amp;&amp;(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),l=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return this.fontRegistry&amp;&amp;this.fontRegistry.registerFont(this),l}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let l=(0,n.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(l)});`,d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let c=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&amp;&amp;(c+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${c}src:${u}}`}return this.fontRegistry&amp;&amp;this.fontRegistry.registerFont(this,u),d}getPathGenerator(l,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let d;try{d=l.get(this.loadedName+"_path_"+u)}catch(c){if(!this.ignoreErrors)throw c;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${c}".`),this.compiledGlyphs[u]=function(p,h){}}if(this.isEvalSupported&amp;&amp;n.FeatureTest.isEvalSupported){let c=[];for(let p of d){let h=p.args!==void 0?p.args.join(","):"";c.push("c.",p.cmd,"(",h,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",c.join(""))}return this.compiledGlyphs[u]=function(c,p){for(let h of d)h.cmd==="scale"&amp;&amp;(h.args=[p,-p]),c[h.cmd].apply(c,h.args)}}}e.FontFaceObject=s},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=t(133),o=t(1),i=t(138),s=t(139),a=t(3);function l(ae,Y){u(ae,Y),Y.add(ae)}function u(ae,Y){if(Y.has(ae))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(ae,Y,W){if(!Y.has(ae))throw new TypeError("attempted to get private field on non-instance");return W}let c=16,p=100,h=4096,f=15,m=10,g=a.isNodeJS&amp;&amp;typeof Path2D=="undefined"?-1:1e3,v=16;function b(ae,Y){if(ae._removeMirroring)throw new Error("Context is already forwarding operations.");ae.__originalSave=ae.save,ae.__originalRestore=ae.restore,ae.__originalRotate=ae.rotate,ae.__originalScale=ae.scale,ae.__originalTranslate=ae.translate,ae.__originalTransform=ae.transform,ae.__originalSetTransform=ae.setTransform,ae.__originalResetTransform=ae.resetTransform,ae.__originalClip=ae.clip,ae.__originalMoveTo=ae.moveTo,ae.__originalLineTo=ae.lineTo,ae.__originalBezierCurveTo=ae.bezierCurveTo,ae.__originalRect=ae.rect,ae.__originalClosePath=ae.closePath,ae.__originalBeginPath=ae.beginPath,ae._removeMirroring=()=&gt;{ae.save=ae.__originalSave,ae.restore=ae.__originalRestore,ae.rotate=ae.__originalRotate,ae.scale=ae.__originalScale,ae.translate=ae.__originalTranslate,ae.transform=ae.__originalTransform,ae.setTransform=ae.__originalSetTransform,ae.resetTransform=ae.__originalResetTransform,ae.clip=ae.__originalClip,ae.moveTo=ae.__originalMoveTo,ae.lineTo=ae.__originalLineTo,ae.bezierCurveTo=ae.__originalBezierCurveTo,ae.rect=ae.__originalRect,ae.closePath=ae.__originalClosePath,ae.beginPath=ae.__originalBeginPath,delete ae._removeMirroring},ae.save=function(){Y.save(),this.__originalSave()},ae.restore=function(){Y.restore(),this.__originalRestore()},ae.translate=function(G,ee){Y.translate(G,ee),this.__originalTranslate(G,ee)},ae.scale=function(G,ee){Y.scale(G,ee),this.__originalScale(G,ee)},ae.transform=function(G,ee,F,L,$,P){Y.transform(G,ee,F,L,$,P),this.__originalTransform(G,ee,F,L,$,P)},ae.setTransform=function(G,ee,F,L,$,P){Y.setTransform(G,ee,F,L,$,P),this.__originalSetTransform(G,ee,F,L,$,P)},ae.resetTransform=function(){Y.resetTransform(),this.__originalResetTransform()},ae.rotate=function(G){Y.rotate(G),this.__originalRotate(G)},ae.clip=function(G){Y.clip(G),this.__originalClip(G)},ae.moveTo=function(W,G){Y.moveTo(W,G),this.__originalMoveTo(W,G)},ae.lineTo=function(W,G){Y.lineTo(W,G),this.__originalLineTo(W,G)},ae.bezierCurveTo=function(W,G,ee,F,L,$){Y.bezierCurveTo(W,G,ee,F,L,$),this.__originalBezierCurveTo(W,G,ee,F,L,$)},ae.rect=function(W,G,ee,F){Y.rect(W,G,ee,F),this.__originalRect(W,G,ee,F)},ae.closePath=function(){Y.closePath(),this.__originalClosePath()},ae.beginPath=function(){Y.beginPath(),this.__originalBeginPath()}}class C{constructor(Y){this.canvasFactory=Y,this.cache=Object.create(null)}getCanvas(Y,W,G){let ee;return this.cache[Y]!==void 0?(ee=this.cache[Y],this.canvasFactory.reset(ee,W,G)):(ee=this.canvasFactory.create(W,G),this.cache[Y]=ee),ee}delete(Y){delete this.cache[Y]}clear(){for(let Y in this.cache){let W=this.cache[Y];this.canvasFactory.destroy(W),delete this.cache[Y]}}}function x(ae,Y,W,G,ee,F,L,$,P,X){let[K,R,H,J,te,de]=(0,n.getCurrentTransform)(ae);if(R===0&amp;&amp;H===0){let Pe=L*K+te,ke=Math.round(Pe),Ie=$*J+de,Ve=Math.round(Ie),Ae=(L+P)*K+te,lt=Math.abs(Math.round(Ae)-ke)||1,vt=($+X)*J+de,et=Math.abs(Math.round(vt)-Ve)||1;return ae.setTransform(Math.sign(K),0,0,Math.sign(J),ke,Ve),ae.drawImage(Y,W,G,ee,F,0,0,lt,et),ae.setTransform(K,R,H,J,te,de),[lt,et]}if(K===0&amp;&amp;J===0){let Pe=$*H+te,ke=Math.round(Pe),Ie=L*R+de,Ve=Math.round(Ie),Ae=($+X)*H+te,lt=Math.abs(Math.round(Ae)-ke)||1,vt=(L+P)*R+de,et=Math.abs(Math.round(vt)-Ve)||1;return ae.setTransform(0,Math.sign(R),Math.sign(H),0,ke,Ve),ae.drawImage(Y,W,G,ee,F,0,0,et,lt),ae.setTransform(K,R,H,J,te,de),[et,lt]}ae.drawImage(Y,W,G,ee,F,L,$,P,X);let se=Math.hypot(K,R),be=Math.hypot(H,J);return[se*P,be*X]}function y(ae){let{width:Y,height:W}=ae;if(Y&gt;g||W&gt;g)return null;let G=1e3,ee=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),F=Y+1,L=new Uint8Array(F*(W+1)),$,P,X,K=Y+7&amp;-8,R=new Uint8Array(K*W),H=0;for(let be of ae.data){let Pe=128;for(;Pe&gt;0;)R[H++]=be&amp;Pe?0:255,Pe&gt;&gt;=1}let J=0;for(H=0,R[H]!==0&amp;&amp;(L[0]=1,++J),P=1;P&lt;Y;P++)R[H]!==R[H+1]&amp;&amp;(L[P]=R[H]?2:1,++J),H++;for(R[H]!==0&amp;&amp;(L[P]=2,++J),$=1;$&lt;W;$++){H=$*K,X=$*F,R[H-K]!==R[H]&amp;&amp;(L[X]=R[H]?1:8,++J);let be=(R[H]?4:0)+(R[H-K]?8:0);for(P=1;P&lt;Y;P++)be=(be&gt;&gt;2)+(R[H+1]?4:0)+(R[H-K+1]?8:0),ee[be]&amp;&amp;(L[X+P]=ee[be],++J),H++;if(R[H-K]!==R[H]&amp;&amp;(L[X+P]=R[H]?2:4,++J),J&gt;G)return null}for(H=K*(W-1),X=$*F,R[H]!==0&amp;&amp;(L[X]=8,++J),P=1;P&lt;Y;P++)R[H]!==R[H+1]&amp;&amp;(L[X+P]=R[H]?4:8,++J),H++;if(R[H]!==0&amp;&amp;(L[X+P]=4,++J),J&gt;G)return null;let te=new Int32Array([0,F,-1,0,-F,0,0,0,1]),de=new Path2D;for($=0;J&amp;&amp;$&lt;=W;$++){let be=$*F,Pe=be+Y;for(;be&lt;Pe&amp;&amp;!L[be];)be++;if(be===Pe)continue;de.moveTo(be%F,$);let ke=be,Ie=L[be];do{let Ve=te[Ie];do be+=Ve;while(!L[be]);let Ae=L[be];Ae!==5&amp;&amp;Ae!==10?(Ie=Ae,L[be]=0):(Ie=Ae&amp;51*Ie&gt;&gt;4,L[be]&amp;=Ie&gt;&gt;2|Ie&lt;&lt;2),de.lineTo(be%F,be/F|0),L[be]||--J}while(ke!==be);--$}return R=null,L=null,function(be){be.save(),be.scale(1/Y,-1/W),be.translate(0,-W),be.fill(de),be.beginPath(),be.restore()}}class S{constructor(Y,W){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,Y,W])}clone(){let Y=Object.create(this);return Y.clipBox=this.clipBox.slice(),Y}setCurrentPoint(Y,W){this.x=Y,this.y=W}updatePathMinMax(Y,W,G){[W,G]=o.Util.applyTransform([W,G],Y),this.minX=Math.min(this.minX,W),this.minY=Math.min(this.minY,G),this.maxX=Math.max(this.maxX,W),this.maxY=Math.max(this.maxY,G)}updateRectMinMax(Y,W){let G=o.Util.applyTransform(W,Y),ee=o.Util.applyTransform(W.slice(2),Y);this.minX=Math.min(this.minX,G[0],ee[0]),this.minY=Math.min(this.minY,G[1],ee[1]),this.maxX=Math.max(this.maxX,G[0],ee[0]),this.maxY=Math.max(this.maxY,G[1],ee[1])}updateScalingPathMinMax(Y,W){o.Util.scaleMinMax(Y,W),this.minX=Math.min(this.minX,W[0]),this.maxX=Math.max(this.maxX,W[1]),this.minY=Math.min(this.minY,W[2]),this.maxY=Math.max(this.maxY,W[3])}updateCurvePathMinMax(Y,W,G,ee,F,L,$,P,X,K){let R=o.Util.bezierBoundingBox(W,G,ee,F,L,$,P,X);if(K){K[0]=Math.min(K[0],R[0],R[2]),K[1]=Math.max(K[1],R[0],R[2]),K[2]=Math.min(K[2],R[1],R[3]),K[3]=Math.max(K[3],R[1],R[3]);return}this.updateRectMinMax(Y,R)}getPathBoundingBox(){let Y=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:i.PathType.FILL,W=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null,G=[this.minX,this.minY,this.maxX,this.maxY];if(Y===i.PathType.STROKE){W||(0,o.unreachable)("Stroke bounding box must include transform.");let ee=o.Util.singularValueDecompose2dScale(W),F=ee[0]*this.lineWidth/2,L=ee[1]*this.lineWidth/2;G[0]-=F,G[1]-=L,G[2]+=F,G[3]+=L}return G}updateClipFromPath(){let Y=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Y){this.clipBox=Y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let Y=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:i.PathType.FILL,W=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(Y,W))}}function T(ae,Y){let W=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData!="undefined"&amp;&amp;Y instanceof ImageData){ae.putImageData(Y,0,0);return}let G=Y.height,ee=Y.width,F=G%v,L=(G-F)/v,$=F===0?L:L+1,P=ae.createImageData(ee,v),X=0,K,R=Y.data,H=P.data,J,te,de,se,be,Pe,ke,Ie;if(W)switch(W.length){case 1:be=W[0],Pe=W[0],ke=W[0],Ie=W[0];break;case 4:be=W[0],Pe=W[1],ke=W[2],Ie=W[3];break}if(Y.kind===o.ImageKind.GRAYSCALE_1BPP){let Ve=R.byteLength,Ae=new Uint32Array(H.buffer,0,H.byteLength&gt;&gt;2),lt=Ae.length,vt=ee+7&gt;&gt;3,et=4294967295,_e=o.FeatureTest.isLittleEndian?4278190080:255;for(Ie&amp;&amp;Ie[0]===255&amp;&amp;Ie[255]===0&amp;&amp;([et,_e]=[_e,et]),J=0;J&lt;$;J++){for(de=J&lt;L?v:F,K=0,te=0;te&lt;de;te++){let xe=Ve-X,Ge=0,ct=xe&gt;vt?ee:xe*8-7,bt=ct&amp;-8,Be=0,Ze=0;for(;Ge&lt;bt;Ge+=8)Ze=R[X++],Ae[K++]=Ze&amp;128?et:_e,Ae[K++]=Ze&amp;64?et:_e,Ae[K++]=Ze&amp;32?et:_e,Ae[K++]=Ze&amp;16?et:_e,Ae[K++]=Ze&amp;8?et:_e,Ae[K++]=Ze&amp;4?et:_e,Ae[K++]=Ze&amp;2?et:_e,Ae[K++]=Ze&amp;1?et:_e;for(;Ge&lt;ct;Ge++)Be===0&amp;&amp;(Ze=R[X++],Be=128),Ae[K++]=Ze&amp;Be?et:_e,Be&gt;&gt;=1}for(;K&lt;lt;)Ae[K++]=0;ae.putImageData(P,0,J*v)}}else if(Y.kind===o.ImageKind.RGBA_32BPP){let Ve=!!(be||Pe||ke);for(te=0,se=ee*v*4,J=0;J&lt;L;J++){if(H.set(R.subarray(X,X+se)),X+=se,Ve)for(let Ae=0;Ae&lt;se;Ae+=4)be&amp;&amp;(H[Ae+0]=be[H[Ae+0]]),Pe&amp;&amp;(H[Ae+1]=Pe[H[Ae+1]]),ke&amp;&amp;(H[Ae+2]=ke[H[Ae+2]]);ae.putImageData(P,0,te),te+=v}if(J&lt;$){if(se=ee*F*4,H.set(R.subarray(X,X+se)),Ve)for(let Ae=0;Ae&lt;se;Ae+=4)be&amp;&amp;(H[Ae+0]=be[H[Ae+0]]),Pe&amp;&amp;(H[Ae+1]=Pe[H[Ae+1]]),ke&amp;&amp;(H[Ae+2]=ke[H[Ae+2]]);ae.putImageData(P,0,te)}}else if(Y.kind===o.ImageKind.RGB_24BPP){let Ve=!!(be||Pe||ke);for(de=v,se=ee*de,J=0;J&lt;$;J++){for(J&gt;=L&amp;&amp;(de=F,se=ee*de),K=0,te=se;te--;)H[K++]=R[X++],H[K++]=R[X++],H[K++]=R[X++],H[K++]=255;if(Ve)for(let Ae=0;Ae&lt;K;Ae+=4)be&amp;&amp;(H[Ae+0]=be[H[Ae+0]]),Pe&amp;&amp;(H[Ae+1]=Pe[H[Ae+1]]),ke&amp;&amp;(H[Ae+2]=ke[H[Ae+2]]);ae.putImageData(P,0,J*v)}}else throw new Error(`bad image kind: ${Y.kind}`)}function w(ae,Y){if(Y.bitmap){ae.drawImage(Y.bitmap,0,0);return}let W=Y.height,G=Y.width,ee=W%v,F=(W-ee)/v,L=ee===0?F:F+1,$=ae.createImageData(G,v),P=0,X=Y.data,K=$.data;for(let R=0;R&lt;L;R++){let H=R&lt;F?v:ee;({srcPos:P}=(0,s.applyMaskImageData)({src:X,srcPos:P,dest:K,width:G,height:H})),ae.putImageData($,0,R*v)}}function k(ae,Y){let W=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let G=0,ee=W.length;G&lt;ee;G++){let F=W[G];ae[F]!==void 0&amp;&amp;(Y[F]=ae[F])}ae.setLineDash!==void 0&amp;&amp;(Y.setLineDash(ae.getLineDash()),Y.lineDashOffset=ae.lineDashOffset)}function A(ae,Y){ae.strokeStyle=ae.fillStyle=Y||"#000000",ae.fillRule="nonzero",ae.globalAlpha=1,ae.lineWidth=1,ae.lineCap="butt",ae.lineJoin="miter",ae.miterLimit=10,ae.globalCompositeOperation="source-over",ae.font="10px sans-serif",ae.setLineDash!==void 0&amp;&amp;(ae.setLineDash([]),ae.lineDashOffset=0)}function I(ae,Y,W,G){let ee=ae.length;for(let F=3;F&lt;ee;F+=4){let L=ae[F];if(L===0)ae[F-3]=Y,ae[F-2]=W,ae[F-1]=G;else if(L&lt;255){let $=255-L;ae[F-3]=ae[F-3]*L+Y*$&gt;&gt;8,ae[F-2]=ae[F-2]*L+W*$&gt;&gt;8,ae[F-1]=ae[F-1]*L+G*$&gt;&gt;8}}}function E(ae,Y,W){let G=ae.length,ee=1/255;for(let F=3;F&lt;G;F+=4){let L=W?W[ae[F]]:ae[F];Y[F]=Y[F]*L*ee|0}}function O(ae,Y,W){let G=ae.length;for(let ee=3;ee&lt;G;ee+=4){let F=ae[ee-3]*77+ae[ee-2]*152+ae[ee-1]*28;Y[ee]=W?Y[ee]*W[F&gt;&gt;8]&gt;&gt;8:Y[ee]*F&gt;&gt;16}}function Q(ae,Y,W,G,ee,F,L,$,P,X,K){let R=!!F,H=R?F[0]:0,J=R?F[1]:0,te=R?F[2]:0,de;ee==="Luminosity"?de=O:de=E;let be=Math.min(G,Math.ceil(1048576/W));for(let Pe=0;Pe&lt;G;Pe+=be){let ke=Math.min(be,G-Pe),Ie=ae.getImageData($-X,Pe+(P-K),W,ke),Ve=Y.getImageData($,Pe+P,W,ke);R&amp;&amp;I(Ie.data,H,J,te),de(Ie.data,Ve.data,L),Y.putImageData(Ve,$,Pe+P)}}function j(ae,Y,W,G){let ee=G[0],F=G[1],L=G[2]-ee,$=G[3]-F;L===0||$===0||(Q(Y.context,W,L,$,Y.subtype,Y.backdrop,Y.transferMap,ee,F,Y.offsetX,Y.offsetY),ae.save(),ae.globalAlpha=1,ae.globalCompositeOperation="source-over",ae.setTransform(1,0,0,1,0,0),ae.drawImage(W.canvas,0,0),ae.restore())}function U(ae,Y){let W=o.Util.singularValueDecompose2dScale(ae);W[0]=Math.fround(W[0]),W[1]=Math.fround(W[1]);let G=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return Y!==void 0?Y:W[0]&lt;=G||W[1]&lt;=G}let B=["butt","round","square"],z=["miter","round","bevel"],N={},V={};var re=new WeakSet;class ce{constructor(Y,W,G,ee,F,L,$,P){l(this,re),this.ctx=Y,this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=W,this.objs=G,this.canvasFactory=ee,this.imageLayer=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=L,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=$,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(P==null?void 0:P.background)||null,this.foregroundColor=(P==null?void 0:P.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Y){let W=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;return typeof Y=="string"?Y.startsWith("g_")?this.commonObjs.get(Y):this.objs.get(Y):W}beginDrawing(Y){let{transform:W,viewport:G,transparency:ee=!1,background:F=null}=Y,L=this.ctx.canvas.width,$=this.ctx.canvas.height,P=F||"#ffffff";if(this.ctx.save(),this.foregroundColor&amp;&amp;this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;let X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;let K=this.backgroundColor=this.ctx.fillStyle,R=!0,H=P;if(this.ctx.fillStyle=P,H=this.ctx.fillStyle,R=typeof H=="string"&amp;&amp;/^#[0-9A-Fa-f]{6}$/.test(H),X==="#000000"&amp;&amp;K==="#ffffff"||X===K||!R)this.foregroundColor=this.backgroundColor=null;else{let[J,te,de]=(0,n.getRGB)(H),se=Pe=&gt;(Pe/=255,Pe&lt;=.03928?Pe/12.92:((Pe+.055)/1.055)**2.4),be=Math.round(.2126*se(J)+.7152*se(te)+.0722*se(de));this.selectColor=(Pe,ke,Ie)=&gt;{let Ve=.2126*se(Pe)+.7152*se(ke)+.0722*se(Ie);return Math.round(Ve)===be?K:X}}}if(this.ctx.fillStyle=this.backgroundColor||P,this.ctx.fillRect(0,0,L,$),this.ctx.restore(),ee){let X=this.cachedCanvases.getCanvas("transparent",L,$);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx,this.foregroundColor),W&amp;&amp;(this.ctx.transform(...W),this.outputScaleX=W[0],this.outputScaleY=W[0]),this.ctx.transform(...G.transform),this.viewportScale=G.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&amp;&amp;((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(Y,W,G,ee){let F=Y.argsArray,L=Y.fnArray,$=W||0,P=F.length;if(P===$)return $;let X=P-$&gt;m&amp;&amp;typeof G=="function",K=X?Date.now()+f:0,R=0,H=this.commonObjs,J=this.objs,te;for(;;){if(ee!==void 0&amp;&amp;$===ee.nextBreakPoint)return ee.breakIt($,G),$;if(te=L[$],te!==o.OPS.dependency)this[te].apply(this,F[$]);else for(let de of F[$]){let se=de.startsWith("g_")?H:J;if(!se.has(de))return se.get(de,G),$}if($++,$===P)return $;if(X&amp;&amp;++R&gt;m){if(Date.now()&gt;K)return G(),$;R=0}}}endDrawing(){d(this,re,ge).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let Y of this._cachedBitmapsMap.values()){for(let W of Y.values())typeof HTMLCanvasElement!="undefined"&amp;&amp;W instanceof HTMLCanvasElement&amp;&amp;(W.width=W.height=0);Y.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&amp;&amp;this.imageLayer.endLayout()}_scaleImage(Y,W){let G=Y.width,ee=Y.height,F=Math.max(Math.hypot(W[0],W[1]),1),L=Math.max(Math.hypot(W[2],W[3]),1),$=G,P=ee,X="prescale1",K,R;for(;F&gt;2&amp;&amp;$&gt;1||L&gt;2&amp;&amp;P&gt;1;){let H=$,J=P;F&gt;2&amp;&amp;$&gt;1&amp;&amp;(H=Math.ceil($/2),F/=$/H),L&gt;2&amp;&amp;P&gt;1&amp;&amp;(J=Math.ceil(P/2),L/=P/J),K=this.cachedCanvases.getCanvas(X,H,J),R=K.context,R.clearRect(0,0,H,J),R.drawImage(Y,0,0,$,P,0,0,H,J),Y=K.canvas,$=H,P=J,X=X==="prescale1"?"prescale2":"prescale1"}return{img:Y,paintWidth:$,paintHeight:P}}_createMaskCanvas(Y){let W=this.ctx,{width:G,height:ee}=Y,F=this.current.fillColor,L=this.current.patternFill,$=(0,n.getCurrentTransform)(W),P,X,K,R;if((Y.bitmap||Y.data)&amp;&amp;Y.count&gt;1){let lt=Y.bitmap||Y.data.buffer,vt=$.slice(0,4);X=JSON.stringify(L?vt:[vt,F]),P=this._cachedBitmapsMap.get(lt),P||(P=new Map,this._cachedBitmapsMap.set(lt,P));let et=P.get(X);if(et&amp;&amp;!L){let _e=Math.round(Math.min($[0],$[2])+$[4]),xe=Math.round(Math.min($[1],$[3])+$[5]);return{canvas:et,offsetX:_e,offsetY:xe}}K=et}K||(R=this.cachedCanvases.getCanvas("maskCanvas",G,ee),w(R.context,Y));let H=o.Util.transform($,[1/G,0,0,-1/ee,0,0]);H=o.Util.transform(H,[1,0,0,1,0,-ee]);let J=o.Util.applyTransform([0,0],H),te=o.Util.applyTransform([G,ee],H),de=o.Util.normalizeRect([J[0],J[1],te[0],te[1]]),se=Math.round(de[2]-de[0])||1,be=Math.round(de[3]-de[1])||1,Pe=this.cachedCanvases.getCanvas("fillCanvas",se,be),ke=Pe.context,Ie=Math.min(J[0],te[0]),Ve=Math.min(J[1],te[1]);ke.translate(-Ie,-Ve),ke.transform(...H),K||(K=this._scaleImage(R.canvas,(0,n.getCurrentTransformInverse)(ke)),K=K.img,P&amp;&amp;L&amp;&amp;P.set(X,K)),ke.imageSmoothingEnabled=U((0,n.getCurrentTransform)(ke),Y.interpolate),x(ke,K,0,0,K.width,K.height,0,0,G,ee),ke.globalCompositeOperation="source-in";let Ae=o.Util.transform((0,n.getCurrentTransformInverse)(ke),[1,0,0,1,-Ie,-Ve]);return ke.fillStyle=L?F.getPattern(W,this,Ae,i.PathType.FILL):F,ke.fillRect(0,0,G,ee),P&amp;&amp;!L&amp;&amp;(this.cachedCanvases.delete("fillCanvas"),P.set(X,Pe.canvas)),{canvas:Pe.canvas,offsetX:Math.round(Ie),offsetY:Math.round(Ve)}}setLineWidth(Y){Y!==this.current.lineWidth&amp;&amp;(this._cachedScaleForStroking=null),this.current.lineWidth=Y,this.ctx.lineWidth=Y}setLineCap(Y){this.ctx.lineCap=B[Y]}setLineJoin(Y){this.ctx.lineJoin=z[Y]}setMiterLimit(Y){this.ctx.miterLimit=Y}setDash(Y,W){let G=this.ctx;G.setLineDash!==void 0&amp;&amp;(G.setLineDash(Y),G.lineDashOffset=W)}setRenderingIntent(Y){}setFlatness(Y){}setGState(Y){for(let W=0,G=Y.length;W&lt;G;W++){let ee=Y[W],F=ee[0],L=ee[1];switch(F){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L[0],L[1]);break;case"CA":this.current.strokeAlpha=ee[1];break;case"ca":this.current.fillAlpha=ee[1],this.ctx.globalAlpha=ee[1];break;case"BM":this.ctx.globalCompositeOperation=L;break;case"SMask":this.current.activeSMask=L?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=L}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let Y=this.inSMaskMode;this.current.activeSMask&amp;&amp;!Y?this.beginSMaskMode():!this.current.activeSMask&amp;&amp;Y&amp;&amp;this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let Y=this.ctx.canvas.width,W=this.ctx.canvas.height,G="smaskGroupAt"+this.groupLevel,ee=this.cachedCanvases.getCanvas(G,Y,W);this.suspendedCtx=this.ctx,this.ctx=ee.context;let F=this.ctx;F.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),k(this.suspendedCtx,F),b(F,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),k(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Y){if(!this.current.activeSMask)return;Y?(Y[0]=Math.floor(Y[0]),Y[1]=Math.floor(Y[1]),Y[2]=Math.ceil(Y[2]),Y[3]=Math.ceil(Y[3])):Y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let W=this.current.activeSMask,G=this.suspendedCtx;j(G,W,this.ctx,Y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(k(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let Y=this.current;this.stateStack.push(Y),this.current=Y.clone()}restore(){this.stateStack.length===0&amp;&amp;this.inSMaskMode&amp;&amp;this.endSMaskMode(),this.stateStack.length!==0&amp;&amp;(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),k(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(Y,W,G,ee,F,L){this.ctx.transform(Y,W,G,ee,F,L),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(Y,W,G){let ee=this.ctx,F=this.current,L=F.x,$=F.y,P,X,K=(0,n.getCurrentTransform)(ee),R=K[0]===0&amp;&amp;K[3]===0||K[1]===0&amp;&amp;K[2]===0,H=R?G.slice(0):null;for(let J=0,te=0,de=Y.length;J&lt;de;J++)switch(Y[J]|0){case o.OPS.rectangle:L=W[te++],$=W[te++];let se=W[te++],be=W[te++],Pe=L+se,ke=$+be;ee.moveTo(L,$),se===0||be===0?ee.lineTo(Pe,ke):(ee.lineTo(Pe,$),ee.lineTo(Pe,ke),ee.lineTo(L,ke)),R||F.updateRectMinMax(K,[L,$,Pe,ke]),ee.closePath();break;case o.OPS.moveTo:L=W[te++],$=W[te++],ee.moveTo(L,$),R||F.updatePathMinMax(K,L,$);break;case o.OPS.lineTo:L=W[te++],$=W[te++],ee.lineTo(L,$),R||F.updatePathMinMax(K,L,$);break;case o.OPS.curveTo:P=L,X=$,L=W[te+4],$=W[te+5],ee.bezierCurveTo(W[te],W[te+1],W[te+2],W[te+3],L,$),F.updateCurvePathMinMax(K,P,X,W[te],W[te+1],W[te+2],W[te+3],L,$,H),te+=6;break;case o.OPS.curveTo2:P=L,X=$,ee.bezierCurveTo(L,$,W[te],W[te+1],W[te+2],W[te+3]),F.updateCurvePathMinMax(K,P,X,L,$,W[te],W[te+1],W[te+2],W[te+3],H),L=W[te+2],$=W[te+3],te+=4;break;case o.OPS.curveTo3:P=L,X=$,L=W[te+2],$=W[te+3],ee.bezierCurveTo(W[te],W[te+1],L,$,L,$),F.updateCurvePathMinMax(K,P,X,W[te],W[te+1],L,$,L,$,H),te+=4;break;case o.OPS.closePath:ee.closePath();break}R&amp;&amp;F.updateScalingPathMinMax(K,H),F.setCurrentPoint(L,$)}closePath(){this.ctx.closePath()}stroke(Y){Y=typeof Y!="undefined"?Y:!0;let W=this.ctx,G=this.current.strokeColor;W.globalAlpha=this.current.strokeAlpha,this.contentVisible&amp;&amp;(typeof G=="object"&amp;&amp;G!==null&amp;&amp;G!==void 0&amp;&amp;G.getPattern?(W.save(),W.strokeStyle=G.getPattern(W,this,(0,n.getCurrentTransformInverse)(W),i.PathType.STROKE),this.rescaleAndStroke(!1),W.restore()):this.rescaleAndStroke(!0)),Y&amp;&amp;this.consumePath(this.current.getClippedPathBoundingBox()),W.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Y){Y=typeof Y!="undefined"?Y:!0;let W=this.ctx,G=this.current.fillColor,ee=this.current.patternFill,F=!1;ee&amp;&amp;(W.save(),W.fillStyle=G.getPattern(W,this,(0,n.getCurrentTransformInverse)(W),i.PathType.FILL),F=!0);let L=this.current.getClippedPathBoundingBox();this.contentVisible&amp;&amp;L!==null&amp;&amp;(this.pendingEOFill?(W.fill("evenodd"),this.pendingEOFill=!1):W.fill()),F&amp;&amp;W.restore(),Y&amp;&amp;this.consumePath(L)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=N}eoClip(){this.pendingClip=V}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let Y=this.pendingTextPaths,W=this.ctx;if(Y===void 0){W.beginPath();return}W.save(),W.beginPath();for(let G of Y)W.setTransform(...G.transform),W.translate(G.x,G.y),G.addToPath(W,G.fontSize);W.restore(),W.clip(),W.beginPath(),delete this.pendingTextPaths}setCharSpacing(Y){this.current.charSpacing=Y}setWordSpacing(Y){this.current.wordSpacing=Y}setHScale(Y){this.current.textHScale=Y/100}setLeading(Y){this.current.leading=-Y}setFont(Y,W){let G=this.commonObjs.get(Y),ee=this.current;if(!G)throw new Error(`Can't find font for ${Y}`);if(ee.fontMatrix=G.fontMatrix||o.FONT_IDENTITY_MATRIX,(ee.fontMatrix[0]===0||ee.fontMatrix[3]===0)&amp;&amp;(0,o.warn)("Invalid font matrix for font "+Y),W&lt;0?(W=-W,ee.fontDirection=-1):ee.fontDirection=1,this.current.font=G,this.current.fontSize=W,G.isType3Font)return;let F=G.loadedName||"sans-serif",L="normal";G.black?L="900":G.bold&amp;&amp;(L="bold");let $=G.italic?"italic":"normal",P=`"${F}", ${G.fallbackName}`,X=W;W&lt;c?X=c:W&gt;p&amp;&amp;(X=p),this.current.fontSizeScale=W/X,this.ctx.font=`${$} ${L} ${X}px ${P}`}setTextRenderingMode(Y){this.current.textRenderingMode=Y}setTextRise(Y){this.current.textRise=Y}moveText(Y,W){this.current.x=this.current.lineX+=Y,this.current.y=this.current.lineY+=W}setLeadingMoveText(Y,W){this.setLeading(-W),this.moveText(Y,W)}setTextMatrix(Y,W,G,ee,F,L){this.current.textMatrix=[Y,W,G,ee,F,L],this.current.textMatrixScale=Math.hypot(Y,W),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Y,W,G,ee){let F=this.ctx,L=this.current,$=L.font,P=L.textRenderingMode,X=L.fontSize/L.fontSizeScale,K=P&amp;o.TextRenderingMode.FILL_STROKE_MASK,R=!!(P&amp;o.TextRenderingMode.ADD_TO_PATH_FLAG),H=L.patternFill&amp;&amp;!$.missingFile,J;($.disableFontFace||R||H)&amp;&amp;(J=$.getPathGenerator(this.commonObjs,Y)),$.disableFontFace||H?(F.save(),F.translate(W,G),F.beginPath(),J(F,X),ee&amp;&amp;F.setTransform(...ee),(K===o.TextRenderingMode.FILL||K===o.TextRenderingMode.FILL_STROKE)&amp;&amp;F.fill(),(K===o.TextRenderingMode.STROKE||K===o.TextRenderingMode.FILL_STROKE)&amp;&amp;F.stroke(),F.restore()):((K===o.TextRenderingMode.FILL||K===o.TextRenderingMode.FILL_STROKE)&amp;&amp;F.fillText(Y,W,G),(K===o.TextRenderingMode.STROKE||K===o.TextRenderingMode.FILL_STROKE)&amp;&amp;F.strokeText(Y,W,G)),R&amp;&amp;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(F),x:W,y:G,fontSize:X,addToPath:J})}get isFontSubpixelAAEnabled(){let{context:Y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Y.scale(1.5,1),Y.fillText("I",0,10);let W=Y.getImageData(0,0,10,10).data,G=!1;for(let ee=3;ee&lt;W.length;ee+=4)if(W[ee]&gt;0&amp;&amp;W[ee]&lt;255){G=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",G)}showText(Y){let W=this.current,G=W.font;if(G.isType3Font)return this.showType3Text(Y);let ee=W.fontSize;if(ee===0)return;let F=this.ctx,L=W.fontSizeScale,$=W.charSpacing,P=W.wordSpacing,X=W.fontDirection,K=W.textHScale*X,R=Y.length,H=G.vertical,J=H?1:-1,te=G.defaultVMetrics,de=ee*W.fontMatrix[0],se=W.textRenderingMode===o.TextRenderingMode.FILL&amp;&amp;!G.disableFontFace&amp;&amp;!W.patternFill;F.save(),F.transform(...W.textMatrix),F.translate(W.x,W.y+W.textRise),X&gt;0?F.scale(K,-1):F.scale(K,1);let be;if(W.patternFill){F.save();let Ae=W.fillColor.getPattern(F,this,(0,n.getCurrentTransformInverse)(F),i.PathType.FILL);be=(0,n.getCurrentTransform)(F),F.restore(),F.fillStyle=Ae}let Pe=W.lineWidth,ke=W.textMatrixScale;if(ke===0||Pe===0){let Ae=W.textRenderingMode&amp;o.TextRenderingMode.FILL_STROKE_MASK;(Ae===o.TextRenderingMode.STROKE||Ae===o.TextRenderingMode.FILL_STROKE)&amp;&amp;(Pe=this.getSinglePixelWidth())}else Pe/=ke;L!==1&amp;&amp;(F.scale(L,L),Pe/=L),F.lineWidth=Pe;let Ie=0,Ve;for(Ve=0;Ve&lt;R;++Ve){let Ae=Y[Ve];if(typeof Ae=="number"){Ie+=J*Ae*ee/1e3;continue}let lt=!1,vt=(Ae.isSpace?P:0)+$,et=Ae.fontChar,_e=Ae.accent,xe,Ge,ct=Ae.width;if(H){let Be=Ae.vmetric||te,Ze=-(Ae.vmetric?Be[1]:ct*.5)*de,St=Be[2]*de;ct=Be?-Be[0]:ct,xe=Ze/L,Ge=(Ie+St)/L}else xe=Ie/L,Ge=0;if(G.remeasure&amp;&amp;ct&gt;0){let Be=F.measureText(et).width*1e3/ee*L;if(ct&lt;Be&amp;&amp;this.isFontSubpixelAAEnabled){let Ze=ct/Be;lt=!0,F.save(),F.scale(Ze,1),xe/=Ze}else ct!==Be&amp;&amp;(xe+=(ct-Be)/2e3*ee/L)}if(this.contentVisible&amp;&amp;(Ae.isInFont||G.missingFile)){if(se&amp;&amp;!_e)F.fillText(et,xe,Ge);else if(this.paintChar(et,xe,Ge,be),_e){let Be=xe+ee*_e.offset.x/L,Ze=Ge-ee*_e.offset.y/L;this.paintChar(_e.fontChar,Be,Ze,be)}}let bt;H?bt=ct*de-vt*X:bt=ct*de+vt*X,Ie+=bt,lt&amp;&amp;F.restore()}H?W.y-=Ie:W.x+=Ie*K,F.restore(),this.compose()}showType3Text(Y){let W=this.ctx,G=this.current,ee=G.font,F=G.fontSize,L=G.fontDirection,$=ee.vertical?1:-1,P=G.charSpacing,X=G.wordSpacing,K=G.textHScale*L,R=G.fontMatrix||o.FONT_IDENTITY_MATRIX,H=Y.length,J=G.textRenderingMode===o.TextRenderingMode.INVISIBLE,te,de,se,be;if(!(J||F===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,W.save(),W.transform(...G.textMatrix),W.translate(G.x,G.y),W.scale(K,L),te=0;te&lt;H;++te){if(de=Y[te],typeof de=="number"){be=$*de*F/1e3,this.ctx.translate(be,0),G.x+=be*K;continue}let Pe=(de.isSpace?X:0)+P,ke=ee.charProcOperatorList[de.operatorListId];if(!ke){(0,o.warn)(`Type3 character "${de.operatorListId}" is not available.`);continue}this.contentVisible&amp;&amp;(this.processingType3=de,this.save(),W.scale(F,F),W.transform(...R),this.executeOperatorList(ke),this.restore()),se=o.Util.applyTransform([de.width,0],R)[0]*F+Pe,W.translate(se,0),G.x+=se*K}W.restore(),this.processingType3=null}}setCharWidth(Y,W){}setCharWidthAndBounds(Y,W,G,ee,F,L){this.ctx.rect(G,ee,F-G,L-ee),this.ctx.clip(),this.endPath()}getColorN_Pattern(Y){let W;if(Y[0]==="TilingPattern"){let G=Y[1],ee=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),F={createCanvasGraphics:L=&gt;new ce(L,this.commonObjs,this.objs,this.canvasFactory)};W=new i.TilingPattern(Y,G,this.ctx,F,ee)}else W=this._getPattern(Y[1],Y[2]);return W}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Y,W,G){var ee;let F=((ee=this.selectColor)===null||ee===void 0?void 0:ee.call(this,Y,W,G))||o.Util.makeHexColor(Y,W,G);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(Y,W,G){var ee;let F=((ee=this.selectColor)===null||ee===void 0?void 0:ee.call(this,Y,W,G))||o.Util.makeHexColor(Y,W,G);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(Y){let W=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null,G;return this.cachedPatterns.has(Y)?G=this.cachedPatterns.get(Y):(G=(0,i.getShadingPattern)(this.objs.get(Y)),this.cachedPatterns.set(Y,G)),W&amp;&amp;(G.matrix=W),G}shadingFill(Y){if(!this.contentVisible)return;let W=this.ctx;this.save();let G=this._getPattern(Y);W.fillStyle=G.getPattern(W,this,(0,n.getCurrentTransformInverse)(W),i.PathType.SHADING);let ee=(0,n.getCurrentTransformInverse)(W);if(ee){let F=W.canvas,L=F.width,$=F.height,P=o.Util.applyTransform([0,0],ee),X=o.Util.applyTransform([0,$],ee),K=o.Util.applyTransform([L,0],ee),R=o.Util.applyTransform([L,$],ee),H=Math.min(P[0],X[0],K[0],R[0]),J=Math.min(P[1],X[1],K[1],R[1]),te=Math.max(P[0],X[0],K[0],R[0]),de=Math.max(P[1],X[1],K[1],R[1]);this.ctx.fillRect(H,J,te-H,de-J)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Y,W){if(!!this.contentVisible&amp;&amp;(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Y)&amp;&amp;Y.length===6&amp;&amp;this.transform(...Y),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),W)){let G=W[2]-W[0],ee=W[3]-W[1];this.ctx.rect(W[0],W[1],G,ee),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),W),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&amp;&amp;(this.endSMaskMode(),this.current.activeSMask=null);let W=this.ctx;Y.isolated||(0,o.info)("TODO: Support non-isolated groups."),Y.knockout&amp;&amp;(0,o.warn)("Knockout groups not supported.");let G=(0,n.getCurrentTransform)(W);if(Y.matrix&amp;&amp;W.transform(...Y.matrix),!Y.bbox)throw new Error("Bounding box is required.");let ee=o.Util.getAxialAlignedBoundingBox(Y.bbox,(0,n.getCurrentTransform)(W)),F=[0,0,W.canvas.width,W.canvas.height];ee=o.Util.intersect(ee,F)||[0,0,0,0];let L=Math.floor(ee[0]),$=Math.floor(ee[1]),P=Math.max(Math.ceil(ee[2])-L,1),X=Math.max(Math.ceil(ee[3])-$,1),K=1,R=1;P&gt;h&amp;&amp;(K=P/h,P=h),X&gt;h&amp;&amp;(R=X/h,X=h),this.current.startNewPathAndClipBox([0,0,P,X]);let H="groupAt"+this.groupLevel;Y.smask&amp;&amp;(H+="_smask_"+this.smaskCounter++%2);let J=this.cachedCanvases.getCanvas(H,P,X),te=J.context;te.scale(1/K,1/R),te.translate(-L,-$),te.transform(...G),Y.smask?this.smaskStack.push({canvas:J.canvas,context:te,offsetX:L,offsetY:$,scaleX:K,scaleY:R,subtype:Y.smask.subtype,backdrop:Y.smask.backdrop,transferMap:Y.smask.transferMap||null,startTransformInverse:null}):(W.setTransform(1,0,0,1,0,0),W.translate(L,$),W.scale(K,R),W.save()),k(W,te),this.ctx=te,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(W),this.groupLevel++}endGroup(Y){if(!this.contentVisible)return;this.groupLevel--;let W=this.ctx,G=this.groupStack.pop();if(this.ctx=G,this.ctx.imageSmoothingEnabled=!1,Y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let ee=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ee);let F=o.Util.getAxialAlignedBoundingBox([0,0,W.canvas.width,W.canvas.height],ee);this.ctx.drawImage(W.canvas,0,0),this.ctx.restore(),this.compose(F)}}beginAnnotation(Y,W,G,ee,F){if(d(this,re,ge).call(this),A(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&amp;&amp;this.ctx.setTransform(...this.baseTransform),Array.isArray(W)&amp;&amp;W.length===4){let L=W[2]-W[0],$=W[3]-W[1];if(F&amp;&amp;this.annotationCanvasMap){G=G.slice(),G[4]-=W[0],G[5]-=W[1],W=W.slice(),W[0]=W[1]=0,W[2]=L,W[3]=$;let[P,X]=o.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:K}=this,R=Math.ceil(L*this.outputScaleX*K),H=Math.ceil($*this.outputScaleY*K);this.annotationCanvas=this.canvasFactory.create(R,H);let{canvas:J,context:te}=this.annotationCanvas;this.annotationCanvasMap.set(Y,J),this.annotationCanvas.savedCtx=this.ctx,this.ctx=te,this.ctx.setTransform(P,0,0,-X,0,$*X),A(this.ctx,this.foregroundColor)}else A(this.ctx,this.foregroundColor),this.ctx.rect(W[0],W[1],L,$),this.ctx.clip(),this.endPath()}this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...G),this.transform(...ee)}endAnnotation(){this.annotationCanvas&amp;&amp;(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Y){if(!this.contentVisible)return;let W=Y.count;Y=this.getObject(Y.data,Y),Y.count=W;let G=this.ctx,ee=this.processingType3;if(ee&amp;&amp;(ee.compiled===void 0&amp;&amp;(ee.compiled=y(Y)),ee.compiled)){ee.compiled(G);return}let F=this._createMaskCanvas(Y),L=F.canvas;G.save(),G.setTransform(1,0,0,1,0,0),G.drawImage(L,F.offsetX,F.offsetY),G.restore(),this.compose()}paintImageMaskXObjectRepeat(Y,W){let G=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:0,ee=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:0,F=arguments.length&gt;4?arguments[4]:void 0,L=arguments.length&gt;5?arguments[5]:void 0;if(!this.contentVisible)return;Y=this.getObject(Y.data,Y);let $=this.ctx;$.save();let P=(0,n.getCurrentTransform)($);$.transform(W,G,ee,F,0,0);let X=this._createMaskCanvas(Y);$.setTransform(1,0,0,1,0,0);for(let K=0,R=L.length;K&lt;R;K+=2){let H=o.Util.transform(P,[W,G,ee,F,L[K],L[K+1]]),[J,te]=o.Util.applyTransform([0,0],H);$.drawImage(X.canvas,J,te)}$.restore(),this.compose()}paintImageMaskXObjectGroup(Y){if(!this.contentVisible)return;let W=this.ctx,G=this.current.fillColor,ee=this.current.patternFill;for(let F of Y){let{data:L,width:$,height:P,transform:X}=F,K=this.cachedCanvases.getCanvas("maskCanvas",$,P),R=K.context;R.save();let H=this.getObject(L,F);w(R,H),R.globalCompositeOperation="source-in",R.fillStyle=ee?G.getPattern(R,this,(0,n.getCurrentTransformInverse)(W),i.PathType.FILL):G,R.fillRect(0,0,$,P),R.restore(),W.save(),W.transform(...X),W.scale(1,-1),x(W,K.canvas,0,0,$,P,0,-1,1,1),W.restore()}this.compose()}paintImageXObject(Y){if(!this.contentVisible)return;let W=this.getObject(Y);if(!W){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(W)}paintImageXObjectRepeat(Y,W,G,ee){if(!this.contentVisible)return;let F=this.getObject(Y);if(!F){(0,o.warn)("Dependent image isn't ready yet");return}let L=F.width,$=F.height,P=[];for(let X=0,K=ee.length;X&lt;K;X+=2)P.push({transform:[W,0,0,G,ee[X],ee[X+1]],x:0,y:0,w:L,h:$});this.paintInlineImageXObjectGroup(F,P)}paintInlineImageXObject(Y){if(!this.contentVisible)return;let W=Y.width,G=Y.height,ee=this.ctx;this.save(),ee.scale(1/W,-1/G);let F;if(typeof HTMLElement=="function"&amp;&amp;Y instanceof HTMLElement||!Y.data)F=Y;else{let X=this.cachedCanvases.getCanvas("inlineImage",W,G),K=X.context;T(K,Y,this.current.transferMaps),F=X.canvas}let L=this._scaleImage(F,(0,n.getCurrentTransformInverse)(ee));ee.imageSmoothingEnabled=U((0,n.getCurrentTransform)(ee),Y.interpolate);let[$,P]=x(ee,L.img,0,0,L.paintWidth,L.paintHeight,0,-G,W,G);if(this.imageLayer){let[X,K]=o.Util.applyTransform([0,-G],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:Y,left:X,top:K,width:$,height:P})}this.compose(),this.restore()}paintInlineImageXObjectGroup(Y,W){if(!this.contentVisible)return;let G=this.ctx,ee=Y.width,F=Y.height,L=this.cachedCanvases.getCanvas("inlineImage",ee,F),$=L.context;T($,Y,this.current.transferMaps);for(let P of W){if(G.save(),G.transform(...P.transform),G.scale(1,-1),x(G,L.canvas,P.x,P.y,P.w,P.h,0,-1,1,1),this.imageLayer){let[X,K]=o.Util.applyTransform([P.x,P.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:Y,left:X,top:K,width:ee,height:F})}G.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Y){}markPointProps(Y,W){}beginMarkedContent(Y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Y,W){Y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(W)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Y){let W=this.current.isEmptyClip();this.pendingClip&amp;&amp;this.current.updateClipFromPath(),this.pendingClip||this.compose(Y);let G=this.ctx;this.pendingClip&amp;&amp;(W||(this.pendingClip===V?G.clip("evenodd"):G.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),G.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let Y=(0,n.getCurrentTransform)(this.ctx);if(Y[1]===0&amp;&amp;Y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Y[0]),Math.abs(Y[3]));else{let W=Math.abs(Y[0]*Y[3]-Y[2]*Y[1]),G=Math.hypot(Y[0],Y[2]),ee=Math.hypot(Y[1],Y[3]);this._cachedGetSinglePixelWidth=Math.max(G,ee)/W}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){let{lineWidth:Y}=this.current,W=(0,n.getCurrentTransform)(this.ctx),G,ee;if(W[1]===0&amp;&amp;W[2]===0){let F=Math.abs(W[0]),L=Math.abs(W[3]);if(Y===0)G=1/F,ee=1/L;else{let $=F*Y,P=L*Y;G=$&lt;1?1/$:1,ee=P&lt;1?1/P:1}}else{let F=Math.abs(W[0]*W[3]-W[2]*W[1]),L=Math.hypot(W[0],W[1]),$=Math.hypot(W[2],W[3]);if(Y===0)G=$/F,ee=L/F;else{let P=Y*F;G=$&gt;P?$/P:1,ee=L&gt;P?L/P:1}}this._cachedScaleForStroking=[G,ee]}return this._cachedScaleForStroking}rescaleAndStroke(Y){let{ctx:W}=this,{lineWidth:G}=this.current,[ee,F]=this.getScaleForStroking();if(W.lineWidth=G||1,ee===1&amp;&amp;F===1){W.stroke();return}let L,$,P;Y&amp;&amp;(L=(0,n.getCurrentTransform)(W),$=W.getLineDash().slice(),P=W.lineDashOffset),W.scale(ee,F);let X=Math.max(ee,F);W.setLineDash(W.getLineDash().map(K=&gt;K/X)),W.lineDashOffset/=X,W.stroke(),Y&amp;&amp;(W.setTransform(...L),W.setLineDash($),W.lineDashOffset=P)}isContentVisible(){for(let Y=this.markedContentStack.length-1;Y&gt;=0;Y--)if(!this.markedContentStack[Y].visible)return!1;return!0}}e.CanvasGraphics=ce;function ge(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&amp;&amp;(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(let ae in o.OPS)ce.prototype[ae]!==void 0&amp;&amp;(ce.prototype[o.OPS[ae]]=ce.prototype[ae])},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=f;var n=t(1),o=t(133),i=t(3);let s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=s;function a(v,b){if(!b||i.isNodeJS)return;let C=b[2]-b[0],x=b[3]-b[1],y=new Path2D;y.rect(b[0],b[1],C,x),v.clip(y)}class l{constructor(){this.constructor===l&amp;&amp;(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class u extends l{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let C;this._type==="axial"?C=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&amp;&amp;(C=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let x of this._colorStops)C.addColorStop(x[0],x[1]);return C}getPattern(b,C,x,y){let S;if(y===s.STROKE||y===s.FILL){let T=C.current.getClippedPathBoundingBox(y,(0,o.getCurrentTransform)(b))||[0,0,0,0],w=Math.ceil(T[2]-T[0])||1,k=Math.ceil(T[3]-T[1])||1,A=C.cachedCanvases.getCanvas("pattern",w,k,!0),I=A.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-T[0],-T[1]),x=n.Util.transform(x,[1,0,0,1,T[0],T[1]]),I.transform(...C.baseTransform),this.matrix&amp;&amp;I.transform(...this.matrix),a(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),S=b.createPattern(A.canvas,"no-repeat");let E=new DOMMatrix(x);try{S.setTransform(E)}catch(O){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${O==null?void 0:O.message}".`)}}else a(b,this._bbox),S=this._createGradient(b);return S}}function d(v,b,C,x,y,S,T,w){let k=b.coords,A=b.colors,I=v.data,E=v.width*4,O;k[C+1]&gt;k[x+1]&amp;&amp;(O=C,C=x,x=O,O=S,S=T,T=O),k[x+1]&gt;k[y+1]&amp;&amp;(O=x,x=y,y=O,O=T,T=w,w=O),k[C+1]&gt;k[x+1]&amp;&amp;(O=C,C=x,x=O,O=S,S=T,T=O);let Q=(k[C]+b.offsetX)*b.scaleX,j=(k[C+1]+b.offsetY)*b.scaleY,U=(k[x]+b.offsetX)*b.scaleX,B=(k[x+1]+b.offsetY)*b.scaleY,z=(k[y]+b.offsetX)*b.scaleX,N=(k[y+1]+b.offsetY)*b.scaleY;if(j&gt;=N)return;let V=A[S],re=A[S+1],ce=A[S+2],ge=A[T],ae=A[T+1],Y=A[T+2],W=A[w],G=A[w+1],ee=A[w+2],F=Math.round(j),L=Math.round(N),$,P,X,K,R,H,J,te;for(let de=F;de&lt;=L;de++){if(de&lt;B){let Ie;de&lt;j?Ie=0:Ie=(j-de)/(j-B),$=Q-(Q-U)*Ie,P=V-(V-ge)*Ie,X=re-(re-ae)*Ie,K=ce-(ce-Y)*Ie}else{let Ie;de&gt;N?Ie=1:B===N?Ie=0:Ie=(B-de)/(B-N),$=U-(U-z)*Ie,P=ge-(ge-W)*Ie,X=ae-(ae-G)*Ie,K=Y-(Y-ee)*Ie}let se;de&lt;j?se=0:de&gt;N?se=1:se=(j-de)/(j-N),R=Q-(Q-z)*se,H=V-(V-W)*se,J=re-(re-G)*se,te=ce-(ce-ee)*se;let be=Math.round(Math.min($,R)),Pe=Math.round(Math.max($,R)),ke=E*de+be*4;for(let Ie=be;Ie&lt;=Pe;Ie++)se=($-Ie)/($-R),se&lt;0?se=0:se&gt;1&amp;&amp;(se=1),I[ke++]=P-(P-H)*se|0,I[ke++]=X-(X-J)*se|0,I[ke++]=K-(K-te)*se|0,I[ke++]=255}}function c(v,b,C){let x=b.coords,y=b.colors,S,T;switch(b.type){case"lattice":let w=b.verticesPerRow,k=Math.floor(x.length/w)-1,A=w-1;for(S=0;S&lt;k;S++){let I=S*w;for(let E=0;E&lt;A;E++,I++)d(v,C,x[I],x[I+1],x[I+w],y[I],y[I+1],y[I+w]),d(v,C,x[I+w+1],x[I+1],x[I+w],y[I+w+1],y[I+1],y[I+w])}break;case"triangles":for(S=0,T=x.length;S&lt;T;S+=3)d(v,C,x[S],x[S+1],x[S+2],y[S],y[S+1],y[S+2]);break;default:throw new Error("illegal figure")}}class p extends l{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,C,x){let w=Math.floor(this._bounds[0]),k=Math.floor(this._bounds[1]),A=Math.ceil(this._bounds[2])-w,I=Math.ceil(this._bounds[3])-k,E=Math.min(Math.ceil(Math.abs(A*b[0]*1.1)),3e3),O=Math.min(Math.ceil(Math.abs(I*b[1]*1.1)),3e3),Q=A/E,j=I/O,U={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-k,scaleX:1/Q,scaleY:1/j},B=E+2*2,z=O+2*2,N=x.getCanvas("mesh",B,z,!1),V=N.context,re=V.createImageData(E,O);if(C){let ge=re.data;for(let ae=0,Y=ge.length;ae&lt;Y;ae+=4)ge[ae]=C[0],ge[ae+1]=C[1],ge[ae+2]=C[2],ge[ae+3]=255}for(let ge of this._figures)c(re,ge,U);return V.putImageData(re,2,2),{canvas:N.canvas,offsetX:w-2*Q,offsetY:k-2*j,scaleX:Q,scaleY:j}}getPattern(b,C,x,y){a(b,this._bbox);let S;if(y===s.SHADING)S=n.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(b));else if(S=n.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){let w=n.Util.singularValueDecompose2dScale(this.matrix);S=[S[0]*w[0],S[1]*w[1]]}let T=this._createMeshCanvas(S,y===s.SHADING?null:this._background,C.cachedCanvases);return y!==s.SHADING&amp;&amp;(b.setTransform(...C.baseTransform),this.matrix&amp;&amp;b.transform(...this.matrix)),b.translate(T.offsetX,T.offsetY),b.scale(T.scaleX,T.scaleY),b.createPattern(T.canvas,"no-repeat")}}class h extends l{getPattern(){return"hotpink"}}function f(v){switch(v[0]){case"RadialAxial":return new u(v);case"Mesh":return new p(v);case"Dummy":return new h}throw new Error(`Unknown IR type: ${v[0]}`)}let m={COLORED:1,UNCOLORED:2};class g{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,C,x,y,S){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=C,this.ctx=x,this.canvasGraphicsFactory=y,this.baseTransform=S}createPatternCanvas(b){let C=this.operatorList,x=this.bbox,y=this.xstep,S=this.ystep,T=this.paintType,w=this.tilingType,k=this.color,A=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+w);let I=x[0],E=x[1],O=x[2],Q=x[3],j=n.Util.singularValueDecompose2dScale(this.matrix),U=n.Util.singularValueDecompose2dScale(this.baseTransform),B=[j[0]*U[0],j[1]*U[1]],z=this.getSizeAndScale(y,this.ctx.canvas.width,B[0]),N=this.getSizeAndScale(S,this.ctx.canvas.height,B[1]),V=b.cachedCanvases.getCanvas("pattern",z.size,N.size,!0),re=V.context,ce=A.createCanvasGraphics(re);ce.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(ce,T,k);let ge=I,ae=E,Y=O,W=Q;return I&lt;0&amp;&amp;(ge=0,Y+=Math.abs(I)),E&lt;0&amp;&amp;(ae=0,W+=Math.abs(E)),re.translate(-(z.scale*ge),-(N.scale*ae)),ce.transform(z.scale,0,0,N.scale,0,0),re.save(),this.clipBbox(ce,ge,ae,Y,W),ce.baseTransform=(0,o.getCurrentTransform)(ce.ctx),ce.executeOperatorList(C),ce.endDrawing(),{canvas:V.canvas,scaleX:z.scale,scaleY:N.scale,offsetX:ge,offsetY:ae}}getSizeAndScale(b,C,x){b=Math.abs(b);let y=Math.max(g.MAX_PATTERN_SIZE,C),S=Math.ceil(b*x);return S&gt;=y?S=y:x=S/b,{scale:x,size:S}}clipBbox(b,C,x,y,S){let T=y-C,w=S-x;b.ctx.rect(C,x,T,w),b.current.updateRectMinMax((0,o.getCurrentTransform)(b.ctx),[C,x,y,S]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,C,x){let y=b.ctx,S=b.current;switch(C){case m.COLORED:let T=this.ctx;y.fillStyle=T.fillStyle,y.strokeStyle=T.strokeStyle,S.fillColor=T.fillStyle,S.strokeColor=T.strokeStyle;break;case m.UNCOLORED:let w=n.Util.makeHexColor(x[0],x[1],x[2]);y.fillStyle=w,y.strokeStyle=w,S.fillColor=w,S.strokeColor=w;break;default:throw new n.FormatError(`Unsupported paint type: ${C}`)}}getPattern(b,C,x,y){let S=x;y!==s.SHADING&amp;&amp;(S=n.Util.transform(S,C.baseTransform),this.matrix&amp;&amp;(S=n.Util.transform(S,this.matrix)));let T=this.createPatternCanvas(C),w=new DOMMatrix(S);w=w.translate(T.offsetX,T.offsetY),w=w.scale(1/T.scaleX,1/T.scaleY);let k=b.createPattern(T.canvas,"repeat");try{k.setTransform(w)}catch(A){(0,n.warn)(`TilingPattern.getPattern: "${A==null?void 0:A.message}".`)}return k}}e.TilingPattern=g},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=o;var n=t(1);function o(i){let{src:s,srcPos:a=0,dest:l,destPos:u=0,width:d,height:c,inverseDecode:p=!1}=i,h=n.FeatureTest.isLittleEndian?4278190080:255,[f,m]=p?[0,h]:[h,0],g=d&gt;&gt;3,v=d&amp;7,b=s.length;l=new Uint32Array(l.buffer);for(let C=0;C&lt;c;C++){for(let y=a+g;a&lt;y;a++){let S=a&lt;b?s[a]:255;l[u++]=S&amp;128?m:f,l[u++]=S&amp;64?m:f,l[u++]=S&amp;32?m:f,l[u++]=S&amp;16?m:f,l[u++]=S&amp;8?m:f,l[u++]=S&amp;4?m:f,l[u++]=S&amp;2?m:f,l[u++]=S&amp;1?m:f}if(v===0)continue;let x=a&lt;b?s[a++]:255;for(let y=0;y&lt;v;y++)l[u++]=x&amp;1&lt;&lt;7-y?m:f}return{srcPos:a,destPos:u}}},(r,e)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let t=Object.create(null);e.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=t(1);let o={UNKNOWN:0,DATA:1,ERROR:2},i={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s(l){switch(l instanceof Error||typeof l=="object"&amp;&amp;l!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new n.AbortException(l.message);case"MissingPDFException":return new n.MissingPDFException(l.message);case"PasswordException":return new n.PasswordException(l.message,l.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(l.message,l.status);case"UnknownErrorException":return new n.UnknownErrorException(l.message,l.details);default:return new n.UnknownErrorException(l.message,l.toString())}}class a{constructor(u,d,c){this.sourceName=u,this.targetName=d,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=p=&gt;{let h=p.data;if(h.targetName!==this.sourceName)return;if(h.stream){this._processStreamMessage(h);return}if(h.callback){let m=h.callbackId,g=this.callbackCapabilities[m];if(!g)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],h.callback===o.DATA)g.resolve(h.data);else if(h.callback===o.ERROR)g.reject(s(h.reason));else throw new Error("Unexpected callback case");return}let f=this.actionHandler[h.action];if(!f)throw new Error(`Unknown action from worker: ${h.action}`);if(h.callbackId){let m=this.sourceName,g=h.sourceName;new Promise(function(v){v(f(h.data))}).then(function(v){c.postMessage({sourceName:m,targetName:g,callback:o.DATA,callbackId:h.callbackId,data:v})},function(v){c.postMessage({sourceName:m,targetName:g,callback:o.ERROR,callbackId:h.callbackId,reason:s(v)})});return}if(h.streamId){this._createStreamSink(h);return}f(h.data)},c.addEventListener("message",this._onComObjOnMessage)}on(u,d){let c=this.actionHandler;if(c[u])throw new Error(`There is already an actionName called "${u}"`);c[u]=d}send(u,d,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:d},c)}sendWithPromise(u,d,c){let p=this.callbackId++,h=(0,n.createPromiseCapability)();this.callbackCapabilities[p]=h;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:p,data:d},c)}catch(f){h.reject(f)}return h.promise}sendWithStream(u,d,c,p){let h=this.streamId++,f=this.sourceName,m=this.targetName,g=this.comObj;return new ReadableStream({start:v=&gt;{let b=(0,n.createPromiseCapability)();return this.streamControllers[h]={controller:v,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:f,targetName:m,action:u,streamId:h,data:d,desiredSize:v.desiredSize},p),b.promise},pull:v=&gt;{let b=(0,n.createPromiseCapability)();return this.streamControllers[h].pullCall=b,g.postMessage({sourceName:f,targetName:m,stream:i.PULL,streamId:h,desiredSize:v.desiredSize}),b.promise},cancel:v=&gt;{(0,n.assert)(v instanceof Error,"cancel must have a valid reason");let b=(0,n.createPromiseCapability)();return this.streamControllers[h].cancelCall=b,this.streamControllers[h].isClosed=!0,g.postMessage({sourceName:f,targetName:m,stream:i.CANCEL,streamId:h,reason:s(v)}),b.promise}},c)}_createStreamSink(u){let d=u.streamId,c=this.sourceName,p=u.sourceName,h=this.comObj,f=this,m=this.actionHandler[u.action],g={enqueue(v){let b=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:1,C=arguments.length&gt;2?arguments[2]:void 0;if(this.isCancelled)return;let x=this.desiredSize;this.desiredSize-=b,x&gt;0&amp;&amp;this.desiredSize&lt;=0&amp;&amp;(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h.postMessage({sourceName:c,targetName:p,stream:i.ENQUEUE,streamId:d,chunk:v},C)},close(){this.isCancelled||(this.isCancelled=!0,h.postMessage({sourceName:c,targetName:p,stream:i.CLOSE,streamId:d}),delete f.streamSinks[d])},error(v){(0,n.assert)(v instanceof Error,"error must have a valid reason"),!this.isCancelled&amp;&amp;(this.isCancelled=!0,h.postMessage({sourceName:c,targetName:p,stream:i.ERROR,streamId:d,reason:s(v)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[d]=g,new Promise(function(v){v(m(u.data,g))}).then(function(){h.postMessage({sourceName:c,targetName:p,stream:i.START_COMPLETE,streamId:d,success:!0})},function(v){h.postMessage({sourceName:c,targetName:p,stream:i.START_COMPLETE,streamId:d,reason:s(v)})})}_processStreamMessage(u){let d=u.streamId,c=this.sourceName,p=u.sourceName,h=this.comObj,f=this.streamControllers[d],m=this.streamSinks[d];switch(u.stream){case i.START_COMPLETE:u.success?f.startCall.resolve():f.startCall.reject(s(u.reason));break;case i.PULL_COMPLETE:u.success?f.pullCall.resolve():f.pullCall.reject(s(u.reason));break;case i.PULL:if(!m){h.postMessage({sourceName:c,targetName:p,stream:i.PULL_COMPLETE,streamId:d,success:!0});break}m.desiredSize&lt;=0&amp;&amp;u.desiredSize&gt;0&amp;&amp;m.sinkCapability.resolve(),m.desiredSize=u.desiredSize,new Promise(function(g){g(m.onPull&amp;&amp;m.onPull())}).then(function(){h.postMessage({sourceName:c,targetName:p,stream:i.PULL_COMPLETE,streamId:d,success:!0})},function(g){h.postMessage({sourceName:c,targetName:p,stream:i.PULL_COMPLETE,streamId:d,reason:s(g)})});break;case i.ENQUEUE:if((0,n.assert)(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(u.chunk);break;case i.CLOSE:if((0,n.assert)(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),this._deleteStreamController(f,d);break;case i.ERROR:(0,n.assert)(f,"error should have stream controller"),f.controller.error(s(u.reason)),this._deleteStreamController(f,d);break;case i.CANCEL_COMPLETE:u.success?f.cancelCall.resolve():f.cancelCall.reject(s(u.reason)),this._deleteStreamController(f,d);break;case i.CANCEL:if(!m)break;new Promise(function(g){g(m.onCancel&amp;&amp;m.onCancel(s(u.reason)))}).then(function(){h.postMessage({sourceName:c,targetName:p,stream:i.CANCEL_COMPLETE,streamId:d,success:!0})},function(g){h.postMessage({sourceName:c,targetName:p,stream:i.CANCEL_COMPLETE,streamId:d,reason:s(g)})}),m.sinkCapability.reject(s(u.reason)),m.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,d){await Promise.allSettled([u.startCall&amp;&amp;u.startCall.promise,u.pullCall&amp;&amp;u.pullCall.promise,u.cancelCall&amp;&amp;u.cancelCall.promise]),delete this.streamControllers[d]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=a},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=t(1);function o(f,m,g){i(f,m),m.set(f,g)}function i(f,m){if(m.has(f))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(f,m){var g=u(f,m,"get");return a(f,g)}function a(f,m){return m.get?m.get.call(f):m.value}function l(f,m,g){var v=u(f,m,"set");return d(f,v,g),g}function u(f,m,g){if(!m.has(f))throw new TypeError("attempted to "+g+" private field on non-instance");return m.get(f)}function d(f,m,g){if(m.set)m.set.call(f,g);else{if(!m.writable)throw new TypeError("attempted to set read only private field");m.value=g}}var c=new WeakMap,p=new WeakMap;class h{constructor(m){let{parsedData:g,rawData:v}=m;o(this,c,{writable:!0,value:void 0}),o(this,p,{writable:!0,value:void 0}),l(this,c,g),l(this,p,v)}getRaw(){return s(this,p)}get(m){var g;return(g=s(this,c).get(m))!==null&amp;&amp;g!==void 0?g:null}getAll(){return(0,n.objectFromMap)(s(this,c))}has(m){return s(this,c).has(m)}}e.Metadata=h},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=t(1);function o(T,w){a(T,w),w.add(T)}function i(T,w,k){if(!w.has(T))throw new TypeError("attempted to get private field on non-instance");return k}function s(T,w,k){a(T,w),w.set(T,k)}function a(T,w){if(w.has(T))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(T,w,k){var A=c(T,w,"set");return u(T,A,k),k}function u(T,w,k){if(w.set)w.set.call(T,k);else{if(!w.writable)throw new TypeError("attempted to set read only private field");w.value=k}}function d(T,w){var k=c(T,w,"get");return p(T,k)}function c(T,w,k){if(!w.has(T))throw new TypeError("attempted to "+k+" private field on non-instance");return w.get(T)}function p(T,w){return w.get?w.get.call(T):w.value}let h=Symbol("INTERNAL");var f=new WeakMap;class m{constructor(w,k){s(this,f,{writable:!0,value:!0}),this.name=w,this.intent=k}get visible(){return d(this,f)}_setVisible(w,k){w!==h&amp;&amp;(0,n.unreachable)("Internal method `_setVisible` called."),l(this,f,k)}}var g=new WeakMap,v=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakSet;class y{constructor(w){if(o(this,x),s(this,g,{writable:!0,value:!0}),s(this,v,{writable:!0,value:new Map}),s(this,b,{writable:!0,value:null}),s(this,C,{writable:!0,value:null}),this.name=null,this.creator=null,w!==null){this.name=w.name,this.creator=w.creator,l(this,C,w.order);for(let k of w.groups)d(this,v).set(k.id,new m(k.name,k.intent));if(w.baseState==="OFF")for(let k of d(this,v).values())k._setVisible(h,!1);for(let k of w.on)d(this,v).get(k)._setVisible(h,!0);for(let k of w.off)d(this,v).get(k)._setVisible(h,!1);l(this,b,new Map);for(let[k,A]of d(this,v))d(this,b).set(k,A.visible)}}isVisible(w){if(d(this,v).size===0)return!0;if(!w)return(0,n.warn)("Optional content group not defined."),!0;if(w.type==="OCG")return d(this,v).has(w.id)?d(this,v).get(w.id).visible:((0,n.warn)(`Optional content group not found: ${w.id}`),!0);if(w.type==="OCMD"){if(w.expression)return i(this,x,S).call(this,w.expression);if(!w.policy||w.policy==="AnyOn"){for(let k of w.ids){if(!d(this,v).has(k))return(0,n.warn)(`Optional content group not found: ${k}`),!0;if(d(this,v).get(k).visible)return!0}return!1}else if(w.policy==="AllOn"){for(let k of w.ids){if(!d(this,v).has(k))return(0,n.warn)(`Optional content group not found: ${k}`),!0;if(!d(this,v).get(k).visible)return!1}return!0}else if(w.policy==="AnyOff"){for(let k of w.ids){if(!d(this,v).has(k))return(0,n.warn)(`Optional content group not found: ${k}`),!0;if(!d(this,v).get(k).visible)return!0}return!1}else if(w.policy==="AllOff"){for(let k of w.ids){if(!d(this,v).has(k))return(0,n.warn)(`Optional content group not found: ${k}`),!0;if(d(this,v).get(k).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${w.policy}.`),!0}return(0,n.warn)(`Unknown group type ${w.type}.`),!0}setVisibility(w){let k=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!0;if(!d(this,v).has(w)){(0,n.warn)(`Optional content group not found: ${w}`);return}d(this,v).get(w)._setVisible(h,!!k),l(this,g,null)}get hasInitialVisibility(){if(d(this,g)!==null)return d(this,g);for(let[w,k]of d(this,v)){let A=d(this,b).get(w);if(k.visible!==A)return l(this,g,!1)}return l(this,g,!0)}getOrder(){return d(this,v).size?d(this,C)?d(this,C).slice():[...d(this,v).keys()]:null}getGroups(){return d(this,v).size&gt;0?(0,n.objectFromMap)(d(this,v)):null}getGroup(w){return d(this,v).get(w)||null}}e.OptionalContentConfig=y;function S(T){let w=T.length;if(w&lt;2)return!0;let k=T[0];for(let A=1;A&lt;w;A++){let I=T[A],E;if(Array.isArray(I))E=i(this,x,S).call(this,I);else if(d(this,v).has(I))E=d(this,v).get(I).visible;else return(0,n.warn)(`Optional content group not found: ${I}`),!0;switch(k){case"And":if(!E)return!1;break;case"Or":if(E)return!0;break;case"Not":return!E;default:return!0}}return k==="And"}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=t(1),o=t(133);class i{constructor(u,d){(0,n.assert)(d,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u.progressiveDone||!1,this._contentDispositionFilename=u.contentDispositionFilename||null;let c=u.initialData;if((c==null?void 0:c.length)&gt;0){let p=new Uint8Array(c).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=d,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._contentLength=u.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,h)=&gt;{this._onReceiveData({begin:p,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((p,h)=&gt;{this._onProgress({loaded:p,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=&gt;{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=&gt;{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){let d=new Uint8Array(u.chunk).buffer;if(u.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{let c=this._rangeReaders.some(function(p){return p._begin!==u.begin?!1:(p._enqueue(d),!0)});(0,n.assert)(c,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u,d;return(u=(d=this._fullRequestReader)===null||d===void 0?void 0:d._loaded)!==null&amp;&amp;u!==void 0?u:0}_onProgress(u){if(u.total===void 0){let d=this._rangeReaders[0];d!=null&amp;&amp;d.onProgress&amp;&amp;d.onProgress({loaded:u.loaded})}else{let d=this._fullRequestReader;d!=null&amp;&amp;d.onProgress&amp;&amp;d.onProgress({loaded:u.loaded,total:u.total})}}_onProgressiveDone(){this._fullRequestReader&amp;&amp;this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){let d=this._rangeReaders.indexOf(u);d&gt;=0&amp;&amp;this._rangeReaders.splice(d,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let u=this._queuedChunks;return this._queuedChunks=null,new s(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,d){if(d&lt;=this._progressiveDataLength)return null;let c=new a(this,u,d);return this._pdfDataRangeTransport.requestDataRange(u,d),this._rangeReaders.push(c),c}cancelAllRequests(u){this._fullRequestReader&amp;&amp;this._fullRequestReader.cancel(u);for(let d of this._rangeReaders.slice(0))d.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=i;class s{constructor(u,d){let c=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:!1,p=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:null;this._stream=u,this._done=c||!1,this._filename=(0,o.isPdfFile)(p)?p:null,this._queuedChunks=d||[],this._loaded=0;for(let h of this._queuedChunks)this._loaded+=h.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length&gt;0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length&gt;0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(let d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(u,d,c){this._stream=u,this._begin=d,this._end=c,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(let c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};let u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(let d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(r,e)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class t{static textContent(o){let i=[],s={items:i,styles:Object.create(null)};function a(l){var u;if(!l)return;let d=null,c=l.name;if(c==="#text")d=l.value;else if(t.shouldBuildText(c))l!=null&amp;&amp;(u=l.attributes)!==null&amp;&amp;u!==void 0&amp;&amp;u.textContent?d=l.attributes.textContent:l.value&amp;&amp;(d=l.value);else return;if(d!==null&amp;&amp;i.push({str:d}),!!l.children)for(let p of l.children)a(p)}return a(o),s}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}e.XfaText=t},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=t(134);let o=function(l){return new Promise((u,d)=&gt;{ta("fs").readFile(l,(p,h)=&gt;{if(p||!h){d(new Error(p));return}u(new Uint8Array(h))})})};class i extends n.BaseCanvasFactory{_createCanvas(u,d){return EX().createCanvas(u,d)}}e.NodeCanvasFactory=i;class s extends n.BaseCMapReaderFactory{_fetchData(u,d){return o(u).then(c=&gt;({cMapData:c,compressionType:d}))}}e.NodeCMapReaderFactory=s;class a extends n.BaseStandardFontDataFactory{_fetchData(u){return o(u)}}e.NodeStandardFontDataFactory=a},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=t(132),o=t(1),i=t(148),s=t(149);function a(z,N){d(z,N),N.add(z)}function l(z,N,V){return N in z?Object.defineProperty(z,N,{value:V,enumerable:!0,configurable:!0,writable:!0}):z[N]=V,z}function u(z,N,V){d(z,N),N.set(z,V)}function d(z,N){if(N.has(z))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(z,N,V){if(!N.has(z))throw new TypeError("attempted to get private field on non-instance");return V}function p(z,N){var V=m(z,N,"get");return h(z,V)}function h(z,N){return N.get?N.get.call(z):N.value}function f(z,N,V){var re=m(z,N,"set");return g(z,re,V),V}function m(z,N,V){if(!N.has(z))throw new TypeError("attempted to "+V+" private field on non-instance");return N.get(z)}function g(z,N,V){if(N.set)N.set.call(z,V);else{if(!N.writable)throw new TypeError("attempted to set read only private field");N.value=V}}var v=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap,T=new WeakMap,w=new WeakMap,k=new WeakSet,A=new WeakSet,I=new WeakSet,E=new WeakSet;class O{constructor(N){a(this,E),a(this,I),a(this,A),a(this,k),u(this,v,{writable:!0,value:void 0}),u(this,b,{writable:!0,value:!1}),u(this,C,{writable:!0,value:this.pointerup.bind(this)}),u(this,x,{writable:!0,value:this.pointerdown.bind(this)}),u(this,y,{writable:!0,value:new Map}),u(this,S,{writable:!0,value:!1}),u(this,T,{writable:!0,value:!1}),u(this,w,{writable:!0,value:void 0}),O._initialized||(O._initialized=!0,i.FreeTextEditor.initialize(N.l10n),s.InkEditor.initialize(N.l10n),N.uiManager.registerEditorTypes([i.FreeTextEditor,s.InkEditor])),f(this,w,N.uiManager),this.annotationStorage=N.annotationStorage,this.pageIndex=N.pageIndex,this.div=N.div,f(this,v,N.accessibilityManager),p(this,w).addLayer(this)}updateToolbar(N){p(this,w).updateToolbar(N)}updateMode(){let N=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:p(this,w).getMode();c(this,E,B).call(this),N===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),p(this,w).unselectAll()}addInkEditorIfNeeded(N){if(!N&amp;&amp;p(this,w).getMode()!==o.AnnotationEditorType.INK)return;if(!N){for(let re of p(this,y).values())if(re.isEmpty()){re.setInBackground();return}}c(this,I,U).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(N){p(this,w).setEditingState(N)}addCommands(N){p(this,w).addCommands(N)}enable(){this.div.style.pointerEvents="auto";for(let N of p(this,y).values())N.enableEditing()}disable(){this.div.style.pointerEvents="none";for(let N of p(this,y).values())N.disableEditing()}setActiveEditor(N){p(this,w).getActive()!==N&amp;&amp;p(this,w).setActiveEditor(N)}enableClick(){this.div.addEventListener("pointerdown",p(this,x)),this.div.addEventListener("pointerup",p(this,C))}disableClick(){this.div.removeEventListener("pointerdown",p(this,x)),this.div.removeEventListener("pointerup",p(this,C))}attach(N){p(this,y).set(N.id,N)}detach(N){var V;p(this,y).delete(N.id),(V=p(this,v))===null||V===void 0||V.removePointerInTextLayer(N.contentDiv)}remove(N){p(this,w).removeEditor(N),this.detach(N),this.annotationStorage.remove(N.id),N.div.style.display="none",setTimeout(()=&gt;{N.div.style.display="",N.div.remove(),N.isAttachedToDOM=!1,document.activeElement===document.body&amp;&amp;p(this,w).focusMainContainer()},0),p(this,T)||this.addInkEditorIfNeeded(!1)}add(N){if(c(this,k,Q).call(this,N),p(this,w).addEditor(N),this.attach(N),!N.isAttachedToDOM){let V=N.render();this.div.append(V),N.isAttachedToDOM=!0}this.moveEditorInDOM(N),N.onceAdded(),this.addToAnnotationStorage(N)}moveEditorInDOM(N){var V;(V=p(this,v))===null||V===void 0||V.moveElementInDOM(this.div,N.div,N.contentDiv,!0)}addToAnnotationStorage(N){!N.isEmpty()&amp;&amp;!this.annotationStorage.has(N.id)&amp;&amp;this.annotationStorage.setValue(N.id,N)}addOrRebuild(N){N.needsToBeRebuilt()?N.rebuild():this.add(N)}addANewEditor(N){let V=()=&gt;{this.addOrRebuild(N)},re=()=&gt;{N.remove()};this.addCommands({cmd:V,undo:re,mustExec:!0})}addUndoableEditor(N){let V=()=&gt;{this.addOrRebuild(N)},re=()=&gt;{N.remove()};this.addCommands({cmd:V,undo:re,mustExec:!1})}getNextId(){return p(this,w).getId()}deserialize(N){switch(N.annotationType){case o.AnnotationEditorType.FREETEXT:return i.FreeTextEditor.deserialize(N,this);case o.AnnotationEditorType.INK:return s.InkEditor.deserialize(N,this)}return null}setSelected(N){p(this,w).setSelected(N)}toggleSelected(N){p(this,w).toggleSelected(N)}isSelected(N){return p(this,w).isSelected(N)}unselect(N){p(this,w).unselect(N)}pointerup(N){let V=n.KeyboardManager.platform.isMac;if(!(N.button!==0||N.ctrlKey&amp;&amp;V)&amp;&amp;N.target===this.div&amp;&amp;!!p(this,S)){if(f(this,S,!1),!p(this,b)){f(this,b,!0);return}c(this,I,U).call(this,N)}}pointerdown(N){let V=n.KeyboardManager.platform.isMac;if(N.button!==0||N.ctrlKey&amp;&amp;V||N.target!==this.div)return;f(this,S,!0);let re=p(this,w).getActive();f(this,b,!re||re.isEmpty())}drop(N){let V=N.dataTransfer.getData("text/plain"),re=p(this,w).getEditor(V);if(!re)return;N.preventDefault(),N.dataTransfer.dropEffect="move",c(this,k,Q).call(this,re);let ce=this.div.getBoundingClientRect(),ge=N.clientX-ce.x,ae=N.clientY-ce.y;re.translate(ge-re.startX,ae-re.startY),this.moveEditorInDOM(re),re.div.focus()}dragover(N){N.preventDefault()}destroy(){var N;((N=p(this,w).getActive())===null||N===void 0?void 0:N.parent)===this&amp;&amp;p(this,w).setActiveEditor(null);for(let re of p(this,y).values()){var V;(V=p(this,v))===null||V===void 0||V.removePointerInTextLayer(re.contentDiv),re.isAttachedToDOM=!1,re.div.remove(),re.parent=null}this.div=null,p(this,y).clear(),p(this,w).removeLayer(this)}render(N){this.viewport=N.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(let V of p(this,w).getEditors(this.pageIndex))this.add(V);this.updateMode()}update(N){this.viewport=N.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){let[N,V,re,ce]=this.viewport.viewBox,ge=re-N,ae=ce-V;return[ge,ae]}get viewportBaseDimensions(){let{width:N,height:V,rotation:re}=this.viewport;return re%180===0?[N,V]:[V,N]}setDimensions(){let{width:N,height:V,rotation:re}=this.viewport,ce=re%180!==0,ge=Math.floor(N)+"px",ae=Math.floor(V)+"px";this.div.style.width=ce?ae:ge,this.div.style.height=ce?ge:ae,this.div.setAttribute("data-main-rotation",re)}}e.AnnotationEditorLayer=O;function Q(z){var N;z.parent!==this&amp;&amp;(this.attach(z),z.pageIndex=this.pageIndex,(N=z.parent)===null||N===void 0||N.detach(z),z.parent=this,z.div&amp;&amp;z.isAttachedToDOM&amp;&amp;(z.div.remove(),this.div.append(z.div)))}function j(z){switch(p(this,w).getMode()){case o.AnnotationEditorType.FREETEXT:return new i.FreeTextEditor(z);case o.AnnotationEditorType.INK:return new s.InkEditor(z)}return null}function U(z){let N=this.getNextId(),V=c(this,A,j).call(this,{parent:this,id:N,x:z.offsetX,y:z.offsetY});return V&amp;&amp;this.add(V),V}function B(){f(this,T,!0);for(let z of p(this,y).values())z.isEmpty()&amp;&amp;z.remove();f(this,T,!1)}l(O,"_initialized",!1)},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=t(1),o=t(132),i=t(131);function s(U,B){u(U,B),B.add(U)}function a(U,B,z){return B in U?Object.defineProperty(U,B,{value:z,enumerable:!0,configurable:!0,writable:!0}):U[B]=z,U}function l(U,B,z){u(U,B),B.set(U,z)}function u(U,B){if(B.has(U))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(U,B){var z=f(U,B,"get");return c(U,z)}function c(U,B){return B.get?B.get.call(U):B.value}function p(U,B,z){if(!B.has(U))throw new TypeError("attempted to get private field on non-instance");return z}function h(U,B,z){var N=f(U,B,"set");return m(U,N,z),z}function f(U,B,z){if(!B.has(U))throw new TypeError("attempted to "+z+" private field on non-instance");return B.get(U)}function m(U,B,z){if(B.set)B.set.call(U,z);else{if(!B.writable)throw new TypeError("attempted to set read only private field");B.value=z}}var g=new WeakMap,v=new WeakMap,b=new WeakMap,C=new WeakMap,x=new WeakMap,y=new WeakMap,S=new WeakMap,T=new WeakSet,w=new WeakSet,k=new WeakSet,A=new WeakSet;class I extends i.AnnotationEditor{constructor(B){super({...B,name:"freeTextEditor"}),s(this,A),s(this,k),s(this,w),s(this,T),l(this,g,{writable:!0,value:this.editorDivBlur.bind(this)}),l(this,v,{writable:!0,value:this.editorDivFocus.bind(this)}),l(this,b,{writable:!0,value:this.editorDivKeydown.bind(this)}),l(this,C,{writable:!0,value:void 0}),l(this,x,{writable:!0,value:""}),l(this,y,{writable:!0,value:!1}),l(this,S,{writable:!0,value:void 0}),h(this,C,B.color||I._defaultColor||i.AnnotationEditor._defaultLineColor),h(this,S,B.fontSize||I._defaultFontSize)}static initialize(B){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(N=&gt;[N,B.get(N)]));let z=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(z.getPropertyValue("--freetext-padding"))}static updateDefaultParams(B,z){switch(B){case n.AnnotationEditorParamsType.FREETEXT_SIZE:I._defaultFontSize=z;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:I._defaultColor=z;break}}updateParams(B,z){switch(B){case n.AnnotationEditorParamsType.FREETEXT_SIZE:p(this,T,E).call(this,z);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:p(this,w,O).call(this,z);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,I._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,I._defaultColor||i.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,d(this,S)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,d(this,C)]]}getInitialTranslation(){return[-I._internalPadding*this.parent.scaleFactor,-(I._internalPadding+d(this,S))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&amp;&amp;(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",d(this,b)),this.editorDiv.addEventListener("focus",d(this,v)),this.editorDiv.addEventListener("blur",d(this,g)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",d(this,b)),this.editorDiv.removeEventListener("focus",d(this,v)),this.editorDiv.removeEventListener("blur",d(this,g)),this.div.focus(),this.isEditing=!1)}focusin(B){super.focusin(B),B.target!==this.editorDiv&amp;&amp;this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),d(this,y)||(h(this,y,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),h(this,x,p(this,k,Q).call(this).trimEnd()),p(this,A,j).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(B){this.enableEditMode(),this.editorDiv.focus()}keydown(B){B.target===this.div&amp;&amp;B.key==="Enter"&amp;&amp;(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(B){I._keyboardManager.exec(this,B)}editorDivFocus(B){this.isEditing=!0}editorDivBlur(B){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let B,z;this.width&amp;&amp;(B=this.x,z=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),I._l10nPromise.get("editor_free_text_aria_label").then(V=&gt;{var re;return(re=this.editorDiv)===null||re===void 0?void 0:re.setAttribute("aria-label",V)}),I._l10nPromise.get("free_text_default_content").then(V=&gt;{var re;return(re=this.editorDiv)===null||re===void 0?void 0:re.setAttribute("default-content",V)}),this.editorDiv.contentEditable=!0;let{style:N}=this.editorDiv;if(N.fontSize=`calc(${d(this,S)}px * var(--scale-factor))`,N.color=d(this,C),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[V,re]=this.parent.viewportBaseDimensions;this.setAt(B*V,z*re,this.width*V,this.height*re);for(let ce of d(this,x).split(`
`)){let ge=document.createElement("div");ge.append(ce?document.createTextNode(ce):document.createElement("br")),this.editorDiv.append(ge)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(B,z){let N=super.deserialize(B,z);return h(N,S,B.fontSize),h(N,C,n.Util.makeHexColor(...B.color)),h(N,x,B.value),N}serialize(){if(this.isEmpty())return null;let B=I._internalPadding*this.parent.scaleFactor,z=this.getRect(B,B),N=i.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:N,fontSize:d(this,S),value:d(this,x),pageIndex:this.parent.pageIndex,rect:z,rotation:this.rotation}}}e.FreeTextEditor=I;function E(U){let B=N=&gt;{this.editorDiv.style.fontSize=`calc(${N}px * var(--scale-factor))`,this.translate(0,-(N-d(this,S))*this.parent.scaleFactor),h(this,S,N),p(this,A,j).call(this)},z=d(this,S);this.parent.addCommands({cmd:()=&gt;{B(U)},undo:()=&gt;{B(z)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function O(U){let B=d(this,C);this.parent.addCommands({cmd:()=&gt;{h(this,C,U),this.editorDiv.style.color=U},undo:()=&gt;{h(this,C,B),this.editorDiv.style.color=B},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Q(){let U=this.editorDiv.getElementsByTagName("div");if(U.length===0)return this.editorDiv.innerText;let B=[];for(let z=0,N=U.length;z&lt;N;z++){let re=U[z].firstChild;(re==null?void 0:re.nodeName)==="#text"?B.push(re.data):B.push("")}return B.join(`
`)}function j(){let[U,B]=this.parent.viewportBaseDimensions,z=this.div.getBoundingClientRect();this.width=z.width/U,this.height=z.height/B}a(I,"_freeTextDefaultContent",""),a(I,"_l10nPromise",void 0),a(I,"_internalPadding",0),a(I,"_defaultColor",null),a(I,"_defaultFontSize",10),a(I,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],I.prototype.commitOrRemove]])),a(I,"_type","freetext")},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return i.fitCurve}});var n=t(1),o=t(131),i=t(150),s=t(132);function a(Oe,Fe){d(Oe,Fe),Fe.add(Oe)}function l(Oe,Fe,rt){return Fe in Oe?Object.defineProperty(Oe,Fe,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Oe[Fe]=rt,Oe}function u(Oe,Fe,rt){d(Oe,Fe),Fe.set(Oe,rt)}function d(Oe,Fe){if(Fe.has(Oe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(Oe,Fe,rt){return p(Oe,Fe),rt}function p(Oe,Fe){if(Oe!==Fe)throw new TypeError("Private static access of wrong provenance")}function h(Oe,Fe,rt){var Ct=g(Oe,Fe,"set");return f(Oe,Ct,rt),rt}function f(Oe,Fe,rt){if(Fe.set)Fe.set.call(Oe,rt);else{if(!Fe.writable)throw new TypeError("attempted to set read only private field");Fe.value=rt}}function m(Oe,Fe){var rt=g(Oe,Fe,"get");return v(Oe,rt)}function g(Oe,Fe,rt){if(!Fe.has(Oe))throw new TypeError("attempted to "+rt+" private field on non-instance");return Fe.get(Oe)}function v(Oe,Fe){return Fe.get?Fe.get.call(Oe):Fe.value}function b(Oe,Fe,rt){if(!Fe.has(Oe))throw new TypeError("attempted to get private field on non-instance");return rt}let C=16;var x=new WeakMap,y=new WeakMap,S=new WeakMap,T=new WeakMap,w=new WeakMap,k=new WeakMap,A=new WeakMap,I=new WeakMap,E=new WeakMap,O=new WeakMap,Q=new WeakMap,j=new WeakMap,U=new WeakMap,B=new WeakMap,z=new WeakSet,N=new WeakSet,V=new WeakSet,re=new WeakSet,ce=new WeakSet,ge=new WeakSet,ae=new WeakSet,Y=new WeakSet,W=new WeakSet,G=new WeakSet,ee=new WeakSet,F=new WeakSet,L=new WeakSet,$=new WeakSet,P=new WeakSet,X=new WeakSet,K=new WeakSet,R=new WeakSet,H=new WeakSet,J=new WeakSet,te=new WeakSet,de=new WeakSet;class se extends o.AnnotationEditor{constructor(Fe){super({...Fe,name:"inkEditor"}),a(this,de),a(this,te),a(this,J),a(this,H),a(this,R),a(this,K),a(this,X),a(this,P),a(this,$),a(this,L),a(this,F),a(this,ee),a(this,G),a(this,W),a(this,Y),a(this,ae),a(this,ge),a(this,ce),a(this,re),a(this,V),a(this,N),a(this,z),u(this,x,{writable:!0,value:0}),u(this,y,{writable:!0,value:0}),u(this,S,{writable:!0,value:0}),u(this,T,{writable:!0,value:this.canvasPointermove.bind(this)}),u(this,w,{writable:!0,value:this.canvasPointerleave.bind(this)}),u(this,k,{writable:!0,value:this.canvasPointerup.bind(this)}),u(this,A,{writable:!0,value:this.canvasPointerdown.bind(this)}),u(this,I,{writable:!0,value:!1}),u(this,E,{writable:!0,value:!1}),u(this,O,{writable:!0,value:null}),u(this,Q,{writable:!0,value:null}),u(this,j,{writable:!0,value:0}),u(this,U,{writable:!0,value:0}),u(this,B,{writable:!0,value:null}),this.color=Fe.color||null,this.thickness=Fe.thickness||null,this.opacity=Fe.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Fe){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(rt=&gt;[rt,Fe.get(rt)]))}static updateDefaultParams(Fe,rt){switch(Fe){case n.AnnotationEditorParamsType.INK_THICKNESS:se._defaultThickness=rt;break;case n.AnnotationEditorParamsType.INK_COLOR:se._defaultColor=rt;break;case n.AnnotationEditorParamsType.INK_OPACITY:se._defaultOpacity=rt/100;break}}updateParams(Fe,rt){switch(Fe){case n.AnnotationEditorParamsType.INK_THICKNESS:b(this,z,be).call(this,rt);break;case n.AnnotationEditorParamsType.INK_COLOR:b(this,N,Pe).call(this,rt);break;case n.AnnotationEditorParamsType.INK_OPACITY:b(this,V,ke).call(this,rt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,se._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,se._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(se._defaultOpacity*100)]]}get propertiesToUpdate(){var Fe;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||se._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||se._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((Fe=this.opacity)!==null&amp;&amp;Fe!==void 0?Fe:se._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&amp;&amp;(this.canvas||(b(this,ee,xe).call(this),b(this,F,Ge).call(this)),this.isAttachedToDOM||(this.parent.add(this),b(this,L,ct).call(this)),b(this,te,wt).call(this))}remove(){this.canvas!==null&amp;&amp;(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,m(this,Q).disconnect(),h(this,Q,null),super.remove())}enableEditMode(){m(this,I)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",m(this,A)),this.canvas.addEventListener("pointerup",m(this,k)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",m(this,A)),this.canvas.removeEventListener("pointerup",m(this,k)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&amp;&amp;this.paths[0].length===0}commit(){m(this,I)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),h(this,I,!0),this.div.classList.add("disabled"),b(this,te,wt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Fe){super.focusin(Fe),this.enableEditMode()}canvasPointerdown(Fe){Fe.button!==0||!this.isInEditMode()||m(this,I)||(this.setInForeground(),Fe.type!=="mouse"&amp;&amp;this.div.focus(),Fe.stopPropagation(),this.canvas.addEventListener("pointerleave",m(this,w)),this.canvas.addEventListener("pointermove",m(this,T)),b(this,ge,Ae).call(this,Fe.offsetX,Fe.offsetY))}canvasPointermove(Fe){Fe.stopPropagation(),b(this,ae,lt).call(this,Fe.offsetX,Fe.offsetY)}canvasPointerup(Fe){Fe.button===0&amp;&amp;this.isInEditMode()&amp;&amp;this.currentPath.length!==0&amp;&amp;(Fe.stopPropagation(),b(this,G,_e).call(this,Fe),this.setInBackground())}canvasPointerleave(Fe){b(this,G,_e).call(this,Fe),this.setInBackground()}render(){if(this.div)return this.div;let Fe,rt;this.width&amp;&amp;(Fe=this.x,rt=this.y),super.render(),se._l10nPromise.get("editor_ink_aria_label").then(Er=&gt;{var Ht;return(Ht=this.div)===null||Ht===void 0?void 0:Ht.setAttribute("aria-label",Er)});let[Ct,ir,hr,Dr]=b(this,re,Ie).call(this);if(this.setAt(Ct,ir,0,0),this.setDims(hr,Dr),b(this,ee,xe).call(this),this.width){let[Er,Ht]=this.parent.viewportBaseDimensions;this.setAt(Fe*Er,rt*Ht,this.width*Er,this.height*Ht),h(this,E,!0),b(this,L,ct).call(this),this.setDims(this.width*Er,this.height*Ht),b(this,W,et).call(this),b(this,de,dr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return b(this,F,Ge).call(this),this.div}setDimensions(Fe,rt){let Ct=Math.round(Fe),ir=Math.round(rt);if(m(this,j)===Ct&amp;&amp;m(this,U)===ir)return;h(this,j,Ct),h(this,U,ir),this.canvas.style.visibility="hidden",m(this,x)&amp;&amp;Math.abs(m(this,x)-Fe/rt)&gt;.01&amp;&amp;(rt=Math.ceil(Fe/m(this,x)),this.setDims(Fe,rt));let[hr,Dr]=this.parent.viewportBaseDimensions;this.width=Fe/hr,this.height=rt/Dr,m(this,I)&amp;&amp;b(this,$,bt).call(this,Fe,rt),b(this,L,ct).call(this),b(this,W,et).call(this),this.canvas.style.visibility="visible"}static deserialize(Fe,rt){let Ct=super.deserialize(Fe,rt);Ct.thickness=Fe.thickness,Ct.color=n.Util.makeHexColor(...Fe.color),Ct.opacity=Fe.opacity;let[ir,hr]=rt.pageDimensions,Dr=Ct.width*ir,Er=Ct.height*hr,Ht=rt.scaleFactor,yn=Fe.thickness/2;h(Ct,x,Dr/Er),h(Ct,I,!0),h(Ct,j,Math.round(Dr)),h(Ct,U,Math.round(Er));for(let{bezier:Dn}of Fe.paths){let qn=[];Ct.paths.push(qn);let wo=Ht*(Dn[0]-yn),ro=Ht*(Er-Dn[1]-yn);for(let Oo=2,Ud=Dn.length;Oo&lt;Ud;Oo+=6){let zd=Ht*(Dn[Oo]-yn),Nu=Ht*(Er-Dn[Oo+1]-yn),lm=Ht*(Dn[Oo+2]-yn),Hd=Ht*(Er-Dn[Oo+3]-yn),Kl=Ht*(Dn[Oo+4]-yn),ml=Ht*(Er-Dn[Oo+5]-yn);qn.push([[wo,ro],[zd,Nu],[lm,Hd],[Kl,ml]]),wo=Kl,ro=ml}let Ni=c(this,se,Ze).call(this,qn);Ct.bezierPath2D.push(Ni)}let Yo=b(Ct,H,Te).call(Ct);return h(Ct,S,Math.max(C,Yo[2]-Yo[0])),h(Ct,y,Math.max(C,Yo[3]-Yo[1])),b(Ct,$,bt).call(Ct,Dr,Er),Ct}serialize(){if(this.isEmpty())return null;let Fe=this.getRect(0,0),rt=this.rotation%180===0?Fe[3]-Fe[1]:Fe[2]-Fe[0],Ct=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:Ct,thickness:this.thickness,opacity:this.opacity,paths:b(this,X,St).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,rt),pageIndex:this.parent.pageIndex,rect:Fe,rotation:this.rotation}}}e.InkEditor=se;function be(Oe){let Fe=this.thickness;this.parent.addCommands({cmd:()=&gt;{this.thickness=Oe,b(this,te,wt).call(this)},undo:()=&gt;{this.thickness=Fe,b(this,te,wt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Pe(Oe){let Fe=this.color;this.parent.addCommands({cmd:()=&gt;{this.color=Oe,b(this,W,et).call(this)},undo:()=&gt;{this.color=Fe,b(this,W,et).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function ke(Oe){Oe/=100;let Fe=this.opacity;this.parent.addCommands({cmd:()=&gt;{this.opacity=Oe,b(this,W,et).call(this)},undo:()=&gt;{this.opacity=Fe,b(this,W,et).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Ie(){let{width:Oe,height:Fe,rotation:rt}=this.parent.viewport;switch(rt){case 90:return[0,Oe,Oe,Fe];case 180:return[Oe,Fe,Oe,Fe];case 270:return[Fe,0,Oe,Fe];default:return[0,0,Oe,Fe]}}function Ve(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,s.opacityToHex)(this.opacity)}`}function Ae(Oe,Fe){if(this.isEditing=!0,!m(this,E)){var rt;h(this,E,!0),b(this,L,ct).call(this),this.thickness||(this.thickness=se._defaultThickness),this.color||(this.color=se._defaultColor||o.AnnotationEditor._defaultLineColor),(rt=this.opacity)!==null&amp;&amp;rt!==void 0||(this.opacity=se._defaultOpacity)}this.currentPath.push([Oe,Fe]),h(this,O,null),b(this,ce,Ve).call(this),this.ctx.beginPath(),this.ctx.moveTo(Oe,Fe),h(this,B,()=&gt;{!m(this,B)||(m(this,O)&amp;&amp;(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):b(this,W,et).call(this),this.ctx.lineTo(...m(this,O)),h(this,O,null),this.ctx.stroke()),window.requestAnimationFrame(m(this,B)))}),window.requestAnimationFrame(m(this,B))}function lt(Oe,Fe){let[rt,Ct]=this.currentPath.at(-1);Oe===rt&amp;&amp;Fe===Ct||(this.currentPath.push([Oe,Fe]),h(this,O,[Oe,Fe]))}function vt(Oe,Fe){this.ctx.closePath(),h(this,B,null),Oe=Math.min(Math.max(Oe,0),this.canvas.width),Fe=Math.min(Math.max(Fe,0),this.canvas.height);let[rt,Ct]=this.currentPath.at(-1);(Oe!==rt||Fe!==Ct)&amp;&amp;this.currentPath.push([Oe,Fe]);let ir;if(this.currentPath.length!==1)ir=(0,i.fitCurve)(this.currentPath,30,null);else{let Ht=[Oe,Fe];ir=[[Ht,Ht.slice(),Ht.slice(),Ht]]}let hr=c(se,se,Ze).call(se,ir);this.currentPath.length=0;let Dr=()=&gt;{this.paths.push(ir),this.bezierPath2D.push(hr),this.rebuild()},Er=()=&gt;{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(b(this,ee,xe).call(this),b(this,F,Ge).call(this)),b(this,te,wt).call(this))};this.parent.addCommands({cmd:Dr,undo:Er,mustExec:!0})}function et(){if(this.isEmpty()){b(this,P,Be).call(this);return}b(this,ce,Ve).call(this);let{canvas:Oe,ctx:Fe}=this;Fe.setTransform(1,0,0,1,0,0),Fe.clearRect(0,0,Oe.width,Oe.height),b(this,P,Be).call(this);for(let rt of this.bezierPath2D)Fe.stroke(rt)}function _e(Oe){b(this,Y,vt).call(this,Oe.offsetX,Oe.offsetY),this.canvas.removeEventListener("pointerleave",m(this,w)),this.canvas.removeEventListener("pointermove",m(this,T)),this.parent.addToAnnotationStorage(this)}function xe(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",se._l10nPromise.get("editor_ink_canvas_aria_label").then(Oe=&gt;{var Fe;return(Fe=this.canvas)===null||Fe===void 0?void 0:Fe.setAttribute("aria-label",Oe)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Ge(){h(this,Q,new ResizeObserver(Oe=&gt;{let Fe=Oe[0].contentRect;Fe.width&amp;&amp;Fe.height&amp;&amp;this.setDimensions(Fe.width,Fe.height)})),m(this,Q).observe(this.div)}function ct(){if(!m(this,E))return;let[Oe,Fe]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Oe),this.canvas.height=Math.ceil(this.height*Fe),b(this,P,Be).call(this)}function bt(Oe,Fe){let rt=b(this,J,ze).call(this),Ct=(Oe-rt)/m(this,S),ir=(Fe-rt)/m(this,y);this.scaleFactor=Math.min(Ct,ir)}function Be(){let Oe=b(this,J,ze).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Oe,this.translationY*this.scaleFactor+Oe)}function Ze(Oe){let Fe=new Path2D;for(let rt=0,Ct=Oe.length;rt&lt;Ct;rt++){let[ir,hr,Dr,Er]=Oe[rt];rt===0&amp;&amp;Fe.moveTo(...ir),Fe.bezierCurveTo(hr[0],hr[1],Dr[0],Dr[1],Er[0],Er[1])}return Fe}function St(Oe,Fe,rt,Ct){let hr=[],Dr=this.thickness/2,Er,Ht;for(let yn of this.paths){Er=[],Ht=[];for(let Yo=0,Dn=yn.length;Yo&lt;Dn;Yo++){let[qn,wo,ro,Ni]=yn[Yo],Oo=Oe*(qn[0]+Fe)+Dr,Ud=Ct-Oe*(qn[1]+rt)-Dr,zd=Oe*(wo[0]+Fe)+Dr,Nu=Ct-Oe*(wo[1]+rt)-Dr,lm=Oe*(ro[0]+Fe)+Dr,Hd=Ct-Oe*(ro[1]+rt)-Dr,Kl=Oe*(Ni[0]+Fe)+Dr,ml=Ct-Oe*(Ni[1]+rt)-Dr;Yo===0&amp;&amp;(Er.push(Oo,Ud),Ht.push(Oo,Ud)),Er.push(zd,Nu,lm,Hd,Kl,ml),b(this,K,Ne).call(this,Oo,Ud,zd,Nu,lm,Hd,Kl,ml,4,Ht)}hr.push({bezier:Er,points:Ht})}return hr}function Ne(Oe,Fe,rt,Ct,ir,hr,Dr,Er,Ht,yn){if(b(this,R,Ce).call(this,Oe,Fe,rt,Ct,ir,hr,Dr,Er)){yn.push(Dr,Er);return}for(let Yo=1;Yo&lt;Ht-1;Yo++){let Dn=Yo/Ht,qn=1-Dn,wo=Dn*Oe+qn*rt,ro=Dn*Fe+qn*Ct,Ni=Dn*rt+qn*ir,Oo=Dn*Ct+qn*hr,Ud=Dn*ir+qn*Dr,zd=Dn*hr+qn*Er;wo=Dn*wo+qn*Ni,ro=Dn*ro+qn*Oo,Ni=Dn*Ni+qn*Ud,Oo=Dn*Oo+qn*zd,wo=Dn*wo+qn*Ni,ro=Dn*ro+qn*Oo,yn.push(wo,ro)}yn.push(Dr,Er)}function Ce(Oe,Fe,rt,Ct,ir,hr,Dr,Er){let yn=(3*rt-2*Oe-Dr)**2,Yo=(3*Ct-2*Fe-Er)**2,Dn=(3*ir-Oe-2*Dr)**2,qn=(3*hr-Fe-2*Er)**2;return Math.max(yn,Dn)+Math.max(Yo,qn)&lt;=10}function Te(){let Oe=1/0,Fe=-1/0,rt=1/0,Ct=-1/0;for(let ir of this.paths)for(let[hr,Dr,Er,Ht]of ir){let yn=n.Util.bezierBoundingBox(...hr,...Dr,...Er,...Ht);Oe=Math.min(Oe,yn[0]),rt=Math.min(rt,yn[1]),Fe=Math.max(Fe,yn[2]),Ct=Math.max(Ct,yn[3])}return[Oe,rt,Fe,Ct]}function ze(){return m(this,I)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function wt(){let Oe=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!m(this,I)){b(this,W,et).call(this);return}let Fe=b(this,H,Te).call(this),rt=b(this,J,ze).call(this);h(this,S,Math.max(C,Fe[2]-Fe[0])),h(this,y,Math.max(C,Fe[3]-Fe[1]));let Ct=Math.ceil(rt+m(this,S)*this.scaleFactor),ir=Math.ceil(rt+m(this,y)*this.scaleFactor),[hr,Dr]=this.parent.viewportBaseDimensions;this.width=Ct/hr,this.height=ir/Dr,h(this,x,Ct/ir),b(this,de,dr).call(this);let Er=this.translationX,Ht=this.translationY;this.translationX=-Fe[0],this.translationY=-Fe[1],b(this,L,ct).call(this),b(this,W,et).call(this),h(this,j,Ct),h(this,U,ir),this.setDims(Ct,ir);let yn=Oe?rt/this.scaleFactor/2:0;this.translate(Er-this.translationX-yn,Ht-this.translationY-yn)}function dr(){let{style:Oe}=this.div;m(this,x)&gt;=1?(Oe.minHeight=`${C}px`,Oe.minWidth=`${Math.round(m(this,x)*C)}px`):(Oe.minWidth=`${C}px`,Oe.minHeight=`${Math.round(C/m(this,x))}px`)}l(se,"_defaultColor",null),l(se,"_defaultOpacity",1),l(se,"_defaultThickness",1),l(se,"_l10nPromise",void 0),l(se,"_type","ink")},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;let n=t(151);e.fitCurve=n},r=&gt;{"use strict";function e(f,m,g){if(!Array.isArray(f))throw new TypeError("First argument should be an array");if(f.forEach(x=&gt;{if(!Array.isArray(x)||x.some(y=&gt;typeof y!="number")||x.length!==f[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),f=f.filter((x,y)=&gt;y===0||!x.every((S,T)=&gt;S===f[y-1][T])),f.length&lt;2)return[];let v=f.length,b=c(f[1],f[0]),C=c(f[v-2],f[v-1]);return t(f,b,C,m,g)}function t(f,m,g,v,b){var x,y,S,T,w,k,A,I,E,O,Q,j,U;if(f.length===2)return j=p.vectorLen(p.subtract(f[0],f[1]))/3,x=[f[0],p.addArrays(f[0],p.mulItems(m,j)),p.addArrays(f[1],p.mulItems(g,j)),f[1]],[x];if(y=a(f),[x,T,k]=n(f,y,y,m,g,b),T===0||T&lt;v)return[x];if(T&lt;v*v)for(S=y,w=T,A=k,U=0;U&lt;20;U++){if(S=i(x,f,S),[x,T,k]=n(f,y,S,m,g,b),T&lt;v)return[x];if(k===A){let B=T/w;if(B&gt;.9999&amp;&amp;B&lt;1.0001)break}w=T,A=k}return Q=[],I=p.subtract(f[k-1],f[k+1]),I.every(B=&gt;B===0)&amp;&amp;(I=p.subtract(f[k-1],f[k]),[I[0],I[1]]=[-I[1],I[0]]),E=p.normalize(I),O=p.mulItems(E,-1),Q=Q.concat(t(f.slice(0,k+1),m,E,v,b)),Q=Q.concat(t(f.slice(k),O,g,v,b)),Q}function n(f,m,g,v,b,C){var x,y,S;return x=o(f,g,v,b,C),[y,S]=l(f,x,m),C&amp;&amp;C({bez:x,points:f,params:m,maxErr:y,maxPoint:S}),[x,y,S]}function o(f,m,g,v){var b,C,x,y,S,T,w,k,A,I,E,O,Q,j,U,B,z,N=f[0],V=f[f.length-1];for(b=[N,null,null,V],C=p.zeros_Xx2x2(m.length),Q=0,j=m.length;Q&lt;j;Q++)B=m[Q],z=1-B,x=C[Q],x[0]=p.mulItems(g,3*B*(z*z)),x[1]=p.mulItems(v,3*z*(B*B));for(y=[[0,0],[0,0]],S=[0,0],Q=0,j=f.length;Q&lt;j;Q++)B=m[Q],x=C[Q],y[0][0]+=p.dot(x[0],x[0]),y[0][1]+=p.dot(x[0],x[1]),y[1][0]+=p.dot(x[0],x[1]),y[1][1]+=p.dot(x[1],x[1]),U=p.subtract(f[Q],h.q([N,N,V,V],B)),S[0]+=p.dot(x[0],U),S[1]+=p.dot(x[1],U);return T=y[0][0]*y[1][1]-y[1][0]*y[0][1],w=y[0][0]*S[1]-y[1][0]*S[0],k=S[0]*y[1][1]-S[1]*y[0][1],A=T===0?0:k/T,I=T===0?0:w/T,O=p.vectorLen(p.subtract(N,V)),E=1e-6*O,A&lt;E||I&lt;E?(b[1]=p.addArrays(N,p.mulItems(g,O/3)),b[2]=p.addArrays(V,p.mulItems(v,O/3))):(b[1]=p.addArrays(N,p.mulItems(g,A)),b[2]=p.addArrays(V,p.mulItems(v,I))),b}function i(f,m,g){return g.map((v,b)=&gt;s(f,m[b],v))}function s(f,m,g){var v=p.subtract(h.q(f,g),m),b=h.qprime(f,g),C=p.mulMatrix(v,b),x=p.sum(p.squareItems(b))+2*p.mulMatrix(v,h.qprimeprime(f,g));return x===0?g:g-C/x}function a(f){var m=[],g,v,b;return f.forEach((C,x)=&gt;{g=x?v+p.vectorLen(p.subtract(C,b)):0,m.push(g),v=g,b=C}),m=m.map(C=&gt;C/v),m}function l(f,m,g){var v,b,C,x,y,S,T,w;b=0,C=Math.floor(f.length/2);let k=u(m,10);for(y=0,S=f.length;y&lt;S;y++)T=f[y],w=d(m,g[y],k,10),x=p.subtract(h.q(m,w),T),v=x[0]*x[0]+x[1]*x[1],v&gt;b&amp;&amp;(b=v,C=y);return[b,C]}var u=function(f,m){for(var g,v=[0],b=f[0],C=0,x=1;x&lt;=m;x++)g=h.q(f,x/m),C+=p.vectorLen(p.subtract(g,b)),v.push(C),b=g;return v=v.map(y=&gt;y/C),v};function d(f,m,g,v){if(m&lt;0)return 0;if(m&gt;1)return 1;for(var b,C,x,y,S,T=1;T&lt;=v;T++)if(m&lt;=g[T]){y=(T-1)/v,x=T/v,C=g[T-1],b=g[T],S=(m-C)/(b-C)*(x-y)+y;break}return S}function c(f,m){return p.normalize(p.subtract(f,m))}class p{static zeros_Xx2x2(m){for(var g=[];m--;)g.push([0,0]);return g}static mulItems(m,g){return m.map(v=&gt;v*g)}static mulMatrix(m,g){return m.reduce((v,b,C)=&gt;v+b*g[C],0)}static subtract(m,g){return m.map((v,b)=&gt;v-g[b])}static addArrays(m,g){return m.map((v,b)=&gt;v+g[b])}static addItems(m,g){return m.map(v=&gt;v+g)}static sum(m){return m.reduce((g,v)=&gt;g+v)}static dot(m,g){return p.mulMatrix(m,g)}static vectorLen(m){return Math.hypot(...m)}static divItems(m,g){return m.map(v=&gt;v/g)}static squareItems(m){return m.map(g=&gt;g*g)}static normalize(m){return this.divItems(m,this.vectorLen(m))}}class h{static q(m,g){var v=1-g,b=p.mulItems(m[0],v*v*v),C=p.mulItems(m[1],3*v*v*g),x=p.mulItems(m[2],3*v*g*g),y=p.mulItems(m[3],g*g*g);return p.addArrays(p.addArrays(b,C),p.addArrays(x,y))}static qprime(m,g){var v=1-g,b=p.mulItems(p.subtract(m[1],m[0]),3*v*v),C=p.mulItems(p.subtract(m[2],m[1]),6*v*g),x=p.mulItems(p.subtract(m[3],m[2]),3*g*g);return p.addArrays(p.addArrays(b,C),x)}static qprimeprime(m,g){return p.addArrays(p.mulItems(p.addArrays(p.subtract(m[2],p.mulItems(m[1],2)),m[0]),6*(1-g)),p.mulItems(p.addArrays(p.subtract(m[3],p.mulItems(m[2],2)),m[1]),6*g))}}r.exports=e,r.exports.fitCubic=t,r.exports.createTangent=c},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=t(1),o=t(133),i=t(130),s=t(153),a=t(154);function l(ee,F,L){return u(ee,F),L}function u(ee,F){if(ee!==F)throw new TypeError("Private static access of wrong provenance")}let d=1e3,c=9,p=new WeakSet;function h(ee){return{width:ee[2]-ee[0],height:ee[3]-ee[1]}}class f{static create(F){switch(F.data.annotationType){case n.AnnotationType.LINK:return new g(F);case n.AnnotationType.TEXT:return new v(F);case n.AnnotationType.WIDGET:switch(F.data.fieldType){case"Tx":return new C(F);case"Btn":return F.data.radioButton?new y(F):F.data.checkBox?new x(F):new S(F);case"Ch":return new T(F)}return new b(F);case n.AnnotationType.POPUP:return new w(F);case n.AnnotationType.FREETEXT:return new A(F);case n.AnnotationType.LINE:return new I(F);case n.AnnotationType.SQUARE:return new E(F);case n.AnnotationType.CIRCLE:return new O(F);case n.AnnotationType.POLYLINE:return new Q(F);case n.AnnotationType.CARET:return new U(F);case n.AnnotationType.INK:return new B(F);case n.AnnotationType.POLYGON:return new j(F);case n.AnnotationType.HIGHLIGHT:return new z(F);case n.AnnotationType.UNDERLINE:return new N(F);case n.AnnotationType.SQUIGGLY:return new V(F);case n.AnnotationType.STRIKEOUT:return new re(F);case n.AnnotationType.STAMP:return new ce(F);case n.AnnotationType.FILEATTACHMENT:return new ge(F);default:return new m(F)}}}class m{constructor(F){let{isRenderable:L=!1,ignoreBorder:$=!1,createQuadrilaterals:P=!1}=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{};this.isRenderable=L,this.data=F.data,this.layer=F.layer,this.page=F.page,this.viewport=F.viewport,this.linkService=F.linkService,this.downloadManager=F.downloadManager,this.imageResourcesPath=F.imageResourcesPath,this.renderForms=F.renderForms,this.svgFactory=F.svgFactory,this.annotationStorage=F.annotationStorage,this.enableScripting=F.enableScripting,this.hasJSActions=F.hasJSActions,this._fieldObjects=F.fieldObjects,this._mouseState=F.mouseState,L&amp;&amp;(this.container=this._createContainer($)),P&amp;&amp;(this.quadrilaterals=this._createQuadrilaterals($))}_createContainer(){let F=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1,L=this.data,$=this.page,P=this.viewport,X=document.createElement("section"),{width:K,height:R}=h(L.rect),[H,J,te,de]=P.viewBox,se=te-H,be=de-J;X.setAttribute("data-annotation-id",L.id);let Pe=n.Util.normalizeRect([L.rect[0],$.view[3]-L.rect[1]+$.view[1],L.rect[2],$.view[3]-L.rect[3]+$.view[1]]);if(!F&amp;&amp;L.borderStyle.width&gt;0){X.style.borderWidth=`${L.borderStyle.width}px`;let Ie=L.borderStyle.horizontalCornerRadius,Ve=L.borderStyle.verticalCornerRadius;if(Ie&gt;0||Ve&gt;0){let lt=`calc(${Ie}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;X.style.borderRadius=lt}else if(this instanceof y){let lt=`calc(${K}px * var(--scale-factor)) / calc(${R}px * var(--scale-factor))`;X.style.borderRadius=lt}switch(L.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:X.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:X.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:X.style.borderBottomStyle="solid";break;default:break}let Ae=L.borderColor||null;Ae?X.style.borderColor=n.Util.makeHexColor(Ae[0]|0,Ae[1]|0,Ae[2]|0):X.style.borderWidth=0}X.style.left=`${100*(Pe[0]-H)/se}%`,X.style.top=`${100*(Pe[1]-J)/be}%`;let{rotation:ke}=L;return L.hasOwnCanvas||ke===0?(X.style.width=`${100*K/se}%`,X.style.height=`${100*R/be}%`):this.setRotation(ke,X),X}setRotation(F){let L=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:this.container,[$,P,X,K]=this.viewport.viewBox,R=X-$,H=K-P,{width:J,height:te}=h(this.data.rect),de,se;F%180===0?(de=100*J/R,se=100*te/H):(de=100*te/R,se=100*J/H),L.style.width=`${de}%`,L.style.height=`${se}%`,L.setAttribute("data-main-rotation",(360-F)%360)}get _commonActions(){let F=(L,$,P)=&gt;{let X=P.detail[L];P.target.style[$]=s.ColorConverters[`${X[0]}_HTML`](X.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:L=&gt;{let $=L.detail.display%2===1;this.container.style.visibility=$?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:$,print:L.detail.display===0||L.detail.display===3})},print:L=&gt;{this.annotationStorage.setValue(this.data.id,{print:L.detail.print})},hidden:L=&gt;{this.container.style.visibility=L.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:L.detail.hidden})},focus:L=&gt;{setTimeout(()=&gt;L.target.focus({preventScroll:!1}),0)},userName:L=&gt;{L.target.title=L.detail.userName},readonly:L=&gt;{L.detail.readonly?L.target.setAttribute("readonly",""):L.target.removeAttribute("readonly")},required:L=&gt;{this._setRequired(L.target,L.detail.required)},bgColor:L=&gt;{F("bgColor","backgroundColor",L)},fillColor:L=&gt;{F("fillColor","backgroundColor",L)},fgColor:L=&gt;{F("fgColor","color",L)},textColor:L=&gt;{F("textColor","color",L)},borderColor:L=&gt;{F("borderColor","borderColor",L)},strokeColor:L=&gt;{F("strokeColor","borderColor",L)},rotation:L=&gt;{let $=L.detail.rotation;this.setRotation($),this.annotationStorage.setValue(this.data.id,{rotation:$})}})}_dispatchEventFromSandbox(F,L){let $=this._commonActions;for(let P of Object.keys(L.detail)){let X=F[P]||$[P];X&amp;&amp;X(L)}}_setDefaultPropertiesFromJS(F){if(!this.enableScripting)return;let L=this.annotationStorage.getRawValue(this.data.id);if(!L)return;let $=this._commonActions;for(let[P,X]of Object.entries(L)){let K=$[P];if(K){let R={detail:{[P]:X},target:F};K(R),delete L[P]}}}_createQuadrilaterals(){let F=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;let L=[],$=this.data.rect;for(let P of this.data.quadPoints)this.data.rect=[P[2].x,P[2].y,P[1].x,P[1].y],L.push(this._createContainer(F));return this.data.rect=$,L}_createPopup(F,L){let $=this.container;this.quadrilaterals&amp;&amp;(F=F||this.quadrilaterals,$=this.quadrilaterals[0]),F||(F=document.createElement("div"),F.className="popupTriggerArea",$.append(F));let X=new k({container:$,trigger:F,color:L.color,titleObj:L.titleObj,modificationDate:L.modificationDate,contentsObj:L.contentsObj,richText:L.richText,hideWrapper:!0}).render();X.style.left="100%",$.append(X)}_renderQuadrilaterals(F){for(let L of this.quadrilaterals)L.className=F;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(F){let L=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null,$=[];if(this._fieldObjects){let P=this._fieldObjects[F];if(P)for(let{page:X,id:K,exportValues:R}of P){if(X===-1||K===L)continue;let H=typeof R=="string"?R:null,J=document.querySelector(`[data-element-id="${K}"]`);if(J&amp;&amp;!p.has(J)){(0,n.warn)(`_getElementsByName - element not allowed: ${K}`);continue}$.push({id:K,exportValue:H,domElement:J})}return $}for(let P of document.getElementsByName(F)){let{id:X,exportValue:K}=P;X!==L&amp;&amp;(!p.has(P)||$.push({id:X,exportValue:K,domElement:P}))}return $}static get platform(){let F=typeof navigator!="undefined"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:F.includes("Win"),isMac:F.includes("Mac")})}}class g extends m{constructor(F){let L=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;super(F,{isRenderable:!0,ignoreBorder:!!(L!=null&amp;&amp;L.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=F.data.isTooltipOnly}render(){let{data:F,linkService:L}=this,$=document.createElement("a");$.setAttribute("data-element-id",F.id);let P=!1;return F.url?(L.addLinkAttributes($,F.url,F.newWindow),P=!0):F.action?(this._bindNamedAction($,F.action),P=!0):F.dest?(this._bindLink($,F.dest),P=!0):(F.actions&amp;&amp;(F.actions.Action||F.actions["Mouse Up"]||F.actions["Mouse Down"])&amp;&amp;this.enableScripting&amp;&amp;this.hasJSActions&amp;&amp;(this._bindJSAction($,F),P=!0),F.resetForm?(this._bindResetFormAction($,F.resetForm),P=!0):this.isTooltipOnly&amp;&amp;!P&amp;&amp;(this._bindLink($,""),P=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((X,K)=&gt;{let R=K===0?$:$.cloneNode();return X.append(R),X}):(this.container.className="linkAnnotation",P&amp;&amp;this.container.append($),this.container)}_bindLink(F,L){F.href=this.linkService.getDestinationHash(L),F.onclick=()=&gt;(L&amp;&amp;this.linkService.goToDestination(L),!1),(L||L==="")&amp;&amp;(F.className="internalLink")}_bindNamedAction(F,L){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=&gt;(this.linkService.executeNamedAction(L),!1),F.className="internalLink"}_bindJSAction(F,L){F.href=this.linkService.getAnchorUrl("");let $=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let P of Object.keys(L.actions)){let X=$.get(P);!X||(F[X]=()=&gt;{var K;return(K=this.linkService.eventBus)===null||K===void 0||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L.id,name:P}}),!1})}F.onclick||(F.onclick=()=&gt;!1),F.className="internalLink"}_bindResetFormAction(F,L){let $=F.onclick;if($||(F.href=this.linkService.getAnchorUrl("")),F.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),$||(F.onclick=()=&gt;!1);return}F.onclick=()=&gt;{$&amp;&amp;$();let{fields:P,refs:X,include:K}=L,R=[];if(P.length!==0||X.length!==0){let de=new Set(X);for(let se of P){let be=this._fieldObjects[se]||[];for(let{id:Pe}of be)de.add(Pe)}for(let se of Object.values(this._fieldObjects))for(let be of se)de.has(be.id)===K&amp;&amp;R.push(be)}else for(let de of Object.values(this._fieldObjects))R.push(...de);let H=this.annotationStorage,J=[];for(let de of R){let{id:se}=de;switch(J.push(se),de.type){case"text":{let Pe=de.defaultValue||"";H.setValue(se,{value:Pe});break}case"checkbox":case"radiobutton":{let Pe=de.defaultValue===de.exportValues;H.setValue(se,{value:Pe});break}case"combobox":case"listbox":{let Pe=de.defaultValue||"";H.setValue(se,{value:Pe});break}default:continue}let be=document.querySelector(`[data-element-id="${se}"]`);if(be){if(!p.has(be)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${se}`);continue}}else continue;be.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var te;(te=this.linkService.eventBus)===null||te===void 0||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:J,name:"ResetForm"}})}return!1}}}class v extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X})}render(){this.container.className="textAnnotation";let F=document.createElement("img");return F.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",F.alt="[{{type}} Annotation]",F.dataset.l10nId="text_annotation_type",F.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(F,this.data),this.container.append(F),this.container}}class b extends m{render(){return this.data.alternativeText&amp;&amp;(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(F){let{isWin:L,isMac:$}=m.platform;return L&amp;&amp;F.ctrlKey||$&amp;&amp;F.metaKey}_setEventListener(F,L,$,P){L.includes("mouse")?F.addEventListener(L,X=&gt;{var K;(K=this.linkService.eventBus)===null||K===void 0||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:$,value:P(X),shift:X.shiftKey,modifier:this._getKeyModifier(X)}})}):F.addEventListener(L,X=&gt;{var K;(K=this.linkService.eventBus)===null||K===void 0||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:$,value:P(X)}})})}_setEventListeners(F,L,$){for(let[X,K]of L){var P;(K==="Action"||(P=this.data.actions)!==null&amp;&amp;P!==void 0&amp;&amp;P[K])&amp;&amp;this._setEventListener(F,X,K,$)}}_setBackgroundColor(F){let L=this.data.backgroundColor||null;F.style.backgroundColor=L===null?"transparent":n.Util.makeHexColor(L[0],L[1],L[2])}_setTextStyle(F){let L=["left","center","right"],{fontColor:$}=this.data.defaultAppearanceData,P=this.data.defaultAppearanceData.fontSize||c,X=F.style,K;if(this.data.multiLine){let R=Math.abs(this.data.rect[3]-this.data.rect[1]),H=Math.round(R/(n.LINE_FACTOR*P))||1,J=R/H;K=Math.min(P,Math.round(J/n.LINE_FACTOR))}else{let R=Math.abs(this.data.rect[3]-this.data.rect[1]);K=Math.min(P,Math.round(R/n.LINE_FACTOR))}X.fontSize=`calc(${K}px * var(--scale-factor))`,X.color=n.Util.makeHexColor($[0],$[1],$[2]),this.data.textAlignment!==null&amp;&amp;(X.textAlign=L[this.data.textAlignment])}_setRequired(F,L){L?F.setAttribute("required",!0):F.removeAttribute("required"),F.setAttribute("aria-required",L)}}class C extends b{constructor(F){let L=F.renderForms||!F.data.hasAppearance&amp;&amp;!!F.data.fieldValue;super(F,{isRenderable:L})}setPropertyOnSiblings(F,L,$,P){let X=this.annotationStorage;for(let K of this._getElementsByName(F.name,F.id))K.domElement&amp;&amp;(K.domElement[L]=$),X.setValue(K.id,{[P]:$})}render(){let F=this.annotationStorage,L=this.data.id;this.container.className="textWidgetAnnotation";let $=null;if(this.renderForms){let X=F.getValue(L,{value:this.data.fieldValue}),K=X.formattedValue||X.value||"",R=F.getValue(L,{charLimit:this.data.maxLen}).charLimit;R&amp;&amp;K.length&gt;R&amp;&amp;(K=K.slice(0,R));let H={userValue:K,formattedValue:null,valueOnFocus:""};this.data.multiLine?($=document.createElement("textarea"),$.textContent=K,this.data.doNotScroll&amp;&amp;($.style.overflowY="hidden")):($=document.createElement("input"),$.type="text",$.setAttribute("value",K),this.data.doNotScroll&amp;&amp;($.style.overflowX="hidden")),p.add($),$.setAttribute("data-element-id",L),$.disabled=this.data.readOnly,$.name=this.data.fieldName,$.tabIndex=d,this._setRequired($,this.data.required),R&amp;&amp;($.maxLength=R),$.addEventListener("input",te=&gt;{F.setValue(L,{value:te.target.value}),this.setPropertyOnSiblings($,"value",te.target.value,"value")}),$.addEventListener("resetform",te=&gt;{var de;let se=(de=this.data.defaultFieldValue)!==null&amp;&amp;de!==void 0?de:"";$.value=H.userValue=se,H.formattedValue=null});let J=te=&gt;{let{formattedValue:de}=H;de!=null&amp;&amp;(te.target.value=de),te.target.scrollLeft=0};if(this.enableScripting&amp;&amp;this.hasJSActions){var P;$.addEventListener("focus",de=&gt;{H.userValue&amp;&amp;(de.target.value=H.userValue),H.valueOnFocus=de.target.value}),$.addEventListener("updatefromsandbox",de=&gt;{let se={value(be){var Pe;H.userValue=(Pe=be.detail.value)!==null&amp;&amp;Pe!==void 0?Pe:"",F.setValue(L,{value:H.userValue.toString()}),be.target.value=H.userValue},formattedValue(be){let{formattedValue:Pe}=be.detail;H.formattedValue=Pe,Pe!=null&amp;&amp;be.target!==document.activeElement&amp;&amp;(be.target.value=Pe),F.setValue(L,{formattedValue:Pe})},selRange(be){be.target.setSelectionRange(...be.detail.selRange)},charLimit:be=&gt;{var Pe;let{charLimit:ke}=be.detail,{target:Ie}=be;if(ke===0){Ie.removeAttribute("maxLength");return}Ie.setAttribute("maxLength",ke);let Ve=H.userValue;!Ve||Ve.length&lt;=ke||(Ve=Ve.slice(0,ke),Ie.value=H.userValue=Ve,F.setValue(L,{value:Ve}),(Pe=this.linkService.eventBus)===null||Pe===void 0||Pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ve,willCommit:!0,commitKey:1,selStart:Ie.selectionStart,selEnd:Ie.selectionEnd}}))}};this._dispatchEventFromSandbox(se,de)}),$.addEventListener("keydown",de=&gt;{var se;let be=-1;if(de.key==="Escape"?be=0:de.key==="Enter"?be=2:de.key==="Tab"&amp;&amp;(be=3),be===-1)return;let{value:Pe}=de.target;H.valueOnFocus!==Pe&amp;&amp;(H.userValue=Pe,(se=this.linkService.eventBus)===null||se===void 0||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Pe,willCommit:!0,commitKey:be,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}}))});let te=J;J=null,$.addEventListener("blur",de=&gt;{let{value:se}=de.target;if(H.userValue=se,this._mouseState.isDown&amp;&amp;H.valueOnFocus!==se){var be;(be=this.linkService.eventBus)===null||be===void 0||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:de.target.selectionStart,selEnd:de.target.selectionEnd}})}te(de)}),(P=this.data.actions)!==null&amp;&amp;P!==void 0&amp;&amp;P.Keystroke&amp;&amp;$.addEventListener("beforeinput",de=&gt;{var se;let{data:be,target:Pe}=de,{value:ke,selectionStart:Ie,selectionEnd:Ve}=Pe,Ae=Ie,lt=Ve;switch(de.inputType){case"deleteWordBackward":{let vt=ke.substring(0,Ie).match(/\w*[^\w]*$/);vt&amp;&amp;(Ae-=vt[0].length);break}case"deleteWordForward":{let vt=ke.substring(Ie).match(/^[^\w]*\w*/);vt&amp;&amp;(lt+=vt[0].length);break}case"deleteContentBackward":Ie===Ve&amp;&amp;(Ae-=1);break;case"deleteContentForward":Ie===Ve&amp;&amp;(lt+=1);break}de.preventDefault(),(se=this.linkService.eventBus)===null||se===void 0||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:ke,change:be||"",willCommit:!1,selStart:Ae,selEnd:lt}})}),this._setEventListeners($,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],de=&gt;de.target.value)}if(J&amp;&amp;$.addEventListener("blur",J),this.data.comb){let de=(this.data.rect[2]-this.data.rect[0])/R;$.classList.add("comb"),$.style.letterSpacing=`calc(${de}px * var(--scale-factor) - 1ch)`}}else $=document.createElement("div"),$.textContent=this.data.fieldValue,$.style.verticalAlign="middle",$.style.display="table-cell";return this._setTextStyle($),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class x extends b{constructor(F){super(F,{isRenderable:F.renderForms})}render(){let F=this.annotationStorage,L=this.data,$=L.id,P=F.getValue($,{value:L.exportValue===L.fieldValue}).value;typeof P=="string"&amp;&amp;(P=P!=="Off",F.setValue($,{value:P})),this.container.className="buttonWidgetAnnotation checkBox";let X=document.createElement("input");return p.add(X),X.setAttribute("data-element-id",$),X.disabled=L.readOnly,this._setRequired(X,this.data.required),X.type="checkbox",X.name=L.fieldName,P&amp;&amp;X.setAttribute("checked",!0),X.setAttribute("exportValue",L.exportValue),X.tabIndex=d,X.addEventListener("change",K=&gt;{let{name:R,checked:H}=K.target;for(let J of this._getElementsByName(R,$)){let te=H&amp;&amp;J.exportValue===L.exportValue;J.domElement&amp;&amp;(J.domElement.checked=te),F.setValue(J.id,{value:te})}F.setValue($,{value:H})}),X.addEventListener("resetform",K=&gt;{let R=L.defaultFieldValue||"Off";K.target.checked=R===L.exportValue}),this.enableScripting&amp;&amp;this.hasJSActions&amp;&amp;(X.addEventListener("updatefromsandbox",K=&gt;{let R={value(H){H.target.checked=H.detail.value!=="Off",F.setValue($,{value:H.target.checked})}};this._dispatchEventFromSandbox(R,K)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=&gt;K.target.checked)),this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class y extends b{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";let F=this.annotationStorage,L=this.data,$=L.id,P=F.getValue($,{value:L.fieldValue===L.buttonValue}).value;typeof P=="string"&amp;&amp;(P=P!==L.buttonValue,F.setValue($,{value:P}));let X=document.createElement("input");if(p.add(X),X.setAttribute("data-element-id",$),X.disabled=L.readOnly,this._setRequired(X,this.data.required),X.type="radio",X.name=L.fieldName,P&amp;&amp;X.setAttribute("checked",!0),X.tabIndex=d,X.addEventListener("change",K=&gt;{let{name:R,checked:H}=K.target;for(let J of this._getElementsByName(R,$))F.setValue(J.id,{value:!1});F.setValue($,{value:H})}),X.addEventListener("resetform",K=&gt;{let R=L.defaultFieldValue;K.target.checked=R!=null&amp;&amp;R===L.buttonValue}),this.enableScripting&amp;&amp;this.hasJSActions){let K=L.buttonValue;X.addEventListener("updatefromsandbox",R=&gt;{let H={value:J=&gt;{let te=K===J.detail.value;for(let de of this._getElementsByName(J.target.name)){let se=te&amp;&amp;de.id===$;de.domElement&amp;&amp;(de.domElement.checked=se),F.setValue(de.id,{value:se})}}};this._dispatchEventFromSandbox(H,R)}),this._setEventListeners(X,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=&gt;R.target.checked)}return this._setBackgroundColor(X),this._setDefaultPropertiesFromJS(X),this.container.append(X),this.container}}class S extends g{constructor(F){super(F,{ignoreBorder:F.data.hasAppearance})}render(){let F=super.render();F.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&amp;&amp;(F.title=this.data.alternativeText);let L=F.lastChild;return this.enableScripting&amp;&amp;this.hasJSActions&amp;&amp;L&amp;&amp;(this._setDefaultPropertiesFromJS(L),L.addEventListener("updatefromsandbox",$=&gt;{this._dispatchEventFromSandbox({},$)})),F}}class T extends b{constructor(F){super(F,{isRenderable:F.renderForms})}render(){this.container.className="choiceWidgetAnnotation";let F=this.annotationStorage,L=this.data.id,$=F.getValue(L,{value:this.data.fieldValue}),P=document.createElement("select");p.add(P),P.setAttribute("data-element-id",L),P.disabled=this.data.readOnly,this._setRequired(P,this.data.required),P.name=this.data.fieldName,P.tabIndex=d;let X=this.data.combo&amp;&amp;this.data.options.length&gt;0;this.data.combo||(P.size=this.data.options.length,this.data.multiSelect&amp;&amp;(P.multiple=!0)),P.addEventListener("resetform",J=&gt;{let te=this.data.defaultFieldValue;for(let de of P.options)de.selected=de.value===te});for(let J of this.data.options){let te=document.createElement("option");te.textContent=J.displayValue,te.value=J.exportValue,$.value.includes(J.exportValue)&amp;&amp;(te.setAttribute("selected",!0),X=!1),P.append(te)}let K=null;if(X){let J=document.createElement("option");J.value=" ",J.setAttribute("hidden",!0),J.setAttribute("selected",!0),P.prepend(J),K=()=&gt;{J.remove(),P.removeEventListener("input",K),K=null},P.addEventListener("input",K)}let R=(J,te)=&gt;{let de=te?"value":"textContent",se=J.target.options;return J.target.multiple?Array.prototype.filter.call(se,be=&gt;be.selected).map(be=&gt;be[de]):se.selectedIndex===-1?null:se[se.selectedIndex][de]},H=J=&gt;{let te=J.target.options;return Array.prototype.map.call(te,de=&gt;({displayValue:de.textContent,exportValue:de.value}))};return this.enableScripting&amp;&amp;this.hasJSActions?(P.addEventListener("updatefromsandbox",J=&gt;{let te={value(de){var se;(se=K)===null||se===void 0||se();let be=de.detail.value,Pe=new Set(Array.isArray(be)?be:[be]);for(let ke of P.options)ke.selected=Pe.has(ke.value);F.setValue(L,{value:R(de,!0)})},multipleSelection(de){P.multiple=!0},remove(de){let se=P.options,be=de.detail.remove;se[be].selected=!1,P.remove(be),se.length&gt;0&amp;&amp;Array.prototype.findIndex.call(se,ke=&gt;ke.selected)===-1&amp;&amp;(se[0].selected=!0),F.setValue(L,{value:R(de,!0),items:H(de)})},clear(de){for(;P.length!==0;)P.remove(0);F.setValue(L,{value:null,items:[]})},insert(de){let{index:se,displayValue:be,exportValue:Pe}=de.detail.insert,ke=P.children[se],Ie=document.createElement("option");Ie.textContent=be,Ie.value=Pe,ke?ke.before(Ie):P.append(Ie),F.setValue(L,{value:R(de,!0),items:H(de)})},items(de){let{items:se}=de.detail;for(;P.length!==0;)P.remove(0);for(let be of se){let{displayValue:Pe,exportValue:ke}=be,Ie=document.createElement("option");Ie.textContent=Pe,Ie.value=ke,P.append(Ie)}P.options.length&gt;0&amp;&amp;(P.options[0].selected=!0),F.setValue(L,{value:R(de,!0),items:H(de)})},indices(de){let se=new Set(de.detail.indices);for(let be of de.target.options)be.selected=se.has(be.index);F.setValue(L,{value:R(de,!0)})},editable(de){de.target.disabled=!de.detail.editable}};this._dispatchEventFromSandbox(te,J)}),P.addEventListener("input",J=&gt;{var te;let de=R(J,!0),se=R(J,!1);F.setValue(L,{value:de}),(te=this.linkService.eventBus)===null||te===void 0||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:se,changeEx:de,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(P,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],J=&gt;J.target.checked)):P.addEventListener("input",function(J){F.setValue(L,{value:R(J,!0)})}),this.data.combo&amp;&amp;this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class w extends m{constructor(F){var L,$,P;let X=!!((L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X})}render(){let F=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",F.includes(this.data.parentType))return this.container;let L=`[data-annotation-id="${this.data.parentId}"]`,$=this.layer.querySelectorAll(L);if($.length===0)return this.container;let P=new k({container:this.container,trigger:Array.from($),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),X=this.page,K=n.Util.normalizeRect([this.data.parentRect[0],X.view[3]-this.data.parentRect[1]+X.view[1],this.data.parentRect[2],X.view[3]-this.data.parentRect[3]+X.view[1]]),R=K[0]+this.data.parentRect[2]-this.data.parentRect[0],H=K[1],[J,te,de,se]=this.viewport.viewBox,be=de-J,Pe=se-te;return this.container.style.left=`${100*(R-J)/be}%`,this.container.style.top=`${100*(H-te)/Pe}%`,this.container.append(P.render()),this.container}}class k{constructor(F){this.container=F.container,this.trigger=F.trigger,this.color=F.color,this.titleObj=F.titleObj,this.modificationDate=F.modificationDate,this.contentsObj=F.contentsObj,this.richText=F.richText,this.hideWrapper=F.hideWrapper||!1,this.pinned=!1}render(){var F,L;let P=document.createElement("div");P.className="popupWrapper",this.hideElement=this.hideWrapper?P:this.container,this.hideElement.hidden=!0;let X=document.createElement("div");X.className="popup";let K=this.color;if(K){let J=.7*(255-K[0])+K[0],te=.7*(255-K[1])+K[1],de=.7*(255-K[2])+K[2];X.style.backgroundColor=n.Util.makeHexColor(J|0,te|0,de|0)}let R=document.createElement("h1");R.dir=this.titleObj.dir,R.textContent=this.titleObj.str,X.append(R);let H=o.PDFDateString.toDateObject(this.modificationDate);if(H){let J=document.createElement("span");J.className="popupDate",J.textContent="{{date}}, {{time}}",J.dataset.l10nId="annotation_date_string",J.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),X.append(J)}if((F=this.richText)!==null&amp;&amp;F!==void 0&amp;&amp;F.str&amp;&amp;(!((L=this.contentsObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str)||this.contentsObj.str===this.richText.str))a.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:X}),X.lastChild.className="richText popupContent";else{let J=this._formatContents(this.contentsObj);X.append(J)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(let J of this.trigger)J.addEventListener("click",this._toggle.bind(this)),J.addEventListener("mouseover",this._show.bind(this,!1)),J.addEventListener("mouseout",this._hide.bind(this,!1));return X.addEventListener("click",this._hide.bind(this,!0)),P.append(X),P}_formatContents(F){let{str:L,dir:$}=F,P=document.createElement("p");P.className="popupContent",P.dir=$;let X=L.split(/(?:\r\n?|\n)/);for(let K=0,R=X.length;K&lt;R;++K){let H=X[K];P.append(document.createTextNode(H)),K&lt;R-1&amp;&amp;P.append(document.createElement("br"))}return P}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1)&amp;&amp;(this.pinned=!0),this.hideElement.hidden&amp;&amp;(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!0)&amp;&amp;(this.pinned=!1),!this.hideElement.hidden&amp;&amp;!this.pinned&amp;&amp;(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class A extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0}),this.textContent=F.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){let F=document.createElement("div");F.className="annotationTextContent",F.setAttribute("role","comment");for(let L of this.textContent){let $=document.createElement("span");$.textContent=L,F.append($)}this.container.append(F)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";let F=this.data,{width:L,height:$}=h(F.rect),P=this.svgFactory.create(L,$,!0),X=this.svgFactory.createElement("svg:line");return X.setAttribute("x1",F.rect[2]-F.lineCoordinates[0]),X.setAttribute("y1",F.rect[3]-F.lineCoordinates[1]),X.setAttribute("x2",F.rect[2]-F.lineCoordinates[2]),X.setAttribute("y2",F.rect[3]-F.lineCoordinates[3]),X.setAttribute("stroke-width",F.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),P.append(X),this.container.append(P),this._createPopup(X,F),this.container}}class E extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";let F=this.data,{width:L,height:$}=h(F.rect),P=this.svgFactory.create(L,$,!0),X=F.borderStyle.width,K=this.svgFactory.createElement("svg:rect");return K.setAttribute("x",X/2),K.setAttribute("y",X/2),K.setAttribute("width",L-X),K.setAttribute("height",$-X),K.setAttribute("stroke-width",X||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),P.append(K),this.container.append(P),this._createPopup(K,F),this.container}}class O extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";let F=this.data,{width:L,height:$}=h(F.rect),P=this.svgFactory.create(L,$,!0),X=F.borderStyle.width,K=this.svgFactory.createElement("svg:ellipse");return K.setAttribute("cx",L/2),K.setAttribute("cy",$/2),K.setAttribute("rx",L/2-X/2),K.setAttribute("ry",$/2-X/2),K.setAttribute("stroke-width",X||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),P.append(K),this.container.append(P),this._createPopup(K,F),this.container}}class Q extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let F=this.data,{width:L,height:$}=h(F.rect),P=this.svgFactory.create(L,$,!0),X=[];for(let R of F.vertices){let H=R.x-F.rect[0],J=F.rect[3]-R.y;X.push(H+","+J)}X=X.join(" ");let K=this.svgFactory.createElement(this.svgElementName);return K.setAttribute("points",X),K.setAttribute("stroke-width",F.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),P.append(K),this.container.append(P),this._createPopup(K,F),this.container}}class j extends Q{constructor(F){super(F),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class B extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let F=this.data,{width:L,height:$}=h(F.rect),P=this.svgFactory.create(L,$,!0);for(let X of F.inkLists){let K=[];for(let H of X){let J=H.x-F.rect[0],te=F.rect[3]-H.y;K.push(`${J},${te}`)}K=K.join(" ");let R=this.svgFactory.createElement(this.svgElementName);R.setAttribute("points",K),R.setAttribute("stroke-width",F.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),this._createPopup(R,F),P.append(R)}return this.container.append(P),this.container}}class z extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class N extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class V extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class re extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ce extends m{constructor(F){var L,$,P;let X=!!(F.data.hasPopup||(L=F.data.titleObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||($=F.data.contentsObj)!==null&amp;&amp;$!==void 0&amp;&amp;$.str||(P=F.data.richText)!==null&amp;&amp;P!==void 0&amp;&amp;P.str);super(F,{isRenderable:X,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ge extends m{constructor(F){var L;super(F,{isRenderable:!0});let{filename:$,content:P}=this.data.file;this.filename=(0,o.getFilenameFromUrl)($),this.content=P,(L=this.linkService.eventBus)===null||L===void 0||L.dispatch("fileattachmentannotation",{source:this,filename:$,content:P})}render(){var F,L;this.container.className="fileAttachmentAnnotation";let $=document.createElement("div");return $.className="popupTriggerArea",$.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&amp;&amp;((F=this.data.titleObj)!==null&amp;&amp;F!==void 0&amp;&amp;F.str||(L=this.data.contentsObj)!==null&amp;&amp;L!==void 0&amp;&amp;L.str||this.data.richText)&amp;&amp;this._createPopup($,this.data),this.container.append($),this.container}_download(){var F;(F=this.downloadManager)===null||F===void 0||F.openOrDownloadData(this.container,this.content,this.filename)}}class ae{static render(F){let{annotations:L,div:$,viewport:P,accessibilityManager:X}=F;l(this,ae,W).call(this,$,P);let K=0;for(let R of L){if(R.annotationType!==n.AnnotationType.POPUP){let{width:J,height:te}=h(R.rect);if(J&lt;=0||te&lt;=0)continue}let H=f.create({data:R,layer:$,page:F.page,viewport:P,linkService:F.linkService,downloadManager:F.downloadManager,imageResourcesPath:F.imageResourcesPath||"",renderForms:F.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:F.annotationStorage||new i.AnnotationStorage,enableScripting:F.enableScripting,hasJSActions:F.hasJSActions,fieldObjects:F.fieldObjects,mouseState:F.mouseState||{isDown:!1}});if(H.isRenderable){let J=H.render();if(R.hidden&amp;&amp;(J.style.visibility="hidden"),Array.isArray(J))for(let te of J)te.style.zIndex=K++,l(ae,ae,Y).call(ae,te,R.id,$,X);else J.style.zIndex=K++,H instanceof w?$.prepend(J):l(ae,ae,Y).call(ae,J,R.id,$,X)}}l(this,ae,G).call(this,$,F.annotationCanvasMap)}static update(F){let{annotationCanvasMap:L,div:$,viewport:P}=F;l(this,ae,W).call(this,$,P),l(this,ae,G).call(this,$,L),$.hidden=!1}}e.AnnotationLayer=ae;function Y(ee,F,L,$){let P=ee.firstChild||ee;P.id=`${o.AnnotationPrefix}${F}`,L.append(ee),$==null||$.moveElementInDOM(L,ee,P,!1)}function W(ee,F){let{width:L,height:$,rotation:P}=F,{style:X}=ee,K=P%180!==0,R=Math.floor(L)+"px",H=Math.floor($)+"px";X.width=K?H:R,X.height=K?R:H,ee.setAttribute("data-main-rotation",P)}function G(ee,F){if(!!F){for(let[L,$]of F){let P=ee.querySelector(`[data-annotation-id="${L}"]`);if(!P)continue;let{firstChild:X}=P;X?X.nodeName==="CANVAS"?X.replaceWith($):X.before($):P.append($)}F.clear()}}},(r,e)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function t(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class n{static CMYK_G(i){let[s,a,l,u]=i;return["G",1-Math.min(1,.3*s+.59*l+.11*a+u)]}static G_CMYK(i){let[s]=i;return["CMYK",0,0,0,1-s]}static G_RGB(i){let[s]=i;return["RGB",s,s,s]}static G_HTML(i){let[s]=i,a=t(s);return`#${a}${a}${a}`}static RGB_G(i){let[s,a,l]=i;return["G",.3*s+.59*a+.11*l]}static RGB_HTML(i){let[s,a,l]=i,u=t(s),d=t(a),c=t(l);return`#${u}${d}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB(i){let[s,a,l,u]=i;return["RGB",1-Math.min(1,s+u),1-Math.min(1,l+u),1-Math.min(1,a+u)]}static CMYK_HTML(i){let s=this.CMYK_RGB(i).slice(1);return this.RGB_HTML(s)}static RGB_CMYK(i){let[s,a,l]=i,u=1-s,d=1-a,c=1-l,p=Math.min(u,d,c);return["CMYK",u,d,c,p]}}e.ColorConverters=n},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=t(145);class o{static setupStorage(s,a,l,u,d){let c=u.getValue(a,{value:null});switch(l.name){case"textarea":if(c.value!==null&amp;&amp;(s.textContent=c.value),d==="print")break;s.addEventListener("input",p=&gt;{u.setValue(a,{value:p.target.value})});break;case"input":if(l.attributes.type==="radio"||l.attributes.type==="checkbox"){if(c.value===l.attributes.xfaOn?s.setAttribute("checked",!0):c.value===l.attributes.xfaOff&amp;&amp;s.removeAttribute("checked"),d==="print")break;s.addEventListener("change",p=&gt;{u.setValue(a,{value:p.target.checked?p.target.getAttribute("xfaOn"):p.target.getAttribute("xfaOff")})})}else{if(c.value!==null&amp;&amp;s.setAttribute("value",c.value),d==="print")break;s.addEventListener("input",p=&gt;{u.setValue(a,{value:p.target.value})})}break;case"select":if(c.value!==null)for(let p of l.children)p.attributes.value===c.value&amp;&amp;(p.attributes.selected=!0);s.addEventListener("input",p=&gt;{let h=p.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;u.setValue(a,{value:f})});break}}static setAttributes(s){let{html:a,element:l,storage:u=null,intent:d,linkService:c}=s,{attributes:p}=l,h=a instanceof HTMLAnchorElement;p.type==="radio"&amp;&amp;(p.name=`${p.name}-${d}`);for(let[f,m]of Object.entries(p))if(m!=null)switch(f){case"class":m.length&amp;&amp;a.setAttribute(f,m.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",m);break;case"style":Object.assign(a.style,m);break;case"textContent":a.textContent=m;break;default:(!h||f!=="href"&amp;&amp;f!=="newWindow")&amp;&amp;a.setAttribute(f,m)}h&amp;&amp;c.addLinkAttributes(a,p.href,p.newWindow),u&amp;&amp;p.dataId&amp;&amp;this.setupStorage(a,p.dataId,l,u)}static render(s){let a=s.annotationStorage,l=s.linkService,u=s.xfaHtml,d=s.intent||"display",c=document.createElement(u.name);u.attributes&amp;&amp;this.setAttributes({html:c,element:u,intent:d,linkService:l});let p=[[u,-1,c]],h=s.div;if(h.append(c),s.viewport){let g=`matrix(${s.viewport.transform.join(",")})`;h.style.transform=g}d!=="richText"&amp;&amp;h.setAttribute("class","xfaLayer xfaFont");let f=[];for(;p.length&gt;0;){var m;let[g,v,b]=p.at(-1);if(v+1===g.children.length){p.pop();continue}let C=g.children[++p.at(-1)[1]];if(C===null)continue;let{name:x}=C;if(x==="#text"){let S=document.createTextNode(C.value);f.push(S),b.append(S);continue}let y;if(C!=null&amp;&amp;(m=C.attributes)!==null&amp;&amp;m!==void 0&amp;&amp;m.xmlns?y=document.createElementNS(C.attributes.xmlns,x):y=document.createElement(x),b.append(y),C.attributes&amp;&amp;this.setAttributes({html:y,element:C,storage:a,intent:d,linkService:l}),C.children&amp;&amp;C.children.length&gt;0)p.push([C,-1,y]);else if(C.value){let S=document.createTextNode(C.value);n.XfaText.shouldBuildText(x)&amp;&amp;f.push(S),y.append(S)}}for(let g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(s){let a=`matrix(${s.viewport.transform.join(",")})`;s.div.style.transform=a,s.div.hidden=!1}}e.XfaLayer=o},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=b;var n=t(1),o=t(133);let i=1e5,s=30,a=.8,l=new Map,u=/^\s+$/g;function d(C,x){let y=l.get(C);if(y)return y;x.save(),x.font=`${s}px ${C}`;let S=x.measureText(""),T=S.fontBoundingBoxAscent,w=Math.abs(S.fontBoundingBoxDescent);if(T){x.restore();let A=T/(T+w);return l.set(C,A),A}x.strokeStyle="red",x.clearRect(0,0,s,s),x.strokeText("g",0,0);let k=x.getImageData(0,0,s,s).data;w=0;for(let A=k.length-1-3;A&gt;=0;A-=4)if(k[A]&gt;0){w=Math.ceil(A/4/s);break}x.clearRect(0,0,s,s),x.strokeText("A",0,s),k=x.getImageData(0,0,s,s).data,T=0;for(let A=0,I=k.length;A&lt;I;A+=4)if(k[A]&gt;0){T=s-Math.floor(A/4/s);break}if(x.restore(),T){let A=T/(T+w);return l.set(C,A),A}return l.set(C,a),a}function c(C,x,y,S){let T=document.createElement("span"),w=C._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};C._textDivs.push(T);let k=n.Util.transform(C._viewport.transform,x.transform),A=Math.atan2(k[1],k[0]),I=y[x.fontName];I.vertical&amp;&amp;(A+=Math.PI/2);let E=Math.hypot(k[2],k[3]),O=E*d(I.fontFamily,S),Q,j;A===0?(Q=k[4],j=k[5]-O):(Q=k[4]+O*Math.sin(A),j=k[5]-O*Math.cos(A)),T.style.left=`${Q}px`,T.style.top=`${j}px`,T.style.fontSize=`${E}px`,T.style.fontFamily=I.fontFamily,w.fontSize=E,T.setAttribute("role","presentation"),T.textContent=x.str,T.dir=x.dir,C._fontInspectorEnabled&amp;&amp;(T.dataset.fontName=x.fontName),A!==0&amp;&amp;(w.angle=A*(180/Math.PI));let U=!1;if(x.str.length&gt;1||C._enhanceTextSelection&amp;&amp;u.test(x.str))U=!0;else if(x.str!==" "&amp;&amp;x.transform[0]!==x.transform[3]){let B=Math.abs(x.transform[0]),z=Math.abs(x.transform[3]);B!==z&amp;&amp;Math.max(B,z)/Math.min(B,z)&gt;1.5&amp;&amp;(U=!0)}if(U&amp;&amp;(I.vertical?w.canvasWidth=x.height*C._viewport.scale:w.canvasWidth=x.width*C._viewport.scale),C._textDivProperties.set(T,w),C._textContentStream&amp;&amp;C._layoutText(T),C._enhanceTextSelection&amp;&amp;w.hasText){let B=1,z=0;A!==0&amp;&amp;(B=Math.cos(A),z=Math.sin(A));let N=(I.vertical?x.height:x.width)*C._viewport.scale,V=E,re,ce;A!==0?(re=[B,z,-z,B,Q,j],ce=n.Util.getAxialAlignedBoundingBox([0,0,N,V],re)):ce=[Q,j,Q+N,j+V],C._bounds.push({left:ce[0],top:ce[1],right:ce[2],bottom:ce[3],div:T,size:[N,V],m:re})}}function p(C){if(C._canceled)return;let x=C._textDivs,y=C._capability,S=x.length;if(S&gt;i){C._renderingDone=!0,y.resolve();return}if(!C._textContentStream)for(let T=0;T&lt;S;T++)C._layoutText(x[T]);C._renderingDone=!0,y.resolve()}function h(C,x,y){let S=0;for(let T=0;T&lt;y;T++){let w=C[x++];w&gt;0&amp;&amp;(S=S?Math.min(w,S):w)}return S}function f(C){let x=C._bounds,y=C._viewport,S=m(y.width,y.height,x);for(let T=0;T&lt;S.length;T++){let w=x[T].div,k=C._textDivProperties.get(w);if(k.angle===0){k.paddingLeft=x[T].left-S[T].left,k.paddingTop=x[T].top-S[T].top,k.paddingRight=S[T].right-x[T].right,k.paddingBottom=S[T].bottom-x[T].bottom,C._textDivProperties.set(w,k);continue}let A=S[T],I=x[T],E=I.m,O=E[0],Q=E[1],j=[[0,0],[0,I.size[1]],[I.size[0],0],I.size],U=new Float64Array(64);for(let z=0,N=j.length;z&lt;N;z++){let V=n.Util.applyTransform(j[z],E);U[z+0]=O&amp;&amp;(A.left-V[0])/O,U[z+4]=Q&amp;&amp;(A.top-V[1])/Q,U[z+8]=O&amp;&amp;(A.right-V[0])/O,U[z+12]=Q&amp;&amp;(A.bottom-V[1])/Q,U[z+16]=Q&amp;&amp;(A.left-V[0])/-Q,U[z+20]=O&amp;&amp;(A.top-V[1])/O,U[z+24]=Q&amp;&amp;(A.right-V[0])/-Q,U[z+28]=O&amp;&amp;(A.bottom-V[1])/O,U[z+32]=O&amp;&amp;(A.left-V[0])/-O,U[z+36]=Q&amp;&amp;(A.top-V[1])/-Q,U[z+40]=O&amp;&amp;(A.right-V[0])/-O,U[z+44]=Q&amp;&amp;(A.bottom-V[1])/-Q,U[z+48]=Q&amp;&amp;(A.left-V[0])/Q,U[z+52]=O&amp;&amp;(A.top-V[1])/-O,U[z+56]=Q&amp;&amp;(A.right-V[0])/Q,U[z+60]=O&amp;&amp;(A.bottom-V[1])/-O}let B=1+Math.min(Math.abs(O),Math.abs(Q));k.paddingLeft=h(U,32,16)/B,k.paddingTop=h(U,48,16)/B,k.paddingRight=h(U,0,16)/B,k.paddingBottom=h(U,16,16)/B,C._textDivProperties.set(w,k)}}function m(C,x,y){let S=y.map(function(w,k){return{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom,index:k,x1New:void 0,x2New:void 0}});g(C,S);let T=new Array(y.length);for(let w of S){let k=w.index;T[k]={left:w.x1New,top:0,right:w.x2New,bottom:0}}y.map(function(w,k){let A=T[k],I=S[k];I.x1=w.top,I.y1=C-A.right,I.x2=w.bottom,I.y2=C-A.left,I.index=k,I.x1New=void 0,I.x2New=void 0}),g(x,S);for(let w of S){let k=w.index;T[k].top=w.x1New,T[k].bottom=w.x2New}return T}function g(C,x){x.sort(function(T,w){return T.x1-w.x1||T.index-w.index});let S=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(let T of x){let w=0;for(;w&lt;S.length&amp;&amp;S[w].end&lt;=T.y1;)w++;let k=S.length-1;for(;k&gt;=0&amp;&amp;S[k].start&gt;=T.y2;)k--;let A,I,E,O,Q=-1/0;for(E=w;E&lt;=k;E++){A=S[E],I=A.boundary;let B;I.x2&gt;T.x1?B=I.index&gt;T.index?I.x1New:T.x1:I.x2New===void 0?B=(I.x2+T.x1)/2:B=I.x2New,B&gt;Q&amp;&amp;(Q=B)}for(T.x1New=Q,E=w;E&lt;=k;E++)A=S[E],I=A.boundary,I.x2New===void 0?I.x2&gt;T.x1?I.index&gt;T.index&amp;&amp;(I.x2New=I.x2):I.x2New=Q:I.x2New&gt;Q&amp;&amp;(I.x2New=Math.max(Q,I.x2));let j=[],U=null;for(E=w;E&lt;=k;E++){A=S[E],I=A.boundary;let B=I.x2&gt;T.x2?I:T;U===B?j.at(-1).end=A.end:(j.push({start:A.start,end:A.end,boundary:B}),U=B)}for(S[w].start&lt;T.y1&amp;&amp;(j[0].start=T.y1,j.unshift({start:S[w].start,end:T.y1,boundary:S[w].boundary})),T.y2&lt;S[k].end&amp;&amp;(j.at(-1).end=T.y2,j.push({start:T.y2,end:S[k].end,boundary:S[k].boundary})),E=w;E&lt;=k;E++){if(A=S[E],I=A.boundary,I.x2New!==void 0)continue;let B=!1;for(O=w-1;!B&amp;&amp;O&gt;=0&amp;&amp;S[O].start&gt;=I.y1;O--)B=S[O].boundary===I;for(O=k+1;!B&amp;&amp;O&lt;S.length&amp;&amp;S[O].end&lt;=I.y2;O++)B=S[O].boundary===I;for(O=0;!B&amp;&amp;O&lt;j.length;O++)B=j[O].boundary===I;B||(I.x2New=Q)}Array.prototype.splice.apply(S,[w,k-w+1,...j])}for(let T of S){let w=T.boundary;w.x2New===void 0&amp;&amp;(w.x2New=Math.max(C,w.x2))}}class v{constructor(x){var y;let{textContent:S,textContentStream:T,container:w,viewport:k,textDivs:A,textContentItemsStr:I,enhanceTextSelection:E}=x;E&amp;&amp;(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=S,this._textContentStream=T,this._container=w,this._document=w.ownerDocument,this._viewport=k,this._textDivs=A||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!E,this._fontInspectorEnabled=!!((y=globalThis.FontInspector)!==null&amp;&amp;y!==void 0&amp;&amp;y.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=&gt;{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&amp;&amp;(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=&gt;{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&amp;&amp;(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=&gt;{}),this._reader=null),this._renderTimer!==null&amp;&amp;(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(x,y){for(let S=0,T=x.length;S&lt;T;S++){if(x[S].str===void 0){if(x[S].type==="beginMarkedContentProps"||x[S].type==="beginMarkedContent"){let w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x[S].id!==null&amp;&amp;this._container.setAttribute("id",`${x[S].id}`),w.append(this._container)}else x[S].type==="endMarkedContent"&amp;&amp;(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x[S].str),c(this,x[S],y,this._layoutTextCtx)}}_layoutText(x){let y=this._textDivProperties.get(x),S="";if(y.canvasWidth!==0&amp;&amp;y.hasText){let{fontFamily:T}=x.style,{fontSize:w}=y;(w!==this._layoutTextLastFontSize||T!==this._layoutTextLastFontFamily)&amp;&amp;(this._layoutTextCtx.font=`${w*this._devicePixelRatio}px ${T}`,this._layoutTextLastFontSize=w,this._layoutTextLastFontFamily=T);let{width:k}=this._layoutTextCtx.measureText(x.textContent);if(k&gt;0){let A=this._devicePixelRatio*y.canvasWidth/k;this._enhanceTextSelection&amp;&amp;(y.scale=A),S=`scaleX(${A})`}}if(y.angle!==0&amp;&amp;(S=`rotate(${y.angle}deg) ${S}`),S.length&gt;0&amp;&amp;(this._enhanceTextSelection&amp;&amp;(y.originalTransform=S),x.style.transform=S),y.hasText&amp;&amp;this._container.append(x),y.hasEOL){let T=document.createElement("br");T.setAttribute("role","presentation"),this._container.append(T)}}_render(){let x=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0,y=(0,n.createPromiseCapability)(),S=Object.create(null),T=this._document.createElement("canvas");if(T.height=T.width=s,this._layoutTextCtx=T.getContext("2d",{alpha:!1}),this._textContent){let w=this._textContent.items,k=this._textContent.styles;this._processItems(w,k),y.resolve()}else if(this._textContentStream){let w=()=&gt;{this._reader.read().then(k=&gt;{let{value:A,done:I}=k;if(I){y.resolve();return}Object.assign(S,A.styles),this._processItems(A.items,S),w()},y.reject)};this._reader=this._textContentStream.getReader(),w()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');y.promise.then(()=&gt;{S=null,x?this._renderTimer=setTimeout(()=&gt;{p(this),this._renderTimer=null},x):p(this)},this._capability.reject)}expandTextDivs(){let x=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&amp;&amp;(f(this),this._bounds=null);let y=[],S=[];for(let T=0,w=this._textDivs.length;T&lt;w;T++){let k=this._textDivs[T],A=this._textDivProperties.get(k);!A.hasText||(x?(y.length=0,S.length=0,A.originalTransform&amp;&amp;y.push(A.originalTransform),A.paddingTop&gt;0?(S.push(`${A.paddingTop}px`),y.push(`translateY(${-A.paddingTop}px)`)):S.push(0),A.paddingRight&gt;0?S.push(`${A.paddingRight/A.scale}px`):S.push(0),A.paddingBottom&gt;0?S.push(`${A.paddingBottom}px`):S.push(0),A.paddingLeft&gt;0?(S.push(`${A.paddingLeft/A.scale}px`),y.push(`translateX(${-A.paddingLeft/A.scale}px)`)):S.push(0),k.style.padding=S.join(" "),y.length&amp;&amp;(k.style.transform=y.join(" "))):(k.style.padding=null,k.style.transform=A.originalTransform))}}}e.TextLayerRenderTask=v;function b(C){let x=new v({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return x._render(C.timeout),x}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=t(133),o=t(1),i=t(3);let s=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=s;{let m=function(y){let S=[],T=[];for(let w of y){if(w.fn==="save"){S.push({fnId:92,fn:"group",items:[]}),T.push(S),S=S.at(-1).items;continue}w.fn==="restore"?S=T.pop():S.push(w)}return S},g=function(y){if(Number.isInteger(y))return y.toString();let S=y.toFixed(10),T=S.length-1;if(S[T]!=="0")return S;do T--;while(S[T]==="0");return S.substring(0,S[T]==="."?T:T+1)},v=function(y){if(y[4]===0&amp;&amp;y[5]===0){if(y[1]===0&amp;&amp;y[2]===0)return y[0]===1&amp;&amp;y[3]===1?"":`scale(${g(y[0])} ${g(y[3])})`;if(y[0]===y[3]&amp;&amp;y[1]===-y[2]){let S=Math.acos(y[0])*180/Math.PI;return`rotate(${g(S)})`}}else if(y[0]===1&amp;&amp;y[1]===0&amp;&amp;y[2]===0&amp;&amp;y[3]===1)return`translate(${g(y[4])} ${g(y[5])})`;return`matrix(${g(y[0])} ${g(y[1])} ${g(y[2])} ${g(y[3])} ${g(y[4])} ${g(y[5])})`},a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",d=["butt","round","square"],c=["miter","round","bevel"],p=function(y){let S=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:"",T=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&amp;&amp;typeof Blob!="undefined"&amp;&amp;!T)return URL.createObjectURL(new Blob([y],{type:S}));let w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=`data:${S};base64,`;for(let A=0,I=y.length;A&lt;I;A+=3){let E=y[A]&amp;255,O=y[A+1]&amp;255,Q=y[A+2]&amp;255,j=E&gt;&gt;2,U=(E&amp;3)&lt;&lt;4|O&gt;&gt;4,B=A+1&lt;I?(O&amp;15)&lt;&lt;2|Q&gt;&gt;6:64,z=A+2&lt;I?Q&amp;63:64;k+=w[j]+w[U]+w[B]+w[z]}return k},h=function(){let y=new Uint8Array([137,80,78,71,13,10,26,10]),S=12,T=new Int32Array(256);for(let Q=0;Q&lt;256;Q++){let j=Q;for(let U=0;U&lt;8;U++)j&amp;1?j=3988292384^j&gt;&gt;1&amp;2147483647:j=j&gt;&gt;1&amp;2147483647;T[Q]=j}function w(Q,j,U){let B=-1;for(let z=j;z&lt;U;z++){let N=(B^Q[z])&amp;255,V=T[N];B=B&gt;&gt;&gt;8^V}return B^-1}function k(Q,j,U,B){let z=B,N=j.length;U[z]=N&gt;&gt;24&amp;255,U[z+1]=N&gt;&gt;16&amp;255,U[z+2]=N&gt;&gt;8&amp;255,U[z+3]=N&amp;255,z+=4,U[z]=Q.charCodeAt(0)&amp;255,U[z+1]=Q.charCodeAt(1)&amp;255,U[z+2]=Q.charCodeAt(2)&amp;255,U[z+3]=Q.charCodeAt(3)&amp;255,z+=4,U.set(j,z),z+=j.length;let V=w(U,B+4,z);U[z]=V&gt;&gt;24&amp;255,U[z+1]=V&gt;&gt;16&amp;255,U[z+2]=V&gt;&gt;8&amp;255,U[z+3]=V&amp;255}function A(Q,j,U){let B=1,z=0;for(let N=j;N&lt;U;++N)B=(B+(Q[N]&amp;255))%65521,z=(z+B)%65521;return z&lt;&lt;16|B}function I(Q){if(!i.isNodeJS)return E(Q);try{let j;parseInt(process.versions.node)&gt;=8?j=Q:j=Buffer.from(Q);let U=ta("zlib").deflateSync(j,{level:9});return U instanceof Uint8Array?U:new Uint8Array(U)}catch(j){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return E(Q)}function E(Q){let j=Q.length,U=65535,B=Math.ceil(j/U),z=new Uint8Array(2+j+B*5+4),N=0;z[N++]=120,z[N++]=156;let V=0;for(;j&gt;U;)z[N++]=0,z[N++]=255,z[N++]=255,z[N++]=0,z[N++]=0,z.set(Q.subarray(V,V+U),N),N+=U,V+=U,j-=U;z[N++]=1,z[N++]=j&amp;255,z[N++]=j&gt;&gt;8&amp;255,z[N++]=~j&amp;65535&amp;255,z[N++]=(~j&amp;65535)&gt;&gt;8&amp;255,z.set(Q.subarray(V),N),N+=Q.length-V;let re=A(Q,0,Q.length);return z[N++]=re&gt;&gt;24&amp;255,z[N++]=re&gt;&gt;16&amp;255,z[N++]=re&gt;&gt;8&amp;255,z[N++]=re&amp;255,z}function O(Q,j,U,B){let z=Q.width,N=Q.height,V,re,ce,ge=Q.data;switch(j){case o.ImageKind.GRAYSCALE_1BPP:re=0,V=1,ce=z+7&gt;&gt;3;break;case o.ImageKind.RGB_24BPP:re=2,V=8,ce=z*3;break;case o.ImageKind.RGBA_32BPP:re=6,V=8,ce=z*4;break;default:throw new Error("invalid format")}let ae=new Uint8Array((1+ce)*N),Y=0,W=0;for(let P=0;P&lt;N;++P)ae[Y++]=0,ae.set(ge.subarray(W,W+ce),Y),W+=ce,Y+=ce;if(j===o.ImageKind.GRAYSCALE_1BPP&amp;&amp;B){Y=0;for(let P=0;P&lt;N;P++){Y++;for(let X=0;X&lt;ce;X++)ae[Y++]^=255}}let G=new Uint8Array([z&gt;&gt;24&amp;255,z&gt;&gt;16&amp;255,z&gt;&gt;8&amp;255,z&amp;255,N&gt;&gt;24&amp;255,N&gt;&gt;16&amp;255,N&gt;&gt;8&amp;255,N&amp;255,V,re,0,0,0]),ee=I(ae),F=y.length+S*3+G.length+ee.length,L=new Uint8Array(F),$=0;return L.set(y,$),$+=y.length,k("IHDR",G,L,$),$+=S+G.length,k("IDATA",ee,L,$),$+=S+ee.length,k("IEND",new Uint8Array(0),L,$),p(L,"image/png",U)}return function(j,U,B){let z=j.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:j.kind;return O(j,z,U,B)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(S,T){this.x=S,this.y=T}}let b=0,C=0,x=0;e.SVGGraphics=s=class{constructor(y,S){let T=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:!1;(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new f,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=y,this.objs=S,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!T,this._operatorIdMapping=[];for(let w in o.OPS)this._operatorIdMapping[o.OPS[w]]=w}save(){this.transformStack.push(this.transformMatrix);let y=this.current;this.extraStack.push(y),this.current=y.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(y){this.save(),this.executeOpTree(y),this.restore()}loadDependencies(y){let S=y.fnArray,T=y.argsArray;for(let w=0,k=S.length;w&lt;k;w++)if(S[w]===o.OPS.dependency)for(let A of T[w]){let I=A.startsWith("g_")?this.commonObjs:this.objs,E=new Promise(O=&gt;{I.get(A,O)});this.current.dependencies.push(E)}return Promise.all(this.current.dependencies)}transform(y,S,T,w,k,A){let I=[y,S,T,w,k,A];this.transformMatrix=o.Util.transform(this.transformMatrix,I),this.tgrp=null}getSVG(y,S){this.viewport=S;let T=this._initialize(S);return this.loadDependencies(y).then(()=&gt;(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(y)),T))}convertOpList(y){let S=this._operatorIdMapping,T=y.argsArray,w=y.fnArray,k=[];for(let A=0,I=w.length;A&lt;I;A++){let E=w[A];k.push({fnId:E,fn:S[E],args:T[A]})}return m(k)}executeOpTree(y){for(let S of y){let T=S.fn,w=S.fnId,k=S.args;switch(w|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(k);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(k[0],k[1]);break;case o.OPS.setFont:this.setFont(k);break;case o.OPS.showText:this.showText(k[0]);break;case o.OPS.showSpacedText:this.showText(k[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(k[0],k[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(k[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(k[0]);break;case o.OPS.setHScale:this.setHScale(k[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(k[0],k[1],k[2],k[3],k[4],k[5]);break;case o.OPS.setTextRise:this.setTextRise(k[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(k[0]);break;case o.OPS.setLineWidth:this.setLineWidth(k[0]);break;case o.OPS.setLineJoin:this.setLineJoin(k[0]);break;case o.OPS.setLineCap:this.setLineCap(k[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(k[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(k[0],k[1],k[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(k[0],k[1],k[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(k);break;case o.OPS.setFillColorN:this.setFillColorN(k);break;case o.OPS.shadingFill:this.shadingFill(k[0]);break;case o.OPS.setDash:this.setDash(k[0],k[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(k[0]);break;case o.OPS.setFlatness:this.setFlatness(k[0]);break;case o.OPS.setGState:this.setGState(k[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(k[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(k[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(k[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(k[0],k[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(k[0],k[1],k[2],k[3],k[4],k[5]);break;case o.OPS.constructPath:this.constructPath(k[0],k[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(S.items);break;default:(0,o.warn)(`Unimplemented operator ${T}`);break}}}setWordSpacing(y){this.current.wordSpacing=y}setCharSpacing(y){this.current.charSpacing=y}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(y,S,T,w,k,A){let I=this.current;I.textMatrix=I.lineMatrix=[y,S,T,w,k,A],I.textMatrixScale=Math.hypot(y,S),I.x=I.lineX=0,I.y=I.lineY=0,I.xcoords=[],I.ycoords=[],I.tspan=this.svgFactory.createElement("svg:tspan"),I.tspan.setAttributeNS(null,"font-family",I.fontFamily),I.tspan.setAttributeNS(null,"font-size",`${g(I.fontSize)}px`),I.tspan.setAttributeNS(null,"y",g(-I.y)),I.txtElement=this.svgFactory.createElement("svg:text"),I.txtElement.append(I.tspan)}beginText(){let y=this.current;y.x=y.lineX=0,y.y=y.lineY=0,y.textMatrix=o.IDENTITY_MATRIX,y.lineMatrix=o.IDENTITY_MATRIX,y.textMatrixScale=1,y.tspan=this.svgFactory.createElement("svg:tspan"),y.txtElement=this.svgFactory.createElement("svg:text"),y.txtgrp=this.svgFactory.createElement("svg:g"),y.xcoords=[],y.ycoords=[]}moveText(y,S){let T=this.current;T.x=T.lineX+=y,T.y=T.lineY+=S,T.xcoords=[],T.ycoords=[],T.tspan=this.svgFactory.createElement("svg:tspan"),T.tspan.setAttributeNS(null,"font-family",T.fontFamily),T.tspan.setAttributeNS(null,"font-size",`${g(T.fontSize)}px`),T.tspan.setAttributeNS(null,"y",g(-T.y))}showText(y){let S=this.current,T=S.font,w=S.fontSize;if(w===0)return;let k=S.fontSizeScale,A=S.charSpacing,I=S.wordSpacing,E=S.fontDirection,O=S.textHScale*E,Q=T.vertical,j=Q?1:-1,U=T.defaultVMetrics,B=w*S.fontMatrix[0],z=0;for(let re of y){if(re===null){z+=E*I;continue}else if(typeof re=="number"){z+=j*re*w/1e3;continue}let ce=(re.isSpace?I:0)+A,ge=re.fontChar,ae,Y,W=re.width;if(Q){let ee,F=re.vmetric||U;ee=re.vmetric?F[1]:W*.5,ee=-ee*B;let L=F[2]*B;W=F?-F[0]:W,ae=ee/k,Y=(z+L)/k}else ae=z/k,Y=0;(re.isInFont||T.missingFile)&amp;&amp;(S.xcoords.push(S.x+ae),Q&amp;&amp;S.ycoords.push(-S.y+Y),S.tspan.textContent+=ge);let G;Q?G=W*B-ce*E:G=W*B+ce*E,z+=G}S.tspan.setAttributeNS(null,"x",S.xcoords.map(g).join(" ")),Q?S.tspan.setAttributeNS(null,"y",S.ycoords.map(g).join(" ")):S.tspan.setAttributeNS(null,"y",g(-S.y)),Q?S.y-=z:S.x+=z*O,S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${g(S.fontSize)}px`),S.fontStyle!==a.fontStyle&amp;&amp;S.tspan.setAttributeNS(null,"font-style",S.fontStyle),S.fontWeight!==a.fontWeight&amp;&amp;S.tspan.setAttributeNS(null,"font-weight",S.fontWeight);let N=S.textRenderingMode&amp;o.TextRenderingMode.FILL_STROKE_MASK;if(N===o.TextRenderingMode.FILL||N===o.TextRenderingMode.FILL_STROKE?(S.fillColor!==a.fillColor&amp;&amp;S.tspan.setAttributeNS(null,"fill",S.fillColor),S.fillAlpha&lt;1&amp;&amp;S.tspan.setAttributeNS(null,"fill-opacity",S.fillAlpha)):S.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?S.tspan.setAttributeNS(null,"fill","transparent"):S.tspan.setAttributeNS(null,"fill","none"),N===o.TextRenderingMode.STROKE||N===o.TextRenderingMode.FILL_STROKE){let re=1/(S.textMatrixScale||1);this._setStrokeAttributes(S.tspan,re)}let V=S.textMatrix;S.textRise!==0&amp;&amp;(V=V.slice(),V[5]+=S.textRise),S.txtElement.setAttributeNS(null,"transform",`${v(V)} scale(${g(O)}, -1)`),S.txtElement.setAttributeNS(l,"xml:space","preserve"),S.txtElement.append(S.tspan),S.txtgrp.append(S.txtElement),this._ensureTransformGroup().append(S.txtElement)}setLeadingMoveText(y,S){this.setLeading(-S),this.moveText(y,S)}addFontStyle(y){if(!y.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let S=p(y.data,y.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${y.loadedName}"; src: url(${S}); }
`}setFont(y){let S=this.current,T=this.commonObjs.get(y[0]),w=y[1];S.font=T,this.embedFonts&amp;&amp;!T.missingFile&amp;&amp;!this.embeddedFonts[T.loadedName]&amp;&amp;(this.addFontStyle(T),this.embeddedFonts[T.loadedName]=T),S.fontMatrix=T.fontMatrix||o.FONT_IDENTITY_MATRIX;let k="normal";T.black?k="900":T.bold&amp;&amp;(k="bold");let A=T.italic?"italic":"normal";w&lt;0?(w=-w,S.fontDirection=-1):S.fontDirection=1,S.fontSize=w,S.fontFamily=T.loadedName,S.fontWeight=k,S.fontStyle=A,S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"y",g(-S.y)),S.xcoords=[],S.ycoords=[]}endText(){var y;let S=this.current;S.textRenderingMode&amp;o.TextRenderingMode.ADD_TO_PATH_FLAG&amp;&amp;(y=S.txtElement)!==null&amp;&amp;y!==void 0&amp;&amp;y.hasChildNodes()&amp;&amp;(S.element=S.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(y){y&gt;0&amp;&amp;(this.current.lineWidth=y)}setLineCap(y){this.current.lineCap=d[y]}setLineJoin(y){this.current.lineJoin=c[y]}setMiterLimit(y){this.current.miterLimit=y}setStrokeAlpha(y){this.current.strokeAlpha=y}setStrokeRGBColor(y,S,T){this.current.strokeColor=o.Util.makeHexColor(y,S,T)}setFillAlpha(y){this.current.fillAlpha=y}setFillRGBColor(y,S,T){this.current.fillColor=o.Util.makeHexColor(y,S,T),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(y){this.current.strokeColor=this._makeColorN_Pattern(y)}setFillColorN(y){this.current.fillColor=this._makeColorN_Pattern(y)}shadingFill(y){let S=this.viewport.width,T=this.viewport.height,w=o.Util.inverseTransform(this.transformMatrix),k=o.Util.applyTransform([0,0],w),A=o.Util.applyTransform([0,T],w),I=o.Util.applyTransform([S,0],w),E=o.Util.applyTransform([S,T],w),O=Math.min(k[0],A[0],I[0],E[0]),Q=Math.min(k[1],A[1],I[1],E[1]),j=Math.max(k[0],A[0],I[0],E[0]),U=Math.max(k[1],A[1],I[1],E[1]),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",O),B.setAttributeNS(null,"y",Q),B.setAttributeNS(null,"width",j-O),B.setAttributeNS(null,"height",U-Q),B.setAttributeNS(null,"fill",this._makeShadingPattern(y)),this.current.fillAlpha&lt;1&amp;&amp;B.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(B)}_makeColorN_Pattern(y){return y[0]==="TilingPattern"?this._makeTilingPattern(y):this._makeShadingPattern(y)}_makeTilingPattern(y){let S=y[1],T=y[2],w=y[3]||o.IDENTITY_MATRIX,[k,A,I,E]=y[4],O=y[5],Q=y[6],j=y[7],U=`shading${x++}`,[B,z,N,V]=o.Util.normalizeRect([...o.Util.applyTransform([k,A],w),...o.Util.applyTransform([I,E],w)]),[re,ce]=o.Util.singularValueDecompose2dScale(w),ge=O*re,ae=Q*ce,Y=this.svgFactory.createElement("svg:pattern");Y.setAttributeNS(null,"id",U),Y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Y.setAttributeNS(null,"width",ge),Y.setAttributeNS(null,"height",ae),Y.setAttributeNS(null,"x",`${B}`),Y.setAttributeNS(null,"y",`${z}`);let W=this.svg,G=this.transformMatrix,ee=this.current.fillColor,F=this.current.strokeColor,L=this.svgFactory.create(N-B,V-z);if(this.svg=L,this.transformMatrix=w,j===2){let $=o.Util.makeHexColor(...S);this.current.fillColor=$,this.current.strokeColor=$}return this.executeOpTree(this.convertOpList(T)),this.svg=W,this.transformMatrix=G,this.current.fillColor=ee,this.current.strokeColor=F,Y.append(L.childNodes[0]),this.defs.append(Y),`url(#${U})`}_makeShadingPattern(y){switch(typeof y=="string"&amp;&amp;(y=this.objs.get(y)),y[0]){case"RadialAxial":let S=`shading${x++}`,T=y[3],w;switch(y[1]){case"axial":let k=y[4],A=y[5];w=this.svgFactory.createElement("svg:linearGradient"),w.setAttributeNS(null,"id",S),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"x1",k[0]),w.setAttributeNS(null,"y1",k[1]),w.setAttributeNS(null,"x2",A[0]),w.setAttributeNS(null,"y2",A[1]);break;case"radial":let I=y[4],E=y[5],O=y[6],Q=y[7];w=this.svgFactory.createElement("svg:radialGradient"),w.setAttributeNS(null,"id",S),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"cx",E[0]),w.setAttributeNS(null,"cy",E[1]),w.setAttributeNS(null,"r",Q),w.setAttributeNS(null,"fx",I[0]),w.setAttributeNS(null,"fy",I[1]),w.setAttributeNS(null,"fr",O);break;default:throw new Error(`Unknown RadialAxial type: ${y[1]}`)}for(let k of T){let A=this.svgFactory.createElement("svg:stop");A.setAttributeNS(null,"offset",k[0]),A.setAttributeNS(null,"stop-color",k[1]),w.append(A)}return this.defs.append(w),`url(#${S})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${y[0]}`)}}setDash(y,S){this.current.dashArray=y,this.current.dashPhase=S}constructPath(y,S){let T=this.current,w=T.x,k=T.y,A=[],I=0;for(let E of y)switch(E|0){case o.OPS.rectangle:w=S[I++],k=S[I++];let O=S[I++],Q=S[I++],j=w+O,U=k+Q;A.push("M",g(w),g(k),"L",g(j),g(k),"L",g(j),g(U),"L",g(w),g(U),"Z");break;case o.OPS.moveTo:w=S[I++],k=S[I++],A.push("M",g(w),g(k));break;case o.OPS.lineTo:w=S[I++],k=S[I++],A.push("L",g(w),g(k));break;case o.OPS.curveTo:w=S[I+4],k=S[I+5],A.push("C",g(S[I]),g(S[I+1]),g(S[I+2]),g(S[I+3]),g(w),g(k)),I+=6;break;case o.OPS.curveTo2:A.push("C",g(w),g(k),g(S[I]),g(S[I+1]),g(S[I+2]),g(S[I+3])),w=S[I+2],k=S[I+3],I+=4;break;case o.OPS.curveTo3:w=S[I+2],k=S[I+3],A.push("C",g(S[I]),g(S[I+1]),g(w),g(k),g(w),g(k)),I+=4;break;case o.OPS.closePath:A.push("Z");break}A=A.join(" "),T.path&amp;&amp;y.length&gt;0&amp;&amp;y[0]!==o.OPS.rectangle&amp;&amp;y[0]!==o.OPS.moveTo?A=T.path.getAttributeNS(null,"d")+A:(T.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(T.path)),T.path.setAttributeNS(null,"d",A),T.path.setAttributeNS(null,"fill","none"),T.element=T.path,T.setCurrentPoint(w,k)}endPath(){let y=this.current;if(y.path=null,!this.pendingClip)return;if(!y.element){this.pendingClip=null;return}let S=`clippath${b++}`,T=this.svgFactory.createElement("svg:clipPath");T.setAttributeNS(null,"id",S),T.setAttributeNS(null,"transform",v(this.transformMatrix));let w=y.element.cloneNode(!0);if(this.pendingClip==="evenodd"?w.setAttributeNS(null,"clip-rule","evenodd"):w.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,T.append(w),this.defs.append(T),y.activeClipUrl){y.clipGroup=null;for(let k of this.extraStack)k.clipGroup=null;T.setAttributeNS(null,"clip-path",y.activeClipUrl)}y.activeClipUrl=`url(#${S})`,this.tgrp=null}clip(y){this.pendingClip=y}closePath(){let y=this.current;if(y.path){let S=`${y.path.getAttributeNS(null,"d")}Z`;y.path.setAttributeNS(null,"d",S)}}setLeading(y){this.current.leading=-y}setTextRise(y){this.current.textRise=y}setTextRenderingMode(y){this.current.textRenderingMode=y}setHScale(y){this.current.textHScale=y/100}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(let[S,T]of y)switch(S){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T);break;case"CA":this.setStrokeAlpha(T);break;case"ca":this.setFillAlpha(T);break;default:(0,o.warn)(`Unimplemented graphic state operator ${S}`);break}}fill(){let y=this.current;y.element&amp;&amp;(y.element.setAttributeNS(null,"fill",y.fillColor),y.element.setAttributeNS(null,"fill-opacity",y.fillAlpha),this.endPath())}stroke(){let y=this.current;y.element&amp;&amp;(this._setStrokeAttributes(y.element),y.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(y){let S=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:1,T=this.current,w=T.dashArray;S!==1&amp;&amp;w.length&gt;0&amp;&amp;(w=w.map(function(k){return S*k})),y.setAttributeNS(null,"stroke",T.strokeColor),y.setAttributeNS(null,"stroke-opacity",T.strokeAlpha),y.setAttributeNS(null,"stroke-miterlimit",g(T.miterLimit)),y.setAttributeNS(null,"stroke-linecap",T.lineCap),y.setAttributeNS(null,"stroke-linejoin",T.lineJoin),y.setAttributeNS(null,"stroke-width",g(S*T.lineWidth)+"px"),y.setAttributeNS(null,"stroke-dasharray",w.map(g).join(" ")),y.setAttributeNS(null,"stroke-dashoffset",g(S*T.dashPhase)+"px")}eoFill(){this.current.element&amp;&amp;this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&amp;&amp;this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x","0"),y.setAttributeNS(null,"y","0"),y.setAttributeNS(null,"width","1px"),y.setAttributeNS(null,"height","1px"),y.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(y)}paintImageXObject(y){let S=y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y);if(!S){(0,o.warn)(`Dependent image with object ID ${y} is not ready yet`);return}this.paintInlineImageXObject(S)}paintInlineImageXObject(y,S){let T=y.width,w=y.height,k=h(y,this.forceDataSchema,!!S),A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x","0"),A.setAttributeNS(null,"y","0"),A.setAttributeNS(null,"width",g(T)),A.setAttributeNS(null,"height",g(w)),this.current.element=A,this.clip("nonzero");let I=this.svgFactory.createElement("svg:image");I.setAttributeNS(u,"xlink:href",k),I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y",g(-w)),I.setAttributeNS(null,"width",g(T)+"px"),I.setAttributeNS(null,"height",g(w)+"px"),I.setAttributeNS(null,"transform",`scale(${g(1/T)} ${g(-1/w)})`),S?S.append(I):this._ensureTransformGroup().append(I)}paintImageMaskXObject(y){let S=this.current,T=y.width,w=y.height,k=S.fillColor;S.maskId=`mask${C++}`;let A=this.svgFactory.createElement("svg:mask");A.setAttributeNS(null,"id",S.maskId);let I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",g(T)),I.setAttributeNS(null,"height",g(w)),I.setAttributeNS(null,"fill",k),I.setAttributeNS(null,"mask",`url(#${S.maskId})`),this.defs.append(A),this._ensureTransformGroup().append(I),this.paintInlineImageXObject(y,A)}paintFormXObjectBegin(y,S){if(Array.isArray(y)&amp;&amp;y.length===6&amp;&amp;this.transform(y[0],y[1],y[2],y[3],y[4],y[5]),S){let T=S[2]-S[0],w=S[3]-S[1],k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x",S[0]),k.setAttributeNS(null,"y",S[1]),k.setAttributeNS(null,"width",g(T)),k.setAttributeNS(null,"height",g(w)),this.current.element=k,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(y){let S=this.svgFactory.create(y.width,y.height),T=this.svgFactory.createElement("svg:defs");S.append(T),this.defs=T;let w=this.svgFactory.createElement("svg:g");return w.setAttributeNS(null,"transform",v(y.transform)),S.append(w),this.svg=w,S}_ensureClipGroup(){if(!this.current.clipGroup){let y=this.svgFactory.createElement("svg:g");y.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(y),this.current.clipGroup=y}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=t(1),o=t(158);let i=ta("fs"),s=ta("http"),a=ta("https"),l=_X(),u=/^file:\/\/\/[a-zA-Z]:\//;function d(C){let x=l.parse(C);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(C)?l.parse(`file:///${C}`):(x.host||(x.protocol="file:"),x)}class c{constructor(x){this.source=x,this.url=d(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&amp;&amp;x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x,y;return(x=(y=this._fullRequestReader)===null||y===void 0?void 0:y._loaded)!==null&amp;&amp;x!==void 0?x:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v(this):new m(this),this._fullRequestReader}getRangeReader(x,y){if(y&lt;=this._progressiveDataLength)return null;let S=this.isFsUrl?new b(this,x,y):new g(this,x,y);return this._rangeRequestReaders.push(S),S}cancelAllRequests(x){this._fullRequestReader&amp;&amp;this._fullRequestReader.cancel(x);for(let y of this._rangeRequestReaders.slice(0))y.cancel(x)}}e.PDFNodeStream=c;class p{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;let y=x.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&amp;&amp;!this._disableRange&amp;&amp;(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let x=this._readableStream.read();return x===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&amp;&amp;this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=&gt;{this._readCapability.resolve()}),x.on("end",()=&gt;{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",y=&gt;{this._error(y)}),!this._isStreamingSupported&amp;&amp;this._isRangeSupported&amp;&amp;this._error(new n.AbortException("streaming is disabled")),this._storedError&amp;&amp;this._readableStream.destroy(this._storedError)}}class h{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();let y=x.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let x=this._readableStream.read();return x===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&amp;&amp;this.onProgress({loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=&gt;{this._readCapability.resolve()}),x.on("end",()=&gt;{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",y=&gt;{this._error(y)}),this._storedError&amp;&amp;this._readableStream.destroy(this._storedError)}}function f(C,x){return{protocol:C.protocol,auth:C.auth,host:C.hostname,port:C.port,path:C.path,method:"GET",headers:x}}class m extends p{constructor(x){super(x);let y=S=&gt;{if(S.statusCode===404){let A=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(S);let T=A=&gt;this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:w,suggestedLength:k}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=k||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(T)};this._request=null,this._url.protocol==="http:"?this._request=s.request(f(this._url,x.httpHeaders),y):this._request=a.request(f(this._url,x.httpHeaders),y),this._request.on("error",S=&gt;{this._storedError=S,this._headersCapability.reject(S)}),this._request.end()}}class g extends h{constructor(x,y,S){super(x),this._httpHeaders={};for(let w in x.httpHeaders){let k=x.httpHeaders[w];typeof k!="undefined"&amp;&amp;(this._httpHeaders[w]=k)}this._httpHeaders.Range=`bytes=${y}-${S-1}`;let T=w=&gt;{if(w.statusCode===404){let k=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k;return}this._setReadableStream(w)};this._request=null,this._url.protocol==="http:"?this._request=s.request(f(this._url,this._httpHeaders),T):this._request=a.request(f(this._url,this._httpHeaders),T),this._request.on("error",w=&gt;{this._storedError=w}),this._request.end()}}class v extends p{constructor(x){super(x);let y=decodeURIComponent(this._url.path);u.test(this._url.href)&amp;&amp;(y=y.replace(/^\//,"")),i.lstat(y,(S,T)=&gt;{if(S){S.code==="ENOENT"&amp;&amp;(S=new n.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=S,this._headersCapability.reject(S);return}this._contentLength=T.size,this._setReadableStream(i.createReadStream(y)),this._headersCapability.resolve()})}}class b extends h{constructor(x,y,S){super(x);let T=decodeURIComponent(this._url.path);u.test(this._url.href)&amp;&amp;(T=T.replace(/^\//,"")),this._setReadableStream(i.createReadStream(T,{start:y,end:S-1}))}}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=l,e.extractFilenameFromHeader=a,e.validateRangeRequestCapabilities=s,e.validateResponseStatus=u;var n=t(1),o=t(159),i=t(133);function s(d){let{getResponseHeader:c,isHttp:p,rangeChunkSize:h,disableRange:f}=d,m={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(c("Content-Length"),10);return!Number.isInteger(g)||(m.suggestedLength=g,g&lt;=2*h)||f||!p||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function a(d){let c=d("Content-Disposition");if(c){let p=(0,o.getFilenameFromContentDispositionHeader)(c);if(p.includes("%"))try{p=decodeURIComponent(p)}catch(h){}if((0,i.isPdfFile)(p))return p}return null}function l(d,c){return d===404||d===0&amp;&amp;c.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+c+'".'):new n.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${c}".`,d)}function u(d){return d===200||d===206}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=o;var n=t(1);function o(i){let s=!0,a=l("filename\\*","i").exec(i);if(a){a=a[1];let m=p(a);return m=unescape(m),m=h(m),m=f(m),d(m)}if(a=c(i),a){let m=f(a);return d(m)}if(a=l("filename","i").exec(i),a){a=a[1];let m=p(a);return m=f(m),d(m)}function l(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function u(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{let v=new TextDecoder(m,{fatal:!0}),b=(0,n.stringToBytes)(g);g=v.decode(b),s=!1}catch(v){}}return g}function d(m){return s&amp;&amp;/[\x80-\xff]/.test(m)&amp;&amp;(m=u("utf-8",m),s&amp;&amp;(m=u("iso-8859-1",m))),m}function c(m){let g=[],v,b=l("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(m))!==null;){let[,x,y,S]=v;if(x=parseInt(x,10),x in g){if(x===0)break;continue}g[x]=[y,S]}let C=[];for(let x=0;x&lt;g.length&amp;&amp;x in g;++x){let[y,S]=g[x];S=p(S),y&amp;&amp;(S=unescape(S),x===0&amp;&amp;(S=h(S))),C.push(S)}return C.join("")}function p(m){if(m.startsWith('"')){let g=m.slice(1).split('\\"');for(let v=0;v&lt;g.length;++v){let b=g[v].indexOf('"');b!==-1&amp;&amp;(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replace(/\\(.)/g,"$1")}m=g.join('"')}return m}function h(m){let g=m.indexOf("'");if(g===-1)return m;let v=m.slice(0,g),C=m.slice(g+1).replace(/^[^']*'/,"");return u(v,C)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,C){if(b==="q"||b==="Q")return C=C.replace(/_/g," "),C=C.replace(/=([0-9a-fA-F]{2})/g,function(x,y){return String.fromCharCode(parseInt(y,16))}),u(v,C);try{C=atob(C)}catch(x){}return u(v,C)})}return""}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=t(1),o=t(158);let i=200,s=206;function a(p){let h=p.response;return typeof h!="string"?h:(0,n.stringToBytes)(h).buffer}class l{constructor(h){let f=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{};this.url=h,this.isHttp=/^https?:/i.test(h),this.httpHeaders=this.isHttp&amp;&amp;f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.getXhr=f.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(h,f,m){let g={begin:h,end:f};for(let v in m)g[v]=m[v];return this.request(g)}requestFull(h){return this.request(h)}request(h){let f=this.getXhr(),m=this.currXhrId++,g=this.pendingRequests[m]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(let v in this.httpHeaders){let b=this.httpHeaders[v];typeof b!="undefined"&amp;&amp;f.setRequestHeader(v,b)}return this.isHttp&amp;&amp;"begin"in h&amp;&amp;"end"in h?(f.setRequestHeader("Range",`bytes=${h.begin}-${h.end-1}`),g.expectedStatus=s):g.expectedStatus=i,f.responseType="arraybuffer",h.onError&amp;&amp;(f.onerror=function(v){h.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,m),f.onprogress=this.onProgress.bind(this,m),g.onHeadersReceived=h.onHeadersReceived,g.onDone=h.onDone,g.onError=h.onError,g.onProgress=h.onProgress,f.send(null),m}onProgress(h,f){var m;let g=this.pendingRequests[h];!g||(m=g.onProgress)===null||m===void 0||m.call(g,f)}onStateChange(h,f){let m=this.pendingRequests[h];if(!m)return;let g=m.xhr;if(g.readyState&gt;=2&amp;&amp;m.onHeadersReceived&amp;&amp;(m.onHeadersReceived(),delete m.onHeadersReceived),g.readyState!==4||!(h in this.pendingRequests))return;if(delete this.pendingRequests[h],g.status===0&amp;&amp;this.isHttp){var v;(v=m.onError)===null||v===void 0||v.call(m,g.status);return}let b=g.status||i;if(!(b===i&amp;&amp;m.expectedStatus===s)&amp;&amp;b!==m.expectedStatus){var x;(x=m.onError)===null||x===void 0||x.call(m,g.status);return}let y=a(g);if(b===s){let T=g.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(T);m.onDone({begin:parseInt(w[1],10),chunk:y})}else if(y)m.onDone({begin:0,chunk:y});else{var S;(S=m.onError)===null||S===void 0||S.call(m,g.status)}}getRequestXhr(h){return this.pendingRequests[h].xhr}isPendingRequest(h){return h in this.pendingRequests}abortRequest(h){let f=this.pendingRequests[h].xhr;delete this.pendingRequests[h],f.abort()}}class u{constructor(h){this._source=h,this._manager=new l(h.url,{httpHeaders:h.httpHeaders,withCredentials:h.withCredentials}),this._rangeChunkSize=h.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(h){let f=this._rangeRequestReaders.indexOf(h);f&gt;=0&amp;&amp;this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(h,f){let m=new c(this._manager,h,f);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(h){var f;(f=this._fullRequestReader)===null||f===void 0||f.cancel(h);for(let m of this._rangeRequestReaders.slice(0))m.cancel(h)}}e.PDFNetworkStream=u;class d{constructor(h,f){this._manager=h;let m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=h.requestFull(m),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&amp;&amp;!this._disableRange&amp;&amp;(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let h=this._fullRequestId,f=this._manager.getRequestXhr(h),m=b=&gt;f.getResponseHeader(b),{allowRangeRequests:g,suggestedLength:v}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});g&amp;&amp;(this._isRangeSupported=!0),this._contentLength=v||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(m),this._isRangeSupported&amp;&amp;this._manager.abortRequest(h),this._headersReceivedCapability.resolve()}_onDone(h){if(h&amp;&amp;(this._requests.length&gt;0?this._requests.shift().resolve({value:h.chunk,done:!1}):this._cachedChunks.push(h.chunk)),this._done=!0,!(this._cachedChunks.length&gt;0)){for(let f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(h){this._storedError=(0,o.createResponseStatusError)(h,this._url),this._headersReceivedCapability.reject(this._storedError);for(let f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(h){var f;(f=this.onProgress)===null||f===void 0||f.call(this,{loaded:h.loaded,total:h.lengthComputable?h.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length&gt;0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0,this._headersReceivedCapability.reject(h);for(let f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&amp;&amp;this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c{constructor(h,f,m){this._manager=h;let g={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._requestId=h.requestRange(f,m,g),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var h;(h=this.onClosed)===null||h===void 0||h.call(this,this)}_onDone(h){let f=h.chunk;this._requests.length&gt;0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(let m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(h){this._storedError=(0,o.createResponseStatusError)(h,this._url);for(let f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(h){if(!this.isStreamingSupported){var f;(f=this.onProgress)===null||f===void 0||f.call(this,{loaded:h.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};let h=(0,n.createPromiseCapability)();return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(let f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&amp;&amp;this._manager.abortRequest(this._requestId),this._close()}}},(r,e,t)=&gt;{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=t(1),o=t(158);function i(d,c,p){return{method:"GET",headers:d,signal:p.signal,mode:"cors",credentials:c?"include":"same-origin",redirect:"follow"}}function s(d){let c=new Headers;for(let p in d){let h=d[p];typeof h!="undefined"&amp;&amp;c.append(p,h)}return c}class a{constructor(c){this.source=c,this.isHttp=/^https?:/i.test(c.url),this.httpHeaders=this.isHttp&amp;&amp;c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c,p;return(c=(p=this._fullRequestReader)===null||p===void 0?void 0:p._loaded)!==null&amp;&amp;c!==void 0?c:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(c,p){if(p&lt;=this._progressiveDataLength)return null;let h=new u(this,c,p);return this._rangeRequestReaders.push(h),h}cancelAllRequests(c){this._fullRequestReader&amp;&amp;this._fullRequestReader.cancel(c);for(let p of this._rangeRequestReaders.slice(0))p.cancel(c)}}e.PDFFetchStream=a;class l{constructor(c){this._stream=c,this._reader=null,this._loaded=0,this._filename=null;let p=c.source;this._withCredentials=p.withCredentials||!1,this._contentLength=p.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=p.disableRange||!1,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&amp;&amp;!this._disableRange&amp;&amp;(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!p.disableStream,this._isRangeSupported=!p.disableRange,this._headers=s(this._stream.httpHeaders);let h=p.url;fetch(h,i(this._headers,this._withCredentials,this._abortController)).then(f=&gt;{if(!(0,o.validateResponseStatus)(f.status))throw(0,o.createResponseStatusError)(f.status,h);this._reader=f.body.getReader(),this._headersCapability.resolve();let m=b=&gt;f.headers.get(b),{allowRangeRequests:g,suggestedLength:v}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=v||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(m),!this._isStreamingSupported&amp;&amp;this._isRangeSupported&amp;&amp;this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:c,done:p}=await this._reader.read();return p?{value:c,done:p}:(this._loaded+=c.byteLength,this.onProgress&amp;&amp;this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){this._reader&amp;&amp;this._reader.cancel(c),this._abortController.abort()}}class u{constructor(c,p,h){this._stream=c,this._reader=null,this._loaded=0;let f=c.source;this._withCredentials=f.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${p}-${h-1}`);let m=f.url;fetch(m,i(this._headers,this._withCredentials,this._abortController)).then(g=&gt;{if(!(0,o.validateResponseStatus)(g.status))throw(0,o.createResponseStatusError)(g.status,m);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:c,done:p}=await this._reader.read();return p?{value:c,done:p}:(this._loaded+=c.byteLength,this.onProgress&amp;&amp;this.onProgress({loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){this._reader&amp;&amp;this._reader.cancel(c),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=&gt;{"use strict";var r=__webpack_exports__;Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(r,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(r,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(r,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return i.AnnotationEditorUIManager}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return s.AnnotationLayer}}),Object.defineProperty(r,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return a.GlobalWorkerOptions}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(r,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return d.SVGGraphics}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(r,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(r,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(r,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(r,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return t.version}});var e=__w_pdfjs_require__(1),t=__w_pdfjs_require__(129),n=__w_pdfjs_require__(133),o=__w_pdfjs_require__(147),i=__w_pdfjs_require__(132),s=__w_pdfjs_require__(152),a=__w_pdfjs_require__(140),l=__w_pdfjs_require__(3),u=__w_pdfjs_require__(155),d=__w_pdfjs_require__(156),c=__w_pdfjs_require__(154);let p="2.16.105",h="172ccdbe5";if(l.isNodeJS){let{PDFNodeStream:f}=__w_pdfjs_require__(157);(0,t.setPDFNetworkStreamFactory)(m=&gt;new f(m))}else{let{PDFNetworkStream:f}=__w_pdfjs_require__(160),{PDFFetchStream:m}=__w_pdfjs_require__(161);(0,t.setPDFNetworkStreamFactory)(g=&gt;(0,n.isValidFetchUrl)(g.url)?new m(g):new f(g))}})(),__webpack_exports__})())});var mz=Qt((iF,hD)=&gt;{(function(){"use strict";var r={function:!0,object:!0},e=r[typeof window]&amp;&amp;window||this,t=e,n=r[typeof iF]&amp;&amp;iF,o=r[typeof hD]&amp;&amp;hD&amp;&amp;!hD.nodeType&amp;&amp;hD,i=n&amp;&amp;o&amp;&amp;typeof globalThis=="object"&amp;&amp;globalThis;i&amp;&amp;(i.global===i||i.window===i||i.self===i)&amp;&amp;(e=i);var s=Math.pow(2,53)-1,a=/\bOpera/,l=this,u=Object.prototype,d=u.hasOwnProperty,c=u.toString;function p(w){return w=String(w),w.charAt(0).toUpperCase()+w.slice(1)}function h(w,k,A){var I={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return k&amp;&amp;A&amp;&amp;/^Win/i.test(w)&amp;&amp;!/^Windows Phone /i.test(w)&amp;&amp;(I=I[/[\d.]+$/.exec(w)])&amp;&amp;(w="Windows "+I),w=String(w),k&amp;&amp;A&amp;&amp;(w=w.replace(RegExp(k,"i"),A)),w=m(w.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),w}function f(w,k){var A=-1,I=w?w.length:0;if(typeof I=="number"&amp;&amp;I&gt;-1&amp;&amp;I&lt;=s)for(;++A&lt;I;)k(w[A],A,w);else g(w,k)}function m(w){return w=y(w),/^(?:webOS|i(?:OS|P))/.test(w)?w:p(w)}function g(w,k){for(var A in w)d.call(w,A)&amp;&amp;k(w[A],A,w)}function v(w){return w==null?p(w):c.call(w).slice(8,-1)}function b(w,k){var A=w!=null?typeof w[k]:"number";return!/^(?:boolean|number|string|undefined)$/.test(A)&amp;&amp;(A=="object"?!!w[k]:!0)}function C(w){return String(w).replace(/([ -])(?!$)/g,"$1?")}function x(w,k){var A=null;return f(w,function(I,E){A=k(A,I,E,w)}),A}function y(w){return String(w).replace(/^ +| +$/g,"")}function S(w){var k=e,A=w&amp;&amp;typeof w=="object"&amp;&amp;v(w)!="String";A&amp;&amp;(k=w,w=null);var I=k.navigator||{},E=I.userAgent||"";w||(w=E);var O=A||l==t,Q=A?!!I.likeChrome:/\bChrome\b/.test(w)&amp;&amp;!/internal|\n/i.test(c.toString()),j="Object",U=A?j:"ScriptBridgingProxyObject",B=A?j:"Environment",z=A&amp;&amp;k.java?"JavaPackage":v(k.java),N=A?j:"RuntimeObject",V=/\bJava/.test(z)&amp;&amp;k.java,re=V&amp;&amp;v(k.environment)==B,ce=V?"a":"\u03B1",ge=V?"b":"\u03B2",ae=k.document||{},Y=k.operamini||k.opera,W=a.test(W=A&amp;&amp;Y?Y["[[Class]]"]:v(Y))?W:Y=null,G,ee=w,F=[],L=null,$=w==E,P=$&amp;&amp;Y&amp;&amp;typeof Y.version=="function"&amp;&amp;Y.version(),X,K=de([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),R=be(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),H=ke([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),J=se({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes &amp; Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),te=Pe(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function de(lt){return x(lt,function(vt,et){return vt||RegExp("\\b"+(et.pattern||C(et))+"\\b","i").exec(w)&amp;&amp;(et.label||et)})}function se(lt){return x(lt,function(vt,et,_e){return vt||(et[H]||et[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+C(_e)+"(?:\\b|\\w*\\d)","i").exec(w))&amp;&amp;_e})}function be(lt){return x(lt,function(vt,et){return vt||RegExp("\\b"+(et.pattern||C(et))+"\\b","i").exec(w)&amp;&amp;(et.label||et)})}function Pe(lt){return x(lt,function(vt,et){var _e=et.pattern||C(et);return!vt&amp;&amp;(vt=RegExp("\\b"+_e+"(?:/[\\d.]+|[ \\w.]*)","i").exec(w))&amp;&amp;(vt=h(vt,_e,et.label||et)),vt})}function ke(lt){return x(lt,function(vt,et){var _e=et.pattern||C(et);return!vt&amp;&amp;(vt=RegExp("\\b"+_e+" *\\d+[.\\w_]*","i").exec(w)||RegExp("\\b"+_e+" *\\w+-[\\w]*","i").exec(w)||RegExp("\\b"+_e+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(w))&amp;&amp;((vt=String(et.label&amp;&amp;!RegExp(_e,"i").test(et.label)?et.label:vt).split("/"))[1]&amp;&amp;!/[\d.]+/.test(vt[0])&amp;&amp;(vt[0]+=" "+vt[1]),et=et.label||et,vt=m(vt[0].replace(RegExp(_e,"i"),et).replace(RegExp("; *(?:"+et+"[_-])?","i")," ").replace(RegExp("("+et+")[-_.]?(\\w)","i"),"$1 $2"))),vt})}function Ie(lt){return x(lt,function(vt,et){return vt||(RegExp(et+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(w)||0)[1]||null})}function Ve(){return this.description||""}if(K&amp;&amp;(K=[K]),/\bAndroid\b/.test(te)&amp;&amp;!H&amp;&amp;(G=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(w))&amp;&amp;(H=y(G[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),J&amp;&amp;!H?H=ke([J]):J&amp;&amp;H&amp;&amp;(H=H.replace(RegExp("^("+C(J)+")[-_.\\s]","i"),J+" ").replace(RegExp("^("+C(J)+")[-_.]?(\\w)","i"),J+" $2")),(G=/\bGoogle TV\b/.exec(H))&amp;&amp;(H=G[0]),/\bSimulator\b/i.test(w)&amp;&amp;(H=(H?H+" ":"")+"Simulator"),R=="Opera Mini"&amp;&amp;/\bOPiOS\b/.test(w)&amp;&amp;F.push("running in Turbo/Uncompressed mode"),R=="IE"&amp;&amp;/\blike iPhone OS\b/.test(w)?(G=S(w.replace(/like iPhone OS/,"")),J=G.manufacturer,H=G.product):/^iP/.test(H)?(R||(R="Safari"),te="iOS"+((G=/ OS ([\d_]+)/i.exec(w))?" "+G[1].replace(/_/g,"."):"")):R=="Konqueror"&amp;&amp;/^Linux\b/i.test(te)?te="Kubuntu":J&amp;&amp;J!="Google"&amp;&amp;(/Chrome/.test(R)&amp;&amp;!/\bMobile Safari\b/i.test(w)||/\bVita\b/.test(H))||/\bAndroid\b/.test(te)&amp;&amp;/^Chrome/.test(R)&amp;&amp;/\bVersion\//i.test(w)?(R="Android Browser",te=/\bAndroid\b/.test(te)?te:"Android"):R=="Silk"?(/\bMobi/i.test(w)||(te="Android",F.unshift("desktop mode")),/Accelerated *= *true/i.test(w)&amp;&amp;F.unshift("accelerated")):R=="UC Browser"&amp;&amp;/\bUCWEB\b/.test(w)?F.push("speed mode"):R=="PaleMoon"&amp;&amp;(G=/\bFirefox\/([\d.]+)\b/.exec(w))?F.push("identifying as Firefox "+G[1]):R=="Firefox"&amp;&amp;(G=/\b(Mobile|Tablet|TV)\b/i.exec(w))?(te||(te="Firefox OS"),H||(H=G[1])):!R||(G=!/\bMinefield\b/i.test(w)&amp;&amp;/\b(?:Firefox|Safari)\b/.exec(R))?(R&amp;&amp;!H&amp;&amp;/[\/,]|^[^(]+?\)/.test(w.slice(w.indexOf(G+"/")+8))&amp;&amp;(R=null),(G=H||J||te)&amp;&amp;(H||J||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(te))&amp;&amp;(R=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(te)?te:G)+" Browser")):R=="Electron"&amp;&amp;(G=(/\bChrome\/([\d.]+)\b/.exec(w)||0)[1])&amp;&amp;F.push("Chromium "+G),P||(P=Ie(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",C(R),"(?:Firefox|Minefield|NetFront)"])),(G=K=="iCab"&amp;&amp;parseFloat(P)&gt;3&amp;&amp;"WebKit"||/\bOpera\b/.test(R)&amp;&amp;(/\bOPR\b/.test(w)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(w)&amp;&amp;!/^(?:Trident|EdgeHTML)$/.test(K)&amp;&amp;"WebKit"||!K&amp;&amp;/\bMSIE\b/i.test(w)&amp;&amp;(te=="Mac OS"?"Tasman":"Trident")||K=="WebKit"&amp;&amp;/\bPlayStation\b(?! Vita\b)/i.test(R)&amp;&amp;"NetFront")&amp;&amp;(K=[G]),R=="IE"&amp;&amp;(G=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(w)||0)[1])?(R+=" Mobile",te="Windows Phone "+(/\+$/.test(G)?G:G+".x"),F.unshift("desktop mode")):/\bWPDesktop\b/i.test(w)?(R="IE Mobile",te="Windows Phone 8.x",F.unshift("desktop mode"),P||(P=(/\brv:([\d.]+)/.exec(w)||0)[1])):R!="IE"&amp;&amp;K=="Trident"&amp;&amp;(G=/\brv:([\d.]+)/.exec(w))&amp;&amp;(R&amp;&amp;F.push("identifying as "+R+(P?" "+P:"")),R="IE",P=G[1]),$){if(b(k,"global"))if(V&amp;&amp;(G=V.lang.System,ee=G.getProperty("os.arch"),te=te||G.getProperty("os.name")+" "+G.getProperty("os.version")),re){try{P=k.require("ringo/engine").version.join("."),R="RingoJS"}catch(lt){(G=k.system)&amp;&amp;G.global.system==k.system&amp;&amp;(R="Narwhal",te||(te=G[0].os||null))}R||(R="Rhino")}else typeof k.process=="object"&amp;&amp;!k.process.browser&amp;&amp;(G=k.process)&amp;&amp;(typeof G.versions=="object"&amp;&amp;(typeof G.versions.electron=="string"?(F.push("Node "+G.versions.node),R="Electron",P=G.versions.electron):typeof G.versions.nw=="string"&amp;&amp;(F.push("Chromium "+P,"Node "+G.versions.node),R="NW.js",P=G.versions.nw)),R||(R="Node.js",ee=G.arch,te=G.platform,P=/[\d.]+/.exec(G.version),P=P?P[0]:null));else v(G=k.runtime)==U?(R="Adobe AIR",te=G.flash.system.Capabilities.os):v(G=k.phantom)==N?(R="PhantomJS",P=(G=G.version||null)&amp;&amp;G.major+"."+G.minor+"."+G.patch):typeof ae.documentMode=="number"&amp;&amp;(G=/\bTrident\/(\d+)/i.exec(w))?(P=[P,ae.documentMode],(G=+G[1]+4)!=P[1]&amp;&amp;(F.push("IE "+P[1]+" mode"),K&amp;&amp;(K[1]=""),P[1]=G),P=R=="IE"?String(P[1].toFixed(1)):P[0]):typeof ae.documentMode=="number"&amp;&amp;/^(?:Chrome|Firefox)\b/.test(R)&amp;&amp;(F.push("masking as "+R+" "+P),R="IE",P="11.0",K=["Trident"],te="Windows");te=te&amp;&amp;m(te)}if(P&amp;&amp;(G=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(P)||/(?:alpha|beta)(?: ?\d)?/i.exec(w+";"+($&amp;&amp;I.appMinorVersion))||/\bMinefield\b/i.test(w)&amp;&amp;"a")&amp;&amp;(L=/b/i.test(G)?"beta":"alpha",P=P.replace(RegExp(G+"\\+?$"),"")+(L=="beta"?ge:ce)+(/\d+\+?/.exec(G)||"")),R=="Fennec"||R=="Firefox"&amp;&amp;/\b(?:Android|Firefox OS|KaiOS)\b/.test(te))R="Firefox Mobile";else if(R=="Maxthon"&amp;&amp;P)P=P.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(H))H=="Xbox 360"&amp;&amp;(te=null),H=="Xbox 360"&amp;&amp;/\bIEMobile\b/.test(w)&amp;&amp;F.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(R)||R&amp;&amp;!H&amp;&amp;!/Browser|Mobi/.test(R))&amp;&amp;(te=="Windows CE"||/Mobi/i.test(w)))R+=" Mobile";else if(R=="IE"&amp;&amp;$)try{k.external===null&amp;&amp;F.unshift("platform preview")}catch(lt){F.unshift("embedded")}else(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(w))&amp;&amp;(G=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(w)||0)[1]||P)?(G=[G,/BB10/.test(w)],te=(G[1]?(H=null,J="BlackBerry"):"Device Software")+" "+G[0],P=null):this!=g&amp;&amp;H!="Wii"&amp;&amp;($&amp;&amp;Y||/Opera/.test(R)&amp;&amp;/\b(?:MSIE|Firefox)\b/i.test(w)||R=="Firefox"&amp;&amp;/\bOS X (?:\d+\.){2,}/.test(te)||R=="IE"&amp;&amp;(te&amp;&amp;!/^Win/.test(te)&amp;&amp;P&gt;5.5||/\bWindows XP\b/.test(te)&amp;&amp;P&gt;8||P==8&amp;&amp;!/\bTrident\b/.test(w)))&amp;&amp;!a.test(G=S.call(g,w.replace(a,"")+";"))&amp;&amp;G.name&amp;&amp;(G="ing as "+G.name+((G=G.version)?" "+G:""),a.test(R)?(/\bIE\b/.test(G)&amp;&amp;te=="Mac OS"&amp;&amp;(te=null),G="identify"+G):(G="mask"+G,W?R=m(W.replace(/([a-z])([A-Z])/g,"$1 $2")):R="Opera",/\bIE\b/.test(G)&amp;&amp;(te=null),$||(P=null)),K=["Presto"],F.push(G));(G=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(w)||0)[1])&amp;&amp;(G=[parseFloat(G.replace(/\.(\d)$/,".0$1")),G],R=="Safari"&amp;&amp;G[1].slice(-1)=="+"?(R="WebKit Nightly",L="alpha",P=G[1].slice(0,-1)):(P==G[1]||P==(G[2]=(/\bSafari\/([\d.]+\+?)/i.exec(w)||0)[1]))&amp;&amp;(P=null),G[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(w)||0)[1],G[0]==537.36&amp;&amp;G[2]==537.36&amp;&amp;parseFloat(G[1])&gt;=28&amp;&amp;K=="WebKit"&amp;&amp;(K=["Blink"]),!$||!Q&amp;&amp;!G[1]?(K&amp;&amp;(K[1]="like Safari"),G=(G=G[0],G&lt;400?1:G&lt;500?2:G&lt;526?3:G&lt;533?4:G&lt;534?"4+":G&lt;535?5:G&lt;537?6:G&lt;538?7:G&lt;601?8:G&lt;602?9:G&lt;604?10:G&lt;606?11:G&lt;608?12:"12")):(K&amp;&amp;(K[1]="like Chrome"),G=G[1]||(G=G[0],G&lt;530?1:G&lt;532?2:G&lt;532.05?3:G&lt;533?4:G&lt;534.03?5:G&lt;534.07?6:G&lt;534.1?7:G&lt;534.13?8:G&lt;534.16?9:G&lt;534.24?10:G&lt;534.3?11:G&lt;535.01?12:G&lt;535.02?"13+":G&lt;535.07?15:G&lt;535.11?16:G&lt;535.19?17:G&lt;536.05?18:G&lt;536.1?19:G&lt;537.01?20:G&lt;537.11?"21+":G&lt;537.13?23:G&lt;537.18?24:G&lt;537.24?25:G&lt;537.36?26:K!="Blink"?"27":"28")),K&amp;&amp;(K[1]+=" "+(G+=typeof G=="number"?".x":/[.+]/.test(G)?"":"+")),R=="Safari"&amp;&amp;(!P||parseInt(P)&gt;45)?P=G:R=="Chrome"&amp;&amp;/\bHeadlessChrome/i.test(w)&amp;&amp;F.unshift("headless")),R=="Opera"&amp;&amp;(G=/\bzbov|zvav$/.exec(te))?(R+=" ",F.unshift("desktop mode"),G=="zvav"?(R+="Mini",P=null):R+="Mobile",te=te.replace(RegExp(" *"+G+"$"),"")):R=="Safari"&amp;&amp;/\bChrome\b/.exec(K&amp;&amp;K[1])?(F.unshift("desktop mode"),R="Chrome Mobile",P=null,/\bOS X\b/.test(te)?(J="Apple",te="iOS 4.3+"):te=null):/\bSRWare Iron\b/.test(R)&amp;&amp;!P&amp;&amp;(P=Ie("Chrome")),P&amp;&amp;P.indexOf(G=/[\d.]+$/.exec(te))==0&amp;&amp;w.indexOf("/"+G+"-")&gt;-1&amp;&amp;(te=y(te.replace(G,""))),te&amp;&amp;te.indexOf(R)!=-1&amp;&amp;!RegExp(R+" OS").test(te)&amp;&amp;(te=te.replace(RegExp(" *"+C(R)+" *"),"")),K&amp;&amp;!/\b(?:Avant|Nook)\b/.test(R)&amp;&amp;(/Browser|Lunascape|Maxthon/.test(R)||R!="Safari"&amp;&amp;/^iOS/.test(te)&amp;&amp;/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(R)&amp;&amp;K[1])&amp;&amp;(G=K[K.length-1])&amp;&amp;F.push(G),F.length&amp;&amp;(F=["("+F.join("; ")+")"]),J&amp;&amp;H&amp;&amp;H.indexOf(J)&lt;0&amp;&amp;F.push("on "+J),H&amp;&amp;F.push((/^on /.test(F[F.length-1])?"":"on ")+H),te&amp;&amp;(G=/ ([\d.+]+)$/.exec(te),X=G&amp;&amp;te.charAt(te.length-G[0].length-1)=="/",te={architecture:32,family:G&amp;&amp;!X?te.replace(G[0],""):te,version:G?G[1]:null,toString:function(){var lt=this.version;return this.family+(lt&amp;&amp;!X?" "+lt:"")+(this.architecture==64?" 64-bit":"")}}),(G=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ee))&amp;&amp;!/\bi686\b/i.test(ee)?(te&amp;&amp;(te.architecture=64,te.family=te.family.replace(RegExp(" *"+G),"")),R&amp;&amp;(/\bWOW64\b/i.test(w)||$&amp;&amp;/\w(?:86|32)$/.test(I.cpuClass||I.platform)&amp;&amp;!/\bWin64; x64\b/i.test(w))&amp;&amp;F.unshift("32-bit")):te&amp;&amp;/^OS X/.test(te.family)&amp;&amp;R=="Chrome"&amp;&amp;parseFloat(P)&gt;=39&amp;&amp;(te.architecture=64),w||(w=null);var Ae={};return Ae.description=w,Ae.layout=K&amp;&amp;K[0],Ae.manufacturer=J,Ae.name=R,Ae.prerelease=L,Ae.product=H,Ae.ua=w,Ae.version=R&amp;&amp;P,Ae.os=te||{architecture:null,family:null,version:null,toString:function(){return"null"}},Ae.parse=S,Ae.toString=Ve,Ae.version&amp;&amp;F.unshift(P),Ae.name&amp;&amp;F.unshift(R),te&amp;&amp;R&amp;&amp;!(te==String(te).split(" ")[0]&amp;&amp;(te==R.split(" ")[0]||H))&amp;&amp;F.push(H?"("+te+")":"on "+te),F.length&amp;&amp;(Ae.description=F.join(" ")),Ae}var T=S();typeof define=="function"&amp;&amp;typeof define.amd=="object"&amp;&amp;define.amd?(e.platform=T,define(function(){return T})):n&amp;&amp;o?g(T,function(w,k){n[k]=w}):e.platform=T}).call(iF)});var yJ=Qt(pF=&gt;{"use strict";pF.byteLength=pxe;pF.toByteArray=fxe;pF.fromByteArray=vxe;var Pp=[],ld=[],cxe=typeof Uint8Array!="undefined"?Uint8Array:Array,xz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Yb=0,vJ=xz.length;Yb&lt;vJ;++Yb)Pp[Yb]=xz[Yb],ld[xz.charCodeAt(Yb)]=Yb;var Yb,vJ;ld["-".charCodeAt(0)]=62;ld["_".charCodeAt(0)]=63;function bJ(r){var e=r.length;if(e%4&gt;0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&amp;&amp;(t=e);var n=t===e?0:4-t%4;return[t,n]}function pxe(r){var e=bJ(r),t=e[0],n=e[1];return(t+n)*3/4-n}function hxe(r,e,t){return(e+t)*3/4-t}function fxe(r){var e,t=bJ(r),n=t[0],o=t[1],i=new cxe(hxe(r,n,o)),s=0,a=o&gt;0?n-4:n,l;for(l=0;l&lt;a;l+=4)e=ld[r.charCodeAt(l)]&lt;&lt;18|ld[r.charCodeAt(l+1)]&lt;&lt;12|ld[r.charCodeAt(l+2)]&lt;&lt;6|ld[r.charCodeAt(l+3)],i[s++]=e&gt;&gt;16&amp;255,i[s++]=e&gt;&gt;8&amp;255,i[s++]=e&amp;255;return o===2&amp;&amp;(e=ld[r.charCodeAt(l)]&lt;&lt;2|ld[r.charCodeAt(l+1)]&gt;&gt;4,i[s++]=e&amp;255),o===1&amp;&amp;(e=ld[r.charCodeAt(l)]&lt;&lt;10|ld[r.charCodeAt(l+1)]&lt;&lt;4|ld[r.charCodeAt(l+2)]&gt;&gt;2,i[s++]=e&gt;&gt;8&amp;255,i[s++]=e&amp;255),i}function mxe(r){return Pp[r&gt;&gt;18&amp;63]+Pp[r&gt;&gt;12&amp;63]+Pp[r&gt;&gt;6&amp;63]+Pp[r&amp;63]}function gxe(r,e,t){for(var n,o=[],i=e;i&lt;t;i+=3)n=(r[i]&lt;&lt;16&amp;16711680)+(r[i+1]&lt;&lt;8&amp;65280)+(r[i+2]&amp;255),o.push(mxe(n));return o.join("")}function vxe(r){for(var e,t=r.length,n=t%3,o=[],i=16383,s=0,a=t-n;s&lt;a;s+=i)o.push(gxe(r,s,s+i&gt;a?a:s+i));return n===1?(e=r[t-1],o.push(Pp[e&gt;&gt;2]+Pp[e&lt;&lt;4&amp;63]+"==")):n===2&amp;&amp;(e=(r[t-2]&lt;&lt;8)+r[t-1],o.push(Pp[e&gt;&gt;10]+Pp[e&gt;&gt;4&amp;63]+Pp[e&lt;&lt;2&amp;63]+"=")),o.join("")}});var CJ=Qt(wz=&gt;{wz.read=function(r,e,t,n,o){var i,s,a=o*8-n-1,l=(1&lt;&lt;a)-1,u=l&gt;&gt;1,d=-7,c=t?o-1:0,p=t?-1:1,h=r[e+c];for(c+=p,i=h&amp;(1&lt;&lt;-d)-1,h&gt;&gt;=-d,d+=a;d&gt;0;i=i*256+r[e+c],c+=p,d-=8);for(s=i&amp;(1&lt;&lt;-d)-1,i&gt;&gt;=-d,d+=n;d&gt;0;s=s*256+r[e+c],c+=p,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-u}return(h?-1:1)*s*Math.pow(2,i-n)};wz.write=function(r,e,t,n,o,i){var s,a,l,u=i*8-o-1,d=(1&lt;&lt;u)-1,c=d&gt;&gt;1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=e&lt;0||e===0&amp;&amp;1/e&lt;0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))&lt;1&amp;&amp;(s--,l*=2),s+c&gt;=1?e+=p/l:e+=p*Math.pow(2,1-c),e*l&gt;=2&amp;&amp;(s++,l/=2),s+c&gt;=d?(a=0,s=d):s+c&gt;=1?(a=(e*l-1)*Math.pow(2,o),s=s+c):(a=e*Math.pow(2,c-1)*Math.pow(2,o),s=0));o&gt;=8;r[t+h]=a&amp;255,h+=f,a/=256,o-=8);for(s=s&lt;&lt;o|a,u+=o;u&gt;0;r[t+h]=s&amp;255,h+=f,s/=256,u-=8);r[t+h-f]|=m*128}});var mF=Qt(NS=&gt;{"use strict";var Tz=yJ(),FS=CJ(),SJ=typeof Symbol=="function"&amp;&amp;typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;NS.Buffer=je;NS.SlowBuffer=wxe;NS.INSPECT_MAX_BYTES=50;var hF=2147483647;NS.kMaxLength=hF;je.TYPED_ARRAY_SUPPORT=bxe();!je.TYPED_ARRAY_SUPPORT&amp;&amp;typeof console!="undefined"&amp;&amp;typeof console.error=="function"&amp;&amp;console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function bxe(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(je.prototype,"parent",{enumerable:!0,get:function(){if(!!je.isBuffer(this))return this.buffer}});Object.defineProperty(je.prototype,"offset",{enumerable:!0,get:function(){if(!!je.isBuffer(this))return this.byteOffset}});function gf(r){if(r&gt;hF)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,je.prototype),e}function je(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Az(r)}return DJ(r,e,t)}je.poolSize=8192;function DJ(r,e,t){if(typeof r=="string")return Cxe(r,e);if(ArrayBuffer.isView(r))return Sxe(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Ap(r,ArrayBuffer)||r&amp;&amp;Ap(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&amp;&amp;(Ap(r,SharedArrayBuffer)||r&amp;&amp;Ap(r.buffer,SharedArrayBuffer)))return kz(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&amp;&amp;r.valueOf();if(n!=null&amp;&amp;n!==r)return je.from(n,e,t);let o=xxe(r);if(o)return o;if(typeof Symbol!="undefined"&amp;&amp;Symbol.toPrimitive!=null&amp;&amp;typeof r[Symbol.toPrimitive]=="function")return je.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}je.from=function(r,e,t){return DJ(r,e,t)};Object.setPrototypeOf(je.prototype,Uint8Array.prototype);Object.setPrototypeOf(je,Uint8Array);function kJ(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r&lt;0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function yxe(r,e,t){return kJ(r),r&lt;=0?gf(r):e!==void 0?typeof t=="string"?gf(r).fill(e,t):gf(r).fill(e):gf(r)}je.alloc=function(r,e,t){return yxe(r,e,t)};function Az(r){return kJ(r),gf(r&lt;0?0:Iz(r)|0)}je.allocUnsafe=function(r){return Az(r)};je.allocUnsafeSlow=function(r){return Az(r)};function Cxe(r,e){if((typeof e!="string"||e==="")&amp;&amp;(e="utf8"),!je.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=PJ(r,e)|0,n=gf(t),o=n.write(r,e);return o!==t&amp;&amp;(n=n.slice(0,o)),n}function Dz(r){let e=r.length&lt;0?0:Iz(r.length)|0,t=gf(e);for(let n=0;n&lt;e;n+=1)t[n]=r[n]&amp;255;return t}function Sxe(r){if(Ap(r,Uint8Array)){let e=new Uint8Array(r);return kz(e.buffer,e.byteOffset,e.byteLength)}return Dz(r)}function kz(r,e,t){if(e&lt;0||r.byteLength&lt;e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength&lt;e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&amp;&amp;t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,je.prototype),n}function xxe(r){if(je.isBuffer(r)){let e=Iz(r.length)|0,t=gf(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||_z(r.length)?gf(0):Dz(r);if(r.type==="Buffer"&amp;&amp;Array.isArray(r.data))return Dz(r.data)}function Iz(r){if(r&gt;=hF)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hF.toString(16)+" bytes");return r|0}function wxe(r){return+r!=r&amp;&amp;(r=0),je.alloc(+r)}je.isBuffer=function(e){return e!=null&amp;&amp;e._isBuffer===!0&amp;&amp;e!==je.prototype};je.compare=function(e,t){if(Ap(e,Uint8Array)&amp;&amp;(e=je.from(e,e.offset,e.byteLength)),Ap(t,Uint8Array)&amp;&amp;(t=je.from(t,t.offset,t.byteLength)),!je.isBuffer(e)||!je.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,o=t.length;for(let i=0,s=Math.min(n,o);i&lt;s;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n&lt;o?-1:o&lt;n?1:0};je.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};je.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return je.alloc(0);let n;if(t===void 0)for(t=0,n=0;n&lt;e.length;++n)t+=e[n].length;let o=je.allocUnsafe(t),i=0;for(n=0;n&lt;e.length;++n){let s=e[n];if(Ap(s,Uint8Array))i+s.length&gt;o.length?(je.isBuffer(s)||(s=je.from(s)),s.copy(o,i)):Uint8Array.prototype.set.call(o,s,i);else if(je.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function PJ(r,e){if(je.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Ap(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length&gt;2&amp;&amp;arguments[2]===!0;if(!n&amp;&amp;t===0)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Pz(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t&gt;&gt;&gt;1;case"base64":return RJ(r).length;default:if(o)return n?-1:Pz(r).length;e=(""+e).toLowerCase(),o=!0}}je.byteLength=PJ;function Txe(r,e,t){let n=!1;if((e===void 0||e&lt;0)&amp;&amp;(e=0),e&gt;this.length||((t===void 0||t&gt;this.length)&amp;&amp;(t=this.length),t&lt;=0)||(t&gt;&gt;&gt;=0,e&gt;&gt;&gt;=0,t&lt;=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Nxe(this,e,t);case"utf8":case"utf-8":return IJ(this,e,t);case"ascii":return Fxe(this,e,t);case"latin1":case"binary":return Mxe(this,e,t);case"base64":return Exe(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bxe(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}je.prototype._isBuffer=!0;function Xb(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}je.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t&lt;e;t+=2)Xb(this,t,t+1);return this};je.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t&lt;e;t+=4)Xb(this,t,t+3),Xb(this,t+1,t+2);return this};je.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t&lt;e;t+=8)Xb(this,t,t+7),Xb(this,t+1,t+6),Xb(this,t+2,t+5),Xb(this,t+3,t+4);return this};je.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?IJ(this,0,e):Txe.apply(this,arguments)};je.prototype.toLocaleString=je.prototype.toString;je.prototype.equals=function(e){if(!je.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:je.compare(this,e)===0};je.prototype.inspect=function(){let e="",t=NS.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length&gt;t&amp;&amp;(e+=" ... "),"&lt;Buffer "+e+"&gt;"};SJ&amp;&amp;(je.prototype[SJ]=je.prototype.inspect);je.prototype.compare=function(e,t,n,o,i){if(Ap(e,Uint8Array)&amp;&amp;(e=je.from(e,e.offset,e.byteLength)),!je.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&amp;&amp;(t=0),n===void 0&amp;&amp;(n=e?e.length:0),o===void 0&amp;&amp;(o=0),i===void 0&amp;&amp;(i=this.length),t&lt;0||n&gt;e.length||o&lt;0||i&gt;this.length)throw new RangeError("out of range index");if(o&gt;=i&amp;&amp;t&gt;=n)return 0;if(o&gt;=i)return-1;if(t&gt;=n)return 1;if(t&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,o&gt;&gt;&gt;=0,i&gt;&gt;&gt;=0,this===e)return 0;let s=i-o,a=n-t,l=Math.min(s,a),u=this.slice(o,i),d=e.slice(t,n);for(let c=0;c&lt;l;++c)if(u[c]!==d[c]){s=u[c],a=d[c];break}return s&lt;a?-1:a&lt;s?1:0};function AJ(r,e,t,n,o){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t&gt;2147483647?t=2147483647:t&lt;-2147483648&amp;&amp;(t=-2147483648),t=+t,_z(t)&amp;&amp;(t=o?0:r.length-1),t&lt;0&amp;&amp;(t=r.length+t),t&gt;=r.length){if(o)return-1;t=r.length-1}else if(t&lt;0)if(o)t=0;else return-1;if(typeof e=="string"&amp;&amp;(e=je.from(e,n)),je.isBuffer(e))return e.length===0?-1:xJ(r,e,t,n,o);if(typeof e=="number")return e=e&amp;255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):xJ(r,[e],t,n,o);throw new TypeError("val must be string, number or Buffer")}function xJ(r,e,t,n,o){let i=1,s=r.length,a=e.length;if(n!==void 0&amp;&amp;(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length&lt;2||e.length&lt;2)return-1;i=2,s/=2,a/=2,t/=2}function l(d,c){return i===1?d[c]:d.readUInt16BE(c*i)}let u;if(o){let d=-1;for(u=t;u&lt;s;u++)if(l(r,u)===l(e,d===-1?0:u-d)){if(d===-1&amp;&amp;(d=u),u-d+1===a)return d*i}else d!==-1&amp;&amp;(u-=u-d),d=-1}else for(t+a&gt;s&amp;&amp;(t=s-a),u=t;u&gt;=0;u--){let d=!0;for(let c=0;c&lt;a;c++)if(l(r,u+c)!==l(e,c)){d=!1;break}if(d)return u}return-1}je.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};je.prototype.indexOf=function(e,t,n){return AJ(this,e,t,n,!0)};je.prototype.lastIndexOf=function(e,t,n){return AJ(this,e,t,n,!1)};function Dxe(r,e,t,n){t=Number(t)||0;let o=r.length-t;n?(n=Number(n),n&gt;o&amp;&amp;(n=o)):n=o;let i=e.length;n&gt;i/2&amp;&amp;(n=i/2);let s;for(s=0;s&lt;n;++s){let a=parseInt(e.substr(s*2,2),16);if(_z(a))return s;r[t+s]=a}return s}function kxe(r,e,t,n){return fF(Pz(e,r.length-t),r,t,n)}function Pxe(r,e,t,n){return fF(Uxe(e),r,t,n)}function Axe(r,e,t,n){return fF(RJ(e),r,t,n)}function Ixe(r,e,t,n){return fF(zxe(e,r.length-t),r,t,n)}je.prototype.write=function(e,t,n,o){if(t===void 0)o="utf8",n=this.length,t=0;else if(n===void 0&amp;&amp;typeof t=="string")o=t,n=this.length,t=0;else if(isFinite(t))t=t&gt;&gt;&gt;0,isFinite(n)?(n=n&gt;&gt;&gt;0,o===void 0&amp;&amp;(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-t;if((n===void 0||n&gt;i)&amp;&amp;(n=i),e.length&gt;0&amp;&amp;(n&lt;0||t&lt;0)||t&gt;this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let s=!1;for(;;)switch(o){case"hex":return Dxe(this,e,t,n);case"utf8":case"utf-8":return kxe(this,e,t,n);case"ascii":case"latin1":case"binary":return Pxe(this,e,t,n);case"base64":return Axe(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ixe(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};je.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Exe(r,e,t){return e===0&amp;&amp;t===r.length?Tz.fromByteArray(r):Tz.fromByteArray(r.slice(e,t))}function IJ(r,e,t){t=Math.min(r.length,t);let n=[],o=e;for(;o&lt;t;){let i=r[o],s=null,a=i&gt;239?4:i&gt;223?3:i&gt;191?2:1;if(o+a&lt;=t){let l,u,d,c;switch(a){case 1:i&lt;128&amp;&amp;(s=i);break;case 2:l=r[o+1],(l&amp;192)===128&amp;&amp;(c=(i&amp;31)&lt;&lt;6|l&amp;63,c&gt;127&amp;&amp;(s=c));break;case 3:l=r[o+1],u=r[o+2],(l&amp;192)===128&amp;&amp;(u&amp;192)===128&amp;&amp;(c=(i&amp;15)&lt;&lt;12|(l&amp;63)&lt;&lt;6|u&amp;63,c&gt;2047&amp;&amp;(c&lt;55296||c&gt;57343)&amp;&amp;(s=c));break;case 4:l=r[o+1],u=r[o+2],d=r[o+3],(l&amp;192)===128&amp;&amp;(u&amp;192)===128&amp;&amp;(d&amp;192)===128&amp;&amp;(c=(i&amp;15)&lt;&lt;18|(l&amp;63)&lt;&lt;12|(u&amp;63)&lt;&lt;6|d&amp;63,c&gt;65535&amp;&amp;c&lt;1114112&amp;&amp;(s=c))}}s===null?(s=65533,a=1):s&gt;65535&amp;&amp;(s-=65536,n.push(s&gt;&gt;&gt;10&amp;1023|55296),s=56320|s&amp;1023),n.push(s),o+=a}return _xe(n)}var wJ=4096;function _xe(r){let e=r.length;if(e&lt;=wJ)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n&lt;e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=wJ));return t}function Fxe(r,e,t){let n="";t=Math.min(r.length,t);for(let o=e;o&lt;t;++o)n+=String.fromCharCode(r[o]&amp;127);return n}function Mxe(r,e,t){let n="";t=Math.min(r.length,t);for(let o=e;o&lt;t;++o)n+=String.fromCharCode(r[o]);return n}function Nxe(r,e,t){let n=r.length;(!e||e&lt;0)&amp;&amp;(e=0),(!t||t&lt;0||t&gt;n)&amp;&amp;(t=n);let o="";for(let i=e;i&lt;t;++i)o+=Hxe[r[i]];return o}function Bxe(r,e,t){let n=r.slice(e,t),o="";for(let i=0;i&lt;n.length-1;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}je.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e&lt;0?(e+=n,e&lt;0&amp;&amp;(e=0)):e&gt;n&amp;&amp;(e=n),t&lt;0?(t+=n,t&lt;0&amp;&amp;(t=0)):t&gt;n&amp;&amp;(t=n),t&lt;e&amp;&amp;(t=e);let o=this.subarray(e,t);return Object.setPrototypeOf(o,je.prototype),o};function Hs(r,e,t){if(r%1!==0||r&lt;0)throw new RangeError("offset is not uint");if(r+e&gt;t)throw new RangeError("Trying to access beyond buffer length")}je.prototype.readUintLE=je.prototype.readUIntLE=function(e,t,n){e=e&gt;&gt;&gt;0,t=t&gt;&gt;&gt;0,n||Hs(e,t,this.length);let o=this[e],i=1,s=0;for(;++s&lt;t&amp;&amp;(i*=256);)o+=this[e+s]*i;return o};je.prototype.readUintBE=je.prototype.readUIntBE=function(e,t,n){e=e&gt;&gt;&gt;0,t=t&gt;&gt;&gt;0,n||Hs(e,t,this.length);let o=this[e+--t],i=1;for(;t&gt;0&amp;&amp;(i*=256);)o+=this[e+--t]*i;return o};je.prototype.readUint8=je.prototype.readUInt8=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,1,this.length),this[e]};je.prototype.readUint16LE=je.prototype.readUInt16LE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,2,this.length),this[e]|this[e+1]&lt;&lt;8};je.prototype.readUint16BE=je.prototype.readUInt16BE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,2,this.length),this[e]&lt;&lt;8|this[e+1]};je.prototype.readUint32LE=je.prototype.readUInt32LE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),(this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16)+this[e+3]*16777216};je.prototype.readUint32BE=je.prototype.readUInt32BE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),this[e]*16777216+(this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3])};je.prototype.readBigUInt64LE=Eg(function(e){e=e&gt;&gt;&gt;0,MS(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&amp;&amp;vD(e,this.length-8);let o=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(o)+(BigInt(i)&lt;&lt;BigInt(32))});je.prototype.readBigUInt64BE=Eg(function(e){e=e&gt;&gt;&gt;0,MS(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&amp;&amp;vD(e,this.length-8);let o=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(o)&lt;&lt;BigInt(32))+BigInt(i)});je.prototype.readIntLE=function(e,t,n){e=e&gt;&gt;&gt;0,t=t&gt;&gt;&gt;0,n||Hs(e,t,this.length);let o=this[e],i=1,s=0;for(;++s&lt;t&amp;&amp;(i*=256);)o+=this[e+s]*i;return i*=128,o&gt;=i&amp;&amp;(o-=Math.pow(2,8*t)),o};je.prototype.readIntBE=function(e,t,n){e=e&gt;&gt;&gt;0,t=t&gt;&gt;&gt;0,n||Hs(e,t,this.length);let o=t,i=1,s=this[e+--o];for(;o&gt;0&amp;&amp;(i*=256);)s+=this[e+--o]*i;return i*=128,s&gt;=i&amp;&amp;(s-=Math.pow(2,8*t)),s};je.prototype.readInt8=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,1,this.length),this[e]&amp;128?(255-this[e]+1)*-1:this[e]};je.prototype.readInt16LE=function(e,t){e=e&gt;&gt;&gt;0,t||Hs(e,2,this.length);let n=this[e]|this[e+1]&lt;&lt;8;return n&amp;32768?n|4294901760:n};je.prototype.readInt16BE=function(e,t){e=e&gt;&gt;&gt;0,t||Hs(e,2,this.length);let n=this[e+1]|this[e]&lt;&lt;8;return n&amp;32768?n|4294901760:n};je.prototype.readInt32LE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16|this[e+3]&lt;&lt;24};je.prototype.readInt32BE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),this[e]&lt;&lt;24|this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3]};je.prototype.readBigInt64LE=Eg(function(e){e=e&gt;&gt;&gt;0,MS(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&amp;&amp;vD(e,this.length-8);let o=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n&lt;&lt;24);return(BigInt(o)&lt;&lt;BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});je.prototype.readBigInt64BE=Eg(function(e){e=e&gt;&gt;&gt;0,MS(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&amp;&amp;vD(e,this.length-8);let o=(t&lt;&lt;24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(o)&lt;&lt;BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});je.prototype.readFloatLE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),FS.read(this,e,!0,23,4)};je.prototype.readFloatBE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,4,this.length),FS.read(this,e,!1,23,4)};je.prototype.readDoubleLE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,8,this.length),FS.read(this,e,!0,52,8)};je.prototype.readDoubleBE=function(e,t){return e=e&gt;&gt;&gt;0,t||Hs(e,8,this.length),FS.read(this,e,!1,52,8)};function _l(r,e,t,n,o,i){if(!je.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e&gt;o||e&lt;i)throw new RangeError('"value" argument is out of bounds');if(t+n&gt;r.length)throw new RangeError("Index out of range")}je.prototype.writeUintLE=je.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t=t&gt;&gt;&gt;0,n=n&gt;&gt;&gt;0,!o){let a=Math.pow(2,8*n)-1;_l(this,e,t,n,a,0)}let i=1,s=0;for(this[t]=e&amp;255;++s&lt;n&amp;&amp;(i*=256);)this[t+s]=e/i&amp;255;return t+n};je.prototype.writeUintBE=je.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t=t&gt;&gt;&gt;0,n=n&gt;&gt;&gt;0,!o){let a=Math.pow(2,8*n)-1;_l(this,e,t,n,a,0)}let i=n-1,s=1;for(this[t+i]=e&amp;255;--i&gt;=0&amp;&amp;(s*=256);)this[t+i]=e/s&amp;255;return t+n};je.prototype.writeUint8=je.prototype.writeUInt8=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,1,255,0),this[t]=e&amp;255,t+1};je.prototype.writeUint16LE=je.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,2,65535,0),this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8,t+2};je.prototype.writeUint16BE=je.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,2,65535,0),this[t]=e&gt;&gt;&gt;8,this[t+1]=e&amp;255,t+2};je.prototype.writeUint32LE=je.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,4,4294967295,0),this[t+3]=e&gt;&gt;&gt;24,this[t+2]=e&gt;&gt;&gt;16,this[t+1]=e&gt;&gt;&gt;8,this[t]=e&amp;255,t+4};je.prototype.writeUint32BE=je.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,4,4294967295,0),this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=e&amp;255,t+4};function EJ(r,e,t,n,o){BJ(e,n,o,r,t,7);let i=Number(e&amp;BigInt(4294967295));r[t++]=i,i=i&gt;&gt;8,r[t++]=i,i=i&gt;&gt;8,r[t++]=i,i=i&gt;&gt;8,r[t++]=i;let s=Number(e&gt;&gt;BigInt(32)&amp;BigInt(4294967295));return r[t++]=s,s=s&gt;&gt;8,r[t++]=s,s=s&gt;&gt;8,r[t++]=s,s=s&gt;&gt;8,r[t++]=s,t}function _J(r,e,t,n,o){BJ(e,n,o,r,t,7);let i=Number(e&amp;BigInt(4294967295));r[t+7]=i,i=i&gt;&gt;8,r[t+6]=i,i=i&gt;&gt;8,r[t+5]=i,i=i&gt;&gt;8,r[t+4]=i;let s=Number(e&gt;&gt;BigInt(32)&amp;BigInt(4294967295));return r[t+3]=s,s=s&gt;&gt;8,r[t+2]=s,s=s&gt;&gt;8,r[t+1]=s,s=s&gt;&gt;8,r[t]=s,t+8}je.prototype.writeBigUInt64LE=Eg(function(e,t=0){return EJ(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});je.prototype.writeBigUInt64BE=Eg(function(e,t=0){return _J(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});je.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t=t&gt;&gt;&gt;0,!o){let l=Math.pow(2,8*n-1);_l(this,e,t,n,l-1,-l)}let i=0,s=1,a=0;for(this[t]=e&amp;255;++i&lt;n&amp;&amp;(s*=256);)e&lt;0&amp;&amp;a===0&amp;&amp;this[t+i-1]!==0&amp;&amp;(a=1),this[t+i]=(e/s&gt;&gt;0)-a&amp;255;return t+n};je.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t=t&gt;&gt;&gt;0,!o){let l=Math.pow(2,8*n-1);_l(this,e,t,n,l-1,-l)}let i=n-1,s=1,a=0;for(this[t+i]=e&amp;255;--i&gt;=0&amp;&amp;(s*=256);)e&lt;0&amp;&amp;a===0&amp;&amp;this[t+i+1]!==0&amp;&amp;(a=1),this[t+i]=(e/s&gt;&gt;0)-a&amp;255;return t+n};je.prototype.writeInt8=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,1,127,-128),e&lt;0&amp;&amp;(e=255+e+1),this[t]=e&amp;255,t+1};je.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,2,32767,-32768),this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8,t+2};je.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,2,32767,-32768),this[t]=e&gt;&gt;&gt;8,this[t+1]=e&amp;255,t+2};je.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,4,2147483647,-2147483648),this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8,this[t+2]=e&gt;&gt;&gt;16,this[t+3]=e&gt;&gt;&gt;24,t+4};je.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t&gt;&gt;&gt;0,n||_l(this,e,t,4,2147483647,-2147483648),e&lt;0&amp;&amp;(e=4294967295+e+1),this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=e&amp;255,t+4};je.prototype.writeBigInt64LE=Eg(function(e,t=0){return EJ(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});je.prototype.writeBigInt64BE=Eg(function(e,t=0){return _J(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function FJ(r,e,t,n,o,i){if(t+n&gt;r.length)throw new RangeError("Index out of range");if(t&lt;0)throw new RangeError("Index out of range")}function MJ(r,e,t,n,o){return e=+e,t=t&gt;&gt;&gt;0,o||FJ(r,e,t,4,34028234663852886e22,-34028234663852886e22),FS.write(r,e,t,n,23,4),t+4}je.prototype.writeFloatLE=function(e,t,n){return MJ(this,e,t,!0,n)};je.prototype.writeFloatBE=function(e,t,n){return MJ(this,e,t,!1,n)};function NJ(r,e,t,n,o){return e=+e,t=t&gt;&gt;&gt;0,o||FJ(r,e,t,8,17976931348623157e292,-17976931348623157e292),FS.write(r,e,t,n,52,8),t+8}je.prototype.writeDoubleLE=function(e,t,n){return NJ(this,e,t,!0,n)};je.prototype.writeDoubleBE=function(e,t,n){return NJ(this,e,t,!1,n)};je.prototype.copy=function(e,t,n,o){if(!je.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&amp;&amp;o!==0&amp;&amp;(o=this.length),t&gt;=e.length&amp;&amp;(t=e.length),t||(t=0),o&gt;0&amp;&amp;o&lt;n&amp;&amp;(o=n),o===n||e.length===0||this.length===0)return 0;if(t&lt;0)throw new RangeError("targetStart out of bounds");if(n&lt;0||n&gt;=this.length)throw new RangeError("Index out of range");if(o&lt;0)throw new RangeError("sourceEnd out of bounds");o&gt;this.length&amp;&amp;(o=this.length),e.length-t&lt;o-n&amp;&amp;(o=e.length-t+n);let i=o-n;return this===e&amp;&amp;typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),t),i};je.prototype.fill=function(e,t,n,o){if(typeof e=="string"){if(typeof t=="string"?(o=t,t=0,n=this.length):typeof n=="string"&amp;&amp;(o=n,n=this.length),o!==void 0&amp;&amp;typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&amp;&amp;!je.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){let s=e.charCodeAt(0);(o==="utf8"&amp;&amp;s&lt;128||o==="latin1")&amp;&amp;(e=s)}}else typeof e=="number"?e=e&amp;255:typeof e=="boolean"&amp;&amp;(e=Number(e));if(t&lt;0||this.length&lt;t||this.length&lt;n)throw new RangeError("Out of range index");if(n&lt;=t)return this;t=t&gt;&gt;&gt;0,n=n===void 0?this.length:n&gt;&gt;&gt;0,e||(e=0);let i;if(typeof e=="number")for(i=t;i&lt;n;++i)this[i]=e;else{let s=je.isBuffer(e)?e:je.from(e,o),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i&lt;n-t;++i)this[i+t]=s[i%a]}return this};var _S={};function Ez(r,e,t){_S[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Ez("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ez("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Ez("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,o=t;return Number.isInteger(t)&amp;&amp;Math.abs(t)&gt;2**32?o=TJ(String(t)):typeof t=="bigint"&amp;&amp;(o=String(t),(t&gt;BigInt(2)**BigInt(32)||t&lt;-(BigInt(2)**BigInt(32)))&amp;&amp;(o=TJ(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n},RangeError);function TJ(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t&gt;=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Rxe(r,e,t){MS(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&amp;&amp;vD(e,r.length-(t+1))}function BJ(r,e,t,n,o,i){if(r&gt;t||r&lt;e){let s=typeof e=="bigint"?"n":"",a;throw i&gt;3?e===0||e===BigInt(0)?a=`&gt;= 0${s} and &lt; 2${s} ** ${(i+1)*8}${s}`:a=`&gt;= -(2${s} ** ${(i+1)*8-1}${s}) and &lt; 2 ** ${(i+1)*8-1}${s}`:a=`&gt;= ${e}${s} and &lt;= ${t}${s}`,new _S.ERR_OUT_OF_RANGE("value",a,r)}Rxe(n,o,i)}function MS(r,e){if(typeof r!="number")throw new _S.ERR_INVALID_ARG_TYPE(e,"number",r)}function vD(r,e,t){throw Math.floor(r)!==r?(MS(r,t),new _S.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e&lt;0?new _S.ERR_BUFFER_OUT_OF_BOUNDS:new _S.ERR_OUT_OF_RANGE(t||"offset",`&gt;= ${t?1:0} and &lt;= ${e}`,r)}var Lxe=/[^+/0-9A-Za-z-_]/g;function Oxe(r){if(r=r.split("=")[0],r=r.trim().replace(Lxe,""),r.length&lt;2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Pz(r,e){e=e||1/0;let t,n=r.length,o=null,i=[];for(let s=0;s&lt;n;++s){if(t=r.charCodeAt(s),t&gt;55295&amp;&amp;t&lt;57344){if(!o){if(t&gt;56319){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}else if(s+1===n){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}o=t;continue}if(t&lt;56320){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189),o=t;continue}t=(o-55296&lt;&lt;10|t-56320)+65536}else o&amp;&amp;(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);if(o=null,t&lt;128){if((e-=1)&lt;0)break;i.push(t)}else if(t&lt;2048){if((e-=2)&lt;0)break;i.push(t&gt;&gt;6|192,t&amp;63|128)}else if(t&lt;65536){if((e-=3)&lt;0)break;i.push(t&gt;&gt;12|224,t&gt;&gt;6&amp;63|128,t&amp;63|128)}else if(t&lt;1114112){if((e-=4)&lt;0)break;i.push(t&gt;&gt;18|240,t&gt;&gt;12&amp;63|128,t&gt;&gt;6&amp;63|128,t&amp;63|128)}else throw new Error("Invalid code point")}return i}function Uxe(r){let e=[];for(let t=0;t&lt;r.length;++t)e.push(r.charCodeAt(t)&amp;255);return e}function zxe(r,e){let t,n,o,i=[];for(let s=0;s&lt;r.length&amp;&amp;!((e-=2)&lt;0);++s)t=r.charCodeAt(s),n=t&gt;&gt;8,o=t%256,i.push(o),i.push(n);return i}function RJ(r){return Tz.toByteArray(Oxe(r))}function fF(r,e,t,n){let o;for(o=0;o&lt;n&amp;&amp;!(o+t&gt;=e.length||o&gt;=r.length);++o)e[o+t]=r[o];return o}function Ap(r,e){return r instanceof e||r!=null&amp;&amp;r.constructor!=null&amp;&amp;r.constructor.name!=null&amp;&amp;r.constructor.name===e.name}function _z(r){return r!==r}var Hxe=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t&lt;16;++t){let n=t*16;for(let o=0;o&lt;16;++o)e[n+o]=r[t]+r[o]}return e}();function Eg(r){return typeof BigInt=="undefined"?Gxe:r}function Gxe(){throw new Error("BigInt not supported")}});var OJ=Qt((IWe,LJ)=&gt;{LJ.exports=function(r,e,t){e=e||0;for(var n=1;n&lt;=8&amp;&amp;!(r[e]&gt;=Math.pow(2,8-n));n++);if(n&gt;8)throw new Error("Unrepresentable length: "+n+" "+r.toString("hex",e,e+n));if(e+n&gt;r.length)return null;var o,i=r[e]&amp;(1&lt;&lt;8-n)-1;for(o=1;o&lt;n;o++){if(o===7&amp;&amp;i&gt;=Math.pow(2,53-8)&amp;&amp;r[e+7]&gt;0)return{length:n,value:-1};i*=Math.pow(2,8),i+=r[e+o]}return t&amp;&amp;(i-=Math.pow(2,n*7-1)-1),{length:n,value:i}}});var HJ=Qt((EWe,zJ)=&gt;{var UJ=OJ();function Qb(r){this.buffer=r,this.offset=0}Qb.prototype.nextInt16BE=function(){var r=this.buffer.readInt16BE(this.offset);return this.offset+=2,r};Qb.prototype.nextUInt8=function(){var r=this.buffer.readUInt8(this.offset);return this.offset+=1,r};Qb.prototype.nextUIntV=function(){var r=UJ(this.buffer,this.offset);return this.offset+=r.length,r.value};Qb.prototype.nextIntV=function(){var r=UJ(this.buffer,this.offset,!0);return this.offset+=r.length,r.value};Qb.prototype.nextBuffer=function(r){var e=r?this.buffer.slice(this.offset,this.offset+r):this.buffer.slice(this.offset);return this.offset+=r||this.length,e};Object.defineProperty(Qb.prototype,"length",{get:function(){return this.buffer.length-this.offset}});zJ.exports=Qb});var Fz=Qt((_We,GJ)=&gt;{var Wxe=HJ(),$xe=1,Vxe=3,jxe=2;GJ.exports=function(r){var e={},t=new Wxe(r);e.trackNumber=t.nextUIntV(),e.timecode=t.nextInt16BE();var n=t.nextUInt8();e.invisible=!!(n&amp;8),e.keyframe=!!(n&amp;128),e.discardable=!!(n&amp;1);var o=(n&amp;6)&gt;&gt;1;return e.frames=Kxe(t,o),e};function Kxe(r,e){if(!e)return[r.nextBuffer()];var t,n,o=[],i=r.nextUInt8()+1;if(e===jxe){if(r.length%i!==0)throw new Error("Fixed-Size Lacing Error");for(n=r.length/i,t=0;t&lt;i;t++)o.push(r.nextBuffer(n));return o}var s=[];if(e===$xe)for(t=0;t&lt;i-1;t++){var a;n=0;do a=r.nextUInt8(),n+=a;while(a===255);s.push(n)}else if(e===Vxe)for(n=r.nextUIntV(),s.push(n),t=1;t&lt;i-1;t++)n+=r.nextIntV(),s.push(n);for(t=0;t&lt;i-1;t++)o.push(r.nextBuffer(s[t]));return o.push(r.nextBuffer()),o}});var $J=Qt((FWe,WJ)=&gt;{var bD=1e3,yD=bD*60,CD=yD*60,SD=CD*24,qxe=SD*365.25;WJ.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&amp;&amp;r.length&gt;0)return Yxe(r);if(t==="number"&amp;&amp;isNaN(r)===!1)return e.long?Qxe(r):Xxe(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Yxe(r){if(r=String(r),!(r.length&gt;100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*qxe;case"days":case"day":case"d":return t*SD;case"hours":case"hour":case"hrs":case"hr":case"h":return t*CD;case"minutes":case"minute":case"mins":case"min":case"m":return t*yD;case"seconds":case"second":case"secs":case"sec":case"s":return t*bD;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Xxe(r){return r&gt;=SD?Math.round(r/SD)+"d":r&gt;=CD?Math.round(r/CD)+"h":r&gt;=yD?Math.round(r/yD)+"m":r&gt;=bD?Math.round(r/bD)+"s":r+"ms"}function Qxe(r){return gF(r,SD,"day")||gF(r,CD,"hour")||gF(r,yD,"minute")||gF(r,bD,"second")||r+" ms"}function gF(r,e,t){if(!(r&lt;e))return r&lt;e*1.5?Math.floor(r/e)+" "+t:Math.ceil(r/e)+" "+t+"s"}});var jJ=Qt((xn,VJ)=&gt;{xn=VJ.exports=Mz.debug=Mz.default=Mz;xn.coerce=nwe;xn.disable=twe;xn.enable=ewe;xn.enabled=rwe;xn.humanize=$J();xn.instances=[];xn.names=[];xn.skips=[];xn.formatters={};function Jxe(r){var e=0,t;for(t in r)e=(e&lt;&lt;5)-e+r.charCodeAt(t),e|=0;return xn.colors[Math.abs(e)%xn.colors.length]}function Mz(r){var e;function t(){if(!!t.enabled){var n=t,o=+new Date,i=o-(e||o);n.diff=i,n.prev=e,n.curr=o,e=o;for(var s=new Array(arguments.length),a=0;a&lt;s.length;a++)s[a]=arguments[a];s[0]=xn.coerce(s[0]),typeof s[0]!="string"&amp;&amp;s.unshift("%O");var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(d,c){if(d==="%%")return d;l++;var p=xn.formatters[c];if(typeof p=="function"){var h=s[l];d=p.call(n,h),s.splice(l,1),l--}return d}),xn.formatArgs.call(n,s);var u=t.log||xn.log||console.log.bind(console);u.apply(n,s)}}return t.namespace=r,t.enabled=xn.enabled(r),t.useColors=xn.useColors(),t.color=Jxe(r),t.destroy=Zxe,typeof xn.init=="function"&amp;&amp;xn.init(t),xn.instances.push(t),t}function Zxe(){var r=xn.instances.indexOf(this);return r!==-1?(xn.instances.splice(r,1),!0):!1}function ewe(r){xn.save(r),xn.names=[],xn.skips=[];var e,t=(typeof r=="string"?r:"").split(/[\s,]+/),n=t.length;for(e=0;e&lt;n;e++)!t[e]||(r=t[e].replace(/\*/g,".*?"),r[0]==="-"?xn.skips.push(new RegExp("^"+r.substr(1)+"$")):xn.names.push(new RegExp("^"+r+"$")));for(e=0;e&lt;xn.instances.length;e++){var o=xn.instances[e];o.enabled=xn.enabled(o.namespace)}}function twe(){xn.enable("")}function rwe(r){if(r[r.length-1]==="*")return!0;var e,t;for(e=0,t=xn.skips.length;e&lt;t;e++)if(xn.skips[e].test(r))return!1;for(e=0,t=xn.names.length;e&lt;t;e++)if(xn.names[e].test(r))return!0;return!1}function nwe(r){return r instanceof Error?r.stack||r.message:r}});var Nz=Qt((nl,qJ)=&gt;{nl=qJ.exports=jJ();nl.log=swe;nl.formatArgs=iwe;nl.save=awe;nl.load=KJ;nl.useColors=owe;nl.storage=typeof chrome!="undefined"&amp;&amp;typeof chrome.storage!="undefined"?chrome.storage.local:lwe();nl.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function owe(){return typeof window!="undefined"&amp;&amp;window.process&amp;&amp;window.process.type==="renderer"?!0:typeof navigator!="undefined"&amp;&amp;navigator.userAgent&amp;&amp;navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&amp;&amp;document.documentElement&amp;&amp;document.documentElement.style&amp;&amp;document.documentElement.style.WebkitAppearance||typeof window!="undefined"&amp;&amp;window.console&amp;&amp;(window.console.firebug||window.console.exception&amp;&amp;window.console.table)||typeof navigator!="undefined"&amp;&amp;navigator.userAgent&amp;&amp;navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&amp;&amp;parseInt(RegExp.$1,10)&gt;=31||typeof navigator!="undefined"&amp;&amp;navigator.userAgent&amp;&amp;navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}nl.formatters.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function iwe(r){var e=this.useColors;if(r[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+r[0]+(e?"%c ":" ")+"+"+nl.humanize(this.diff),!!e){var t="color: "+this.color;r.splice(1,0,t,"color: inherit");var n=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&amp;&amp;(n++,i==="%c"&amp;&amp;(o=n))}),r.splice(o,0,t)}}function swe(){return typeof console=="object"&amp;&amp;console.log&amp;&amp;Function.prototype.apply.call(console.log,console,arguments)}function awe(r){try{r==null?nl.storage.removeItem("debug"):nl.storage.debug=r}catch(e){}}function KJ(){var r;try{r=nl.storage.debug}catch(e){}return!r&amp;&amp;typeof process!="undefined"&amp;&amp;"env"in process&amp;&amp;(r=process.env.DEBUG),r}nl.enable(KJ());function lwe(){try{return window.localStorage}catch(r){}}});var P5=Qt(HS=&gt;{"use strict";Object.defineProperty(HS,"__esModule",{value:!0});var US=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Ip=[],ud=[],uwe=typeof Uint8Array!="undefined"?Uint8Array:Array,d5=!1;function LZ(){d5=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e&lt;t;++e)Ip[e]=r[e],ud[r.charCodeAt(e)]=e;ud["-".charCodeAt(0)]=62,ud["_".charCodeAt(0)]=63}function dwe(r){d5||LZ();var e,t,n,o,i,s,a=r.length;if(a%4&gt;0)throw new Error("Invalid string. Length must be a multiple of 4");i=r[a-2]==="="?2:r[a-1]==="="?1:0,s=new uwe(a*3/4-i),n=i&gt;0?a-4:a;var l=0;for(e=0,t=0;e&lt;n;e+=4,t+=3)o=ud[r.charCodeAt(e)]&lt;&lt;18|ud[r.charCodeAt(e+1)]&lt;&lt;12|ud[r.charCodeAt(e+2)]&lt;&lt;6|ud[r.charCodeAt(e+3)],s[l++]=o&gt;&gt;16&amp;255,s[l++]=o&gt;&gt;8&amp;255,s[l++]=o&amp;255;return i===2?(o=ud[r.charCodeAt(e)]&lt;&lt;2|ud[r.charCodeAt(e+1)]&gt;&gt;4,s[l++]=o&amp;255):i===1&amp;&amp;(o=ud[r.charCodeAt(e)]&lt;&lt;10|ud[r.charCodeAt(e+1)]&lt;&lt;4|ud[r.charCodeAt(e+2)]&gt;&gt;2,s[l++]=o&gt;&gt;8&amp;255,s[l++]=o&amp;255),s}function cwe(r){return Ip[r&gt;&gt;18&amp;63]+Ip[r&gt;&gt;12&amp;63]+Ip[r&gt;&gt;6&amp;63]+Ip[r&amp;63]}function pwe(r,e,t){for(var n,o=[],i=e;i&lt;t;i+=3)n=(r[i]&lt;&lt;16)+(r[i+1]&lt;&lt;8)+r[i+2],o.push(cwe(n));return o.join("")}function YJ(r){d5||LZ();for(var e,t=r.length,n=t%3,o="",i=[],s=16383,a=0,l=t-n;a&lt;l;a+=s)i.push(pwe(r,a,a+s&gt;l?l:a+s));return n===1?(e=r[t-1],o+=Ip[e&gt;&gt;2],o+=Ip[e&lt;&lt;4&amp;63],o+="=="):n===2&amp;&amp;(e=(r[t-2]&lt;&lt;8)+r[t-1],o+=Ip[e&gt;&gt;10],o+=Ip[e&gt;&gt;4&amp;63],o+=Ip[e&lt;&lt;2&amp;63],o+="="),i.push(o),i.join("")}function LF(r,e,t,n,o){var i,s,a=o*8-n-1,l=(1&lt;&lt;a)-1,u=l&gt;&gt;1,d=-7,c=t?o-1:0,p=t?-1:1,h=r[e+c];for(c+=p,i=h&amp;(1&lt;&lt;-d)-1,h&gt;&gt;=-d,d+=a;d&gt;0;i=i*256+r[e+c],c+=p,d-=8);for(s=i&amp;(1&lt;&lt;-d)-1,i&gt;&gt;=-d,d+=n;d&gt;0;s=s*256+r[e+c],c+=p,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-u}return(h?-1:1)*s*Math.pow(2,i-n)}function OZ(r,e,t,n,o,i){var s,a,l,u=i*8-o-1,d=(1&lt;&lt;u)-1,c=d&gt;&gt;1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=e&lt;0||e===0&amp;&amp;1/e&lt;0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))&lt;1&amp;&amp;(s--,l*=2),s+c&gt;=1?e+=p/l:e+=p*Math.pow(2,1-c),e*l&gt;=2&amp;&amp;(s++,l/=2),s+c&gt;=d?(a=0,s=d):s+c&gt;=1?(a=(e*l-1)*Math.pow(2,o),s=s+c):(a=e*Math.pow(2,c-1)*Math.pow(2,o),s=0));o&gt;=8;r[t+h]=a&amp;255,h+=f,a/=256,o-=8);for(s=s&lt;&lt;o|a,u+=o;u&gt;0;r[t+h]=s&amp;255,h+=f,s/=256,u-=8);r[t+h-f]|=m*128}var hwe={}.toString,UZ=Array.isArray||function(r){return hwe.call(r)=="[object Array]"},fwe=50;Ye.TYPED_ARRAY_SUPPORT=US.TYPED_ARRAY_SUPPORT!==void 0?US.TYPED_ARRAY_SUPPORT:!0;function Qz(){return Ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function bf(r,e){if(Qz()&lt;e)throw new RangeError("Invalid typed array length");return Ye.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Ye.prototype):(r===null&amp;&amp;(r=new Ye(e)),r.length=e),r}function Ye(r,e,t){if(!Ye.TYPED_ARRAY_SUPPORT&amp;&amp;!(this instanceof Ye))return new Ye(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return c5(this,r)}return zZ(this,r,e,t)}Ye.poolSize=8192;Ye._augment=function(r){return r.__proto__=Ye.prototype,r};function zZ(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&amp;&amp;e instanceof ArrayBuffer?vwe(r,e,t,n):typeof e=="string"?gwe(r,e,t):bwe(r,e)}Ye.from=function(r,e,t){return zZ(null,r,e,t)};Ye.TYPED_ARRAY_SUPPORT&amp;&amp;(Ye.prototype.__proto__=Uint8Array.prototype,Ye.__proto__=Uint8Array);function HZ(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r&lt;0)throw new RangeError('"size" argument must not be negative')}function mwe(r,e,t,n){return HZ(e),e&lt;=0?bf(r,e):t!==void 0?typeof n=="string"?bf(r,e).fill(t,n):bf(r,e).fill(t):bf(r,e)}Ye.alloc=function(r,e,t){return mwe(null,r,e,t)};function c5(r,e){if(HZ(e),r=bf(r,e&lt;0?0:p5(e)|0),!Ye.TYPED_ARRAY_SUPPORT)for(var t=0;t&lt;e;++t)r[t]=0;return r}Ye.allocUnsafe=function(r){return c5(null,r)};Ye.allocUnsafeSlow=function(r){return c5(null,r)};function gwe(r,e,t){if((typeof t!="string"||t==="")&amp;&amp;(t="utf8"),!Ye.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=GZ(e,t)|0;r=bf(r,n);var o=r.write(e,t);return o!==n&amp;&amp;(r=r.slice(0,o)),r}function Jz(r,e){var t=e.length&lt;0?0:p5(e.length)|0;r=bf(r,t);for(var n=0;n&lt;t;n+=1)r[n]=e[n]&amp;255;return r}function vwe(r,e,t,n){if(e.byteLength,t&lt;0||e.byteLength&lt;t)throw new RangeError("'offset' is out of bounds");if(e.byteLength&lt;t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&amp;&amp;n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),Ye.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=Ye.prototype):r=Jz(r,e),r}function bwe(r,e){if(Ep(e)){var t=p5(e.length)|0;return r=bf(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer!="undefined"&amp;&amp;e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Lwe(e.length)?bf(r,0):Jz(r,e);if(e.type==="Buffer"&amp;&amp;UZ(e.data))return Jz(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p5(r){if(r&gt;=Qz())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qz().toString(16)+" bytes");return r|0}Ye.isBuffer=HF;function Ep(r){return!!(r!=null&amp;&amp;r._isBuffer)}Ye.compare=function(e,t){if(!Ep(e)||!Ep(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,s=Math.min(n,o);i&lt;s;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n&lt;o?-1:o&lt;n?1:0};Ye.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Ye.concat=function(e,t){if(!UZ(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Ye.alloc(0);var n;if(t===void 0)for(t=0,n=0;n&lt;e.length;++n)t+=e[n].length;var o=Ye.allocUnsafe(t),i=0;for(n=0;n&lt;e.length;++n){var s=e[n];if(!Ep(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(o,i),i+=s.length}return o};function GZ(r,e){if(Ep(r))return r.length;if(typeof ArrayBuffer!="undefined"&amp;&amp;typeof ArrayBuffer.isView=="function"&amp;&amp;(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&amp;&amp;(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return EF(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t&gt;&gt;&gt;1;case"base64":return YZ(r).length;default:if(n)return EF(r).length;e=(""+e).toLowerCase(),n=!0}}Ye.byteLength=GZ;function ywe(r,e,t){var n=!1;if((e===void 0||e&lt;0)&amp;&amp;(e=0),e&gt;this.length||((t===void 0||t&gt;this.length)&amp;&amp;(t=this.length),t&lt;=0)||(t&gt;&gt;&gt;=0,e&gt;&gt;&gt;=0,t&lt;=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Iwe(this,e,t);case"utf8":case"utf-8":return VZ(this,e,t);case"ascii":return Pwe(this,e,t);case"latin1":case"binary":return Awe(this,e,t);case"base64":return Dwe(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ewe(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}Ye.prototype._isBuffer=!0;function Jb(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}Ye.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t&lt;e;t+=2)Jb(this,t,t+1);return this};Ye.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t&lt;e;t+=4)Jb(this,t,t+3),Jb(this,t+1,t+2);return this};Ye.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t&lt;e;t+=8)Jb(this,t,t+7),Jb(this,t+1,t+6),Jb(this,t+2,t+5),Jb(this,t+3,t+4);return this};Ye.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?VZ(this,0,e):ywe.apply(this,arguments)};Ye.prototype.equals=function(e){if(!Ep(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Ye.compare(this,e)===0};Ye.prototype.inspect=function(){var e="",t=fwe;return this.length&gt;0&amp;&amp;(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length&gt;t&amp;&amp;(e+=" ... ")),"&lt;Buffer "+e+"&gt;"};Ye.prototype.compare=function(e,t,n,o,i){if(!Ep(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&amp;&amp;(t=0),n===void 0&amp;&amp;(n=e?e.length:0),o===void 0&amp;&amp;(o=0),i===void 0&amp;&amp;(i=this.length),t&lt;0||n&gt;e.length||o&lt;0||i&gt;this.length)throw new RangeError("out of range index");if(o&gt;=i&amp;&amp;t&gt;=n)return 0;if(o&gt;=i)return-1;if(t&gt;=n)return 1;if(t&gt;&gt;&gt;=0,n&gt;&gt;&gt;=0,o&gt;&gt;&gt;=0,i&gt;&gt;&gt;=0,this===e)return 0;for(var s=i-o,a=n-t,l=Math.min(s,a),u=this.slice(o,i),d=e.slice(t,n),c=0;c&lt;l;++c)if(u[c]!==d[c]){s=u[c],a=d[c];break}return s&lt;a?-1:a&lt;s?1:0};function WZ(r,e,t,n,o){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t&gt;2147483647?t=2147483647:t&lt;-2147483648&amp;&amp;(t=-2147483648),t=+t,isNaN(t)&amp;&amp;(t=o?0:r.length-1),t&lt;0&amp;&amp;(t=r.length+t),t&gt;=r.length){if(o)return-1;t=r.length-1}else if(t&lt;0)if(o)t=0;else return-1;if(typeof e=="string"&amp;&amp;(e=Ye.from(e,n)),Ep(e))return e.length===0?-1:XJ(r,e,t,n,o);if(typeof e=="number")return e=e&amp;255,Ye.TYPED_ARRAY_SUPPORT&amp;&amp;typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):XJ(r,[e],t,n,o);throw new TypeError("val must be string, number or Buffer")}function XJ(r,e,t,n,o){var i=1,s=r.length,a=e.length;if(n!==void 0&amp;&amp;(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length&lt;2||e.length&lt;2)return-1;i=2,s/=2,a/=2,t/=2}function l(h,f){return i===1?h[f]:h.readUInt16BE(f*i)}var u;if(o){var d=-1;for(u=t;u&lt;s;u++)if(l(r,u)===l(e,d===-1?0:u-d)){if(d===-1&amp;&amp;(d=u),u-d+1===a)return d*i}else d!==-1&amp;&amp;(u-=u-d),d=-1}else for(t+a&gt;s&amp;&amp;(t=s-a),u=t;u&gt;=0;u--){for(var c=!0,p=0;p&lt;a;p++)if(l(r,u+p)!==l(e,p)){c=!1;break}if(c)return u}return-1}Ye.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};Ye.prototype.indexOf=function(e,t,n){return WZ(this,e,t,n,!0)};Ye.prototype.lastIndexOf=function(e,t,n){return WZ(this,e,t,n,!1)};function Cwe(r,e,t,n){t=Number(t)||0;var o=r.length-t;n?(n=Number(n),n&gt;o&amp;&amp;(n=o)):n=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n&gt;i/2&amp;&amp;(n=i/2);for(var s=0;s&lt;n;++s){var a=parseInt(e.substr(s*2,2),16);if(isNaN(a))return s;r[t+s]=a}return s}function Swe(r,e,t,n){return zF(EF(e,r.length-t),r,t,n)}function $Z(r,e,t,n){return zF(Bwe(e),r,t,n)}function xwe(r,e,t,n){return $Z(r,e,t,n)}function wwe(r,e,t,n){return zF(YZ(e),r,t,n)}function Twe(r,e,t,n){return zF(Rwe(e,r.length-t),r,t,n)}Ye.prototype.write=function(e,t,n,o){if(t===void 0)o="utf8",n=this.length,t=0;else if(n===void 0&amp;&amp;typeof t=="string")o=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,o===void 0&amp;&amp;(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-t;if((n===void 0||n&gt;i)&amp;&amp;(n=i),e.length&gt;0&amp;&amp;(n&lt;0||t&lt;0)||t&gt;this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return Cwe(this,e,t,n);case"utf8":case"utf-8":return Swe(this,e,t,n);case"ascii":return $Z(this,e,t,n);case"latin1":case"binary":return xwe(this,e,t,n);case"base64":return wwe(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Twe(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};Ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Dwe(r,e,t){return e===0&amp;&amp;t===r.length?YJ(r):YJ(r.slice(e,t))}function VZ(r,e,t){t=Math.min(r.length,t);for(var n=[],o=e;o&lt;t;){var i=r[o],s=null,a=i&gt;239?4:i&gt;223?3:i&gt;191?2:1;if(o+a&lt;=t){var l,u,d,c;switch(a){case 1:i&lt;128&amp;&amp;(s=i);break;case 2:l=r[o+1],(l&amp;192)===128&amp;&amp;(c=(i&amp;31)&lt;&lt;6|l&amp;63,c&gt;127&amp;&amp;(s=c));break;case 3:l=r[o+1],u=r[o+2],(l&amp;192)===128&amp;&amp;(u&amp;192)===128&amp;&amp;(c=(i&amp;15)&lt;&lt;12|(l&amp;63)&lt;&lt;6|u&amp;63,c&gt;2047&amp;&amp;(c&lt;55296||c&gt;57343)&amp;&amp;(s=c));break;case 4:l=r[o+1],u=r[o+2],d=r[o+3],(l&amp;192)===128&amp;&amp;(u&amp;192)===128&amp;&amp;(d&amp;192)===128&amp;&amp;(c=(i&amp;15)&lt;&lt;18|(l&amp;63)&lt;&lt;12|(u&amp;63)&lt;&lt;6|d&amp;63,c&gt;65535&amp;&amp;c&lt;1114112&amp;&amp;(s=c))}}s===null?(s=65533,a=1):s&gt;65535&amp;&amp;(s-=65536,n.push(s&gt;&gt;&gt;10&amp;1023|55296),s=56320|s&amp;1023),n.push(s),o+=a}return kwe(n)}var QJ=4096;function kwe(r){var e=r.length;if(e&lt;=QJ)return String.fromCharCode.apply(String,r);for(var t="",n=0;n&lt;e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=QJ));return t}function Pwe(r,e,t){var n="";t=Math.min(r.length,t);for(var o=e;o&lt;t;++o)n+=String.fromCharCode(r[o]&amp;127);return n}function Awe(r,e,t){var n="";t=Math.min(r.length,t);for(var o=e;o&lt;t;++o)n+=String.fromCharCode(r[o]);return n}function Iwe(r,e,t){var n=r.length;(!e||e&lt;0)&amp;&amp;(e=0),(!t||t&lt;0||t&gt;n)&amp;&amp;(t=n);for(var o="",i=e;i&lt;t;++i)o+=Nwe(r[i]);return o}function Ewe(r,e,t){for(var n=r.slice(e,t),o="",i=0;i&lt;n.length;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}Ye.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e&lt;0?(e+=n,e&lt;0&amp;&amp;(e=0)):e&gt;n&amp;&amp;(e=n),t&lt;0?(t+=n,t&lt;0&amp;&amp;(t=0)):t&gt;n&amp;&amp;(t=n),t&lt;e&amp;&amp;(t=e);var o;if(Ye.TYPED_ARRAY_SUPPORT)o=this.subarray(e,t),o.__proto__=Ye.prototype;else{var i=t-e;o=new Ye(i,void 0);for(var s=0;s&lt;i;++s)o[s]=this[s+e]}return o};function Gs(r,e,t){if(r%1!==0||r&lt;0)throw new RangeError("offset is not uint");if(r+e&gt;t)throw new RangeError("Trying to access beyond buffer length")}Ye.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||Gs(e,t,this.length);for(var o=this[e],i=1,s=0;++s&lt;t&amp;&amp;(i*=256);)o+=this[e+s]*i;return o};Ye.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||Gs(e,t,this.length);for(var o=this[e+--t],i=1;t&gt;0&amp;&amp;(i*=256);)o+=this[e+--t]*i;return o};Ye.prototype.readUInt8=function(e,t){return t||Gs(e,1,this.length),this[e]};Ye.prototype.readUInt16LE=function(e,t){return t||Gs(e,2,this.length),this[e]|this[e+1]&lt;&lt;8};Ye.prototype.readUInt16BE=function(e,t){return t||Gs(e,2,this.length),this[e]&lt;&lt;8|this[e+1]};Ye.prototype.readUInt32LE=function(e,t){return t||Gs(e,4,this.length),(this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16)+this[e+3]*16777216};Ye.prototype.readUInt32BE=function(e,t){return t||Gs(e,4,this.length),this[e]*16777216+(this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3])};Ye.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||Gs(e,t,this.length);for(var o=this[e],i=1,s=0;++s&lt;t&amp;&amp;(i*=256);)o+=this[e+s]*i;return i*=128,o&gt;=i&amp;&amp;(o-=Math.pow(2,8*t)),o};Ye.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||Gs(e,t,this.length);for(var o=t,i=1,s=this[e+--o];o&gt;0&amp;&amp;(i*=256);)s+=this[e+--o]*i;return i*=128,s&gt;=i&amp;&amp;(s-=Math.pow(2,8*t)),s};Ye.prototype.readInt8=function(e,t){return t||Gs(e,1,this.length),this[e]&amp;128?(255-this[e]+1)*-1:this[e]};Ye.prototype.readInt16LE=function(e,t){t||Gs(e,2,this.length);var n=this[e]|this[e+1]&lt;&lt;8;return n&amp;32768?n|4294901760:n};Ye.prototype.readInt16BE=function(e,t){t||Gs(e,2,this.length);var n=this[e+1]|this[e]&lt;&lt;8;return n&amp;32768?n|4294901760:n};Ye.prototype.readInt32LE=function(e,t){return t||Gs(e,4,this.length),this[e]|this[e+1]&lt;&lt;8|this[e+2]&lt;&lt;16|this[e+3]&lt;&lt;24};Ye.prototype.readInt32BE=function(e,t){return t||Gs(e,4,this.length),this[e]&lt;&lt;24|this[e+1]&lt;&lt;16|this[e+2]&lt;&lt;8|this[e+3]};Ye.prototype.readFloatLE=function(e,t){return t||Gs(e,4,this.length),LF(this,e,!0,23,4)};Ye.prototype.readFloatBE=function(e,t){return t||Gs(e,4,this.length),LF(this,e,!1,23,4)};Ye.prototype.readDoubleLE=function(e,t){return t||Gs(e,8,this.length),LF(this,e,!0,52,8)};Ye.prototype.readDoubleBE=function(e,t){return t||Gs(e,8,this.length),LF(this,e,!1,52,8)};function Fl(r,e,t,n,o,i){if(!Ep(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e&gt;o||e&lt;i)throw new RangeError('"value" argument is out of bounds');if(t+n&gt;r.length)throw new RangeError("Index out of range")}Ye.prototype.writeUIntLE=function(e,t,n,o){if(e=+e,t=t|0,n=n|0,!o){var i=Math.pow(2,8*n)-1;Fl(this,e,t,n,i,0)}var s=1,a=0;for(this[t]=e&amp;255;++a&lt;n&amp;&amp;(s*=256);)this[t+a]=e/s&amp;255;return t+n};Ye.prototype.writeUIntBE=function(e,t,n,o){if(e=+e,t=t|0,n=n|0,!o){var i=Math.pow(2,8*n)-1;Fl(this,e,t,n,i,0)}var s=n-1,a=1;for(this[t+s]=e&amp;255;--s&gt;=0&amp;&amp;(a*=256);)this[t+s]=e/a&amp;255;return t+n};Ye.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,1,255,0),Ye.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&amp;255,t+1};function OF(r,e,t,n){e&lt;0&amp;&amp;(e=65535+e+1);for(var o=0,i=Math.min(r.length-t,2);o&lt;i;++o)r[t+o]=(e&amp;255&lt;&lt;8*(n?o:1-o))&gt;&gt;&gt;(n?o:1-o)*8}Ye.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,2,65535,0),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8):OF(this,e,t,!0),t+2};Ye.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,2,65535,0),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;8,this[t+1]=e&amp;255):OF(this,e,t,!1),t+2};function UF(r,e,t,n){e&lt;0&amp;&amp;(e=4294967295+e+1);for(var o=0,i=Math.min(r.length-t,4);o&lt;i;++o)r[t+o]=e&gt;&gt;&gt;(n?o:3-o)*8&amp;255}Ye.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,4,4294967295,0),Ye.TYPED_ARRAY_SUPPORT?(this[t+3]=e&gt;&gt;&gt;24,this[t+2]=e&gt;&gt;&gt;16,this[t+1]=e&gt;&gt;&gt;8,this[t]=e&amp;255):UF(this,e,t,!0),t+4};Ye.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,4,4294967295,0),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=e&amp;255):UF(this,e,t,!1),t+4};Ye.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t=t|0,!o){var i=Math.pow(2,8*n-1);Fl(this,e,t,n,i-1,-i)}var s=0,a=1,l=0;for(this[t]=e&amp;255;++s&lt;n&amp;&amp;(a*=256);)e&lt;0&amp;&amp;l===0&amp;&amp;this[t+s-1]!==0&amp;&amp;(l=1),this[t+s]=(e/a&gt;&gt;0)-l&amp;255;return t+n};Ye.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t=t|0,!o){var i=Math.pow(2,8*n-1);Fl(this,e,t,n,i-1,-i)}var s=n-1,a=1,l=0;for(this[t+s]=e&amp;255;--s&gt;=0&amp;&amp;(a*=256);)e&lt;0&amp;&amp;l===0&amp;&amp;this[t+s+1]!==0&amp;&amp;(l=1),this[t+s]=(e/a&gt;&gt;0)-l&amp;255;return t+n};Ye.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,1,127,-128),Ye.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e&lt;0&amp;&amp;(e=255+e+1),this[t]=e&amp;255,t+1};Ye.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,2,32767,-32768),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8):OF(this,e,t,!0),t+2};Ye.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,2,32767,-32768),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;8,this[t+1]=e&amp;255):OF(this,e,t,!1),t+2};Ye.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,4,2147483647,-2147483648),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&amp;255,this[t+1]=e&gt;&gt;&gt;8,this[t+2]=e&gt;&gt;&gt;16,this[t+3]=e&gt;&gt;&gt;24):UF(this,e,t,!0),t+4};Ye.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||Fl(this,e,t,4,2147483647,-2147483648),e&lt;0&amp;&amp;(e=4294967295+e+1),Ye.TYPED_ARRAY_SUPPORT?(this[t]=e&gt;&gt;&gt;24,this[t+1]=e&gt;&gt;&gt;16,this[t+2]=e&gt;&gt;&gt;8,this[t+3]=e&amp;255):UF(this,e,t,!1),t+4};function jZ(r,e,t,n,o,i){if(t+n&gt;r.length)throw new RangeError("Index out of range");if(t&lt;0)throw new RangeError("Index out of range")}function KZ(r,e,t,n,o){return o||jZ(r,e,t,4,34028234663852886e22,-34028234663852886e22),OZ(r,e,t,n,23,4),t+4}Ye.prototype.writeFloatLE=function(e,t,n){return KZ(this,e,t,!0,n)};Ye.prototype.writeFloatBE=function(e,t,n){return KZ(this,e,t,!1,n)};function qZ(r,e,t,n,o){return o||jZ(r,e,t,8,17976931348623157e292,-17976931348623157e292),OZ(r,e,t,n,52,8),t+8}Ye.prototype.writeDoubleLE=function(e,t,n){return qZ(this,e,t,!0,n)};Ye.prototype.writeDoubleBE=function(e,t,n){return qZ(this,e,t,!1,n)};Ye.prototype.copy=function(e,t,n,o){if(n||(n=0),!o&amp;&amp;o!==0&amp;&amp;(o=this.length),t&gt;=e.length&amp;&amp;(t=e.length),t||(t=0),o&gt;0&amp;&amp;o&lt;n&amp;&amp;(o=n),o===n||e.length===0||this.length===0)return 0;if(t&lt;0)throw new RangeError("targetStart out of bounds");if(n&lt;0||n&gt;=this.length)throw new RangeError("sourceStart out of bounds");if(o&lt;0)throw new RangeError("sourceEnd out of bounds");o&gt;this.length&amp;&amp;(o=this.length),e.length-t&lt;o-n&amp;&amp;(o=e.length-t+n);var i=o-n,s;if(this===e&amp;&amp;n&lt;t&amp;&amp;t&lt;o)for(s=i-1;s&gt;=0;--s)e[s+t]=this[s+n];else if(i&lt;1e3||!Ye.TYPED_ARRAY_SUPPORT)for(s=0;s&lt;i;++s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i};Ye.prototype.fill=function(e,t,n,o){if(typeof e=="string"){if(typeof t=="string"?(o=t,t=0,n=this.length):typeof n=="string"&amp;&amp;(o=n,n=this.length),e.length===1){var i=e.charCodeAt(0);i&lt;256&amp;&amp;(e=i)}if(o!==void 0&amp;&amp;typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&amp;&amp;!Ye.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof e=="number"&amp;&amp;(e=e&amp;255);if(t&lt;0||this.length&lt;t||this.length&lt;n)throw new RangeError("Out of range index");if(n&lt;=t)return this;t=t&gt;&gt;&gt;0,n=n===void 0?this.length:n&gt;&gt;&gt;0,e||(e=0);var s;if(typeof e=="number")for(s=t;s&lt;n;++s)this[s]=e;else{var a=Ep(e)?e:EF(new Ye(e,o).toString()),l=a.length;for(s=0;s&lt;n-t;++s)this[s+t]=a[s%l]}return this};var _we=/[^+\/0-9A-Za-z-_]/g;function Fwe(r){if(r=Mwe(r).replace(_we,""),r.length&lt;2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Mwe(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Nwe(r){return r&lt;16?"0"+r.toString(16):r.toString(16)}function EF(r,e){e=e||1/0;for(var t,n=r.length,o=null,i=[],s=0;s&lt;n;++s){if(t=r.charCodeAt(s),t&gt;55295&amp;&amp;t&lt;57344){if(!o){if(t&gt;56319){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}else if(s+1===n){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);continue}o=t;continue}if(t&lt;56320){(e-=3)&gt;-1&amp;&amp;i.push(239,191,189),o=t;continue}t=(o-55296&lt;&lt;10|t-56320)+65536}else o&amp;&amp;(e-=3)&gt;-1&amp;&amp;i.push(239,191,189);if(o=null,t&lt;128){if((e-=1)&lt;0)break;i.push(t)}else if(t&lt;2048){if((e-=2)&lt;0)break;i.push(t&gt;&gt;6|192,t&amp;63|128)}else if(t&lt;65536){if((e-=3)&lt;0)break;i.push(t&gt;&gt;12|224,t&gt;&gt;6&amp;63|128,t&amp;63|128)}else if(t&lt;1114112){if((e-=4)&lt;0)break;i.push(t&gt;&gt;18|240,t&gt;&gt;12&amp;63|128,t&gt;&gt;6&amp;63|128,t&amp;63|128)}else throw new Error("Invalid code point")}return i}function Bwe(r){for(var e=[],t=0;t&lt;r.length;++t)e.push(r.charCodeAt(t)&amp;255);return e}function Rwe(r,e){for(var t,n,o,i=[],s=0;s&lt;r.length&amp;&amp;!((e-=2)&lt;0);++s)t=r.charCodeAt(s),n=t&gt;&gt;8,o=t%256,i.push(o),i.push(n);return i}function YZ(r){return dwe(Fwe(r))}function zF(r,e,t,n){for(var o=0;o&lt;n&amp;&amp;!(o+t&gt;=e.length||o&gt;=r.length);++o)e[o+t]=r[o];return o}function Lwe(r){return r!==r}function HF(r){return r!=null&amp;&amp;(!!r._isBuffer||XZ(r)||Owe(r))}function XZ(r){return!!r.constructor&amp;&amp;typeof r.constructor.isBuffer=="function"&amp;&amp;r.constructor.isBuffer(r)}function Owe(r){return typeof r.readFloatLE=="function"&amp;&amp;typeof r.slice=="function"&amp;&amp;XZ(r.slice(0,0))}function h5(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function JJ(r,e){for(var t=0;t&lt;e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&amp;&amp;(n.writable=!0),Object.defineProperty(r,n.key,n)}}function f5(r,e,t){return e&amp;&amp;JJ(r.prototype,e),t&amp;&amp;JJ(r,t),r}function vf(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function LS(r){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&amp;&amp;(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){vf(r,o,t[o])})}return r}function QZ(r,e){if(typeof e!="function"&amp;&amp;e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&amp;&amp;e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&amp;&amp;Zz(r,e)}function _F(r){return _F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_F(r)}function Zz(r,e){return Zz=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},Zz(r,e)}function Uwe(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,i;for(i=0;i&lt;n.length;i++)o=n[i],!(e.indexOf(o)&gt;=0)&amp;&amp;(t[o]=r[o]);return t}function JZ(r,e){if(r==null)return{};var t=Uwe(r,e),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(o=0;o&lt;i.length;o++)n=i[o],!(e.indexOf(n)&gt;=0)&amp;&amp;(!Object.prototype.propertyIsEnumerable.call(r,n)||(t[n]=r[n]))}return t}function fa(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ZZ(r,e){return e&amp;&amp;(typeof e=="object"||typeof e=="function")?e:fa(r)}function zwe(r,e){return Gwe(r)||$we(r,e)||jwe()}function Bz(r){return Hwe(r)||Wwe(r)||Vwe()}function Hwe(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e&lt;r.length;e++)t[e]=r[e];return t}}function Gwe(r){if(Array.isArray(r))return r}function Wwe(r){if(Symbol.iterator in Object(r)||Object.prototype.toString.call(r)==="[object Arguments]")return Array.from(r)}function $we(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var s=r[Symbol.iterator](),a;!(n=(a=s.next()).done)&amp;&amp;(t.push(a.value),!(e&amp;&amp;t.length===e));n=!0);}catch(l){o=!0,i=l}finally{try{!n&amp;&amp;s.return!=null&amp;&amp;s.return()}finally{if(o)throw i}}return t}function Vwe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function jwe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Fa=function(r){return typeof r=="object"?r!==null:typeof r=="function"},_p=function(r){if(!Fa(r))throw TypeError(r+" is not an object!");return r},Cf=function(r){try{return!!r()}catch(e){return!0}},hd=!Cf(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});function ry(r,e){return e={exports:{}},r(e,e.exports),e.exports}var ks=ry(function(r){var e=r.exports=typeof window!="undefined"&amp;&amp;window.Math==Math?window:typeof self!="undefined"&amp;&amp;self.Math==Math?self:Function("return this")();typeof __g=="number"&amp;&amp;(__g=e)}),e5=ks.document,Kwe=Fa(e5)&amp;&amp;Fa(e5.createElement),eee=function(r){return Kwe?e5.createElement(r):{}},tee=!hd&amp;&amp;!Cf(function(){return Object.defineProperty(eee("div"),"a",{get:function(){return 7}}).a!=7}),m5=function(r,e){if(!Fa(r))return r;var t,n;if(e&amp;&amp;typeof(t=r.toString)=="function"&amp;&amp;!Fa(n=t.call(r))||typeof(t=r.valueOf)=="function"&amp;&amp;!Fa(n=t.call(r))||!e&amp;&amp;typeof(t=r.toString)=="function"&amp;&amp;!Fa(n=t.call(r)))return n;throw TypeError("Can't convert object to primitive value")},qwe=Object.defineProperty,Ywe=hd?Object.defineProperty:function(e,t,n){if(_p(e),t=m5(t,!0),_p(n),tee)try{return qwe(e,t,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&amp;&amp;(e[t]=n.value),e},Fp={f:Ywe},Xwe=Fp.f,ZJ=Function.prototype,Qwe=/^\s*function ([^ (]*)/,eZ="name";eZ in ZJ||hd&amp;&amp;Xwe(ZJ,eZ,{configurable:!0,get:function(){try{return(""+this).match(Qwe)[1]}catch(r){return""}}});var Og=ry(function(r){var e=r.exports={version:"2.5.7"};typeof __e=="number"&amp;&amp;(__e=e)}),MWe=Og.version,GF=function(r,e){return{enumerable:!(r&amp;1),configurable:!(r&amp;2),writable:!(r&amp;4),value:e}},Cc=hd?function(r,e,t){return Fp.f(r,e,GF(1,t))}:function(r,e,t){return r[e]=t,r},Jwe={}.hasOwnProperty,dd=function(r,e){return Jwe.call(r,e)},Zwe=0,eTe=Math.random(),WF=function(r){return"Symbol(".concat(r===void 0?"":r,")_",(++Zwe+eTe).toString(36))},ny=ry(function(r){var e=WF("src"),t="toString",n=Function[t],o=(""+n).split(t);Og.inspectSource=function(i){return n.call(i)},(r.exports=function(i,s,a,l){var u=typeof a=="function";u&amp;&amp;(dd(a,"name")||Cc(a,"name",s)),i[s]!==a&amp;&amp;(u&amp;&amp;(dd(a,e)||Cc(a,e,i[s]?""+i[s]:o.join(String(s)))),i===ks?i[s]=a:l?i[s]?i[s]=a:Cc(i,s,a):(delete i[s],Cc(i,s,a)))})(Function.prototype,t,function(){return typeof this=="function"&amp;&amp;this[e]||n.call(this)})}),tTe=function(r){if(typeof r!="function")throw TypeError(r+" is not a function!");return r},ey=function(r,e,t){if(tTe(r),e===void 0)return r;switch(t){case 1:return function(n){return r.call(e,n)};case 2:return function(n,o){return r.call(e,n,o)};case 3:return function(n,o,i){return r.call(e,n,o,i)}}return function(){return r.apply(e,arguments)}},Rz="prototype",ol=function(r,e,t){var n=r&amp;ol.F,o=r&amp;ol.G,i=r&amp;ol.S,s=r&amp;ol.P,a=r&amp;ol.B,l=o?ks:i?ks[e]||(ks[e]={}):(ks[e]||{})[Rz],u=o?Og:Og[e]||(Og[e]={}),d=u[Rz]||(u[Rz]={}),c,p,h,f;o&amp;&amp;(t=e);for(c in t)p=!n&amp;&amp;l&amp;&amp;l[c]!==void 0,h=(p?l:t)[c],f=a&amp;&amp;p?ey(h,ks):s&amp;&amp;typeof h=="function"?ey(Function.call,h):h,l&amp;&amp;ny(l,c,h,r&amp;ol.U),u[c]!=h&amp;&amp;Cc(u,c,f),s&amp;&amp;d[c]!=h&amp;&amp;(d[c]=h)};ks.core=Og;ol.F=1;ol.G=2;ol.S=4;ol.P=8;ol.B=16;ol.W=32;ol.U=64;ol.R=128;var $o=ol,rTe=Math.ceil,nTe=Math.floor,g5=function(r){return isNaN(r=+r)?0:(r&gt;0?nTe:rTe)(r)},oTe=Math.min,ED=function(r){return r&gt;0?oTe(g5(r),9007199254740991):0},_D=function(r){if(r==null)throw TypeError("Can't call method on  "+r);return r},iTe=function(e){var t=String(_D(this)),n="",o=g5(e);if(o&lt;0||o==1/0)throw RangeError("Count can't be negative");for(;o&gt;0;(o&gt;&gt;&gt;=1)&amp;&amp;(t+=t))o&amp;1&amp;&amp;(n+=t);return n},sTe=function(r,e,t,n){var o=String(_D(r)),i=o.length,s=t===void 0?" ":String(t),a=ED(e);if(a&lt;=i||s=="")return o;var l=a-i,u=iTe.call(s,Math.ceil(l/s.length));return u.length&gt;l&amp;&amp;(u=u.slice(0,l)),n?u+o:o+u},tZ=ks.navigator,aTe=tZ&amp;&amp;tZ.userAgent||"";$o($o.P+$o.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(aTe),"String",{padStart:function(e){return sTe(this,e,arguments.length&gt;1?arguments[1]:void 0,!0)}});var lTe={}.toString,ty=function(r){return lTe.call(r).slice(8,-1)},uTe={}.propertyIsEnumerable,dTe={f:uTe},ree=Object("z").propertyIsEnumerable(0)?Object:function(r){return ty(r)=="String"?r.split(""):Object(r)},$F=function(r){return ree(_D(r))},rZ=Object.getOwnPropertyDescriptor,cTe=hd?rZ:function(e,t){if(e=$F(e),t=m5(t,!0),tee)try{return rZ(e,t)}catch(n){}if(dd(e,t))return GF(!dTe.f.call(e,t),e[t])},nee={f:cTe},nZ=function(r,e){if(_p(r),!Fa(e)&amp;&amp;e!==null)throw TypeError(e+": can't set as prototype!")},pTe={set:Object.setPrototypeOf||("__proto__"in{}?function(r,e,t){try{t=ey(Function.call,nee.f(Object.prototype,"__proto__").set,2),t(r,[]),e=!(r instanceof Array)}catch(n){e=!0}return function(o,i){return nZ(o,i),e?o.__proto__=i:t(o,i),o}}({},!1):void 0),check:nZ},oZ=pTe.set,oee=function(r,e,t){var n=e.constructor,o;return n!==t&amp;&amp;typeof n=="function"&amp;&amp;(o=n.prototype)!==t.prototype&amp;&amp;Fa(o)&amp;&amp;oZ&amp;&amp;oZ(r,o),r},hTe=Math.max,fTe=Math.min,mTe=function(r,e){return r=g5(r),r&lt;0?hTe(r+e,0):fTe(r,e)},gTe=function(r){return function(e,t,n){var o=$F(e),i=ED(o.length),s=mTe(n,i),a;if(r&amp;&amp;t!=t){for(;i&gt;s;)if(a=o[s++],a!=a)return!0}else for(;i&gt;s;s++)if((r||s in o)&amp;&amp;o[s]===t)return r||s||0;return!r&amp;&amp;-1}},t5=!1,iee=ry(function(r){var e="__core-js_shared__",t=ks[e]||(ks[e]={});(r.exports=function(n,o){return t[n]||(t[n]=o!==void 0?o:{})})("versions",[]).push({version:Og.version,mode:t5?"pure":"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),iZ=iee("keys"),v5=function(r){return iZ[r]||(iZ[r]=WF(r))},vTe=gTe(!1),bTe=v5("IE_PROTO"),see=function(r,e){var t=$F(r),n=0,o=[],i;for(i in t)i!=bTe&amp;&amp;dd(t,i)&amp;&amp;o.push(i);for(;e.length&gt;n;)dd(t,i=e[n++])&amp;&amp;(~vTe(o,i)||o.push(i));return o},FF="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),yTe=FF.concat("length","prototype"),CTe=Object.getOwnPropertyNames||function(e){return see(e,yTe)},STe={f:CTe},PD=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,MF="["+PD+"]",sZ="\u200B\x85",xTe=RegExp("^"+MF+MF+"*"),wTe=RegExp(MF+MF+"*$"),aee=function(r,e,t){var n={},o=Cf(function(){return!!PD[r]()||sZ[r]()!=sZ}),i=n[r]=o?e(TTe):PD[r];t&amp;&amp;(n[t]=i),$o($o.P+$o.F*o,"String",n)},TTe=aee.trim=function(r,e){return r=String(_D(r)),e&amp;1&amp;&amp;(r=r.replace(xTe,"")),e&amp;2&amp;&amp;(r=r.replace(wTe,"")),r},lee=aee,uee=Object.keys||function(e){return see(e,FF)},DTe=hd?Object.defineProperties:function(e,t){_p(e);for(var n=uee(t),o=n.length,i=0,s;o&gt;i;)Fp.f(e,s=n[i++],t[s]);return e},aZ=ks.document,kTe=aZ&amp;&amp;aZ.documentElement,PTe=v5("IE_PROTO"),Lz=function(){},r5="prototype",PF=function(){var r=eee("iframe"),e=FF.length,t="&lt;",n="&gt;",o;for(r.style.display="none",kTe.appendChild(r),r.src="javascript:",o=r.contentWindow.document,o.open(),o.write(t+"script"+n+"document.F=Object"+t+"/script"+n),o.close(),PF=o.F;e--;)delete PF[r5][FF[e]];return PF()},b5=Object.create||function(e,t){var n;return e!==null?(Lz[r5]=_p(e),n=new Lz,Lz[r5]=null,n[PTe]=e):n=PF(),t===void 0?n:DTe(n,t)},ATe=STe.f,ITe=nee.f,ETe=Fp.f,_Te=lee.trim,NF="Number",vu=ks[NF],vF=vu,AF=vu.prototype,FTe=ty(b5(AF))==NF,MTe="trim"in String.prototype,lZ=function(r){var e=m5(r,!1);if(typeof e=="string"&amp;&amp;e.length&gt;2){e=MTe?e.trim():_Te(e,3);var t=e.charCodeAt(0),n,o,i;if(t===43||t===45){if(n=e.charCodeAt(2),n===88||n===120)return NaN}else if(t===48){switch(e.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+e}for(var s=e.slice(2),a=0,l=s.length,u;a&lt;l;a++)if(u=s.charCodeAt(a),u&lt;48||u&gt;i)return NaN;return parseInt(s,o)}}return+e};if(!vu(" 0o1")||!vu("0b1")||vu("+0x1")){for(vu=function(e){var t=arguments.length&lt;1?0:e,n=this;return n instanceof vu&amp;&amp;(FTe?Cf(function(){AF.valueOf.call(n)}):ty(n)!=NF)?oee(new vF(lZ(t)),n,vu):lZ(t)},Oz=hd?ATe(vF):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),bF=0;Oz.length&gt;bF;bF++)dd(vF,xD=Oz[bF])&amp;&amp;!dd(vu,xD)&amp;&amp;ETe(vu,xD,ITe(vF,xD));vu.prototype=AF,AF.constructor=vu,ny(ks,NF,vu)}var Oz,bF,xD,dee=function(){var r=_p(this),e="";return r.global&amp;&amp;(e+="g"),r.ignoreCase&amp;&amp;(e+="i"),r.multiline&amp;&amp;(e+="m"),r.unicode&amp;&amp;(e+="u"),r.sticky&amp;&amp;(e+="y"),e};hd&amp;&amp;/./g.flags!="g"&amp;&amp;Fp.f(RegExp.prototype,"flags",{configurable:!0,get:dee});var y5="toString",Uz=/./[y5],uZ=function(r){ny(RegExp.prototype,y5,r,!0)};Cf(function(){return Uz.call({source:"a",flags:"b"})!="/a/b"})?uZ(function(){var e=_p(this);return"/".concat(e.source,"/","flags"in e?e.flags:!hd&amp;&amp;e instanceof RegExp?dee.call(e):void 0)}):Uz.name!=y5&amp;&amp;uZ(function(){return Uz.call(this)});var C5=function(r){return Object(_D(r))},cee=function(r,e,t,n){try{return n?e(_p(t)[0],t[1]):e(t)}catch(i){var o=r.return;throw o!==void 0&amp;&amp;_p(o.call(r)),i}},Hg={},fd=ry(function(r){var e=iee("wks"),t=ks.Symbol,n=typeof t=="function",o=r.exports=function(i){return e[i]||(e[i]=n&amp;&amp;t[i]||(n?t:WF)("Symbol."+i))};o.store=e}),NTe=fd("iterator"),BTe=Array.prototype,pee=function(r){return r!==void 0&amp;&amp;(Hg.Array===r||BTe[NTe]===r)},dZ=function(r,e,t){e in r?Fp.f(r,e,GF(0,t)):r[e]=t},RTe=fd("toStringTag"),LTe=ty(function(){return arguments}())=="Arguments",OTe=function(r,e){try{return r[e]}catch(t){}},UTe=function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=OTe(e=Object(r),RTe))=="string"?t:LTe?ty(e):(n=ty(e))=="Object"&amp;&amp;typeof e.callee=="function"?"Arguments":n},zTe=fd("iterator"),hee=Og.getIteratorMethod=function(r){if(r!=null)return r[zTe]||r["@@iterator"]||Hg[UTe(r)]},n5=fd("iterator"),fee=!1;try{cZ=[7][n5](),cZ.return=function(){fee=!0}}catch(r){}var cZ,mee=function(r,e){if(!e&amp;&amp;!fee)return!1;var t=!1;try{var n=[7],o=n[n5]();o.next=function(){return{done:t=!0}},n[n5]=function(){return o},r(n)}catch(i){}return t};$o($o.S+$o.F*!mee(function(r){}),"Array",{from:function(e){var t=C5(e),n=typeof this=="function"?this:Array,o=arguments.length,i=o&gt;1?arguments[1]:void 0,s=i!==void 0,a=0,l=hee(t),u,d,c,p;if(s&amp;&amp;(i=ey(i,o&gt;2?arguments[2]:void 0,2)),l!=null&amp;&amp;!(n==Array&amp;&amp;pee(l)))for(p=l.call(t),d=new n;!(c=p.next()).done;a++)dZ(d,a,s?cee(p,i,[c.value,a],!0):c.value);else for(u=ED(t.length),d=new n(u);u&gt;a;a++)dZ(d,a,s?i(t[a],a):t[a]);return d.length=a,d}});$o($o.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var Bg=function(){function r(){h5(this,r)}return f5(r,null,[{key:"readVint",value:function(t){var n=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:0,o=8-Math.floor(Math.log2(t[n]));if(o&gt;8){var i=r.readHexString(t,n,n+o);throw new Error("Unrepresentable length: ".concat(o," ").concat(i))}if(n+o&gt;t.length)return null;for(var s=t[n]&amp;(1&lt;&lt;8-o)-1,a=1;a&lt;o;a+=1){if(a===7&amp;&amp;s&gt;=Math.pow(2,8)&amp;&amp;t[n+7]&gt;0)return{length:o,value:-1};s*=Math.pow(2,8),s+=t[n+a]}return{length:o,value:s}}},{key:"writeVint",value:function(t){if(t&lt;0||t&gt;Math.pow(2,53))throw new Error("Unrepresentable value: ".concat(t));var n=1;for(n=1;n&lt;=8&amp;&amp;!(t&lt;Math.pow(2,7*n)-1);n+=1);for(var o=Ye.alloc(n),i=t,s=1;s&lt;=n;s+=1){var a=i&amp;255;o[n-s]=a,i-=a,i/=Math.pow(2,8)}return o[0]|=1&lt;&lt;8-n,o}},{key:"concatenate",value:function(t,n){return!t||t.byteLength===0?n:!n||n.byteLength===0?t:Ye.from(Bz(t).concat(Bz(n)))}},{key:"readHexString",value:function(t){var n=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:0,o=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:t.byteLength;return Array.from(t.slice(n,o)).map(function(i){return Number(i).toString(16)}).reduce(function(i,s){return"".concat(i).concat(s.padStart(2,"0"))},"")}},{key:"readUtf8",value:function(t){try{return Ye.from(t).toString("utf8")}catch(n){return null}}},{key:"readUnsigned",value:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return n.getUint8(0);case 2:return n.getUint16(0);case 4:return n.getUint32(0);default:break}return t.byteLength&lt;=6?t.reduce(function(o,i){return o*256+i},0):r.readHexString(t,0,t.byteLength)}},{key:"readSigned",value:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 1:return n.getInt8(0);case 2:return n.getInt16(0);case 4:return n.getInt32(0);default:return NaN}}},{key:"readFloat",value:function(t){var n=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return n.getFloat32(0);case 8:return n.getFloat64(0);default:return NaN}}},{key:"readDataFromTag",value:function(t,n){var o=t.type,i=t.name,s=t.track,a=t.discardable||!1,l=t.keyframe||!1,u=null,d;switch(o){case"u":d=r.readUnsigned(n);break;case"f":d=r.readFloat(n);break;case"i":d=r.readSigned(n);break;case"s":d=String.fromCharCode.apply(String,Bz(n));break;case"8":d=r.readUtf8(n);break;default:break}if(i==="SimpleBlock"||i==="Block"){var c=0,p=r.readVint(n,c),h=p.length,f=p.value;c+=h,s=f,d=r.readSigned(n.subarray(c,c+2)),c+=2,i==="SimpleBlock"&amp;&amp;(l=Boolean(n[h+2]&amp;128),a=Boolean(n[h+2]&amp;1)),c+=1,u=n.subarray(c)}return LS({},t,{data:n,discardable:a,keyframe:l,payload:u,track:s,value:d})}}]),r}(),o5=fd("unscopables"),i5=Array.prototype;i5[o5]==null&amp;&amp;Cc(i5,o5,{});var VF=function(r){i5[o5][r]=!0},Rg=function(r,e){return{value:e,done:!!r}},HTe=Fp.f,pZ=fd("toStringTag"),S5=function(r,e,t){r&amp;&amp;!dd(r=t?r:r.prototype,pZ)&amp;&amp;HTe(r,pZ,{configurable:!0,value:e})},gee={};Cc(gee,fd("iterator"),function(){return this});var GTe=function(r,e,t){r.prototype=b5(gee,{next:GF(1,t)}),S5(r,e+" Iterator")},hZ=v5("IE_PROTO"),WTe=Object.prototype,$Te=Object.getPrototypeOf||function(r){return r=C5(r),dd(r,hZ)?r[hZ]:typeof r.constructor=="function"&amp;&amp;r instanceof r.constructor?r.constructor.prototype:r instanceof Object?WTe:null},wD=fd("iterator"),zz=!([].keys&amp;&amp;"next"in[].keys()),VTe="@@iterator",fZ="keys",yF="values",mZ=function(){return this},vee=function(r,e,t,n,o,i,s){GTe(t,e,n);var a=function(C){if(!zz&amp;&amp;C in c)return c[C];switch(C){case fZ:return function(){return new t(this,C)};case yF:return function(){return new t(this,C)}}return function(){return new t(this,C)}},l=e+" Iterator",u=o==yF,d=!1,c=r.prototype,p=c[wD]||c[VTe]||o&amp;&amp;c[o],h=p||a(o),f=o?u?a("entries"):h:void 0,m=e=="Array"&amp;&amp;c.entries||p,g,v,b;if(m&amp;&amp;(b=$Te(m.call(new r)),b!==Object.prototype&amp;&amp;b.next&amp;&amp;(S5(b,l,!0),!t5&amp;&amp;typeof b[wD]!="function"&amp;&amp;Cc(b,wD,mZ))),u&amp;&amp;p&amp;&amp;p.name!==yF&amp;&amp;(d=!0,h=function(){return p.call(this)}),(!t5||s)&amp;&amp;(zz||d||!c[wD])&amp;&amp;Cc(c,wD,h),Hg[e]=h,Hg[l]=mZ,o)if(g={values:u?h:a(yF),keys:i?h:a(fZ),entries:f},s)for(v in g)v in c||ny(c,v,g[v]);else $o($o.P+$o.F*(zz||d),e,g);return g},gZ=vee(Array,"Array",function(r,e){this._t=$F(r),this._i=0,this._k=e},function(){var r=this._t,e=this._k,t=this._i++;return!r||t&gt;=r.length?(this._t=void 0,Rg(1)):e=="keys"?Rg(0,t):e=="values"?Rg(0,r[t]):Rg(0,[t,r[t]])},"values");Hg.Arguments=Hg.Array;VF("keys");VF("values");VF("entries");var vZ=fd("iterator"),bZ=fd("toStringTag"),yZ=Hg.Array,CZ={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1};for(Hz=uee(CZ),CF=0;CF&lt;Hz.length;CF++)if(TD=Hz[CF],SZ=CZ[TD],Gz=ks[TD],_g=Gz&amp;&amp;Gz.prototype,_g&amp;&amp;(_g[vZ]||Cc(_g,vZ,yZ),_g[bZ]||Cc(_g,bZ,TD),Hg[TD]=yZ,SZ))for(DD in gZ)_g[DD]||ny(_g,DD,gZ[DD],!0);var TD,SZ,Gz,_g,DD,Hz,CF,bee=function(r,e,t){for(var n in e)ny(r,n,e[n],t);return r},yee=function(r,e,t,n){if(!(r instanceof e)||n!==void 0&amp;&amp;n in r)throw TypeError(t+": incorrect invocation!");return r},Cee=ry(function(r){var e={},t={},n=r.exports=function(o,i,s,a,l){var u=l?function(){return o}:hee(o),d=ey(s,a,i?2:1),c=0,p,h,f,m;if(typeof u!="function")throw TypeError(o+" is not iterable!");if(pee(u)){for(p=ED(o.length);p&gt;c;c++)if(m=i?d(_p(h=o[c])[0],h[1]):d(o[c]),m===e||m===t)return m}else for(f=u.call(o);!(h=f.next()).done;)if(m=cee(f,d,h.value,i),m===e||m===t)return m};n.BREAK=e,n.RETURN=t}),xZ=fd("species"),jTe=function(r){var e=ks[r];hd&amp;&amp;e&amp;&amp;!e[xZ]&amp;&amp;Fp.f(e,xZ,{configurable:!0,get:function(){return this}})},oy=ry(function(r){var e=WF("meta"),t=Fp.f,n=0,o=Object.isExtensible||function(){return!0},i=!Cf(function(){return o(Object.preventExtensions({}))}),s=function(c){t(c,e,{value:{i:"O"+ ++n,w:{}}})},a=function(c,p){if(!Fa(c))return typeof c=="symbol"?c:(typeof c=="string"?"S":"P")+c;if(!dd(c,e)){if(!o(c))return"F";if(!p)return"E";s(c)}return c[e].i},l=function(c,p){if(!dd(c,e)){if(!o(c))return!0;if(!p)return!1;s(c)}return c[e].w},u=function(c){return i&amp;&amp;d.NEED&amp;&amp;o(c)&amp;&amp;!dd(c,e)&amp;&amp;s(c),c},d=r.exports={KEY:e,NEED:!1,fastKey:a,getWeak:l,onFreeze:u}}),NWe=oy.KEY,BWe=oy.NEED,RWe=oy.fastKey,LWe=oy.getWeak,OWe=oy.onFreeze,Ng=function(r,e){if(!Fa(r)||r._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return r},KTe=Fp.f,See=oy.fastKey,kD=hd?"_s":"size",SF=function(r,e){var t=See(e),n;if(t!=="F")return r._i[t];for(n=r._f;n;n=n.n)if(n.k==e)return n},Wz={getConstructor:function(r,e,t,n){var o=r(function(i,s){yee(i,o,e,"_i"),i._t=e,i._i=b5(null),i._f=void 0,i._l=void 0,i[kD]=0,s!=null&amp;&amp;Cee(s,t,i[n],i)});return bee(o.prototype,{clear:function(){for(var s=Ng(this,e),a=s._i,l=s._f;l;l=l.n)l.r=!0,l.p&amp;&amp;(l.p=l.p.n=void 0),delete a[l.i];s._f=s._l=void 0,s[kD]=0},delete:function(i){var s=Ng(this,e),a=SF(s,i);if(a){var l=a.n,u=a.p;delete s._i[a.i],a.r=!0,u&amp;&amp;(u.n=l),l&amp;&amp;(l.p=u),s._f==a&amp;&amp;(s._f=l),s._l==a&amp;&amp;(s._l=u),s[kD]--}return!!a},forEach:function(s){Ng(this,e);for(var a=ey(s,arguments.length&gt;1?arguments[1]:void 0,3),l;l=l?l.n:this._f;)for(a(l.v,l.k,this);l&amp;&amp;l.r;)l=l.p},has:function(s){return!!SF(Ng(this,e),s)}}),hd&amp;&amp;KTe(o.prototype,"size",{get:function(){return Ng(this,e)[kD]}}),o},def:function(r,e,t){var n=SF(r,e),o,i;return n?n.v=t:(r._l=n={i:i=See(e,!0),k:e,v:t,p:o=r._l,n:void 0,r:!1},r._f||(r._f=n),o&amp;&amp;(o.n=n),r[kD]++,i!=="F"&amp;&amp;(r._i[i]=n)),r},getEntry:SF,setStrong:function(r,e,t){vee(r,e,function(n,o){this._t=Ng(n,e),this._k=o,this._l=void 0},function(){for(var n=this,o=n._k,i=n._l;i&amp;&amp;i.r;)i=i.p;return!n._t||!(n._l=i=i?i.n:n._t._f)?(n._t=void 0,Rg(1)):o=="keys"?Rg(0,i.k):o=="values"?Rg(0,i.v):Rg(0,[i.k,i.v])},t?"entries":"values",!t,!0),jTe(e)}},qTe=function(r,e,t,n,o,i){var s=ks[r],a=s,l=o?"set":"add",u=a&amp;&amp;a.prototype,d={},c=function(v){var b=u[v];ny(u,v,v=="delete"?function(C){return i&amp;&amp;!Fa(C)?!1:b.call(this,C===0?0:C)}:v=="has"?function(x){return i&amp;&amp;!Fa(x)?!1:b.call(this,x===0?0:x)}:v=="get"?function(x){return i&amp;&amp;!Fa(x)?void 0:b.call(this,x===0?0:x)}:v=="add"?function(x){return b.call(this,x===0?0:x),this}:function(x,y){return b.call(this,x===0?0:x,y),this})};if(typeof a!="function"||!(i||u.forEach&amp;&amp;!Cf(function(){new a().entries().next()})))a=n.getConstructor(e,r,o,l),bee(a.prototype,t),oy.NEED=!0;else{var p=new a,h=p[l](i?{}:-0,1)!=p,f=Cf(function(){p.has(1)}),m=mee(function(v){new a(v)}),g=!i&amp;&amp;Cf(function(){for(var v=new a,b=5;b--;)v[l](b,b);return!v.has(-0)});m||(a=e(function(v,b){yee(v,a,r);var C=oee(new s,v,a);return b!=null&amp;&amp;Cee(b,o,C[l],C),C}),a.prototype=u,u.constructor=a),(f||g)&amp;&amp;(c("delete"),c("has"),o&amp;&amp;c("get")),(g||h)&amp;&amp;c(l),i&amp;&amp;u.clear&amp;&amp;delete u.clear}return S5(a,r),d[r]=a,$o($o.G+$o.W+$o.F*(a!=s),d),i||n.setStrong(a,r,o),a},$z="Map",UWe=qTe($z,function(r){return function(){return r(this,arguments.length&gt;0?arguments[0]:void 0)}},{get:function(e){var t=Wz.getEntry(Ng(this,$z),e);return t&amp;&amp;t.v},set:function(e,t){return Wz.def(Ng(this,$z),e===0?0:e,t)}},Wz,!0),AD=new Map([[128,{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."}],[131,{name:"TrackType",level:3,type:"u",multiple:!1,mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control).",webm:!1}],[133,{name:"ChapString",cppname:"ChapterString",level:5,type:"8",multiple:!1,mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."}],[134,{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info.",multiple:!1,webm:!1}],[136,{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)",multiple:!1,webm:!1}],[137,{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."}],[145,{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled).",multiple:!1}],[146,{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled).",multiple:!1}],[150,{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block.",multiple:!1}],[151,{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block.",minver:0,multiple:!1}],[152,{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)",multiple:!1}],[16980,{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,br:["","","",""],del:["1 - bzlib,","2 - lzo1x"],description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping",multiple:!1}],[16981,{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track.",multiple:!1}],[17026,{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files.",multiple:!1,webm:!1}],[17029,{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file.",multiple:!1,webm:!1}],[17030,{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file.",multiple:!1,webm:!1}],[17031,{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file.",multiple:!1,webm:!1}],[17476,{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."}],[17505,{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date.",multiple:!1,webm:!1}],[17540,{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)",multiple:!1}],[17541,{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString.",multiple:!1}],[17543,{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Tag.",multiple:!1}],[17545,{name:"Duration",level:2,type:"f",minver:1,range:"&gt; 0",description:"Duration of the segment (based on TimecodeScale).",multiple:!1,webm:!1}],[17816,{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)",multiple:!1}],[18016,{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file.",multiple:!1}],[18017,{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension",multiple:!1}],[18018,{name:"FileUsedEndTime",level:3,type:"u",divx:!0,multiple:!1,description:"DivX font extension"}],[18037,{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed.",multiple:!1}],[20529,{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,multiple:!1,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."}],[20530,{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",br:["","",""],description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)",multiple:!1}],[20531,{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,br:["",""],description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption",multiple:!1}],[20532,{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking.",multiple:!1}],[20533,{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise.",multiple:!1}],[21368,{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster.",multiple:!1}],[22100,{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage.",multiple:!1}],[22337,{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,multiple:!1,description:'Writing application ("mkvmerge-0.3.3").'}],[22612,{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,multiple:!1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."}],[25152,{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."}],[25188,{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",multiple:!1,description:"Bits per sample, mostly used for PCM."}],[25906,{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."}],[26148,{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."}],[26897,{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."}],[26914,{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."}],[26916,{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."}],[26931,{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."}],[26948,{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."}],[26965,{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."}],[29555,{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."}],[29572,{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."}],[29766,{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."}],[2459272,{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."}],[408125543,{name:"Segment",level:0,type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."}],[17530,{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."}],[17827,{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."}],[26568,{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:!0,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."}],[25542,{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."}],[25540,{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."}],[25545,{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."}],[25541,{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."}],[25546,{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'}],[26826,{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."}],[25536,{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."}],[307544935,{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."}],[17677,{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'}],[17278,{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."}],[17276,{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."}],[143,{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"}],[25539,{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'}],[28348,{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."}],[28263,{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:"&gt;0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."}],[29636,{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."}],[182,{name:"ChapterAtom",level:3,recursive:!0,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."}],[17885,{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"}],[17883,{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"}],[17853,{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"}],[17852,{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."}],[17849,{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."}],[272869232,{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."}],[18094,{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."}],[18012,{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."}],[18030,{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."}],[18046,{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."}],[24999,{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."}],[423732329,{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."}],[235,{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."}],[21343,{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."}],[219,{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."}],[234,{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."}],[178,{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."}],[240,{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster."}],[241,{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block."}],[247,{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."}],[183,{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."}],[179,{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."}],[187,{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."}],[475249515,{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'}],[18406,{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:["",""],description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"}],[18405,{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:"",description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"}],[18404,{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."}],[18403,{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."}],[18402,{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."}],[18401,{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,br:"",description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"}],[28032,{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."}],[196,{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"}],[199,{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"}],[198,{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"}],[193,{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"}],[192,{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"}],[237,{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."}],[233,{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"}],[230,{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."}],[229,{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."}],[228,{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"}],[227,{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"}],[226,{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."}],[32123,{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."}],[159,{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."}],[30901,{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"&gt; 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."}],[181,{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:"8000.0",range:"&gt; 0",description:"Sampling frequency in Hz."}],[225,{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."}],[2327523,{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"&gt; 0",strong:"Informational",description:"Number of frames per second.  only."}],[3126563,{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"&gt; 0",description:"Gamma Value."}],[3061028,{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."}],[21683,{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."}],[21682,{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth &amp; DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."}],[21690,{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."}],[21680,{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."}],[21725,{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."}],[21708,{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."}],[21691,{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."}],[21674,{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."}],[186,{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."}],[176,{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."}],[21433,{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."}],[21440,{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."}],[21432,{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."}],[154,{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"}],[224,{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."}],[26277,{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."}],[26303,{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."}],[26364,{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."}],[22203,{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."}],[22186,{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."}],[28587,{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."}],[170,{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."}],[2536e3,{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."}],[3883072,{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."}],[3839639,{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."}],[25506,{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."}],[2274716,{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."}],[21358,{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."}],[21998,{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."}],[21375,{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."}],[2306383,{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:"1.0",range:"&gt; 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."}],[2313850,{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:`The period in nanoseconds (not scaled by TimcodeScale)
between two successive fields at the output of the decoding process (see the notes)`}],[2352003,{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."}],[28152,{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."}],[28135,{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."}],[156,{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"}],[21930,{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"}],[185,{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"}],[29637,{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."}],[215,{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."}],[174,{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."}],[374648427,{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."}],[175,{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"}],[202,{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[201,{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[200,{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"}],[207,{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."}],[206,{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."}],[203,{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."}],[205,{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."}],[204,{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."}],[232,{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."}],[142,{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."}],[30114,{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."}],[164,{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."}],[253,{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."}],[251,{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."}],[250,{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."}],[155,{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'}],[165,{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."}],[238,{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."}],[166,{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."}],[30113,{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."}],[162,{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"}],[161,{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"}],[160,{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."}],[163,{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure)"}],[171,{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing."}],[167,{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams."}],[22743,{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."}],[231,{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."}],[524531317,{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."}],[19840,{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'}],[31657,{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."}],[2807730,{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:1e9,description:"Timestamp scale numerator, see TimecodeScale."}],[2807729,{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:1e6,description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."}],[27045,{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."}],[27071,{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."}],[27132,{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."}],[4096955,{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."}],[4110627,{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."}],[3965867,{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."}],[3979555,{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."}],[29604,{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."}],[357149030,{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."}],[21420,{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element)."}],[21419,{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name."}],[19899,{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."}],[290298740,{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."}],[32379,{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."}],[32347,{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."}],[32437,{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."}],[32421,{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."}],[32410,{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."}],[32394,{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."}],[458458727,{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."}],[191,{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian"}],[236,{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."}],[17139,{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."}],[17138,{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."}],[17143,{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."}],[440786851,{name:"EBML",level:0,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."}]]),YTe=Math.floor,XTe=function(e){return!Fa(e)&amp;&amp;isFinite(e)&amp;&amp;YTe(e)===e};$o($o.S,"Number",{isInteger:XTe});var xF=ks.parseInt,QTe=lee.trim,JTe=/^[-+]?0[xX]/,wZ=xF(PD+"08")!==8||xF(PD+"0x16")!==22?function(e,t){var n=QTe(String(e),3);return xF(n,t&gt;&gt;&gt;0||(JTe.test(n)?16:10))}:xF;$o($o.S+$o.F*(Number.parseInt!=wZ),"Number",{parseInt:wZ});var TZ;function Ug(){}Ug.prototype=Object.create(null);function Un(){Un.init.call(this)}Un.EventEmitter=Un;Un.usingDomains=!1;Un.prototype.domain=void 0;Un.prototype._events=void 0;Un.prototype._maxListeners=void 0;Un.defaultMaxListeners=10;Un.init=function(){this.domain=null,Un.usingDomains&amp;&amp;TZ.active&amp;&amp;this instanceof TZ.Domain,(!this._events||this._events===Object.getPrototypeOf(this)._events)&amp;&amp;(this._events=new Ug,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Un.prototype.setMaxListeners=function(e){if(typeof e!="number"||e&lt;0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function xee(r){return r._maxListeners===void 0?Un.defaultMaxListeners:r._maxListeners}Un.prototype.getMaxListeners=function(){return xee(this)};function ZTe(r,e,t){if(e)r.call(t);else for(var n=r.length,o=FD(r,n),i=0;i&lt;n;++i)o[i].call(t)}function e1e(r,e,t,n){if(e)r.call(t,n);else for(var o=r.length,i=FD(r,o),s=0;s&lt;o;++s)i[s].call(t,n)}function t1e(r,e,t,n,o){if(e)r.call(t,n,o);else for(var i=r.length,s=FD(r,i),a=0;a&lt;i;++a)s[a].call(t,n,o)}function r1e(r,e,t,n,o,i){if(e)r.call(t,n,o,i);else for(var s=r.length,a=FD(r,s),l=0;l&lt;s;++l)a[l].call(t,n,o,i)}function n1e(r,e,t,n){if(e)r.apply(t,n);else for(var o=r.length,i=FD(r,o),s=0;s&lt;o;++s)i[s].apply(t,n)}Un.prototype.emit=function(e){var t,n,o,i,s,a,l,u=e==="error";if(a=this._events,a)u=u&amp;&amp;a.error==null;else if(!u)return!1;if(l=this.domain,u){if(t=arguments[1],l)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=l,t.domainThrown=!1,l.emit("error",t);else{if(t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}return!1}if(n=a[e],!n)return!1;var c=typeof n=="function";switch(o=arguments.length,o){case 1:ZTe(n,c,this);break;case 2:e1e(n,c,this,arguments[1]);break;case 3:t1e(n,c,this,arguments[1],arguments[2]);break;case 4:r1e(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(o-1),s=1;s&lt;o;s++)i[s-1]=arguments[s];n1e(n,c,this,i)}return!0};function wee(r,e,t,n){var o,i,s;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=r._events,i?(i.newListener&amp;&amp;(r.emit("newListener",e,t.listener?t.listener:t),i=r._events),s=i[e]):(i=r._events=new Ug,r._eventsCount=0),!s)s=i[e]=t,++r._eventsCount;else if(typeof s=="function"?s=i[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),!s.warned&amp;&amp;(o=xee(r),o&amp;&amp;o&gt;0&amp;&amp;s.length&gt;o)){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,o1e(a)}return r}function o1e(r){typeof console.warn=="function"?console.warn(r):console.log(r)}Un.prototype.addListener=function(e,t){return wee(this,e,t,!1)};Un.prototype.on=Un.prototype.addListener;Un.prototype.prependListener=function(e,t){return wee(this,e,t,!0)};function Tee(r,e,t){var n=!1;function o(){r.removeListener(e,o),n||(n=!0,t.apply(r,arguments))}return o.listener=t,o}Un.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Tee(this,e,t)),this};Un.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Tee(this,e,t)),this};Un.prototype.removeListener=function(e,t){var n,o,i,s,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(o=this._events,!o)return this;if(n=o[e],!n)return this;if(n===t||n.listener&amp;&amp;n.listener===t)--this._eventsCount===0?this._events=new Ug:(delete o[e],o.removeListener&amp;&amp;this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(i=-1,s=n.length;s-- &gt;0;)if(n[s]===t||n[s].listener&amp;&amp;n[s].listener===t){a=n[s].listener,i=s;break}if(i&lt;0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Ug,this;delete o[e]}else i1e(n,i);o.removeListener&amp;&amp;this.emit("removeListener",e,a||t)}return this};Un.prototype.removeAllListeners=function(e){var t,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Ug,this._eventsCount=0):n[e]&amp;&amp;(--this._eventsCount===0?this._events=new Ug:delete n[e]),this;if(arguments.length===0){for(var o=Object.keys(n),i=0,s;i&lt;o.length;++i)s=o[i],s!=="removeListener"&amp;&amp;this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new Ug,this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};Un.prototype.listeners=function(e){var t,n,o=this._events;return o?(t=o[e],t?typeof t=="function"?n=[t.listener||t]:n=s1e(t):n=[]):n=[],n};Un.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Dee.call(r,e)};Un.prototype.listenerCount=Dee;function Dee(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}Un.prototype.eventNames=function(){return this._eventsCount&gt;0?Reflect.ownKeys(this._events):[]};function i1e(r,e){for(var t=e,n=t+1,o=r.length;n&lt;o;t+=1,n+=1)r[t]=r[n];r.pop()}function FD(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}function s1e(r){for(var e=new Array(r.length),t=0;t&lt;e.length;++t)e[t]=r[t].listener||r[t];return e}function kee(){throw new Error("setTimeout has not been defined")}function Pee(){throw new Error("clearTimeout has not been defined")}var Fg=kee,Mg=Pee;typeof US.setTimeout=="function"&amp;&amp;(Fg=setTimeout);typeof US.clearTimeout=="function"&amp;&amp;(Mg=clearTimeout);function Aee(r){if(Fg===setTimeout)return setTimeout(r,0);if((Fg===kee||!Fg)&amp;&amp;setTimeout)return Fg=setTimeout,setTimeout(r,0);try{return Fg(r,0)}catch(e){try{return Fg.call(null,r,0)}catch(t){return Fg.call(this,r,0)}}}function a1e(r){if(Mg===clearTimeout)return clearTimeout(r);if((Mg===Pee||!Mg)&amp;&amp;clearTimeout)return Mg=clearTimeout,clearTimeout(r);try{return Mg(r)}catch(e){try{return Mg.call(null,r)}catch(t){return Mg.call(this,r)}}}var yf=[],OS=!1,Zb,IF=-1;function l1e(){!OS||!Zb||(OS=!1,Zb.length?yf=Zb.concat(yf):IF=-1,yf.length&amp;&amp;Iee())}function Iee(){if(!OS){var r=Aee(l1e);OS=!0;for(var e=yf.length;e;){for(Zb=yf,yf=[];++IF&lt;e;)Zb&amp;&amp;Zb[IF].run();IF=-1,e=yf.length}Zb=null,OS=!1,a1e(r)}}function bu(r){var e=new Array(arguments.length-1);if(arguments.length&gt;1)for(var t=1;t&lt;arguments.length;t++)e[t-1]=arguments[t];yf.push(new Eee(r,e)),yf.length===1&amp;&amp;!OS&amp;&amp;Aee(Iee)}function Eee(r,e){this.fun=r,this.array=e}Eee.prototype.run=function(){this.fun.apply(null,this.array)};var u1e="browser",d1e="browser",c1e=!0,p1e={},h1e=[],f1e="",m1e={},g1e={},v1e={};function iy(){}var b1e=iy,y1e=iy,C1e=iy,S1e=iy,x1e=iy,w1e=iy,T1e=iy;function D1e(r){throw new Error("process.binding is not supported")}function k1e(){return"/"}function P1e(r){throw new Error("process.chdir is not supported")}function A1e(){return 0}var RS=US.performance||{},I1e=RS.now||RS.mozNow||RS.msNow||RS.oNow||RS.webkitNow||function(){return new Date().getTime()};function E1e(r){var e=I1e.call(RS)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&amp;&amp;(t=t-r[0],n=n-r[1],n&lt;0&amp;&amp;(t--,n+=1e9)),[t,n]}var _1e=new Date;function F1e(){var r=new Date,e=r-_1e;return e/1e3}var M1e={nextTick:bu,title:u1e,browser:c1e,env:p1e,argv:h1e,version:f1e,versions:m1e,on:b1e,addListener:y1e,once:C1e,off:S1e,removeListener:x1e,removeAllListeners:w1e,emit:T1e,binding:D1e,cwd:k1e,chdir:P1e,umask:A1e,hrtime:E1e,platform:d1e,release:g1e,config:v1e,uptime:F1e},s5;typeof Object.create=="function"?s5=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:s5=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var zS=s5,N1e=/%[sdj%]/g;function B1e(r){if(!w5(r)){for(var e=[],t=0;t&lt;arguments.length;t++)e.push(zg(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,o=n.length,i=String(r).replace(N1e,function(a){if(a==="%%")return"%";if(t&gt;=o)return a;switch(a){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(l){return"[Circular]"}default:return a}}),s=n[t];t&lt;o;s=n[++t])x5(s)||!MD(s)?i+=" "+s:i+=" "+zg(s);return i}function _ee(r,e){if(Lg(US.process))return function(){return _ee(r,e).apply(this,arguments)};var t=!1;function n(){return t||(console.error(e),t=!0),r.apply(this,arguments)}return n}var wF={},Vz;function R1e(r){if(Lg(Vz)&amp;&amp;(Vz=M1e.env.NODE_DEBUG||""),r=r.toUpperCase(),!wF[r])if(new RegExp("\\b"+r+"\\b","i").test(Vz)){var e=0;wF[r]=function(){var t=B1e.apply(null,arguments);console.error("%s %d: %s",r,e,t)}}else wF[r]=function(){};return wF[r]}function zg(r,e){var t={seen:[],stylize:O1e};return arguments.length&gt;=3&amp;&amp;(t.depth=arguments[2]),arguments.length&gt;=4&amp;&amp;(t.colors=arguments[3]),Fee(e)?t.showHidden=e:e&amp;&amp;V1e(t,e),Lg(t.showHidden)&amp;&amp;(t.showHidden=!1),Lg(t.depth)&amp;&amp;(t.depth=2),Lg(t.colors)&amp;&amp;(t.colors=!1),Lg(t.customInspect)&amp;&amp;(t.customInspect=!0),t.colors&amp;&amp;(t.stylize=L1e),BF(t,r,t.depth)}zg.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};zg.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function L1e(r,e){var t=zg.styles[e];return t?"\x1B["+zg.colors[t][0]+"m"+r+"\x1B["+zg.colors[t][1]+"m":r}function O1e(r,e){return r}function U1e(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function BF(r,e,t){if(r.customInspect&amp;&amp;e&amp;&amp;Yz(e.inspect)&amp;&amp;e.inspect!==zg&amp;&amp;!(e.constructor&amp;&amp;e.constructor.prototype===e)){var n=e.inspect(t,r);return w5(n)||(n=BF(r,n,t)),n}var o=z1e(r,e);if(o)return o;var i=Object.keys(e),s=U1e(i);if(r.showHidden&amp;&amp;(i=Object.getOwnPropertyNames(e)),qz(e)&amp;&amp;(i.indexOf("message")&gt;=0||i.indexOf("description")&gt;=0))return jz(e);if(i.length===0){if(Yz(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Kz(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(DZ(e))return r.stylize(Date.prototype.toString.call(e),"date");if(qz(e))return jz(e)}var l="",u=!1,d=["{","}"];if(W1e(e)&amp;&amp;(u=!0,d=["[","]"]),Yz(e)){var c=e.name?": "+e.name:"";l=" [Function"+c+"]"}if(Kz(e)&amp;&amp;(l=" "+RegExp.prototype.toString.call(e)),DZ(e)&amp;&amp;(l=" "+Date.prototype.toUTCString.call(e)),qz(e)&amp;&amp;(l=" "+jz(e)),i.length===0&amp;&amp;(!u||e.length==0))return d[0]+l+d[1];if(t&lt;0)return Kz(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var p;return u?p=H1e(r,e,t,s,i):p=i.map(function(h){return a5(r,e,t,s,h,u)}),r.seen.pop(),G1e(p,l,d)}function z1e(r,e){if(Lg(e))return r.stylize("undefined","undefined");if(w5(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if($1e(e))return r.stylize(""+e,"number");if(Fee(e))return r.stylize(""+e,"boolean");if(x5(e))return r.stylize("null","null")}function jz(r){return"["+Error.prototype.toString.call(r)+"]"}function H1e(r,e,t,n,o){for(var i=[],s=0,a=e.length;s&lt;a;++s)Mee(e,String(s))?i.push(a5(r,e,t,n,String(s),!0)):i.push("");return o.forEach(function(l){l.match(/^\d+$/)||i.push(a5(r,e,t,n,l,!0))}),i}function a5(r,e,t,n,o,i){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},l.get?l.set?a=r.stylize("[Getter/Setter]","special"):a=r.stylize("[Getter]","special"):l.set&amp;&amp;(a=r.stylize("[Setter]","special")),Mee(n,o)||(s="["+o+"]"),a||(r.seen.indexOf(l.value)&lt;0?(x5(t)?a=BF(r,l.value,null):a=BF(r,l.value,t-1),a.indexOf(`
`)&gt;-1&amp;&amp;(i?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=r.stylize("[Circular]","special")),Lg(s)){if(i&amp;&amp;o.match(/^\d+$/))return a;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+a}function G1e(r,e,t){var n=r.reduce(function(o,i){return i.indexOf(`
`)&gt;=0,o+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n&gt;60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}function W1e(r){return Array.isArray(r)}function Fee(r){return typeof r=="boolean"}function x5(r){return r===null}function $1e(r){return typeof r=="number"}function w5(r){return typeof r=="string"}function Lg(r){return r===void 0}function Kz(r){return MD(r)&amp;&amp;T5(r)==="[object RegExp]"}function MD(r){return typeof r=="object"&amp;&amp;r!==null}function DZ(r){return MD(r)&amp;&amp;T5(r)==="[object Date]"}function qz(r){return MD(r)&amp;&amp;(T5(r)==="[object Error]"||r instanceof Error)}function Yz(r){return typeof r=="function"}function T5(r){return Object.prototype.toString.call(r)}function V1e(r,e){if(!e||!MD(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}function Mee(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function sy(){this.head=null,this.tail=null,this.length=0}sy.prototype.push=function(r){var e={data:r,next:null};this.length&gt;0?this.tail.next=e:this.head=e,this.tail=e,++this.length};sy.prototype.unshift=function(r){var e={data:r,next:this.head};this.length===0&amp;&amp;(this.tail=e),this.head=e,++this.length};sy.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};sy.prototype.clear=function(){this.head=this.tail=null,this.length=0};sy.prototype.join=function(r){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=r+e.data;return t};sy.prototype.concat=function(r){if(this.length===0)return Ye.alloc(0);if(this.length===1)return this.head.data;for(var e=Ye.allocUnsafe(r&gt;&gt;&gt;0),t=this.head,n=0;t;)t.data.copy(e,n),n+=t.data.length,t=t.next;return e};var j1e=Ye.isEncoding||function(r){switch(r&amp;&amp;r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function K1e(r){if(r&amp;&amp;!j1e(r))throw new Error("Unknown encoding: "+r)}function ND(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),K1e(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Y1e;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=X1e;break;default:this.write=q1e;return}this.charBuffer=new Ye(6),this.charReceived=0,this.charLength=0}ND.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length&gt;=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived&lt;this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=e.charCodeAt(e.length-1);if(o&gt;=55296&amp;&amp;o&lt;=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var n=r.length;this.charLength&amp;&amp;(r.copy(this.charBuffer,0,r.length-this.charReceived,n),n-=this.charReceived),e+=r.toString(this.encoding,0,n);var n=e.length-1,o=e.charCodeAt(n);if(o&gt;=55296&amp;&amp;o&lt;=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),r.copy(this.charBuffer,0,0,i),e.substring(0,n)}return e};ND.prototype.detectIncompleteChar=function(r){for(var e=r.length&gt;=3?3:r.length;e&gt;0;e--){var t=r[r.length-e];if(e==1&amp;&amp;t&gt;&gt;5==6){this.charLength=2;break}if(e&lt;=2&amp;&amp;t&gt;&gt;4==14){this.charLength=3;break}if(e&lt;=3&amp;&amp;t&gt;&gt;3==30){this.charLength=4;break}}this.charReceived=e};ND.prototype.end=function(r){var e="";if(r&amp;&amp;r.length&amp;&amp;(e=this.write(r)),this.charReceived){var t=this.charReceived,n=this.charBuffer,o=this.encoding;e+=n.slice(0,t).toString(o)}return e};function q1e(r){return r.toString(this.encoding)}function Y1e(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function X1e(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}Di.ReadableState=Nee;var So=R1e("stream");zS(Di,Un);function Q1e(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function J1e(r,e){return r.listeners(e).length}function Nee(r,e){r=r||{},this.objectMode=!!r.objectMode,e instanceof cd&amp;&amp;(this.objectMode=this.objectMode||!!r.readableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new sy,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&amp;&amp;(this.decoder=new ND(r.encoding),this.encoding=r.encoding)}function Di(r){if(!(this instanceof Di))return new Di(r);this._readableState=new Nee(r,this),this.readable=!0,r&amp;&amp;typeof r.read=="function"&amp;&amp;(this._read=r.read),Un.call(this)}Di.prototype.push=function(r,e){var t=this._readableState;return!t.objectMode&amp;&amp;typeof r=="string"&amp;&amp;(e=e||t.defaultEncoding,e!==t.encoding&amp;&amp;(r=Ye.from(r,e),e="")),Bee(this,t,r,e,!1)};Di.prototype.unshift=function(r){var e=this._readableState;return Bee(this,e,r,"",!0)};Di.prototype.isPaused=function(){return this._readableState.flowing===!1};function Bee(r,e,t,n,o){var i=tDe(e,t);if(i)r.emit("error",i);else if(t===null)e.reading=!1,rDe(r,e);else if(e.objectMode||t&amp;&amp;t.length&gt;0)if(e.ended&amp;&amp;!o){var s=new Error("stream.push() after EOF");r.emit("error",s)}else if(e.endEmitted&amp;&amp;o){var a=new Error("stream.unshift() after end event");r.emit("error",a)}else{var l;e.decoder&amp;&amp;!o&amp;&amp;!n&amp;&amp;(t=e.decoder.write(t),l=!e.objectMode&amp;&amp;t.length===0),o||(e.reading=!1),l||(e.flowing&amp;&amp;e.length===0&amp;&amp;!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,o?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&amp;&amp;jF(r))),nDe(r,e)}else o||(e.reading=!1);return Z1e(e)}function Z1e(r){return!r.ended&amp;&amp;(r.needReadable||r.length&lt;r.highWaterMark||r.length===0)}Di.prototype.setEncoding=function(r){return this._readableState.decoder=new ND(r),this._readableState.encoding=r,this};var kZ=8388608;function eDe(r){return r&gt;=kZ?r=kZ:(r--,r|=r&gt;&gt;&gt;1,r|=r&gt;&gt;&gt;2,r|=r&gt;&gt;&gt;4,r|=r&gt;&gt;&gt;8,r|=r&gt;&gt;&gt;16,r++),r}function PZ(r,e){return r&lt;=0||e.length===0&amp;&amp;e.ended?0:e.objectMode?1:r!==r?e.flowing&amp;&amp;e.length?e.buffer.head.data.length:e.length:(r&gt;e.highWaterMark&amp;&amp;(e.highWaterMark=eDe(r)),r&lt;=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}Di.prototype.read=function(r){So("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&amp;&amp;(e.emittedReadable=!1),r===0&amp;&amp;e.needReadable&amp;&amp;(e.length&gt;=e.highWaterMark||e.ended))return So("read: emitReadable",e.length,e.ended),e.length===0&amp;&amp;e.ended?Xz(this):jF(this),null;if(r=PZ(r,e),r===0&amp;&amp;e.ended)return e.length===0&amp;&amp;Xz(this),null;var n=e.needReadable;So("need readable",n),(e.length===0||e.length-r&lt;e.highWaterMark)&amp;&amp;(n=!0,So("length less than watermark",n)),e.ended||e.reading?(n=!1,So("reading or ended",n)):n&amp;&amp;(So("do read"),e.reading=!0,e.sync=!0,e.length===0&amp;&amp;(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=PZ(t,e)));var o;return r&gt;0?o=Ree(r,e):o=null,o===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&amp;&amp;(e.ended||(e.needReadable=!0),t!==r&amp;&amp;e.ended&amp;&amp;Xz(this)),o!==null&amp;&amp;this.emit("data",o),o};function tDe(r,e){var t=null;return!HF(e)&amp;&amp;typeof e!="string"&amp;&amp;e!==null&amp;&amp;e!==void 0&amp;&amp;!r.objectMode&amp;&amp;(t=new TypeError("Invalid non-string/buffer chunk")),t}function rDe(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&amp;&amp;t.length&amp;&amp;(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,jF(r)}}function jF(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(So("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?bu(AZ,r):AZ(r))}function AZ(r){So("emit readable"),r.emit("readable"),D5(r)}function nDe(r,e){e.readingMore||(e.readingMore=!0,bu(oDe,r,e))}function oDe(r,e){for(var t=e.length;!e.reading&amp;&amp;!e.flowing&amp;&amp;!e.ended&amp;&amp;e.length&lt;e.highWaterMark&amp;&amp;(So("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}Di.prototype._read=function(r){this.emit("error",new Error("not implemented"))};Di.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,So("pipe count=%d opts=%j",n.pipesCount,e);var o=!e||e.end!==!1,i=o?a:d;n.endEmitted?bu(i):t.once("end",i),r.on("unpipe",s);function s(v){So("onunpipe"),v===t&amp;&amp;d()}function a(){So("onend"),r.end()}var l=iDe(t);r.on("drain",l);var u=!1;function d(){So("cleanup"),r.removeListener("close",f),r.removeListener("finish",m),r.removeListener("drain",l),r.removeListener("error",h),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",d),t.removeListener("data",p),u=!0,n.awaitDrain&amp;&amp;(!r._writableState||r._writableState.needDrain)&amp;&amp;l()}var c=!1;t.on("data",p);function p(v){So("ondata"),c=!1;var b=r.write(v);b===!1&amp;&amp;!c&amp;&amp;((n.pipesCount===1&amp;&amp;n.pipes===r||n.pipesCount&gt;1&amp;&amp;Lee(n.pipes,r)!==-1)&amp;&amp;!u&amp;&amp;(So("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,c=!0),t.pause())}function h(v){So("onerror",v),g(),r.removeListener("error",h),J1e(r,"error")===0&amp;&amp;r.emit("error",v)}Q1e(r,"error",h);function f(){r.removeListener("finish",m),g()}r.once("close",f);function m(){So("onfinish"),r.removeListener("close",f),g()}r.once("finish",m);function g(){So("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(So("pipe resume"),t.resume()),r};function iDe(r){return function(){var e=r._readableState;So("pipeOnDrain",e.awaitDrain),e.awaitDrain&amp;&amp;e.awaitDrain--,e.awaitDrain===0&amp;&amp;r.listeners("data").length&amp;&amp;(e.flowing=!0,D5(r))}}Di.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&amp;&amp;r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&amp;&amp;r.emit("unpipe",this),this);if(!r){var t=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o&lt;n;o++)t[o].emit("unpipe",this);return this}var i=Lee(e.pipes,r);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,e.pipesCount===1&amp;&amp;(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};Di.prototype.on=function(r,e){var t=Un.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&amp;&amp;this.resume();else if(r==="readable"){var n=this._readableState;!n.endEmitted&amp;&amp;!n.readableListening&amp;&amp;(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&amp;&amp;jF(this,n):bu(sDe,this))}return t};Di.prototype.addListener=Di.prototype.on;function sDe(r){So("readable nexttick read 0"),r.read(0)}Di.prototype.resume=function(){var r=this._readableState;return r.flowing||(So("resume"),r.flowing=!0,aDe(this,r)),this};function aDe(r,e){e.resumeScheduled||(e.resumeScheduled=!0,bu(lDe,r,e))}function lDe(r,e){e.reading||(So("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),D5(r),e.flowing&amp;&amp;!e.reading&amp;&amp;r.read(0)}Di.prototype.pause=function(){return So("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&amp;&amp;(So("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function D5(r){var e=r._readableState;for(So("flow",e.flowing);e.flowing&amp;&amp;r.read()!==null;);}Di.prototype.wrap=function(r){var e=this._readableState,t=!1,n=this;r.on("end",function(){if(So("wrapped end"),e.decoder&amp;&amp;!e.ended){var s=e.decoder.end();s&amp;&amp;s.length&amp;&amp;n.push(s)}n.push(null)}),r.on("data",function(s){if(So("wrapped data"),e.decoder&amp;&amp;(s=e.decoder.write(s)),!(e.objectMode&amp;&amp;s==null)&amp;&amp;!(!e.objectMode&amp;&amp;(!s||!s.length))){var a=n.push(s);a||(t=!0,r.pause())}});for(var o in r)this[o]===void 0&amp;&amp;typeof r[o]=="function"&amp;&amp;(this[o]=function(s){return function(){return r[s].apply(r,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return hDe(i,function(s){r.on(s,n.emit.bind(n,s))}),n._read=function(s){So("wrapped _read",s),t&amp;&amp;(t=!1,r.resume())},n};Di._fromList=Ree;function Ree(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r&gt;=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=uDe(r,e.buffer,e.decoder),t}function uDe(r,e,t){var n;return r&lt;e.head.data.length?(n=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?n=e.shift():n=t?dDe(r,e):cDe(r,e),n}function dDe(r,e){var t=e.head,n=1,o=t.data;for(r-=o.length;t=t.next;){var i=t.data,s=r&gt;i.length?i.length:r;if(s===i.length?o+=i:o+=i.slice(0,r),r-=s,r===0){s===i.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=i.slice(s));break}++n}return e.length-=n,o}function cDe(r,e){var t=Ye.allocUnsafe(r),n=e.head,o=1;for(n.data.copy(t),r-=n.data.length;n=n.next;){var i=n.data,s=r&gt;i.length?i.length:r;if(i.copy(t,t.length-r,0,s),r-=s,r===0){s===i.length?(++o,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=i.slice(s));break}++o}return e.length-=o,t}function Xz(r){var e=r._readableState;if(e.length&gt;0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,bu(pDe,e,r))}function pDe(r,e){!r.endEmitted&amp;&amp;r.length===0&amp;&amp;(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function hDe(r,e){for(var t=0,n=r.length;t&lt;n;t++)e(r[t],t)}function Lee(r,e){for(var t=0,n=r.length;t&lt;n;t++)if(r[t]===e)return t;return-1}Ma.WritableState=k5;zS(Ma,Un);function fDe(){}function mDe(r,e,t){this.chunk=r,this.encoding=e,this.callback=t,this.next=null}function k5(r,e){Object.defineProperty(this,"buffer",{get:_ee(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,e instanceof cd&amp;&amp;(this.objectMode=this.objectMode||!!r.writableObjectMode);var t=r.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=r.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){xDe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Hee(this)}k5.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function Ma(r){if(!(this instanceof Ma)&amp;&amp;!(this instanceof cd))return new Ma(r);this._writableState=new k5(r,this),this.writable=!0,r&amp;&amp;(typeof r.write=="function"&amp;&amp;(this._write=r.write),typeof r.writev=="function"&amp;&amp;(this._writev=r.writev)),Un.call(this)}Ma.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function gDe(r,e){var t=new Error("write after end");r.emit("error",t),bu(e,t)}function vDe(r,e,t,n){var o=!0,i=!1;return t===null?i=new TypeError("May not write null values to stream"):!Ye.isBuffer(t)&amp;&amp;typeof t!="string"&amp;&amp;t!==void 0&amp;&amp;!e.objectMode&amp;&amp;(i=new TypeError("Invalid non-string/buffer chunk")),i&amp;&amp;(r.emit("error",i),bu(n,i),o=!1),o}Ma.prototype.write=function(r,e,t){var n=this._writableState,o=!1;return typeof e=="function"&amp;&amp;(t=e,e=null),Ye.isBuffer(r)?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&amp;&amp;(t=fDe),n.ended?gDe(this,t):vDe(this,n,r,t)&amp;&amp;(n.pendingcb++,o=yDe(this,n,r,e,t)),o};Ma.prototype.cork=function(){var r=this._writableState;r.corked++};Ma.prototype.uncork=function(){var r=this._writableState;r.corked&amp;&amp;(r.corked--,!r.writing&amp;&amp;!r.corked&amp;&amp;!r.finished&amp;&amp;!r.bufferProcessing&amp;&amp;r.bufferedRequest&amp;&amp;Oee(this,r))};Ma.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&amp;&amp;(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())&gt;-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function bDe(r,e,t){return!r.objectMode&amp;&amp;r.decodeStrings!==!1&amp;&amp;typeof e=="string"&amp;&amp;(e=Ye.from(e,t)),e}function yDe(r,e,t,n,o){t=bDe(e,t,n),Ye.isBuffer(t)&amp;&amp;(n="buffer");var i=e.objectMode?1:t.length;e.length+=i;var s=e.length&lt;e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var a=e.lastBufferedRequest;e.lastBufferedRequest=new mDe(t,n,o),a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else l5(r,e,!1,i,t,n,o);return s}function l5(r,e,t,n,o,i,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,t?r._writev(o,e.onwrite):r._write(o,i,e.onwrite),e.sync=!1}function CDe(r,e,t,n,o){--e.pendingcb,t?bu(o,n):o(n),r._writableState.errorEmitted=!0,r.emit("error",n)}function SDe(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function xDe(r,e){var t=r._writableState,n=t.sync,o=t.writecb;if(SDe(t),e)CDe(r,t,n,e,o);else{var i=Uee(t);!i&amp;&amp;!t.corked&amp;&amp;!t.bufferProcessing&amp;&amp;t.bufferedRequest&amp;&amp;Oee(r,t),n?bu(IZ,r,t,i,o):IZ(r,t,i,o)}}function IZ(r,e,t,n){t||wDe(r,e),e.pendingcb--,n(),zee(r,e)}function wDe(r,e){e.length===0&amp;&amp;e.needDrain&amp;&amp;(e.needDrain=!1,r.emit("drain"))}function Oee(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&amp;&amp;t&amp;&amp;t.next){var n=e.bufferedRequestCount,o=new Array(n),i=e.corkedRequestsFree;i.entry=t;for(var s=0;t;)o[s]=t,t=t.next,s+=1;l5(r,e,!0,e.length,o,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new Hee(e)}else{for(;t;){var a=t.chunk,l=t.encoding,u=t.callback,d=e.objectMode?1:a.length;if(l5(r,e,!1,d,a,l,u),t=t.next,e.writing)break}t===null&amp;&amp;(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}Ma.prototype._write=function(r,e,t){t(new Error("not implemented"))};Ma.prototype._writev=null;Ma.prototype.end=function(r,e,t){var n=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&amp;&amp;(t=e,e=null),r!=null&amp;&amp;this.write(r,e),n.corked&amp;&amp;(n.corked=1,this.uncork()),!n.ending&amp;&amp;!n.finished&amp;&amp;TDe(this,n,t)};function Uee(r){return r.ending&amp;&amp;r.length===0&amp;&amp;r.bufferedRequest===null&amp;&amp;!r.finished&amp;&amp;!r.writing}function EZ(r,e){e.prefinished||(e.prefinished=!0,r.emit("prefinish"))}function zee(r,e){var t=Uee(e);return t&amp;&amp;(e.pendingcb===0?(EZ(r,e),e.finished=!0,r.emit("finish")):EZ(r,e)),t}function TDe(r,e,t){e.ending=!0,zee(r,e),t&amp;&amp;(e.finished?bu(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Hee(r){var e=this;this.next=null,this.entry=null,this.finish=function(t){var n=e.entry;for(e.entry=null;n;){var o=n.callback;r.pendingcb--,o(t),n=n.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}}zS(cd,Di);var _Z=Object.keys(Ma.prototype);for(TF=0;TF&lt;_Z.length;TF++)DF=_Z[TF],cd.prototype[DF]||(cd.prototype[DF]=Ma.prototype[DF]);var DF,TF;function cd(r){if(!(this instanceof cd))return new cd(r);Di.call(this,r),Ma.call(this,r),r&amp;&amp;r.readable===!1&amp;&amp;(this.readable=!1),r&amp;&amp;r.writable===!1&amp;&amp;(this.writable=!1),this.allowHalfOpen=!0,r&amp;&amp;r.allowHalfOpen===!1&amp;&amp;(this.allowHalfOpen=!1),this.once("end",DDe)}function DDe(){this.allowHalfOpen||this._writableState.ended||bu(kDe,this)}function kDe(r){r.end()}zS(pd,cd);function PDe(r){this.afterTransform=function(e,t){return ADe(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function ADe(r,e,t){var n=r._transformState;n.transforming=!1;var o=n.writecb;if(!o)return r.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,t!=null&amp;&amp;r.push(t),o(e);var i=r._readableState;i.reading=!1,(i.needReadable||i.length&lt;i.highWaterMark)&amp;&amp;r._read(i.highWaterMark)}function pd(r){if(!(this instanceof pd))return new pd(r);cd.call(this,r),this._transformState=new PDe(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&amp;&amp;(typeof r.transform=="function"&amp;&amp;(this._transform=r.transform),typeof r.flush=="function"&amp;&amp;(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){FZ(e,t)}):FZ(e)})}pd.prototype.push=function(r,e){return this._transformState.needTransform=!1,cd.prototype.push.call(this,r,e)};pd.prototype._transform=function(r,e,t){throw new Error("Not implemented")};pd.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length&lt;o.highWaterMark)&amp;&amp;this._read(o.highWaterMark)}};pd.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&amp;&amp;e.writecb&amp;&amp;!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function FZ(r,e){if(e)return r.emit("error",e);var t=r._writableState,n=r._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}zS(ID,pd);function ID(r){if(!(this instanceof ID))return new ID(r);pd.call(this,r)}ID.prototype._transform=function(r,e,t){t(null,r)};zS(Sf,Un);Sf.Readable=Di;Sf.Writable=Ma;Sf.Duplex=cd;Sf.Transform=pd;Sf.PassThrough=ID;Sf.Stream=Sf;function Sf(){Un.call(this)}Sf.prototype.pipe=function(r,e){var t=this;function n(d){r.writable&amp;&amp;r.write(d)===!1&amp;&amp;t.pause&amp;&amp;t.pause()}t.on("data",n);function o(){t.readable&amp;&amp;t.resume&amp;&amp;t.resume()}r.on("drain",o),!r._isStdio&amp;&amp;(!e||e.end!==!1)&amp;&amp;(t.on("end",s),t.on("close",a));var i=!1;function s(){i||(i=!0,r.end())}function a(){i||(i=!0,typeof r.destroy=="function"&amp;&amp;r.destroy())}function l(d){if(u(),Un.listenerCount(this,"error")===0)throw d}t.on("error",l),r.on("error",l);function u(){t.removeListener("data",n),r.removeListener("drain",o),t.removeListener("end",s),t.removeListener("close",a),t.removeListener("error",l),r.removeListener("error",l),t.removeListener("end",u),t.removeListener("close",u),r.removeListener("close",u)}return t.on("end",u),t.on("close",u),r.on("close",u),r.emit("pipe",t),r};var Wo=Nz()("ebml:decoder"),kF=1,MZ=2,NZ=3,IDe=function(r){QZ(e,r);function e(){var t,n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};return h5(this,e),t=ZZ(this,_F(e).call(this,LS({},n,{readableObjectMode:!0}))),vf(fa(fa(t)),"mBuffer",null),vf(fa(fa(t)),"mTagStack",[]),vf(fa(fa(t)),"mState",kF),vf(fa(fa(t)),"mCursor",0),vf(fa(fa(t)),"mTotal",0),t}return f5(e,[{key:"_transform",value:function(n,o,i){for(this.buffer?this.buffer=Bg.concatenate(this.buffer,Ye.from(n)):this.buffer=Ye.from(n);this.cursor&lt;this.buffer.length&amp;&amp;!(this.state===kF&amp;&amp;!this.readTag()||this.state===MZ&amp;&amp;!this.readSize()||this.state===NZ&amp;&amp;!this.readContent()););i()}},{key:"readTag",value:function(){if(Wo.enabled&amp;&amp;Wo("parsing tag"),this.cursor&gt;=this.buffer.length)return Wo.enabled&amp;&amp;Wo("waiting for more data"),!1;var n=this.total,o=Bg.readVint(this.buffer,this.cursor);if(o==null)return Wo.enabled&amp;&amp;Wo("waiting for more data"),!1;var i=Bg.readHexString(this.buffer,this.cursor,this.cursor+o.length),s=Number.parseInt(i,16);this.cursor+=o.length,this.total+=o.length,this.state=MZ;var a={tag:o.value,tagStr:i,type:e.getSchemaInfo(s).type,name:e.getSchemaInfo(s).name,start:n,end:n+o.length};return this.tagStack.push(a),Wo.enabled&amp;&amp;Wo("read tag: ".concat(i)),!0}},{key:"readSize",value:function(){var n=this.tagStack[this.tagStack.length-1];if(Wo.enabled&amp;&amp;Wo("parsing size for tag: ".concat(n.tagStr)),this.cursor&gt;=this.buffer.length)return Wo.enabled&amp;&amp;Wo("waiting for more data"),!1;var o=Bg.readVint(this.buffer,this.cursor);return o==null?(Wo.enabled&amp;&amp;Wo("waiting for more data"),!1):(this.cursor+=o.length,this.total+=o.length,this.state=NZ,n.dataSize=o.value,o.value===-1?n.end=-1:n.end+=o.value+o.length,Wo.enabled&amp;&amp;Wo("read size: ".concat(o.value)),!0)}},{key:"readContent",value:function(){var n=this.tagStack[this.tagStack.length-1],o=n.tagStr,i=n.type,s=n.dataSize,a=JZ(n,["tagStr","type","dataSize"]);if(Wo.enabled&amp;&amp;Wo("parsing content for tag: ".concat(o)),i==="m")return Wo.enabled&amp;&amp;Wo("content should be tags"),this.push(["start",LS({tagStr:o,type:i,dataSize:s},a)]),this.state=kF,!0;if(this.buffer.length&lt;this.cursor+s)return Wo.enabled&amp;&amp;(Wo("got: ".concat(this.buffer.length)),Wo("need: ".concat(this.cursor+s)),Wo("waiting for more data")),!1;var l=this.buffer.subarray(this.cursor,this.cursor+s);for(this.total+=s,this.state=kF,this.buffer=this.buffer.subarray(this.cursor+s),this.cursor=0,this.tagStack.pop(),this.push(["tag",Bg.readDataFromTag(LS({tagStr:o,type:i,dataSize:s},a),Ye.from(l))]);this.tagStack.length&gt;0;){var u=this.tagStack[this.tagStack.length-1];if(this.total&lt;u.end)break;this.push(["end",u]),this.tagStack.pop()}return Wo.enabled&amp;&amp;Wo("read data: ".concat(l.toString("hex"))),!0}},{key:"buffer",get:function(){return this.mBuffer},set:function(n){this.mBuffer=n}},{key:"cursor",get:function(){return this.mCursor},set:function(n){this.mCursor=n}},{key:"state",get:function(){return this.mState},set:function(n){this.mState=n}},{key:"tagStack",get:function(){return this.mTagStack}},{key:"total",get:function(){return this.mTotal},set:function(n){this.mTotal=n}}],[{key:"getSchemaInfo",value:function(n){return Number.isInteger(n)&amp;&amp;AD.has(n)?AD.get(n):{type:null,name:"unknown",description:"",level:-1,minver:-1,multiple:!1,webm:!1}}}]),e}(pd),BZ=Array.isArray||function(e){return ty(e)=="Array"},EDe=fd("species"),_De=function(r){var e;return BZ(r)&amp;&amp;(e=r.constructor,typeof e=="function"&amp;&amp;(e===Array||BZ(e.prototype))&amp;&amp;(e=void 0),Fa(e)&amp;&amp;(e=e[EDe],e===null&amp;&amp;(e=void 0))),e===void 0?Array:e},FDe=function(r,e){return new(_De(r))(e)},MDe=function(r,e){var t=r==1,n=r==2,o=r==3,i=r==4,s=r==6,a=r==5||s,l=e||FDe;return function(u,d,c){for(var p=C5(u),h=ree(p),f=ey(d,c,3),m=ED(h.length),g=0,v=t?l(u,m):n?l(u,0):void 0,b,C;m&gt;g;g++)if((a||g in h)&amp;&amp;(b=h[g],C=f(b,g,p),r)){if(t)v[g]=C;else if(C)switch(r){case 3:return!0;case 5:return b;case 6:return g;case 2:v.push(b)}else if(i)return!1}return s?-1:o||i?i:v}},NDe=MDe(5),u5="find",Gee=!0;u5 in[]&amp;&amp;Array(1)[u5](function(){Gee=!1});$o($o.P+$o.F*Gee,"Array",{find:function(e){return NDe(this,e,arguments.length&gt;1?arguments[1]:void 0)}});VF(u5);var RF=il;function il(r){if(!(this instanceof il))return new il(r);this.buffers=r||[],this.length=this.buffers.reduce(function(e,t){return e+t.length},0)}il.prototype.push=function(){for(var r=0;r&lt;arguments.length;r++)if(!HF(arguments[r]))throw new TypeError("Tried to push a non-buffer");for(var r=0;r&lt;arguments.length;r++){var e=arguments[r];this.buffers.push(e),this.length+=e.length}return this.length};il.prototype.unshift=function(){for(var r=0;r&lt;arguments.length;r++)if(!HF(arguments[r]))throw new TypeError("Tried to unshift a non-buffer");for(var r=0;r&lt;arguments.length;r++){var e=arguments[r];this.buffers.unshift(e),this.length+=e.length}return this.length};il.prototype.copy=function(r,e,t,n){return this.slice(t,n).copy(r,e,0,n-t)};il.prototype.splice=function(r,e){var t=this.buffers,n=r&gt;=0?r:this.length-r,o=[].slice.call(arguments,2);e===void 0?e=this.length-n:e&gt;this.length-n&amp;&amp;(e=this.length-n);for(var r=0;r&lt;o.length;r++)this.length+=o[r].length;for(var i=new il,s=0,a=0;a&lt;t.length&amp;&amp;s+t[a].length&lt;n;a++)s+=t[a].length;if(n-s&gt;0){var l=n-s;if(l+e&lt;t[a].length){i.push(t[a].slice(l,l+e));for(var u=t[a],d=new Ye(l),r=0;r&lt;l;r++)d[r]=u[r];for(var c=new Ye(u.length-l-e),r=l+e;r&lt;u.length;r++)c[r-e-l]=u[r];if(o.length&gt;0){var p=o.slice();p.unshift(d),p.push(c),t.splice.apply(t,[a,1].concat(p)),a+=p.length,o=[]}else t.splice(a,1,d,c),a+=2}else i.push(t[a].slice(l)),t[a]=t[a].slice(0,l),a++}for(o.length&gt;0&amp;&amp;(t.splice.apply(t,[a,0].concat(o)),a+=o.length);i.length&lt;e;){var h=t[a],f=h.length,m=Math.min(f,e-i.length);m===f?(i.push(h),t.splice(a,1)):(i.push(h.slice(0,m)),t[a]=t[a].slice(m))}return this.length-=i.length,i};il.prototype.slice=function(r,e){var t=this.buffers;e===void 0&amp;&amp;(e=this.length),r===void 0&amp;&amp;(r=0),e&gt;this.length&amp;&amp;(e=this.length);for(var n=0,o=0;o&lt;t.length&amp;&amp;n+t[o].length&lt;=r;o++)n+=t[o].length;for(var i=new Ye(e-r),s=0,a=o;s&lt;e-r&amp;&amp;a&lt;t.length;a++){var l=t[a].length,u=s===0?r-n:0,d=s+l&gt;=e-r?Math.min(u+(e-r)-s,l):l;t[a].copy(i,s,u,d),s+=d-u}return i};il.prototype.pos=function(r){if(r&lt;0||r&gt;=this.length)throw new Error("oob");for(var e=r,t=0,n=null;;){if(n=this.buffers[t],e&lt;n.length)return{buf:t,offset:e};e-=n.length,t++}};il.prototype.get=function(e){var t=this.pos(e);return this.buffers[t.buf].get(t.offset)};il.prototype.set=function(e,t){var n=this.pos(e);return this.buffers[n.buf].set(n.offset,t)};il.prototype.indexOf=function(r,e){if(typeof r=="string")r=new Ye(r);else if(!(r instanceof Ye))throw new Error("Invalid type for a search string");if(!r.length)return 0;if(!this.length)return-1;var t=0,n=0,o=0,i,s=0;if(e){var a=this.pos(e);t=a.buf,n=a.offset,s=e}for(;;){for(;n&gt;=this.buffers[t].length;)if(n=0,t++,t&gt;=this.buffers.length)return-1;var l=this.buffers[t][n];if(l==r[o]){if(o==0&amp;&amp;(i={i:t,j:n,pos:s}),o++,o==r.length)return i.pos}else o!=0&amp;&amp;(t=i.i,n=i.j,s=i.pos,o=0);n++,s++}};il.prototype.toBuffer=function(){return this.slice()};il.prototype.toString=function(r,e,t){return this.slice(e,t).toString(r)};var BS=Nz()("ebml:encoder");function RZ(r,e,t){return RF(t===-1?[r,Ye.from("01ffffffffffffff","hex"),e]:[r,Bg.writeVint(e.length),e])}var BDe=function(r){QZ(e,r);function e(){var t,n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{};return h5(this,e),t=ZZ(this,_F(e).call(this,LS({},n,{writableObjectMode:!0}))),vf(fa(fa(t)),"mBuffer",null),vf(fa(fa(t)),"mCorked",!1),vf(fa(fa(t)),"mStack",[]),t}return f5(e,[{key:"_transform",value:function(n,o,i){var s=zwe(n,2),a=s[0],l=s[1],u=l.data,d=l.name,c=JZ(l,["data","name"]);switch(BS.enabled&amp;&amp;BS("encode ".concat(a," ").concat(d)),a){case"start":this.startTag(d,LS({name:d,data:u},c));break;case"tag":this.writeTag(d,u);break;case"end":this.endTag();break;default:break}i()}},{key:"flush",value:function(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:function(){};if(!this.buffer||this.corked){BS.enabled&amp;&amp;BS("no buffer/nothing pending"),n();return}BS.enabled&amp;&amp;BS("writing ".concat(this.buffer.length," bytes"));var o=Ye.from(this.buffer);this.buffer=null,this.push(o),n()}},{key:"bufferAndFlush",value:function(n){this.buffer?this.buffer=Bg.concatenate(this.buffer,n):this.buffer=RF(n),this.flush()}},{key:"_flush",value:function(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:function(){};this.flush(n)}},{key:"_bufferAndFlush",value:function(n){this.bufferAndFlush(n)}},{key:"cork",value:function(){this.corked=!0}},{key:"uncork",value:function(){this.corked=!1,this.flush()}},{key:"writeTag",value:function(n,o){var i=e.getSchemaInfo(n);if(!i)throw new Error("No schema entry found for ".concat(n));if(o){var s=RZ(i,o);this.stack.length&gt;0?this.stack[this.stack.length-1].children.push({data:s}):this.bufferAndFlush(s.buffer)}}},{key:"startTag",value:function(n,o){var i=o.end,s=e.getSchemaInfo(n);if(!s)throw new Error("No schema entry found for ".concat(n));var a={data:null,id:s,name:n,end:i,children:[]};this.stack.length&gt;0&amp;&amp;this.stack[this.stack.length-1].children.push(a),this.stack.push(a)}},{key:"endTag",value:function(){var n=this.stack.pop(),o=n.children.map(function(i){return i.data});n.data=RZ(n.id,RF(o),n.end),this.stack.length&lt;1&amp;&amp;this.bufferAndFlush(n.data.buffer),this.end()}},{key:"buffer",get:function(){return this.mBuffer},set:function(n){this.mBuffer=n}},{key:"corked",get:function(){return this.mCorked},set:function(n){this.mCorked=n}},{key:"stack",get:function(){return this.mStack},set:function(n){this.mStack=n}}],[{key:"getSchemaInfo",value:function(n){var o=Array.from(AD.keys()).find(function(i){return AD.get(i).name===n});return o||null}}]),e}(pd);HS.tools=Bg;HS.schema=AD;HS.Decoder=IDe;HS.Encoder=BDe});var A5=Qt(BD=&gt;{var RDe,LDe,ODe,UDe;(function(r){var e="undefined",t=e!==typeof Buffer&amp;&amp;Buffer,n=e!==typeof Uint8Array&amp;&amp;Uint8Array,o=e!==typeof ArrayBuffer&amp;&amp;ArrayBuffer,i=[0,0,0,0,0,0,0,0],s=Array.isArray||y,a=4294967296,l=16777216,u;RDe=d("Uint64BE",!0,!0),LDe=d("Int64BE",!0,!1),ODe=d("Uint64LE",!1,!0),UDe=d("Int64LE",!1,!1);function d(S,T,w){var k=T?0:4,A=T?4:0,I=T?0:3,E=T?1:2,O=T?2:1,Q=T?3:0,j=T?v:C,U=T?b:x,B=V.prototype,z="is"+S,N="_"+z;return B.buffer=void 0,B.offset=0,B[N]=!0,B.toNumber=ae,B.toString=Y,B.toJSON=ae,B.toArray=c,t&amp;&amp;(B.toBuffer=p),n&amp;&amp;(B.toArrayBuffer=h),V[z]=re,r[S]=V,V;function V(ee,F,L,$){return this instanceof V?ce(this,ee,F,L,$):new V(ee,F,L,$)}function re(ee){return!!(ee&amp;&amp;ee[N])}function ce(ee,F,L,$,P){if(n&amp;&amp;o&amp;&amp;(F instanceof o&amp;&amp;(F=new n(F)),$ instanceof o&amp;&amp;($=new n($))),!F&amp;&amp;!L&amp;&amp;!$&amp;&amp;!u){ee.buffer=g(i,0);return}if(!f(F,L)){var X=u||Array;P=L,$=F,L=0,F=u===t?t.alloc(8):new X(8)}ee.buffer=F,ee.offset=L|=0,e!==typeof $&amp;&amp;(typeof $=="string"?ge(F,L,$,P||10):f($,P)?m(F,L,$,P):typeof P=="number"?(W(F,L+k,$),W(F,L+A,P)):$&gt;0?j(F,L,$):$&lt;0?U(F,L,$):m(F,L,i,0))}function ge(ee,F,L,$){var P=0,X=L.length,K=0,R=0;L[0]==="-"&amp;&amp;P++;for(var H=P;P&lt;X;){var J=parseInt(L[P++],$);if(!(J&gt;=0))break;R=R*$+J,K=K*$+Math.floor(R/a),R%=a}H&amp;&amp;(K=~K,R?R=a-R:K++),W(ee,F+k,K),W(ee,F+A,R)}function ae(){var ee=this.buffer,F=this.offset,L=G(ee,F+k),$=G(ee,F+A);return w||(L|=0),L?L*a+$:$}function Y(ee){var F=this.buffer,L=this.offset,$=G(F,L+k),P=G(F,L+A),X="",K=!w&amp;&amp;$&amp;2147483648;for(K&amp;&amp;($=~$,P=a-P),ee=ee||10;;){var R=$%ee*a+P;if($=Math.floor($/ee),P=Math.floor(R/ee),X=(R%ee).toString(ee)+X,!$&amp;&amp;!P)break}return K&amp;&amp;(X="-"+X),X}function W(ee,F,L){ee[F+Q]=L&amp;255,L=L&gt;&gt;8,ee[F+O]=L&amp;255,L=L&gt;&gt;8,ee[F+E]=L&amp;255,L=L&gt;&gt;8,ee[F+I]=L&amp;255}function G(ee,F){return ee[F+I]*l+(ee[F+E]&lt;&lt;16)+(ee[F+O]&lt;&lt;8)+ee[F+Q]}}function c(S){var T=this.buffer,w=this.offset;return u=null,S!==!1&amp;&amp;s(T)?T.length===8?T:T.slice(w,w+8):g(T,w)}function p(S){var T=this.buffer,w=this.offset;return u=t,S!==!1&amp;&amp;t.isBuffer(T)?T.length===8?T:T.slice(w,w+8):t.from(h.call(this,S))}function h(S){var T=this.buffer,w=this.offset,k=T.buffer;if(u=n,S!==!1&amp;&amp;!T.offset&amp;&amp;k instanceof o)return k.byteLength===8?k:k.slice(w,w+8);var A=new n(8);return m(A,0,T,w),A.buffer}function f(S,T){var w=S&amp;&amp;S.length;return T|=0,w&amp;&amp;T+8&lt;=w&amp;&amp;typeof S[T]!="string"}function m(S,T,w,k){T|=0,k|=0;for(var A=0;A&lt;8;A++)S[T++]=w[k++]&amp;255}function g(S,T){return Array.prototype.slice.call(S,T,T+8)}function v(S,T,w){for(var k=T+8;k&gt;T;)S[--k]=w&amp;255,w/=256}function b(S,T,w){var k=T+8;for(w++;k&gt;T;)S[--k]=-w&amp;255^255,w/=256}function C(S,T,w){for(var k=T+8;T&lt;k;)S[T++]=w&amp;255,w/=256}function x(S,T,w){var k=T+8;for(w++;T&lt;k;)S[T++]=-w&amp;255^255,w/=256}function y(S){return!!S&amp;&amp;Object.prototype.toString.call(S)=="[object Array]"}})(typeof BD=="object"&amp;&amp;typeof BD.nodeName!="string"?BD:BD||{})});var I5=Qt((GWe,Wee)=&gt;{Wee.exports={byEbmlID:{128:{name:"ChapterDisplay",level:4,type:"m",multiple:!0,webm:!0,description:"Contains all possible strings to use for the chapter display.",minver:1,crc:!1},131:{name:"TrackType",level:3,type:"u",multiple:!1,webm:!0,description:"The `TrackType` defines the type of each frame found in the Track. The value **SHOULD** be stored on 1 octet.",mandatory:!0,minver:1,crc:!1},133:{name:"ChapString",level:5,type:"8",multiple:!1,webm:!0,description:"Contains the string to use as the chapter atom.",mandatory:!0,cppname:"ChapterString",minver:1,crc:!1},134:{name:"CodecID",level:3,type:"s",multiple:!1,webm:!0,description:"An ID corresponding to the codec, see [@!MatroskaCodec] for more info.",mandatory:!0,minver:1,crc:!1},136:{name:"FlagDefault",level:3,type:"u",multiple:!1,webm:!0,description:"Set if that track (audio, video or subs) **SHOULD** be eligible for automatic selection by the player; see (#default-track-selection) for more details.",mandatory:!0,range:"0-1",cppname:"TrackFlagDefault",minver:1,default:"1",crc:!1},137:{name:"ChapterTrackUID",level:5,type:"u",multiple:!0,description:"UID of the Track to apply this chapter to. In the absence of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absence of this Element indicates that the Chapter **SHOULD** be applied to any currently used Tracks.",mandatory:!0,range:"not 0",cppname:"ChapterTrackNumber",minver:1,crc:!1},142:{name:"Slices",level:3,type:"m",multiple:!1,description:"Contains slices description.",minver:0,maxver:0,crc:!1},143:{name:"ChapterTrack",level:4,type:"m",multiple:!1,description:"List of tracks on which the chapter applies. If this Element is not present, all tracks apply",minver:1,crc:!1},145:{name:"ChapterTimeStart",level:4,type:"u",multiple:!1,webm:!0,description:"Timestamp of the start of Chapter, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks).",mandatory:!0,minver:1,crc:!1},146:{name:"ChapterTimeEnd",level:4,type:"u",multiple:!1,webm:!0,description:"Timestamp of the end of Chapter timestamp excluded, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks). The value **MUST** be greater than or equal to the `ChapterTimeStart` of the same `ChapterAtom`.",minver:1,crc:!1},150:{name:"CueRefTime",level:5,type:"u",multiple:!1,description:"Timestamp of the referenced Block, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks).",mandatory:!0,minver:2,crc:!1},151:{name:"CueRefCluster",level:5,type:"u",multiple:!1,description:"The Segment Position of the Cluster containing the referenced Block.",mandatory:!0,minver:0,maxver:0,crc:!1},152:{name:"ChapterFlagHidden",level:4,type:"u",multiple:!1,description:"Set to 1 if a chapter is hidden. Hidden chapters **SHOULD NOT** be available to the user interface (but still to Control Tracks; see (#chapterflaghidden) on Chapter flags).",mandatory:!0,range:"0-1",minver:1,default:"0",crc:!1},154:{name:"FlagInterlaced",level:4,type:"u",multiple:!1,webm:!0,description:"Specify whether the video frames in this track are interlaced or not.",mandatory:!0,cppname:"VideoFlagInterlaced",minver:2,default:"0",crc:!1},155:{name:"BlockDuration",level:3,type:"u",multiple:!1,webm:!0,description:"The duration of the Block, expressed in Track Ticks; see (#timestamp-ticks). The BlockDuration Element can be useful at the end of a Track to define the duration of the last frame (as there is no subsequent Block available), or when there is a break in a track like for subtitle tracks.",minver:1,crc:!1},156:{name:"FlagLacing",level:3,type:"u",multiple:!1,webm:!0,description:"Set to 1 if the track **MAY** contain blocks using lacing. When set to 0 all blocks **MUST** have their lacing flags set to No lacing; see (#block-lacing) on Block Lacing.",mandatory:!0,range:"0-1",cppname:"TrackFlagLacing",minver:1,default:"1",crc:!1},157:{name:"FieldOrder",level:4,type:"u",multiple:!1,description:"Specify the field ordering of video frames in this track.",mandatory:!0,cppname:"VideoFieldOrder",minver:4,default:"2",crc:!1},159:{name:"Channels",level:4,type:"u",multiple:!1,webm:!0,description:"Numbers of channels in the track.",mandatory:!0,range:"not 0",cppname:"AudioChannels",minver:1,default:"1",crc:!1},160:{name:"BlockGroup",level:2,type:"m",multiple:!0,webm:!0,description:"Basic container of information containing a single Block and information specific to that Block.",minver:1,crc:!1},161:{name:"Block",level:3,type:"b",multiple:!1,webm:!0,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timestamp; see (#block-structure) on Block Structure.",mandatory:!0,minver:1,crc:!1},162:{name:"BlockVirtual",level:3,type:"b",multiple:!1,description:"A Block with no data. It **MUST** be stored in the stream at the place the real Block would be in display order. ",minver:0,maxver:0,crc:!1},163:{name:"SimpleBlock",level:2,type:"b",multiple:!0,webm:!0,description:"Similar to Block, see (#block-structure), but without all the extra information, mostly used to reduced overhead when no extra feature is needed; see (#simpleblock-structure) on SimpleBlock Structure.",minver:2,divx:!0,crc:!1},164:{name:"CodecState",level:3,type:"b",multiple:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information **SHOULD** always be referenced by a seek entry.",minver:2,crc:!1},165:{name:"BlockAdditional",level:5,type:"b",multiple:!1,webm:!0,description:"Interpreted by the codec as it wishes (using the BlockAddID).",mandatory:!0,minver:1,crc:!1},166:{name:"BlockMore",level:4,type:"m",multiple:!0,webm:!0,description:"Contain the BlockAdditional and some parameters.",mandatory:!0,minver:1,crc:!1},167:{name:"Position",level:2,type:"u",multiple:!1,description:"The Segment Position of the Cluster in the Segment (0 in live streams). It might help to resynchronise offset on damaged streams.",cppname:"ClusterPosition",minver:1,crc:!1},170:{name:"CodecDecodeAll",level:3,type:"u",multiple:!1,description:"Set to 1 if the codec can decode potentially damaged data.",mandatory:!0,range:"0-1",minver:1,maxver:0,default:"1",crc:!1},171:{name:"PrevSize",level:2,type:"u",multiple:!1,webm:!0,description:"Size of the previous Cluster, in octets. Can be useful for backward playing.",cppname:"ClusterPrevSize",minver:1,crc:!1},174:{name:"TrackEntry",level:2,type:"m",multiple:!0,webm:!0,description:"Describes a track with all Elements.",mandatory:!0,minver:1,crc:!1},175:{name:"EncryptedBlock",level:2,type:"b",multiple:!0,description:"Similar to SimpleBlock, see (#simpleblock-structure), but the data inside the Block are Transformed (encrypt and/or signed).",minver:0,maxver:0,crc:!1},176:{name:"PixelWidth",level:4,type:"u",multiple:!1,webm:!0,description:"Width of the encoded video frames in pixels.",mandatory:!0,range:"not 0",cppname:"VideoPixelWidth",minver:1,crc:!1},178:{name:"CueDuration",level:4,type:"u",multiple:!1,webm:!0,description:"The duration of the block, expressed in Segment Ticks which is based on TimestampScale; see (#timestamp-ticks). If missing, the track's DefaultDuration does not apply and no duration information is available in terms of the cues.",minver:4,crc:!1},179:{name:"CueTime",level:3,type:"u",multiple:!1,webm:!0,description:"Absolute timestamp of the seek point, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks).",mandatory:!0,minver:1,crc:!1},181:{name:"SamplingFrequency",level:4,type:"f",multiple:!1,webm:!0,description:"Sampling frequency in Hz.",mandatory:!0,range:"&gt; 0x0p+0",cppname:"AudioSamplingFreq",minver:1,default:"0x1.f4p+12",crc:!1},182:{name:"ChapterAtom",level:3,type:"m",multiple:!0,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks).",mandatory:!0,minver:1,crc:!1},183:{name:"CueTrackPositions",level:3,type:"m",multiple:!0,webm:!0,description:"Contain positions for different tracks corresponding to the timestamp.",mandatory:!0,minver:1,crc:!1},185:{name:"FlagEnabled",level:3,type:"u",multiple:!1,webm:!0,description:"Set to 1 if the track is usable. It is possible to turn a not usable track into a usable track using chapter codecs or control tracks.",mandatory:!0,range:"0-1",cppname:"TrackFlagEnabled",minver:2,default:"1",crc:!1},186:{name:"PixelHeight",level:4,type:"u",multiple:!1,webm:!0,description:"Height of the encoded video frames in pixels.",mandatory:!0,range:"not 0",cppname:"VideoPixelHeight",minver:1,crc:!1},187:{name:"CuePoint",level:2,type:"m",multiple:!0,webm:!0,description:"Contains all information relative to a seek point in the Segment.",mandatory:!0,minver:1,crc:!1},191:{name:"CRC-32",level:-1,type:"b",multiple:!0,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian.",minver:1,crc:!0,webm:!1},192:{name:"TrickTrackUID",level:3,type:"u",multiple:!1,description:"The TrackUID of the Smooth FF/RW video in the paired EBML structure corresponding to this video track. See [@?DivXTrickTrack].",minver:0,maxver:0,divx:!0,crc:!1},193:{name:"TrickTrackSegmentUID",level:3,type:"b",multiple:!1,description:"The SegmentUID of the Segment containing the track identified by TrickTrackUID. See [@?DivXTrickTrack].",minver:0,maxver:0,divx:!0,crc:!1},196:{name:"TrickMasterTrackSegmentUID",level:3,type:"b",multiple:!1,description:"The SegmentUID of the Segment containing the track identified by MasterTrackUID. See [@?DivXTrickTrack].",minver:0,maxver:0,divx:!0,crc:!1},198:{name:"TrickTrackFlag",level:3,type:"u",multiple:!1,description:"Set to 1 if this video track is a Smooth FF/RW track. If set to 1, MasterTrackUID and MasterTrackSegUID should must be present and BlockGroups for this track must contain ReferenceFrame structures. Otherwise, TrickTrackUID and TrickTrackSegUID must be present if this track has a corresponding Smooth FF/RW track. See [@?DivXTrickTrack].",minver:0,maxver:0,default:"0",divx:!0,crc:!1},199:{name:"TrickMasterTrackUID",level:3,type:"u",multiple:!1,description:"The TrackUID of the video track in the paired EBML structure that corresponds to this Smooth FF/RW track. See [@?DivXTrickTrack].",minver:0,maxver:0,divx:!0,crc:!1},200:{name:"ReferenceFrame",level:3,type:"m",multiple:!1,description:"Contains information about the last reference frame. See [@?DivXTrickTrack].",minver:0,maxver:0,divx:!0,crc:!1},201:{name:"ReferenceOffset",level:4,type:"u",multiple:!1,description:"The relative offset, in bytes, from the previous BlockGroup element for this Smooth FF/RW video track to the containing BlockGroup element. See [@?DivXTrickTrack].",mandatory:!0,minver:0,maxver:0,divx:!0,crc:!1},202:{name:"ReferenceTimestamp",level:4,type:"u",multiple:!1,description:"The timestamp of the BlockGroup pointed to by ReferenceOffset, expressed in Track Ticks; see (#timestamp-ticks). See [@?DivXTrickTrack].",mandatory:!0,cppname:"ReferenceTimeCode",minver:0,maxver:0,divx:!0,crc:!1},203:{name:"BlockAdditionID",level:5,type:"u",multiple:!1,description:"The ID of the BlockAdditional Element (0 is the main Block).",cppname:"SliceBlockAddID",minver:0,maxver:0,default:"0",crc:!1},204:{name:"LaceNumber",level:5,type:"u",multiple:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). Being able to interpret this Element is not **REQUIRED** for playback.",cppname:"SliceLaceNumber",minver:0,maxver:0,crc:!1},205:{name:"FrameNumber",level:5,type:"u",multiple:!1,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame).",cppname:"SliceFrameNumber",minver:0,maxver:0,default:"0",crc:!1},206:{name:"Delay",level:5,type:"u",multiple:!1,description:"The delay to apply to the Element, expressed in Track Ticks; see (#timestamp-ticks).",cppname:"SliceDelay",minver:0,maxver:0,default:"0",crc:!1},207:{name:"SliceDuration",level:5,type:"u",multiple:!1,description:"The duration to apply to the Element, expressed in Track Ticks; see (#timestamp-ticks).",minver:0,maxver:0,default:"0",crc:!1},215:{name:"TrackNumber",level:3,type:"u",multiple:!1,webm:!0,description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number).",mandatory:!0,range:"not 0",minver:1,crc:!1},219:{name:"CueReference",level:4,type:"m",multiple:!0,description:"The Clusters containing the referenced Blocks.",minver:2,crc:!1},224:{name:"Video",level:3,type:"m",multiple:!1,webm:!0,description:"Video settings.",cppname:"TrackVideo",minver:1,crc:!1},225:{name:"Audio",level:3,type:"m",multiple:!1,webm:!0,description:"Audio settings.",cppname:"TrackAudio",minver:1,crc:!1},226:{name:"TrackOperation",level:3,type:"m",multiple:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at (#track-operation).",minver:3,crc:!1},227:{name:"TrackCombinePlanes",level:4,type:"m",multiple:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track",minver:3,crc:!1},228:{name:"TrackPlane",level:5,type:"m",multiple:!0,description:"Contains a video plane track that need to be combined to create this 3D track",mandatory:!0,minver:3,crc:!1},229:{name:"TrackPlaneUID",level:6,type:"u",multiple:!1,description:"The trackUID number of the track representing the plane.",mandatory:!0,range:"not 0",minver:3,crc:!1},230:{name:"TrackPlaneType",level:6,type:"u",multiple:!1,description:"The kind of plane this track corresponds to.",mandatory:!0,minver:3,crc:!1},231:{name:"Timestamp",level:2,type:"u",multiple:!1,webm:!0,description:"Absolute timestamp of the cluster, expressed in Segment Ticks which is based on TimestampScale; see (#timestamp-ticks).",mandatory:!0,cppname:"ClusterTimecode",minver:1,crc:!1},232:{name:"TimeSlice",level:4,type:"m",multiple:!0,description:"Contains extra time information about the data contained in the Block. Being able to interpret this Element is not **REQUIRED** for playback.",minver:0,maxver:0,crc:!1},233:{name:"TrackJoinBlocks",level:4,type:"m",multiple:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track",minver:3,crc:!1},234:{name:"CueCodecState",level:4,type:"u",multiple:!1,description:"The Segment Position of the Codec State corresponding to this Cue Element. 0 means that the data is taken from the initial Track Entry.",mandatory:!0,minver:2,default:"0",crc:!1},235:{name:"CueRefCodecState",level:5,type:"u",multiple:!1,description:"The Segment Position of the Codec State corresponding to this referenced Element. 0 means that the data is taken from the initial Track Entry.",minver:0,maxver:0,default:"0",crc:!1},236:{name:"Void",level:-1,type:"b",multiple:!0,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use.",minver:1,crc:!1},237:{name:"TrackJoinUID",level:5,type:"u",multiple:!0,description:"The trackUID number of a track whose blocks are used to create this virtual track.",mandatory:!0,range:"not 0",minver:3,crc:!1},238:{name:"BlockAddID",level:5,type:"u",multiple:!1,webm:!0,description:"An ID to identify the BlockAdditional level. If BlockAddIDType of the corresponding block is 0, this value is also the value of BlockAddIDType for the meaning of the content of BlockAdditional.",mandatory:!0,range:"not 0",minver:1,default:"1",crc:!1},240:{name:"CueRelativePosition",level:4,type:"u",multiple:!1,webm:!0,description:"The relative position inside the Cluster of the referenced SimpleBlock or BlockGroup with 0 being the first possible position for an Element inside that Cluster.",minver:4,crc:!1},241:{name:"CueClusterPosition",level:4,type:"u",multiple:!1,webm:!0,description:"The Segment Position of the Cluster containing the associated Block.",mandatory:!0,minver:1,crc:!1},247:{name:"CueTrack",level:4,type:"u",multiple:!1,webm:!0,description:"The track for which a position is given.",mandatory:!0,range:"not 0",minver:1,crc:!1},250:{name:"ReferencePriority",level:3,type:"u",multiple:!1,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced.",mandatory:!0,minver:1,default:"0",crc:!1},251:{name:"ReferenceBlock",level:3,type:"i",multiple:!0,webm:!0,description:"A timestamp value, relative to the timestamp of the Block in this BlockGroup, expressed in Track Ticks; see (#timestamp-ticks). This is used to reference other frames necessary to decode this frame. The relative value **SHOULD** correspond to a valid `Block` this `Block` depends on. Historically Matroska Writer didn't write the actual `Block(s)` this `Block` depends on, but *some* `Block` in the past.  The value \"0\" **MAY** also be used to signify this `Block` cannot be decoded on its own, but without knownledge of which `Block` is necessary. In this case, other `ReferenceBlock` **MUST NOT** be found in the same `BlockGroup`.  If the `BlockGroup` doesn't have any `ReferenceBlock` element, then the `Block` it contains can be decoded without using any other `Block` data.",minver:1,crc:!1},253:{name:"ReferenceVirtual",level:3,type:"i",multiple:!1,description:"The Segment Position of the data that would otherwise be in position of the virtual block.",minver:0,maxver:0,crc:!1},16804:{name:"BlockAddIDName",level:4,type:"s",multiple:!1,description:"A human-friendly name describing the type of BlockAdditional data, as defined by the associated Block Additional Mapping.",minver:4,crc:!1},16868:{name:"BlockAdditionMapping",level:3,type:"m",multiple:!0,description:"Contains elements that extend the track format, by adding content either to each frame, with BlockAddID ((#blockaddid-element)), or to the track as a whole with BlockAddIDExtraData.",minver:4,crc:!1},16871:{name:"BlockAddIDType",level:4,type:"u",multiple:!1,description:"Stores the registered identifier of the Block Additional Mapping to define how the BlockAdditional data should be handled.",mandatory:!0,minver:4,default:"0",crc:!1},16877:{name:"BlockAddIDExtraData",level:4,type:"b",multiple:!1,description:"Extra binary data that the BlockAddIDType can use to interpret the BlockAdditional data. The interpretation of the binary data depends on the BlockAddIDType value and the corresponding Block Additional Mapping.",minver:4,crc:!1},16880:{name:"BlockAddIDValue",level:4,type:"u",multiple:!1,description:"If the track format extension needs content beside frames, the value refers to the BlockAddID ((#blockaddid-element)), value being described. To keep MaxBlockAdditionID as low as possible, small values **SHOULD** be used.",range:"&gt;=2",minver:4,crc:!1},16980:{name:"ContentCompAlgo",level:6,type:"u",multiple:!1,description:"The compression algorithm used.",mandatory:!0,minver:1,default:"0",crc:!1},16981:{name:"ContentCompSettings",level:6,type:"b",multiple:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (`ContentCompAlgo`=3), the bytes that were removed from the beginning of each frames of the track.",minver:1,crc:!1},17025:{name:"DocTypeExtension",level:1,type:"m",multiple:!0,description:"A DocTypeExtension adds extra Elements to the main DocType+DocTypeVersion	tuple it's attached to. An EBML Reader **MAY** know these extra Elements and how to use them. A DocTypeExtension **MAY** be used to iterate between	experimental Elements before they are integrated into a regular	DocTypeVersion. Reading one DocTypeExtension version of a DocType+DocTypeVersion tuple doesn't imply one should be able to read upper versions of this DocTypeExtension.",minver:1,crc:!1},17026:{name:"DocType",level:1,type:"s",multiple:!0,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files.",mandatory:!0,minver:1,crc:!1,default:"matroska"},17027:{name:"DocTypeExtensionName",level:2,type:"s",multiple:!1,description:"The name of the DocTypeExtension to differentiate it from other DocTypeExtensions of the same DocType+DocTypeVersion tuple. A DocTypeExtensionName value **MUST** be unique within the EBML Header.",mandatory:!0,minver:1,crc:!1},17028:{name:"DocTypeExtensionVersion",level:2,type:"u",multiple:!1,description:"The version of the DocTypeExtension. Different DocTypeExtensionVersion values of the same DocType + DocTypeVersion + DocTypeExtensionName tuple **MAY** contain completely different sets of extra Elements. An EBML Reader **MAY** support multiple versions	of the same tuple, only one version of the tuple, or not support the tuple at all.",mandatory:!0,range:"not 0",minver:1,crc:!1},17029:{name:"DocTypeReadVersion",level:1,type:"u",multiple:!1,description:"The minimum DocType version an interpreter has to support to read this file.",mandatory:!0,range:"not 0",minver:1,default:"1",crc:!1},17030:{name:"EBMLVersion",level:1,type:"u",multiple:!1,description:"The version of EBML parser used to create the file.",mandatory:!0,range:"not 0",minver:1,default:"1",crc:!1},17031:{name:"DocTypeVersion",level:1,type:"u",multiple:!1,description:"The version of DocType interpreter used to create the file.",mandatory:!0,range:"not 0",minver:1,default:"1",crc:!1},17138:{name:"EBMLMaxIDLength",level:1,type:"u",multiple:!1,mandatory:!0,range:"&gt;=4",minver:1,default:"4",crc:!1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."},17139:{name:"EBMLMaxSizeLength",level:1,type:"u",multiple:!1,mandatory:!0,range:"not 0",minver:1,default:"8",crc:!1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."},17143:{name:"EBMLReadVersion",level:1,type:"u",multiple:!1,description:"The minimum EBML version a parser has to support to read this file.",mandatory:!0,range:"1",minver:1,default:"1",crc:!1},17276:{name:"ChapLanguage",level:5,type:"s",multiple:!0,webm:!0,description:"A language corresponding to the string, in the bibliographic ISO-639-2 form [@!ISO639-2]. This Element **MUST** be ignored if a ChapLanguageIETF Element is used within the same ChapterDisplay Element.",mandatory:!0,cppname:"ChapterLanguage",minver:1,default:"eng",crc:!1},17277:{name:"ChapLanguageIETF",level:5,type:"s",multiple:!0,description:"Specifies a language corresponding to the ChapString in the format defined in [@!BCP47] and using the IANA Language Subtag Registry [@!IANALangRegistry]. If a ChapLanguageIETF Element is used, then any ChapLanguage and ChapCountry Elements used in the same ChapterDisplay **MUST** be ignored.",minver:4,crc:!1},17278:{name:"ChapCountry",level:5,type:"s",multiple:!0,webm:!0,description:"A country corresponding to the string, using the same 2 octets country-codes as in Internet domains [@!IANADomains] based on [@!ISO3166-1] alpha-2 codes. This Element **MUST** be ignored if a ChapLanguageIETF Element is used within the same ChapterDisplay Element.",cppname:"ChapterCountry",minver:1,crc:!1},17476:{name:"SegmentFamily",level:2,type:"b",multiple:!0,description:"A randomly generated unique ID that all Segments of a Linked Segment **MUST** share (128 bits).",minver:1,crc:!1},17505:{name:"DateUTC",level:2,type:"d",multiple:!1,webm:!0,description:"The date and time that the Segment was created by the muxing application or library.",minver:1,crc:!1},17530:{name:"TagLanguage",level:4,type:"s",multiple:!1,webm:!0,description:"Specifies the language of the tag specified, in the Matroska languages form; see (#language-codes) on language codes. This Element **MUST** be ignored if the TagLanguageIETF Element is used within the same SimpleTag Element.",mandatory:!0,cppname:"TagLangue",minver:1,default:"und",crc:!1},17531:{name:"TagLanguageIETF",level:4,type:"s",multiple:!1,description:"Specifies the language used in the TagString according to [@!BCP47] and using the IANA Language Subtag Registry [@!IANALangRegistry]. If this Element is used, then any TagLanguage Elements used in the same SimpleTag **MUST** be ignored.",minver:4,crc:!1},17540:{name:"TagDefault",level:4,type:"u",multiple:!1,webm:!0,description:"A boolean value to indicate if this is the default/original language to use for the given tag.",mandatory:!0,range:"0-1",minver:1,default:"1",crc:!1},17541:{name:"TagBinary",level:4,type:"b",multiple:!1,webm:!0,description:"The values of the Tag, if it is binary. Note that this cannot be used in the same SimpleTag as TagString.",minver:1,crc:!1},17543:{name:"TagString",level:4,type:"8",multiple:!1,webm:!0,description:"The value of the Tag.",minver:1,crc:!1},17545:{name:"Duration",level:2,type:"f",multiple:!1,webm:!0,description:"Duration of the Segment, expressed in Segment Ticks which is based on TimestampScale; see (#timestamp-ticks).",range:"&gt; 0x0p+0",minver:1,crc:!1},17588:{name:"TagDefaultBogus",level:4,type:"u",multiple:!1,description:"A variant of the TagDefault element with a bogus Element ID; see (#tagdefault-element).",mandatory:!0,range:"0-1",minver:0,maxver:0,default:"1",crc:!1},17677:{name:"ChapProcessPrivate",level:5,type:"b",multiple:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent; see (#menu-features) on DVD menus.',cppname:"ChapterProcessPrivate",minver:1,crc:!1},17816:{name:"ChapterFlagEnabled",level:4,type:"u",multiple:!1,description:"Set to 1 if the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie **SHOULD** skip all the content between the TimeStart and TimeEnd of this chapter; see (#chapter-flags) on Chapter flags.",mandatory:!0,range:"0-1",minver:1,default:"1",crc:!1},17827:{name:"TagName",level:4,type:"8",multiple:!1,webm:!0,description:"The name of the Tag that is going to be stored.",mandatory:!0,minver:1,crc:!1},17849:{name:"EditionEntry",level:2,type:"m",multiple:!0,webm:!0,description:"Contains all information about a Segment edition.",mandatory:!0,minver:1,crc:!1},17852:{name:"EditionUID",level:3,type:"u",multiple:!1,description:"A unique ID to identify the edition. It's useful for tagging an edition.",range:"not 0",minver:1,crc:!1},17853:{name:"EditionFlagHidden",level:3,type:"u",multiple:!1,description:"Set to 1 if an edition is hidden. Hidden editions **SHOULD NOT** be available to the user interface (but still to Control Tracks; see (#chapter-flags) on Chapter flags).",mandatory:!0,range:"0-1",minver:1,default:"0",crc:!1},17883:{name:"EditionFlagDefault",level:3,type:"u",multiple:!1,description:"Set to 1 if the edition **SHOULD** be used as the default one.",mandatory:!0,range:"0-1",minver:1,default:"0",crc:!1},17885:{name:"EditionFlagOrdered",level:3,type:"u",multiple:!1,description:"Set to 1 if the chapters can be defined multiple times and the order to play them is enforced; see (#editionflagordered).",mandatory:!0,range:"0-1",minver:1,default:"0",crc:!1},18012:{name:"FileData",level:3,type:"b",multiple:!1,description:"The data of the file.",mandatory:!0,minver:1,crc:!1},18016:{name:"FileMimeType",level:3,type:"s",multiple:!1,description:"MIME type of the file.",mandatory:!0,cppname:"MimeType",minver:1,crc:!1},18017:{name:"FileUsedStartTime",level:3,type:"u",multiple:!1,description:"The timestamp at which this optimized font attachment comes into context, expressed in Segment Ticks which is based on TimestampScale. See [@?DivXWorldFonts].",minver:0,maxver:0,divx:!0,crc:!1},18018:{name:"FileUsedEndTime",level:3,type:"u",multiple:!1,description:"The timestamp at which this optimized font attachment goes out of context, expressed in Segment Ticks which is based on TimestampScale. See [@?DivXWorldFonts].",minver:0,maxver:0,divx:!0,crc:!1},18030:{name:"FileName",level:3,type:"8",multiple:!1,description:"Filename of the attached file.",mandatory:!0,minver:1,crc:!1},18037:{name:"FileReferral",level:3,type:"b",multiple:!1,description:"A binary value that a track/codec can refer to when the attachment is needed.",minver:0,maxver:0,crc:!1},18046:{name:"FileDescription",level:3,type:"8",multiple:!1,description:"A human-friendly name for the attached file.",minver:1,crc:!1},18094:{name:"FileUID",level:3,type:"u",multiple:!1,description:"Unique ID representing the file, as random as possible.",mandatory:!0,range:"not 0",minver:1,crc:!1},18401:{name:"ContentEncAlgo",level:6,type:"u",multiple:!1,webm:!0,description:'The encryption algorithm used. The value "0" means that the contents have not been encrypted.',mandatory:!0,minver:1,default:"0",crc:!1},18402:{name:"ContentEncKeyID",level:6,type:"b",multiple:!1,webm:!0,description:"For public key algorithms this is the ID of the public key the the data was encrypted with.",minver:1,crc:!1},18403:{name:"ContentSignature",level:6,type:"b",multiple:!1,description:"A cryptographic signature of the contents.",minver:1,maxver:0,crc:!1},18404:{name:"ContentSigKeyID",level:6,type:"b",multiple:!1,description:"This is the ID of the private key the data was signed with.",minver:1,maxver:0,crc:!1},18405:{name:"ContentSigAlgo",level:6,type:"u",multiple:!1,description:"The algorithm used for the signature.",minver:1,maxver:0,default:"0",crc:!1},18406:{name:"ContentSigHashAlgo",level:6,type:"u",multiple:!1,description:"The hash algorithm used for the signature.",minver:1,maxver:0,default:"0",crc:!1},18407:{name:"ContentEncAESSettings",level:6,type:"m",multiple:!0,webm:!0,description:"Settings describing the encryption algorithm used. If `ContentEncAlgo` != 5 this **MUST** be ignored.",minver:4,crc:!1},18408:{name:"AESSettingsCipherMode",level:7,type:"u",multiple:!0,webm:!0,description:"The AES cipher mode used in the encryption.",mandatory:!0,minver:4,crc:!1},19840:{name:"MuxingApp",level:2,type:"8",multiple:!1,webm:!0,description:'Muxing application or library (example: "libmatroska-0.4.3").',mandatory:!0,minver:1,crc:!1},19899:{name:"Seek",level:2,type:"m",multiple:!0,webm:!0,description:"Contains a single seek entry to an EBML Element.",mandatory:!0,minver:1,crc:!1},20529:{name:"ContentEncodingOrder",level:5,type:"u",multiple:!0,webm:!0,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder Elements in the TrackEntry that contains this ContentEncodingOrder element.",mandatory:!0,minver:1,default:"0",crc:!1},20530:{name:"ContentEncodingScope",level:5,type:"u",multiple:!1,webm:!0,description:"A bit field that describes which Elements have been modified in this way. Values (big-endian) can be OR'ed.",mandatory:!0,minver:1,default:"1",crc:!1},20531:{name:"ContentEncodingType",level:5,type:"u",multiple:!1,webm:!0,description:"A value describing what kind of transformation is applied.",mandatory:!0,minver:1,default:"0",crc:!1},20532:{name:"ContentCompression",level:5,type:"m",multiple:!1,description:"Settings describing the compression used. This Element **MUST** be present if the value of ContentEncodingType is 0 and absent otherwise. Each block **MUST** be decompressable even if no previous block is available in order not to prevent seeking.",minver:1,crc:!1},20533:{name:"ContentEncryption",level:5,type:"m",multiple:!1,webm:!0,description:"Settings describing the encryption used. This Element **MUST** be present if the value of `ContentEncodingType` is 1 (encryption) and **MUST** be ignored otherwise.",minver:1,crc:!1},21343:{name:"CueRefNumber",level:5,type:"u",multiple:!1,description:"Number of the referenced Block of Track X in the specified Cluster.",range:"not 0",minver:0,maxver:0,default:"1",crc:!1},21358:{name:"Name",level:3,type:"8",multiple:!1,webm:!0,description:"A human-readable track name.",cppname:"TrackName",minver:1,crc:!1},21368:{name:"CueBlockNumber",level:4,type:"u",multiple:!1,webm:!0,description:"Number of the Block in the specified Cluster.",range:"not 0",minver:1,crc:!1},21375:{name:"TrackOffset",level:3,type:"i",multiple:!1,description:"A value to add to the Block's Timestamp, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks). This can be used to adjust the playback offset of a track.",minver:0,maxver:0,default:"0",crc:!1},21419:{name:"SeekID",level:3,type:"b",multiple:!1,webm:!0,description:"The binary ID corresponding to the Element name.",mandatory:!0,minver:1,crc:!1},21420:{name:"SeekPosition",level:3,type:"u",multiple:!1,webm:!0,description:"The Segment Position of the Element.",mandatory:!0,minver:1,crc:!1},21432:{name:"StereoMode",level:4,type:"u",multiple:!1,webm:!0,description:"Stereo-3D video mode. There are some more details in (#multi-planar-and-3d-videos).",mandatory:!0,cppname:"VideoStereoMode",minver:3,default:"0",crc:!1},21433:{name:"OldStereoMode",level:4,type:"u",multiple:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska.",minver:1,maxver:0,crc:!1},21440:{name:"AlphaMode",level:4,type:"u",multiple:!1,webm:!0,description:'Indicate whether the BlockAdditional Element with BlockAddID of "1" contains Alpha data, as defined by to the Codec Mapping for the `CodecID`. Undefined values **SHOULD NOT** be used as the behavior of known implementations is different (considered either as 0 or 1).',mandatory:!0,cppname:"VideoAlphaMode",minver:3,default:"0",crc:!1},21674:{name:"PixelCropBottom",level:4,type:"u",multiple:!1,webm:!0,description:"The number of video pixels to remove at the bottom of the image.",mandatory:!0,cppname:"VideoPixelCropBottom",minver:1,default:"0",crc:!1},21680:{name:"DisplayWidth",level:4,type:"u",multiple:!1,webm:!0,description:"Width of the video frames to display. Applies to the video frame after cropping (PixelCrop* Elements).",range:"not 0",cppname:"VideoDisplayWidth",minver:1,crc:!1},21682:{name:"DisplayUnit",level:4,type:"u",multiple:!1,webm:!0,description:"How DisplayWidth &amp; DisplayHeight are interpreted.",mandatory:!0,cppname:"VideoDisplayUnit",minver:1,default:"0",crc:!1},21683:{name:"AspectRatioType",level:4,type:"u",multiple:!1,description:"Specify the possible modifications to the aspect ratio.",cppname:"VideoAspectRatio",minver:0,maxver:0,default:"0",crc:!1},21690:{name:"DisplayHeight",level:4,type:"u",multiple:!1,webm:!0,description:"Height of the video frames to display. Applies to the video frame after cropping (PixelCrop* Elements).",range:"not 0",cppname:"VideoDisplayHeight",minver:1,crc:!1},21691:{name:"PixelCropTop",level:4,type:"u",multiple:!1,webm:!0,description:"The number of video pixels to remove at the top of the image.",mandatory:!0,cppname:"VideoPixelCropTop",minver:1,default:"0",crc:!1},21708:{name:"PixelCropLeft",level:4,type:"u",multiple:!1,webm:!0,description:"The number of video pixels to remove on the left of the image.",mandatory:!0,cppname:"VideoPixelCropLeft",minver:1,default:"0",crc:!1},21725:{name:"PixelCropRight",level:4,type:"u",multiple:!1,webm:!0,description:"The number of video pixels to remove on the right of the image.",mandatory:!0,cppname:"VideoPixelCropRight",minver:1,default:"0",crc:!1},21930:{name:"FlagForced",level:3,type:"u",multiple:!1,webm:!0,description:"Applies only to subtitles. Set if that track **SHOULD** be eligible for automatic selection by the player if it matches the user's language preference, even if the user's preferences would normally not enable subtitles with the selected audio track; this can be used for tracks containing only translations of foreign-language audio or onscreen text. See (#default-track-selection) for more details.",mandatory:!0,range:"0-1",cppname:"TrackFlagForced",minver:1,default:"0",crc:!1},21931:{name:"FlagHearingImpaired",level:3,type:"u",multiple:!1,description:"Set to 1 if that track is suitable for users with hearing impairments, set to 0 if it is unsuitable for users with hearing impairments.",range:"0-1",minver:4,crc:!1},21932:{name:"FlagVisualImpaired",level:3,type:"u",multiple:!1,description:"Set to 1 if that track is suitable for users with visual impairments, set to 0 if it is unsuitable for users with visual impairments.",range:"0-1",minver:4,crc:!1},21933:{name:"FlagTextDescriptions",level:3,type:"u",multiple:!1,description:"Set to 1 if that track contains textual descriptions of video content, set to 0 if that track does not contain textual descriptions of video content.",range:"0-1",minver:4,crc:!1},21934:{name:"FlagOriginal",level:3,type:"u",multiple:!1,description:"Set to 1 if that track is in the content's original language, set to 0 if it is a translation.",range:"0-1",minver:4,crc:!1},21935:{name:"FlagCommentary",level:3,type:"u",multiple:!1,description:"Set to 1 if that track contains commentary, set to 0 if it does not contain commentary.",range:"0-1",minver:4,crc:!1},21936:{name:"Colour",level:4,type:"m",multiple:!1,webm:!0,description:"Settings describing the colour format.",cppname:"VideoColour",minver:4,crc:!1},21937:{name:"MatrixCoefficients",level:5,type:"u",multiple:!1,webm:!0,description:"The Matrix Coefficients of the video used to derive luma and chroma values from red, green, and blue color primaries. For clarity, the value and meanings for MatrixCoefficients are adopted from Table 4 of ISO/IEC 23001-8:2016 or ITU-T H.273.",mandatory:!0,cppname:"VideoColourMatrix",minver:4,default:"2",crc:!1},21938:{name:"BitsPerChannel",level:5,type:"u",multiple:!1,webm:!0,description:"Number of decoded bits per channel. A value of 0 indicates that the BitsPerChannel is unspecified.",mandatory:!0,cppname:"VideoBitsPerChannel",minver:4,default:"0",crc:!1},21939:{name:"ChromaSubsamplingHorz",level:5,type:"u",multiple:!1,webm:!0,description:"The amount of pixels to remove in the Cr and Cb channels for every pixel not removed horizontally. Example: For video with 4:2:0 chroma subsampling, the ChromaSubsamplingHorz **SHOULD** be set to 1.",cppname:"VideoChromaSubsampHorz",minver:4,crc:!1},21940:{name:"ChromaSubsamplingVert",level:5,type:"u",multiple:!1,webm:!0,description:"The amount of pixels to remove in the Cr and Cb channels for every pixel not removed vertically. Example: For video with 4:2:0 chroma subsampling, the ChromaSubsamplingVert **SHOULD** be set to 1.",cppname:"VideoChromaSubsampVert",minver:4,crc:!1},21941:{name:"CbSubsamplingHorz",level:5,type:"u",multiple:!1,webm:!0,description:"The amount of pixels to remove in the Cb channel for every pixel not removed horizontally. This is additive with ChromaSubsamplingHorz. Example: For video with 4:2:1 chroma subsampling, the ChromaSubsamplingHorz **SHOULD** be set to 1 and CbSubsamplingHorz **SHOULD** be set to 1.",cppname:"VideoCbSubsampHorz",minver:4,crc:!1},21942:{name:"CbSubsamplingVert",level:5,type:"u",multiple:!1,webm:!0,description:"The amount of pixels to remove in the Cb channel for every pixel not removed vertically. This is additive with ChromaSubsamplingVert.",cppname:"VideoCbSubsampVert",minver:4,crc:!1},21943:{name:"ChromaSitingHorz",level:5,type:"u",multiple:!1,webm:!0,description:"How chroma is subsampled horizontally.",mandatory:!0,cppname:"VideoChromaSitHorz",minver:4,default:"0",crc:!1},21944:{name:"ChromaSitingVert",level:5,type:"u",multiple:!1,webm:!0,description:"How chroma is subsampled vertically.",mandatory:!0,cppname:"VideoChromaSitVert",minver:4,default:"0",crc:!1},21945:{name:"Range",level:5,type:"u",multiple:!1,webm:!0,description:"Clipping of the color ranges.",mandatory:!0,cppname:"VideoColourRange",minver:4,default:"0",crc:!1},21946:{name:"TransferCharacteristics",level:5,type:"u",multiple:!1,webm:!0,description:"The transfer characteristics of the video. For clarity, the value and meanings for TransferCharacteristics are adopted from Table 3 of ISO/IEC 23091-4 or ITU-T H.273.",mandatory:!0,cppname:"VideoColourTransferCharacter",minver:4,default:"2",crc:!1},21947:{name:"Primaries",level:5,type:"u",multiple:!1,webm:!0,description:"The colour primaries of the video. For clarity, the value and meanings for Primaries are adopted from Table 2 of ISO/IEC 23091-4 or ITU-T H.273.",mandatory:!0,cppname:"VideoColourPrimaries",minver:4,default:"2",crc:!1},21948:{name:"MaxCLL",level:5,type:"u",multiple:!1,webm:!0,description:"Maximum brightness of a single pixel (Maximum Content Light Level) in candelas per square meter (cd/m^2^).",cppname:"VideoColourMaxCLL",minver:4,crc:!1},21949:{name:"MaxFALL",level:5,type:"u",multiple:!1,webm:!0,description:"Maximum brightness of a single full frame (Maximum Frame-Average Light Level) in candelas per square meter (cd/m^2^).",cppname:"VideoColourMaxFALL",minver:4,crc:!1},21968:{name:"MasteringMetadata",level:5,type:"m",multiple:!1,webm:!0,description:"SMPTE 2086 mastering data.",cppname:"VideoColourMasterMeta",minver:4,crc:!1},21969:{name:"PrimaryRChromaticityX",level:6,type:"f",multiple:!1,webm:!0,description:"Red X chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoRChromaX",minver:4,crc:!1},21970:{name:"PrimaryRChromaticityY",level:6,type:"f",multiple:!1,webm:!0,description:"Red Y chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoRChromaY",minver:4,crc:!1},21971:{name:"PrimaryGChromaticityX",level:6,type:"f",multiple:!1,webm:!0,description:"Green X chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoGChromaX",minver:4,crc:!1},21972:{name:"PrimaryGChromaticityY",level:6,type:"f",multiple:!1,webm:!0,description:"Green Y chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoGChromaY",minver:4,crc:!1},21973:{name:"PrimaryBChromaticityX",level:6,type:"f",multiple:!1,webm:!0,description:"Blue X chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoBChromaX",minver:4,crc:!1},21974:{name:"PrimaryBChromaticityY",level:6,type:"f",multiple:!1,webm:!0,description:"Blue Y chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoBChromaY",minver:4,crc:!1},21975:{name:"WhitePointChromaticityX",level:6,type:"f",multiple:!1,webm:!0,description:"White X chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoWhitePointChromaX",minver:4,crc:!1},21976:{name:"WhitePointChromaticityY",level:6,type:"f",multiple:!1,webm:!0,description:"White Y chromaticity coordinate, as defined by CIE 1931.",range:"0-1",cppname:"VideoWhitePointChromaY",minver:4,crc:!1},21977:{name:"LuminanceMax",level:6,type:"f",multiple:!1,webm:!0,description:"Maximum luminance. Represented in candelas per square meter (cd/m^2^).",range:"&gt;= 0x0p+0",cppname:"VideoLuminanceMax",minver:4,crc:!1},21978:{name:"LuminanceMin",level:6,type:"f",multiple:!1,webm:!0,description:"Minimum luminance. Represented in candelas per square meter (cd/m^2^).",range:"&gt;= 0x0p+0",cppname:"VideoLuminanceMin",minver:4,crc:!1},21998:{name:"MaxBlockAdditionID",level:3,type:"u",multiple:!1,description:"The maximum value of BlockAddID ((#blockaddid-element)). A value 0 means there is no BlockAdditions ((#blockadditions-element)) for this track.",mandatory:!0,minver:1,default:"0",crc:!1},22100:{name:"ChapterStringUID",level:4,type:"8",multiple:!1,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage [@!WebVTT].",minver:3,crc:!1},22186:{name:"CodecDelay",level:3,type:"u",multiple:!1,webm:!0,description:"CodecDelay is The codec-built-in delay, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks). It represents the amount of codec samples that will be discarded by the decoder during playback. This timestamp value **MUST** be subtracted from each frame timestamp in order to get the timestamp that will be actually played. The value **SHOULD** be small so the muxing of tracks with the same actual timestamp are in the same Cluster.",mandatory:!0,minver:4,default:"0",crc:!1},22203:{name:"SeekPreRoll",level:3,type:"u",multiple:!1,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration of the data the decoder **MUST** decode before the decoded data is valid, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks).",mandatory:!0,minver:4,default:"0",crc:!1},22337:{name:"WritingApp",level:2,type:"8",multiple:!1,webm:!0,description:'Writing application (example: "mkvmerge-0.3.3").',mandatory:!0,minver:1,crc:!1},22612:{name:"SilentTracks",level:2,type:"m",multiple:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking or to decide what track to use.",cppname:"ClusterSilentTracks",minver:0,maxver:0,crc:!1},22743:{name:"SilentTrackNumber",level:3,type:"u",multiple:!0,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster.",cppname:"ClusterSilentTrackNumber",minver:0,maxver:0,crc:!1},24999:{name:"AttachedFile",level:2,type:"m",multiple:!0,description:"An attached file.",mandatory:!0,cppname:"Attached",minver:1,crc:!1},25152:{name:"ContentEncoding",level:4,type:"m",multiple:!0,webm:!0,description:"Settings for one content encoding like compression or encryption.",mandatory:!0,minver:1,crc:!1},25188:{name:"BitDepth",level:4,type:"u",multiple:!1,webm:!0,description:"Bits per sample, mostly used for PCM.",range:"not 0",cppname:"AudioBitDepth",minver:1,crc:!1},25506:{name:"CodecPrivate",level:3,type:"b",multiple:!1,webm:!0,description:"Private data only known to the codec.",minver:1,crc:!1},25536:{name:"Targets",level:3,type:"m",multiple:!1,webm:!0,description:"Specifies which other elements the metadata represented by the Tag applies to. If empty or not present, then the Tag describes everything in the Segment.",mandatory:!0,cppname:"TagTargets",minver:1,crc:!1},25539:{name:"ChapterPhysicalEquiv",level:4,type:"u",multiple:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50); see (#physical-types) for a complete list of values.',minver:1,crc:!1},25540:{name:"TagChapterUID",level:4,type:"u",multiple:!0,description:"A unique ID to identify the Chapter(s) the tags belong to.",minver:1,default:"0",crc:!1},25541:{name:"TagTrackUID",level:4,type:"u",multiple:!0,webm:!0,description:"A unique ID to identify the Track(s) the tags belong to.",minver:1,default:"0",crc:!1},25542:{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,description:"A unique ID to identify the Attachment(s) the tags belong to.",minver:1,default:"0",crc:!1},25545:{name:"TagEditionUID",level:4,type:"u",multiple:!0,description:"A unique ID to identify the EditionEntry(s) the tags belong to.",minver:1,default:"0",crc:!1},25546:{name:"TargetType",level:4,type:"s",multiple:!1,webm:!0,description:'An informational string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc ; see Section 6.4 of [@!MatroskaTags].',cppname:"TagTargetType",minver:1,crc:!1},25906:{name:"SignedElement",level:2,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature.",minver:1,crc:!1},26148:{name:"TrackTranslate",level:3,type:"m",multiple:!0,description:"The mapping between this `TrackEntry` and a track value in the given Chapter Codec.",minver:1,crc:!1},26277:{name:"TrackTranslateTrackID",level:4,type:"b",multiple:!1,description:"The binary value used to represent this `TrackEntry` in the chapter codec data. The format depends on the `ChapProcessCodecID` used; see (#chapprocesscodecid-element).",mandatory:!0,minver:1,crc:!1},26303:{name:"TrackTranslateCodec",level:4,type:"u",multiple:!1,description:"This `TrackTranslate` applies to this chapter codec of the given chapter edition(s); see (#chapprocesscodecid-element).",mandatory:!0,minver:1,crc:!1},26364:{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,description:"Specify a chapter edition UID on which this `TrackTranslate` applies.",minver:1,crc:!1},26568:{name:"SimpleTag",level:3,type:"m",multiple:!0,webm:!0,description:"Contains general information about the target.",mandatory:!0,cppname:"TagSimple",minver:1,crc:!1},26826:{name:"TargetTypeValue",level:4,type:"u",multiple:!1,webm:!0,description:"A number to indicate the logical level of the target.",mandatory:!0,cppname:"TagTargetTypeValue",minver:1,default:"50",crc:!1},26897:{name:"ChapProcessCommand",level:5,type:"m",multiple:!0,description:"Contains all the commands associated to the Atom.",cppname:"ChapterProcessCommand",minver:1,crc:!1},26914:{name:"ChapProcessTime",level:6,type:"u",multiple:!1,description:"Defines when the process command **SHOULD** be handled",mandatory:!0,cppname:"ChapterProcessTime",minver:1,crc:!1},26916:{name:"ChapterTranslate",level:2,type:"m",multiple:!0,description:"The mapping between this `Segment` and a segment value in the given Chapter Codec.",minver:1,crc:!1},26931:{name:"ChapProcessData",level:6,type:"b",multiple:!1,description:"Contains the command information. The data **SHOULD** be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands; see (#menu-features) on DVD menus.",mandatory:!0,cppname:"ChapterProcessData",minver:1,crc:!1},26948:{name:"ChapProcess",level:4,type:"m",multiple:!0,description:"Contains all the commands associated to the Atom.",cppname:"ChapterProcess",minver:1,crc:!1},26965:{name:"ChapProcessCodecID",level:5,type:"u",multiple:!1,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used; see (#menu-features) on DVD menus. More codec IDs can be added later.",mandatory:!0,cppname:"ChapterProcessCodecID",minver:1,default:"0",crc:!1},27045:{name:"ChapterTranslateID",level:3,type:"b",multiple:!1,description:"The binary value used to represent this Segment in the chapter codec data. The format depends on the ChapProcessCodecID used; see (#chapprocesscodecid-element).",mandatory:!0,minver:1,crc:!1},27071:{name:"ChapterTranslateCodec",level:3,type:"u",multiple:!1,description:"This `ChapterTranslate` applies to this chapter codec of the given chapter edition(s); see (#chapprocesscodecid-element).",mandatory:!0,minver:1,crc:!1},27132:{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,description:"Specify a chapter edition UID on which this `ChapterTranslate` applies.",minver:1,crc:!1},28032:{name:"ContentEncodings",level:3,type:"m",multiple:!1,webm:!0,description:"Settings for several content encoding mechanisms like compression or encryption.",minver:1,crc:!1},28135:{name:"MinCache",level:3,type:"u",multiple:!1,description:"The minimum number of frames a player **SHOULD** be able to cache during playback. If set to 0, the reference pseudo-cache system is not used.",mandatory:!0,cppname:"TrackMinCache",minver:1,default:"0",crc:!1},28152:{name:"MaxCache",level:3,type:"u",multiple:!1,description:"The maximum cache size necessary to store referenced frames in and the current frame. 0 means no cache is needed.",cppname:"TrackMaxCache",minver:1,crc:!1},28263:{name:"ChapterSegmentUID",level:4,type:"b",multiple:!1,description:"The SegmentUID of another Segment to play during this chapter.",range:"&gt;0",minver:1,crc:!1},28348:{name:"ChapterSegmentEditionUID",level:4,type:"u",multiple:!1,description:"The EditionUID to play from the Segment linked in ChapterSegmentUID. If ChapterSegmentEditionUID is undeclared, then no Edition of the linked Segment is used; see (#medium-linking) on medium-linking Segments.",range:"not 0",minver:1,crc:!1},28587:{name:"TrackOverlay",level:3,type:"u",multiple:!0,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap, see (#silenttracks-element) on SilentTracks, the overlay track **SHOULD** be used instead. The order of multiple TrackOverlay matters, the first one is the one that **SHOULD** be used. If not found it **SHOULD** be the second, etc.",minver:1,crc:!1},29555:{name:"Tag",level:2,type:"m",multiple:!0,webm:!0,description:"A single metadata descriptor.",mandatory:!0,minver:1,crc:!1},29572:{name:"SegmentFilename",level:2,type:"8",multiple:!1,description:"A filename corresponding to this Segment.",minver:1,crc:!1},29604:{name:"SegmentUID",level:2,type:"b",multiple:!1,description:"A randomly generated unique ID to identify the Segment amongst many others (128 bits).",range:"not 0",minver:1,crc:!1},29636:{name:"ChapterUID",level:4,type:"u",multiple:!1,webm:!0,description:"A unique ID to identify the Chapter.",mandatory:!0,range:"not 0",minver:1,crc:!1},29637:{name:"TrackUID",level:3,type:"u",multiple:!1,webm:!0,description:"A unique ID to identify the Track.",mandatory:!0,range:"not 0",minver:1,crc:!1},29766:{name:"AttachmentLink",level:3,type:"u",multiple:!1,description:"The UID of an attachment that is used by this codec.",range:"not 0",cppname:"TrackAttachmentLink",minver:1,maxver:3,crc:!1},30113:{name:"BlockAdditions",level:3,type:"m",multiple:!1,webm:!0,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data.",minver:1,crc:!1},30114:{name:"DiscardPadding",level:3,type:"i",multiple:!1,webm:!0,description:"Duration of the silent data added to the Block, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks) (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and **SHOULD** be discarded during playback.",minver:4,crc:!1},30320:{name:"Projection",level:4,type:"m",multiple:!1,webm:!0,description:"Describes the video projection details. Used to render spherical, VR videos or flipping videos horizontally/vertically.",cppname:"VideoProjection",minver:4,crc:!1},30321:{name:"ProjectionType",level:5,type:"u",multiple:!1,webm:!0,description:"Describes the projection used for this video track.",mandatory:!0,cppname:"VideoProjectionType",minver:4,default:"0",crc:!1},30322:{name:"ProjectionPrivate",level:5,type:"b",multiple:!1,webm:!0,description:"Private data that only applies to a specific projection.  *  If `ProjectionType` equals 0 (Rectangular), then this element must not be present. *  If `ProjectionType` equals 1 (Equirectangular), then this element must be present and contain the same binary data that would be stored inside an ISOBMFF Equirectangular Projection Box ('equi'). *  If `ProjectionType` equals 2 (Cubemap), then this element must be present and contain the same binary data that would be stored inside an ISOBMFF Cubemap Projection Box ('cbmp'). *  If `ProjectionType` equals 3 (Mesh), then this element must be present and contain the same binary data that would be stored inside an ISOBMFF Mesh Projection Box ('mshp').",cppname:"VideoProjectionPrivate",minver:4,crc:!1},30323:{name:"ProjectionPoseYaw",level:5,type:"f",multiple:!1,webm:!0,description:"Specifies a yaw rotation to the projection.  Value represents a clockwise rotation, in degrees, around the up vector. This rotation must be applied before any `ProjectionPosePitch` or `ProjectionPoseRoll` rotations. The value of this element **MUST** be in the -180 to 180 degree range, both included.  Setting `ProjectionPoseYaw` to 180 or -180 degrees, with the `ProjectionPoseRoll` and `ProjectionPosePitch` set to 0 degrees flips the image horizontally.",mandatory:!0,range:"&gt;= -0xB4p+0, &lt;= 0xB4p+0",cppname:"VideoProjectionPoseYaw",minver:4,default:"0x0p+0",crc:!1},30324:{name:"ProjectionPosePitch",level:5,type:"f",multiple:!1,webm:!0,description:"Specifies a pitch rotation to the projection.  Value represents a counter-clockwise rotation, in degrees, around the right vector. This rotation must be applied after the `ProjectionPoseYaw` rotation and before the `ProjectionPoseRoll` rotation. The value of this element **MUST** be in the -90 to 90 degree range, both included.",mandatory:!0,range:"&gt;= -0x5Ap+0, &lt;= 0x5Ap+0",cppname:"VideoProjectionPosePitch",minver:4,default:"0x0p+0",crc:!1},30325:{name:"ProjectionPoseRoll",level:5,type:"f",multiple:!1,webm:!0,description:"Specifies a roll rotation to the projection.  Value represents a counter-clockwise rotation, in degrees, around the forward vector. This rotation must be applied after the `ProjectionPoseYaw` and `ProjectionPosePitch` rotations. The value of this element **MUST** be in the -180 to 180 degree range, both included.  Setting `ProjectionPoseRoll` to 180 or -180 degrees, the `ProjectionPoseYaw` to 180 or -180 degrees with `ProjectionPosePitch` set to 0 degrees flips the image vertically.  Setting `ProjectionPoseRoll` to 180 or -180 degrees, with the `ProjectionPoseYaw` and `ProjectionPosePitch` set to 0 degrees flips the image horizontally and vertically.",mandatory:!0,range:"&gt;= -0xB4p+0, &lt;= 0xB4p+0",cppname:"VideoProjectionPoseRoll",minver:4,default:"0x0p+0",crc:!1},30901:{name:"OutputSamplingFrequency",level:4,type:"f",multiple:!1,webm:!0,description:"Real output sampling frequency in Hz (used for SBR techniques).",range:"&gt; 0x0p+0",cppname:"AudioOutputSamplingFreq",minver:1,crc:!1},31657:{name:"Title",level:2,type:"8",multiple:!1,webm:!0,description:"General name of the Segment.",minver:1,crc:!1},32123:{name:"ChannelPositions",level:4,type:"b",multiple:!1,description:"Table of horizontal angles for each successive channel.",cppname:"AudioPosition",minver:0,maxver:0,crc:!1},32347:{name:"SignatureElements",level:1,type:"m",multiple:!0,webm:!1,description:"Contains elements that will be used to compute the signature.",minver:1,crc:!1},32379:{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption.",minver:1,crc:!1,i:"Cluster|Block|BlockAdditional"},32394:{name:"SignatureAlgo",level:2,type:"u",multiple:!0,webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic).",minver:1,crc:!1},32410:{name:"SignatureHash",level:2,type:"u",multiple:!0,webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5).",minver:1,crc:!1},32421:{name:"SignaturePublicKey",level:2,type:"b",multiple:!0,webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature).",minver:1,crc:!1},32437:{name:"Signature",level:2,type:"b",multiple:!0,webm:!1,description:"The signature of the data (until a new.",minver:1,crc:!1},2274716:{name:"Language",level:3,type:"s",multiple:!1,webm:!0,description:"Specifies the language of the track in the Matroska languages form; see (#language-codes) on language codes. This Element **MUST** be ignored if the LanguageIETF Element is used in the same TrackEntry.",mandatory:!0,cppname:"TrackLanguage",minver:1,default:"eng",crc:!1},2274717:{name:"LanguageIETF",level:3,type:"s",multiple:!1,description:"Specifies the language of the track according to [@!BCP47] and using the IANA Language Subtag Registry [@!IANALangRegistry]. If this Element is used, then any Language Elements used in the same TrackEntry **MUST** be ignored.",minver:4,crc:!1},2306383:{name:"TrackTimestampScale",level:3,type:"f",multiple:!1,description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs).",mandatory:!0,range:"&gt; 0x0p+0",cppname:"TrackTimecodeScale",minver:1,maxver:3,default:"0x1p+0",crc:!1},2313850:{name:"DefaultDecodedFieldDuration",level:3,type:"u",multiple:!1,description:"The period between two successive fields at the output of the decoding process, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks). see (#defaultdecodedfieldduration) for more information",range:"not 0",cppname:"TrackDefaultDecodedFieldDuration",minver:4,crc:!1},2327523:{name:"FrameRate",level:4,type:"f",multiple:!1,description:"Number of frames per second. This value is Informational only. It is intended for constant frame rate streams, and **SHOULD NOT** be used for a variable frame rate TrackEntry.",range:"&gt; 0x0p+0",cppname:"VideoFrameRate",minver:0,maxver:0,crc:!1},2352003:{name:"DefaultDuration",level:3,type:"u",multiple:!1,webm:!0,description:"Number of nanoseconds per frame, expressed in Matroska Ticks -- ie in nanoseconds; see (#timestamp-ticks) (frame in the Matroska sense -- one Element put into a (Simple)Block).",range:"not 0",cppname:"TrackDefaultDuration",minver:1,crc:!1},2459272:{name:"CodecName",level:3,type:"8",multiple:!1,webm:!0,description:"A human-readable string specifying the codec.",minver:1,crc:!1},2536e3:{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,description:"A URL to download about the codec used.",minver:0,maxver:0,crc:!1},2807729:{name:"TimestampScale",level:2,type:"u",multiple:!1,webm:!0,description:"Base unit for Segment Ticks and Track Ticks, in nanoseconds. A TimestampScale value of 1.000.000 means scaled timestamps in the Segment are expressed in milliseconds; see (#timestamps) on how to interpret timestamps.",mandatory:!0,range:"not 0",cppname:"TimecodeScale",minver:1,default:"1000000",crc:!1},2807730:{name:"TimecodeScaleDenominator",level:2,type:"u",multiple:!1,description:"Timestamp scale numerator, see TimecodeScale.",mandatory:!0,minver:4,default:"1000000000",crc:!1},3061028:{name:"UncompressedFourCC",level:4,type:"b",multiple:!1,description:"Specify the uncompressed pixel format used for the Track's data as a FourCC. This value is similar in scope to the biCompression value of AVI's `BITMAPINFO` [@?AVIFormat]. See the YUV video formats [@?FourCC-YUV] and RGB video formats [@?FourCC-RGB] for common values.",cppname:"VideoColourSpace",minver:1,crc:!1},3126563:{name:"GammaValue",level:4,type:"f",multiple:!1,description:"Gamma Value.",range:"&gt; 0x0p+0",cppname:"VideoGamma",minver:0,maxver:0,crc:!1},3839639:{name:"CodecSettings",level:3,type:"8",multiple:!1,description:"A string describing the encoding setting used.",minver:0,maxver:0,crc:!1},3883072:{name:"CodecInfoURL",level:3,type:"s",multiple:!0,description:"A URL to find information about the codec used.",minver:0,maxver:0,crc:!1},3965867:{name:"PrevFilename",level:2,type:"8",multiple:!1,description:"A filename corresponding to the file of the previous Linked Segment.",minver:1,crc:!1},3979555:{name:"PrevUID",level:2,type:"b",multiple:!1,description:"A unique ID to identify the previous Segment of a Linked Segment (128 bits).",minver:1,crc:!1},4096955:{name:"NextFilename",level:2,type:"8",multiple:!1,description:"A filename corresponding to the file of the next Linked Segment.",minver:1,crc:!1},4110627:{name:"NextUID",level:2,type:"b",multiple:!1,description:"A unique ID to identify the next Segment of a Linked Segment (128 bits).",minver:1,crc:!1},272869232:{name:"Chapters",level:1,type:"m",multiple:!1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters explanation in (#chapters).",minver:1,crc:!1},290298740:{name:"SeekHead",level:1,type:"m",multiple:!0,webm:!0,description:"Contains the Segment Position of other Top-Level Elements.",minver:1,crc:!1},307544935:{name:"Tags",level:1,type:"m",multiple:!0,webm:!0,description:"Element containing metadata describing Tracks, Editions, Chapters, Attachments, or the Segment as a whole. A list of valid tags can be found in [@!MatroskaTags].",minver:1,crc:!1},357149030:{name:"Info",level:1,type:"m",multiple:!1,webm:!0,description:"Contains general information about the Segment.",mandatory:!0,minver:1,crc:!1},374648427:{name:"Tracks",level:1,type:"m",multiple:!1,webm:!0,description:"A Top-Level Element of information with many tracks described.",minver:1,crc:!1},408125543:{name:"Segment",level:0,type:"m",multiple:!1,description:"The Root Element that contains all other Top-Level Elements (Elements defined only at Level 1). A Matroska file is composed of 1 Segment.",mandatory:!0,minver:1,crc:!1},423732329:{name:"Attachments",level:1,type:"m",multiple:!1,description:"Contain attached files.",minver:1,crc:!1},440786851:{name:"EBML",level:0,type:"m",multiple:!1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this.",mandatory:!0,minver:1,crc:!1},458458727:{name:"SignatureSlot",level:1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream.",minver:1,crc:!1},475249515:{name:"Cues",level:1,type:"m",multiple:!1,webm:!0,description:"A Top-Level Element to speed seeking access. All entries are local to the Segment.",minver:1,crc:!1},524531317:{name:"Cluster",level:1,type:"m",multiple:!0,webm:!0,description:"The Top-Level Element containing the (monolithic) Block structure.",minver:1,crc:!1}},byName:{EBMLMaxIDLength:17138,EBMLMaxSizeLength:17139,Segment:408125543,SeekHead:290298740,Seek:19899,SeekID:21419,SeekPosition:21420,Info:357149030,SegmentUID:29604,SegmentFilename:29572,PrevUID:3979555,PrevFilename:3965867,NextUID:4110627,NextFilename:4096955,SegmentFamily:17476,ChapterTranslate:26916,ChapterTranslateID:27045,ChapterTranslateCodec:27071,ChapterTranslateEditionUID:27132,TimestampScale:2807729,Duration:17545,DateUTC:17505,Title:31657,MuxingApp:19840,WritingApp:22337,Cluster:524531317,Timestamp:231,SilentTracks:22612,SilentTrackNumber:22743,Position:167,PrevSize:171,SimpleBlock:163,BlockGroup:160,Block:161,BlockVirtual:162,BlockAdditions:30113,BlockMore:166,BlockAddID:238,BlockAdditional:165,BlockDuration:155,ReferencePriority:250,ReferenceBlock:251,ReferenceVirtual:253,CodecState:164,DiscardPadding:30114,Slices:142,TimeSlice:232,LaceNumber:204,FrameNumber:205,BlockAdditionID:203,Delay:206,SliceDuration:207,ReferenceFrame:200,ReferenceOffset:201,ReferenceTimestamp:202,EncryptedBlock:175,Tracks:374648427,TrackEntry:174,TrackNumber:215,TrackUID:29637,TrackType:131,FlagEnabled:185,FlagDefault:136,FlagForced:21930,FlagHearingImpaired:21931,FlagVisualImpaired:21932,FlagTextDescriptions:21933,FlagOriginal:21934,FlagCommentary:21935,FlagLacing:156,MinCache:28135,MaxCache:28152,DefaultDuration:2352003,DefaultDecodedFieldDuration:2313850,TrackTimestampScale:2306383,TrackOffset:21375,MaxBlockAdditionID:21998,BlockAdditionMapping:16868,BlockAddIDValue:16880,BlockAddIDName:16804,BlockAddIDType:16871,BlockAddIDExtraData:16877,Name:21358,Language:2274716,LanguageIETF:2274717,CodecID:134,CodecPrivate:25506,CodecName:2459272,AttachmentLink:29766,CodecSettings:3839639,CodecInfoURL:3883072,CodecDownloadURL:2536e3,CodecDecodeAll:170,TrackOverlay:28587,CodecDelay:22186,SeekPreRoll:22203,TrackTranslate:26148,TrackTranslateTrackID:26277,TrackTranslateCodec:26303,TrackTranslateEditionUID:26364,Video:224,FlagInterlaced:154,FieldOrder:157,StereoMode:21432,AlphaMode:21440,OldStereoMode:21433,PixelWidth:176,PixelHeight:186,PixelCropBottom:21674,PixelCropTop:21691,PixelCropLeft:21708,PixelCropRight:21725,DisplayWidth:21680,DisplayHeight:21690,DisplayUnit:21682,AspectRatioType:21683,UncompressedFourCC:3061028,GammaValue:3126563,FrameRate:2327523,Colour:21936,MatrixCoefficients:21937,BitsPerChannel:21938,ChromaSubsamplingHorz:21939,ChromaSubsamplingVert:21940,CbSubsamplingHorz:21941,CbSubsamplingVert:21942,ChromaSitingHorz:21943,ChromaSitingVert:21944,Range:21945,TransferCharacteristics:21946,Primaries:21947,MaxCLL:21948,MaxFALL:21949,MasteringMetadata:21968,PrimaryRChromaticityX:21969,PrimaryRChromaticityY:21970,PrimaryGChromaticityX:21971,PrimaryGChromaticityY:21972,PrimaryBChromaticityX:21973,PrimaryBChromaticityY:21974,WhitePointChromaticityX:21975,WhitePointChromaticityY:21976,LuminanceMax:21977,LuminanceMin:21978,Projection:30320,ProjectionType:30321,ProjectionPrivate:30322,ProjectionPoseYaw:30323,ProjectionPosePitch:30324,ProjectionPoseRoll:30325,Audio:225,SamplingFrequency:181,OutputSamplingFrequency:30901,Channels:159,ChannelPositions:32123,BitDepth:25188,TrackOperation:226,TrackCombinePlanes:227,TrackPlane:228,TrackPlaneUID:229,TrackPlaneType:230,TrackJoinBlocks:233,TrackJoinUID:237,TrickTrackUID:192,TrickTrackSegmentUID:193,TrickTrackFlag:198,TrickMasterTrackUID:199,TrickMasterTrackSegmentUID:196,ContentEncodings:28032,ContentEncoding:25152,ContentEncodingOrder:20529,ContentEncodingScope:20530,ContentEncodingType:20531,ContentCompression:20532,ContentCompAlgo:16980,ContentCompSettings:16981,ContentEncryption:20533,ContentEncAlgo:18401,ContentEncKeyID:18402,ContentEncAESSettings:18407,AESSettingsCipherMode:18408,ContentSignature:18403,ContentSigKeyID:18404,ContentSigAlgo:18405,ContentSigHashAlgo:18406,Cues:475249515,CuePoint:187,CueTime:179,CueTrackPositions:183,CueTrack:247,CueClusterPosition:241,CueRelativePosition:240,CueDuration:178,CueBlockNumber:21368,CueCodecState:234,CueReference:219,CueRefTime:150,CueRefCluster:151,CueRefNumber:21343,CueRefCodecState:235,Attachments:423732329,AttachedFile:24999,FileDescription:18046,FileName:18030,FileMimeType:18016,FileData:18012,FileUID:18094,FileReferral:18037,FileUsedStartTime:18017,FileUsedEndTime:18018,Chapters:272869232,EditionEntry:17849,EditionUID:17852,EditionFlagHidden:17853,EditionFlagDefault:17883,EditionFlagOrdered:17885,ChapterAtom:182,ChapterUID:29636,ChapterStringUID:22100,ChapterTimeStart:145,ChapterTimeEnd:146,ChapterFlagHidden:152,ChapterFlagEnabled:17816,ChapterSegmentUID:28263,ChapterSegmentEditionUID:28348,ChapterPhysicalEquiv:25539,ChapterTrack:143,ChapterTrackUID:137,ChapterDisplay:128,ChapString:133,ChapLanguage:17276,ChapLanguageIETF:17277,ChapCountry:17278,ChapProcess:26948,ChapProcessCodecID:26965,ChapProcessPrivate:17677,ChapProcessCommand:26897,ChapProcessTime:26914,ChapProcessData:26931,Tags:307544935,Tag:29555,Targets:25536,TargetTypeValue:26826,TargetType:25546,TagTrackUID:25541,TagEditionUID:25545,TagChapterUID:25540,TagAttachmentUID:25542,SimpleTag:26568,TagName:17827,TagLanguage:17530,TagLanguageIETF:17531,TagDefault:17540,TagDefaultBogus:17588,TagString:17543,TagBinary:17541,EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029,DocTypeExtension:17025,DocTypeExtensionName:17027,DocTypeExtensionVersion:17028,Void:236,CRC_32:191,SignatureSlot:458458727,SignatureAlgo:32394,SignatureHash:32410,SignaturePublicKey:32421,Signature:32437,SignatureElements:32347,SignatureElementList:32379,SignedElement:25906,TimecodeScaleDenominator:2807730}}});var Jee=Qt((qWe,Qee)=&gt;{function Ws(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}Qee.exports=Ws;Ws.EventEmitter=Ws;Ws.prototype._events=void 0;Ws.prototype._maxListeners=void 0;Ws.defaultMaxListeners=10;Ws.prototype.setMaxListeners=function(r){if(!WDe(r)||r&lt;0||isNaN(r))throw TypeError("n must be a positive number");return this._maxListeners=r,this};Ws.prototype.emit=function(r){var e,t,n,o,i,s;if(this._events||(this._events={}),r==="error"&amp;&amp;(!this._events.error||UD(this._events.error)&amp;&amp;!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var a=new Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(t=this._events[r],Xee(t))return!1;if(xf(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),t.apply(this,o)}else if(UD(t))for(o=Array.prototype.slice.call(arguments,1),s=t.slice(),n=s.length,i=0;i&lt;n;i++)s[i].apply(this,o);return!0};Ws.prototype.addListener=function(r,e){var t;if(!xf(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&amp;&amp;this.emit("newListener",r,xf(e.listener)?e.listener:e),this._events[r]?UD(this._events[r])?this._events[r].push(e):this._events[r]=[this._events[r],e]:this._events[r]=e,UD(this._events[r])&amp;&amp;!this._events[r].warned&amp;&amp;(Xee(this._maxListeners)?t=Ws.defaultMaxListeners:t=this._maxListeners,t&amp;&amp;t&gt;0&amp;&amp;this._events[r].length&gt;t&amp;&amp;(this._events[r].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[r].length),typeof console.trace=="function"&amp;&amp;console.trace())),this};Ws.prototype.on=Ws.prototype.addListener;Ws.prototype.once=function(r,e){if(!xf(e))throw TypeError("listener must be a function");var t=!1;function n(){this.removeListener(r,n),t||(t=!0,e.apply(this,arguments))}return n.listener=e,this.on(r,n),this};Ws.prototype.removeListener=function(r,e){var t,n,o,i;if(!xf(e))throw TypeError("listener must be a function");if(!this._events||!this._events[r])return this;if(t=this._events[r],o=t.length,n=-1,t===e||xf(t.listener)&amp;&amp;t.listener===e)delete this._events[r],this._events.removeListener&amp;&amp;this.emit("removeListener",r,e);else if(UD(t)){for(i=o;i-- &gt;0;)if(t[i]===e||t[i].listener&amp;&amp;t[i].listener===e){n=i;break}if(n&lt;0)return this;t.length===1?(t.length=0,delete this._events[r]):t.splice(n,1),this._events.removeListener&amp;&amp;this.emit("removeListener",r,e)}return this};Ws.prototype.removeAllListeners=function(r){var e,t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[r]&amp;&amp;delete this._events[r],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&amp;&amp;this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[r],xf(t))this.removeListener(r,t);else if(t)for(;t.length;)this.removeListener(r,t[t.length-1]);return delete this._events[r],this};Ws.prototype.listeners=function(r){var e;return!this._events||!this._events[r]?e=[]:xf(this._events[r])?e=[this._events[r]]:e=this._events[r].slice(),e};Ws.prototype.listenerCount=function(r){if(this._events){var e=this._events[r];if(xf(e))return 1;if(e)return e.length}return 0};Ws.listenerCount=function(r,e){return r.listenerCount(e)};function xf(r){return typeof r=="function"}function WDe(r){return typeof r=="number"}function UD(r){return typeof r=="object"&amp;&amp;r!==null}function Xee(r){return r===void 0}});var Ote=Qt((YD,y2)=&gt;{(function(r,e){"use strict";var t="1.0.34",n="",o="?",i="function",s="undefined",a="object",l="string",u="major",d="model",c="name",p="type",h="vendor",f="version",m="architecture",g="console",v="mobile",b="tablet",C="smarttv",x="wearable",y="embedded",S=350,T="Amazon",w="Apple",k="ASUS",A="BlackBerry",I="Browser",E="Chrome",O="Edge",Q="Firefox",j="Google",U="Huawei",B="LG",z="Microsoft",N="Motorola",V="Opera",re="Samsung",ce="Sharp",ge="Sony",ae="Viera",Y="Xiaomi",W="Zebra",G="Facebook",ee="Chromium OS",F="Mac OS",L=function(Ie,Ve){var Ae={};for(var lt in Ie)Ve[lt]&amp;&amp;Ve[lt].length%2===0?Ae[lt]=Ve[lt].concat(Ie[lt]):Ae[lt]=Ie[lt];return Ae},$=function(Ie){for(var Ve={},Ae=0;Ae&lt;Ie.length;Ae++)Ve[Ie[Ae].toUpperCase()]=Ie[Ae];return Ve},P=function(Ie,Ve){return typeof Ie===l?X(Ve).indexOf(X(Ie))!==-1:!1},X=function(Ie){return Ie.toLowerCase()},K=function(Ie){return typeof Ie===l?Ie.replace(/[^\d\.]/g,n).split(".")[0]:e},R=function(Ie,Ve){if(typeof Ie===l)return Ie=Ie.replace(/^\s\s*/,n),typeof Ve===s?Ie:Ie.substring(0,S)},H=function(Ie,Ve){for(var Ae=0,lt,vt,et,_e,xe,Ge;Ae&lt;Ve.length&amp;&amp;!xe;){var ct=Ve[Ae],bt=Ve[Ae+1];for(lt=vt=0;lt&lt;ct.length&amp;&amp;!xe&amp;&amp;ct[lt];)if(xe=ct[lt++].exec(Ie),xe)for(et=0;et&lt;bt.length;et++)Ge=xe[++vt],_e=bt[et],typeof _e===a&amp;&amp;_e.length&gt;0?_e.length===2?typeof _e[1]==i?this[_e[0]]=_e[1].call(this,Ge):this[_e[0]]=_e[1]:_e.length===3?typeof _e[1]===i&amp;&amp;!(_e[1].exec&amp;&amp;_e[1].test)?this[_e[0]]=Ge?_e[1].call(this,Ge,_e[2]):e:this[_e[0]]=Ge?Ge.replace(_e[1],_e[2]):e:_e.length===4&amp;&amp;(this[_e[0]]=Ge?_e[3].call(this,Ge.replace(_e[1],_e[2])):e):this[_e]=Ge||e;Ae+=2}},J=function(Ie,Ve){for(var Ae in Ve)if(typeof Ve[Ae]===a&amp;&amp;Ve[Ae].length&gt;0){for(var lt=0;lt&lt;Ve[Ae].length;lt++)if(P(Ve[Ae][lt],Ie))return Ae===o?e:Ae}else if(P(Ve[Ae],Ie))return Ae===o?e:Ae;return Ie},te={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},de={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},se={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,f],[/opios[\/ ]+([\w\.]+)/i],[f,[c,V+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[c,V]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[c,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+I],f],[/\bfocus\/([\w\.]+)/i],[f,[c,Q+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[c,V+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[c,V+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[c,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[f,[c,Q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+I],f],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[c,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,G],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[c,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[c,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,E+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[c,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[f,J,te]],[/(webkit|khtml)\/([\w\.]+)/i],[c,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[c,Q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,f],[/(cobalt)\/([\w\.]+)/i],[c,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,X]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,n,X]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,re],[p,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[h,re],[p,v]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[h,w],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[h,w],[p,b]],[/(macintosh);/i],[d,[h,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[h,ce],[p,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[h,U],[p,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[h,U],[p,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[h,Y],[p,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[h,Y],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[h,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[h,"Vivo"],[p,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[h,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[h,N],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[h,N],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,B],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[h,B],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[h,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[h,"Nokia"],[p,v]],[/(pixel c)\b/i],[d,[h,j],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[h,j],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[h,ge],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[h,ge],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[h,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[h,T],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[h,T],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[d,h,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[h,A],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[h,k],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[h,k],[p,v]],[/(nexus 9)/i],[d,[h,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[d,/_/g," "],[p,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[h,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[h,"Meizu"],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,d,[p,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,d,[p,b]],[/(surface duo)/i],[d,[h,z],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[h,"Fairphone"],[p,v]],[/(u304aa)/i],[d,[h,"AT&amp;T"],[p,v]],[/\bsie-(\w*)/i],[d,[h,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[d,[h,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[h,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[h,"Verizon"],[p,b]],[/\b(?:barnes[&amp; ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[h,"Barnes &amp; Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[d,[h,"NuVision"],[p,b]],[/\b(k88) b/i],[d,[h,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[d,[h,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[d,[h,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[d,[h,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[d,[h,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],d,[p,b]],[/\b(ns-?\w{0,9}) b/i],[d,[h,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[h,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],d,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],d,[p,v]],[/\b(ph-1) /i],[d,[h,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[h,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[d,[h,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[d,[h,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[d,[h,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[h,d,[p,v]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,z],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[h,W],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[h,W],[p,v]],[/smart-tv.+(samsung)/i],[h,[p,C]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,re],[p,C]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,B],[p,C]],[/(apple) ?tv/i],[h,[d,w+" TV"],[p,C]],[/crkey/i],[[d,E+"cast"],[h,j],[p,C]],[/droid.+aft(\w)( bui|\))/i],[d,[h,T],[p,C]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[h,ce],[p,C]],[/(bravia[\w ]+)( bui|\))/i],[d,[h,ge],[p,C]],[/(mitv-\w{5}) bui/i],[d,[h,Y],[p,C]],[/Hbbtv.*(technisat) (.*);/i],[h,d,[p,C]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,R],[d,R],[p,C]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,C]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[p,g]],[/droid.+; (shield) bui/i],[d,[h,"Nvidia"],[p,g]],[/(playstation [345portablevi]+)/i],[d,[h,ge],[p,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[h,z],[p,g]],[/((pebble))app/i],[h,d,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[h,w],[p,x]],[/droid.+; (glass) \d/i],[d,[h,j],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[d,[h,W],[p,x]],[/(quest( 2| pro)?)/i],[d,[h,G],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[c,O+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[c,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[c,[f,J,de]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,"Windows"],[f,J,de]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,F],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,f],[/\(bb(10);/i],[f,[c,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[c,Q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[c,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,ee],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,f],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[c,f]]},be=function(Ie,Ve){if(typeof Ie===a&amp;&amp;(Ve=Ie,Ie=e),!(this instanceof be))return new be(Ie,Ve).getResult();var Ae=typeof r!==s&amp;&amp;r.navigator?r.navigator:e,lt=Ie||(Ae&amp;&amp;Ae.userAgent?Ae.userAgent:n),vt=Ae&amp;&amp;Ae.userAgentData?Ae.userAgentData:e,et=Ve?L(se,Ve):se;return this.getBrowser=function(){var _e={};return _e[c]=e,_e[f]=e,H.call(_e,lt,et.browser),_e[u]=K(_e[f]),Ae&amp;&amp;Ae.brave&amp;&amp;typeof Ae.brave.isBrave==i&amp;&amp;(_e[c]="Brave"),_e},this.getCPU=function(){var _e={};return _e[m]=e,H.call(_e,lt,et.cpu),_e},this.getDevice=function(){var _e={};return _e[h]=e,_e[d]=e,_e[p]=e,H.call(_e,lt,et.device),!_e[p]&amp;&amp;vt&amp;&amp;vt.mobile&amp;&amp;(_e[p]=v),_e[d]=="Macintosh"&amp;&amp;Ae&amp;&amp;typeof Ae.standalone!==s&amp;&amp;Ae.maxTouchPoints&amp;&amp;Ae.maxTouchPoints&gt;2&amp;&amp;(_e[d]="iPad",_e[p]=b),_e},this.getEngine=function(){var _e={};return _e[c]=e,_e[f]=e,H.call(_e,lt,et.engine),_e},this.getOS=function(){var _e={};return _e[c]=e,_e[f]=e,H.call(_e,lt,et.os),!_e[c]&amp;&amp;vt&amp;&amp;vt.platform!="Unknown"&amp;&amp;(_e[c]=vt.platform.replace(/chrome os/i,ee).replace(/macos/i,F)),_e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return lt},this.setUA=function(_e){return lt=typeof _e===l&amp;&amp;_e.length&gt;S?R(_e,S):_e,this},this.setUA(lt),this};be.VERSION=t,be.BROWSER=$([c,f,u]),be.CPU=$([m]),be.DEVICE=$([d,h,p,g,v,C,b,x,y]),be.ENGINE=be.OS=$([c,f]),typeof YD!==s?(typeof y2!==s&amp;&amp;y2.exports&amp;&amp;(YD=y2.exports=be),YD.UAParser=be):typeof define===i&amp;&amp;define.amd?define(function(){return be}):typeof r!==s&amp;&amp;(r.UAParser=be);var Pe=typeof r!==s&amp;&amp;(r.jQuery||r.Zepto);if(Pe&amp;&amp;!Pe.ua){var ke=new be;Pe.ua=ke.getResult(),Pe.ua.get=function(){return ke.getUA()},Pe.ua.set=function(Ie){ke.setUA(Ie);var Ve=ke.getResult();for(var Ae in Ve)Pe.ua[Ae]=Ve[Ae]}}})(typeof window=="object"?window:YD)});var Sre=Qt((yVe,Cre)=&gt;{function I2(){var r={"[\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D\u5341\u767E\u5343\u4E07\u5104\u5146]":"M","[\u4E00-\u9FA0\u3005\u3006\u30F5\u30F6]":"H","[\u3041-\u3093]":"I","[\u30A1-\u30F4\u30FC\uFF71-\uFF9D\uFF9E\uFF70]":"K","[a-zA-Z\uFF41-\uFF5A\uFF21-\uFF3A]":"A","[0-9\uFF10-\uFF19]":"N"};this.chartype_=[];for(var e in r){var t=new RegExp;t.compile(e),this.chartype_.push([t,r[e]])}return this.BIAS__=-332,this.BC1__={HH:6,II:2461,KH:406,OH:-1378},this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920},this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266},this.BP1__={BB:295,OB:304,OO:-125,UB:352},this.BP2__={BO:60,OO:-1762},this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965},this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146},this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699},this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973},this.BW1__={",\u3068":660,",\u540C":727,B1\u3042:1404,B1\u540C:542,"\u3001\u3068":660,"\u3001\u540C":727,"\u300D\u3068":1682,\u3042\u3063:1505,\u3044\u3046:1743,\u3044\u3063:-2055,\u3044\u308B:672,\u3046\u3057:-4817,\u3046\u3093:665,\u304B\u3089:3472,\u304C\u3089:600,\u3053\u3046:-790,\u3053\u3068:2083,\u3053\u3093:-1262,\u3055\u3089:-4143,\u3055\u3093:4573,\u3057\u305F:2641,\u3057\u3066:1104,\u3059\u3067:-3399,\u305D\u3053:1977,\u305D\u308C:-871,\u305F\u3061:1122,\u305F\u3081:601,\u3063\u305F:3463,\u3064\u3044:-802,\u3066\u3044:805,\u3066\u304D:1249,\u3067\u304D:1127,\u3067\u3059:3445,\u3067\u306F:844,\u3068\u3044:-4915,\u3068\u307F:1922,\u3069\u3053:3887,\u306A\u3044:5713,\u306A\u3063:3015,\u306A\u3069:7379,\u306A\u3093:-1113,\u306B\u3057:2468,\u306B\u306F:1498,\u306B\u3082:1671,\u306B\u5BFE:-912,\u306E\u4E00:-501,\u306E\u4E2D:741,\u307E\u305B:2448,\u307E\u3067:1711,\u307E\u307E:2600,\u307E\u308B:-2155,\u3084\u3080:-1947,\u3088\u3063:-2565,\u308C\u305F:2369,\u308C\u3067:-913,\u3092\u3057:1860,\u3092\u898B:731,\u4EA1\u304F:-1886,\u4EAC\u90FD:2558,\u53D6\u308A:-2784,\u5927\u304D:-2604,\u5927\u962A:1497,\u5E73\u65B9:-2314,\u5F15\u304D:-1336,\u65E5\u672C:-195,\u672C\u5F53:-2423,\u6BCE\u65E5:-2113,\u76EE\u6307:-724,\uFF22\uFF11\u3042:1404,\uFF22\uFF11\u540C:542,"\uFF63\u3068":1682},this.BW2__={"..":-11822,11:-669,"\u2015\u2015":-5730,"\u2212\u2212":-13175,\u3044\u3046:-1609,\u3046\u304B:2490,\u304B\u3057:-1350,\u304B\u3082:-602,\u304B\u3089:-7194,\u304B\u308C:4612,\u304C\u3044:853,\u304C\u3089:-3198,\u304D\u305F:1941,\u304F\u306A:-1597,\u3053\u3068:-8392,\u3053\u306E:-4193,\u3055\u305B:4533,\u3055\u308C:13168,\u3055\u3093:-3977,\u3057\u3044:-1819,\u3057\u304B:-545,\u3057\u305F:5078,\u3057\u3066:972,\u3057\u306A:939,\u305D\u306E:-3744,\u305F\u3044:-1253,\u305F\u305F:-662,\u305F\u3060:-3857,\u305F\u3061:-786,\u305F\u3068:1224,\u305F\u306F:-939,\u3063\u305F:4589,\u3063\u3066:1647,\u3063\u3068:-2094,\u3066\u3044:6144,\u3066\u304D:3640,\u3066\u304F:2551,\u3066\u306F:-3110,\u3066\u3082:-3065,\u3067\u3044:2666,\u3067\u304D:-1528,\u3067\u3057:-3828,\u3067\u3059:-4761,\u3067\u3082:-4203,\u3068\u3044:1890,\u3068\u3053:-1746,\u3068\u3068:-2279,\u3068\u306E:720,\u3068\u307F:5168,\u3068\u3082:-3941,\u306A\u3044:-2488,\u306A\u304C:-1313,\u306A\u3069:-6509,\u306A\u306E:2614,\u306A\u3093:3099,\u306B\u304A:-1615,\u306B\u3057:2748,\u306B\u306A:2454,\u306B\u3088:-7236,\u306B\u5BFE:-14943,\u306B\u5F93:-4688,\u306B\u95A2:-11388,\u306E\u304B:2093,\u306E\u3067:-7059,\u306E\u306B:-6041,\u306E\u306E:-6125,\u306F\u3044:1073,\u306F\u304C:-1033,\u306F\u305A:-2532,\u3070\u308C:1813,\u307E\u3057:-1316,\u307E\u3067:-6621,\u307E\u308C:5409,\u3081\u3066:-3153,\u3082\u3044:2230,\u3082\u306E:-10713,\u3089\u304B:-944,\u3089\u3057:-1611,\u3089\u306B:-1897,\u308A\u3057:651,\u308A\u307E:1620,\u308C\u305F:4270,\u308C\u3066:849,\u308C\u3070:4114,\u308D\u3046:6067,\u308F\u308C:7901,\u3092\u901A:-11877,\u3093\u3060:728,\u3093\u306A:-4115,\u4E00\u4EBA:602,\u4E00\u65B9:-1375,\u4E00\u65E5:970,\u4E00\u90E8:-1051,\u4E0A\u304C:-4479,\u4F1A\u793E:-1116,\u51FA\u3066:2163,\u5206\u306E:-7758,\u540C\u515A:970,\u540C\u65E5:-913,\u5927\u962A:-2471,\u59D4\u54E1:-1250,\u5C11\u306A:-1050,\u5E74\u5EA6:-8669,\u5E74\u9593:-1626,\u5E9C\u770C:-2363,\u624B\u6A29:-1982,\u65B0\u805E:-4066,\u65E5\u65B0:-722,\u65E5\u672C:-7068,\u65E5\u7C73:3372,\u66DC\u65E5:-601,\u671D\u9BAE:-2355,\u672C\u4EBA:-2697,\u6771\u4EAC:-1543,\u7136\u3068:-1384,\u793E\u4F1A:-1276,\u7ACB\u3066:-990,\u7B2C\u306B:-1612,\u7C73\u56FD:-4268,"\uFF11\uFF11":-669},this.BW3__={\u3042\u305F:-2194,\u3042\u308A:719,\u3042\u308B:3846,"\u3044.":-1185,"\u3044\u3002":-1185,\u3044\u3044:5308,\u3044\u3048:2079,\u3044\u304F:3029,\u3044\u305F:2056,\u3044\u3063:1883,\u3044\u308B:5600,\u3044\u308F:1527,\u3046\u3061:1117,\u3046\u3068:4798,\u3048\u3068:1454,"\u304B.":2857,"\u304B\u3002":2857,\u304B\u3051:-743,\u304B\u3063:-4098,\u304B\u306B:-669,\u304B\u3089:6520,\u304B\u308A:-2670,"\u304C,":1816,"\u304C\u3001":1816,\u304C\u304D:-4855,\u304C\u3051:-1127,\u304C\u3063:-913,\u304C\u3089:-4977,\u304C\u308A:-2064,\u304D\u305F:1645,\u3051\u3069:1374,\u3053\u3068:7397,\u3053\u306E:1542,\u3053\u308D:-2757,\u3055\u3044:-714,\u3055\u3092:976,"\u3057,":1557,"\u3057\u3001":1557,\u3057\u3044:-3714,\u3057\u305F:3562,\u3057\u3066:1449,\u3057\u306A:2608,\u3057\u307E:1200,"\u3059.":-1310,"\u3059\u3002":-1310,\u3059\u308B:6521,"\u305A,":3426,"\u305A\u3001":3426,\u305A\u306B:841,\u305D\u3046:428,"\u305F.":8875,"\u305F\u3002":8875,\u305F\u3044:-594,\u305F\u306E:812,\u305F\u308A:-1183,\u305F\u308B:-853,"\u3060.":4098,"\u3060\u3002":4098,\u3060\u3063:1004,\u3063\u305F:-4748,\u3063\u3066:300,\u3066\u3044:6240,\u3066\u304A:855,\u3066\u3082:302,\u3067\u3059:1437,\u3067\u306B:-1482,\u3067\u306F:2295,\u3068\u3046:-1387,\u3068\u3057:2266,\u3068\u306E:541,\u3068\u3082:-3543,\u3069\u3046:4664,\u306A\u3044:1796,\u306A\u304F:-903,\u306A\u3069:2135,"\u306B,":-1021,"\u306B\u3001":-1021,\u306B\u3057:1771,\u306B\u306A:1906,\u306B\u306F:2644,"\u306E,":-724,"\u306E\u3001":-724,\u306E\u5B50:-1e3,"\u306F,":1337,"\u306F\u3001":1337,\u3079\u304D:2181,\u307E\u3057:1113,\u307E\u3059:6943,\u307E\u3063:-1549,\u307E\u3067:6154,\u307E\u308C:-793,\u3089\u3057:1479,\u3089\u308C:6820,\u308B\u308B:3818,"\u308C,":854,"\u308C\u3001":854,\u308C\u305F:1850,\u308C\u3066:1375,\u308C\u3070:-3246,\u308C\u308B:1091,\u308F\u308C:-605,\u3093\u3060:606,\u3093\u3067:798,\u30AB\u6708:990,\u4F1A\u8B70:860,\u5165\u308A:1232,\u5927\u4F1A:2217,\u59CB\u3081:1681,\u5E02:965,\u65B0\u805E:-5055,"\u65E5,":974,"\u65E5\u3001":974,\u793E\u4F1A:2024,\uFF76\u6708:990},this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832},this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649},this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393},this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841},this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68},this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591},this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685},this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156},this.TW1__={\u306B\u3064\u3044:-4681,\u6771\u4EAC\u90FD:2026},this.TW2__={\u3042\u308B\u7A0B:-2049,\u3044\u3063\u305F:-1256,\u3053\u308D\u304C:-2434,\u3057\u3087\u3046:3873,\u305D\u306E\u5F8C:-4430,\u3060\u3063\u3066:-1049,\u3066\u3044\u305F:1833,\u3068\u3057\u3066:-4657,\u3068\u3082\u306B:-4517,\u3082\u306E\u3067:1882,\u4E00\u6C17\u306B:-792,\u521D\u3081\u3066:-1512,\u540C\u6642\u306B:-8097,\u5927\u304D\u306A:-1255,\u5BFE\u3057\u3066:-2721,\u793E\u4F1A\u515A:-3216},this.TW3__={\u3044\u305F\u3060:-1734,\u3057\u3066\u3044:1314,\u3068\u3057\u3066:-4314,\u306B\u3064\u3044:-5483,\u306B\u3068\u3063:-5989,\u306B\u5F53\u305F:-6247,"\u306E\u3067,":-727,"\u306E\u3067\u3001":-727,\u306E\u3082\u306E:-600,\u308C\u304B\u3089:-3752,\u5341\u4E8C\u6708:-2287},this.TW4__={"\u3044\u3046.":8576,"\u3044\u3046\u3002":8576,\u304B\u3089\u306A:-2348,\u3057\u3066\u3044:2958,"\u305F\u304C,":1516,"\u305F\u304C\u3001":1516,\u3066\u3044\u308B:1538,\u3068\u3044\u3046:1349,\u307E\u3057\u305F:5543,\u307E\u305B\u3093:1097,\u3088\u3046\u3068:-4258,\u3088\u308B\u3068:5865},this.UC1__={A:484,K:93,M:645,O:-505},this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646},this.UC3__={A:-1370,I:2311},this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646},this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831},this.UC6__={H:-506,I:-253,K:87,M:247,O:-387},this.UP1__={O:-214},this.UP2__={B:69,O:935},this.UP3__={B:189},this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422},this.UQ2__={BH:216,BI:113,OK:1759},this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212},this.UW1__={",":156,"\u3001":156,"\u300C":-463,\u3042:-941,\u3046:-127,\u304C:-553,\u304D:121,\u3053:505,\u3067:-201,\u3068:-547,\u3069:-123,\u306B:-789,\u306E:-185,\u306F:-847,\u3082:-466,\u3084:-470,\u3088:182,\u3089:-292,\u308A:208,\u308C:169,\u3092:-446,\u3093:-137,"\u30FB":-135,\u4E3B:-402,\u4EAC:-268,\u533A:-912,\u5348:871,\u56FD:-460,\u5927:561,\u59D4:729,\u5E02:-411,\u65E5:-141,\u7406:361,\u751F:-408,\u770C:-386,\u90FD:-718,"\uFF62":-463,"\uFF65":-135},this.UW2__={",":-829,"\u3001":-829,"\u3007":892,"\u300C":-645,"\u300D":3145,\u3042:-538,\u3044:505,\u3046:134,\u304A:-502,\u304B:1454,\u304C:-856,\u304F:-412,\u3053:1141,\u3055:878,\u3056:540,\u3057:1529,\u3059:-675,\u305B:300,\u305D:-1011,\u305F:188,\u3060:1837,\u3064:-949,\u3066:-291,\u3067:-268,\u3068:-981,\u3069:1273,\u306A:1063,\u306B:-1764,\u306E:130,\u306F:-409,\u3072:-1273,\u3079:1261,\u307E:600,\u3082:-1263,\u3084:-402,\u3088:1639,\u308A:-579,\u308B:-694,\u308C:571,\u3092:-2516,\u3093:2095,\u30A2:-587,\u30AB:306,\u30AD:568,\u30C3:831,\u4E09:-758,\u4E0D:-2150,\u4E16:-302,\u4E2D:-968,\u4E3B:-861,\u4E8B:492,\u4EBA:-123,\u4F1A:978,\u4FDD:362,\u5165:548,\u521D:-3025,\u526F:-1566,\u5317:-3414,\u533A:-422,\u5927:-1769,\u5929:-865,\u592A:-483,\u5B50:-1519,\u5B66:760,\u5B9F:1023,\u5C0F:-2009,\u5E02:-813,\u5E74:-1060,\u5F37:1067,\u624B:-1519,\u63FA:-1033,\u653F:1522,\u6587:-1355,\u65B0:-1682,\u65E5:-1815,\u660E:-1462,\u6700:-630,\u671D:-1843,\u672C:-1650,\u6771:-931,\u679C:-665,\u6B21:-2378,\u6C11:-180,\u6C17:-1740,\u7406:752,\u767A:529,\u76EE:-1584,\u76F8:-242,\u770C:-1165,\u7ACB:-763,\u7B2C:810,\u7C73:509,\u81EA:-1353,\u884C:838,\u897F:-744,\u898B:-3874,\u8ABF:1010,\u8B70:1198,\u8FBC:3041,\u958B:1758,\u9593:-1257,"\uFF62":-645,"\uFF63":3145,\uFF6F:831,\uFF71:-587,\uFF76:306,\uFF77:568},this.UW3__={",":4889,1:-800,"\u2212":-1723,"\u3001":4889,\u3005:-2311,"\u3007":5827,"\u300D":2670,"\u3013":-3573,\u3042:-2696,\u3044:1006,\u3046:2342,\u3048:1983,\u304A:-4864,\u304B:-1163,\u304C:3271,\u304F:1004,\u3051:388,\u3052:401,\u3053:-3552,\u3054:-3116,\u3055:-1058,\u3057:-395,\u3059:584,\u305B:3685,\u305D:-5228,\u305F:842,\u3061:-521,\u3063:-1444,\u3064:-1081,\u3066:6167,\u3067:2318,\u3068:1691,\u3069:-899,\u306A:-2788,\u306B:2745,\u306E:4056,\u306F:4555,\u3072:-2171,\u3075:-1798,\u3078:1199,\u307B:-5516,\u307E:-4384,\u307F:-120,\u3081:1205,\u3082:2323,\u3084:-788,\u3088:-202,\u3089:727,\u308A:649,\u308B:5905,\u308C:2773,\u308F:-1207,\u3092:6620,\u3093:-518,\u30A2:551,\u30B0:1319,\u30B9:874,\u30C3:-1350,\u30C8:521,\u30E0:1109,\u30EB:1591,\u30ED:2201,\u30F3:278,"\u30FB":-3794,\u4E00:-1619,\u4E0B:-1759,\u4E16:-2087,\u4E21:3815,\u4E2D:653,\u4E3B:-758,\u4E88:-1193,\u4E8C:974,\u4EBA:2742,\u4ECA:792,\u4ED6:1889,\u4EE5:-1368,\u4F4E:811,\u4F55:4265,\u4F5C:-361,\u4FDD:-2439,\u5143:4858,\u515A:3593,\u5168:1574,\u516C:-3030,\u516D:755,\u5171:-1880,\u5186:5807,\u518D:3095,\u5206:457,\u521D:2475,\u5225:1129,\u524D:2286,\u526F:4437,\u529B:365,\u52D5:-949,\u52D9:-1872,\u5316:1327,\u5317:-1038,\u533A:4646,\u5343:-2309,\u5348:-783,\u5354:-1006,\u53E3:483,\u53F3:1233,\u5404:3588,\u5408:-241,\u540C:3906,\u548C:-837,\u54E1:4513,\u56FD:642,\u578B:1389,\u5834:1219,\u5916:-241,\u59BB:2016,\u5B66:-1356,\u5B89:-423,\u5B9F:-1008,\u5BB6:1078,\u5C0F:-513,\u5C11:-3102,\u5DDE:1155,\u5E02:3197,\u5E73:-1804,\u5E74:2416,\u5E83:-1030,\u5E9C:1605,\u5EA6:1452,\u5EFA:-2352,\u5F53:-3885,\u5F97:1905,\u601D:-1291,\u6027:1822,\u6238:-488,\u6307:-3973,\u653F:-2013,\u6559:-1479,\u6570:3222,\u6587:-1489,\u65B0:1764,\u65E5:2099,\u65E7:5792,\u6628:-661,\u6642:-1248,\u66DC:-951,\u6700:-937,\u6708:4125,\u671F:360,\u674E:3094,\u6751:364,\u6771:-805,\u6838:5156,\u68EE:2438,\u696D:484,\u6C0F:2613,\u6C11:-1694,\u6C7A:-1073,\u6CD5:1868,\u6D77:-495,\u7121:979,\u7269:461,\u7279:-3850,\u751F:-273,\u7528:914,\u753A:1215,\u7684:7313,\u76F4:-1835,\u7701:792,\u770C:6293,\u77E5:-1528,\u79C1:4231,\u7A0E:401,\u7ACB:-960,\u7B2C:1201,\u7C73:7767,\u7CFB:3066,\u7D04:3663,\u7D1A:1384,\u7D71:-4229,\u7DCF:1163,\u7DDA:1255,\u8005:6457,\u80FD:725,\u81EA:-2869,\u82F1:785,\u898B:1044,\u8ABF:-562,\u8CA1:-733,\u8CBB:1777,\u8ECA:1835,\u8ECD:1375,\u8FBC:-1504,\u901A:-1136,\u9078:-681,\u90CE:1026,\u90E1:4404,\u90E8:1200,\u91D1:2163,\u9577:421,\u958B:-1432,\u9593:1302,\u95A2:-1282,\u96E8:2009,\u96FB:-1045,\u975E:2066,\u99C5:1620,"\uFF11":-800,"\uFF63":2670,"\uFF65":-3794,\uFF6F:-1350,\uFF71:551,\uFF78\uFF9E:1319,\uFF7D:874,\uFF84:521,\uFF91:1109,\uFF99:1591,\uFF9B:2201,\uFF9D:278},this.UW4__={",":3930,".":3508,"\u2015":-4841,"\u3001":3930,"\u3002":3508,"\u3007":4999,"\u300C":1895,"\u300D":3798,"\u3013":-5156,\u3042:4752,\u3044:-3435,\u3046:-640,\u3048:-2514,\u304A:2405,\u304B:530,\u304C:6006,\u304D:-4482,\u304E:-3821,\u304F:-3788,\u3051:-4376,\u3052:-4734,\u3053:2255,\u3054:1979,\u3055:2864,\u3057:-843,\u3058:-2506,\u3059:-731,\u305A:1251,\u305B:181,\u305D:4091,\u305F:5034,\u3060:5408,\u3061:-3654,\u3063:-5882,\u3064:-1659,\u3066:3994,\u3067:7410,\u3068:4547,\u306A:5433,\u306B:6499,\u306C:1853,\u306D:1413,\u306E:7396,\u306F:8578,\u3070:1940,\u3072:4249,\u3073:-4134,\u3075:1345,\u3078:6665,\u3079:-744,\u307B:1464,\u307E:1051,\u307F:-2082,\u3080:-882,\u3081:-5046,\u3082:4169,\u3083:-2666,\u3084:2795,\u3087:-1544,\u3088:3351,\u3089:-2922,\u308A:-9726,\u308B:-14896,\u308C:-2613,\u308D:-4570,\u308F:-1783,\u3092:13150,\u3093:-2352,\u30AB:2145,\u30B3:1789,\u30BB:1287,\u30C3:-724,\u30C8:-403,\u30E1:-1635,\u30E9:-881,\u30EA:-541,\u30EB:-856,\u30F3:-3637,"\u30FB":-4371,\u30FC:-11870,\u4E00:-2069,\u4E2D:2210,\u4E88:782,\u4E8B:-190,\u4E95:-1768,\u4EBA:1036,\u4EE5:544,\u4F1A:950,\u4F53:-1286,\u4F5C:530,\u5074:4292,\u5148:601,\u515A:-2006,\u5171:-1212,\u5185:584,\u5186:788,\u521D:1347,\u524D:1623,\u526F:3879,\u529B:-302,\u52D5:-740,\u52D9:-2715,\u5316:776,\u533A:4517,\u5354:1013,\u53C2:1555,\u5408:-1834,\u548C:-681,\u54E1:-910,\u5668:-851,\u56DE:1500,\u56FD:-619,\u5712:-1200,\u5730:866,\u5834:-1410,\u5841:-2094,\u58EB:-1413,\u591A:1067,\u5927:571,\u5B50:-4802,\u5B66:-1397,\u5B9A:-1057,\u5BFA:-809,\u5C0F:1910,\u5C4B:-1328,\u5C71:-1500,\u5CF6:-2056,\u5DDD:-2667,\u5E02:2771,\u5E74:374,\u5E81:-4556,\u5F8C:456,\u6027:553,\u611F:916,\u6240:-1566,\u652F:856,\u6539:787,\u653F:2182,\u6559:704,\u6587:522,\u65B9:-856,\u65E5:1798,\u6642:1829,\u6700:845,\u6708:-9066,\u6728:-485,\u6765:-442,\u6821:-360,\u696D:-1043,\u6C0F:5388,\u6C11:-2716,\u6C17:-910,\u6CA2:-939,\u6E08:-543,\u7269:-735,\u7387:672,\u7403:-1267,\u751F:-1286,\u7523:-1101,\u7530:-2900,\u753A:1826,\u7684:2586,\u76EE:922,\u7701:-3485,\u770C:2997,\u7A7A:-867,\u7ACB:-2112,\u7B2C:788,\u7C73:2937,\u7CFB:786,\u7D04:2171,\u7D4C:1146,\u7D71:-1169,\u7DCF:940,\u7DDA:-994,\u7F72:749,\u8005:2145,\u80FD:-730,\u822C:-852,\u884C:-792,\u898F:792,\u8B66:-1184,\u8B70:-244,\u8C37:-1e3,\u8CDE:730,\u8ECA:-1481,\u8ECD:1158,\u8F2A:-1433,\u8FBC:-3370,\u8FD1:929,\u9053:-1291,\u9078:2596,\u90CE:-4866,\u90FD:1192,\u91CE:-1100,\u9280:-2213,\u9577:357,\u9593:-2344,\u9662:-2297,\u969B:-2604,\u96FB:-878,\u9818:-1659,\u984C:-792,\u9928:-1984,\u9996:1749,\u9AD8:2120,"\uFF62":1895,"\uFF63":3798,"\uFF65":-4371,\uFF6F:-724,\uFF70:-11870,\uFF76:2145,\uFF7A:1789,\uFF7E:1287,\uFF84:-403,\uFF92:-1635,\uFF97:-881,\uFF98:-541,\uFF99:-856,\uFF9D:-3637},this.UW5__={",":465,".":-299,1:-514,E2:-32768,"]":-2762,"\u3001":465,"\u3002":-299,"\u300C":363,\u3042:1655,\u3044:331,\u3046:-503,\u3048:1199,\u304A:527,\u304B:647,\u304C:-421,\u304D:1624,\u304E:1971,\u304F:312,\u3052:-983,\u3055:-1537,\u3057:-1371,\u3059:-852,\u3060:-1186,\u3061:1093,\u3063:52,\u3064:921,\u3066:-18,\u3067:-850,\u3068:-127,\u3069:1682,\u306A:-787,\u306B:-1224,\u306E:-635,\u306F:-578,\u3079:1001,\u307F:502,\u3081:865,\u3083:3350,\u3087:854,\u308A:-208,\u308B:429,\u308C:504,\u308F:419,\u3092:-1264,\u3093:327,\u30A4:241,\u30EB:451,\u30F3:-343,\u4E2D:-871,\u4EAC:722,\u4F1A:-1153,\u515A:-654,\u52D9:3519,\u533A:-901,\u544A:848,\u54E1:2104,\u5927:-1296,\u5B66:-548,\u5B9A:1785,\u5D50:-1304,\u5E02:-2991,\u5E2D:921,\u5E74:1763,\u601D:872,\u6240:-814,\u6319:1618,\u65B0:-1682,\u65E5:218,\u6708:-4353,\u67FB:932,\u683C:1356,\u6A5F:-1508,\u6C0F:-1347,\u7530:240,\u753A:-3912,\u7684:-3149,\u76F8:1319,\u7701:-1052,\u770C:-4003,\u7814:-997,\u793E:-278,\u7A7A:-813,\u7D71:1955,\u8005:-2233,\u8868:663,\u8A9E:-1073,\u8B70:1219,\u9078:-1018,\u90CE:-368,\u9577:786,\u9593:1191,\u984C:2368,\u9928:-689,"\uFF11":-514,\uFF25\uFF12:-32768,"\uFF62":363,\uFF72:241,\uFF99:451,\uFF9D:-343},this.UW6__={",":227,".":808,1:-270,E1:306,"\u3001":227,"\u3002":808,\u3042:-307,\u3046:189,\u304B:241,\u304C:-73,\u304F:-121,\u3053:-200,\u3058:1782,\u3059:383,\u305F:-428,\u3063:573,\u3066:-1014,\u3067:101,\u3068:-105,\u306A:-253,\u306B:-149,\u306E:-417,\u306F:-236,\u3082:-206,\u308A:187,\u308B:-135,\u3092:195,\u30EB:-673,\u30F3:-496,\u4E00:-277,\u4E2D:201,\u4EF6:-800,\u4F1A:624,\u524D:302,\u533A:1792,\u54E1:-1212,\u59D4:798,\u5B66:-960,\u5E02:887,\u5E83:-695,\u5F8C:535,\u696D:-697,\u76F8:753,\u793E:-507,\u798F:974,\u7A7A:-822,\u8005:1811,\u9023:463,\u90CE:1082,"\uFF11":-270,\uFF25\uFF11:306,\uFF99:-673,\uFF9D:-496},this}I2.prototype.ctype_=function(r){for(var e in this.chartype_)if(r.match(this.chartype_[e][0]))return this.chartype_[e][1];return"O"};I2.prototype.ts_=function(r){return r||0};I2.prototype.segment=function(r){if(r==null||r==null||r=="")return[];var e=[],t=["B3","B2","B1"],n=["O","O","O"],o=r.split("");for(u=0;u&lt;o.length;++u)t.push(o[u]),n.push(this.ctype_(o[u]));t.push("E1"),t.push("E2"),t.push("E3"),n.push("O"),n.push("O"),n.push("O");for(var i=t[3],s="U",a="U",l="U",u=4;u&lt;t.length-3;++u){var d=this.BIAS__,c=t[u-3],p=t[u-2],h=t[u-1],f=t[u],m=t[u+1],g=t[u+2],v=n[u-3],b=n[u-2],C=n[u-1],x=n[u],y=n[u+1],S=n[u+2];d+=this.ts_(this.UP1__[s]),d+=this.ts_(this.UP2__[a]),d+=this.ts_(this.UP3__[l]),d+=this.ts_(this.BP1__[s+a]),d+=this.ts_(this.BP2__[a+l]),d+=this.ts_(this.UW1__[c]),d+=this.ts_(this.UW2__[p]),d+=this.ts_(this.UW3__[h]),d+=this.ts_(this.UW4__[f]),d+=this.ts_(this.UW5__[m]),d+=this.ts_(this.UW6__[g]),d+=this.ts_(this.BW1__[p+h]),d+=this.ts_(this.BW2__[h+f]),d+=this.ts_(this.BW3__[f+m]),d+=this.ts_(this.TW1__[c+p+h]),d+=this.ts_(this.TW2__[p+h+f]),d+=this.ts_(this.TW3__[h+f+m]),d+=this.ts_(this.TW4__[f+m+g]),d+=this.ts_(this.UC1__[v]),d+=this.ts_(this.UC2__[b]),d+=this.ts_(this.UC3__[C]),d+=this.ts_(this.UC4__[x]),d+=this.ts_(this.UC5__[y]),d+=this.ts_(this.UC6__[S]),d+=this.ts_(this.BC1__[b+C]),d+=this.ts_(this.BC2__[C+x]),d+=this.ts_(this.BC3__[x+y]),d+=this.ts_(this.TC1__[v+b+C]),d+=this.ts_(this.TC2__[b+C+x]),d+=this.ts_(this.TC3__[C+x+y]),d+=this.ts_(this.TC4__[x+y+S]),d+=this.ts_(this.UQ1__[s+v]),d+=this.ts_(this.UQ2__[a+b]),d+=this.ts_(this.UQ3__[l+C]),d+=this.ts_(this.BQ1__[a+b+C]),d+=this.ts_(this.BQ2__[a+C+x]),d+=this.ts_(this.BQ3__[l+b+C]),d+=this.ts_(this.BQ4__[l+C+x]),d+=this.ts_(this.TQ1__[a+v+b+C]),d+=this.ts_(this.TQ2__[a+b+C+x]),d+=this.ts_(this.TQ3__[l+v+b+C]),d+=this.ts_(this.TQ4__[l+b+C+x]);var T="O";d&gt;0&amp;&amp;(e.push(i),i="",T="B"),s=a,a=l,l=T,i+=t[u]}return e.push(i),e};Cre.exports=I2});var Pre=Qt(kre=&gt;{function mPe(r){for(var e=new String(r).toString(),t=e.length,n=0,o=[];n&lt;t;){var i=e.charCodeAt(n);if(i&lt;55296||i&gt;57343)o.push(i);else if(56320&lt;=i&amp;&amp;i&lt;=3583)o.push(65533);else if(55296&lt;=i&amp;&amp;i&lt;=56319){if(n===t-1)o.push(65533);else if(n&lt;t-1){var s=e.charCodeAt(n+1);if(56320&lt;=s&amp;&amp;s&lt;=57343){var a=i&amp;1023,l=s&amp;1023;o.push(65536+1024*a+l),n=n+1}else(s&lt;56320||s&gt;57343)&amp;&amp;o.push(65533)}}n=n+1}return o}String.fromCodePoint||function(){var r=function(){try{var o={},i=Object.defineProperty,s=i(o,o,o)&amp;&amp;i}catch(a){}return s}(),e=String.fromCharCode,t=Math.floor,n=function(){var o=16384,i=[],s,a,l=-1,u=arguments.length;if(!u)return"";for(var d="";++l&lt;u;){var c=Number(arguments[l]);if(!isFinite(c)||c&lt;0||c&gt;1114111||t(c)!=c)throw RangeError("Invalid code point: "+c);c&lt;=65535?i.push(c):(c-=65536,s=(c&gt;&gt;10)+55296,a=c%1024+56320,i.push(s,a)),(l+1==u||i.length&gt;o)&amp;&amp;(d+=e.apply(null,i),i.length=0)}return d};r?r(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}();kre.obtainUnicode=mPe});var W2=Qt((uk,_8)=&gt;{"use strict";Object.defineProperty(uk,"__esModule",{value:!0});uk.default=wPe;function G2(r){return typeof Symbol=="function"&amp;&amp;typeof Symbol.iterator=="symbol"?G2=function(t){return typeof t}:G2=function(t){return t&amp;&amp;typeof Symbol=="function"&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?"symbol":typeof t},G2(r)}function wPe(r){var e=typeof r=="string"||r instanceof String;if(!e){var t=G2(r);throw r===null?t="null":t==="object"&amp;&amp;(t=r.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}_8.exports=uk.default;_8.exports.default=uk.default});var M8=Qt((dk,F8)=&gt;{"use strict";Object.defineProperty(dk,"__esModule",{value:!0});dk.default=TPe;function TPe(){var r=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},e=arguments.length&gt;1?arguments[1]:void 0;for(var t in e)typeof r[t]=="undefined"&amp;&amp;(r[t]=e[t]);return r}F8.exports=dk.default;F8.exports.default=dk.default});var Hre=Qt((ck,N8)=&gt;{"use strict";Object.defineProperty(ck,"__esModule",{value:!0});ck.default=APe;var DPe=zre(W2()),kPe=zre(M8());function zre(r){return r&amp;&amp;r.__esModule?r:{default:r}}var PPe={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function APe(r,e){(0,DPe.default)(r),e=(0,kPe.default)(e,PPe),e.allow_trailing_dot&amp;&amp;r[r.length-1]==="."&amp;&amp;(r=r.substring(0,r.length-1)),e.allow_wildcard===!0&amp;&amp;r.indexOf("*.")===0&amp;&amp;(r=r.substring(2));var t=r.split("."),n=t[t.length-1];return e.require_tld&amp;&amp;(t.length&lt;2||!e.allow_numeric_tld&amp;&amp;!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n)||/\s/.test(n))||!e.allow_numeric_tld&amp;&amp;/^\d+$/.test(n)?!1:t.every(function(o){return!(o.length&gt;63&amp;&amp;!e.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(o)||/[\uff01-\uff5e]/.test(o)||/^-|-$/.test(o)||!e.allow_underscores&amp;&amp;/_/.test(o))})}N8.exports=ck.default;N8.exports.default=ck.default});var Wre=Qt((pk,R8)=&gt;{"use strict";Object.defineProperty(pk,"__esModule",{value:!0});pk.default=B8;var IPe=EPe(W2());function EPe(r){return r&amp;&amp;r.__esModule?r:{default:r}}var Gre="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",tv="(".concat(Gre,"[.]){3}").concat(Gre),_Pe=new RegExp("^".concat(tv,"$")),fs="(?:[0-9a-fA-F]{1,4})",FPe=new RegExp("^("+"(?:".concat(fs,":){7}(?:").concat(fs,"|:)|")+"(?:".concat(fs,":){6}(?:").concat(tv,"|:").concat(fs,"|:)|")+"(?:".concat(fs,":){5}(?::").concat(tv,"|(:").concat(fs,"){1,2}|:)|")+"(?:".concat(fs,":){4}(?:(:").concat(fs,"){0,1}:").concat(tv,"|(:").concat(fs,"){1,3}|:)|")+"(?:".concat(fs,":){3}(?:(:").concat(fs,"){0,2}:").concat(tv,"|(:").concat(fs,"){1,4}|:)|")+"(?:".concat(fs,":){2}(?:(:").concat(fs,"){0,3}:").concat(tv,"|(:").concat(fs,"){1,5}|:)|")+"(?:".concat(fs,":){1}(?:(:").concat(fs,"){0,4}:").concat(tv,"|(:").concat(fs,"){1,6}|:)|")+"(?::((?::".concat(fs,"){0,5}:").concat(tv,"|(?::").concat(fs,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function B8(r){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:"";return(0,IPe.default)(r),e=String(e),e?e==="4"?_Pe.test(r):e==="6"?FPe.test(r):!1:B8(r,4)||B8(r,6)}R8.exports=pk.default;R8.exports.default=pk.default});var O8=Qt((hk,L8)=&gt;{"use strict";Object.defineProperty(hk,"__esModule",{value:!0});hk.default=$Pe;var MPe=$2(W2()),NPe=$2(Hre()),$re=$2(Wre()),BPe=$2(M8());function $2(r){return r&amp;&amp;r.__esModule?r:{default:r}}function RPe(r,e){return zPe(r)||UPe(r,e)||OPe(r,e)||LPe()}function LPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OPe(r,e){if(!!r){if(typeof r=="string")return Vre(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&amp;&amp;r.constructor&amp;&amp;(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vre(r,e)}}function Vre(r,e){(e==null||e&gt;r.length)&amp;&amp;(e=r.length);for(var t=0,n=new Array(e);t&lt;e;t++)n[t]=r[t];return n}function UPe(r,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(r)))){var t=[],n=!0,o=!1,i=void 0;try{for(var s=r[Symbol.iterator](),a;!(n=(a=s.next()).done)&amp;&amp;(t.push(a.value),!(e&amp;&amp;t.length===e));n=!0);}catch(l){o=!0,i=l}finally{try{!n&amp;&amp;s.return!=null&amp;&amp;s.return()}finally{if(o)throw i}}return t}}function zPe(r){if(Array.isArray(r))return r}var HPe={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},GPe=/^\[([^\]]+)\](?::([0-9]+))?$/;function WPe(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function jre(r,e){for(var t=0;t&lt;e.length;t++){var n=e[t];if(r===n||WPe(n)&amp;&amp;n.test(r))return!0}return!1}function $Pe(r,e){if((0,MPe.default)(r),!r||/[\s&lt;&gt;]/.test(r)||r.indexOf("mailto:")===0||(e=(0,BPe.default)(e,HPe),e.validate_length&amp;&amp;r.length&gt;=2083)||!e.allow_fragments&amp;&amp;r.includes("#")||!e.allow_query_components&amp;&amp;(r.includes("?")||r.includes("&amp;")))return!1;var t,n,o,i,s,a,l,u;if(l=r.split("#"),r=l.shift(),l=r.split("?"),r=l.shift(),l=r.split("://"),l.length&gt;1){if(t=l.shift().toLowerCase(),e.require_valid_protocol&amp;&amp;e.protocols.indexOf(t)===-1)return!1}else{if(e.require_protocol)return!1;if(r.slice(0,2)==="//"){if(!e.allow_protocol_relative_urls)return!1;l[0]=r.slice(2)}}if(r=l.join("://"),r==="")return!1;if(l=r.split("/"),r=l.shift(),r===""&amp;&amp;!e.require_host)return!0;if(l=r.split("@"),l.length&gt;1){if(e.disallow_auth||l[0]===""||(n=l.shift(),n.indexOf(":")&gt;=0&amp;&amp;n.split(":").length&gt;2))return!1;var d=n.split(":"),c=RPe(d,2),p=c[0],h=c[1];if(p===""&amp;&amp;h==="")return!1}i=l.join("@"),a=null,u=null;var f=i.match(GPe);if(f?(o="",u=f[1],a=f[2]||null):(l=i.split(":"),o=l.shift(),l.length&amp;&amp;(a=l.join(":"))),a!==null&amp;&amp;a.length&gt;0){if(s=parseInt(a,10),!/^[0-9]+$/.test(a)||s&lt;=0||s&gt;65535)return!1}else if(e.require_port)return!1;return e.host_whitelist?jre(o,e.host_whitelist):o===""&amp;&amp;!e.require_host?!0:!(!(0,$re.default)(o)&amp;&amp;!(0,NPe.default)(o,e)&amp;&amp;(!u||!(0,$re.default)(u,6))||(o=o||u,e.host_blacklist&amp;&amp;jre(o,e.host_blacklist)))}L8.exports=hk.default;L8.exports.default=hk.default});var Nne=Qt((VYe,Mne)=&gt;{"use strict";function uAe(r){return r&gt;=55296&amp;&amp;r&lt;=56319}function dAe(r){return r&gt;=56320&amp;&amp;r&lt;=57343}Mne.exports=function(e,t,n){if(typeof t!="string")throw new Error("Input must be string");for(var o=t.length,i=0,s,a,l=0;l&lt;o;l+=1){if(s=t.charCodeAt(l),a=t[l],uAe(s)&amp;&amp;dAe(t.charCodeAt(l+1))&amp;&amp;(l+=1,a+=t[l]),i+=e(a),i===n)return t.slice(0,l+1);if(i&gt;n)return t.slice(0,l-a.length+1)}return t}});var Rne=Qt((jYe,Bne)=&gt;{"use strict";function cAe(r){return r&gt;=55296&amp;&amp;r&lt;=56319}function pAe(r){return r&gt;=56320&amp;&amp;r&lt;=57343}Bne.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var t=e.length,n=0,o=null,i=null,s=0;s&lt;t;s++)o=e.charCodeAt(s),pAe(o)?i!=null&amp;&amp;cAe(i)?n+=1:n+=3:o&lt;=127?n+=1:o&gt;=128&amp;&amp;o&lt;=2047?n+=2:o&gt;=2048&amp;&amp;o&lt;=65535&amp;&amp;(n+=3),i=o;return n}});var One=Qt((KYe,Lne)=&gt;{"use strict";var hAe=Nne(),fAe=Rne();Lne.exports=hAe.bind(null,fAe)});var n6=Qt((qYe,zne)=&gt;{"use strict";var mAe=One(),gAe=/[\/\?&lt;&gt;\\:\*\|"]/g,vAe=/[\x00-\x1f\x80-\x9f]/g,bAe=/^\.+$/,yAe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,CAe=/[\. ]+$/;function Une(r,e){if(typeof r!="string")throw new Error("Input must be string");var t=r.replace(gAe,e).replace(vAe,e).replace(bAe,e).replace(yAe,e).replace(CAe,e);return mAe(t,255)}zne.exports=function(r,e){var t=e&amp;&amp;e.replacement||"",n=Une(r,t);return t===""?n:Une(n,"")}});var ioe=Qt(g6=&gt;{"use strict";g6.__esModule=!0;g6.default=new Uint8Array([0,14,8,0,0,0,0,0,0,2,26,160,229,85,123,52,155,89,191,62,223,76,47,51,83,151,94,166,85,37,50,180,40,90,169,170,106,16,249,74,141,26,138,150,22,173,72,85,21,37,65,67,93,34,73,59,84,181,110,167,40,53,69,234,78,221,239,151,144,124,69,27,21,196,61,42,33,82,247,75,80,18,137,92,63,109,231,172,179,230,59,231,172,175,255,159,223,218,235,253,173,189,222,223,222,239,243,252,158,103,239,151,61,14,233,27,235,4,144,3,181,176,77,104,63,60,32,226,147,58,99,171,10,168,110,247,49,59,239,75,220,214,144,85,255,18,249,119,24,246,87,182,99,224,81,146,162,97,74,74,208,150,54,85,123,132,109,85,105,182,95,103,82,218,29,177,107,71,12,243,46,60,207,162,45,84,28,57,229,87,249,86,110,24,8,32,155,203,6,159,233,187,176,7,17,212,103,33,143,145,57,213,241,131,135,205,164,199,83,197,89,231,155,79,14,142,140,222,140,5,108,6,172,42,207,201,29,116,100,101,71,27,29,241,206,121,116,214,104,62,231,177,233,174,195,183,162,244,52,214,244,222,202,160,78,84,118,252,228,251,121,59,116,99,69,167,165,69,241,46,202,121,72,192,13,115,128,236,153,126,51,37,64,80,191,57,240,123,25,189,182,195,7,248,47,110,69,131,15,57,223,122,100,112,118,244,214,99,8,131,54,157,243,187,182,201,144,189,229,247,151,106,251,126,221,13,227,244,145,39,185,14,233,143,25,9,167,174,81,14,32,49,54,122,237,202,123,78,12,111,148,208,236,62,3,129,117,152,182,97,54,166,229,14,230,223,237,52,151,229,198,236,250,195,123,166,40,62,97,224,43,236,139,138,30,223,1,29,122,100,80,158,15,213,175,57,91,126,129,243,86,252,164,249,252,206,171,111,255,74,17,27,126,55,89,90,119,148,103,121,88,243,197,113,236,46,135,238,83,228,239,172,75,43,223,237,186,177,92,249,88,152,122,47,251,47,160,242,183,169,234,69,31,214,242,176,57,99,90,208,245,23,178,171,199,53,181,139,218,254,123,243,75,197,95,218,114,219,59,206,234,55,211,130,125,250,221,207,119,166,58,187,199,247,16,10,177,53,24,47,228,54,99,104,141,238,159,43,228,188,115,242,107,251,247,153,101,88,56,45,252,168,26,181,215,236,135,103,102,192,200,253,71,110,69,125,218,247,103,163,186,246,151,28,253,83,0,157,8,149,95,119,94,13,45,202,78,216,38,157,29,47,215,60,159,93,161,120,51,230,242,239,255,83,129,85,45,224,95,64,253,159,162,226,52,128,223,166,41,78,245,27,11,129,157,150,255,2,50,241,111,209,135,221,227,126,140,248,170,100,85,219,17,37,191,170,118,149,21,208,116,238,191,10,255,31,230,113,167,222,237,48,45,120,225,158,240,165,105,178,245,163,238,242,188,138,111,45,244,255,198,194,134,223,76,191,177,59,234,223,72,154,244,44,241,167,215,107,246,255,222,237,137,255,59,68,9,95,28,65,56,153,156,120,255,195,4,86,181,171,91,250,162,231,103,253,238,170,115,253,251,117,74,13,190,118,11,226,153,80,244,234,39,121,131,161,254,191,31,56,89,187,202,94,197,17,49,216,245,213,221,228,173,167,254,161,28,231,119,78,17,237,83,76,151,47,9,250,117,118,148,194,223,126,37,210,252,154,20,190,166,182,211,68,108,88,243,59,230,85,218,98,228,210,167,55,6,188,73,225,223,96,193,227,38,141,26,43,197,190,239,137,205,43,74,174,131,227,12,192,200,85,154,179,84,234,60,77,44,44,143,23,44,10,242,11,203,79,10,22,141,220,2,196,101,37,166,180,29,248,75,38,92,197,118,39,252,78,19,131,66,222,48,131,225,128,242,131,247,60,135,24,204,113,135,25,195,14,40,123,120,143,58,196,64,147,51,204,232,117,64,157,129,247,212,153,24,120,173,15,51,200,14,168,195,240,30,139,237,53,107,195,140,127,56,144,67,225,128,18,72,112,55,247,42,80,86,0,87,48,61,123,30,39,234,56,45,178,35,47,93,254,65,181,124,68,83,136,82,166,27,241,222,255,62,245,171,188,120,71,164,16,74,100,174,73,222,255,48,117,51,225,192,62,229,200,207,122,90,196,169,95,123,198,131,49,241,150,1,126,140,119,163,238,184,7,74,28,85,71,251,225,29,228,177,35,139,222,25,231,55,162,36,140,91,153,103,141,238,186,245,253,151,26,6,94,127,158,41,157,30,193,224,32,127,236,179,34,212,93,158,31,13,14,58,30,112,91,250,20,42,27,204,141,136,164,107,92,191,219,212,131,216,13,75,46,221,209,74,181,19,28,142,169,81,188,227,93,227,16,111,58,231,241,217,197,7,186,79,41,152,109,67,236,252,142,66,101,38,150,232,172,84,84,189,57,100,188,124,242,30,240,184,130,182,60,9,42,113,2,246,26,210,246,226,166,33,34,55,89,174,126,189,213,212,27,215,109,201,250,251,131,250,9,191,108,27,205,230,84,243,127,6,234,97,47,158,213,27,221,37,85,253,240,89,232,127,236,47,233,68,151,55,145,172,124,182,93,183,187,81,101,245,171,155,32,57,15,53,174,255,182,109,167,163,225,243,248,155,147,31,252,105,40,197,240,237,79,127,190,40,254,221,163,210,103,219,166,154,235,16,33,9,254,75,245,22,85,126,69,138,9,200,200,213,230,27,155,106,101,189,49,42,144,60,74,11,141,54,108,108,215,9,134,134,158,224,11,29,166,193,79,87,69,46,227,146,7,180,104,172,227,196,133,150,161,212,216,217,34,4,127,80,81,159,43,122,117,18,86,39,122,243,140,4,50,212,69,218,72,142,178,62,169,153,56,177,247,198,109,17,98,94,225,38,116,88,226,0,224,229,64,34,111,33,160,117,173,110,181,46,56,55,203,135,146,224,176,28,74,0,241,197,148,44,208,54,26,215,156,0,211,125,153,250,81,148,126,154,50,58,177,104,222,104,53,177,20,45,55,247,199,28,44,119,78,179,60,121,58,229,116,198,216,138,192,203,93,181,3,161,115,11,122,52,170,209,245,13,184,237,102,185,125,32,17,175,47,131,39,160,146,168,170,169,176,183,91,68,184,112,47,74,154,223,12,185,47,225,20,238,215,122,45,223,242,180,175,34,55,175,120,195,59,147,24,212,139,19,171,151,168,9,178,23,184,37,78,207,132,225,233,126,180,88,190,238,242,160,6,74,107,112,110,202,77,137,248,174,86,250,115,83,207,89,225,36,56,81,81,240,201,46,37,23,198,60,87,8,151,158,104,231,191,175,177,229,4,255,238,81,23,63,229,231,218,100,67,241,175,158,80,143,127,107,125,50,228,186,5,6,200,202,240,163,177,192,130,87,196,140,58,226,122,17,117,141,123,112,38,67,232,137,137,24,67,150,168,93,32,59,169,176,129,24,170,185,135,11,110,217,89,41,35,220,85,14,138,127,215,26,194,231,103,162,34,240,168,61,108,120,148,185,120,210,57,189,186,155,242,113,83,223,165,161,253,254,141,131,227,18,151,165,227,99,19,97,207,65,20,190,221,17,90,97,55,56,79,28,59,14,250,185,95,162,65,71,12,236,246,107,232,7,143,65,43,166,254,94,11,25,84,150,34,34,116,229,73,118,126,235,97,83,215,201,164,21,87,15,40,34,108,160,94,90,133,189,125,90,23,153,45,70,44,75,7,107,173,83,55,105,13,151,19,164,179,83,108,71,13,46,162,90,74,29,147,144,5,232,95,22,80,217,166,186,200,98,241,165,105,48,252,34,33,241,34,65,106,55,8,10,78,52,52,99,174,16,226,86,121,26,22,198,143,230,184,200,38,73,172,55,165,118,234,88,185,44,211,55,39,17,146,200,168,40,154,73,211,203,42,225,114,124,47,245,7,42,106,174,110,180,8,120,225,109,244,73,106,60,67,69,199,41,29,32,148,241,120,125,107,45,212,85,2,158,77,176,160,90,183,139,47,95,1,188,220,140,159,31,189,40,224,41,83,159,159,94,17,14,172,144,184,136,26,24,150,110,179,4,242,193,208,133,73,175,61,73,169,12,127,167,222,251,210,154,64,198,16,148,172,98,36,23,51,184,244,161,163,140,38,6,55,64,249,168,58,65,67,171,216,103,105,113,180,165,231,80,50,234,72,97,6,222,84,93,218,231,197,206,217,24,204,66,191,63,122,3,138,11,161,204,97,219,234,113,251,92,228,200,182,156,8,106,241,156,252,211,69,40,43,44,170,82,180,90,71,230,154,74,90,110,207,128,194,153,183,8,50,180,162,206,141,177,130,57,2,211,155,226,142,163,10,154,214,199,110,183,218,218,143,80,153,22,70,67,210,54,218,40,210,233,37,70,171,72,126,80,146,124,117,98,35,177,116,14,75,233,222,108,124,143,238,158,105,18,23,174,72,115,240,47,181,123,125,240,249,235,119,9,121,190,10,105,67,119,88,205,97,112,146,118,108,203,172,97,218,89,102,47,26,94,128,95,26,200,188,39,138,73,229,93,17,226,23,136,115,206,184,1,242,52,56,193,210,42,113,161,194,16,12,114,39,0,158,26,69,207,5,150,18,174,177,154,226,243,48,102,243,77,245,162,180,23,130,65,56,175,102,67,200,60,18,49,27,33,5,112,189,244,182,15,193,174,9,139,29,171,10,146,89,180,43,125,103,83,69,66,76,170,106,103,88,246,177,225,158,196,215,126,200,233,186,199,110,248,233,62,87,205,102,145,117,119,179,207,236,112,127,48,241,220,29,82,147,50,18,206,225,253,194,101,198,156,113,145,14,137,45,131,164,168,144,7,146,151,12,159,142,178,151,51,226,164,209,9,28,96,172,161,16,34,5,36,40,180,202,43,11,36,119,29,131,90,141,219,131,115,196,160,30,97,218,112,54,226,137,112,124,164,145,249,4,122,76,11,196,14,47,244,115,56,84,79,159,81,102,99,181,48,103,138,25,225,31,184,228,143,89,242,254,92,169,161,170,150,102,57,84,125,152,149,77,12,242,142,75,143,75,171,229,38,215,70,44,7,38,243,12,203,94,154,83,194,56,145,45,19,204,218,94,27,26,168,75,61,110,120,18,36,104,101,57,52,204,148,37,229,203,212,47,229,196,77,220,245,75,43,188,232,50,155,110,181,254,226,134,235,107,67,245,227,237,90,158,9,213,48,149,228,211,42,73,78,35,197,158,167,216,123,124,38,52,145,91,67,180,133,138,158,230,214,2,246,205,102,219,17,70,163,152,151,205,54,189,230,207,18,70,81,73,151,58,193,115,159,62,218,79,180,222,71,35,173,196,80,87,236,203,181,63,76,186,252,54,66,51,105,141,239,199,128,54,243,30,250,229,118,76,205,22,83,164,201,60,213,130,12,187,2,121,251,252,232,10,230,99,215,1,167,104,115,155,197,174,107,164,166,99,225,104,83,235,189,38,105,28,52,227,13,30,221,198,86,239,134,116,105,151,182,159,78,97,141,150,177,155,171,171,122,124,252,17,254,78,233,139,181,39,102,170,96,9,106,176,37,236,229,144,121,163,82,73,230,93,241,145,53,107,242,178,80,211,211,75,176,26,145,68,52,246,32,136,206,62,103,9,107,172,80,213,30,114,24,255,99,2,200,246,223,22,3,77,236,221,202,161,188,97,102,123,188,144,72,88,174,122,43,232,131,129,193,226,154,36,14,76,134,172,53,43,154,213,243,129,198,194,140,48,66,157,215,152,241,78,95,183,11,43,198,9,31,148,201,28,46,72,141,151,187,4,72,62,131,77,114,83,226,133,242,97,106,173,166,42,67,98,143,6,11,99,167,222,170,136,100,182,233,38,35,114,131,188,234,77,236,139,66,168,113,225,54,226,165,196,199,193,0,67,185,46,53,182,68,168,122,148,78,71,119,87,109,0,234,41,105,207,217,224,87,108,54,200,204,133,124,255,186,15,9,26,102,213,37,48,62,84,224,73,93,218,216,200,151,8,159,159,142,17,234,10,242,69,132,88,95,176,116,111,25,181,145,202,74,171,150,14,208,213,202,17,79,145,21,106,130,226,133,144,185,10,11,62,58,133,197,53,73,70,61,160,157,146,147,231,102,171,73,32,150,169,56,146,162,147,212,37,125,36,49,11,62,50,181,90,197,134,144,69,197,243,184,61,63,223,30,229,247,244,152,139,169,155,252,58,189,205,228,9,234,180,225,126,91,128,148,37,112,193,81,142,81,86,153,41,62,146,203,23,8,5,98,145,247,128,148,203,179,165,75,194,73,213,226,27,231,92,232,170,200,136,188,113,133,177,21,184,167,251,189,110,202,152,52,8,247,150,217,123,113,253,152,221,255,239,177,122,125,157,152,199,241,125,200,41,101,150,63,32,94,146,214,46,151,121,250,255,116,136,230,133,107,219,29,236,251,241,210,83,90,214,141,126,110,72,153,235,220,2,136,45,177,245,66,27,235,246,232,4,43,141,48,31,199,97,29,17,11,175,133,15,211,158,230,170,224,66,94,137,109,123,100,105,137,244,194,71,77,133,19,139,171,40,111,233,194,175,200,200,245,22,251,54,163,115,142,42,131,24,78,230,198,16,210,223,99,145,122,31,215,124,193,125,92,156,131,108,191,63,176,100,84,46,223,56,86,86,92,9,191,0,68,167,175,67,170,239,217,158,64,95,222,114,31,111,30,19,43,188,206,84,145,249,176,98,87,248,131,48,146,125,111,84,25,247,240,102,233,78,15,91,38,115,28,76,230,249,23,160,162,230,3,167,244,87,50,233,12,220,187,225,75,234,102,9,39,231,246,101,146,70,117,173,85,170,187,153,208,148,87,34,218,124,95,70,147,140,135,9,131,55,90,94,88,90,238,174,228,87,135,155,172,203,46,157,251,17,201,22,189,169,139,171,200,17,192,210,23,53,41,91,10,116,79,168,35,73,99,46,100,128,200,204,222,242,85,166,115,159,229,67,95,44,151,36,213,11,251,192,13,55,62,72,211,57,251,232,51,181,48,75,207,137,180,105,85,10,113,248,14,16,76,110,41,90,38,39,181,208,13,155,179,136,192,227,27,162,79,246,216,17,236,149,217,77,234,61,68,103,173,91,245,230,247,244,224,60,154,83,128,112,2,60,225,175,155,45,166,14,111,95,151,79,86,120,201,189,177,5,0,92,253,210,187,107,128,165,224,176,37,84,249,137,96,151,14,9,156,185,59,5,129,79,77,155,175,207,186,194,115,73,176,208,32,199,229,232,131,88,252,224,4,189,148,77,231,128,82,73,117,2,148,206,117,138,110,150,159,213,97,85,169,138,38,108,206,104,82,68,174,2,92,179,71,173,21,158,52,44,129,119,16,249,35,21,56,198,152,8,108,119,94,248,54,115,176,37,111,19,116,157,67,141,175,132,233,102,186,21,84,182,216,118,163,212,48,192,227,190,4,122,202,12,63,153,219,178,144,15,36,181,137,242,182,28,63,80,240,10,201,97,158,127,160,76,89,190,177,47,112,99,229,58,74,136,0,107,219,98,194,154,49,185,161,94,170,109,142,43,235,168,205,30,146,126,34,194,56,252,247,232,184,131,151,53,235,233,69,157,236,26,88,234,105,107,52,3,100,76,231,166,123,145,32,158,112,36,65,20,198,163,212,250,137,140,91,80,167,198,37,194,61,7,235,155,216,247,50,80,232,41,193,118,206,127,118,199,21,107,114,128,62,197,97,180,97,111,235,228,206,47,59,116,29,9,121,121,127,188,26,65,83,63,119,86,218,153,139,176,11,236,45,85,163,4,197,250,209,166,202,234,240,236,48,92,146,215,62,80,198,52,19,93,9,195,133,17,162,55,252,53,214,141,164,222,132,214,174,62,59,63,184,97,227,237,48,188,188,20,244,79])});var goe=Qt(kk=&gt;{"use strict";kk.__esModule=!0;var y6=0,uoe=-3,Ix=function(){function r(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}return r}();kk.Tree=Ix;var doe=function(){function r(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Ix,this.dtree=new Ix}return r}();kk.Data=doe;var coe=new Ix,poe=new Ix,C6=new Uint8Array(30),S6=new Uint16Array(30),hoe=new Uint8Array(30),foe=new Uint16Array(30),UAe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),soe=new Ix,qp=new Uint8Array(288+32);function moe(r,e,t,n){var o,i;for(o=0;o&lt;t;++o)r[o]=0;for(o=0;o&lt;30-t;++o)r[o+t]=o/t|0;for(i=n,o=0;o&lt;30;++o)e[o]=i,i+=1&lt;&lt;r[o]}function zAe(r,e){var t;for(t=0;t&lt;7;++t)r.table[t]=0;for(r.table[7]=24,r.table[8]=152,r.table[9]=112,t=0;t&lt;24;++t)r.trans[t]=256+t;for(t=0;t&lt;144;++t)r.trans[24+t]=t;for(t=0;t&lt;8;++t)r.trans[24+144+t]=280+t;for(t=0;t&lt;112;++t)r.trans[24+144+8+t]=144+t;for(t=0;t&lt;5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t&lt;32;++t)e.trans[t]=t}var aoe=new Uint16Array(16);function v6(r,e,t,n){var o,i;for(o=0;o&lt;16;++o)r.table[o]=0;for(o=0;o&lt;n;++o)r.table[e[t+o]]++;for(r.table[0]=0,i=0,o=0;o&lt;16;++o)aoe[o]=i,i+=r.table[o];for(o=0;o&lt;n;++o)e[t+o]&amp;&amp;(r.trans[aoe[e[t+o]]++]=o)}function HAe(r){r.bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7);var e=r.tag&amp;1;return r.tag&gt;&gt;&gt;=1,e}function Yp(r,e,t){if(!e)return t;for(;r.bitcount&lt;24;)r.tag|=r.source[r.sourceIndex++]&lt;&lt;r.bitcount,r.bitcount+=8;var n=r.tag&amp;65535&gt;&gt;&gt;16-e;return r.tag&gt;&gt;&gt;=e,r.bitcount-=e,n+t}function b6(r,e){for(;r.bitcount&lt;24;)r.tag|=r.source[r.sourceIndex++]&lt;&lt;r.bitcount,r.bitcount+=8;var t=0,n=0,o=0,i=r.tag;do n=2*n+(i&amp;1),i&gt;&gt;&gt;=1,++o,t+=e.table[o],n-=e.table[o];while(n&gt;=0);return r.tag=i,r.bitcount-=o,e.trans[t+n]}function GAe(r,e,t){var n,o,i,s,a,l;for(n=Yp(r,5,257),o=Yp(r,5,1),i=Yp(r,4,4),s=0;s&lt;19;++s)qp[s]=0;for(s=0;s&lt;i;++s){var u=Yp(r,3,0);qp[UAe[s]]=u}for(v6(soe,qp,0,19),a=0;a&lt;n+o;){var d=b6(r,soe);switch(d){case 16:var c=qp[a-1];for(l=Yp(r,2,3);l;--l)qp[a++]=c;break;case 17:for(l=Yp(r,3,3);l;--l)qp[a++]=0;break;case 18:for(l=Yp(r,7,11);l;--l)qp[a++]=0;break;default:qp[a++]=d;break}}v6(e,qp,0,n),v6(t,qp,n,o)}function loe(r,e,t){for(;;){var n=b6(r,e);if(n===256)return y6;if(n&lt;256)r.dest[r.destLen++]=n;else{var o=void 0,i=void 0,s=void 0,a=void 0;for(n-=257,o=Yp(r,C6[n],S6[n]),i=b6(r,t),s=r.destLen-Yp(r,hoe[i],foe[i]),a=s;a&lt;s+o;++a)r.dest[r.destLen++]=r.dest[a]}}}function WAe(r){for(var e,t,n;r.bitcount&gt;8;)r.sourceIndex--,r.bitcount-=8;if(e=r.source[r.sourceIndex+1],e=256*e+r.source[r.sourceIndex],t=r.source[r.sourceIndex+3],t=256*t+r.source[r.sourceIndex+2],e!==(~t&amp;65535))return uoe;for(r.sourceIndex+=4,n=e;n;--n)r.dest[r.destLen++]=r.source[r.sourceIndex++];return r.bitcount=0,y6}function $Ae(r,e){var t=new doe(r,e),n,o,i;do{switch(n=HAe(t),o=Yp(t,2,0),o){case 0:i=WAe(t);break;case 1:i=loe(t,coe,poe);break;case 2:GAe(t,t.ltree,t.dtree),i=loe(t,t.ltree,t.dtree);break;default:i=uoe}if(i!==y6)throw new Error("Data error")}while(!n);return t.destLen&lt;t.dest.length?typeof t.dest.slice=="function"?t.dest.slice(0,t.destLen):t.dest.subarray(0,t.destLen):t.dest}kk.default=$Ae;zAe(coe,poe);moe(C6,S6,4,3);moe(hoe,foe,2,1);C6[28]=0;S6[28]=258});var yoe=Qt(T6=&gt;{"use strict";T6.__esModule=!0;var voe=goe(),w6=6+5,Ly=5,VAe=w6-Ly,jAe=65536&gt;&gt;w6,KAe=1&lt;&lt;VAe,qAe=KAe-1,DM=2,YAe=1&lt;&lt;Ly,x6=YAe-1,boe=65536&gt;&gt;Ly,XAe=1024&gt;&gt;Ly,QAe=boe+XAe,JAe=QAe,ZAe=32,eIe=JAe+ZAe,tIe=1&lt;&lt;DM,rIe=function(){function r(e){var t=new DataView(e.buffer);this.highStart=t.getUint32(0),this.errorValue=t.getUint32(4);var n=t.getUint32(8);e=e.subarray(12),e=voe.default(e,new Uint8Array(n)),e=voe.default(e,new Uint8Array(n)),this.data=new Uint32Array(e.buffer)}return r.prototype.get=function(e){var t;return e&lt;0||e&gt;1114111?this.errorValue:e&lt;55296||e&gt;56319&amp;&amp;e&lt;=65535?(t=(this.data[e&gt;&gt;Ly]&lt;&lt;DM)+(e&amp;x6),this.data[t]):e&lt;=65535?(t=(this.data[boe+(e-55296&gt;&gt;Ly)]&lt;&lt;DM)+(e&amp;x6),this.data[t]):e&lt;this.highStart?(t=this.data[eIe-jAe+(e&gt;&gt;w6)],t=this.data[t+(e&gt;&gt;Ly&amp;qAe)],t=(t&lt;&lt;DM)+(e&amp;x6),this.data[t]):this.data[this.data.length-tIe]},r}();T6.default=rIe});var Coe=Qt(Qr=&gt;{"use strict";Qr.__esModule=!0;Qr.OP=0;Qr.CL=1;Qr.CP=2;Qr.QU=3;Qr.GL=4;Qr.NS=5;Qr.EX=6;Qr.SY=7;Qr.IS=8;Qr.PR=9;Qr.PO=10;Qr.NU=11;Qr.AL=12;Qr.HL=13;Qr.ID=14;Qr.IN=15;Qr.HY=16;Qr.BA=17;Qr.BB=18;Qr.B2=19;Qr.ZW=20;Qr.CM=21;Qr.WJ=22;Qr.H2=23;Qr.H3=24;Qr.JL=25;Qr.JV=26;Qr.JT=27;Qr.RI=28;Qr.AI=29;Qr.BK=30;Qr.CB=31;Qr.CJ=32;Qr.CR=33;Qr.LF=34;Qr.NL=35;Qr.SA=36;Qr.SG=37;Qr.SP=38;Qr.XX=39});var Soe=Qt(_=&gt;{"use strict";_.__esModule=!0;_.DI_BRK=0;_.IN_BRK=1;_.CI_BRK=2;_.CP_BRK=3;_.PR_BRK=4;_.pairTable=[[_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.CP_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.PR_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK],[_.IN_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.DI_BRK],[_.DI_BRK,_.PR_BRK,_.PR_BRK,_.IN_BRK,_.IN_BRK,_.IN_BRK,_.PR_BRK,_.PR_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK,_.IN_BRK,_.DI_BRK,_.DI_BRK,_.PR_BRK,_.CI_BRK,_.PR_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.DI_BRK,_.IN_BRK]]});var Toe=Qt(kM=&gt;{"use strict";kM.__esModule=!0;var nIe=ioe(),oIe=yoe(),Wn=Coe(),Pk=Soe(),iIe=new oIe.default(nIe.default);function xoe(r){switch(r){case Wn.AI:return Wn.AL;case Wn.SA:case Wn.SG:case Wn.XX:return Wn.AL;case Wn.CJ:return Wn.NS;default:return r}}function woe(r){switch(r){case Wn.LF:case Wn.NL:return Wn.BK;case Wn.CB:return Wn.BA;case Wn.SP:return Wn.WJ;default:return r}}var Ak=function(){function r(e,t,n){n===void 0&amp;&amp;(n=!1),this.position=e,this.spacePos=t,this.required=n}return r}();kM.Break=Ak;var sIe=function(){function r(e){this.node=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null}return r.prototype.nextCodePoint=function(){var e=this.node.charCodeAt(this.pos++),t=this.node.charCodeAt(this.pos);return 55296&lt;=e&amp;&amp;e&lt;=56319&amp;&amp;56320&lt;=t&amp;&amp;t&lt;=57343?(this.pos++,(e-55296)*1024+(t-56320)+65536):e},r.prototype.nextCharClass=function(e){return e===void 0&amp;&amp;(e=null),e==null&amp;&amp;(e=!1),xoe(iIe.get(this.nextCodePoint()))},r.prototype.nextBreak=function(){var e=null,t=null,n=!1;for(this.curClass===null&amp;&amp;(this.curClass=woe(this.nextCharClass()));this.pos&lt;this.node.length;){if(this.lastPos=this.pos,t=this.nextClass,this.nextClass=this.nextCharClass(),this.curClass===Wn.BK||this.curClass===Wn.CR&amp;&amp;this.nextClass!==Wn.LF)return this.curClass=woe(xoe(this.nextClass)),new Ak(this.lastPos,this.lastPos,!0);var o=null;switch(this.nextClass){case Wn.SP:o=this.curClass;break;case Wn.BK:case Wn.LF:case Wn.NL:o=Wn.BK;break;case Wn.CR:o=Wn.CR;break;case Wn.CB:o=Wn.BA;break;default:o=null;break}if(this.nextClass===Wn.SP&amp;&amp;t!==Wn.SP&amp;&amp;(e=this.lastPos),o!==null){if(this.curClass=o,this.nextClass===Wn.CB)return new Ak(this.lastPos,e!==null?e:this.lastPos);continue}switch(Pk.pairTable[this.curClass][this.nextClass]){case Pk.DI_BRK:n=!0;break;case Pk.IN_BRK:n=t===Wn.SP;break;case Pk.CI_BRK:if(n=t===Wn.SP,!n)continue;break;case Pk.CP_BRK:if(t!==Wn.SP)continue;break;default:break}if(!n&amp;&amp;this.nextClass!==Wn.SP&amp;&amp;(e=null),this.curClass=this.nextClass,n)return new Ak(this.lastPos,e!==null?e:this.lastPos)}if(this.pos&gt;=this.node.length)return this.lastPos&lt;this.node.length?(this.lastPos=this.node.length,new Ak(this.node.length,e!==null?e:this.node.length)):null},r}();kM.LineBreaker=sIe});var koe=Qt(PM=&gt;{"use strict";PM.__esModule=!0;var Doe=Toe();PM.Break=Doe.Break;PM.LineBreaker=Doe.LineBreaker});var C7=oe(vm()),Zhe=oe(X7()),oA=oe(Sh()),ror=oe(Q7()),nor=oe(J7()),oor=oe(Z7()),efe=oe(e$()),tfe=oe(t$()),rfe=oe(r$()),lL=oe(ve()),nfe=oe(Rj());var tE,uve=new Uint8Array(16);function l4(){if(!tE&amp;&amp;(tE=typeof crypto!="undefined"&amp;&amp;crypto.getRandomValues&amp;&amp;crypto.getRandomValues.bind(crypto),!tE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tE(uve)}var ia=[];for(let r=0;r&lt;256;++r)ia.push((r+256).toString(16).slice(1));function Lj(r,e=0){return(ia[r[e+0]]+ia[r[e+1]]+ia[r[e+2]]+ia[r[e+3]]+"-"+ia[r[e+4]]+ia[r[e+5]]+"-"+ia[r[e+6]]+ia[r[e+7]]+"-"+ia[r[e+8]]+ia[r[e+9]]+"-"+ia[r[e+10]]+ia[r[e+11]]+ia[r[e+12]]+ia[r[e+13]]+ia[r[e+14]]+ia[r[e+15]]).toLowerCase()}var dve=typeof crypto!="undefined"&amp;&amp;crypto.randomUUID&amp;&amp;crypto.randomUUID.bind(crypto),u4={randomUUID:dve};function cve(r,e,t){if(u4.randomUUID&amp;&amp;!e&amp;&amp;!r)return u4.randomUUID();r=r||{};let n=r.random||(r.rng||l4)();if(n[6]=n[6]&amp;15|64,n[8]=n[8]&amp;63|128,e){t=t||0;for(let o=0;o&lt;16;++o)e[t+o]=n[o];return e}return Lj(n)}var Sr=cve;var Lhe=oe(ve()),am=oe(ve());function Io({url:r,type:e,title:t=""}){return{url:r,title:t,type:e}}function it(r,e,t){return Math.min(Math.max(r,e),t)}function d4(r,e){let t=Math.trunc(r/e);return r-e*t}function Oj(r,e){try{let t=parseInt(r,e);if(Number.isInteger(t))return t}catch(t){}}function ru(r,e){return Math.abs(r-e)&lt;Number.EPSILON}function Fh(r,e){return r&gt;e&amp;&amp;!ru(r,e)}function Zd(r,e){return Math.abs(r-e)&lt;1e-10}function Uj(r,e){return r&gt;e&amp;&amp;!Zd(r,e)}function l1(r,e){return r&gt;e||Zd(r,e)}function xl(r,e,t){let n=r/e;return Number.isFinite(n*r*e)?n:t}function Cb(r){return isFinite(r)&amp;&amp;r&gt;0}var Wu=r=&gt;typeof r=="string"&amp;&amp;r.length&gt;0;function rE(...r){return function(t){return r.indexOf(t)&gt;=0}}function wl(r){return typeof r=="string"}function d0(r){return typeof r=="boolean"}function Or(r){return typeof r=="number"}function Li(r){return typeof r=="number"&amp;&amp;!Number.isNaN(r)&amp;&amp;Number.isFinite(r)}function Xc(r){return e=&gt;{if(!Array.isArray(e))return!1;if(typeof r=="function"){for(let t of e)if(!r(t))return!1}else for(let t of e)if(!Pa(t,r))return!1;return!0}}var Ho=class extends Error{constructor(e){super(e)}};var c4=(...r)=&gt;{let e=[];if(r==null)throw new Ho(`argument itself is ${r}`);for(let t=0;t&lt;r.length;t++){let n=r[t];n==null&amp;&amp;e.push(t)}if(e.length&gt;0)throw new Ho(`arguments(${r.length}) contain null or undefined: [${e.toString()}]`);return e};function pve(...r){return function(...e){for(let t of r)if(!t(...e))return!1;return!0}}var Qc=(r,e,t=n=&gt;new Ho(n))=&gt;{let n=[];if(!Pa(r,e,n)){let o=`invalid type definition:
`;for(let i of n)o+=`	${i}
`;throw t(o)}},Pa=(r,e,t=[])=&gt;r==null?!1:(zj("$",r,e,t),t.length===0);function zj(r,e,t,n){c4(e);let o=n||[];for(let i in t){let s=t[i],a=`${r}.${i}`;if(!e.hasOwnProperty(i))o.push(`property missing: "${a}"`);else{let l,u;if(Array.isArray(s))l=pve(...s),u=s.map(d=&gt;d.name).join(" &amp;&amp; ");else if(typeof s=="function")l=s,u=s.name;else if(typeof s=="number"||typeof s=="string"||typeof s=="boolean")l=d=&gt;d===s,u=`${s}`;else if(s instanceof RegExp)l=d=&gt;typeof d=="string"&amp;&amp;s.test(d),u="isStringAndMatchToRegExp";else{zj(a,e[i],t[i],n);continue}l(e[i])||o.push(`property mismatch: "${a}" != ${u}, value: ${JSON.stringify(e[i])}`)}}}function Gr(r,e=""){if(typeof r!="number")throw new Ho(e||`is not number: ${r}`);return r}function nE(r,e=""){if(typeof r!="string")throw new Ho(e||`is not string: ${r}`);return r}function Ee(r,e=""){if(!r)throw new Ho(e)}function Ja(r){return typeof r=="object"&amp;&amp;typeof(r==null?void 0:r.width)=="number"&amp;&amp;typeof(r==null?void 0:r.height)=="number"}function $e(r,e=0){if(r==null)return{width:0,height:0};if(Or(r)&amp;&amp;Or(e))return{width:r,height:e};if(Ja(r))return{width:r.width,height:r.height};throw new Error("invalid size input")}function Um(r){return Math.sqrt(r.width*r.height)}function Jc(r,e){return ru(r.width,e.width)&amp;&amp;ru(r.height,e.height)}function kr(r){return r.width*r.height}function Nt(r,e){let t=$e(r);return t.width*=e,t.height*=e,t}function p4(r,e){return{width:Math.max(r.width,e.width),height:Math.max(r.height,e.height)}}function Hj(r,e){return{width:Math.min(r.width,e.width),height:Math.min(r.height,e.height)}}function oE(r,e,t){return r.width=e,r.height=t,r}function Gj(r){let{width:e,height:t}=r;return{width:t,height:e}}function Mh(r){return r.width&gt;r.height?"landscape":"portrait"}function Nh(r=100){return Math.min(window.innerWidth,window.innerHeight)*r/100}function Wj(r){return window.innerWidth*r/100}function $j(r){return window.innerHeight*r/100}function u1(r){return Math.min(r.width,r.height)&lt;=480}function Tl(r=$e()){return oE(r,window.innerWidth,window.innerHeight)}var Rn=oe(ve()),gE=oe(ve());var Vj=oe(ve()),jj=oe(ve()),Gt=({className:r,role:e,disabled:t,disableAfterSubmit:n,onClick:o,children:i,...s})=&gt;{let[a,l]=(0,jj.useState)(!1),u=t||n&amp;&amp;a,d;return!u&amp;&amp;o&amp;&amp;(d=c=&gt;{o(c),n&amp;&amp;l(!0)}),Vj.default.createElement("div",{className:"internalButton "+(r||""),role:e||"button","aria-disabled":u,"data-disabled":u,onClick:d,...s},i)};var mE=oe(ve());var Yj=oe(vm());var hve=()=&gt;{},Kj=["log","error","warn","groupCollapsed","table","groupEnd"],zm=new Map;for(let r of Kj)zm.set(r,console[r].bind(console));var fe={setEnabled:qj,error:zm.get("error"),log:zm.get("log"),warn:zm.get("warn"),groupCollapsed:zm.get("groupCollapsed"),groupEnd:zm.get("groupEnd"),table:zm.get("table")};function qj(r){for(let e of Kj)fe[e]=r?zm.get(e):hve}qj(!("process"in globalThis));function Bh(r){return typeof r=="object"&amp;&amp;Or(r==null?void 0:r.x)&amp;&amp;Or(r==null?void 0:r.y)}function Rh(r){return Bh(r)&amp;&amp;Li(r.x)&amp;&amp;Li(r.y)}function De(r,e=0){let t,n;if(r==null)return{x:0,y:0};if(Bh(r))t=r.x,n=r.y;else if(Or(r)&amp;&amp;Or(e))t=r,n=e;else throw new Error("invalid point input");return(!Li(t)||!Li(n))&amp;&amp;(fe.error(`invalid point input: x=${t},y=${n}`),Yj.default.notify(new Error("invalid point input"),o=&gt;{o.addMetadata("arguments",{x:`${t}`,y:`${n}`})})),{x:t,y:n}}var h4=Math.PI/180,d1=180/Math.PI,f4={rad:1,deg:h4},fve={rad:1,deg:d1},Pr=class{constructor(e=0,t=0){typeof e=="number"?(this.x=e,this.y=t):(this.x=e.x,this.y=e.y)}clone(){return new Pr(this.x,this.y)}normalize(){let e=this.magnitude();return e===0?this:(this.x/=e,this.y/=e,this)}normalized(){return this.clone().normalize()}magnitude(){return Math.hypot(this.x,this.y)}sqrMagnitude(){return this.x*this.x+this.y*this.y}rotate(e,t){let n=e*f4[t],o=Math.cos(n),i=Math.sin(n);return[this.x,this.y]=[this.x*o-this.y*i,this.x*i+this.y*o],this}rotated(e,t){return this.clone().rotate(e,t)}scale(e){return this.x*=e,this.y*=e,this}scaled(e){return this.clone().scale(e)}add(e){return this.x+=e.x,this.y+=e.y,this}added(e){return this.clone().add(e)}sub(e){return this.x-=e.x,this.y-=e.y,this}subbed(e){return this.clone().sub(e)}angle(e){return Math.atan2(this.y,this.x)*fve[e]}point(){return De(this.x,this.y)}};function iE(r,e){return r.x*e.y-r.y*e.x}function m4(r,e){return r.x*e.x+r.y*e.y}function $u(r,e){return Math.hypot(r.x-e.x,r.y-e.y)}function Ts(r,e){let t=r.x-e.x,n=r.y-e.y;return t**2+n**2}function Jo(r,e){return new Pr(r.x-e.x,r.y-e.y)}function Bs(r,e){return De(r.x*e,r.y*e)}function ec(r,e){return r.x===e.x&amp;&amp;r.y===e.y}function mve(r,e,t){return r.x=e,r.y=t,r}function Xj(r,e){return mve(r,e.x,e.y)}var Sn=class{constructor(e=0,t=0,n=0,o=0){typeof e=="number"?(this.x=e,this.y=t,this.width=n,this.height=o):Bh(e)&amp;&amp;Ja(e)?(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):(this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY)}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get minX(){return this.x}get minY(){return this.y}get maxX(){return this.x+this.width}get maxY(){return this.y+this.height}get leftTop(){return{x:this.x,y:this.y}}get leftBottom(){return{x:this.x,y:this.y+this.height}}get rightTop(){return{x:this.x+this.width,y:this.y}}get rightBottom(){return{x:this.x+this.width,y:this.y+this.height}}insetBy({dx:e,dy:t}){let n=this.x+this.width/2,o=this.y+this.height/2,i=Math.min(this.x+e,n),s=Math.max(this.x+this.width-e,n),a=Math.min(this.y+t,o),l=Math.max(this.y+this.height-t,o);return new Sn(i,a,s-i,l-a)}};function qe(r=0,e=0,t=0,n=0){let o;if(typeof r=="number"?o=r:(o=r.x,e=r.y,t=r.width,n=r.height),t&lt;0||n&lt;0)throw new Error(`width and height must be &gt;= 0: ${t},${n}`);return{x:o,y:e,width:t,height:n}}function Qj(r,e,t,n=t){return{x:r-t,y:e-t,width:t*2,height:n*2}}function sE(r,e){let[t,n,o,i]=[r.x,r.y,r.x+r.width,r.y+r.height],s=e.cross(t,n),a=e.cross(o,n),l=e.cross(t,i),u=e.cross(o,i),d=Math.min(s.x,a.x,l.x,u.x),c=Math.min(s.y,a.y,l.y,u.y),p=Math.max(s.x,a.x,l.x,u.x),h=Math.max(s.y,a.y,l.y,u.y);return new Sn(d,c,p-d,h-c)}function Vu(r,e){return new Sn(r.x-e.left,r.y-e.top,r.width+e.left+e.right,r.height+e.top+e.bottom)}function Jj(r,e){if(!Oi(r,e))return;let t=Math.max(r.x,e.x),n=Math.min(r.x+r.width,e.x+e.width),o=Math.max(r.y,e.y),i=Math.min(r.y+r.height,e.y+e.height);return new Sn(t,o,n-t,i-o)}function Lh(r,e,t=e){let n=qe(r);return n.x*=e,n.y*=t,n.width*=e,n.height*=t,n}function tn(r){return De(r.x+r.width*.5,r.y+r.height*.5)}function nu(r,e){return r.x&lt;=e.x&amp;&amp;e.x+e.width&lt;=r.x+r.width&amp;&amp;r.y&lt;=e.y&amp;&amp;e.y+e.height&lt;=r.y+r.height}function Oi(r,e){let t=tn(r),n=tn(e);return Math.abs(t.x-n.x)&lt;=r.width/2+e.width/2&amp;&amp;Math.abs(t.y-n.y)&lt;=r.height/2+e.height/2}function Rs(r,e){let[t,n,o,i]=[r.x,r.y,r.x+r.width,r.y+r.height];return e.x&lt;t&amp;&amp;(t=e.x),o&lt;e.x+e.width&amp;&amp;(o=e.x+e.width),e.y&lt;n&amp;&amp;(n=e.y),i&lt;e.y+e.height&amp;&amp;(i=e.y+e.height),r.x=t,r.y=n,r.width=o-t,r.height=i-n,r}function Zj({rect:r,withNormalizedRect:e}){let t=r.x+r.width*e.x,n=r.y+r.height*e.y,o=r.width*e.width,i=r.height*e.height;return qe(t,n,o,i)}function eK({rect:r,inSize:e}){let t=r.x/e.width,n=r.y/e.height,o=r.width/e.width,i=r.height/e.height;return qe(t,n,o,i)}function Pn(r,{x:e,y:t}){return gve(r,e,t)}function gve(r,e,t){let n=r.x+r.width,o=r.y+r.height;return r.x&lt;=e&amp;&amp;e&lt;=n&amp;&amp;r.y&lt;=t&amp;&amp;t&lt;=o}function tK(r,e,t,n,o){return r.x=e,r.y=t,r.width=n,r.height=o,r}function sa(r){return Or(r.x)&amp;&amp;Or(r.y)?r:{...r,x:r.left,y:r.top}}var kt=$e(160,120),os=$e(1024,768),xi=$e(1440,1080),b3e=$e(1024,768),rK=$e(1024,768),g4=qe(0,0,1,1),aE=$e(16,16),v4=$e(5e3,5e3),lE=$e(24,12),nK=$e(120,90),b4=$e(32,32),wi=25,oK=wi-15,Aa=20,c1=20,ju=10,Sb=30,iK=10,y4=16,C4=20,S4=5,uE=5,p1=350,c0=10,dE=[{backgroundColor:"#ffccdcFF",subColor:"#ED7DA1FF",textColor:"#000000FF"},{backgroundColor:"#c73532ff",subColor:"#5F1E1CFF",textColor:"#FFFFFFFF"},{backgroundColor:"#fff7a8ff",subColor:"#EBDA64FF",textColor:"#000000FF"},{backgroundColor:"#f6c607ff",subColor:"#987927FF",textColor:"#000000FF"},{backgroundColor:"#caefd1ff",subColor:"#87D089FF",textColor:"#000000FF"},{backgroundColor:"#02855dff",subColor:"#123927FF",textColor:"#FFFFFFFF"},{backgroundColor:"#b3ddfcff",subColor:"#37B2F3FF",textColor:"#000000FF"},{backgroundColor:"#0a3b8fff",subColor:"#002663FF",textColor:"#FFFFFFFF"},{backgroundColor:"#FFFFFFFF",subColor:"#CED7E0FF",textColor:"#000000FF"},{backgroundColor:"#000000FF",subColor:"#2A2A2AFF",textColor:"#FFFFFFFF"}],h1={url:"#FF8c8c8c",title:"#FF1C3391",description:"#FF333333",descriptionBackground:"#FFF2F3F9"},ou=$e(640,480),p0=kr(ou),f1=$e(100,75),Ku=kr(f1),cE="android-app://tv.loilo.loilonote_web/",Zc="https://n.loilo.tv",sK="https://stg.n.loilo.tv",pE="https://dev.n.loilo.tv",hE="^[!-~]+$",fE=10*1e3,vve=16583094e5,aK=`${vve}-0`,aa="0.2.0";var lK={back:"\u623B\u308B",close:"\u9589\u3058\u308B",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",okay:"OK",reload:"\u518D\u8AAD\u307F\u8FBC\u307F\u3059\u308B",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3059\u308B",selfStudy:"\u81EA\u4E3B\u5B66\u7FD2",loiLoNews:"\u30ED\u30A4\u30ED\u304B\u3089\u306E\u304A\u77E5\u3089\u305B",lessonPlans:"\u6388\u696D\u6848",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",unexpectedErrorOccurred:"\u60F3\u5B9A\u3057\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",unknownError:"\u4E0D\u660E\u306A\u30A8\u30E9\u30FC",couldntDelete:"\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",closeThisScreen:"\u3053\u306E\u753B\u9762\u3092\u9589\u3058\u308B",useFormally:"\u4F7F\u7528\u3059\u308B",delete:"\u524A\u9664",move:"\u79FB\u52D5",copy:"\u30B3\u30D4\u30FC",duplicate:"\u8907\u88FD",rename:"\u540D\u524D\u3092\u5909\u66F4",teacher:"\u5148\u751F",student:"\u751F\u5F92",expand:"\u5927\u304D\u304F",shrink:"\u5C0F\u3055\u304F",release:"\u89E3\u9664",arrange:"\u6574\u5217",rotate:"\u56DE\u8EE2",failedToRotate:"\u30AB\u30FC\u30C9\u306E\u56DE\u8EE2\u306B\u5931\u6557\u3057\u307E\u3057\u305F",materialsStorage:"\u8CC7\u6599\u7BB1",submit:"\u63D0\u51FA",send:"\u9001\u308B",insertingPhoto:"\u5199\u771F\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertPhoto:"\u5199\u771F\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertPhoto:"\u5199\u771F\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertVideo:"\u30D3\u30C7\u30AA\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertFile:"\u30D5\u30A1\u30A4\u30EB\u304C\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\uFF01",couldntInsertFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",insertingMaterials:"\u8CC7\u6599\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u3044\u307E\u3059...",didInsertMaterials:"\u8CC7\u6599\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3057\u307E\u3057\u305F\uFF01",couldntInsertItemTitle:"%1$s\u3092\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",goBackToDesktop:"\u30CE\u30FC\u30C8\u306B\u623B\u308B",seeNextError:"\u6B21\u306E\u30A8\u30E9\u30FC\u3092\u898B\u308B",status403AccessDenied:"\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",status404ItemNotFound:"\u5B58\u5728\u3057\u306A\u3044\u3082\u3057\u304F\u306F\u524A\u9664\u3055\u308C\u3066\u3044\u307E\u3059",couldntGetCourses:"\u6388\u696D\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetCoursesAttributes:"\u6388\u696D\u306E\u60C5\u5831\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPreviousYearsCourses:"\u5E74\u5EA6\u4E00\u89A7\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetOtherTeachersCourses:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",willDeleteGroupFromSubject:"%1$s\u304B\u3089%2$s\u3092\u524A\u9664\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsMaterialsExist:"\u3053\u306E\u6388\u696D\u306E\u8CC7\u6599\u7BB1\u306B\u30D5\u30A1\u30A4\u30EB\u304C\u4FDD\u5B58\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsNotesExist:"\u3053\u306E\u6388\u696D\u3067\u4FDD\u5B58\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C\u5B58\u5728\u3059\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",courseAccessDenied:"\u6388\u696D\u306E\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",courseDoesntExist:"\u6388\u696D\u304C\u5B58\u5728\u3057\u307E\u305B\u3093",couldntDeleteCourse:"\u6388\u696D\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetNote:"\u30CE\u30FC\u30C8\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntUploadNotes:"\u30CE\u30FC\u30C8\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",savingNoteWithOtherName:"\u30CE\u30FC\u30C8\u3092\u5225\u540D\u3067\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",overwritingNote:"\u30CE\u30FC\u30C8\u3092\u4E0A\u66F8\u304D\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",couldntSaveNote:"\u30CE\u30FC\u30C8\u304C\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didBackupUnsavedChanges:"\u672A\u4FDD\u5B58\u306E\u5909\u66F4\u306E\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F\u3002\u73FE\u5728\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C%1$d\u500B\u5B58\u5728\u3057\u307E\u3059\u3002",closeNote:"\u30CE\u30FC\u30C8\u3092\u9589\u3058\u308B",couldntShareScreen:"\u753B\u9762\u914D\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F",uploadingAsset:"\u30A2\u30BB\u30C3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D\u3067\u3059...",cardHasUnsavedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",cardHasUploadFailedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",uploadingDocument:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",preparingScreenSharing:"\u753B\u9762\u914D\u4FE1\u306E\u6E96\u5099\u3092\u3057\u3066\u3044\u307E\u3059...",preparingStudentPresentation:"\u751F\u5F92\u767A\u8868\u306E\u6E96\u5099\u3092\u3057\u3066\u3044\u307E\u3059...",stoppingScreenSharing:"\u753B\u9762\u914D\u4FE1\u3092\u505C\u6B62\u3057\u3066\u3044\u307E\u3059...",stoppingStudentPresentation:"\u751F\u5F92\u767A\u8868\u3092\u7D42\u4E86\u3057\u3066\u3044\u307E\u3059...",screenSharingErrorOccurred:"\u753B\u9762\u914D\u4FE1\u306E\u51E6\u7406\u3067\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",lockingScreens:"\u64CD\u4F5C\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingScreens:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u3044\u307E\u3059...",couldntChangeScreenLock:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",lockingStudentSharing:"\u751F\u5F92\u9593\u901A\u4FE1\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingStudentSharing:"\u751F\u5F92\u9593\u901A\u4FE1\u306E\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u3044\u307E\u3059...",couldntChangeStudentSharingLock:"\u751F\u5F92\u9593\u901A\u4FE1\u306E\u30ED\u30C3\u30AF\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingNote:"\u300C%1$s\u300D\u3092\u4F5C\u6210\u4E2D...",couldntCreateNote:"\u30CE\u30FC\u30C8\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F",renamingNote:"\u300C%1$s\u300D\u306E\u540D\u524D\u3092\u300C%2$s\u300D\u306B\u5909\u66F4\u4E2D...",couldntRenameNote:"\u30CE\u30FC\u30C8\u306E\u540D\u524D\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingNote:"\u300C%1$s\u300D\u3092\u524A\u9664\u4E2D...",couldntDeleteNote:"\u300C%1$s\u300D\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",openingNote:"\u30CE\u30FC\u30C8\u3092\u958B\u3044\u3066\u3044\u307E\u3059...",goBackToNoteList:"\u30CE\u30FC\u30C8\u4E00\u89A7\u306B\u623B\u308B",copyingNote:"\u30CE\u30FC\u30C8\u3092\u30B3\u30D4\u30FC\u4E2D...",couldntCopyNote:"\u30CE\u30FC\u30C8\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",creatingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u4F5C\u6210\u4E2D...",couldntCreateGroup:"\u30AF\u30E9\u30B9\u304C\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u524A\u9664\u4E2D...",couldntDeleteAsUsersExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u767B\u9332\u3055\u308C\u305F\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3059\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupAlreadyDeleted:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u524A\u9664\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002",couldntDeleteArchivedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u30A2\u30FC\u30AB\u30A4\u30D6\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupUnavailable:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u73FE\u5728\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsSubjectsExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u6388\u696D\u304C\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002\u307E\u305A\u6388\u696D\u4E00\u89A7\u3067\u6388\u696D\u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntDeleteClosedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u9589\u8B1B\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002",groupDeletionDenied:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u5BFE\u3059\u308B\u64CD\u4F5C\u6A29\u9650\u304C\u8DB3\u308A\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002",groupDoesntExist:"\u30AF\u30E9\u30B9\u304C\u5B58\u5728\u3057\u306A\u3044\u3088\u3046\u3067\u3059\u3002",couldntDeleteGroup:"\u30AF\u30E9\u30B9\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingSubjectForGroup:"\u6388\u696D\u300C%1$s\u300D\u3092\u30AF\u30E9\u30B9\u300C%2$s\u300D\u306B\u4F5C\u6210\u4E2D...",couldntCreateSubject:"\u6388\u696D\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",joiningSubject:"%1$s\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059...",couldntJoinSubject:"\u6388\u696D\u306B\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",enterGroupCode:"\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",invalidGroupCode:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u306B\u8AA4\u308A\u304C\u3042\u308A\u307E\u3059",joiningGroup:"\u30AF\u30E9\u30B9\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059...",confirmGroupJoin:"%1$s\u306B\u53C2\u52A0\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendToAll:"\u5168\u54E1\u306B\u9001\u4FE1\u3057\u307E\u3059\u304B\uFF1F",didJoinGroup:"%1$s\u306B\u53C2\u52A0\u3057\u307E\u3057\u305F\uFF01",invalidRequest:"\u4E0D\u6B63\u306A\u30EA\u30AF\u30A8\u30B9\u30C8\u3067\u3059",alreadyJoinedGroup:"\u3059\u3067\u306B\u53C2\u52A0\u6E08\u307F\u3067\u3059",groupNoLongerExists:"\u30AF\u30E9\u30B9\u304C\u5B58\u5728\u3057\u306A\u3044\u304B\u3001\u524A\u9664\u3055\u308C\u305F\u3088\u3046\u3067\u3059",couldntJoinGroup:"\u30AF\u30E9\u30B9\u306B\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",duplicatedUserGroup:"\u65E2\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u30AF\u30E9\u30B9\u540D\u3067\u3059",duplicatedSubjectError:"\u65E2\u306B\u30AF\u30E9\u30B9\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u308B\u6388\u696D\u540D\u306E\u305F\u3081\u3001\u4F5C\u6210\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093",updatingSubmission:"\u63D0\u51FA\u3092\u66F4\u65B0\u3057\u3066\u3044\u307E\u3059",couldntUpdateSubmission:"\u63D0\u51FA\u3092\u66F4\u65B0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingTask:"\u63D0\u51FA\u7BB1\u3092\u4F5C\u6210\u4E2D...",couldntCreateTask:"\u63D0\u51FA\u7BB1\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingTask:"\u63D0\u51FA\u7BB1\u300C%1$s\u300D\u3092\u524A\u9664\u4E2D...",requestContainsInvalidID:"\u6388\u696DID\u307E\u305F\u306F\u63D0\u51FA\u7BB1ID\u304C\u4E0D\u6B63\u3067\u3059",subjectOrTaskDoesntExist:"\u6388\u696D\u307E\u305F\u306F\u63D0\u51FA\u7BB1\u304C\u5B58\u5728\u3057\u307E\u305B\u3093",couldntDeleteTask:"\u63D0\u51FA\u7BB1\u304C\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",describeTask:"\u63D0\u51FA\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",didSubmitCards:"\u8CC7\u6599\u3092\u63D0\u51FA\u3057\u307E\u3057\u305F\uFF01",couldntSubmitCards:"\u63D0\u51FA\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendCards:"\u8CC7\u6599\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F\uFF01",couldntSendCards:"\u8CC7\u6599\u3092\u9001\u4FE1\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",checkServiceStatus:"\u30B5\u30FC\u30D0\u30FC\u306E\u7A3C\u50CD\u72B6\u6CC1\u3092\u78BA\u8A8D\u3057\u3066\u4E0B\u3055\u3044",couldntUploadDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",copyingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3057\u3066\u3044\u307E\u3059...",invalidDocumentCopyDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u30B3\u30D4\u30FC\u5148\u304C\u4E0D\u6B63\u3067\u3059",documentCopyDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntCopyDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",movingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u79FB\u52D5\u3057\u3066\u3044\u307E\u3059...",invalidDocumentMoveDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u79FB\u52D5\u5148\u304C\u4E0D\u6B63\u3067\u3059",documentMoveDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntMoveDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u79FB\u52D5\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSaveToMaterialsStorage:"\u8CC7\u6599\u7BB1\u306B\u4FDD\u5B58\u3057\u307E\u3057\u305F\uFF01",invalidDocumentName:"\u30D5\u30A1\u30A4\u30EB\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",couldntSaveToMaterials:"\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u4E2D...",invalidFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",folderCreationDenied:"\u30D5\u30A9\u30EB\u30C0\u306E\u4F5C\u6210\u5148\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",folderNotFound:"\u30D5\u30A9\u30EB\u30C0\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",folderLocationNotFound:"\u30D5\u30A9\u30EB\u30C0\u306E\u4F5C\u6210\u5148\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",couldntCreateFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folder:"\u30D5\u30A9\u30EB\u30C0",file:"\u30D5\u30A1\u30A4\u30EB",renamingItem:"%1$s\u306E\u540D\u524D\u3092\u5909\u66F4\u4E2D...",itemNameInvalid:"%1$s\u306E\u540D\u524D\u304C\u4E0D\u6B63\u3067\u3059",itemRenameDenied:"%1$s\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",itemNotFound:"%1$s\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",couldntRenameItem:"%1$s\u306E\u540D\u524D\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",deletingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u4E2D...",fileOrFolderInvalid:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u304C\u4E0D\u6B63\u3067\u3059",fileOrFolderDeletionDenied:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u306E\u64CD\u4F5C\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSendBackDocument:"\u8FD4\u5374\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendBackDocument:"\u8FD4\u5374\u3057\u307E\u3057\u305F\uFF01",sendingBackDocument:"\u8FD4\u5374\u4E2D...",sendingThumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u9001\u4FE1\u3057\u3066\u3044\u307E\u3059...",sendBackErrorOccurred:"\u8FD4\u5374\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",sendBackIncomplete:"%1$d\u4E2D%2$d\u500B\u306E\u8FD4\u5374\u51E6\u7406\u304C\u5B8C\u4E86\u3057\u307E\u305B\u3093\u3067\u3057\u305F",didCompleteSendBack:"\u8FD4\u5374\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\uFF01",noteListTitle:"\u30CE\u30FC\u30C8\u4E00\u89A7",courseListTitle:"\u6388\u696D\u4E00\u89A7",sessionExpiredTitle:"\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044",sessionExpiredMsg:"\u30BB\u30C3\u30B7\u30E7\u30F3\u306E\u6709\u52B9\u671F\u9650\u304C\u904E\u304E\u307E\u3057\u305F\u3002\u7D99\u7D9A\u3057\u3066\u5229\u7528\u3059\u308B\u305F\u3081\u306B\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",badCsrfTokenTitle:"CSRF\u30C8\u30FC\u30AF\u30F3\u304C\u4E0D\u6B63\u3067\u3059",badCsrfTokenMsg:"\u30AF\u30ED\u30B9\u30B5\u30A4\u30C8\u30FB\u30EA\u30AF\u30A8\u30B9\u30C8\u30D5\u30A9\u30FC\u30B8\u30A7\u30EA\u8A8D\u8A3C\u60C5\u5831\u304C\u4E0D\u6B63\u306E\u305F\u3081\u3001\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u307E\u3059\u3002",timelineTitle:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",ttSheet:"\u30B7\u30FC\u30C8",ttVenn2:"\u30D9\u30F3\u56F3",ttVenn3:"\u30D9\u30F3\u56F3",ttYChart:"Y\u30C1\u30E3\u30FC\u30C8",ttXChart:"X\u30C1\u30E3\u30FC\u30C8",ttWChart:"W\u30C1\u30E3\u30FC\u30C8",ttButterfly:"\u30D0\u30BF\u30D5\u30E9\u30A4\u30C1\u30E3\u30FC\u30C8",ttPyramid:"\u30D4\u30E9\u30DF\u30C3\u30C9\u30C1\u30E3\u30FC\u30C8",ttPMI:"PMI/KWL",ttFishbone:"\u30D5\u30A3\u30C3\u30B7\u30E5\u30DC\u30FC\u30F3\u56F3",ttPlotLeft:"\u30D7\u30ED\u30C3\u30C8\u56F3(\u5DE6)",ttPlotRight:"\u30D7\u30ED\u30C3\u30C8\u56F3(\u53F3)",ttCandy:"\u30AD\u30E3\u30F3\u30C7\u30A3\u30C1\u30E3\u30FC\u30C8",ttWebbing:"\u30A6\u30A7\u30D3\u30F3\u30B0",ttRake:"\u304F\u307E\u3067\u30C1\u30E3\u30FC\u30C8",ttDataChart3:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8(3)",ttDataChart6:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8(6)",ttJellyfish:"\u304F\u3089\u3052\u30C1\u30E3\u30FC\u30C8",ttOneAxis:"\u5EA7\u6A19\u8EF8",ttTwoAxes:"\u5EA7\u6A19\u8EF8",ttCircles:"\u540C\u5FC3\u5186\u30C1\u30E3\u30FC\u30C8",ttAnalysis:"\u60C5\u5831\u5206\u6790\u30C1\u30E3\u30FC\u30C8",ttDiamond:"\u30C0\u30A4\u30A2\u30E2\u30F3\u30C9\u30E9\u30F3\u30AD\u30F3\u30B0",submittingDocument:"\u63D0\u51FA\u4E2D\u3067\u3059",couldntSubmitWhileSubmittingOthers:"\u4ED6\u306E\u63D0\u51FA\u7269\u3092\u63D0\u51FA\u4E2D\u306E\u305F\u3081\u3001\u63D0\u51FA\u3067\u304D\u307E\u305B\u3093",confirmReloadWhileUnsavedChangesExist:"\u30CE\u30FC\u30C8\u306B\u672A\u4FDD\u5B58\u306E\u5909\u66F4\u304C\u3042\u308A\u307E\u3059\u3002\u30DA\u30FC\u30B8\u3092\u66F4\u65B0\u3059\u308B\u3068\u305D\u308C\u3089\u304C\u6D88\u3048\u3066\u3057\u307E\u3046\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",uncaughtErrorOccurred:"\u60F3\u5B9A\u3057\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u3001\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306F\u52D5\u4F5C\u3092\u505C\u6B62\u3057\u307E\u3057\u305F\u3002\u30A8\u30E9\u30FC\u8A73\u7D30\u3092\u8868\u793A\u3057\u3066\u30B5\u30DD\u30FC\u30C8\u306B\u9023\u7D61\u3059\u308B\u304B\u3001\u30A2\u30D7\u30EA\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",viewErrorDetail:"\u8A73\u7D30\u3092\u8868\u793A\u3059\u308B",cannotInsertWhileStillLoadingDocument:"\u8CC7\u6599\u306E\u8AAD\u307F\u8FBC\u307F\u304C\u7D42\u4E86\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u30AB\u30FC\u30C9\u3092\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093",unsupportedContentType:"\u30CE\u30FC\u30C8\u306B\u8FFD\u52A0\u3067\u304D\u306A\u3044\u7A2E\u985E\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3059",insertCardFromDocument:"\u30CE\u30FC\u30C8\u306B\u3053\u306E\u8CC7\u6599\u306E\u30AB\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u307E\u3059",note:"\u30CE\u30FC\u30C8",material:"\u8CC7\u6599",couldntOpenItem:"%1$s\u3092\u958B\u3051\u307E\u305B\u3093\u3067\u3057\u305F",couldntGet_CheckInternetConnection:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u4FE1\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u63A5\u7D9A\u72B6\u6CC1\u3092\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",checkInternetConnection:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u63A5\u7D9A\u72B6\u6CC1\u3092\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",brokenNoteErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u4E0A\u306B\u4FDD\u5B58\u3055\u308C\u305F%1$s\u304C\u7834\u640D\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\u304A\u624B\u6570\u3092\u304A\u304B\u3051\u3057\u3066\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u5F0A\u793E\u30B5\u30DD\u30FC\u30C8\u307E\u3067\u3054\u9023\u7D61\u3092\u304A\u9858\u3044\u3057\u307E\u3059\u3002\uFF08\u30A8\u30E9\u30FC\u30B3\u30FC\u30C9: %2$d, \u6388\u696DID: %3$d, \u30CE\u30FC\u30C8ID: %4$s\uFF09",unsupportedNoteVerErrorMsg:"%1$s\u306E\u5F62\u5F0F\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u3053\u306E%1$s\u306F\u65B0\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u4F5C\u6210\u3055\u308C\u305F\u53EF\u80FD\u6027\u304C\u3042\u308A\u3001\u958B\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s\uFF09",unsupportedNoteFeatErrorMsg:"%1$s\u306B\u65B0\u3057\u3044\u6A5F\u80FD\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30CE\u30FC\u30C8\u306F\u958B\u767A\u4E2D\u306E\u30A2\u30D7\u30EA\u3067\u4F5C\u6210\u3055\u308C\u305F\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s, \u6A5F\u80FD\u30B3\u30FC\u30C9: %3$s\uFF09",api202ErrorMsg:"%1$s\u306B\u542B\u307E\u308C\u3066\u3044\u308B\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u51E6\u7406\u304C\u5B8C\u4E86\u3057\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u3053\u308C\u306F\u901A\u5E38\u3057\u3070\u3089\u304F\u3059\u308B\u3068\u8AAD\u307F\u8FBC\u307F\u304C\u3067\u304D\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\u3002",api403ErrorMsg:"%1$s\u306B\u5BFE\u3059\u308B\u6A29\u9650\u304C\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u3092\u304A\u9858\u3044\u3057\u307E\u3059\u3002",api404ErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u4E0A\u306B\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F%1$s\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3053\u306E%1$s\u306F\u4F5C\u6210\u304C\u3067\u304D\u3066\u3044\u306A\u304B\u3063\u305F\u304B\u3001\u3059\u3067\u306B\u524A\u9664\u3055\u308C\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",unknownApiErrorMsg:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u30B5\u30FC\u30D0\u30FC\u3067\u60F3\u5B9A\u3067\u304D\u3066\u3044\u306A\u3044\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3044\u305F\u3057\u307E\u3057\u305F\u3002",noteChangedFromOtherDevice:"\u5225\u306E\u7AEF\u672B\u304B\u3089\u3082\u30CE\u30FC\u30C8\u304C\u5909\u66F4\u3055\u308C\u305F\u306E\u3067\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u307E\u3059",save:"\u4FDD\u5B58",unsaved:"\u672A\u4FDD\u5B58",saving:"\u4FDD\u5B58\u4E2D...",enterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u3092\u5165\u529B",enterFileName:"\u30D5\u30A1\u30A4\u30EB\u306E\u540D\u524D\u3092\u5165\u529B",selectItemsToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u3082\u306E\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",selectItemsToErase:"\u524A\u9664\u3059\u308B\u3082\u306E\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",selectItemsToMove:"\u79FB\u52D5\u3059\u308B\u3082\u306E\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",selectItemToRename:"\u540D\u524D\u3092\u5909\u66F4\u3059\u308B\u3082\u306E\u3092\u30BF\u30C3\u30D7\u3057\u3066\u304F\u3060\u3055\u3044",askWhichFolderToCopyItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToImportItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToMoveItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u79FB\u52D5\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToRestoreItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u5FA9\u5143\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToSaveItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u4FDD\u5B58\u3057\u307E\u3059\u304B\uFF1F",thisIsAnEmptyFolder:"\u3053\u308C\u306F\u7A7A\u306E\u30D5\u30A9\u30EB\u30C0\u3067\u3059",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",confirmSingleFileDelete:"1\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmMultiFileDelete:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",createFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210",pleaseEnterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",moveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u79FB\u52D5\u3059\u308B",copyToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3059\u308B",restoreToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u5FA9\u5143\u3059\u308B",photoDefaultFileName:"\u5199\u771F",videoDefaultFileName:"\u52D5\u753B",drawingDefaultFileName:"\u304A\u7D75\u304B\u304D",webDefaultFileName:"Web\u691C\u7D22",mapDefaultFileName:"\u5730\u56F3",textDefaultFileName:"\u30C6\u30AD\u30B9\u30C8",pdfDefaultFileName:"PDF",audioDefaultFileName:"\u97F3\u58F0",enterDocumentName:"\u6559\u6750\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",saveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u4FDD\u5B58",camera:"\u30AB\u30E1\u30E9",text:"\u30C6\u30AD\u30B9\u30C8",textCardMenuBtnImgPath:"/svg/text_ja_60x60_margin_less.svg",thinkingTool:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB",web:"web",quiz:"\u30C6\u30B9\u30C8",quizPresetTest:"\u30C6\u30B9\u30C8",quizPresetSurvey:"\u30A2\u30F3\u30B1\u30FC\u30C8",author:"\u51FA\u984C\u8005",questionCount:"\u8CEA\u554F\u6570 %1$d",result:"\u7D50\u679C",answerTest:"\u89E3\u7B54",answerQuestionnaire:"\u56DE\u7B54",viewTestAnswers:"\u89E3\u7B54\u78BA\u8A8D",viewQuestionnaireAnswers:"\u56DE\u7B54\u78BA\u8A8D",answerTestTogether:"\u5168\u54E1\u3067\u89E3\u7B54",answerQuestionnaireTogether:"\u5168\u54E1\u3067\u56DE\u7B54",creatingTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u3066\u3044\u307E\u3059...",createdTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F",failedCreateTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",reloadForTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u7528\u8A8D\u8A3C\u60C5\u5831\u306E\u66F4\u65B0\u304C\u5FC5\u8981\u3067\u3059\u3002\u7D99\u7D9A\u3057\u3066\u5229\u7528\u3059\u308B\u305F\u3081\u306B\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u30C6\u30B9\u30C8\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",preparingQuestionnaire:"\u30A2\u30F3\u30B1\u30FC\u30C8\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",unnamedNote:"\u540D\u79F0\u672A\u8A2D\u5B9A\u30CE\u30FC\u30C8",copyOf:"%1$s\u306E\u30B3\u30D4\u30FC",noteConflictDialogTitle:"\u30CE\u30FC\u30C8\u306E\u7AF6\u5408\u304C\u767A\u751F\u3057\u307E\u3057\u305F",saveNoteUnderOtherNameTitle:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u5225\u540D\u3067\u4FDD\u5B58\u3059\u308B",saveNoteUnderOtherNameDesc:"\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3055\u308C\u3001\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u306F\u65B0\u3057\u3044\u30CE\u30FC\u30C8\u3068\u3057\u3066\u5225\u540D\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002",prioritizeThisVersionTitle:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u512A\u5148\u3059\u308B",prioritizeThisVersionDesc:"\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u7834\u68C4\u3057\u3001\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3057\u307E\u3059\u3002",deferToOtherDeviceVersionTitle:"\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3092\u512A\u5148\u3059\u308B",deferToOtherDeviceVersionDesc:"\u3053\u306E\u7AEF\u672B\u306E\u5909\u66F4\u306F\u7834\u68C4\u3055\u308C\u3001\u4ED6\u306E\u7AEF\u672B\u306E\u5909\u66F4\u3067\u4E0A\u66F8\u304D\u3055\u308C\u307E\u3059\u3002",resolve:"\u89E3\u6C7A\u3059\u308B",preferences:"\u74B0\u5883\u8A2D\u5B9A",zoomTitle:"\u62E1\u5927\u30FB\u7E2E\u5C0F",invertMouseWheel:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u306E\u65B9\u5411\u3092\u53CD\u8EE2\u3059\u308B",mouseWheelSensitivity:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u611F\u5EA6",trackpadPinchZoomSensitivity:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9\u306E\u30D4\u30F3\u30C1\u30BA\u30FC\u30E0\u611F\u5EA6",aboutThisApp:"\u30A2\u30D7\u30EA\u306B\u3064\u3044\u3066",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",teacherLockedScreens:"\u5148\u751F\u304C\u753B\u9762\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059",screensAreLocked:"\u64CD\u4F5C\u30ED\u30C3\u30AF\u4E2D",focusOnTheTeacher:"\u4F5C\u696D\u3092\u4E2D\u65AD\u3057\u3066\u3001\u5148\u751F\u306E\u307B\u3046\u3092\u898B\u307E\u3057\u3087\u3046\u3002",checking:"\u78BA\u8A8D\u4E2D...",checkScreenLock:"\u30ED\u30C3\u30AF\u3092\u78BA\u8A8D\u3059\u308B",search:"\u691C\u7D22",submissions:"\u63D0\u51FA\u7269",sendToDialogTitle:"\u30AB\u30FC\u30C9\u306E\u9001\u308A\u5148\u3092\u9078\u629E",allMembers:"\u5168\u54E1",sendToIndividuals:"\u500B\u4EBA",selectAll:"\u3059\u3079\u3066\u9078\u629E",releaseAll:"\u3059\u3079\u3066\u89E3\u9664",sendToMultiple:"\u9001\u308B\uFF08%1$d\u4EBA\uFF09",openTask:"\u63D0\u51FA\u7269\u304C\u3042\u308A\u307E\u3059",statusSubmitted:"\u63D0\u51FA\u6E08\u307F",openTaskCount:"\u3001\u4ED6%1$d\u3064",others:"\u3001\u4ED6%1$d",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",hourTimeUnit:"\u6642\u9593",minuteTimeUnit:"\u5206",secondTimeUnit:"\u79D2",taskListTitle:"\u63D0\u51FA\u7BB1",createNewTask:"\u65B0\u3057\u3044\u63D0\u51FA\u7BB1\u3092\u4F5C\u308B",confirmDelete:"\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",deadlineDate:"\u7DE0\u5207\u65E5\u6642",openForSubmissions:"\u52DF\u96C6\u4E2D",noOpenTasks:"\u52DF\u96C6\u4E2D\u306E\u63D0\u51FA\u7BB1\u306F\u3042\u308A\u307E\u305B\u3093",inPreparation:"\u6E96\u5099\u4E2D",title:"\u30BF\u30A4\u30C8\u30EB",createInPreparation:"\u6E96\u5099\u4E2D\u3067\u4F5C\u6210",callForAnswersNow:"\u4ECA\u3059\u3050\u52DF\u96C6\u958B\u59CB",setTimeAndDateForDeadline:"\u7DE0\u5207\u65E5\u6642\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044",callForAnswers:"\u52DF\u96C6\u958B\u59CB",pleaseChooseTask:"\u63D0\u51FA\u5148\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",expiredTasks:"\u7DE0\u3081\u5207\u308A\u6E08\u307F",allExpiredTasks:"\u63D0\u51FA\u7BB1\u4E00\u89A7",noTasksExpired:"\u7DE0\u3081\u5207\u308A\u6E08\u307F\u306E\u63D0\u51FA\u7BB1\u306F\u3042\u308A\u307E\u305B\u3093",confirmResubmit:"\u300C%1$s\u300D\u306B\u518D\u63D0\u51FA\u3057\u307E\u3059\u304B\uFF1F",submissionName:"%1$s\u306E\u56DE\u7B54",complete:"\u5B8C\u4E86",start:"\u958B\u59CB",end:"\u7D42\u4E86",edit:"\u7DE8\u96C6",useAll:"\u3059\u3079\u3066\u4F7F\u3046",shareScreen:"\u753B\u9762\u914D\u4FE1",sharing:"\u914D\u4FE1\u4E2D",nameOrder:"\u540D\u524D\u9806",updateOrder:"\u66F4\u65B0\u9806",submitOrder:"\u63D0\u51FA\u9806",anonymous:"\u7121\u8A18\u540D",confirmRevealSubmitterNames:"\u4E26\u3073\u9806\u3092\u300C%1$s\u300D\u306B\u5909\u66F4\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u56DE\u7B54\u8005\u306E\u540D\u524D\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterTaskName:"\u63D0\u51FA\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",confirmAnswerShare:"\u751F\u5F92\u3068\u56DE\u7B54\u3092\u5171\u6709\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendBackAll:"\u6DFB\u524A\u6E08\u307F\u306E%1$d\u4EBA\u3078\u4E00\u62EC\u8FD4\u5374\u3057\u307E\u3059\u304B\uFF1F",startComparing:"\u6BD4\u8F03\u958B\u59CB",comparison:"\u6BD4\u8F03",startAnswerSharing:"\u56DE\u7B54\u3092\u5171\u6709",sharingAnswers:"\u56DE\u7B54\u5171\u6709\u4E2D",sendBackAll:"\u4E00\u62EC\u8FD4\u5374",endAnswerSharing:"\u56DE\u7B54\u5171\u6709\u3092\u89E3\u9664",noExpiry:"\u6307\u5B9A\u306A\u3057",expiryDialogTitle:"\u7DE0\u5207\u65E5\u6642",expiry:"\u7DE0\u5207",hasExpired:"\u7DE0\u5207\u6E08",closeNow:"\u4ECA\u3059\u3050",closeAfterTen:"10\u5206\u5F8C",closeToday:"\u4ECA\u65E5\u4E2D",dateLabel:"\u65E5\u4ED8",timeLabel:"\u6642\u523B",answersNotVisibleWarnTitle:"\u56DE\u7B54\u304C\u5171\u6709\u3055\u308C\u3066\u3044\u307E\u305B\u3093",answersNotVisibleWarnMsg:"\u73FE\u5728\u3001\u56DE\u7B54\u306F\u5171\u6709\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u4ED6\u306E\u4EBA\u306E\u56DE\u7B54\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",backToAnswerList:"\u56DE\u7B54\u4E00\u89A7\u306B\u623B\u308B",sendBack:"\u8FD4\u5374",use:"\u4F7F\u3046",confirmSendBack:"\u8FD4\u5374\u3057\u307E\u3059\u304B?",studentSharing:"\u751F\u5F92\u9593\u901A\u4FE1",screenLock:"\u753B\u9762\u30ED\u30C3\u30AF",checkAttendance:"\u53C2\u52A0\u8005\u78BA\u8A8D",learnAboutThinkingTools:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB\u3092\u5B66\u3076",sharedBy:"%1$s\u304B\u3089\u306E\u5171\u6709",submittedBy:"%1$s\u306E\u63D0\u51FA",sentBackBy:"%1$s\u304B\u3089\u306E\u8FD4\u5374",closedTaskLabel:"\u7DE0\u5207",unknownUser:"\u4E0D\u660E\u306A\u30E6\u30FC\u30B6",enumerationWithReadingPoint:"\u3001",and:"\u3068",andOtherMembers:"\u4ED6%1$d\u4EBA",nowSharingIndicator:"%1$s\u306B\u9001\u4FE1\u4E2D%2$s",pendingFileAndThumbUploadCount:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3068%2$d\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",pendingFileUploadCount:"%1$d\u500B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",pendingThumbUploadCount:"%1$d\u500B\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D...",groupName:"\u30AF\u30E9\u30B9\u540D",groupJoinInstructions:"\u751F\u5F92\u306E\u307F\u306A\u3055\u3093\u306F\u3001\u3053\u306E\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",groupJoinCodeDeactivated:"\u3053\u306E\u30AF\u30E9\u30B9\u306E\u53C2\u52A0\u30B3\u30FC\u30C9\u306F\u7121\u52B9\u5316\u3055\u308C\u3066\u3044\u307E\u3059",membersJoinedCount:"\u53C2\u52A0\u4EBA\u6570",confirmLogout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",support:"\u30B5\u30DD\u30FC\u30C8",serviceStatus:"\u30B5\u30FC\u30D3\u30B9\u72B6\u6CC1",adminPage:"\u7BA1\u7406\u30DA\u30FC\u30B8",logoutOption:"\u30ED\u30B0\u30A2\u30A6\u30C8",groupCode:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9",update:"\u66F4\u65B0",statusFetchErrorOccurred:"\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u8D77\u304D\u307E\u3057\u305F",notAttending:"\u53D7\u8B1B\u3057\u3066\u3044\u307E\u305B\u3093",choosingCourse:"\u6388\u696D\u9078\u629E\u4E2D",attendingOtherCourse:"\u4ED6\u306E\u6388\u696D\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059",browsingWeb:"Web ",attending:"\u53D7\u8B1B\u4E2D",create:"\u4F5C\u6210",invalidUrlHelp:"https://\u3082\u3057\u304F\u306Fhttp://\u304B\u3089\u59CB\u307E\u308B\u6B63\u3057\u3044URL\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",invalidOpenUrl:"URL\u306B\u7121\u52B9\u306A\u6587\u5B57\u5217\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306EWeb\u30AB\u30FC\u30C9\u306F\u958B\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002",photo:"\u5199\u771F",video:"\u52D5\u753B",closeCamera:"\u30AB\u30E1\u30E9\u3092\u9589\u3058\u308B",retake:"\u64AE\u308A\u76F4\u3059",generalCameraPrepError:"\u30AB\u30E1\u30E9\u306E\u6E96\u5099\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",browserDoesntSupportMediaCapture:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u30FC\u306F\u30AB\u30E1\u30E9\u6A5F\u80FD\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",cameraMicPermissionDeniedErrorMsg:"\u30AB\u30E1\u30E9\u3068\u30DE\u30A4\u30AF\u306E\u5229\u7528\u3092\u8A31\u53EF\u3057\u3066\u304F\u3060\u3055\u3044",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/loilo-teacher-support/Web%E7%89%88%E3%81%A7%E9%8C%B2%E9%9F%B3%E3%82%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/loilo-teacher-support/Android%E3%81%A7%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%A8%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E5%88%A9%E7%94%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95",getHelp:"\u65B9\u6CD5\u306F\u3053\u3061\u3089",cantFindUsableDevice:"\u4F7F\u7528\u53EF\u80FD\u306A\u30C7\u30D0\u30A4\u30B9\u306E\u60C5\u5831\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPhotoData:"\u5199\u771F\u30C7\u30FC\u30BF\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetVideoData:"\u30D3\u30C7\u30AA\u30C7\u30FC\u30BF\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",resetCamera:"\u30AB\u30E1\u30E9\u3092\u30EA\u30BB\u30C3\u30C8",confirmResetVideoCamera:"\u64AE\u5F71\u3092\u3084\u308A\u76F4\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterNewGroupName:"\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u306E\u540D\u524D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u7D44",addCourseLabel:"\u6388\u696D\u306E\u8FFD\u52A0",addCourseDesc:"\u300C\u6388\u696D\u306E\u8FFD\u52A0\u300D\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044",chooseGroupToAddTo:"\u3042\u306A\u305F\u304C\u6388\u696D\u3092\u884C\u3046\u30AF\u30E9\u30B9\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",noGroups:"\u4ECA\u5E74\u5EA6\u306E\u30AF\u30E9\u30B9\u304C\u307E\u30601\u3064\u3082\u767B\u9332\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002",createNewGroupDesc:"\u2193\u304B\u3089\u300C\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u3092\u4F5C\u6210\u300D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",groupDesc:"\u540C\u3058\u6642\u9593\u306B\u6388\u696D\u3092\u53D7\u3051\u308B\u751F\u5F92\u306E\u96C6\u307E\u308A\u3092\u300C\u30AF\u30E9\u30B9\u300D\u3068\u547C\u3093\u3067\u3044\u307E\u3059\u3002",chooseGroupToDelete:"\u524A\u9664\u3059\u308B\u30AF\u30E9\u30B9\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",createNewGroupBtnLabel:"\u65B0\u3057\u3044\u30AF\u30E9\u30B9\u3092\u4F5C\u6210",createNewSubjectBtnLabel:"\u65B0\u3057\u3044\u6388\u696D\u3092\u4F5C\u6210",createdSubjectsListTitle:"\u4F5C\u6210\u6E08\u307F\u306E\u6388\u696D",thisGroupHasNoSubjects:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u6388\u696D\u304C\u3042\u308A\u307E\u305B\u3093",courseJoinedMark:"\u8FFD\u52A0\u6E08\u307F",addCourseDialogJoinCourseBtnLabel:"\u8FFD\u52A0",confirmCreateSubject:"\u300C%1$s\u300D\u3092\u4F5C\u6210\u3057\u307E\u3059\u304B\uFF1F",subjectNameInputPlaceholder:"\u6388\u696D\u306E\u540D\u524D\u3092\u5165\u529B...",endedCoursesTitle:"\u9589\u8B1B\u3057\u305F\u6388\u696D",endedCoursesDesc:"\u203B\u6628\u5E74\u5EA6\u306E\u6388\u696D\u306F\u300C\u9589\u8B1B\u3057\u305F\u6388\u696D\u300D\u306E\u4E2D\u306B\u3042\u308A\u307E\u3059",year:"%1$d\u5E74",subjectTitle:"\u6388\u696D",graduated:"\u5352\u696D",otherTeachersCoursesTitle:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D",courseFetchErrorOccurred:"\u6388\u696D\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",groupFetchErrorOccurred:"\u30AF\u30E9\u30B9\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",teacherNoJoinedCourseTitle1:"\u73FE\u5728\u3042\u306A\u305F\u304C\u62C5\u5F53\u3057\u3066\u3044\u308B",noJoinedCourseTitle2:"\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",enterClassCodeToJoinClass:"\u2193\u5148\u751F\u306B\u6559\u3048\u3066\u3082\u3089\u3063\u305F\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",joinCourseBtnLabel:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u5165\u529B",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u65E5\u306E\u30CE\u30FC\u30C8",chooseNoteToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",toWhichSubjectDoYouWantToCopy:"\u3069\u306E\u6388\u696D\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3059\u304B\uFF1F",toWhichSubjectNotesDoYouWantToSend:"\u3069\u306E\u6388\u696D\u306E\u30CE\u30FC\u30C8\u306B\u9001\u308A\u307E\u3059\u304B\uFF1F",chooseNoteToRename:"\u540D\u524D\u3092\u5909\u66F4\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",createNewNote:"\u30CE\u30FC\u30C8\u3092\u65B0\u898F\u4F5C\u6210",renameNoteDialogMsg:"\u30CE\u30FC\u30C8\u306E\u540D\u524D\u3092\u5909\u66F4",noteFetchErrorOccurred:"\u30CE\u30FC\u30C8\u306E\u53D6\u5F97\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F",noNotesFound:"\u30CE\u30FC\u30C8\u3092\u65B0\u898F\u4F5C\u6210\u3057\u307E\u3057\u3087\u3046\uFF01",duplicateNoteNameSuffix:"\u306E\u30B3\u30D4\u30FC",otherTeachersCourseNotFound:"\u4ED6\u306E\u5148\u751F\u306E\u6388\u696D\u306F\u7121\u3044\u3088\u3046\u3067\u3059",loadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",couldntLoadFileTitle:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3081\u307E\u305B\u3093\u3067\u3057\u305F",addCardDialogTitle:"\u8FFD\u52A0\u5148",inThisCard:"\u30AB\u30FC\u30C9\u5185\u306B",asNextCard:"\u6B21\u306B",pasteCopiedUrl:"\u30B3\u30D4\u30FC\u3057\u305FURL\u3092\u8CBC\u308A\u4ED8\u3051\u308B",confirmDuplicateAllConnectedCards:"\u9023\u7D50\u3055\u308C\u305F\u5168\u30AB\u30FC\u30C9\u3092\u8907\u88FD\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3066\u3099\u3059\u304B\uFF1F",duplicateThisCard:"\u3053\u306E\u30AB\u30FC\u30C9\u3092\u8907\u88FD",duplicateAllConnectedCards:"\u9023\u7D50\u3055\u308C\u305F\u5168\u30AB\u30FC\u30C9\u3092\u8907\u88FD",couldntReuseCard:"\u30AB\u30FC\u30C9\u306E\u518D\u5229\u7528\u306B\u5931\u6557\u3057\u307E\u3057\u305F",changeTools:"\u30C4\u30FC\u30EB\u3092\u5207\u308A\u66FF\u3048",exportCard:"\u66F8\u304D\u51FA\u3057",pdfFile:"PDF\u30D5\u30A1\u30A4\u30EB",downloadFile:"%1$s\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u4E2D...",couldntDownloadFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",invalidFileNameOrPath:"\u30D5\u30A1\u30A4\u30EB\u540D\u3042\u308B\u3044\u306F\u30D5\u30A1\u30A4\u30EB\u306E\u30D1\u30B9\u304C\u9577\u3059\u304E\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059",invalidDirectoryNameForBatchDownload:"\u30D5\u30A9\u30EB\u30C0\u540D\u306B\u4F7F\u7528\u3067\u304D\u306A\u3044\u6587\u5B57\u304C\u542B\u307E\u308C\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059",failedDownloadFile:"%1$s\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u5931\u6557\u3057\u307E\u3057\u305F",failedDownloadFiles:"%1$s\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u5931\u6557\u3057\u307E\u3057\u305F",failedDownloadFilesWithOthers:"%1$s\u3068\u4ED6%2$d\u4EBA\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u5931\u6557\u3057\u307E\u3057\u305F",fileDestinationNotExist:"\u66F8\u304D\u8FBC\u307F\u5148\u304C\u5B58\u5728\u3057\u306A\u3044\u3082\u3057\u304F\u306F\u524A\u9664\u3055\u308C\u3066\u3044\u307E\u3059",completedBatchDownload:"\u4E00\u62EC\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F",canceledBatchDownload:"\u4E00\u62EC\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u4E2D\u6B62\u3057\u307E\u3057\u305F",cancelingDownload:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u4E2D...",titleRedirect:"\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8 | \u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",showSubmission:"\u63D0\u51FA\u7269\u3092\u8868\u793A\u3059\u308B",redirectSubmissionMessage:"\u63D0\u51FA\u7269\u3078\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8\u3057\u307E\u3059\u3002\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8\u3057\u306A\u3044\u5834\u5408\u306F\u4E0B\u8A18\u306E\u30EA\u30F3\u30AF\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044\u3002",image:"\u753B\u50CF",audio:"\u97F3\u58F0",audioRecording:"\u9332\u97F3",print:"\u5370\u5237",confirmAudioRecordingOverwrite:"\u9332\u97F3\u6E08\u307F\u306E\u30C7\u30FC\u30BF\u3092\u4E0A\u66F8\u304D\u3057\u3066\u9332\u97F3\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",couldntStartAudioRecording:"\u9332\u97F3\u3092\u958B\u59CB\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntFinishedAudioRecording:"\u9332\u97F3\u3092\u5B8C\u4E86\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",confirmDeleteAudioRecording:"\u9332\u97F3\u30C7\u30FC\u30BF\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",automatic:"\u81EA\u52D5",audioRecordBtnLabel:"\u9332\u97F3",volume:"\u97F3\u91CF",browserDoesntSupportAudioRecording:"\u3054\u4F7F\u7528\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u9332\u97F3\u6A5F\u80FD\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",micPermissionDeniedErrorMsg:"\u30DE\u30A4\u30AF\u306E\u5229\u7528\u3092\u8A31\u53EF\u3057\u3066\u304F\u3060\u3055\u3044",noMicFoundErrorMsg:"\u4F7F\u7528\u53EF\u80FD\u306A\u30DE\u30A4\u30AF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",verticalWritingBtnLabel:"\u7E26",selection:"\u9078\u629E",cut:"\u30AB\u30C3\u30C8",paste:"\u30DA\u30FC\u30B9\u30C8",pasteImage:"\u753B\u50CF\u3092\u30DA\u30FC\u30B9\u30C8",pasteText:"\u30C6\u30AD\u30B9\u30C8\u3092\u30DA\u30FC\u30B9\u30C8",pasteCards:"\u30AB\u30FC\u30C9\u3092\u30DA\u30FC\u30B9\u30C8",nothingToPaste:"\u30DA\u30FC\u30B9\u30C8\u3059\u308B\u3082\u306E\u304C\u3042\u308A\u307E\u305B\u3093",couldntDownloadFileErrorMsg:"%1$d: \u30B5\u30FC\u30D0\u30FC\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u518D\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",corruptFileErrorMsg:"\u30D5\u30A1\u30A4\u30EB\u306E\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u30D5\u30A1\u30A4\u30EB\u304C\u7834\u640D\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",stopScreenSharing:"\u914D\u4FE1\u505C\u6B62",couldntReceiveScreenShare:"\u753B\u9762\u914D\u4FE1\u306E\u53D7\u4FE1\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",screenSharingTimedOutErrorMsg:"%1$d: \u914D\u4FE1\u30C7\u30FC\u30BF\u306E\u53D6\u5F97\u304C\u9577\u6642\u9593\u306B\u308F\u305F\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",endScreenShareReceiving:"\u753B\u9762\u914D\u4FE1\u306E\u53D7\u4FE1\u3092\u7D42\u4E86\u3059\u308B",endPresentationLine1:"\u767A\u8868",endPresentationLine2:"\u7D42\u4E86",requestPresentationLine1:"\u751F\u5F92",requestPresentationLine2:"\u767A\u8868",endSharingLine1:"\u914D\u4FE1",endSharingLine2:"\u505C\u6B62",startSharingLine1:"\u753B\u9762",startSharingLine2:"\u914D\u4FE1",confirmStartPresentation:"\u751F\u5F92\u767A\u8868\u3092\u958B\u59CB\u3057\u307E\u3059\u304B\uFF1F",confirmStartScreenSharing:"\u914D\u4FE1\u3092\u958B\u59CB\u3057\u307E\u3059\u304B\uFF1F",yourTurnToPresent:"\u3042\u306A\u305F\u304C\u767A\u8868\u3059\u308B\u756A\u3067\u3059\uFF01",unsupportedFileErrorMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093\u3002\u30D5\u30A1\u30A4\u30EB\u5F62\u5F0F: %1$s \u62E1\u5F35\u5B50: %2$s",unsupportedFileErrorWithoutOptMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u5BFE\u5FDC\u3057\u3066\u3044\u307E\u305B\u3093",confirmMultiCardGroupDelete:"%1$d\u679A\u306E\u30AB\u30FC\u30C9\u3068\u5B50\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",confirmMultiChildCardDelete:"\u30AB\u30FC\u30C9\u3068%1$d\u679A\u306E\u5B50\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",confirmCardDelete:"\u30AB\u30FC\u30C9\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F",inputCannotContainSpacesWarning:"\u7A7A\u767D\u6587\u5B57\u3092\u5165\u529B\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",inputTooLongWarning:"%1$d\u6587\u5B57\u4EE5\u4E0B\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",taskNameDefaultPrefix:"\u63D0\u51FA\u7269",confirmDeleteTimelineHistory:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u306E\u5C65\u6B74\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",deletingTimelineHistory:"\u5C65\u6B74\u3092\u524A\u9664\u4E2D...",cannotDeleteThisHistory:"\u3053\u306E\u5C65\u6B74\u306F\u524A\u9664\u3067\u304D\u307E\u305B\u3093",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",daysRemaining:"\u3042\u3068%d\u65E5",hoursRemaining:"\u3042\u3068%d\u6642\u9593",minRemaining:"\u3042\u3068%1$s\u5206",secRemaining:"\u3042\u3068%1$s\u79D2",textButtonIconClass:"textButtonIconJa",submitted:"\u63D0\u51FA\u6E08",drawn:"\u304A\u7D75\u304B\u304D",annotation:"\u6DFB\u524A",couldntSave:"%1$s\u304C\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",annotationThumbnail:"\u6DFB\u524A\u30B5\u30E0\u30CD\u30A4\u30EB",documentThumbnail:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u30B5\u30E0\u30CD\u30A4\u30EB",languageSettingTitle:"\u8A00\u8A9E\u8A2D\u5B9A",english:"\u82F1\u8A9E",japanese:"\u65E5\u672C\u8A9E",japaneseHira:"\u3072\u3089\u304C\u306A",traditionalChinese:"\u7E41\u4F53\u5B57\u4E2D\u56FD\u8A9E",simplifiedChinese:"\u7C21\u4F53\u5B57\u4E2D\u56FD\u8A9E",inButtonIconClass:"inButtonIconJa",outButtonIconClass:"outButtonIconJa",thinkingToolHelpPageUrl:"https://n.loilo.tv/ja/thinkingtool",couldntGetSubmissions:"\u63D0\u51FA\u7BB1\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u304C\u53C2\u52A0\u3059\u308B\u6388\u696D\u3067\u306F\u3001\u63D0\u51FA\u7BB1\u3092\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"\u63D0\u51FA\u7269\u306E\u63D0\u51FA\u72B6\u6CC1\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093",couldntGetSubmissionHistory:"\u63D0\u51FA\u5C65\u6B74\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",appName:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",loiloNote:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8",submissionBox:"\u63D0\u51FA\u7BB1",error:"\u30A8\u30E9\u30FC",timeline:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",status400Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u5F62\u5F0F\u304C\u9593\u9055\u3063\u3066\u3044\u308B\u3088\u3046\u3067\u3059",status403Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30EA\u30BD\u30FC\u30B9\u306B\u5BFE\u3059\u308B\u6A29\u9650\u304C\u306A\u3044\u3088\u3046\u3067\u3059",status404Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30EA\u30BD\u30FC\u30B9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",status500Msg:"\u30B5\u30FC\u30D0\u30FC\u3067\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30B5\u30FC\u30D3\u30B9\u5168\u4F53\u3067\u969C\u5BB3\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u3082\u3042\u308A\u307E\u3059\u3002",defaultErrorMsg:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u60F3\u5B9A\u5916\u306E\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",goToTopPage:"\u30C8\u30C3\u30D7\u30DA\u30FC\u30B8\u306B\u623B\u308B",viewStatusPage:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30DA\u30FC\u30B8\u3067\u969C\u5BB3\u60C5\u5831\u3092\u78BA\u8A8D\u3059\u308B",login:"\u30ED\u30B0\u30A4\u30F3",masterUserLoginUnsupported:"\u304B\u3093\u305F\u3093\u30ED\u30B0\u30A4\u30F3\u306E\u30DE\u30B9\u30BF\u30FC\u30E6\u30FC\u30B6\u3067\u306F\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",invalidCredentials:"\u5B66\u6821ID\u3001\u30E6\u30FC\u30B6\u30FCID\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u7D44\u307F\u5408\u308F\u305B\u304C\u6B63\u3057\u304F\u3042\u308A\u307E\u305B\u3093\u3002",invalidIPAddress:"\u63A5\u7D9A\u5143\u306EIP\u30A2\u30C9\u30EC\u30B9\u304C\u5236\u9650\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",accountLocked:"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u5B66\u6821\u306E\u7BA1\u7406\u8005\u306B\u3054\u78BA\u8A8D\u304F\u3060\u3055\u3044\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u30E6\u30FC\u30B6\u306F\u30A2\u30D7\u30EA\u306B\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",forbiddenIsSSOUser:"Google\u30A2\u30AB\u30A6\u30F3\u30C8\u9023\u643A\u3092\u3057\u3066\u3044\u308B\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",couldntLogIn:"\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",endpoint:"\u63A5\u7D9A\u5148",schoolIDLabel:"\u5B66\u6821",schoolIDPlaceholder:"\u5B66\u6821ID",schoolIDTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3001- (\u30CF\u30A4\u30D5\u30F3)\u3001_ (\u30A2\u30F3\u30C0\u30FC\u30D0\u30FC)\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",userIDLabel:"\u30E6\u30FC\u30B6\u30FC",userIDPlaceholder:"\u30E6\u30FC\u30B6\u30FCID",userIDTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",passwordPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordTitle:"\u534A\u89D2\u82F1\u6570\u5B57\u3068\u8A18\u53F7\u3067\u5165\u529B\u3057\u3066\u4E0B\u3055\u3044\u3002",forgotPasswordLinkText:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u308F\u304B\u3089\u306A\u3044\u5834\u5408",forgotPasswordPageUrl:"https://help.loilonote.app/--5cef979a6da3ae0017645681",adminSignInLinkText:"\u7BA1\u7406\u8005\u30ED\u30B0\u30A4\u30F3",recommendUpdateTitle:"\u30D6\u30E9\u30A6\u30B6\u3092\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",recommendUpdateMsg:"\u6B63\u5E38\u306B\u52D5\u4F5C\u3057\u306A\u3044\u3053\u3068\u304C\u3042\u308A\u307E\u3059",loginContinueBtnText:"\u4F7F\u7528\u3092\u7D9A\u3051\u308B",recommendNativeAppTitle:"\u30A2\u30D7\u30EA\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",recommendNativeAppMsg:"\u3054\u4F7F\u7528\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u6A5F\u80FD\u304C\u5236\u9650\u3055\u308C\u307E\u3059\u3001\u5168\u3066\u306E\u6A5F\u80FD\u3092\u4F7F\u7528\u3059\u308B\u306B\u306F\u30A2\u30D7\u30EA\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",unsupportedBrowserTitle:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093",unsupportedBrowserMsg:"\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306EGoogle Chrome\u3092\u3054\u5229\u7528\u304F\u3060\u3055\u3044",needBrowserUpdateMsg:"\u30D6\u30E9\u30A6\u30B6\u3092\u6700\u65B0\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",unknownBrowser:"\u4E0D\u660E\u306A\u30D6\u30E9\u30A6\u30B6",yourBrowser:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6",supportedVersionsLabel:"\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B\u30D6\u30E9\u30A6\u30B6\u306E\u30D0\u30FC\u30B8\u30E7\u30F3",otherIOSBrowsers:"\u305D\u306E\u4ED6iOS\u306E\u30D6\u30E9\u30A6\u30B6\u30FC: iOS 13\u4EE5\u4E0A",signUpPageUrl:`${Zc}/users/sign_up?lang=ja`,iosAppStorePageUrl:"https://apps.apple.com/jp/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_ja.svg",installBrowser:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B",getApp:"\u30A2\u30D7\u30EA\u3092\u5165\u624B\u3059\u308B",chromeDownloadPageUrl:"https://www.google.com/intl/ja/chrome/",appStatusPageUrl:"https://status.loilonote.app/ja",couldntEncodeDrawnData:"\u624B\u66F8\u304D\u30C7\u30FC\u30BF\u306E\u30A8\u30F3\u30B3\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F",accessNotPermitted:"\u30A2\u30AF\u30BB\u30B9\u304C\u8A31\u53EF\u3055\u308C\u3066\u3044\u307E\u305B\u3093",giveClipboardAccess:"\u30DA\u30FC\u30B9\u30C8\u6A5F\u80FD\u3092\u3054\u5229\u7528\u3044\u305F\u3060\u304F\u306B\u306F\u3001\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u8A31\u53EF\u304C\u5FC5\u8981\u3067\u3059\u3002",couldntLoadFontFileMsg:"\u5FC5\u8981\u306A\u30D5\u30A9\u30F3\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u8AAD\u307F\u8FBC\u307F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noMemoryErrorTitle:"\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u307E\u3059",noMemoryErrorMsg:"\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u51E6\u7406\u3092\u5B8C\u4E86\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A2\u30D7\u30EA\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntChangeTool:"\u30C4\u30FC\u30EB\u306E\u5207\u308A\u66FF\u3048\u306B\u5931\u6557\u3057\u307E\u3057\u305F",couldntFetchData:"\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSetupPdfWorker:"PDF\u30EF\u30FC\u30AB\u30FC\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F",couldntDeleteAsOtherInCharge:`\u3053\u306E\u6388\u696D\u306F\u4ED6\u306E\u5148\u751F\u304C\u4F7F\u7528\u3057\u3066\u3044\u308B\u305F\u3081\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u6388\u696D\u306E\u62C5\u5F53\u304B\u3089\u5916\u308C\u307E\u3059\u304B\uFF1F`,relatedSubjectsMsg:"\u203B\u3053\u306E\u6388\u696D\u306E\u62C5\u5F53\u304B\u3089\u5916\u308C\u308B\u5834\u5408\u3001\u8CC7\u6599\u7BB1\u3092\u5171\u6709\u3057\u3066\u3044\u308B\u4E0B\u8A18\u306E\u6388\u696D\u306E\u62C5\u5F53\u3082\u5916\u308C\u307E\u3059",stopBeginInCharge:"\u62C5\u5F53\u304B\u3089\u5916\u308C\u308B",fileTooBigTitle:"\u3068\u3066\u3082\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3067\u3059",fileTooBigMessage:"1GB\u3092\u8D85\u3048\u308B\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",exceedVideoQuality:`\u5927\u5BB9\u91CF\u306E\u52D5\u753B\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059\u3002
\u753B\u9762\u914D\u4FE1\u6642\u306B\u30B9\u30E0\u30FC\u30BA\u306A\u8996\u8074\u304C\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u307E\u307E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3092\u7D9A\u3051\u307E\u3059\u304B\uFF1F`,confirmDeleteTarget:"\u300C%1$s\u300D\u3092\u524A\u9664\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",signInWithXXX:"%1$s\u3067\u30ED\u30B0\u30A4\u30F3",confirmDisplayAnswers:"\u56DE\u7B54\u3092\u8868\u793A\u3057\u307E\u3059\u304B\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u30AB\u30FC\u30C9\u306E\u66F8\u304D\u51FA\u3057\u306B\u5931\u6557\u3057\u307E\u3057\u305F",pdf:"PDF",exportingCardAsPdf:"\u30AB\u30FC\u30C9\u3092PDF\u306B\u66F8\u304D\u51FA\u3057\u3066\u3044\u307E\u3059...",open:"\u958B\u304F",cache:"\u30AD\u30E3\u30C3\u30B7\u30E5",submittersAnswer:"%1$s\u306E\u7B54\u3048",previousSomeonesAnswer:"\u524D\u306E\u4EBA\u306E\u7B54\u3048",nextSomeonesAnswer:"\u6B21\u306E\u4EBA\u306E\u7B54\u3048",newerDataExistsOnServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u65B0\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u304C\u5B58\u5728\u3057\u307E\u3059",qrCodePreviewDialogTitle:"QR\u30B3\u30FC\u30C9\u3092\u691C\u51FA\u3057\u307E\u3057\u305F",createCard:"\u30AB\u30FC\u30C9\u4F5C\u6210",updateCard:"\u30AB\u30FC\u30C9\u66F4\u65B0",webCard:"Web\u30AB\u30FC\u30C9",createWebCard:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u308B",createTextCard:"\u30C6\u30AD\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u4F5C\u6210",creatingWebCard:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u4E2D...",cannotCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",failedCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u305F\u3044\u30CE\u30FC\u30C8\u3092\u958B\u3044\u305F\u5F8C\u306B\u3001\u3082\u3046\u4E00\u5EA6\u62E1\u5F35\u6A5F\u80FD\u304B\u3089\u30AB\u30FC\u30C9\u4F5C\u6210\u3092\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002",failedCreateWebCardFromExtensionTitle:"\u30CE\u30FC\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044",qrCodeScannerPrepError:"QR\u30B3\u30FC\u30C9\u8AAD\u307F\u53D6\u308A\u6A5F\u80FD\u306E\u6E96\u5099\u304C\u51FA\u6765\u307E\u305B\u3093\u3067\u3057\u305F",textCardPlaceholderImgPath:"/svg/text_ja_100x75_margin.svg",qrModeGuidance:"QR\u30B3\u30FC\u30C9\u3092\u67A0\u5185\u306B\u5165\u308C\u3066\u304F\u3060\u3055\u3044",selectAnswers:"\u56DE\u7B54\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",selectAnswersCompare:"\u6BD4\u8F03\u3059\u308B\u56DE\u7B54\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",selectNoteForAddingMaterials:"\u3069\u306E\u30CE\u30FC\u30C8\u306B\u8CC7\u6599\u3092\u8FFD\u52A0\u3057\u307E\u3059\u304B\uFF1F",videoRecordingTimeLimitReached:"\u9332\u753B\u6642\u9593\u306E\u9650\u754C\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u9332\u753B\u3092\u505C\u6B62\u3057\u307E\u3059\u3002",creatingAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u3066\u3044\u307E\u3059...",createdAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F",failedCreateAttendanceCard:"\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u4F5C\u6210\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",attendance:"\u51FA\u6B20",attendanceReport:"\u51FA\u6B20\u9023\u7D61",attendanceCardCreator:"\u4F5C\u6210\u8005",attendanceCardEditAndResult:"\u7DE8\u96C6\u30FB\u96C6\u8A08",preparingAttendance:"\u51FA\u6B20\u9023\u7D61\u3092\u6E96\u5099\u3057\u3066\u3044\u307E\u3059",clickHereForHelp:"\u4F7F\u3044\u65B9\u306F\u3053\u3061\u3089",helpPageLinkForQuizCardTest:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForQuizCardSurvey:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForAttendanceCardTeacher:"https://help.loilonote.app/--5f8567143f41ab0022fa9651",helpPageLinkForAttendanceCardStudent:"https://help.loilonote.app/--60c18ef576a1050044286d87",loginPageTitle:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u30ED\u30B0\u30A4\u30F3",loginPageDesc:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D\u3002\u697D\u3057\u3044\u6388\u696D\u306B\u53C2\u52A0\u3057\u3088\u3046\uFF01",penType:"\u30DA\u30F3\u306E\u7A2E\u985E",penColor:"\u30DA\u30F3\u306E\u8272",highlighterColor:"\u86CD\u5149\u30DA\u30F3\u306E\u8272",clearAll:"\u5168\u6D88\u3057",penThickness:"\u7DDA\u306E\u592A\u3055",eraserSize:"\u6D88\u3057\u30B4\u30E0\u306E\u592A\u3055",myFolder:"\u30DE\u30A4\u30D5\u30A9\u30EB\u30C0",schoolWideFolder:"\u5B66\u5185",districtShared:"%1$s\u5171\u6709",schoolShared:"\u5B66\u5185\u5171\u6709",classShared:"\u6388\u696D\u5185\u5171\u6709",teachersOnlyFolder:"\u5148\u751F\u306E\u307F",classFolder:"%1$s \u5C02\u7528",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u9806",sortUpdateDateOrderForMaterialBox:"\u66F4\u65B0\u65E5\u9806",sortCreateDateOrder:"\u4F5C\u6210\u65E5\u9806",materialNameOrder:"\u540D\u524D\u9806",materialFileUpdateDateFolderNameOrder:"\u30D5\u30A9\u30EB\u30C0\u540D\u9806",couldntFetchSharedNoteMembers:"\u30E1\u30F3\u30D0\u30FC\u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",manageSharedNoteMember:"\u30E1\u30F3\u30D0\u30FC\u306E\u7BA1\u7406",chooseNoteToManageMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u7BA1\u7406\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToImport:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",pushTokenRegistration:"\u901A\u77E5\u30C8\u30FC\u30AF\u30F3\u306E\u767B\u9332",registered:"\u767B\u9332\u6E08\u307F",unregistered:"\u672A\u767B\u9332",schoolLoiloTVUrl:"https://school.loilo.tv/jp/web.html",schoolLoiloTVUrlWithExtension:"https://school.loilo.tv/jp/web-ext.html",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3059\u308B",confirmMarkAllSubmitsAsRead:"\u65B0\u3057\u3044\u63D0\u51FA\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",markedAllSubmitsAsRead:"\u65B0\u3057\u3044\u63D0\u51FA\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3057\u305F",confirmMarkAllRevealAnswersAsRead:"\u65B0\u3057\u3044\u56DE\u7B54\u5171\u6709\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",markedAllRevealAnswersAsRead:"\u65B0\u3057\u3044\u56DE\u7B54\u5171\u6709\u3092\u3059\u3079\u3066\u65E2\u8AAD\u306B\u3057\u307E\u3057\u305F",failedToMarkAllAsRead:"\u65E2\u8AAD\u306B\u5931\u6557\u3057\u307E\u3057\u305F",xIsDeleted:"%1$s\u306F\u524A\u9664\u3055\u308C\u3066\u3044\u307E\u3059",copied:"\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",copiedToClipboard:"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",failedToCopyCards:"\u30AB\u30FC\u30C9\u306E\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F",tooManyCards:"\u30AB\u30FC\u30C9\u306E\u679A\u6570\u304C\u591A\u3059\u304E\u307E\u3059",enableSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u3092\u4F5C\u6210\u3059\u308B(\u5148\u751F\u306E\u307F)",selectSchool:"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u5B66\u6821\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",showAnnotation:"\u6DFB\u524A\u3092\u8868\u793A",hideAnnotation:"\u6DFB\u524A\u3092\u975E\u8868\u793A",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u7DE0\u5207",submissionBoxDeletedOrNotExisted:"\u63D0\u51FA\u7BB1\u306F\u524A\u9664\u3055\u308C\u305F\u304B\u3001\u5B58\u5728\u3057\u3066\u3044\u307E\u305B\u3093",getToWork:"\u4ECA\u3059\u3050\u53D6\u308A\u7D44\u3080\uFF01",chooseNoteToWorkIn:"\u3069\u306E\u30CE\u30FC\u30C8\u3067\u8AB2\u984C\u306B\u53D6\u308A\u7D44\u307F\u307E\u3059\u304B\uFF1F",newTaskCreated:"\u65B0\u3057\u3044\u8AB2\u984C\u304C\u3042\u308A\u307E\u3059",standardNote:"\u901A\u5E38\u30CE\u30FC\u30C8",sharedNote:"\u5171\u6709\u30CE\u30FC\u30C8",couldntEditMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u7DE8\u96C6\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntAdd:"%1$d\u4EBA\u4E2D%2$d\u4EBA\u3092\u8FFD\u52A0\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntDel:"%1$d\u4EBA\u4E2D%2$d\u4EBA\u3092\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntEditMemberWithCount:"%1$d\u4EBA\u4E2D%2$d\u4EBA\u3092\u7DE8\u96C6\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",removedFromSharedNoteMembers:"\u5171\u6709\u30CE\u30FC\u30C8\u306E\u30E1\u30F3\u30D0\u30FC\u304B\u3089\u5916\u308C\u307E\u3057\u305F",couldntGetDeviceInfo:"\u30C7\u30D0\u30A4\u30B9\u60C5\u5831\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",changePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u5909\u66F4",submitPassword:"\u5909\u66F4\u3059\u308B",currentPasswordIncorrect:"\u73FE\u5728\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059",currentPassword:"\u73FE\u5728\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",newPassword:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordConfirm:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\uFF08\u78BA\u8A8D\uFF09",couldntChangePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",passwordUpdated:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u5909\u66F4\u3055\u308C\u307E\u3057\u305F",hiUser:"%1$s\u3055\u3093",setNewPassword:"\u6B21\u56DE\u304B\u3089\u306E\u30ED\u30B0\u30A4\u30F3\u306B\u4F7F\u7528\u3059\u308B\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044",welcomeToLns:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D",connectionStatus:"\u63A5\u7D9A\u72B6\u6CC1",connectedToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u6E08\u307F",couldntConnectToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u672A\u63A5\u7D9A\u306E\u305F\u3081\u4E00\u90E8\u306E\u6A5F\u80FD\u304C\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093",reconnectingToPushServer:"\u901A\u77E5\u30B5\u30FC\u30D0\u30FC\u3068\u518D\u63A5\u7D9A\u4E2D...",pleaseConnectToInternet:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u306B\u63A5\u7D9A\u3057\u3066\u304F\u3060\u3055\u3044",pleaseConnectToInternetDesc:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u63A5\u7D9A\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u63A5\u7D9A\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",default:"\u65E2\u5B9A",confirmCloseNoteForOtherSubmissionBox:`\u4ED6\u306E\u6388\u696D\u306E\u63D0\u51FA\u7BB1\u3092\u958B\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u9589\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherTimeline:`\u4ED6\u306E\u6388\u696D\u306E\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u3092\u958B\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u9589\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherCourse:`\u4ED6\u306E\u6388\u696D\u306E\u30CE\u30FC\u30C8\u3092\u958B\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u73FE\u5728\u306E\u30CE\u30FC\u30C8\u306F\u9589\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,selectItemsToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",retry:"\u518D\u8A66\u884C\u3059\u308B",exceedNumberOfExportableItemsMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3067\u304D\u308B\u30D5\u30A1\u30A4\u30EB\u30FB\u30D5\u30A9\u30EB\u30C0\u306E\u500B\u6570\u306E\u4E0A\u9650\u3092\u8D85\u3048\u305F\u305F\u3081\u4E2D\u6B62\u3057\u307E\u3057\u305F",exceedNumberOfExportableHierarchyMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3067\u304D\u308B\u30D5\u30A9\u30EB\u30C0\u306E\u968E\u5C64\u6570\u306E\u4E0A\u9650\u3092\u8D85\u3048\u305F\u305F\u3081\u4E2D\u6B62\u3057\u307E\u3057\u305F",analyzingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059",exportingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u66F8\u304D\u51FA\u3057\u3066\u3044\u307E\u3059",couldntExportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",imported:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",underMaintenace:"\u305F\u3060\u3044\u307E\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E2D\u3067\u3059",endSchedule:"\u7D42\u4E86\u4E88\u5B9A",maintenanceNotification:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E88\u5B9A\u306E\u304A\u77E5\u3089\u305B",maintenanceScheduled:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E88\u5B9A\u304C\u3042\u308A\u307E\u3059",watchTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u898B\u308B",seeDetail:"\u8A73\u7D30\u306F\u3053\u3061\u3089",closeTutorialTitle:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u7D42\u4E86\u3057\u307E\u3059\u304B\uFF1F",closeTutorialMsg:"\u3053\u306E\u52D5\u753B\u306F\u3044\u3064\u3067\u3082\u898B\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059",closeTutorialCheckLabel:"\u6B21\u56DE\u304B\u3089\u8868\u793A\u3057\u306A\u3044",understood:"\u308F\u304B\u3063\u305F\uFF01",failedPlayTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u306E\u518D\u751F\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",importingNotes:"\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",exportingNotes:"\u30CE\u30FC\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",ipAddressRestricted:"\u3054\u5229\u7528\u306EIP\u30A2\u30C9\u30EC\u30B9\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F\u7981\u6B62\u3055\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToJoin:"\u53C2\u52A0\u3059\u308B\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",classHasEnded:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u9589\u8B1B\u3057\u307E\u3057\u305F",onlyStudentsAllowedToJoin:"\u751F\u5F92\u4EE5\u5916\u306F\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",graduatesNotAllowedToJoinClass:"\u5352\u696D\u3057\u305F\u5B66\u6821\u306E\u30AF\u30E9\u30B9\u306B\u306F\u53C2\u52A0\u3067\u304D\u307E\u305B\u3093",ssoLogin422Msg:"\u5B66\u6821\u5185\u306B\u540C\u3058%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u91CD\u8907\u3057\u3066\u767B\u9332\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3057\u305F\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u4EE5\u5916\u306E\u9023\u643A\u3092\u89E3\u9664\u3057\u3066\u91CD\u8907\u3092\u89E3\u6D88\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ssoLogin422Url:"https://help.loilonote.app/--608bbb836138540022b80af3",ssoLogin404Msg:"\u3053\u306E%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u767B\u9332\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3054\u5229\u7528\u3044\u305F\u3060\u3051\u307E\u305B\u3093\u3002\u7BA1\u7406\u8005\u306B\u304A\u554F\u3044\u5408\u308F\u305B\u304F\u3060\u3055\u3044\u3002",webCardExtensionLeadingText:`\u30D6\u30E9\u30A6\u30B6\u306E\u62E1\u5F35\u6A5F\u80FD\u3092\u4F7F\u3046\u3068
Web\u30AB\u30FC\u30C9\u3092\u304B\u3093\u305F\u3093\u306B\u3064\u304F\u308C\u307E\u3059`,learnMore:"\u8A73\u3057\u304F\u306F\u3053\u3061\u3089",helpWebCardExtensionUrl:"https://help.loilonote.app/--605840aeedaca400222dbd58",helpWebCardExtensionUrlForEdge:"https://help.loilonote.app/--63072f97da08d5001de242fa",importNotes:"%1$d\u500B\u306E\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059",createCourseAfterUserGroupCreation:"\u7D9A\u3051\u3066\u6388\u696D\u3092\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044",createCourseAfterUserGroupCreationDesc:"\u30AF\u30E9\u30B9\u306E\u4E2D\u306B\u3001\u56FD\u8A9E\u3001\u6570\u5B66\u3001\u82F1\u8A9E\u306A\u3069\u3001\u79D1\u76EE\u3054\u3068\u306B\u6388\u696D\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002",insufficientPermission:"\u5B9F\u884C\u3059\u308B\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",accessDenied:"\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",actionCannotBeCarriedOutOnClosedCourse:"\u9589\u8B1B\u3057\u305F\u6388\u696D\u3067\u306F\u5B9F\u884C\u3067\u304D\u307E\u305B\u3093",couldNotGetSubmissionAnswers:"\u56DE\u7B54\u304C\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folderWithThisNameAlreadyExists:"\u540C\u3058\u540D\u524D\u306E\u30D5\u30A9\u30EB\u30C0\u304C\u5B58\u5728\u3057\u307E\u3059",importDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",couldntImportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A4\u30F3\u30DD\u30FC\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F",folderForImportedItemsWillBeCreated:"\u30A4\u30F3\u30DD\u30FC\u30C8\u5148\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u4F5C\u6210\u3057\u307E\u3059",administrator:"\u7BA1\u7406\u8005",owner:"\u30AA\u30FC\u30CA\u30FC",reuse:"\u518D\u5229\u7528",reuseThisTestCard:"\u3053\u306E\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u518D\u5229\u7528",reuseThisAttendanceCard:"\u3053\u306E\u51FA\u6B20\u30AB\u30FC\u30C9\u3092\u518D\u5229\u7528",webPageSharedText:"Web\u30DA\u30FC\u30B8\u304C\u5171\u6709\u3055\u308C\u307E\u3057\u305F",webPageSharedTextBy:"%1$s \u3055\u3093\u304B\u3089\u3001Web\u30DA\u30FC\u30B8\u304C\u5171\u6709\u3055\u308C\u307E\u3057\u305F",openWebPage:"Web\u30DA\u30FC\u30B8\u3092\u958B\u304F",changeLayout:"\u30EC\u30A4\u30A2\u30A6\u30C8\u5909\u66F4",changeLayoutDescription:"\u63D0\u51FA\u7269\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u5909\u66F4\u3067\u304D\u307E\u3059",resetLayout:"\u6700\u521D\u306E\u8A2D\u5B9A\u306B\u623B\u3059",pleaseWaitForMaintenanceEnd:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u7D42\u4E86\u307E\u3067\u3057\u3070\u3089\u304F\u304A\u5F85\u3061\u4E0B\u3055\u3044",uploadingXXX:"%1$s\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",experimentalFeatures:"\u8A66\u9A13\u4E2D\u306E\u6A5F\u80FD",folderCannotBeUploaded:"\u30D5\u30A9\u30EB\u30C0\u30FC\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",filesNoExtCannotBeUploaded:"\u62E1\u5F35\u5B50\u306E\u306A\u3044\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",fileWithInvalidNameContained:"\u4E0D\u6B63\u306A\u540D\u524D\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToDocumentGroup:"\u30D5\u30A9\u30EB\u30C0\u3078\u306E\u66F8\u304D\u8FBC\u307F\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",newSharedNote:"\u65B0\u898F\u5171\u6709\u30CE\u30FC\u30C8",convertToSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u306B\u3059\u308B",chooseNoteToShare:"\u5171\u6709\u3059\u308B\u30CE\u30FC\u30C8\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",chooseUsersToBeShared:"\u5171\u6709\u3059\u308B\u30E6\u30FC\u30B6\u30FC\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",shareXXX:" %1$s\u3092\u5171\u6709",confirmShareNote:"\u5171\u6709\u3057\u305F\u30CE\u30FC\u30C8\u306F\u901A\u5E38\u306E\u30CE\u30FC\u30C8\u306B\u306F\u623B\u305B\u307E\u305B\u3093\u3002\u5171\u6709\u30CE\u30FC\u30C8\u306B\u5BFE\u5FDC\u3057\u3066\u3044\u306A\u3044\u30A2\u30D7\u30EA\u3067\u306F\u4E00\u89A7\u306B\u8868\u793A\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",failedGoogleLoginHelpText:"Google\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u306A\u3044\u5834\u5408\u306F\u3053\u3061\u3089",failedGoogleLoginHelpLink:"https://help.loilonote.app/--613570bde97042001dfbd713",teacherNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u62C5\u5F53\u3057\u3066\u3044\u305F\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",studentNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u53C2\u52A0\u3057\u3066\u3044\u305F\u6388\u696D\u306F\u3042\u308A\u307E\u305B\u3093",pasteTips:"\u30C6\u30AD\u30B9\u30C8\u3084Web\u4E0A\u3067\u30B3\u30D4\u30FC\u3057\u305F\u753B\u50CF\u3092\u30DA\u30FC\u30B9\u30C8\u3067\u304D\u307E\u3059",noMembersInGroup:"\u30AF\u30E9\u30B9\u306B\u751F\u5F92\u304C\u53C2\u52A0\u3057\u3066\u3044\u307E\u305B\u3093",showCodeToInviteStudents:"\u30AF\u30E9\u30B9\u53C2\u52A0\u30B3\u30FC\u30C9\u3092\u8868\u793A\u3057\u3066\u3001\u751F\u5F92\u306B\u5165\u529B\u3057\u3066\u3082\u3089\u3063\u3066\u304F\u3060\u3055\u3044",members:"\u4EBA",saved:"\u4FDD\u5B58\u6E08\u307F",displayByStudent:"\u751F\u5F92\u3054\u3068\u306B\u8868\u793A\u3059\u308B",collectCard:"\u30AB\u30FC\u30C9\u3092\u96C6\u3081\u308B",collectedCard:"\u96C6\u3081\u305F\u30AB\u30FC\u30C9",collectCardDialogTitle:"\u30AB\u30FC\u30C9\u3092\u4E2D\u5FC3\u306B\u96C6\u3081\u307E\u3059\u304B\uFF1F",collect:"\u96C6\u3081\u308B",confirmCollectCardMessage:"\u3068\u3066\u3082\u5927\u304D\u306A\u30AB\u30FC\u30C9\u3084\u9060\u304F\u96E2\u308C\u305F\u4F4D\u7F6E\u306B\u30AB\u30FC\u30C9\u304C\u3042\u308B\u3088\u3046\u3067\u3059\u3002%1$d\u679A\u306E\u30AB\u30FC\u30C9\u3092\u4E2D\u5FC3\u306B\u96C6\u3081\u3066\u30CE\u30FC\u30C8\u3092\u76F4\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",completeCollectCardMessage:"\u5927\u304D\u306A\u30AB\u30FC\u30C9\u3084\u96E2\u308C\u305F\u4F4D\u7F6E\u306B\u3042\u308B\u30AB\u30FC\u30C9\u306E\u53CE\u96C6\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",sentToNote:"\u300C%1$s\u300D\u306B\u9001\u4FE1\u3057\u307E\u3057\u305F",myNote:"\u81EA\u5206\u306E\u30CE\u30FC\u30C8",searchNote:"\u30CE\u30FC\u30C8\u3092\u691C\u7D22\u3059\u308B",searchMaterial:"\u8CC7\u6599\u7BB1\u3092\u691C\u7D22\u3059\u308B",enableSearch:"\u691C\u7D22\u3092\u6709\u52B9\u306B\u3059\u308B",noMatchesFound:"\u4E00\u81F4\u3059\u308B\u691C\u7D22\u7D50\u679C\u304C\u3042\u308A\u307E\u305B\u3093",endSearch:"\u691C\u7D22\u7D42\u4E86",searchResult:"\u691C\u7D22\u7D50\u679C",textPointerIconPath:"/svg/text_circle.svg",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadAndUploadLater:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3066\u5F8C\u3067\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u76F4\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",reloading:"\u518D\u8AAD\u307F\u8FBC\u307F\u4E2D...",graduateMsg:"\u3054\u5352\u696D\u304A\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307E\u3059\u3002\u5728\u5B66\u4E2D\u306E\u6388\u696D\u306F\u300C\u9589\u8B1B\u3057\u305F\u6388\u696D\u300D\u304B\u3089\u95B2\u89A7\u3067\u304D\u307E\u3059\u3002",sharedNoteProtocolVersionErrorMsg:"\u304A\u4F7F\u3044\u306E\u30A2\u30D7\u30EA\u306F\u5171\u6709\u30CE\u30FC\u30C8\u306E\u4E00\u90E8\u6A5F\u80FD\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u3066\u30A2\u30D7\u30EA\u3092\u66F4\u65B0\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldNotConnectSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u306B\u63A5\u7D9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",failedToSaveDataToServer:`\u30B5\u30FC\u30D0\u30FC\u3078\u306E\u30C7\u30FC\u30BF\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002
\u5F37\u5236\u7684\u306B\u9589\u3058\u307E\u3059\u304B\uFF1F`,recordingSettingTitle:"\u9332\u97F3\u30FB\u9332\u753B",enableAudioNoiseReduction:"\u96D1\u97F3\u3092\u4F4E\u6E1B\u3059\u308B",loadingFailed:"\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F",decodingFailed:"\u30C7\u30B3\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",browserCannotReadTheVideo:"\u30D6\u30E9\u30A6\u30B6\u304C\u8AAD\u307F\u8FBC\u3081\u306A\u3044\u5F62\u5F0F\u306E\u52D5\u753B\u3067\u3059",browserCannotReadTheAudio:"\u30D6\u30E9\u30A6\u30B6\u304C\u8AAD\u307F\u8FBC\u3081\u306A\u3044\u5F62\u5F0F\u306E\u97F3\u58F0\u3067\u3059",networkError:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A8\u30E9\u30FC",loadingInterrupted:"\u8AAD\u307F\u8FBC\u307F\u304C\u4E2D\u65AD\u3055\u308C\u307E\u3057\u305F",couldntEditNote:"\u30CE\u30FC\u30C8\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noteIsReadonly:"\u3053\u306E\u30CE\u30FC\u30C8\u306F\u8AAD\u307F\u53D6\u308A\u5C02\u7528\u3067\u3059",notConnectedToSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u306B\u63A5\u7D9A\u3057\u3066\u3044\u307E\u305B\u3093",materialBoxAccessibleMessageForTeacher:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306F\u751F\u5F92\u3082\u95B2\u89A7\u3067\u304D\u307E\u3059\u3002",trashBox:"\u3054\u307F\u7BB1",restore:"\u5FA9\u5143\u3059\u308B",selectItemsToRestore:"\u5FA9\u5143\u3059\u308B\u3082\u306E\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",restoringDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u5FA9\u5143\u3057\u3066\u3044\u307E\u3059...",invalidDocumentRestoreDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u5FA9\u5143\u5148\u304C\u4E0D\u6B63\u3067\u3059",couldntRestoreDocument:"\u5FA9\u5143\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",materialTrashBoxHeaderMessage:"\u3054\u307F\u7BB1\u306B\u5165\u3063\u3066\u304B\u308930\u65E5\u304C\u7D4C\u904E\u3059\u308B\u3068\u5B8C\u5168\u306B\u524A\u9664\u3055\u308C\u307E\u3059",notShared:"\u5171\u6709\u3057\u306A\u3044",sharedInManageable:"\u7BA1\u7406",sharedInWritable:"\u66F8\u304D\u8FBC\u307F",sharedInViewOnly:"\u95B2\u89A7\u306E\u307F",sharedNoteMembers:"\u5171\u6709\u30E1\u30F3\u30D0\u30FC",settings:"\u8A2D\u5B9A",sharedNoteSettings:"\u5171\u6709\u8A2D\u5B9A",couldNotChangeSharedNoteSettings:"\u5171\u6709\u8A2D\u5B9A\u3092\u5909\u66F4\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",change:"\u5909\u66F4",noteName:"\u540D\u524D",sharedRange:"\u5171\u6709\u3059\u308B\u7BC4\u56F2",allTeachers:"\u5148\u751F\u5168\u54E1",add:"\u8FFD\u52A0",execute:"\u5B9F\u884C",javaScriptRequired:"JavaScript\u304C\u7121\u52B9\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u3092\u5229\u7528\u3059\u308B\u305F\u3081\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306EJavaScript\u3092\u6709\u52B9\u306B\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002",selectQuizSharingMode:"\u914D\u4FE1\u30E2\u30FC\u30C9\u3092\u9078\u3093\u3067\u304F\u3060\u3055\u3044",quizSharingModeNormal:"\u901A\u5E38\u30E2\u30FC\u30C9",quizSharingModeGame:"\u30B2\u30FC\u30E0\u30E2\u30FC\u30C9(\u03B2)",reconnectingToSharedNote:"\u5171\u6709\u30CE\u30FC\u30C8\u3068\u518D\u63A5\u7D9A\u4E2D..."};var uK={back:"\u3082\u3069\u308B",close:"\u3068\u3058\u308B",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",okay:"OK",reload:"\u3082\u3046\u3044\u3061\u3069\u3088\u307F\u3053\u3080",logout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3059\u308B",selfStudy:"\u3058\u3057\u3085\u304C\u304F\u3057\u3085\u3046",loiLoNews:"\u30ED\u30A4\u30ED\u304B\u3089\u306E\u304A\u3057\u3089\u305B",lessonPlans:"\u3058\u3085\u304E\u3087\u3046\u3042\u3093",errorOccurred:"\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",unexpectedErrorOccurred:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",unknownError:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC",couldntDelete:"\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",closeThisScreen:"\u3053\u306E\u304C\u3081\u3093\u3092\u3068\u3058\u308B",useFormally:"\u3064\u304B\u3046",delete:"\u3051\u3059",move:"\u3044\u3069\u3046",copy:"\u30B3\u30D4\u30FC",duplicate:"\u3075\u304F\u305B\u3044",rename:"\u306A\u307E\u3048\u3092\u304B\u3048\u308B",teacher:"\u305B\u3093\u305B\u3044",student:"\u305B\u3044\u3068",expand:"\u304A\u304A\u304D\u304F",shrink:"\u3061\u3044\u3055\u304F",release:"\u3082\u3069\u3059",arrange:"\u305B\u3044\u308C\u3064",rotate:"\u307E\u308F\u3059",failedToRotate:"\u30AB\u30FC\u30C9\u3092\u307E\u308F\u3059\u306E\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",materialsStorage:"\u3057\u308A\u3087\u3046\u3070\u3053",submit:"\u3066\u3044\u3057\u3085\u3064",send:"\u304A\u304F\u308B",insertingPhoto:"\u3057\u3083\u3057\u3093\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertPhoto:"\u3057\u3083\u3057\u3093\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertPhoto:"\u3057\u3083\u3057\u3093\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3066\u3044\u307E\u3059...",didInsertVideo:"\u30D3\u30C7\u30AA\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertVideo:"\u30D3\u30C7\u30AA\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertFile:"\u30D5\u30A1\u30A4\u30EB\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",insertingMaterials:"\u3057\u308A\u3087\u3046\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3066\u3044\u307E\u3059...",didInsertMaterials:"\u3057\u308A\u3087\u3046\u304C\u30CE\u30FC\u30C8\u306B\u306F\u3044\u308A\u307E\u3057\u305F\uFF01",couldntInsertItemTitle:"%1$s\u3092\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",goBackToDesktop:"\u30CE\u30FC\u30C8\u306B\u3082\u3069\u308B",seeNextError:"\u3064\u304E\u306E\u30A8\u30E9\u30FC\u3092\u307F\u308B",status403AccessDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u305D\u3046\u3055\u306F\u3067\u304D\u307E\u305B\u3093",status404ItemNotFound:"\u306A\u3044\u304B\u3001\u3051\u3055\u308C\u3066\u3044\u307E\u3059",couldntGetCourses:"\u3058\u3085\u304E\u3087\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetCoursesAttributes:"\u3058\u3085\u304E\u3087\u3046\u306E\u3058\u3087\u3046\u307B\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPreviousYearsCourses:"\u306D\u3093\u3069\u3044\u3061\u3089\u3093\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetOtherTeachersCourses:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",willDeleteGroupFromSubject:"%1$s\u304B\u3089%2$s\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsMaterialsExist:"\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u3057\u308A\u3087\u3046\u3070\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",couldntDeleteAsNotesExist:"\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30CE\u30FC\u30C8\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",courseAccessDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u3092\u307F\u3089\u308C\u307E\u305B\u3093",courseDoesntExist:"\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteCourse:"\u3058\u3085\u304E\u3087\u3046\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetNote:"\u30CE\u30FC\u30C8\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntUploadNotes:"\u30CE\u30FC\u30C8\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",savingNoteWithOtherName:"\u30CE\u30FC\u30C8\u3092\u3061\u304C\u3046\u306A\u307E\u3048\u3067\u307B\u305E\u3093\u3057\u3066\u3044\u307E\u3059...",overwritingNote:"\u30CE\u30FC\u30C8\u3092\u3046\u308F\u304C\u304D\u307B\u305E\u3093\u3057\u3066\u3044\u307E\u3059...",couldntSaveNote:"\u30CE\u30FC\u30C8\u304C\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didBackupUnsavedChanges:"\u307F\u307B\u305E\u3093\u306E\u30CE\u30FC\u30C8\u306E\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3092\u307B\u305E\u3093\u3057\u307E\u3057\u305F\u3002\u3052\u3093\u3056\u3044\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3055\u308C\u305F\u30CE\u30FC\u30C8\u304C%1$d\u3053\u3042\u308A\u307E\u3059\u3002",closeNote:"\u30CE\u30FC\u30C8\u3092\u3068\u3058\u308B",couldntShareScreen:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",uploadingAsset:"\u30A2\u30BB\u30C3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",cardHasUnsavedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",cardHasUploadFailedAttachments:"\u30AB\u30FC\u30C9\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u306A\u304B\u3063\u305F\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",uploadingDocument:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",preparingScreenSharing:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3058\u3085\u3093\u3073\u3092\u3057\u3066\u3044\u307E\u3059...",preparingStudentPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u306E\u3058\u3085\u3093\u3073\u3092\u3057\u3066\u3044\u307E\u3059...",stoppingScreenSharing:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3092\u3068\u3081\u3066\u3044\u307E\u3059...",stoppingStudentPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u3092\u3057\u3085\u3046\u308A\u3087\u3046\u3057\u3066\u3044\u307E\u3059...",screenSharingErrorOccurred:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3057\u3087\u308A\u3067\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",lockingScreens:"\u305D\u3046\u3055\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingScreens:"\u305D\u3046\u3055\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u3044\u307E\u3059...",couldntChangeScreenLock:"\u305D\u3046\u3055\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",lockingStudentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u3092\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059...",unlockingStudentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u306E\u30ED\u30C3\u30AF\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u3044\u307E\u3059...",couldntChangeStudentSharingLock:"\u305B\u3044\u3068\u3069\u3046\u3057\u3067\u306E\u3064\u3046\u3057\u3093\u30ED\u30C3\u30AF\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",creatingNote:"\u300C%1$s\u300D\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",couldntCreateNote:"\u30CE\u30FC\u30C8\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",renamingNote:"\u300C%1$s\u300D\u306E\u306A\u307E\u3048\u3092\u300C%2$s\u300D\u306B\u304B\u3048\u3066\u3044\u307E\u3059...",couldntRenameNote:"\u30CE\u30FC\u30C8\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingNote:"\u300C%1$s\u300D\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteNote:"\u300C%1$s\u300D\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",openingNote:"\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u3066\u3044\u307E\u3059...",goBackToNoteList:"\u30CE\u30FC\u30C8\u3044\u3061\u3089\u3093\u306B\u3082\u3069\u308B",copyingNote:"\u30CE\u30FC\u30C8\u3092\u30B3\u30D4\u30FC\u3061\u3085\u3046...",couldntCopyNote:"\u30CE\u30FC\u30C8\u306E\u30B3\u30D4\u30FC\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",couldntCreateGroup:"\u30AF\u30E9\u30B9\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingGroup:"\u30AF\u30E9\u30B9\u300C%1$s\u300D\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",couldntDeleteAsUsersExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u305F\u30E6\u30FC\u30B6\u30FC\u304C\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupAlreadyDeleted:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u3051\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002",couldntDeleteArchivedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u30A2\u30FC\u30AB\u30A4\u30D6\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupUnavailable:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3052\u3093\u3056\u3044\u308A\u3088\u3046\u3067\u304D\u307E\u305B\u3093\u3002",couldntDeleteAsSubjectsExist:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002\u307E\u305A\u3001\u3058\u3085\u304E\u3087\u3046\u3044\u3061\u3089\u3093\u3067\u3058\u3085\u304E\u3087\u3046\u3092\u3051\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntDeleteClosedGroup:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3059\u3067\u306B\u3068\u3058\u3089\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3051\u305B\u307E\u305B\u3093\u3002",groupDeletionDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30AF\u30E9\u30B9\u3092\u3051\u305B\u307E\u305B\u3093\u3002",groupDoesntExist:"\u30AF\u30E9\u30B9\u304C\u306A\u3044\u3088\u3046\u3067\u3059\u3002",couldntDeleteGroup:"\u30AF\u30E9\u30B9\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",creatingSubjectForGroup:"\u3058\u3085\u304E\u3087\u3046\u300C%1$s\u300D\u3092\u30AF\u30E9\u30B9\u300C%2$s\u300D\u306B\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",couldntCreateSubject:"\u3058\u3085\u304E\u3087\u3046\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",joiningSubject:"%1$s\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059...",couldntJoinSubject:"\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",enterGroupCode:"\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",invalidGroupCode:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u306B\u307E\u3061\u304C\u3044\u304C\u3042\u308A\u307E\u3059",joiningGroup:"\u30AF\u30E9\u30B9\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059...",confirmGroupJoin:"%1$s\u306B\u3055\u3093\u304B\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendToAll:"\u305C\u3093\u3044\u3093\u306B\u304A\u304F\u308A\u307E\u3059\u304B\uFF1F",didJoinGroup:"%1$s\u306B\u3055\u3093\u304B\u3057\u307E\u3057\u305F\uFF01",invalidRequest:"\u305F\u3060\u3057\u304F\u306A\u3044\u30EA\u30AF\u30A8\u30B9\u30C8\u3067\u3059",alreadyJoinedGroup:"\u3059\u3067\u306B\u3055\u3093\u304B\u305A\u307F\u3067\u3059",groupNoLongerExists:"\u30AF\u30E9\u30B9\u304C\u306A\u3044\u304B\u3001\u3051\u3055\u308C\u305F\u3088\u3046\u3067\u3059",couldntJoinGroup:"\u30AF\u30E9\u30B9\u306B\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",duplicatedUserGroup:"\u3059\u3067\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u308B\u30AF\u30E9\u30B9\u3081\u3044\u3067\u3059",duplicatedSubjectError:"\u3059\u3067\u306B\u30AF\u30E9\u30B9\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u308B\u3058\u3085\u304E\u3087\u3046\u3081\u3044\u306E\u305F\u3081\u3001\u3064\u304F\u308C\u307E\u305B\u3093",updatingSubmission:"\u3066\u3044\u3057\u3085\u3064\u3092\u3053\u3046\u3057\u3093\u3057\u3066\u3044\u307E\u3059",couldntUpdateSubmission:"\u3066\u3044\u3057\u3085\u3064\u3092\u3053\u3046\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059..",couldntCreateTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u300C%1$s\u300D\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",requestContainsInvalidID:"\u3058\u3085\u304E\u3087\u3046ID\u307E\u305F\u306F\u3066\u3044\u3057\u3085\u3064\u3070\u3053ID\u304C\u3078\u3093\u3067\u3059",subjectOrTaskDoesntExist:"\u3058\u3085\u304E\u3087\u3046\u307E\u305F\u306F\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3042\u308A\u307E\u305B\u3093",couldntDeleteTask:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",describeTask:"\u3066\u3044\u3057\u3085\u3064\u306A\u3044\u3088\u3046\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",didSubmitCards:"\u3057\u308A\u3087\u3046\u3092\u3066\u3044\u3057\u3085\u3064\u3057\u307E\u3057\u305F\uFF01",couldntSubmitCards:"\u3066\u3044\u3057\u3085\u3064\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendCards:"\u3057\u308A\u3087\u3046\u3092\u304A\u304F\u308A\u307E\u3057\u305F\uFF01",couldntSendCards:"\u3057\u308A\u3087\u3046\u3092\u304A\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",checkServiceStatus:"\u30B5\u30FC\u30D0\u30FC\u306E\u304B\u3069\u3046\u3058\u3087\u3046\u304D\u3087\u3046\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u304F\u3060\u3055\u3044",couldntUploadDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",copyingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3057\u3066\u3044\u307E\u3059...",invalidDocumentCopyDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u30B3\u30D4\u30FC\u3055\u304D\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",documentCopyDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u305D\u3046\u3055\u3067\u304D\u307E\u305B\u3093",couldntCopyDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30B3\u30D4\u30FC\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",movingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3044\u3069\u3046\u3057\u3066\u3044\u307E\u3059...",invalidDocumentMoveDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u3001\u3044\u3069\u3046\u3055\u304D\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",documentMoveDenied:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u305D\u3046\u3055\u3067\u304D\u307E\u305B\u3093",couldntMoveDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3044\u3069\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSaveToMaterialsStorage:"\u3057\u308A\u3087\u3046\u3070\u3053\u306B\u307B\u305E\u3093\u3057\u307E\u3057\u305F\uFF01",invalidDocumentName:"\u30D5\u30A1\u30A4\u30EB\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",couldntSaveToMaterials:"\u30D5\u30A1\u30A4\u30EB\u3092\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",creatingFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",invalidFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",folderCreationDenied:"\u3042\u306A\u305F\u306F\u3053\u3053\u306B\u306F\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308C\u307E\u305B\u3093",folderNotFound:"\u30D5\u30A9\u30EB\u30C0\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",folderLocationNotFound:"\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308B\u3055\u304D\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",couldntCreateFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",folder:"\u30D5\u30A9\u30EB\u30C0",file:"\u30D5\u30A1\u30A4\u30EB",renamingItem:"%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3066\u3044\u307E\u3059...",itemNameInvalid:"%1$s\u306E\u306A\u307E\u3048\u304C\u3078\u3093\u3067\u3059",itemRenameDenied:"\u3042\u306A\u305F\u306F%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093",itemNotFound:"%1$s\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",couldntRenameItem:"%1$s\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",deletingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",fileOrFolderInvalid:"\u30D5\u30A1\u30A4\u30EB\u307E\u305F\u306F\u30D5\u30A9\u30EB\u30C0\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",fileOrFolderDeletionDenied:"\u3042\u305F\u306A\u305F\u306F\u3053\u308C\u3092\u3051\u3059\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",couldntDeleteDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",couldntSendBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",didSendBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3057\u305F\uFF01",sendingBackDocument:"\u3078\u3093\u304D\u3083\u304F\u3061\u3085\u3046...",sendingThumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u305D\u3046\u3057\u3093\u3057\u3066\u3044\u307E\u3059...",sendBackErrorOccurred:"\u3078\u3093\u304D\u3083\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",sendBackIncomplete:"%1$d\u3061\u3085\u3046%2$d\u3053\u306E\u3078\u3093\u304D\u3083\u304F\u3057\u3087\u308A\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u307E\u305B\u3093\u3067\u3057\u305F",didCompleteSendBack:"\u3078\u3093\u304D\u3083\u304F\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u307E\u3057\u305F\uFF01",noteListTitle:"\u30CE\u30FC\u30C8\u3044\u3061\u3089\u3093",courseListTitle:"\u3058\u3085\u304E\u3087\u3046\u3044\u3061\u3089\u3093",sessionExpiredTitle:"\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044",sessionExpiredMsg:"\u3072\u3089\u3044\u3066\u304A\u3051\u308B\u3058\u304B\u3093\u304C\u3059\u304E\u307E\u3057\u305F\u3002\u3064\u304B\u3044\u3064\u3065\u3051\u308B\u305F\u3081\u3001\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",badCsrfTokenTitle:"CSRF\u30C8\u30FC\u30AF\u30F3\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093",badCsrfTokenMsg:"\u30AF\u30ED\u30B9\u30B5\u30A4\u30C8\u30FB\u30EA\u30AF\u30A8\u30B9\u30C8\u30D5\u30A9\u30FC\u30B8\u30A7\u30EA\u306B\u3093\u3057\u3087\u3046\u3058\u3087\u3046\u307B\u3046\u304C\u305F\u3060\u3057\u304F\u306A\u3044\u305F\u3081\u3001\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u307E\u3059\u3002",timelineTitle:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",ttSheet:"\u30B7\u30FC\u30C8",ttVenn2:"\u30D9\u30F3\u305A",ttVenn3:"\u30D9\u30F3\u305A",ttYChart:"Y\u30C1\u30E3\u30FC\u30C8",ttXChart:"X\u30C1\u30E3\u30FC\u30C8",ttWChart:"W\u30C1\u30E3\u30FC\u30C8",ttButterfly:"\u30D0\u30BF\u30D5\u30E9\u30A4\u30C1\u30E3\u30FC\u30C8",ttPyramid:"\u30D4\u30E9\u30DF\u30C3\u30C9\u30C1\u30E3\u30FC\u30C8",ttPMI:"PMI/KWL",ttFishbone:"\u30D5\u30A3\u30C3\u30B7\u30E5\u30DC\u30FC\u30F3\u305A",ttPlotLeft:"\u30D7\u30ED\u30C3\u30C8\u305A(\u3072\u3060\u308A)",ttPlotRight:"\u30D7\u30ED\u30C3\u30C8\u305A(\u307F\u304E)",ttCandy:"\u30AD\u30E3\u30F3\u30C7\u30A3\u30C1\u30E3\u30FC\u30C8",ttWebbing:"\u30A6\u30A7\u30D3\u30F3\u30B0",ttRake:"\u304F\u307E\u3067\u30C1\u30E3\u30FC\u30C8",ttDataChart3:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8(3)",ttDataChart6:"\u30C7\u30FC\u30BF\u30C1\u30E3\u30FC\u30C8(6)",ttJellyfish:"\u304F\u3089\u3052\u30C1\u30E3\u30FC\u30C8",ttOneAxis:"\u3056\u3072\u3087\u3046\u3058\u304F",ttTwoAxes:"\u3056\u3072\u3087\u3046\u3058\u304F",ttCircles:"\u3069\u3046\u3057\u3093\u3048\u3093\u30C1\u30E3\u30FC\u30C8",ttAnalysis:"\u3058\u3087\u3046\u307B\u3046\u3076\u3093\u305B\u304D\u30C1\u30E3\u30FC\u30C8",ttDiamond:"\u30C0\u30A4\u30A2\u30E2\u30F3\u30C9\u30E9\u30F3\u30AD\u30F3\u30B0",submittingDocument:"\u3066\u3044\u3057\u3085\u3064\u3057\u3066\u3044\u307E\u3059",couldntSubmitWhileSubmittingOthers:"\u307B\u304B\u306E\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u3092\u3066\u3044\u3057\u3085\u3064\u3061\u3085\u3046\u306E\u305F\u3081\u3001\u3066\u3044\u3057\u3085\u3064\u3067\u304D\u307E\u305B\u3093",confirmReloadWhileUnsavedChangesExist:"\u30CE\u30FC\u30C8\u306B\u307B\u305E\u3093\u3057\u3066\u3044\u306A\u3044\u3078\u3093\u3053\u3046\u304C\u3042\u308A\u307E\u3059\u3002\u30DA\u30FC\u30B8\u3092\u3053\u3046\u3057\u3093\u3059\u308B\u3068\u305D\u308C\u3089\u304C\u304D\u3048\u3066\u3057\u307E\u3046\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u304C\u3001\u3044\u3044\u3067\u3059\u304B\uFF1F",uncaughtErrorOccurred:"\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u305F\u306E\u3067\u30A2\u30D7\u30EA\u306F\u3068\u307E\u3063\u3066\u3057\u307E\u3044\u307E\u3057\u305F\u3002\u30A8\u30E9\u30FC\u3057\u3087\u3046\u3055\u3044\u3092\u3072\u3087\u3046\u3058\u3057\u3066\u30B5\u30DD\u30FC\u30C8\u306B\u308C\u3093\u3089\u304F\u3059\u308B\u304B\u3001\u30A2\u30D7\u30EA\u3092\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",viewErrorDetail:"\u3057\u3087\u3046\u3055\u3044\u3092\u3072\u3087\u3046\u3058\u3059\u308B",cannotInsertWhileStillLoadingDocument:"\u3057\u308A\u3087\u3046\u306E\u3088\u307F\u3053\u307F\u304C\u304A\u308F\u3063\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u30AB\u30FC\u30C9\u3092\u3044\u308C\u3089\u308C\u307E\u305B\u3093",unsupportedContentType:"\u30CE\u30FC\u30C8\u306B\u3044\u308C\u3089\u308C\u306A\u3044\u3057\u3085\u308B\u3044\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3059",insertCardFromDocument:"\u30CE\u30FC\u30C8\u306B\u3053\u306E\u30AB\u30FC\u30C9\u3092\u3044\u308C\u307E\u3059",note:"\u30CE\u30FC\u30C8",material:"\u3057\u308A\u3087\u3046",couldntOpenItem:"%1$s\u3092\u3072\u3089\u3051\u307E\u305B\u3093\u3067\u3057\u305F",couldntGet_CheckInternetConnection:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u305D\u3046\u3057\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u305B\u3064\u305E\u304F\u3058\u3087\u3046\u304D\u3087\u3046\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",checkInternetConnection:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u3078\u306E\u305B\u3064\u305E\u304F\u3058\u3087\u3046\u304D\u3087\u3046\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",brokenNoteErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u306B\u307B\u305E\u3093\u3055\u308C\u305F%1$s\u304C\u3053\u308F\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002\u3082\u3046\u3057\u308F\u3051\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u30B5\u30DD\u30FC\u30C8\u307E\u3067\u308C\u3093\u3089\u304F\u3057\u3066\u304F\u3060\u3055\u3044\u3002\uFF08\u30A8\u30E9\u30FC\u30B3\u30FC\u30C9: %2$d, \u3058\u3085\u304E\u3087\u3046ID: %3$d, \u30CE\u30FC\u30C8ID: %4$s\uFF09",unsupportedNoteVerErrorMsg:"%1$s\u306E\u3051\u3044\u3057\u304D\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u3053\u306E%1$s\u306F\u3042\u305F\u3089\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u3067\u3064\u304F\u3063\u305F\u3082\u306E\u304B\u3082\u3057\u308C\u306A\u3044\u306E\u3067\u3001\u3072\u3089\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s\uFF09",unsupportedNoteFeatErrorMsg:"%1$s\u306B\u3042\u305F\u3089\u3057\u3044\u304D\u306E\u3046\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30CE\u30FC\u30C8\u306F\u304B\u3044\u306F\u3064\u3061\u3085\u3046\u306E\u30A2\u30D7\u30EA\u3067\u3064\u304F\u3063\u305F\u304B\u306E\u3046\u305B\u3044\u304C\u3042\u308A\u307E\u3059\u3002\uFF08\u30D0\u30FC\u30B8\u30E7\u30F3: %2$s, \u304D\u306E\u3046\u30B3\u30FC\u30C9: %3$s\uFF09",api202ErrorMsg:"%1$s\u306B\u3075\u304F\u307E\u308C\u3066\u3044\u308B\u30D5\u30A1\u30A4\u30EB\u306E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3087\u308A\u304C\u304B\u3093\u308A\u3087\u3046\u3057\u3066\u3044\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u3075\u3064\u3046\u306F\u3001\u3057\u3070\u3089\u304F\u3059\u308B\u3068\u3088\u307F\u3053\u307F\u304C\u3067\u304D\u308B\u3088\u3046\u306B\u306A\u308A\u307E\u3059\u3002",api403ErrorMsg:"%1$s\u306B\u305F\u3044\u3059\u308B\u3051\u3093\u3052\u3093\u304C\u306A\u3044\u3088\u3046\u3067\u3059\u3002\u304F\u308F\u3057\u304F\u306F\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u304F\u3060\u3055\u3044\u3002",api404ErrorMsg:"\u30B5\u30FC\u30D0\u30FC\u3058\u3087\u3046\u306B\u3053\u306E%1$s\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3053\u306E%1$s\u306F\u3064\u304F\u3089\u308C\u3066\u3044\u306A\u304B\u3063\u305F\u304B\u3001\u3059\u3067\u306B\u3051\u3055\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",unknownApiErrorMsg:"\u3054\u3081\u3093\u306A\u3055\u3044\u3001\u30B5\u30FC\u30D0\u30FC\u3067\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",noteChangedFromOtherDevice:"\u3079\u3064\u306E\u305F\u3093\u307E\u3064\u304B\u3089\u3082\u30CE\u30FC\u30C8\u304C\u3078\u3093\u3053\u3046\u3055\u308C\u305F\u306E\u3067\u3001\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u307E\u3059",save:"\u307B\u305E\u3093",unsaved:"\u307B\u305E\u3093\u3057\u3066\u306A\u3044",saving:"\u307B\u305E\u3093\u3061\u3085\u3046...",enterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F",enterFileName:"\u30D5\u30A1\u30A4\u30EB\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F",selectItemsToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u3082\u306E\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectItemsToErase:"\u3051\u3059\u3082\u306E\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectItemsToMove:"\u3044\u3069\u3046\u3059\u308B\u3082\u306E\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectItemToRename:"\u306A\u307E\u3048\u3092\u304B\u3048\u305F\u3044\u3082\u306E\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",askWhichFolderToCopyItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToImportItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToMoveItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u3044\u3069\u3046\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToRestoreItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u3075\u304F\u3052\u3093\u3057\u307E\u3059\u304B\uFF1F",askWhichFolderToSaveItTo:"\u3069\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u307B\u305E\u3093\u3057\u307E\u3059\u304B\uFF1F",thisIsAnEmptyFolder:"\u3053\u308C\u306F\u304B\u3089\u306E\u30D5\u30A9\u30EB\u30C0\u3067\u3059",fileUpdatedAtDateTimeFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM",confirmSingleFileDelete:"1\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmMultiFileDelete:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",createFolder:"\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308B",pleaseEnterFolderName:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",moveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u3044\u3069\u3046\u3059\u308B",copyToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u30B3\u30D4\u30FC\u3059\u308B",restoreToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u3075\u304F\u3052\u3093\u3059\u308B",photoDefaultFileName:"\u3057\u3083\u3057\u3093",videoDefaultFileName:"\u3069\u3046\u304C",drawingDefaultFileName:"\u304A\u3048\u304B\u304D",webDefaultFileName:"Web\u3051\u3093\u3055\u304F",mapDefaultFileName:"\u3061\u305A",textDefaultFileName:"\u30C6\u30AD\u30B9\u30C8",pdfDefaultFileName:"PDF",audioDefaultFileName:"\u304A\u3093\u305B\u3044",enterDocumentName:"\u3057\u308A\u3087\u3046\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",saveToThisFolder:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u307B\u305E\u3093",camera:"\u30AB\u30E1\u30E9",text:"\u30C6\u30AD\u30B9\u30C8",textCardMenuBtnImgPath:"/svg/text_ja_60x60_margin_less.svg",thinkingTool:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB",web:"web",quiz:"\u30C6\u30B9\u30C8",quizPresetTest:"\u30C6\u30B9\u30C8",quizPresetSurvey:"\u30A2\u30F3\u30B1\u30FC\u30C8",author:"\u3057\u3085\u3064\u3060\u3044\u3057\u3083",questionCount:"\u3057\u3064\u3082\u3093\u3059\u3046 %1$d",result:"\u3051\u3063\u304B",answerTest:"\u304B\u3044\u3068\u3046",answerQuestionnaire:"\u304B\u3044\u3068\u3046",viewTestAnswers:"\u304B\u3044\u3068\u3046\u304B\u304F\u306B\u3093",viewQuestionnaireAnswers:"\u304B\u3044\u3068\u3046\u304B\u304F\u306B\u3093",answerTestTogether:"\u305C\u3093\u3044\u3093\u3067\u304B\u3044\u3068\u3046",answerQuestionnaireTogether:"\u305C\u3093\u3044\u3093\u3067\u304B\u3044\u3068\u3046",creatingTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",createdTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308A\u307E\u3057\u305F",failedCreateTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",reloadForTestCard:"\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3064\u304B\u3046\u306B\u306F\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u30C6\u30B9\u30C8\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",preparingQuestionnaire:"\u30A2\u30F3\u30B1\u30FC\u30C8\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",unnamedNote:"\u306A\u307E\u3048\u304C\u306A\u3044\u30CE\u30FC\u30C8",copyOf:"%1$s\u306E\u30B3\u30D4\u30FC",noteConflictDialogTitle:"\u30CE\u30FC\u30C8\u3078\u3093\u3053\u3046\u306E\u3057\u3087\u3046\u3068\u3064\u304C\u304A\u304D\u307E\u3057\u305F",saveNoteUnderOtherNameTitle:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3079\u3064\u306E\u306A\u307E\u3048\u3067\u307B\u305E\u3093\u3059\u308B",saveNoteUnderOtherNameDesc:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u3042\u305F\u3057\u3044\u30CE\u30FC\u30C8\u3068\u3057\u3066\u307B\u305E\u3093\u3055\u308C\u307E\u3059\u3002\u3069\u3061\u3089\u306E\u3078\u3093\u3053\u3046\u3082\u306E\u3053\u308A\u307E\u3059\u3002",prioritizeThisVersionTitle:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3064\u304B\u3046",prioritizeThisVersionDesc:"\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3067\u3046\u308F\u304C\u304D\u3057\u307E\u3059\u3002\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u304D\u3048\u3066\u3057\u307E\u3044\u307E\u3059\u3002",deferToOtherDeviceVersionTitle:"\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3092\u3064\u304B\u3046",deferToOtherDeviceVersionDesc:"\u307B\u304B\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u3067\u3046\u308F\u304C\u304D\u3057\u307E\u3059\u3002\u3053\u306E\u305F\u3093\u307E\u3064\u306E\u3078\u3093\u3053\u3046\u306F\u304D\u3048\u3066\u3057\u307E\u3044\u307E\u3059\u3002",resolve:"\u304B\u3044\u3051\u3064\u3059\u308B",preferences:"\u30A2\u30D7\u30EA\u306E\u305B\u3063\u3066\u3044",zoomTitle:"\u304B\u304F\u3060\u3044\u30FB\u3057\u3085\u304F\u3057\u3087\u3046",invertMouseWheel:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u306E\u307B\u3046\u3053\u3046\u3092\u304E\u3083\u304F\u306B\u3059\u308B",mouseWheelSensitivity:"\u30DE\u30A6\u30B9\u30DB\u30A4\u30FC\u30EB\u304B\u3093\u3069",trackpadPinchZoomSensitivity:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9\u306E\u30D4\u30F3\u30C1\u30BA\u30FC\u30E0\u304B\u3093\u3069",aboutThisApp:"\u30A2\u30D7\u30EA\u306B\u3064\u3044\u3066",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",teacherLockedScreens:"\u305B\u3093\u305B\u3044\u304C\u304C\u3081\u3093\u30ED\u30C3\u30AF\u3057\u3066\u3044\u307E\u3059",screensAreLocked:"\u30ED\u30C3\u30AF\u3061\u3085\u3046",focusOnTheTeacher:"\u3066\u3092\u3068\u3081\u3066\u3001\u305B\u3093\u305B\u3044\u306E\u307B\u3046\u3092\u307F\u307E\u3057\u3087\u3046",checking:"\u304B\u304F\u306B\u3093\u3061\u3085\u3046...",checkScreenLock:"\u30ED\u30C3\u30AF\u3092\u304B\u304F\u306B\u3093\u3059\u308B",search:"\u3055\u304C\u3059",submissions:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064",sendToDialogTitle:"\u30AB\u30FC\u30C9\u3092\u304A\u304F\u308B\u3072\u3068\u3092\u3048\u3089\u3076",allMembers:"\u305C\u3093\u3044\u3093",sendToIndividuals:"\u3060\u308C\u304B",selectAll:"\u3059\u3079\u3066\u3048\u3089\u3076",releaseAll:"\u3059\u3079\u3066\u3084\u3081\u308B",sendToMultiple:"\u304A\u304F\u308B\uFF08%1$d\u306B\u3093\uFF09",openTask:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u304C\u3042\u308A\u307E\u3059",statusSubmitted:"\u3066\u3044\u3057\u3085\u3064\u305A\u307F",openTaskCount:"\u3001\u307B\u304B%1$d\u3064",others:"\u3001\u307B\u304B%1$d",yearTimeUnit:"\u306D\u3093",dayTimeUnit:"\u306B\u3061",hourTimeUnit:"\u3058\u304B\u3093",minuteTimeUnit:"\u3075\u3093",secondTimeUnit:"\u3073\u3087\u3046",taskListTitle:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053",createNewTask:"\u3042\u305F\u3089\u3057\u3044\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304F\u308B",confirmDelete:"\u3051\u3057\u307E\u3059\u304B\uFF1F",taskExpiryFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061",deadlineDate:"\u3057\u3081\u304D\u308A\u306B\u3061\u3058",openForSubmissions:"\u307C\u3057\u3085\u3046\u3061\u3085\u3046",noOpenTasks:"\u307C\u3057\u3085\u3046\u3061\u3085\u3046\u306E\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u306F\u3042\u308A\u307E\u305B\u3093",inPreparation:"\u3058\u3085\u3093\u3073\u3061\u3085\u3046",title:"\u30BF\u30A4\u30C8\u30EB",createInPreparation:"\u3058\u3085\u3093\u3073\u3061\u3085\u3046\u3067\u3064\u304F\u308B",callForAnswersNow:"\u3044\u307E\u3059\u3050\u307C\u3057\u3085\u3046\u304B\u3044\u3057",pleaseChooseTask:"\u3069\u3053\u306B\u3066\u3044\u3057\u3085\u3064\u3057\u307E\u3059\u304B\uFF1F",expiredTasks:"\u3057\u3081\u304D\u308A\u305A\u307F",allExpiredTasks:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3044\u3061\u3089\u3093",noTasksExpired:"\u306A\u3057",setTimeAndDateForDeadline:"\u3057\u3081\u304D\u308A\u306B\u3061\u3058\u3092\u305B\u3063\u3066\u3044\u3057\u3066\u304F\u3060\u3055\u3044",callForAnswers:"\u307C\u3057\u3085\u3046\u304B\u3044\u3057",confirmResubmit:"\u300C%1$s\u300D\u306B\u3082\u3046\u3044\u3061\u3069\u3066\u3044\u3057\u3085\u3064\u3057\u307E\u3059\u304B\uFF1F",submissionName:"%1$s\u306E\u304B\u3044\u3068\u3046",complete:"\u304B\u3093\u308A\u3087\u3046",start:"\u306F\u3058\u3081\u308B",end:"\u304A\u308F\u308B",edit:"\u3078\u3093\u3057\u3085\u3046",useAll:"\u3059\u3079\u3066\u3064\u304B\u3046",shareScreen:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093",sharing:"\u306F\u3044\u3057\u3093\u3061\u3085\u3046",nameOrder:"\u306A\u307E\u3048\u3058\u3085\u3093",updateOrder:"\u3053\u3046\u3057\u3093\u3058\u3085\u3093",submitOrder:"\u3066\u3044\u3057\u3085\u3064\u3058\u3085\u3093",anonymous:"\u306A\u307E\u3048\u306A\u3057",confirmRevealSubmitterNames:"\u306A\u3089\u3073\u3058\u3085\u3093\u3092\u300C%1$s\u300D\u306B\u304B\u3048\u3088\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002\u3059\u3079\u3066\u306E\u304B\u3044\u3068\u3046\u3057\u3083\u306E\u306A\u307E\u3048\u304C\u3072\u3087\u3046\u3058\u3055\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterTaskName:"\u3066\u3044\u3057\u3085\u3064\u306A\u3044\u3088\u3046\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",confirmAnswerShare:"\u305B\u3044\u3068\u3068\u304B\u3044\u3068\u3046\u3092\u304D\u3087\u3046\u3086\u3046\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",confirmSendBackAll:"\u3066\u3093\u3055\u304F\u305A\u307F\u306E%1$d\u306B\u3093\u3078\u3044\u3063\u304B\u3064\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3059\u304B\uFF1F",startComparing:"\u3072\u304B\u304F\u3092\u306F\u3058\u3081\u308B",comparison:"\u3072\u304B\u304F",startAnswerSharing:"\u304B\u3044\u3068\u3046\u3092\u304D\u3087\u3046\u3086\u3046",sharingAnswers:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3061\u3085\u3046",sendBackAll:"\u3044\u3063\u304B\u3064\u3078\u3093\u304D\u3083\u304F",endAnswerSharing:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u304B\u3044\u3058\u3087",noExpiry:"\u3057\u3066\u3044\u306A\u3057",expiryDialogTitle:"\u3057\u3081\u304D\u308A\u306B\u3061\u3058",expiry:"\u3057\u3081\u304D\u308A",hasExpired:"\u3057\u3081\u304D\u308A\u305A\u307F",closeNow:"\u3044\u307E\u3059\u3050",closeAfterTen:"10\u3077\u3093\u3054",closeToday:"\u304D\u3087\u3046\u3058\u3085\u3046",dateLabel:"\u3072\u3065\u3051",timeLabel:"\u3058\u3053\u304F",answersNotVisibleWarnTitle:"\u304B\u3044\u3068\u3046\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u3066\u3044\u307E\u305B\u3093",answersNotVisibleWarnMsg:"\u3052\u3093\u3056\u3044\u3001\u304B\u3044\u3068\u3046\u306F\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u307B\u304B\u306E\u3072\u3068\u306E\u304B\u3044\u3068\u3046\u3092\u307F\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",backToAnswerList:"\u304B\u3044\u3068\u3046\u3044\u3061\u3089\u3093\u306B\u3082\u3069\u308B",sendBack:"\u3078\u3093\u304D\u3083\u304F",use:"\u3064\u304B\u3046",confirmSendBack:"\u3078\u3093\u304D\u3083\u304F\u3057\u307E\u3059\u304B?",studentSharing:"\u305B\u3044\u3068\u3069\u3046\u3057\u306E\u3064\u3046\u3057\u3093",screenLock:"\u305D\u3046\u3055\u30ED\u30C3\u30AF",checkAttendance:"\u3055\u3093\u304B\u3057\u3083",learnAboutThinkingTools:"\u30B7\u30F3\u30AD\u30F3\u30B0\u30C4\u30FC\u30EB\u3092\u307E\u306A\u3076",sharedBy:"%1$s\u304B\u3089\u306E\u304D\u3087\u3046\u3086\u3046",submittedBy:"%1$s\u306E\u3066\u3044\u3057\u3085\u3064",sentBackBy:"%1$s\u304B\u3089\u306E\u3078\u3093\u304D\u3083\u304F",closedTaskLabel:"\u3057\u3081\u304D\u308A",unknownUser:"\u3075\u3081\u3044\u306A\u30E6\u30FC\u30B6",enumerationWithReadingPoint:"\u3001",and:"\u3068",andOtherMembers:"\u307B\u304B%1$d\u306B\u3093",nowSharingIndicator:"%1$s\u306B\u305D\u3046\u3057\u3093\u3061\u3085\u3046%2$s",pendingFileAndThumbUploadCount:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3068%2$d\u3053\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",pendingFileUploadCount:"%1$d\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",pendingThumbUploadCount:"%1$d\u3053\u306E\u30B5\u30E0\u30CD\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3061\u3085\u3046...",groupName:"\u30AF\u30E9\u30B9\u306E\u306A\u307E\u3048",groupJoinInstructions:"\u305B\u3044\u3068\u306E\u307F\u306A\u3055\u3093\u306F\u3001\u3053\u306E\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",groupJoinCodeDeactivated:"\u3053\u306E\u30AF\u30E9\u30B9\u306E\u3055\u3093\u304B\u30B3\u30FC\u30C9\u306F\u3080\u3053\u3046\u304B\u3055\u308C\u3066\u3044\u307E\u3059",membersJoinedCount:"\u3055\u3093\u304B\u306B\u3093\u305A\u3046",confirmLogout:"\u30ED\u30B0\u30A2\u30A6\u30C8\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",support:"\u30B5\u30DD\u30FC\u30C8",serviceStatus:"\u30B5\u30FC\u30D3\u30B9\u3058\u3087\u3046\u304D\u3087\u3046",adminPage:"\u304B\u3093\u308A\u30DA\u30FC\u30B8",logoutOption:"\u30ED\u30B0\u30A2\u30A6\u30C8",groupCode:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9",update:"\u3053\u3046\u3057\u3093",statusFetchErrorOccurred:"\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",notAttending:"\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u305B\u3093",choosingCourse:"\u3058\u3085\u304E\u3087\u3046\u305B\u3093\u305F\u304F\u3061\u3085\u3046",attendingOtherCourse:"\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u3059",browsingWeb:"Web ",attending:"\u3058\u3085\u3053\u3046\u3061\u3085\u3046",create:"\u3064\u304F\u308B",invalidUrlHelp:"https://\u3082\u3057\u304F\u306Fhttp://\u304B\u3089\u306F\u3058\u307E\u308B\u3001\u305F\u3060\u3057\u3044URL\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",invalidOpenUrl:"URL\u306B\u3078\u3093\u306A\u3082\u3058\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002\u3053\u306EWeb\u30AB\u30FC\u30C9\u306F\u3072\u3089\u304F\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3002",photo:"\u3057\u3083\u3057\u3093",video:"\u3069\u3046\u304C",closeCamera:"\u30AB\u30E1\u30E9\u3092\u3068\u3058\u308B",retake:"\u3068\u308A\u306A\u304A\u3059",generalCameraPrepError:"\u30AB\u30E1\u30E9\u306E\u3058\u3085\u3093\u3073\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",browserDoesntSupportMediaCapture:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u306F\u30AB\u30E1\u30E9\u304D\u306E\u3046\u306F\u3064\u304B\u3048\u307E\u305B\u3093",cameraMicPermissionDeniedErrorMsg:"\u30AB\u30E1\u30E9\u3068\u30DE\u30A4\u30AF\u306E\u308A\u3088\u3046\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/loilo-teacher-support/Web%E7%89%88%E3%81%A7%E9%8C%B2%E9%9F%B3%E3%82%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E4%BD%BF%E3%81%88%E3%81%AA%E3%81%84",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/loilo-teacher-support/Android%E3%81%A7%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%A8%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E5%88%A9%E7%94%A8%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95",getHelp:"\u3084\u308A\u304B\u305F\u306F\u3053\u3061\u3089",cantFindUsableDevice:"\u3064\u304B\u3048\u308B\u30C7\u30D0\u30A4\u30B9\u306E\u3058\u3087\u3046\u307B\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetPhotoData:"\u3057\u3083\u3057\u3093\u30C7\u30FC\u30BF\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntGetVideoData:"\u30D3\u30C7\u30AA\u30C7\u30FC\u30BF\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",resetCamera:"\u30AB\u30E1\u30E9\u3092\u30EA\u30BB\u30C3\u30C8",confirmResetVideoCamera:"\u3055\u3064\u3048\u3044\u3092\u3084\u308A\u306A\u304A\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",enterNewGroupName:"\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",userGroupNamePlaceholder:"(\u308C\u3044)1\u306D\u30931\u304F\u307F",addCourseLabel:"\u3058\u3085\u304E\u3087\u3046\u306E\u3064\u3044\u304B",addCourseDesc:"\u300C\u3058\u3085\u304E\u3087\u3046\u306E\u3064\u3044\u304B\u300D\u3092\u304A\u3053\u306A\u3063\u3066\u304F\u3060\u3055\u3044",chooseGroupToAddTo:"\u3042\u306A\u305F\u304C\u3058\u3085\u304E\u3087\u3046\u3092\u304A\u3053\u306A\u3046\u30AF\u30E9\u30B9\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044\u3002",noGroups:"\u3053\u3093\u306D\u3093\u3069\u306E\u30AF\u30E9\u30B9\u304C\u307E\u30601\u3064\u3082\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002",createNewGroupDesc:"\u2193\u306E\u300C\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u3092\u3064\u304F\u308B\u300D\u304B\u3089\u3064\u304F\u3063\u3066\u304F\u3060\u3055\u3044\u3002",groupDesc:"\u304A\u306A\u3058\u3058\u304B\u3093\u306B\u3058\u3085\u304E\u3087\u3046\u3092\u3046\u3051\u308B\u305B\u3044\u3068\u306E\u3042\u3064\u307E\u308A\u3092\u300C\u30AF\u30E9\u30B9\u300D\u3068\u3088\u3093\u3067\u3044\u307E\u3059\u3002",chooseGroupToDelete:"\u3051\u3059\u30AF\u30E9\u30B9\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",createNewGroupBtnLabel:"\u3042\u305F\u3089\u3057\u3044\u30AF\u30E9\u30B9\u3092\u3064\u304F\u308B",createNewSubjectBtnLabel:"\u3042\u305F\u3089\u3057\u3044\u3058\u3085\u304E\u3087\u3046\u3092\u3064\u304F\u308B",createdSubjectsListTitle:"\u3055\u304F\u305B\u3044\u305A\u307F\u306E\u3058\u3085\u304E\u3087\u3046",thisGroupHasNoSubjects:"\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3058\u3085\u304E\u3087\u3046\u304C\u3042\u308A\u307E\u305B\u3093",courseJoinedMark:"\u3064\u3044\u304B\u305A\u307F",addCourseDialogJoinCourseBtnLabel:"\u3064\u3044\u304B",confirmCreateSubject:"\u300C%1$s\u300D\u3092\u3064\u304F\u308A\u307E\u3059\u304B\uFF1F",subjectNameInputPlaceholder:"\u3058\u3085\u304E\u3087\u3046\u306E\u306A\u307E\u3048\u3092\u306B\u3085\u3046\u308A\u3087\u304F...",endedCoursesTitle:"\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046",endedCoursesDesc:"\u203B\u3055\u304F\u306D\u3093\u3069\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u300C\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046\u300D\u306E\u306A\u304B\u306B\u3042\u308A\u307E\u3059",year:"%1$d\u306D\u3093",subjectTitle:"\u3058\u3085\u304E\u3087\u3046",otherTeachersCoursesTitle:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046",courseFetchErrorOccurred:"\u3058\u3085\u304E\u3087\u3046\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",groupFetchErrorOccurred:"\u30AF\u30E9\u30B9\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",teacherNoJoinedCourseTitle1:"\u3052\u3093\u3056\u3044\u3042\u306A\u305F\u304C\u305F\u3093\u3068\u3046\u3057\u3066\u3044\u308B",noJoinedCourseTitle2:"\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",enterClassCodeToJoinClass:"\u2193\u305B\u3093\u305B\u3044\u306B\u304A\u3057\u3048\u3066\u3082\u3089\u3063\u305F\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",joinCourseBtnLabel:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u306B\u3085\u3046\u308A\u3087\u304F",newNoteDefaultNameFmt:"%1$d\u306D\u3093%2$d\u304C\u3064%3$d\u306B\u3061\u306E\u30CE\u30FC\u30C8",chooseNoteToCopy:"\u30B3\u30D4\u30FC\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",toWhichSubjectDoYouWantToCopy:"\u3069\u306E\u3058\u3085\u304E\u3087\u3046\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3059\u304B\uFF1F",toWhichSubjectNotesDoYouWantToSend:"\u3069\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30CE\u30FC\u30C8\u306B\u304A\u304F\u308A\u307E\u3059\u304B\uFF1F",chooseNoteToRename:"\u306A\u307E\u3048\u3092\u304B\u3048\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",createNewNote:"\u3042\u305F\u3089\u3057\u3044\u30CE\u30FC\u30C8\u3092\u3064\u304F\u308B",renameNoteDialogMsg:"\u30CE\u30FC\u30C8\u306E\u306A\u307E\u3048\u3092\u304B\u3048\u308B",noteFetchErrorOccurred:"\u30CE\u30FC\u30C8\u306E\u3057\u3085\u3068\u304F\u3061\u3085\u3046\u306B\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F",noNotesFound:"\u3042\u305F\u3089\u3057\u3044\u30CE\u30FC\u30C8\u3092\u3064\u304F\u308A\u307E\u3057\u3087\u3046\uFF01",duplicateNoteNameSuffix:"\u306E\u30B3\u30D4\u30FC",otherTeachersCourseNotFound:"\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u306A\u3044\u3088\u3046\u3067\u3059",loadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3093\u3067\u3044\u307E\u3059...",couldntLoadFileTitle:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3081\u307E\u305B\u3093\u3067\u3057\u305F",addCardDialogTitle:"\u3064\u3044\u304B\u3055\u304D",inThisCard:"\u30AB\u30FC\u30C9\u306E\u306A\u304B\u306B",asNextCard:"\u3064\u304E\u306B",pasteCopiedUrl:"\u30B3\u30D4\u30FC\u3057\u305FURL\u3092\u306F\u308A\u3064\u3051\u308B",confirmDuplicateAllConnectedCards:"\u3064\u306A\u304C\u3063\u305F\u3059\u3079\u3066\u306E\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3066\u3099\u3059\u304B\uFF1F",duplicateThisCard:"\u3053\u306E\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044",duplicateAllConnectedCards:"\u3064\u306A\u304C\u3063\u305F\u30AB\u30FC\u30C9\u3092\u3075\u304F\u305B\u3044",couldntReuseCard:"\u30AB\u30FC\u30C9\u306E\u3055\u3044\u308A\u3088\u3046\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",changeTools:"\u30C4\u30FC\u30EB\u3092\u304D\u308A\u304B\u3048",exportCard:"\u304B\u304D\u3060\u3057",image:"\u304C\u305E\u3046",audio:"\u304A\u3093\u305B\u3044",audioRecording:"\u308D\u304F\u304A\u3093",downloadFile:"%1$s\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadingFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3061\u3085\u3046...",couldntDownloadFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",invalidFileNameOrPath:"\u30D5\u30A1\u30A4\u30EB\u306E\u306A\u307E\u3048\u304B\u30D5\u30A1\u30A4\u30EB\u306E\u30D1\u30B9\u304C\u306A\u304C\u3059\u304E\u308B\u304B\u306E\u3046\u305B\u3044\u304C\u3042\u308A\u307E\u3059",invalidDirectoryNameForBatchDownload:"\u30D5\u30A9\u30EB\u30C0\u306E\u306A\u307E\u3048\u306B\u3064\u304B\u3048\u306A\u3044\u3082\u3058\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u308B\u304B\u306E\u3046\u305B\u3044\u304C\u3042\u308A\u307E\u3059",failedDownloadFile:"%1$s\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",failedDownloadFiles:"%1$s\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",failedDownloadFilesWithOthers:"%1$s\u3068\u307B\u304B%2$d\u306B\u3093\u306E\u30D5\u30A1\u30A4\u30EB\u3067\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",fileDestinationNotExist:"\u304B\u304D\u3053\u307F\u3055\u304D\u304C\u305D\u3093\u3056\u3044\u3057\u306A\u3044\u3082\u3057\u304F\u306F\u3055\u304F\u3058\u3087\u3055\u308C\u3066\u3044\u307E\u3059",cancelingDownload:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u3061\u3085\u3046...",completedBatchDownload:"\u3044\u3063\u304B\u3064\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u304C\u304A\u308F\u308A\u307E\u3057\u305F",canceledBatchDownload:"\u3044\u3063\u304B\u3064\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u30AD\u30E3\u30F3\u30BB\u30EB\u3057\u307E\u3057\u305F",titleRedirect:"\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8 | \u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",showSubmission:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u3092\u3072\u3087\u3046\u3058\u3059\u308B",redirectSubmissionMessage:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u3078\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8\u3057\u307E\u3059\u3002\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8\u3057\u306A\u3044\u3068\u304D\u306F\u3057\u305F\u306E\u30EA\u30F3\u30AF\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044\u3002",pdfFile:"PDF\u30D5\u30A1\u30A4\u30EB",print:"\u3044\u3093\u3055\u3064",confirmAudioRecordingOverwrite:"\u308D\u304F\u304A\u3093\u305A\u307F\u306E\u30C7\u30FC\u30BF\u3092\u3051\u3057\u3066\u308D\u304F\u304A\u3093\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",couldntStartAudioRecording:"\u308D\u304F\u304A\u3093\u3092\u306F\u3058\u3081\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",couldntFinishedAudioRecording:"\u308D\u304F\u304A\u3093\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",confirmDeleteAudioRecording:"\u308D\u304F\u304A\u3093\u30C7\u30FC\u30BF\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",automatic:"\u3058\u3069\u3046",audioRecordBtnLabel:"\u3068\u308B",volume:"\u304A\u3068\u306E\u304A\u304A\u304D\u3055",browserDoesntSupportAudioRecording:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u306F\u308D\u304F\u304A\u3093\u304D\u306E\u3046\u306F\u3064\u304B\u3048\u307E\u305B\u3093",micPermissionDeniedErrorMsg:"\u30DE\u30A4\u30AF\u306E\u308A\u3088\u3046\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044",noMicFoundErrorMsg:"\u3064\u304B\u3048\u308B\u30DE\u30A4\u30AF\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F",verticalWritingBtnLabel:`\u305F
\u3066`,selection:"\u305B\u3093\u305F\u304F",cut:"\u30AB\u30C3\u30C8",paste:"\u306F\u308A\u3064\u3051",pasteImage:"\u304C\u305E\u3046\u3092\u306F\u308A\u3064\u3051",pasteText:"\u3082\u3058\u3092\u306F\u308A\u3064\u3051",pasteCards:"\u30AB\u30FC\u30C9\u3092\u306F\u308A\u3064\u3051",nothingToPaste:"\u306F\u308A\u3064\u3051\u308B\u3082\u306E\u304C\u3042\u308A\u307E\u305B\u3093",couldntDownloadFileErrorMsg:"%1$d: \u30B5\u30FC\u30D0\u30FC\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u3082\u3046\u3044\u3061\u3069\u3084\u3063\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",corruptFileErrorMsg:"\u30D5\u30A1\u30A4\u30EB\u306E\u30ED\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002\u30D5\u30A1\u30A4\u30EB\u304C\u3053\u308F\u308C\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",stopScreenSharing:"\u306F\u3044\u3057\u3093\u3066\u3044\u3057",couldntReceiveScreenShare:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3058\u3085\u3057\u3093\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002",screenSharingTimedOutErrorMsg:"%1$d: \u306F\u3044\u3057\u3093\u30C7\u30FC\u30BF\u306E\u3057\u3085\u3068\u304F\u304C\u306A\u304C\u3044\u3058\u304B\u3093\u306B\u308F\u305F\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",endScreenShareReceiving:"\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u306E\u3058\u3085\u3057\u3093\u3092\u3057\u3085\u3046\u308A\u3087\u3046\u3059\u308B",endPresentationLine1:"\u306F\u3063\u3074\u3087\u3046",endPresentationLine2:"\u3057\u3085\u3046\u308A\u3087\u3046",requestPresentationLine1:"\u305B\u3044\u3068",requestPresentationLine2:"\u306F\u3063\u3074\u3087\u3046",endSharingLine1:"\u306F\u3044\u3057\u3093",endSharingLine2:"\u3066\u3044\u3057",startSharingLine1:"\u306F\u3044",startSharingLine2:"\u3057\u3093",confirmStartPresentation:"\u305B\u3044\u3068\u306F\u3063\u3074\u3087\u3046\u3092\u306F\u3058\u3081\u307E\u3059\u304B\uFF1F",confirmStartScreenSharing:"\u306F\u3044\u3057\u3093\u3092\u306F\u3058\u3081\u307E\u3059\u304B\uFF1F",yourTurnToPresent:"\u3042\u306A\u305F\u304C\u306F\u3063\u3074\u3087\u3046\u3059\u308B\u3070\u3093\u3067\u3059\uFF01",unsupportedFileErrorMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u305F\u3044\u304A\u3046\u3057\u3066\u3044\u307E\u305B\u3093\u3002\u30D5\u30A1\u30A4\u30EB\u3051\u3044\u3057\u304D: %1$s \u304B\u304F\u3061\u3087\u3046\u3057: %2$s",unsupportedFileErrorWithoutOptMsg:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u306F\u305F\u3044\u304A\u3046\u3057\u3066\u3044\u307E\u305B\u3093",confirmMultiCardGroupDelete:"%1$d\u307E\u3044\u306E\u30AB\u30FC\u30C9\u3068\u3053\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",confirmMultiChildCardDelete:"\u30AB\u30FC\u30C9\u3068%1$d\u307E\u3044\u306E\u3053\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",confirmCardDelete:"\u30AB\u30FC\u30C9\u3092\u3051\u3057\u307E\u3059\u304B\uFF1F",inputCannotContainSpacesWarning:"\u304B\u3089\u306E\u3082\u3058\u3092\u306B\u3085\u3046\u308A\u3087\u304F\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",inputTooLongWarning:"%1$d\u3082\u3058\u3088\u308A\u3059\u304F\u306A\u304F\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u304F\u3060\u3055\u3044",taskNameDefaultPrefix:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064",confirmDeleteTimelineHistory:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u306E\u308A\u308C\u304D\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",deletingTimelineHistory:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u306E\u308A\u308C\u304D\u3092\u3092\u3051\u3057\u3066\u3044\u307E\u3059...",cannotDeleteThisHistory:"\u3053\u306E\u308A\u308C\u304D\u306F\u3051\u305B\u307E\u305B\u3093",timelineDateFmtPrevYear:"%d\u306D\u3093%d\u304C\u3064%d\u306B\u3061",timelineDateFmtThisYear:"%d\u304C\u3064%d\u306B\u3061 %02d:%02d",timelineDateFmtToday:"%02d:%02d",daysRemaining:"\u3042\u3068%d\u306B\u3061",hoursRemaining:"\u3042\u3068%d\u3058\u304B\u3093",minRemaining:"\u3042\u3068%1$s\u3075\u3093",secRemaining:"\u3042\u3068%1$s\u3073\u3087\u3046",textButtonIconClass:"textButtonIconJa",submitted:"\u3066\u3044\u3057\u3085\u3064\u305A\u307F",drawn:"\u304A\u3048\u304B\u304D",annotation:"\u3066\u3093\u3055\u304F",couldntSave:"%1$s\u304C\u307B\u305E\u3093\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",annotationThumbnail:"\u3066\u3093\u3055\u304F\u30B5\u30E0\u30CD\u30A4\u30EB",documentThumbnail:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u30B5\u30E0\u30CD\u30A4\u30EB",languageSettingTitle:"\u3052\u3093\u3054\u305B\u3063\u3066\u3044",english:"\u3048\u3044\u3054",japanese:"\u306B\u307B\u3093\u3054\uFF08\u304B\u3093\u3058\uFF09",japaneseHira:"\u306B\u307B\u3093\u3054\uFF08\u3072\u3089\u304C\u306A\uFF09",traditionalChinese:"\u306F\u3093\u305F\u3044\u3061\u3085\u3046\u3054\u304F\u3054",simplifiedChinese:"\u304B\u3093\u305F\u3044\u3061\u3085\u3046\u3054\u304F\u3054",inButtonIconClass:"inButtonIconJaHira",outButtonIconClass:"outButtonIconJaHira",thinkingToolHelpPageUrl:"https://n.loilo.tv/ja/thinkingtool",couldntGetSubmissions:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",tasksFeatureIsUnavailable:"%1$d\u306B\u3093\u3088\u308A\u304A\u304A\u3044\u3072\u3068\u304C\u3055\u3093\u304B\u3059\u308B\u3058\u3085\u304E\u3087\u3046\u3067\u306F\u3001\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3064\u304B\u3046\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u306E\u3066\u3044\u3057\u3085\u3064\u3058\u3087\u3046\u304D\u3087\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093",couldntGetSubmissionHistory:"\u3080\u304B\u3057\u306E\u3066\u3044\u3057\u3085\u3064\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",appName:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB",loiloNote:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8",submissionBox:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053",error:"\u30A8\u30E9\u30FC",timeline:"\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3",status400Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u3051\u3044\u3057\u304D\u304C\u307E\u3061\u304C\u3063\u3066\u3044\u308B\u3088\u3046\u3067\u3059",status403Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30C7\u30FC\u30BF\u306B\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u306F\u3044\u3051\u307E\u305B\u3093",status404Msg:"\u30EA\u30AF\u30A8\u30B9\u30C8\u3055\u308C\u305F\u30C7\u30FC\u30BF\u304C\u307F\u3064\u304B\u308A\u307E\u305B\u3093",status500Msg:"\u30B5\u30FC\u30D0\u30FC\u3067\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002\u30B5\u30FC\u30D0\u30FC\u306E\u3061\u3087\u3046\u3057\u304C\u308F\u308B\u3044\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",defaultErrorMsg:"\u3054\u3081\u3093\u306A\u3055\u3044\u3001\u308F\u304B\u3089\u306A\u3044\u30A8\u30E9\u30FC\u304C\u304A\u304D\u307E\u3057\u305F\u3002",goToTopPage:"\u30C8\u30C3\u30D7\u30DA\u30FC\u30B8\u306B\u3082\u3069\u308B",viewStatusPage:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30DA\u30FC\u30B8\u3067\u30B5\u30FC\u30D0\u30FC\u3058\u3087\u3046\u307B\u3046\u3092\u304B\u304F\u306B\u3093\u3059\u308B",login:"\u30ED\u30B0\u30A4\u30F3",masterUserLoginUnsupported:"\u304B\u3093\u305F\u3093\u30ED\u30B0\u30A4\u30F3\u306E\u30DE\u30B9\u30BF\u30FC\u30E6\u30FC\u30B6\u3067\u306F\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",invalidCredentials:"\u304C\u3063\u3053\u3046ID\u3001\u30E6\u30FC\u30B6\u30FCID\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u304F\u307F\u3042\u308F\u305B\u304C\u305F\u3060\u3057\u304F\u3042\u308A\u307E\u305B\u3093\u3002",invalidIPAddress:"\u305B\u3064\u305E\u304F\u3082\u3068\u306EIP\u30A2\u30C9\u30EC\u30B9\u304C\u305B\u3044\u3052\u3093\u3055\u308C\u3066\u3044\u308B\u3088\u3046\u3067\u3059\u3002\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",accountLocked:"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u304C\u3063\u3053\u3046\u306E\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",forbiddenIsAdmin:"\u304B\u3093\u308A\u3057\u3083\u30E6\u30FC\u30B6\u306F\u30A2\u30D7\u30EA\u306B\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",forbiddenIsSSOUser:"Google\u30A2\u30AB\u30A6\u30F3\u30C8\u308C\u3093\u3051\u3044\u3092\u3057\u3066\u3044\u308B\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u3001\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3002",couldntLogIn:"\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",endpoint:"\u305B\u3064\u305E\u304F\u3055\u304D",schoolIDLabel:"\u304C\u3063\u3053\u3046",schoolIDPlaceholder:"\u304C\u3063\u3053\u3046ID",schoolIDTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3001- (\u30CF\u30A4\u30D5\u30F3)\u3001_ (\u30A2\u30F3\u30C0\u30FC\u30D0\u30FC)\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",userIDLabel:"\u30E6\u30FC\u30B6\u30FC",userIDPlaceholder:"\u30E6\u30FC\u30B6\u30FCID",userIDTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3068\u304D\u3054\u3046\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",passwordPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9",passwordTitle:"\u306F\u3093\u304B\u304F\u3048\u3044\u3059\u3046\u3058\u3068\u304D\u3054\u3046\u3067\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u4E0B\u3055\u3044\u3002",forgotPasswordLinkText:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u308F\u304B\u3089\u306A\u3044\u3070\u3042\u3044",forgotPasswordPageUrl:"https://help.loilonote.app/--5cef979a6da3ae0017645681",adminSignInLinkText:"\u304B\u3093\u308A\u3057\u3083\u30ED\u30B0\u30A4\u30F3",recommendUpdateTitle:"\u30D6\u30E9\u30A6\u30B6\u3092\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",recommendUpdateMsg:"\u305F\u3060\u3057\u304F\u3046\u3054\u304B\u306A\u3044\u3053\u3068\u304C\u3042\u308A\u307E\u3059",loginContinueBtnText:"\u3053\u306E\u307E\u307E\u3064\u304B\u3046",recommendNativeAppTitle:"\u30A2\u30D7\u30EA\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",recommendNativeAppMsg:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u304D\u306E\u3046\u304C\u305B\u3044\u3052\u3093\u3055\u308C\u307E\u3059\u3001\u3059\u3079\u3066\u306E\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u306B\u306F\u30A2\u30D7\u30EA\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",unsupportedBrowserTitle:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6\u306F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093",unsupportedBrowserMsg:"\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306EGoogle Chrome\u3092\u3064\u304B\u3063\u3066\u304F\u3060\u3055\u3044",needBrowserUpdateMsg:"\u30D6\u30E9\u30A6\u30B6\u3092\u3055\u3044\u3057\u3093\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044",unknownBrowser:"\u3057\u3089\u306A\u3044\u30D6\u30E9\u30A6\u30B6",yourBrowser:"\u3042\u306A\u305F\u306E\u30D6\u30E9\u30A6\u30B6",supportedVersionsLabel:"\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u308B\u30D6\u30E9\u30A6\u30B6\u306E\u30D0\u30FC\u30B8\u30E7\u30F3",otherIOSBrowsers:"\u305D\u306E\u305FiOS\u306E\u30D6\u30E9\u30A6\u30B6\u30FC: iOS 13\u3044\u3058\u3087\u3046",signUpPageUrl:"https://n.loilo.tv/users/sign_up?lang=ja",iosAppStorePageUrl:"https://apps.apple.com/jp/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_ja.svg",installBrowser:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B",getApp:"\u30A2\u30D7\u30EA\u3092\u3066\u306B\u3044\u308C\u308B",chromeDownloadPageUrl:"https://www.google.com/intl/ja/chrome/",appStatusPageUrl:"https://status.loilonote.app/ja",couldntEncodeDrawnData:"\u3066\u304C\u304D\u30C7\u30FC\u30BF\u306E\u30A8\u30F3\u30B3\u30FC\u30C9\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",accessNotPermitted:"\u30A2\u30AF\u30BB\u30B9\u304C\u304D\u3087\u304B\u3055\u308C\u3066\u3044\u307E\u305B\u3093",giveClipboardAccess:"\u306F\u308A\u3064\u3051\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u306B\u306F\u3001\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u3092\u304D\u3087\u304B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntLoadFontFileMsg:"\u3072\u3064\u3088\u3046\u306A\u30D5\u30A9\u30F3\u30C8\u30D5\u30A1\u30A4\u30EB\u304C\u3088\u307F\u3053\u307F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noMemoryErrorTitle:"\u30E1\u30E2\u30EA\u304C\u305F\u308A\u307E\u305B\u3093",noMemoryErrorMsg:"\u30E1\u30E2\u30EA\u304C\u305F\u308A\u306A\u3044\u305F\u3081\u3001\u3057\u3087\u308A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30A2\u30D7\u30EA\u3092\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldntChangeTool:"\u30C4\u30FC\u30EB\u306E\u304D\u308A\u304B\u3048\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",couldntFetchData:"\u30C7\u30FC\u30BF\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntSetupPdfWorker:"PDF\u30EF\u30FC\u30AB\u30FC\u3092\u3064\u304F\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntDeleteAsOtherInCharge:`\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u307B\u304B\u306E\u305B\u3093\u305B\u3044\u304C\u3064\u304B\u3063\u3066\u3044\u308B\u305F\u3081\u3051\u305B\u307E\u305B\u3093\u3002
\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u3092\u3084\u3081\u307E\u3059\u304B\uFF1F`,relatedSubjectsMsg:"\u203B\u3053\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u304B\u3089\u3070\u305A\u308C\u308B\u3070\u3042\u3044\u3001\u3057\u308A\u3087\u3046\u3070\u3053\u3092\u304D\u3087\u3046\u3086\u3046\u3057\u3066\u3044\u308B\u3053\u308C\u3089\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u305F\u3093\u3068\u3046\u3082\u306F\u305A\u308C\u307E\u3059",stopBeginInCharge:"\u305F\u3093\u3068\u3046\u304B\u3089\u5916\u308C\u308B",fileTooBigTitle:"\u3068\u3066\u3082\u304A\u304A\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3067\u3059",fileTooBigMessage:"1GB\u3092\u3053\u3048\u308B\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",exceedVideoQuality:`\u304A\u304A\u304D\u3044\u30B5\u30A4\u30BA\u306E\u3069\u3046\u304C\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059\u3002
\u304C\u3081\u3093\u306F\u3044\u3057\u3093\u3058\u306B\u30B9\u30E0\u30FC\u30BA\u306A\u3057\u3061\u3087\u3046\u304C\u3067\u304D\u307E\u305B\u3093\u3002
\u3053\u306E\u307E\u307E\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3092\u3064\u3065\u3051\u307E\u3059\u304B\uFF1F`,confirmDeleteTarget:"\u300C%1$s\u300D\u3092\u3051\u3057\u307E\u3059\u3002\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",signInWithXXX:"%1$s\u3067\u30ED\u30B0\u30A4\u30F3",confirmDisplayAnswers:"\u304B\u3044\u3068\u3046\u3092\u3072\u3087\u3046\u3058\u3057\u307E\u3059\u304B\uFF1F",submissionListDateShortFmt:"m\u304C\u3064d\u306B\u3061 HH:MM",submissionListDateFullFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM",couldntExportCard:"\u30AB\u30FC\u30C9\u306E\u304B\u304D\u3060\u3057\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",pdf:"PDF",exportingCardAsPdf:"\u30AB\u30FC\u30C9\u3092PDF\u306B\u304B\u304D\u3060\u3057\u3066\u3044\u307E\u3059...",open:"\u3072\u3089\u304F",cache:"\u30AD\u30E3\u30C3\u30B7\u30E5",submittersAnswer:"%1$s\u306E\u3053\u305F\u3048",previousSomeonesAnswer:"\u307E\u3048\u306E\u3072\u3068\u306E\u3053\u305F\u3048",nextSomeonesAnswer:"\u3064\u304E\u306E\u3072\u3068\u306E\u3053\u305F\u3048",newerDataExistsOnServer:"\u30B5\u30FC\u30D0\u30FC\u306B\u3042\u305F\u3089\u3057\u3044\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u304C\u3042\u308A\u307E\u3059",qrCodePreviewDialogTitle:"QR\u30B3\u30FC\u30C9\u3092\u307F\u3064\u3051\u307E\u3057\u305F",createCard:"\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308B",updateCard:"\u30AB\u30FC\u30C9\u3053\u3046\u3057\u3093",webCard:"Web\u30AB\u30FC\u30C9",createWebCard:"Web\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308B",createTextCard:"\u30C6\u30AD\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308B",creatingWebCard:"Web\u30AB\u30FC\u30C9\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",cannotCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F\u3002",failedCreateWebCardFromExtension:"Web\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308A\u305F\u3044\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u3066\u3001\u3082\u3046\u3044\u3061\u3069\u304B\u304F\u3061\u3087\u3046\u304D\u306E\u3046\u304B\u3089\u30AB\u30FC\u30C9\u3064\u304F\u3063\u3066\u304F\u3060\u3055\u3044\u3002",failedCreateWebCardFromExtensionTitle:"\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3044\u3066\u304F\u3060\u3055\u3044",qrCodeScannerPrepError:"QR\u30B3\u30FC\u30C9\u3088\u307F\u3068\u308A\u306E\u3058\u3085\u3093\u3073\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",textCardPlaceholderImgPath:"/svg/text_ja_100x75_margin.svg",qrModeGuidance:"QR\u30B3\u30FC\u30C9\u3092\u3057\u304B\u304F\u306E\u306A\u304B\u306B\u3044\u308C\u3066\u304F\u3060\u3055\u3044",selectAnswers:"\u304B\u3044\u3068\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectAnswersCompare:"\u3072\u304B\u304F\u3059\u308B\u304B\u3044\u3068\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",selectNoteForAddingMaterials:"\u3069\u306E\u30CE\u30FC\u30C8\u306B\u3057\u308A\u3087\u3046\u3092\u3064\u3044\u304B\u3057\u307E\u3059\u304B\uFF1F",videoRecordingTimeLimitReached:"\u308D\u304F\u304C\u3067\u304D\u308B\u3058\u304B\u3093\u304C\u304A\u308F\u308A\u307E\u3057\u305F\u3002\u308D\u304F\u304C\u3092\u3066\u3044\u3057\u3057\u307E\u3059\u3002",creatingAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3064\u304F\u3063\u3066\u3044\u307E\u3059...",createdAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308A\u307E\u3057\u305F",failedCreateAttendanceCard:"\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3064\u304F\u308C\u307E\u305B\u3093\u3067\u3057\u305F",attendance:"\u3057\u3085\u3063\u3051\u3064",attendanceReport:"\u3057\u3085\u3063\u3051\u3064\u308C\u3093\u3089\u304F",attendanceCardCreator:"\u3055\u304F\u305B\u3044\u3057\u3083",attendanceCardEditAndResult:"\u3078\u3093\u3057\u3085\u3046\u30FB\u3057\u3085\u3046\u3051\u3044",preparingAttendance:"\u3057\u3085\u3063\u3051\u3064\u308C\u3093\u3089\u304F\u3092\u3058\u3085\u3093\u3073\u3057\u3066\u3044\u307E\u3059",clickHereForHelp:"\u3064\u304B\u3044\u304B\u305F\u306F\u3053\u3061\u3089",helpPageLinkForQuizCardTest:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForQuizCardSurvey:"https://help.loilonote.app/--5f110bdaecfa65001ea41268",helpPageLinkForAttendanceCardTeacher:"https://help.loilonote.app/--5f8567143f41ab0022fa9651",helpPageLinkForAttendanceCardStudent:"https://help.loilonote.app/--60c18ef576a1050044286d87",loginPageTitle:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u30ED\u30B0\u30A4\u30F3",loginPageDesc:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D\u3002\u305F\u306E\u3057\u3044\u3058\u3085\u304E\u3087\u3046\u306B\u3055\u3093\u304B\u3057\u3088\u3046\uFF01",penType:"\u30DA\u30F3\u306E\u3057\u3085\u308B\u3044",penColor:"\u30DA\u30F3\u306E\u3044\u308D",highlighterColor:"\u3051\u3044\u3053\u3046\u307A\u3093\u306E\u3044\u308D",clearAll:"\u305C\u3093\u3076\u3051\u3059",penThickness:"\u305B\u3093\u306E\u3075\u3068\u3055",eraserSize:"\u3051\u3057\u30B4\u30E0\u306E\u3075\u3068\u3055",myFolder:"\u30DE\u30A4\u30D5\u30A9\u30EB\u30C0",schoolWideFolder:"\u304C\u3063\u3053\u3046\u306A\u3044",districtShared:"%1$s\u304D\u3087\u3046\u3086\u3046",schoolShared:"\u304C\u3063\u3053\u3046\u306A\u3044\u304D\u3087\u3046\u3086\u3046",classShared:"\u3058\u3085\u304E\u3087\u3046\u306A\u3044\u304D\u3087\u3046\u3086\u3046",teachersOnlyFolder:"\u305B\u3093\u305B\u3044\u306E\u307F",classFolder:"%1$s \u305B\u3093\u3088\u3046",sortUpdateDateOrder:"\u3088\u304F\u3064\u304B\u3046\u3058\u3085\u3093",sortUpdateDateOrderForMaterialBox:"\u3042\u305F\u3089\u3057\u3044\u3058\u3085\u3093",sortCreateDateOrder:"\u3064\u304F\u3063\u305F\u3058\u3085\u3093",materialNameOrder:"\u306A\u307E\u3048\u3058\u3085\u3093",materialFileUpdateDateFolderNameOrder:"\u30D5\u30A9\u30EB\u30C0\u3081\u3044\u3058\u3085\u3093",couldntFetchSharedNoteMembers:"\u30E1\u30F3\u30D0\u30FC\u306E\u3057\u3085\u3068\u304F\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",manageSharedNoteMember:"\u30E1\u30F3\u30D0\u30FC\u306E\u304B\u3093\u308A",chooseNoteToManageMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u304B\u3093\u308A\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseNoteToImport:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",pushTokenRegistration:"\u3064\u3046\u3061\u30C8\u30FC\u30AF\u30F3\u306E\u3068\u3046\u308D\u304F",registered:"\u3068\u3046\u308D\u304F\u305A\u307F",unregistered:"\u307F\u3068\u3046\u308D\u304F",schoolLoiloTVUrl:"https://school.loilo.tv/jp/web.html",schoolLoiloTVUrlWithExtension:"https://school.loilo.tv/jp/web-ext.html",citationNotePrefix:"\u3044\u3093\u3088\u3046",markAllAsRead:"\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3059\u308B",confirmMarkAllSubmitsAsRead:"\u3066\u3044\u3057\u3085\u3064\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3059\u304B\uFF1F",markedAllSubmitsAsRead:"\u3066\u3044\u3057\u3085\u3064\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3057\u305F",confirmMarkAllRevealAnswersAsRead:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3059\u304B\uFF1F",markedAllRevealAnswersAsRead:"\u304B\u3044\u3068\u3046\u304D\u3087\u3046\u3086\u3046\u3092\u3059\u3079\u3066\u304D\u3069\u304F\u306B\u3057\u307E\u3057\u305F",failedToMarkAllAsRead:"\u304D\u3069\u304F\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",xIsDeleted:"%1$s\u306F\u3051\u3055\u308C\u3066\u3044\u307E\u3059",copied:"\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",copiedToClipboard:"\u30AF\u30EA\u30C3\u30D7\u30DC\u30FC\u30C9\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F",failedToCopyCards:"\u30AB\u30FC\u30C9\u306E\u30B3\u30D4\u30FC\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",tooManyCards:"\u30AB\u30FC\u30C9\u306E\u307E\u3044\u3059\u3046\u304C\u304A\u304A\u3059\u304E\u307E\u3059",enableSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u3092\u3064\u304F\u308B(\u305B\u3093\u305B\u3044\u306E\u307F)",selectSchool:"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u304C\u3063\u3053\u3046\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",showAnnotation:"\u3066\u3093\u3055\u304F\u3092\u3072\u3087\u3046\u3058",hideAnnotation:"\u3066\u3093\u3055\u304F\u3092\u3072\u3087\u3046\u3058\u3057\u306A\u3044",submissionDeadlineFmt:"yyyy\u306D\u3093m\u304C\u3064d\u306B\u3061 HH:MM \u3057\u3081\u304D\u308A",submissionBoxDeletedOrNotExisted:"\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u306F\u3051\u3055\u308C\u305F\u304B\u3001\u3082\u3068\u3082\u3068\u306A\u3044\u3088\u3046\u3067\u3059",getToWork:"\u3044\u307E\u3059\u3050\u3084\u308B\uFF01",chooseNoteToWorkIn:"\u3069\u306E\u30CE\u30FC\u30C8\u3067\u304B\u3060\u3044\u3092\u3084\u308A\u307E\u3059\u304B\uFF1F",newTaskCreated:"\u3042\u305F\u3089\u3057\u3044\u304B\u3060\u3044\u304C\u3042\u308A\u307E\u3059",standardNote:"\u3075\u3064\u3046\u306E\u30CE\u30FC\u30C8",sharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8",couldntEditMember:"\u30E1\u30F3\u30D0\u30FC\u3092\u3078\u3093\u3057\u3085\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntAdd:"%1$d\u306B\u3093\u3061\u3085\u3046%2$d\u306B\u3093\u3092\u3064\u3044\u304B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",couldntDel:"%1$d\u306B\u3093\u3061\u3085\u3046%2$d\u306B\u3093\u3092\u3051\u305B\u307E\u305B\u3093\u3067\u3057\u305F",couldntEditMemberWithCount:"%1$d\u306B\u3093\u3061\u3085\u3046%2$d\u306B\u3093\u3092\u3078\u3093\u3057\u3085\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",removedFromSharedNoteMembers:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306E\u30E1\u30F3\u30D0\u30FC\u3067\u306A\u304F\u306A\u308A\u307E\u3057\u305F",couldntGetDeviceInfo:"\u30C7\u30D0\u30A4\u30B9\u3058\u3087\u3046\u307B\u3046\u3092\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",changePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u304B\u3048\u308B",submitPassword:"\u304B\u3048\u308B",currentPasswordIncorrect:"\u3044\u307E\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u307E\u3061\u304C\u3063\u3066\u3044\u307E\u3059",currentPassword:"\u3044\u307E\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",newPassword:"\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordConfirm:"\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\uFF08\u3082\u3046\u3044\u3061\u3069\uFF09",couldntChangePassword:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u304B\u3048\u3089\u308C\u307E\u305B\u3093\u3067\u3057\u305F",passwordUpdated:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u304B\u308F\u308A\u307E\u3057\u305F",hiUser:"%1$s\u3055\u3093",setNewPassword:"\u3064\u304E\u304B\u3089\u306E\u30ED\u30B0\u30A4\u30F3\u306B\u3064\u304B\u3046\u3042\u305F\u3089\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u305B\u3063\u3066\u3044\u3057\u3066\u304F\u3060\u3055\u3044",welcomeToLns:"\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u3078\u3088\u3046\u3053\u305D",connectionStatus:"\u305B\u3064\u305E\u304F\u3058\u3087\u3046\u304D\u3087\u3046",connectedToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u306B\u305B\u3064\u305E\u304F\u305A\u307F",couldntConnectToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u306B\u3064\u306A\u304C\u3063\u3066\u3044\u306A\u3044\u305F\u3081\u3044\u3061\u3076\u306E\u304D\u306E\u3046\u304C\u3064\u304B\u3048\u307E\u305B\u3093",reconnectingToPushServer:"\u3064\u3046\u3061\u30B5\u30FC\u30D0\u30FC\u3068\u3055\u3044\u305B\u3064\u305E\u304F\u3061\u3085\u3046...",pleaseConnectToInternet:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u306B\u305B\u3064\u305E\u304F\u3057\u3066\u304F\u3060\u3055\u3044",pleaseConnectToInternetDesc:"\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u305B\u3064\u305E\u304F\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u305B\u3064\u305E\u304F\u3092\u304B\u304F\u306B\u3093\u3057\u3066\u304F\u3060\u3055\u3044\u3002",default:"\u304D\u3066\u3044",confirmCloseNoteForOtherSubmissionBox:`\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u3066\u3044\u3057\u3085\u3064\u3070\u3053\u3092\u3072\u3089\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3068\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherTimeline:`\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30BF\u30A4\u30E0\u30E9\u30A4\u30F3\u3092\u3072\u3089\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3068\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,confirmCloseNoteForOtherCourse:`\u307B\u304B\u306E\u3058\u3085\u304E\u3087\u3046\u306E\u30CE\u30FC\u30C8\u3092\u3072\u3089\u3053\u3046\u3068\u3057\u3066\u3044\u307E\u3059\u3002
\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3068\u3058\u3089\u308C\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F`,selectItemsToExport:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",retry:"\u3082\u3046\u3044\u3061\u3069\u3084\u3063\u3066\u307F\u308B",exceedNumberOfExportableItemsMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u30FB\u30D5\u30A9\u30EB\u30C0\u304C\u304A\u304A\u3059\u304E\u308B\u305F\u3081\u3061\u3085\u3046\u3057\u3057\u307E\u3057\u305F",exceedNumberOfExportableHierarchyMsg:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30D5\u30A9\u30EB\u30C0\u304C\u304A\u304A\u3059\u304E\u308B\u305F\u3081\u3061\u3085\u3046\u3057\u3057\u307E\u3057\u305F",analyzingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3088\u307F\u3053\u3093\u3067\u3044\u307E\u3059",exportingDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u304B\u304D\u3060\u3057\u3066\u3044\u307E\u3059",couldntExportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",import:"\u30A4\u30F3\u30DD\u30FC\u30C8",imported:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3057\u305F",export:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",underMaintenace:"\u305F\u3060\u3044\u307E\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u4E2D\u3067\u3059",endSchedule:"\u3057\u3085\u3046\u308A\u3087\u3046\u3088\u3066\u3044",maintenanceNotification:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3088\u3066\u3044\u306E\u304A\u3057\u3089\u305B",maintenanceScheduled:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3088\u3066\u3044\u304C\u3042\u308A\u307E\u3059",watchTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u307F\u308B",seeDetail:"\u304F\u308F\u3057\u304F\u306F\u3053\u3061\u3089",closeTutorialTitle:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u304A\u308F\u308A\u307E\u3059\u304B\uFF1F",closeTutorialMsg:"\u3053\u306E\u3069\u3046\u304C\u306F\u3044\u3064\u3067\u3082\u307F\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059",closeTutorialCheckLabel:"\u3064\u304E\u304B\u3089\u3072\u3087\u3046\u3058\u3057\u306A\u3044",understood:"\u308F\u304B\u3063\u305F\uFF01",failedPlayTutorial:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u306E\u3055\u3044\u305B\u3044\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002",importingNotes:"\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",exportingNotes:"\u30CE\u30FC\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",ipAddressRestricted:"\u3042\u306A\u305F\u306EIP\u30A2\u30C9\u30EC\u30B9\u304B\u3089\u306E\u30A2\u30AF\u30BB\u30B9\u306F\u304D\u3093\u3057\u3055\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToJoin:"\u3042\u306A\u305F\u306F\u3053\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",classHasEnded:"\u3053\u306E\u30AF\u30E9\u30B9\u306F\u3078\u3044\u3053\u3046\u3055\u308C\u307E\u3057\u305F",onlyStudentsAllowedToJoin:"\u305B\u3044\u3068\u3044\u304C\u3044\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",graduatesNotAllowedToJoinClass:"\u305D\u3064\u304E\u3087\u3046\u3057\u305F\u304C\u3063\u3053\u3046\u306E\u30AF\u30E9\u30B9\u306B\u306F\u3055\u3093\u304B\u3067\u304D\u307E\u305B\u3093",ssoLogin422Msg:"\u304C\u3063\u3053\u3046\u306A\u3044\u306B\u304A\u306A\u3058%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u3075\u305F\u3064\u3044\u3058\u3087\u3046\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3057\u305F\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u3044\u304C\u3044\u306E\u308C\u3093\u3051\u3044\u3092\u304B\u3044\u3058\u3087\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ssoLogin422Url:"https://help.loilonote.app/--608bbb836138540022b80af3",ssoLogin404Msg:"\u3053\u306E%1$s\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u30FB\u30B9\u30AF\u30FC\u30EB\u306B\u3068\u3046\u308D\u304F\u3055\u308C\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3064\u304B\u3048\u307E\u305B\u3093\u3002\u304B\u3093\u308A\u3057\u3083\u306B\u304D\u3044\u3066\u307F\u3066\u304F\u3060\u3055\u3044\u3002",webCardExtensionLeadingText:`\u30D6\u30E9\u30A6\u30B6\u306E\u304B\u304F\u3061\u3087\u3046\u304D\u306E\u3046\u3092\u3064\u304B\u3046\u3068
Web\u30AB\u30FC\u30C9\u3092\u304B\u3093\u305F\u3093\u306B\u3064\u304F\u308C\u307E\u3059`,learnMore:"\u304F\u308F\u3057\u304F\u306F\u3053\u3061\u3089",helpWebCardExtensionUrl:"https://help.loilonote.app/--605840aeedaca400222dbd58",helpWebCardExtensionUrlForEdge:"https://help.loilonote.app/--63072f97da08d5001de242fa",importNotes:"%1$d\u3053\u306E\u30CE\u30FC\u30C8\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u307E\u3059",createCourseAfterUserGroupCreation:"\u3064\u3065\u3051\u3066\u3058\u3085\u304E\u3087\u3046\u3092\u3064\u304F\u3063\u3066\u304F\u3060\u3055\u3044",createCourseAfterUserGroupCreationDesc:"\u30AF\u30E9\u30B9\u306E\u306A\u304B\u306B\u3001\u3053\u304F\u3054\u3001\u3059\u3046\u304C\u304F\u3001\u3048\u3044\u3054\u306A\u3069\u3001\u304B\u3082\u304F\u3054\u3068\u306B\u3058\u3085\u304E\u3087\u3046\u3092\u3064\u304F\u308A\u307E\u3059\u3002",insufficientPermission:"\u3042\u306A\u305F\u306F\u3053\u308C\u3092\u3058\u3063\u3053\u3046\u3067\u304D\u307E\u305B\u3093",accessDenied:"\u3042\u306A\u305F\u306F\u3053\u308C\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u307E\u305B\u3093",actionCannotBeCarriedOutOnClosedCourse:"\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046\u3067\u306F\u3058\u3063\u3053\u3046\u3067\u304D\u307E\u305B\u3093",couldNotGetSubmissionAnswers:"\u304B\u3044\u3068\u3046\u304C\u3057\u3085\u3068\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",folderWithThisNameAlreadyExists:"\u304A\u306A\u3058\u306A\u307E\u3048\u306E\u30D5\u30A9\u30EB\u30C0\u304C\u3042\u308A\u307E\u3059",importDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u30A4\u30F3\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059",couldntImportDocument:"\u30D5\u30A1\u30A4\u30EB\u306E\u30A4\u30F3\u30DD\u30FC\u30C8\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",folderForImportedItemsWillBeCreated:"\u30A4\u30F3\u30DD\u30FC\u30C8\u3055\u304D\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u3064\u304F\u308A\u307E\u3059",administrator:"\u304B\u3093\u308A\u3057\u3083",owner:"\u30AA\u30FC\u30CA\u30FC",reuse:"\u3055\u3044\u308A\u3088\u3046",reuseThisTestCard:"\u3053\u306E\u30C6\u30B9\u30C8\u30AB\u30FC\u30C9\u3092\u3055\u3044\u308A\u3088\u3046",reuseThisAttendanceCard:"\u3053\u306E\u3057\u3085\u3063\u3051\u3064\u30AB\u30FC\u30C9\u3092\u3055\u3044\u308A\u3088\u3046",webPageSharedText:"Web\u30DA\u30FC\u30B8\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u307E\u3057\u305F",webPageSharedTextBy:"%1$s \u3055\u3093\u304B\u3089\u3001Web\u30DA\u30FC\u30B8\u304C\u304D\u3087\u3046\u3086\u3046\u3055\u308C\u307E\u3057\u305F",openWebPage:"Web\u30DA\u30FC\u30B8\u3092\u3072\u3089\u304F",changeLayout:"\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u304B\u3048\u308B",changeLayoutDescription:"\u3066\u3044\u3057\u3085\u3064\u3076\u3064\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u304B\u3048\u3089\u308C\u307E\u3059",resetLayout:"\u306F\u3058\u3081\u306E\u305B\u3063\u3066\u3044\u306B\u3082\u3069\u3059",pleaseWaitForMaintenanceEnd:"\u30E1\u30F3\u30C6\u30CA\u30F3\u30B9\u3057\u3085\u3046\u308A\u3087\u3046\u307E\u3067\u3057\u3070\u3089\u304F\u304A\u307E\u3061\u304F\u3060\u3055\u3044",uploadingXXX:"%1$s\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u3044\u307E\u3059...",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",experimentalFeatures:"\u304A\u305F\u3081\u3057\u3061\u3085\u3046\u306E\u304D\u306E\u3046",folderCannotBeUploaded:"\u30D5\u30A9\u30EB\u30C0\u30FC\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",filesNoExtCannotBeUploaded:"\u304B\u304F\u3061\u3087\u3046\u3057\u306E\u306A\u3044\u30D5\u30A1\u30A4\u30EB\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093",fileWithInvalidNameContained:"\u3078\u3093\u306A\u306A\u307E\u3048\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u3075\u304F\u307E\u308C\u3066\u3044\u307E\u3059",insufficientPermissionToDocumentGroup:"\u3042\u306A\u305F\u306F\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u304B\u304D\u3053\u3081\u307E\u305B\u3093",newSharedNote:"\u3057\u3093\u304D\u304D\u3087\u3046\u3086\u3046\u306E\u30FC\u3068",convertToSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306B\u3059\u308B",chooseNoteToShare:"\u304D\u3087\u3046\u3086\u3046\u3059\u308B\u30CE\u30FC\u30C8\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",chooseUsersToBeShared:"\u304D\u3087\u3046\u3086\u3046\u3059\u308B\u30E6\u30FC\u30B6\u30FC\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",shareXXX:" %1$s\u3092\u304D\u3087\u3046\u3086\u3046",confirmShareNote:"\u304D\u3087\u3046\u3086\u3046\u3057\u305F\u30CE\u30FC\u30C8\u306F\u3075\u3064\u3046\u306E\u30CE\u30FC\u30C8\u306B\u306F\u3082\u3069\u305B\u307E\u305B\u3093\u3002\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u304C\u3064\u304B\u3048\u306A\u3044\u30A2\u30D7\u30EA\u3067\u306F\u3053\u3053\u306B\u3072\u3087\u3046\u3058\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u304C\u3001\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",failedGoogleLoginHelpText:"Google\u3067\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u306A\u3044\u3068\u304D\u306F\u3053\u3061\u3089",failedGoogleLoginHelpLink:"https://help.loilonote.app/--613570bde97042001dfbd713",teacherNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u305F\u3093\u3068\u3046\u3057\u3066\u3044\u305F\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",studentNoClosedCourseTitle:"\u3042\u306A\u305F\u304C\u3055\u3093\u304B\u3057\u3066\u3044\u305F\u3058\u3085\u304E\u3087\u3046\u306F\u3042\u308A\u307E\u305B\u3093",pasteTips:"\u30C6\u30AD\u30B9\u30C8\u3084\u30D6\u30E9\u30A6\u30B6\u3067\u30B3\u30D4\u30FC\u3057\u305F\u304C\u305E\u3046\u3092\u306F\u308A\u3064\u3051\u3067\u304D\u307E\u3059",noMembersInGroup:"\u30AF\u30E9\u30B9\u306B\u305B\u3044\u3068\u304C\u3055\u3093\u304B\u3057\u3066\u3044\u307E\u305B\u3093",showCodeToInviteStudents:"\u30AF\u30E9\u30B9\u3055\u3093\u304B\u30B3\u30FC\u30C9\u3092\u3072\u3087\u3046\u3058\u3057\u3066\u3001\u305B\u3044\u3068\u306B\u306B\u3085\u3046\u308A\u3087\u304F\u3057\u3066\u3082\u3089\u3063\u3066\u304F\u3060\u3055\u3044",members:"\u306B\u3093",saved:"\u307B\u305E\u3093\u305A\u307F",displayByStudent:"\u305B\u3044\u3068\u3054\u3068\u306B\u3072\u3087\u3046\u3058\u3059\u308B",collectCard:"\u30AB\u30FC\u30C9\u3092\u3042\u3064\u3081\u308B",collectedCard:"\u3042\u3064\u3081\u305F\u30AB\u30FC\u30C9",collectCardDialogTitle:"\u30AB\u30FC\u30C9\u3092\u307E\u3093\u306A\u304B\u306B\u3042\u3064\u3081\u307E\u3059\u304B\uFF1F",collect:"\u3042\u3064\u3081\u308B",confirmCollectCardMessage:"\u3068\u3066\u3082\u304A\u304A\u304D\u306A\u30AB\u30FC\u30C9\u3084\u3001\u306F\u306A\u308C\u305F\u3044\u3061\u306B\u30AB\u30FC\u30C9\u304C\u3042\u308B\u3088\u3046\u3067\u3059\u3002%1$d\u307E\u3044\u306E\u30AB\u30FC\u30C9\u3092\u307E\u3093\u306A\u304B\u306B\u3042\u3064\u3081\u3066\u30CE\u30FC\u30C8\u3092\u306A\u304A\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",completeCollectCardMessage:"\u304A\u304A\u304D\u306A\u30AB\u30FC\u30C9\u3084\u306F\u306A\u308C\u305F\u3044\u3061\u306B\u3042\u3063\u305F\u30AB\u30FC\u30C9\u3092\u3042\u3064\u3081\u307E\u3057\u305F\u3002",sentToNote:"\u300C%1$s\u300D\u306B\u305D\u3046\u3057\u3093\u3057\u307E\u3057\u305F",myNote:"\u3058\u3076\u3093\u306E\u30CE\u30FC\u30C8",searchNote:"\u30CE\u30FC\u30C8\u3092\u3055\u304C\u3059",searchMaterial:"\u3057\u308A\u3087\u3046\u3092\u3055\u304C\u3059",enableSearch:"\u3051\u3093\u3055\u304F\u3092\u3086\u3046\u3053\u3046\u306B\u3059\u308B",noMatchesFound:"\u3051\u3093\u3055\u304F\u3051\u3063\u304B\u304C\u3042\u308A\u307E\u305B\u3093",endSearch:"\u3051\u3093\u3055\u304F\u3092\u3084\u3081\u308B",searchResult:"\u3051\u3093\u3055\u304F\u3051\u3063\u304B",graduated:"\u305D\u3064\u304E\u3087\u3046",textPointerIconPath:"/svg/text_circle.svg",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadAndUploadLater:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3066\u3042\u3068\u3067\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u306A\u304A\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",reloading:"\u3055\u3044\u3088\u307F\u3053\u307F\u3061\u3085\u3046...",graduateMsg:"\u3054\u305D\u3064\u304E\u3087\u3046\u304A\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307E\u3059\u3002\u3044\u307E\u307E\u3067\u306E\u3058\u3085\u304E\u3087\u3046\u306F\u300C\u3078\u3044\u3053\u3046\u3057\u305F\u3058\u3085\u304E\u3087\u3046\u300D\u304B\u3089\u307F\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",sharedNoteProtocolVersionErrorMsg:"\u3064\u304B\u3063\u3066\u3044\u308B\u30A2\u30D7\u30EA\u306F\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306E\u3044\u304F\u3064\u304B\u306E\u304D\u306E\u3046\u304C\u3064\u304B\u3048\u307E\u305B\u3093\u3002\u30A2\u30D7\u30EA\u3092\u3055\u3044\u3088\u307F\u3053\u307F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",couldNotConnectSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306B\u305B\u3064\u305E\u304F\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",failedToSaveDataToServer:`\u30C7\u30FC\u30BF\u306E\u307B\u305E\u3093\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002
\u304D\u3087\u3046\u305B\u3044\u3066\u304D\u306B\u3068\u3058\u307E\u3059\u304B\uFF1F`,recordingSettingTitle:"\u308D\u304F\u304A\u3093\u30FB\u308D\u304F\u304C",enableAudioNoiseReduction:"\u3056\u3064\u304A\u3093\u3092\u3078\u3089\u3059",loadingFailed:"\u3088\u307F\u3053\u307F\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F",decodingFailed:"\u3088\u307F\u3068\u308A\u306B\u3057\u3063\u3071\u3044\u3057\u307E\u3057\u305F\u3002",browserCannotReadTheVideo:"\u3053\u306E\u3069\u3046\u304C\u306F\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u3055\u3044\u305B\u3044\u3067\u304D\u307E\u305B\u3093",browserCannotReadTheAudio:"\u3053\u306E\u304A\u3093\u305B\u3044\u306F\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u3067\u3055\u3044\u305B\u3044\u3067\u304D\u307E\u305B\u3093",networkError:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A8\u30E9\u30FC",loadingInterrupted:"\u3088\u307F\u3053\u307F\u304C\u3068\u3061\u3085\u3046\u3067\u3068\u307E\u308A\u307E\u3057\u305F",couldntEditNote:"\u30CE\u30FC\u30C8\u3092\u3078\u3093\u3053\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",noteIsReadonly:"\u3053\u306E\u30CE\u30FC\u30C8\u306F\u3088\u307F\u3068\u308A\u305B\u3093\u3088\u3046\u3067\u3059",notConnectedToSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u306B\u305B\u3064\u305E\u304F\u3057\u3066\u3044\u307E\u305B\u3093",materialBoxAccessibleMessageForTeacher:"\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u306F\u305B\u3044\u3068\u3082\u3048\u3064\u3089\u3093\u3067\u304D\u307E\u3059\u3002",trashBox:"\u3054\u307F\u3070\u3053",restore:"\u3082\u3068\u306B\u3082\u3069\u3059",selectItemsToRestore:"\u3082\u3068\u306B\u3082\u3069\u3059\u3082\u306E\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",restoringDocument:"\u30D5\u30A1\u30A4\u30EB\u3092\u3082\u3068\u306B\u3082\u3069\u3057\u3066\u3044\u307E\u3059...",invalidDocumentRestoreDetails:"\u30D5\u30A1\u30A4\u30EB\u3001\u30D5\u30A9\u30EB\u30C0\u3001\u307E\u305F\u306F\u3082\u3068\u306B\u3082\u3069\u3059\u3055\u304D\u304C\u3075\u305B\u3044\u3067\u3059",couldntRestoreDocument:"\u3082\u3068\u306B\u3082\u3069\u3059\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",materialTrashBoxHeaderMessage:"\u3054\u307F\u3070\u3053\u306B\u306F\u3044\u3063\u3066\u304B\u308930\u306B\u3061\u3051\u3044\u304B\u3059\u308B\u3068\u304B\u3093\u305C\u3093\u306B\u3055\u304F\u3058\u3087\u3055\u308C\u307E\u3059",notShared:"\u304D\u3087\u3046\u3086\u3046\u3057\u306A\u3044",sharedInManageable:"\u304B\u3093\u308A",sharedInWritable:"\u304B\u304D\u3053\u307F",sharedInViewOnly:"\u3048\u3064\u3089\u3093\u306E\u307F",sharedNoteMembers:"\u304D\u3087\u3046\u3086\u3046\u30E1\u30F3\u30D0\u30FC",settings:"\u305B\u3063\u3066\u3044",sharedNoteSettings:"\u304D\u3087\u3046\u3086\u3046\u305B\u3063\u3066\u3044",couldNotChangeSharedNoteSettings:"\u304D\u3087\u3046\u3086\u3046\u305B\u3063\u3066\u3044\u3092\u3078\u3093\u3053\u3046\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",change:"\u3078\u3093\u3053\u3046",noteName:"\u306A\u307E\u3048",sharedRange:"\u304D\u3087\u3046\u3086\u3046\u3059\u308B\u306F\u3093\u3044",allTeachers:"\u305B\u3093\u305B\u3044\u305C\u3093\u3044\u3093",add:"\u3064\u3044\u304B",execute:"\u3058\u3063\u3053\u3046",javaScriptRequired:"JavaScript\u304C\u3080\u3053\u3046\u306B\u306A\u3063\u3066\u3044\u307E\u3059\u3002\u30ED\u30A4\u30ED\u30CE\u30FC\u30C8\u3092\u3064\u304B\u3046\u305F\u3081\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306EJavaScript\u3092\u3086\u3046\u3053\u3046\u306B\u305B\u3063\u3066\u3044\u3057\u3066\u304F\u3060\u3055\u3044\u3002",selectQuizSharingMode:"\u306F\u3044\u3057\u3093\u30E2\u30FC\u30C9\u3092\u3048\u3089\u3093\u3067\u304F\u3060\u3055\u3044",quizSharingModeNormal:"\u3064\u3046\u3058\u3087\u3046\u30E2\u30FC\u30C9",quizSharingModeGame:"\u30B2\u30FC\u30E0\u30E2\u30FC\u30C9(\u03B2)",reconnectingToSharedNote:"\u304D\u3087\u3046\u3086\u3046\u30CE\u30FC\u30C8\u3068\u3055\u3044\u305B\u3064\u305E\u304F\u3061\u3085\u3046..."};var dK={start:"\u958B\u59CB",status404ItemNotFound:"\u9805\u76EE\u4E0D\u5B58\u5728",aboutThisApp:"\u95DC\u65BC\u9019\u500BApp",addCardDialogTitle:"\u65B0\u589E\u5361\u7247",addCourseDialogJoinCourseBtnLabel:"\u65B0\u589E",addCourseLabel:"\u65B0\u589E\u8AB2\u7A0B",addCourseDesc:"\u8ACB\u300C\u65B0\u589E\u8AB2\u7A0B\u300D",adminPage:"\u7BA1\u7406\u9801\u9762",allMembers:"\u6240\u6709\u4EBA",alreadyJoinedGroup:"\u5DF2\u53C3\u52A0",and:"\u548C",andOtherMembers:"\u5176\u4ED6%1$d",anonymous:"\u4E0D\u8A18\u540D",answersNotVisibleWarnMsg:"\u8001\u5E2B\u672B\u958B\u5553\u5171\u4EAB\u529F\u80FD\uFF0C\u76EE\u524D\u7121\u6CD5\u53C3\u95B1\u5176\u4ED6\u4EBA\u7684\u56DE\u7B54",answersNotVisibleWarnTitle:"\u672A\u5206\u4EAB\u4E4B\u56DE\u7B54",api202ErrorMsg:"202:\u5305\u542B %1$s\u4E4B\u6A94\u6848\u672A\u5B8C\u6210\u4E0A\u50B3\u8655\u7406\u3002\u7A0D\u5F85\u7247\u523B\u5F8C\u5373\u53EF\u8B80\u53D6\u3002",api403ErrorMsg:"\u6C92\u6709%1$s\u4E4B\u6B0A\u9650\u3002\u8A73\u7D30\u60C5\u5F62\u8ACB\u6D3D\u6821\u65B9\u7BA1\u7406\u4EBA\u54E1\u3002",api404ErrorMsg:"\u7121\u6CD5\u627E\u5230\u4F3A\u670D\u5668\u6240\u8981\u6C42\u4E4B%1$s\u3002\u7121\u6CD5\u5EFA\u7ACB\u6B64%1$s\uFF0C\u5C07\u6709\u53EF\u80FD\u88AB\u522A\u9664\u3002",arrange:"\u6392\u5217",asNextCard:"\u4E0B\u4E00\u5F35\u5361\u7247",attending:"\u4E0A\u8AB2\u4E2D",attendingOtherCourse:"\u53C3\u52A0\u5176\u4ED6\u8AB2\u7A0B",audio:"\u97F3\u983B",audioDefaultFileName:"\u97F3\u983B",audioRecordBtnLabel:"\u9304\u97F3",automatic:"\u81EA\u52D5",back:"\u8FD4\u56DE",backToAnswerList:"\u8FD4\u56DE\u56DE\u7B54\u4E00\u89BD\u8868",brokenNoteErrorMsg:"\u5132\u5B58\u65BC\u4F3A\u670D\u5668\u4E0A\u4E4B%1$s\u53EF\u80FD\u767C\u751F\u6BC0\u640D\u3002\u656C\u8ACB\u806F\u7D61\u672C\u516C\u53F8\u5BA2\u670D\u90E8\u9580\u8655\u7406\u3002\uFF08\u932F\u8AA4\u4EE3\u78BC: %2$d,\u8AB2\u7A0BID: %3$d,\u7B46\u8A18ID: %4$s\uFF09",browserDoesntSupportAudioRecording:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668\u4E0D\u652F\u63F4\u9304\u97F3\u529F\u80FD",browserDoesntSupportMediaCapture:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668\u4E0D\u652F\u63F4\u7167\u76F8\u529F\u80FD",browsingWeb:"Web",camera:"\u7167\u76F8\u6A5F",cancel:"\u53D6\u6D88",canceledBatchDownload:"\u6279\u6B21\u4E0B\u8F09\u5DF2\u4E2D\u65B7",cancelingDownload:"\u6B63\u5728\u53D6\u6D88\u4E0B\u8F09...",cannotDeleteThisHistory:"\u7121\u6CD5\u522A\u9664\u6B64\u5C65\u6B77",cannotInsertWhileStillLoadingDocument:"\u8CC7\u6599\u8B80\u53D6\u4F5C\u696D\u5C1A\u672A\u5B8C\u6210\uFF0C\u7121\u6CD5\u65B0\u589E\u5361\u7247",cantFindUsableDevice:"\u7121\u6CD5\u53D6\u5F97\u53EF\u4EE5\u4F7F\u7528\u4E4B\u8F09\u5177\u8CC7\u8A0A",cardHasUnsavedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u6B63\u5728\u4E0A\u50B3\u7684\u6A94\u6848",cardHasUploadFailedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u4E0A\u50B3\u5931\u6557\u7684\u6A94\u6848",changeLayout:"\u8B8A\u66F4\u7248\u9762",changeLayoutDescription:"\u53EF\u4EE5\u8B8A\u66F4\u63D0\u51FA\u8CC7\u6599\u7684\u7248\u9762",changeTools:"\u5207\u63DB\u601D\u7DAD\u5DE5\u5177",renamingNote:"\u6B63\u5728\u5C07\u300C%1$s\u300D\u4E4B\u540D\u7A31\u8B8A\u66F4\u70BA\u300C%2$s\u300D...",checkAttendance:"\u78BA\u8A8D\u53C3\u52A0\u8005",checking:"\u78BA\u8A8D\u4E2D...",checkScreenLock:"\u78BA\u8A8D\u87A2\u5E55\u9396\u5B9A",checkServiceStatus:"\u8ACB\u78BA\u8A8D\u4F3A\u670D\u5668\u4E4B\u670D\u52D9\u72C0\u6CC1",selectItemsToCopy:"\u8ACB\u9078\u64C7\u8981\u8907\u88FD\u7684\u9805\u76EE",selectItemsToErase:"\u8ACB\u9078\u64C7\u8981\u522A\u9664\u7684\u9805\u76EE",selectItemsToMove:"\u8ACB\u9078\u64C7\u8981\u79FB\u52D5\u7684\u9805\u76EE",selectItemToRename:"\u8ACB\u9EDE\u64CA\u8981\u8B8A\u66F4\u540D\u7A31\u7684\u9805\u76EE",askWhichFolderToCopyItTo:"\u8981\u8907\u88FD\u5230\u54EA\u4E00\u500B\u6587\u4EF6\u593E\uFF1F",askWhichFolderToImportItTo:"\u8981\u532F\u5165\u5230\u54EA\u4E00\u500B\u6587\u4EF6\u593E\uFF1F",askWhichFolderToMoveItTo:"\u8981\u79FB\u52D5\u5230\u54EA\u4E00\u500B\u6587\u4EF6\u593E\uFF1F",askWhichFolderToRestoreItTo:"\u8ACB\u554F\u60A8\u8981\u5FA9\u539F\u81F3\u54EA\u500B\u8CC7\u6599\u593E\u5462\uFF1F",askWhichFolderToSaveItTo:"\u8981\u4FDD\u5B58\u5230\u54EA\u4E00\u500B\u6587\u4EF6\u593E\uFF1F",chooseGroupToAddTo:"\u8ACB\u9078\u64C7\u60A8\u8981\u6388\u8AB2\u4E4B\u73ED\u7D1A",noGroups:"\u672C\u5E74\u5EA6\u5C1A\u672A\u6709\u73ED\u7D1A\u767B\u8A18",createNewGroupDesc:"\u8ACB\u7531\u2193 \u300C\u5EFA\u7ACB\u65B0\u73ED\u7D1A\u300D",groupDesc:"\u4E00\u7FA4\u540C\u6642\u4E0A\u8AB2\u4E4B\u5B78\u751F\u7A31\u4E4B\u70BA\u300C\u73ED\u7D1A\u300D",chooseGroupToDelete:"\u8ACB\u9078\u64C7\u8981\u522A\u9664\u4E4B\u73ED\u7D1A",chooseNoteToCopy:"\u8ACB\u9078\u64C7\u8981\u8907\u88FD\u4E4B\u7B46\u8A18",chooseNoteToRename:"\u8ACB\u9078\u64C7\u8981\u8B8A\u66F4\u540D\u7A31\u4E4B\u7B46\u8A18",choosingCourse:"\u9078\u8AB2\u4E2D",close:"\u95DC\u9589",closeAfterTen:"10\u5206\u9418\u5F8C",closeCamera:"\u95DC\u9589\u7167\u76F8\u6A5F",closedTaskLabel:"\u622A\u6B62",closeNote:"\u95DC\u9589\u7B46\u8A18",closeNow:"\u7ACB\u523B\u95DC\u9589",closeThisScreen:"\u95DC\u9589\u6B64\u756B\u9762",closeToday:"\u4ECA\u65E5\u5167",comparison:"\u6BD4\u8F03",complete:"\u5B8C\u6210",completedBatchDownload:"\u6279\u6B21\u4E0B\u8F09\u5DF2\u5B8C\u6210",confirmAnswerShare:"\u5206\u4EAB\u5B78\u751F\u7B54\u6848\u3002\u662F\u5426\u57F7\u884C?",confirmAudioRecordingOverwrite:"\u91CD\u65B0\u9304\u97F3\u5C07\u8986\u84CB\u539F\u6709\u97F3\u6A94\u3002\u662F\u5426\u57F7\u884C?",confirmCardDelete:"\u662F\u5426\u522A\u9664\u5361\u7247?",confirmDeleteTimelineHistory:"\u522A\u9664\u6642\u9593\u8EF8\u5C65\u6B77\u3002\u662F\u5426\u57F7\u884C\uFF1F",confirmDuplicateAllConnectedCards:"\u5EFA\u7ACB\u6240\u6709\u4E32\u806F\u4E4B\u5361\u7247\u7684\u526F\u672C\u3002\u662F\u5426\u78BA\u5B9A\uFF1F",confirmCreateSubject:"\u662F\u5426\u5EFA\u7ACB\u300C%1$s\u300D\uFF1F",confirmDelete:"\u662F\u5426\u522A\u9664?",confirmDeleteAudioRecording:"\u522A\u9664\u97F3\u6A94\u3002\u662F\u5426\u57F7\u884C?",confirmGroupJoin:"\u53C3\u52A0%1$s\u3002\u662F\u5426\u57F7\u884C?",confirmLogout:"\u662F\u5426\u767B\u51FA?",confirmMultiChildCardDelete:"\u662F\u5426\u522A\u9664\u5361\u7247\u8207%1$d\u4E4B\u5B50\u5361\u7247\uFF1F",confirmMultiCardGroupDelete:"\u662F\u5426\u522A\u9664%1$d\u4E4B\u5361\u7247\u8207\u5B50\u5361\u7247\uFF1F",confirmMultiFileDelete:"\u522A\u9664%1$d\u6A94\u6848\u3002\u662F\u5426\u57F7\u884C\uFF1F",confirmReloadWhileUnsavedChangesExist:"\u7B46\u8A18\u6709\u672A\u4FDD\u5B58\u4E4B\u8B8A\u66F4\u5167\u5BB9\uFF0C\u57F7\u884C\u66F4\u65B0\u6709\u53EF\u80FD\u6703\u6D88\u5931\uFF0C\u662F\u5426\u7E7C\u7E8C\u57F7\u884C?",confirmResetVideoCamera:"\u91CD\u65B0\u9304\u5F71\u3002\u662F\u5426\u57F7\u884C?",confirmResubmit:"\u662F\u5426\u518D\u6B21\u7E73\u4EA4\u81F3\u300C%1$s\u300D?",confirmRevealSubmitterNames:"\u5C07\u6392\u5217\u9806\u5E8F\u8B8A\u66F4\u70BA\u300C%1$s\u300D\u3002\u986F\u793A\u6240\u6709\u56DE\u7B54\u8005\u4E4B\u59D3\u540D\uFF0C\u662F\u5426\u57F7\u884C\uFF1F",confirmSendBack:"\u662F\u5426\u56DE\u8986?",confirmSendToAll:"\u662F\u5426\u50B3\u9001\u7D66\u6240\u6709\u4EBA\uFF1F",confirmSendBackAll:"\u662F\u5426\u5C07\u5DF2\u6279\u6539\u4E4B\u4F5C\u696D\u56DE\u8986\u7D66%1$d\uFF1F",confirmSingleFileDelete:"\u522A\u9664\u4E00\u500B\u6A94\u6848\u3002\u662F\u5426\u57F7\u884C?",confirmStartPresentation:"\u8B93\u5B78\u751F\u958B\u59CB\u767C\u8868\u55CE?",confirmStartScreenSharing:"\u662F\u5426\u767C\u5E03\u756B\u9762?",copy:"\u8907\u88FD",duplicate:"\u5EFA\u7ACB\u526F\u672C",duplicateAllConnectedCards:"\u5EFA\u7ACB\u6240\u6709\u4E32\u806F\u4E4B\u5361\u7247\u7684\u526F\u672C",couldntReuseCard:"\u518D\u6B21\u4F7F\u7528\u5361\u7247\u5931\u6557",copyingDocument:"\u6B63\u5728\u8907\u88FD\u6A94\u6848...",copyingNote:"\u6B63\u5728\u8907\u88FD\u7B46\u8A18...",copyOf:"%1$s\u4E4B\u526F\u672C",duplicateThisCard:"\u5EFA\u7ACB\u90191\u5F35\u5361\u7247\u7684\u526F\u672C",copyToThisFolder:"\u8907\u88FD\u5230\u6B64\u8CC7\u6599\u593E",corruptFileErrorMsg:"\u6A94\u6848\u7121\u6CD5\u8F09\u5165\u3002\u8A72\u6A94\u6848\u53EF\u80FD\u767C\u751F\u6BC0\u640D\u3002",couldntDelete:"\u522A\u9664\u5931\u6557",couldntRenameNote:"\u7121\u6CD5\u8B8A\u66F4\u7B46\u8A18\u540D\u7A31",couldntChangeScreenLock:"\u7121\u6CD5\u8B8A\u66F4\u64CD\u4F5C\u9396\u5B9A",couldntChangeStudentSharingLock:"\u7121\u6CD5\u8B8A\u66F4\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A",couldntCopyDocument:"\u7121\u6CD5\u8907\u88FD\u6A94\u6848",couldntCopyNote:"\u8907\u88FD\u7B46\u8A18\u5931\u6557",couldntCreateFolder:"\u7121\u6CD5\u5EFA\u7ACB\u6A94\u6848\u593E",couldntCreateGroup:"\u7121\u6CD5\u5EFA\u7ACB\u73ED\u7D1A",couldntCreateNote:"\u7121\u6CD5\u5EFA\u7ACB\u7B46\u8A18",couldntCreateSubject:"\u7121\u6CD5\u5EFA\u7ACB\u8AB2\u7A0B",couldntCreateTask:"\u7121\u6CD5\u5EFA\u7ACB\u7E73\u4EA4\u76D2",couldntDeleteArchivedGroup:"\u6B64\u73ED\u7D1A\u5DF2\u8F49\u5165\u904E\u53BB\u7684\u8AB2\u7A0B\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsMaterialsExist:"\u6A94\u6848\u5DF2\u5132\u5B58\u65BC\u6B64\u8AB2\u7A0B\u4E4B\u8CC7\u6599\u76D2\u4E2D\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsNotesExist:"\u6B64\u8AB2\u7A0B\u542B\u6709\u5DF2\u5132\u5B58\u4E4B\u7B46\u8A18\uFF0C\u7121\u6CD5\u522A\u9664",couldntDeleteAsSubjectsExist:"\u6B64\u73ED\u7D1A\u6709\u5DF2\u767B\u9304\u4E4B\u8AB2\u7A0B\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteAsUsersExist:"\u6B64\u73ED\u7D1A\u6709\u5DF2\u767B\u9304\u4E4B\u4F7F\u7528\u8005\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteClosedGroup:"\u6B64\u73ED\u7D1A\u5DF2\u95DC\u9589\uFF0C\u7121\u6CD5\u522A\u9664\u3002",couldntDeleteCourse:"\u7121\u6CD5\u522A\u9664\u8AB2\u7A0B",couldntDeleteDocument:"\u7121\u6CD5\u522A\u9664\u6A94\u6848",couldntDeleteGroup:"\u7121\u6CD5\u522A\u9664\u73ED\u7D1A",couldntDeleteNote:"\u522A\u9664\u300C%1$s\u300D\u5931\u6557",couldntDeleteTask:"\u7121\u6CD5\u522A\u9664\u7E73\u4EA4\u76D2",describeTask:"\u8ACB\u8F38\u5165\u7E73\u4EA4\u5167\u5BB9",couldntDownloadFile:"\u7121\u6CD5\u4E0B\u8F09\u6A94\u6848",couldntDownloadFileErrorMsg:"%1$d: \u7121\u6CD5\u7531\u4F3A\u670D\u5668\u4E0B\u8F09\u6A94\u6848\u3002\u8ACB\u91CD\u8A66\u3002",couldntGet_CheckInternetConnection:"\u7121\u6CD5\u50B3\u9001\u8ACB\u6C42\u3002\u8ACB\u78BA\u8A8D\u7DB2\u8DEF\u72C0\u614B\u3002",checkInternetConnection:"\u8ACB\u78BA\u8A8D\u7DB2\u8DEF\u72C0\u614B\u3002",couldntGetCourses:"\u7121\u6CD5\u53D6\u5F97\u8AB2\u7A0B",couldntGetNote:"\u7121\u6CD5\u53D6\u5F97\u7B46\u8A18",couldntGetOtherTeachersCourses:"\u7121\u6CD5\u53D6\u5F97\u5176\u4ED6\u6559\u5E2B\u4E4B\u8AB2\u7A0B",couldntGetPhotoData:"\u7121\u6CD5\u53D6\u5F97\u7167\u7247\u6578\u64DA\u8CC7\u6599",couldntGetPreviousYearsCourses:"\u7121\u6CD5\u53D6\u5F97\u5E74\u5EA6\u4E00\u89BD\u8868",couldntGetVideoData:"\u7121\u6CD5\u53D6\u5F97\u5F71\u7247\u6578\u64DA\u8CC7\u6599",couldntInsertFile:"\u6A94\u6848\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertItemTitle:"%1$s\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertPhoto:"\u7167\u7247\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntInsertVideo:"\u5F71\u7247\u7121\u6CD5\u52A0\u5165\u7B46\u8A18",couldntJoinGroup:"\u7121\u6CD5\u53C3\u52A0\u6B64\u73ED\u7D1A",couldntJoinSubject:"\u7121\u6CD5\u53C3\u52A0\u8AB2\u7A0B",couldntLoadFileTitle:"\u7121\u6CD5\u8B80\u53D6\u6A94\u6848",couldntMoveDocument:"\u7121\u6CD5\u79FB\u52D5\u6A94\u6848",couldntOpenItem:"\u7121\u6CD5\u6253\u958B%1$s\u7B46\u8A18\u8CC7\u6599",couldntReceiveScreenShare:"\u7121\u6CD5\u63A5\u6536\u767C\u5E03\u4E4B\u756B\u9762",couldntRenameItem:"\u7121\u6CD5\u8B8A\u66F4%1$s\u4E4B\u540D\u7A31",couldntSaveNote:"\u7121\u6CD5\u5132\u5B58\u7B46\u8A18",couldntSaveToMaterials:"\u7121\u6CD5\u5132\u5B58\u6A94\u6848",couldntSendBackDocument:"\u7121\u6CD5\u56DE\u8986",couldntSendCards:"\u7121\u6CD5\u50B3\u9001\u8CC7\u6599",couldntShareScreen:"\u7121\u6CD5\u767C\u5E03\u756B\u9762",couldntStartAudioRecording:"\u7121\u6CD5\u958B\u59CB\u9304\u97F3",couldntFinishedAudioRecording:"\u7121\u6CD5\u5B8C\u6210\u9304\u97F3",couldntSubmitCards:"\u7121\u6CD5\u7E73\u4EA4",couldntSubmitWhileSubmittingOthers:"\u6B63\u5728\u6536\u96C6\u5176\u4ED6\u7E73\u4EA4\u8CC7\u6599\uFF0C\u76EE\u524D\u7121\u6CD5\u7E73\u4EA4",couldntUpdateSubmission:"\u7121\u6CD5\u66F4\u65B0\u7E73\u4EA4\u72C0\u614B",couldntUploadDocument:"\u6A94\u6848\u7121\u6CD5\u4E0A\u50B3",couldntUploadNotes:"\u7B46\u8A18\u7121\u6CD5\u4E0A\u50B3",courseAccessDenied:"\u5B58\u53D6\u6B64\u8AB2\u7A0B\u4E4B\u6B0A\u9650\u4E0D\u8DB3",courseDoesntExist:"\u8A72\u8AB2\u7A0B\u4E0D\u5B58\u5728",courseFetchErrorOccurred:"\u53D6\u5F97\u8AB2\u7A0B\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",groupFetchErrorOccurred:"\u53D6\u5F97\u73ED\u7D1A\u5217\u8868\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",courseJoinedMark:"\u5DF2\u65B0\u589E",courseListTitle:"\u8AB2\u7A0B\u4E00\u89BD",create:"\u5EFA\u7ACB",createCard:"\u88FD\u4F5C\u5361\u7247",createdSubjectsListTitle:"\u5DF2\u5EFA\u7ACB\u4E4B\u8AB2\u7A0B",createFolder:"\u5EFA\u7ACB\u8CC7\u6599\u593E",createNewGroupBtnLabel:"\u5EFA\u7ACB\u65B0\u73ED\u7D1A",createNewNote:"\u5EFA\u7ACB\u65B0\u7B46\u8A18",createNewSubjectBtnLabel:"\u5EFA\u7ACB\u65B0\u8AB2\u7A0B",createNewTask:"\u5EFA\u7ACB\u65B0\u7E73\u4EA4\u76D2",creatingFolder:"\u8CC7\u6599\u593E\u5EFA\u7ACB\u4E2D...",creatingGroup:"\u73ED\u7D1A\u300C%1$s\u300D\u5EFA\u7ACB\u4E2D...",creatingNote:"\u300C%1$s\u300D\u5EFA\u7ACB\u4E2D...",creatingSubjectForGroup:"\u5C07\u8AB2\u7A0B\u300C%1$s\u300D\u5EFA\u7ACB\u5230\u73ED\u7D1A\u300C%2$s\u300D\uFF0C\u4F5C\u696D\u4E2D...",creatingTask:"\u7E73\u4EA4\u76D2\u5EFA\u7ACB\u4E2D...",webCard:"Web\u5361",creatingWebCard:"Web\u5361\u6E96\u5099\u4E2D...",cut:"\u526A\u4E0B",dateLabel:"\u65E5\u671F",daysRemaining:"\u5269\u9918%d\u65E5",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",deferToOtherDeviceVersionDesc:"\u6368\u68C4\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\uFF0C\u7531\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4\u5167\u5BB9\u8986\u84CB\u904E\u4F86",deferToOtherDeviceVersionTitle:"\u512A\u5148\u8655\u7406\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4",delete:"\u522A\u9664",deletingDocument:"\u6B63\u5728\u522A\u9664\u6A94\u6848...",deletingGroup:"\u6B63\u5728\u522A\u9664\u300C%1$s\u300D\u73ED\u7D1A...",deletingNote:"\u6B63\u5728\u522A\u9664\u300C%1$s\u300D...",deletingTask:"\u6B63\u5728\u522A\u9664\u300C%1$s\u300D\u7E73\u4EA4\u76D2...",deletingTimelineHistory:"\u6B63\u5728\u522A\u9664\u5C65\u6B77...",didInsertFile:"\u5DF2\u5C07\u6A94\u6848\u52A0\u5165\u7B46\u8A18!",didInsertMaterials:"\u5DF2\u5C07\u8CC7\u6599\u52A0\u5165\u7B46\u8A18!",didInsertPhoto:"\u5DF2\u5C07\u7167\u7247\u52A0\u5165\u7B46\u8A18!",didInsertVideo:"\u5DF2\u5C07\u5F71\u7247\u52A0\u5165\u7B46\u8A18!",didJoinGroup:"\u5DF2\u53C3\u52A0%1$s\uFF01",didSaveToMaterialsStorage:"\u5DF2\u5132\u5B58\u65BC\u8CC7\u6599\u76D2!",didSendBackDocument:"\u5DF2\u56DE\u8986!",didCompleteSendBack:"\u5DF2\u5B8C\u6210\u6240\u6709\u56DE\u8986!",didSendCards:"\u8CC7\u6599\u5DF2\u50B3\u9001!",didSubmitCards:"\u5DF2\u8CC7\u6599\u63D0\u51FA!",displayByStudent:"\u986F\u793A\u7D66\u6BCF\u4E00\u4F4D\u5B78\u751F",documentCopyDenied:"\u6C92\u6709\u8907\u88FD\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",documentMoveDenied:"\u6C92\u6709\u79FB\u52D5\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",downloadFile:"\u4E0B\u8F09%1$s",downloadingFile:"\u6A94\u6848\u4E0B\u8F09\u4E2D...",duplicatedSubjectError:"\u8A72\u8AB2\u7A0B\u540D\u7A31\u5DF2\u7D93\u88AB\u767B\u8A18\u65BC\u73ED\u7D1A\u4E4B\u4E0B\uFF0C\u6545\u7121\u6CD5\u5EFA\u7ACB",duplicatedUserGroup:"\u73ED\u7D1A\u540D\u7A31\u5DF2\u7D93\u88AB\u4F7F\u7528",image:"\u5716\u7247",itemNameInvalid:"%1$s\u4E4B\u540D\u7A31\u4E0D\u6B63\u78BA",itemNotFound:"\u7121\u6CD5\u627E\u5230%1$s",itemRenameDenied:"\u6C92\u6709%1$s\u4E4B\u64CD\u4F5C\u6B0A\u9650",drawingDefaultFileName:"\u7E6A\u5716",duplicateNoteNameSuffix:"\u526F\u672C",edit:"\u7DE8\u8F2F",end:"\u7D50\u675F",endAnswerSharing:"\u95DC\u9589\u5206\u4EAB\u7B54\u6848",endPresentationLine1:"\u767C\u8868",endPresentationLine2:"\u7D50\u675F",endScreenShareReceiving:"\u505C\u6B62\u63A5\u6536\u767C\u5E03\u756B\u9762",endSharingLine1:"\u767C\u5E03\u756B\u9762",endSharingLine2:"\u505C\u6B62",enterDocumentName:"\u8ACB\u8F38\u5165\u6559\u6750\u540D\u7A31",enterFileName:"\u8F38\u5165\u6A94\u6848\u540D\u7A31",enterFolderName:"\u8F38\u5165\u8CC7\u6599\u593E\u540D\u7A31",enterGroupCode:"\u8ACB\u8F38\u5165\u53C3\u52A0\u4EE3\u78BC",enterNewGroupName:"\u8ACB\u8F38\u5165\u65B0\u7684\u73ED\u7D1A\u540D\u7A31",enterTaskName:"\u8ACB\u8F38\u5165\u7E73\u4EA4\u5167\u5BB9",enumerationWithReadingPoint:"\u3001",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u73ED",errorOccurred:"\u767C\u751F\u932F\u8AA4",expand:"\u653E\u5927",expiry:"\u622A\u6B62",expiryDialogTitle:"\u622A\u6B62\u65E5\u671F\u8207\u6642\u9593",exportCard:"\u8F49\u51FA",pdfFile:"PDF\u6A94\u6848",failedDownloadFile:"\u7121\u6CD5\u4E0B\u8F09%1$s\u7684\u6A94\u6848",failedDownloadFiles:"\u7121\u6CD5\u4E0B\u8F09%1$s\u7684\u6A94\u6848",failedDownloadFilesWithOthers:"\u7121\u6CD5\u4E0B\u8F09%1$s\u548C\u5176\u5B83%2$d\u4EBA\u7684\u6A94\u6848",file:"\u6A94\u6848",fileOrFolderDeletionDenied:"\u6C92\u6709\u522A\u9664\u6A94\u6848\u6216\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",fileOrFolderInvalid:"\u6A94\u6848\u6216\u8CC7\u6599\u593E\u6709\u554F\u984C",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",focusOnTheTeacher:"\u5148\u505C\u6B62\u624B\u908A\u5DE5\u4F5C\uFF0C\u62AC\u982D\u770B\u8001\u5E2B",forgotPasswordLinkText:"\u4E0D\u77E5\u9053\u5BC6\u78BC\u6642",forgotPasswordPageUrl:"https://scrapbox.io/hkloilomanual/%E5%BF%98%E8%A8%98%E7%99%BB%E5%85%A5ID%E3%80%81%E5%AF%86%E7%A2%BC",folder:"\u8CC7\u6599\u593E",folderCreationDenied:"\u7121\u5EFA\u7ACB\u8CC7\u6599\u593E\u4E4B\u64CD\u4F5C\u6B0A\u9650",folderLocationNotFound:"\u7121\u6CD5\u627E\u5230\u539F\u59CB\u8CC7\u6599\u593E",folderNotFound:"\u7121\u6CD5\u627E\u5230\u8CC7\u6599\u593E",generalCameraPrepError:"\u7167\u76F8\u529F\u80FD\u5C1A\u672A\u5B8C\u5099",cameraMicPermissionDeniedErrorMsg:"\u5141\u8A31\u4F7F\u7528\u7167\u76F8\u6A5F\u4EE5\u53CA\u9EA5\u514B\u98A8",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",getHelp:"\u53C3\u95B1\u8AAA\u660E",goBackToDesktop:"\u56DE\u5230\u7B46\u8A18",goBackToNoteList:"\u56DE\u5230\u7B46\u8A18\u4E00\u89BD\u8868",groupAlreadyDeleted:"\u6B64\u73ED\u7D1A\u5DF2\u7D93\u88AB\u522A\u9664",groupCode:"\u53C3\u52A0\u4EE3\u78BC",groupDeletionDenied:"\u7121\u522A\u9664\u6B64\u73ED\u7D1A\u4E4B\u64CD\u4F5C\u6B0A\u9650",groupDoesntExist:"\u6B64\u73ED\u7D1A\u4E0D\u5B58\u5728",groupJoinInstructions:"\u5404\u4F4D\u540C\u5B78\uFF0C\u8ACB\u8F38\u5165\u6B64\u53C3\u52A0\u4EE3\u78BC",groupJoinCodeDeactivated:"\u9019\u500B\u73ED\u7D1A\u7684\u53C3\u52A0\u4EE3\u78BC\u5DF2\u88AB\u505C\u7528",groupName:"\u73ED\u7D1A\u540D\u7A31",groupNoLongerExists:"\u73ED\u7D1A\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u522A\u9664",groupUnavailable:"\u76EE\u524D\u7121\u6CD5\u4F7F\u7528\u6B64\u73ED\u7D1A",hasExpired:"\u5DF2\u622A\u6B62",helpWebCardExtensionUrl:"https://scrapbox.io/hkloilomanual/Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",helpWebCardExtensionUrlForEdge:"https://scrapbox.io/hkloilomanual/Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",hoursRemaining:"\u5269\u9918%d\u6642\u9593",hourTimeUnit:"\u6642\u9593",inputCannotContainSpacesWarning:"\u6A19\u984C\u4E0D\u5F97\u5305\u542B\u7A7A\u683C",inputTooLongWarning:"\u8F38\u5165\u5B57\u6578\u4E0D\u5F97\u8D85\u904E%1$d\u5B57",insertCardFromDocument:"\u5C07\u6B64\u8CC7\u6599\u5361\u52A0\u5165\u7B46\u8A18",insertingFile:"\u5C07\u6A94\u6848\u52A0\u5165\u7B46\u8A18...",insertingMaterials:"\u5C07\u8CC7\u6599\u52A0\u5165\u7B46\u8A18...",insertingPhoto:"\u5C07\u7167\u7247\u52A0\u5165\u7B46\u8A18...",insertingVideo:"\u5C07\u5F71\u7247\u52A0\u5165\u7B46\u8A18...",inThisCard:"\u5361\u7247\u5167",invalidDirectoryNameForBatchDownload:"\u6A94\u6848\u540D\u7A31\u53EF\u80FD\u5305\u542B\u4E86\u7121\u6CD5\u4F7F\u7528\u7684\u6587\u5B57",invalidDocumentCopyDetails:"\u6A94\u6848\u3001\u8CC7\u6599\u593E\u3001\u6216\u662F\u8907\u88FD\u4F4D\u7F6E\u4E0D\u6B63\u78BA",invalidDocumentMoveDetails:"\u6A94\u6848\u3001\u8CC7\u6599\u593E\u3001\u6216\u662F\u79FB\u52D5\u4F4D\u7F6E\u4E0D\u6B63\u78BA",invalidDocumentName:"\u6A94\u6848\u540D\u7A31\u4E0D\u6B63\u78BA",invalidFileNameOrPath:"\u6709\u53EF\u80FD\u662F\u6A94\u6848\u540D\u7A31\u6216\u662F\u6A94\u6848\u8DEF\u5F91\u904E\u9577",invalidFolderName:"\u8CC7\u6599\u593E\u540D\u7A31\u4E0D\u6B63\u78BA",invalidGroupCode:"\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC\u6709\u8AA4",invalidOpenUrl:"URL\u542B\u6709\u7121\u52B9\u4E4B\u6587\u5B57\uFF0C\u7121\u6CD5\u958B\u555F\u6B64Web\u5361\u3002",invalidRequest:"\u932F\u8AA4\u4E4B\u8ACB\u6C42",invalidUrlHelp:"\u8ACB\u8F38\u5165\u4EE5https://\u6216\u662Fhttp://\u70BA\u958B\u982D\u4E4B\u6B63\u78BAURL",invertMouseWheel:"\u53CD\u8F49\u6ED1\u9F20\u6EFE\u8F2A\u65B9\u5411",joinCourseBtnLabel:"\u8F38\u5165\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC",joiningGroup:"\u52A0\u5165\u73ED\u7D1A\u4E2D...",joiningSubject:"\u5DF2\u52A0\u5165%1$s...",learnAboutThinkingTools:"\u8A8D\u8B58\u601D\u7DAD\u5DE5\u5177",learnMore:"\u8A73\u8ACB\u8ACB\u53C3\u95B1\u6B64\u8655",loadingFile:"\u6A94\u6848\u8B80\u53D6\u4E2D...",lockingScreens:"\u64CD\u4F5C\u9396\u5B9A\u4E2D...",lockingStudentSharing:"\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A\u4E2D...",logout:"\u767B\u51FA",logoutOption:"\u767B\u51FA",mapDefaultFileName:"\u5730\u5716",material:"\u8CC7\u6599",materialsStorage:"\u8CC7\u6599\u76D2",membersJoinedCount:"\u53C3\u52A0\u4EBA\u6578",micPermissionDeniedErrorMsg:"\u5141\u8A31\u4F7F\u7528\u9EA5\u514B\u98A8",minRemaining:"\u5269\u9918%1$s\u5206",minuteTimeUnit:"\u5206",mouseWheelSensitivity:"\u6ED1\u9F20\u654F\u611F\u5EA6",move:"\u79FB\u52D5",moveToThisFolder:"\u79FB\u81F3\u9019\u500B\u8CC7\u6599\u593E",movingDocument:"\u6A94\u6848\u79FB\u52D5\u4E2D...",nameOrder:"\u540D\u7A31\u6392\u5E8F",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u4E4B\u7B46\u8A18",noExpiry:"\u7121\u6307\u5B9A",noJoinedCourseTitle2:"\u7121\u8AB2\u7A0B",noMicFoundErrorMsg:"\u7121\u6CD5\u627E\u5230\u53EF\u4EE5\u4F7F\u7528\u4E4B\u9EA5\u514B\u98A8",noNotesFound:"\u5148\u5EFA\u7ACB\u65B0\u7B46\u8A18\u5427!",noOpenTasks:"\u6C92\u6709\u6B63\u5728\u6536\u96C6\u7684\u7E73\u4EA4\u76D2",fileDestinationNotExist:"\u5BEB\u5165\u76EE\u7684\u5730\u4E0D\u5B58\u5728\u6216\u662F\u5DF2\u7D93\u88AB\u522A\u9664",inPreparation:"\u6E96\u5099\u4E2D",title:"\u7E73\u4EA4\u76D2\u540D\u7A31",titleRedirect:"\u91CD\u65B0\u5B9A\u5411 | LoiLoNote School",createInPreparation:"\u5C1A\u672A\u958B\u653E\u7E73\u4EA4",callForAnswersNow:"\u958B\u59CB\u7E73\u4EA4",pleaseChooseTask:"\u8ACB\u9078\u64C7\u8981\u7E73\u4EA4\u5230\u4F55\u8655",expiredTasks:"\u7E73\u4EA4\u6642\u9593\u622A\u6B62",allExpiredTasks:"\u7E73\u4EA4\u76D2\u5217\u8868",noTasksExpired:"\u6C92\u6709\u5DF2\u622A\u6B62\u6642\u9593\u7684\u7E73\u4EA4\u76D2",setTimeAndDateForDeadline:"\u8ACB\u8A2D\u5B9A\u622A\u6B62\u65E5\u8207\u6642\u9593",callForAnswers:"\u958B\u59CB\u7E73\u4EA4",notAttending:"\u6C92\u6709\u52A0\u5165\u8AB2\u5802",note:"\u7B46\u8A18",noteChangedFromOtherDevice:"\u5176\u4ED6\u8F09\u5177\u4E0A\u4E4B\u7B46\u8A18\u5DF2\u7D93\u8B8A\u66F4\uFF0C\u5C07\u518D\u6B21\u8B80\u53D6",noteConflictDialogTitle:"\u7B46\u8A18\u767C\u751F\u885D\u7A81\u72C0\u6CC1",noteFetchErrorOccurred:"\u53D6\u5F97\u7B46\u8A18\u6642\u767C\u751F\u932F\u8AA4",noteListTitle:"\u7B46\u8A18\u4E00\u89BD\u8868",nowSharingIndicator:"\u6B63\u5728\u50B3\u9001\u7D66%1$s %2$s",okay:"OK",deadlineDate:"\u622A\u6B62\u6642\u9593",openForSubmissions:"\u6536\u96C6\u4E2D",openingNote:"\u958B\u555F\u7B46\u8A18",openTask:"\u6709\u7E73\u4EA4\u8CC7\u6599",statusSubmitted:"\u5DF2\u7E73\u4EA4",openTaskCount:"\u3001\u5176\u4ED6%1$d\u500B",openWebPage:"\u958B\u5553\u7DB2\u9801",others:"\u3001\u5176\u4ED6%1$d",otherTeachersCourseNotFound:"\u627E\u4E0D\u5230\u5176\u4ED6\u8001\u5E2B\u4E4B\u8AB2\u7A0B",otherTeachersCoursesTitle:"\u5176\u4ED6\u8001\u5E2B\u4E4B\u8AB2\u7A0B",overwritingNote:"\u7B46\u8A18\u8986\u84CB\u5F8C\u5132\u5B58...",paste:"\u8CBC\u4E0A",pasteImage:"\u8CBC\u4E0A\u5716\u7247",pasteText:"\u8CBC\u4E0A\u6587\u672C",pasteCards:"\u8CBC\u4E0A\u5361\u7247",nothingToPaste:"\u6C92\u6709\u4EC0\u9EBC\u53EF\u7C98\u8CBC\u7684",pasteCopiedUrl:"\u8CBC\u4E0A\u5DF2\u8907\u88FD\u4E4BURL",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"%1$d\u4E4B\u6A94\u6848\u8207%2$d\u4E4B\u7E2E\u5716\u6B63\u5728\u4E0A\u50B3...",pendingFileUploadCount:"%1$d\u4E4B\u6A94\u6848\u6B63\u5728\u4E0A\u50B3...",pendingThumbUploadCount:"%1$d\u4E4B\u7E2E\u5716\u6B63\u5728\u4E0A\u50B3...",photo:"\u7167\u7247",photoDefaultFileName:"\u7167\u7247",pleaseEnterFolderName:"\u8ACB\u8F38\u5165\u8CC7\u6599\u593E\u540D\u7A31",preferences:"\u74B0\u5883\u8A2D\u5B9A",preparingScreenSharing:"\u6B63\u5728\u6E96\u5099\u767C\u5E03\u756B\u9762...",preparingStudentPresentation:"\u6B63\u5728\u6E96\u5099\u5B78\u751F\u767C\u8868...",endedCoursesTitle:"\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B",endedCoursesDesc:"\u203B\u53BB\u5E74\u4E4B\u8AB2\u7A0B\u5DF2\u5217\u5165\u300C\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B\u300D",print:"\u5217\u5370",prioritizeThisVersionDesc:"\u6368\u68C4\u5176\u4ED6\u8F09\u5177\u4E0A\u4E4B\u8B8A\u66F4\uFF0C\u5C07\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u5167\u5BB9\u8986\u84CB\u904E\u53BB",prioritizeThisVersionTitle:"\u4EE5\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u70BA\u512A\u5148",audioRecording:"\u9304\u97F3",redirectSubmissionMessage:"\u91CD\u65B0\u5B9A\u5411\u81F3\u7E73\u4EA4\u8CC7\u6599\u3002\u4E0D\u91CD\u65B0\u5B9A\u5411\u8ACB\u9EDE\u64CA\u4EE5\u4E0B\u9023\u7D50\u3002",release:"\u89E3\u9664",releaseAll:"\u5168\u90E8\u89E3\u9664",reload:"\u518D\u6B21\u8B80\u53D6",rename:"\u8B8A\u66F4\u540D\u7A31",renamingItem:"%1$s\u4E4B\u540D\u7A31\u8B8A\u66F4\u4E2D...",renameNoteDialogMsg:"\u8B8A\u66F4\u7B46\u8A18\u540D\u7A31",requestPresentationLine1:"\u5B78\u751F",requestPresentationLine2:"\u767C\u8868",resetCamera:"\u91CD\u7F6E\u7167\u76F8\u6A5F",resetLayout:"\u56DE\u5FA9\u521D\u671F\u8A2D\u5B9A",resolve:"\u89E3\u6C7A",retake:"\u91CD\u65B0\u62CD\u651D",rotate:"\u8FF4\u8F49",failedToRotate:"\u7121\u6CD5\u65CB\u8F49\u5361\u7247",saveNoteUnderOtherNameDesc:"\u76EE\u524D\u4E4B\u7B46\u8A18\u5DF2\u88AB\u5176\u4ED6\u8F09\u5177\u4E4B\u8B8A\u66F4\u8986\u84CB\uFF0C\u5728\u6B64\u8F09\u5177\u4E0A\u4E4B\u8B8A\u66F4\u5167\u5BB9\u5C07\u4EE5\u65B0\u7B46\u8A18\u5F62\u5F0F\u5132\u5B58",saveNoteUnderOtherNameTitle:"\u6B64\u8F09\u5177\u4E4B\u8B8A\u66F4\u5C07\u4EE5\u5176\u4ED6\u540D\u7A31\u5132\u5B58",saveToThisFolder:"\u5132\u5B58\u65BC\u6B64\u8CC7\u6599\u593E",saving:"\u6B63\u5728\u5132\u5B58...",savingNoteWithOtherName:"\u7B46\u8A18\u5C07\u4EE5\u5176\u4ED6\u540D\u7A31\u5132\u5B58...",schoolLoiloTVUrl:"https://school.loilo.tv/tw/web.html",schoolLoiloTVUrlWithExtension:"https://school.loilo.tv/tw/web-ext.html",screenLock:"\u756B\u9762\u9396\u5B9A",screensAreLocked:"\u64CD\u4F5C\u9396\u5B9A\u4E2D",screenSharingErrorOccurred:"\u767C\u5E03\u756B\u9762\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",screenSharingTimedOutErrorMsg:"%1$d: \u767C\u5E03\u6578\u64DA\u4E4B\u53D6\u5F97\u903E\u6642\u7121\u6CD5\u57F7\u884C",search:"\u6AA2\u7D22",secondTimeUnit:"\u79D2",secRemaining:"\u5269\u9918%1$s\u79D2",seeNextError:"\u67E5\u770B\u4E0B\u500B\u932F\u8AA4",selection:"\u9078\u64C7",selectAll:"\u9078\u64C7\u5168\u90E8",selfStudy:"\u81EA\u4E3B\u5B78\u7FD2",loiLoNews:"\u4F86\u81EALoiLo\u7684\u901A\u77E5",lessonPlans:"\u6559\u6848",send:"\u50B3\u9001",sendBack:"\u56DE\u8986",sendBackAll:"\u4E00\u6B21\u56DE\u8986",sendBackErrorOccurred:"\u56DE\u8986\u904E\u7A0B\u4E2D\u767C\u751F\u932F\u8AA4",sendBackIncomplete:"%1$d\u4E2D%2$d\u500B\u56DE\u8986\u5C1A\u672A\u8655\u7406\u5B8C\u7562",sendingBackDocument:"\u56DE\u8986\u4E2D...",sendingThumbnails:"\u4EE5\u7E2E\u5716\u65B9\u5F0F\u50B3\u9001",sendToDialogTitle:"\u9078\u64C7\u5361\u7247\u50B3\u9001\u4E4B\u5C0D\u8C61",sendToIndividuals:"\u500B\u4EBA",sendToMultiple:"\u9001\u51FA\uFF08%1$d\u4EBA\uFF09",sentBackBy:"\u7531%1$s\u4E4B\u56DE\u8986",serviceStatus:"\u670D\u52D9\u72C0\u6CC1",sessionExpiredMsg:"\u5DF2\u8D85\u904E\u6709\u6548\u671F\u9650\u3002\u8981\u7E7C\u7E8C\u4F7F\u7528\u8ACB\u518D\u6B21\u8B80\u53D6",sessionExpiredTitle:"\u8ACB\u518D\u6B21\u8B80\u53D6",badCsrfTokenTitle:"CSRF\u8A8D\u8B49\u6709\u554F\u984C",badCsrfTokenMsg:"\u8DE8\u7DB2\u7AD9\u507D\u9020\u8981\u6C42(CSRF)\u4E4B\u8A8D\u8B49\u6709\u554F\u984C\uFF0C\u8ACB\u91CD\u65B0\u767B\u5165",sharedBy:"%1$s\u91CB\u51FA\u5171\u4EAB",shareScreen:"\u767C\u5E03\u756B\u9762",sharing:"\u767C\u5E03\u4E2D",sharingAnswers:"\u5206\u4EAB\u7B54\u6848\u4E2D",shrink:"\u7E2E\u5C0F",startAnswerSharing:"\u5206\u4EAB\u7B54\u6848",startComparing:"\u958B\u59CB\u6BD4\u8F03",startSharingLine1:"\u756B\u9762",startSharingLine2:"\u767C\u5E03",status403AccessDenied:"\u7121\u5B58\u53D6\u6B0A\u9650",statusFetchErrorOccurred:"\u8CC7\u6599\u53D6\u5F97\u4E2D\u9014\u767C\u751F\u932F\u8AA4",stoppingScreenSharing:"\u505C\u6B62\u767C\u5E03\u756B\u9762...",stoppingStudentPresentation:"\u7D50\u675F\u5B78\u751F\u767C\u8868...",stopScreenSharing:"\u505C\u6B62\u767C\u5E03",student:"\u5B78\u751F",enterClassCodeToJoinClass:"\u2193 \u8ACB\u8F38\u5165\u6559\u5E2B\u6240\u63D0\u793A\u4E4B\u73ED\u7D1A\u53C3\u52A0\u4EE3\u78BC",studentSharing:"\u5B78\u751F\u9593\u901A\u8A0A",subjectNameInputPlaceholder:"\u8ACB\u8F38\u5165\u8AB2\u7A0B\u540D\u7A31...",subjectOrTaskDoesntExist:"\u8AB2\u7A0B\u6216\u7E73\u4EA4\u76D2\u4E0D\u5B58\u5728",subjectTitle:"\u8AB2\u7A0B",requestContainsInvalidID:"\u8AB2\u7A0BID\u6216\u7E73\u4EA4\u76D2\u4E4BID\u4E0D\u6B63\u78BA",submissionName:"%1$s\u4E4B\u56DE\u7B54",submissions:"\u7E73\u4EA4\u8CC7\u6599",submit:"\u7E73\u4EA4",submitOrder:"\u7E73\u4EA4\u9806\u5E8F",submitted:"\u5DF2\u63D0\u51FA",submittedBy:"%1$s\u4E4B\u7E73\u4EA4",submittingDocument:"\u7E73\u4EA4\u4E2D",support:"\u652F\u63F4",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",taskListTitle:"\u7E73\u4EA4\u76D2",taskNameDefaultPrefix:"\u7E73\u4EA4\u8CC7\u6599",teacher:"\u8001\u5E2B",teacherLockedScreens:"\u64CD\u4F5C\u9396\u5B9A",teacherNoJoinedCourseTitle1:"\u9084\u6C92\u6709\u4F60\u8CA0\u8CAC\u7684\u8AB2\u7A0B",text:"\u6587\u5B57",textButtonIconClass:"textButtonIconZhHant",textCardMenuBtnImgPath:"/svg/text_zh_60x60_margin_less.svg",textDefaultFileName:"\u6559\u6750",thinkingTool:"\u601D\u7DAD\u5DE5\u5177",thisGroupHasNoSubjects:"\u6B64\u73ED\u7D1A\u7121\u4EFB\u4F55\u8AB2\u7A0B",thisIsAnEmptyFolder:"\u7A7A\u8CC7\u6599\u593E",trackpadPinchZoomSensitivity:"\u89F8\u63A7\u756B\u9762\u7E2E\u653E\u8ABF\u7BC0\u9748\u654F\u5EA6",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",timeLabel:"\u6642\u9593",timelineTitle:"\u6642\u9593\u8EF8",toWhichSubjectDoYouWantToCopy:"\u8981\u8907\u88FD\u54EA\u4E00\u500B\u8AB2\u7A0B\uFF1F",toWhichSubjectNotesDoYouWantToSend:"\u8981\u50B3\u9001\u54EA\u500B\u8AB2\u7A0B\u7684\u7B46\u8A18\uFF1F",ttAnalysis:"\u6D41\u7A0B\u5206\u6790\u5716",ttButterfly:"\u8774\u8776\u5716",ttCandy:"\u7CD6\u679C\u5716",ttCircles:"\u540C\u5FC3\u5713\u5716",ttDataChart3:"\u6578\u64DA\u5716(3)",ttDataChart6:"\u6578\u64DA\u5716(6)",ttDiamond:"\u947D\u77F3\u5716",ttFishbone:"\u9B5A\u9AA8\u5716",ttJellyfish:"\u6C34\u6BCD\u5716",ttOneAxis:"\u5EA7\u6A19\u6A6B\u8EF8\u5716",ttPlotLeft:"\u60C5\u7BC0\u69CB\u6210\u5716(\u5DE6)",ttPlotRight:"\u60C5\u7BC0\u69CB\u6210\u5716(\u53F3)",ttPMI:"PMI/KWL\u5716",ttPyramid:"\u91D1\u5B57\u5854\u5716",ttRake:"\u91D8\u8019\u5716",ttSheet:"\u7A7A\u767D\u5E95\u5716",ttTwoAxes:"\u5EA7\u6A19\u8EF8\u5716",ttVenn2:"\u97CB\u6069\u5716",ttVenn3:"\u97CB\u6069\u4E09\u5713\u5716",ttWChart:"W\u5716",ttWebbing:"\u4E2D\u5FC3\u5713\u5716",ttXChart:"X\u5716",ttYChart:"Y\u5716",uncaughtErrorOccurred:"\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4\uFF0CApp\u5DF2\u505C\u6B62\u52D5\u4F5C\u3002\u8ACB\u5C07\u8A73\u7D30\u4E4B\u932F\u8AA4\u5167\u5BB9\u56DE\u5831\u7D66\u5BA2\u670D\u4EBA\u54E1\uFF0C\u6216\u662F\u91CD\u65B0\u5553\u52D5\u61C9\u7528\u7A0B\u5F0F\u3002",viewErrorDetail:"\u8A73\u7D30\u5167\u5BB9",unexpectedErrorOccurred:"\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4",unknownApiErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u4F3A\u670D\u5668\u767C\u751F\u7121\u9810\u671F\u4E4B\u932F\u8AA4",unknownError:"\u4E0D\u660E\u539F\u56E0\u932F\u8AA4",unknownUser:"\u672A\u77E5\u4E4B\u4F7F\u7528\u8005",unlockingScreens:"\u89E3\u9664\u64CD\u4F5C\u9396\u5B9A...",unlockingStudentSharing:"\u89E3\u9664\u5B78\u751F\u9593\u901A\u8A0A\u9396\u5B9A...",unnamedNote:"\u672A\u547D\u540D\u4E4B\u7B46\u8A18",unsaved:"\u672A\u5132\u5B58",unsupportedContentType:"\u6B64\u985E\u6A94\u6848\u7121\u6CD5\u65B0\u589E\u7B46\u8A18",unsupportedFileErrorMsg:"\u4E0D\u5C0D\u61C9\u6B64\u6A94\u6848\u3002\u6A94\u6848\u683C\u5F0F: \u300C%1$s\u300D\u3001\u526F\u6A94\u540D: \u300C%2$s\u300D",unsupportedFileErrorWithoutOptMsg:"\u4E0D\u5C0D\u61C9\u6B64\u6A94\u6848",unsupportedNoteFeatErrorMsg:"%1$s\u5305\u542B\u65B0\u529F\u80FD\u3002\u6B64\u7B46\u8A18\u53EF\u80FD\u4EE5\u958B\u767C\u4E2D\u4E4BApp\u6240\u88FD\u4F5C\u3002\uFF08\u7248\u672C: %2$s, \u529F\u80FD\u4EE3\u78BC: %3$s\uFF09",unsupportedNoteVerErrorMsg:"\u4E0D\u652F\u63F4%1$s\u4E4B\u683C\u5F0F\u3002\u6B64%1$s\u53EF\u80FD\u4EE5\u65B0\u7248\u672CApp\u4F86\u88FD\u4F5C\u6545\u7121\u6CD5\u958B\u555F\u3002\uFF08\u7248\u672C: %2$s\uFF09",update:"\u66F4\u65B0",updateCard:"\u66F4\u65B0\u5361\u7247",updateOrder:"\u66F4\u65B0\u9806\u5E8F",updatingSubmission:"\u6B63\u5728\u66F4\u65B0\u7E73\u4EA4\u8CC7\u6599",uploadingAsset:"\u6B63\u5728\u4E0A\u50B3\u8CC7\u6599...",uploadingDocument:"\u6B63\u5728\u4E0A\u50B3\u6587\u4EF6...",use:"\u4F7F\u7528",useAll:"\u4F7F\u7528\u5168\u90E8",useFormally:"\u4F7F\u7528",version:"\u7248\u672C",verticalWritingBtnLabel:"\u76F4",video:"\u5F71\u7247",videoDefaultFileName:"\u5F71\u7247",volume:"\u97F3\u91CF",web:"\u7DB2\u9801",webCardExtensionLeadingText:`\u4F7F\u7528\u700F\u89BD\u5668\u64F4\u5145\u529F\u80FD
\u53EF\u4EE5\u8F15\u9B06\u5730\u88FD\u4F5C Web\u5361`,webPageSharedText:"\u5DF2\u5206\u4EAB\u7DB2\u9801",webPageSharedTextBy:"%1$s \u5DF2\u5C07\u7DB2\u9801\u5206\u4EAB",quiz:"\u554F\u7B54",quizPresetTest:"\u6E2C\u9A57",quizPresetSurvey:"\u554F\u5377",author:"\u51FA\u984C\u8005",questionCount:"\u554F\u984C\u6578 %1$d",result:"\u7D50\u679C",answerTest:"\u56DE\u7B54",answerQuestionnaire:"\u56DE\u7B54",viewTestAnswers:"\u78BA\u8A8D\u56DE\u7B54",viewQuestionnaireAnswers:"\u78BA\u8A8D\u56DE\u7B54",answerTestTogether:"\u5168\u9AD4\u56DE\u7B54",answerQuestionnaireTogether:"\u5168\u9AD4\u56DE\u7B54",creatingTestCard:"\u6B63\u5728\u88FD\u4F5C\u6E2C\u9A57\u5361",createdTestCard:"\u6E2C\u9A57\u5361\u88FD\u4F5C\u5B8C\u6210",failedCreateTestCard:"\u7121\u6CD5\u88FD\u4F5C\u6E2C\u9A57\u5361",reloadForTestCard:"\u9700\u8981\u66F4\u65B0\u6E2C\u9A57\u5361\u7684\u8A8D\u8B49\u8A0A\u606F\u3002\u8ACB\u65BC\u9801\u9762\u5237\u65B0\u5F8C\uFF0C\u518D\u6B21\u5617\u8A66\u3002",failedGoogleLoginHelpText:"",failedGoogleLoginHelpLink:"",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u6B63\u5728\u6E96\u5099\u6E2C\u9A57\u554F\u984C",preparingQuestionnaire:"\u6B63\u5728\u6E96\u5099\u554F\u5377\u5167\u5BB9",webDefaultFileName:"\u7DB2\u9801\u641C\u5C0B",didBackupUnsavedChanges:"\u5DF2\u5132\u5B58\u5148\u524D\u8B8A\u66F4\u5099\u4EFD\u3002\u76EE\u524D\u5DF2\u5099\u4EFD\u4E4B\u7B46\u8A18\u6709%1$d\u500B\u3002",willDeleteGroupFromSubject:"\u7531%1$s\u522A\u9664%2$s...",year:"%1$d\u5E74",yourTurnToPresent:"\u8F2A\u5230\u4F60\u767C\u8868!",zoomTitle:"\u653E\u5927\u30FB\u7E2E\u5C0F",languageSettingTitle:"\u8A00\u8A9E\u8A2D\u5B9A",english:"\u82F1\u8A9E",japanese:"\u65E5\u6587",japaneseHira:"\u65E5\u6587\uFF08Hiragana\uFF09",traditionalChinese:"\u7E41\u9AD4\u4E2D\u6587",simplifiedChinese:"\u7C21\u9AD4\u4E2D\u6587",drawn:"\u7E6A\u5716",annotation:"\u6279\u6539",couldntSave:"\u7121\u6CD5\u4FDD\u5B58%1$s",annotationThumbnail:"\u5DF2\u6279\u6539\u8CC7\u6599\u4E4B\u7E2E\u5716",documentThumbnail:"\u6587\u6A94\u7E2E\u5716",couldntGetCoursesAttributes:"\u7121\u6CD5\u53D6\u5F97\u8AB2\u7A0B\u8CC7\u8A0A",inButtonIconClass:"inButtonIconZhHant",outButtonIconClass:"outButtonIconZhHant",thinkingToolHelpPageUrl:"https://n.loilo.tv/tw/thinkingtool",couldntGetSubmissions:"\u7121\u6CD5\u53D6\u5F97\u7E73\u4EA4\u8CC7\u6599",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u4E4B\u8AB2\u7A0B\u7121\u6CD5\u4F7F\u7528\u7E73\u4EA4\u76D2",regularWtFontName:"loilo-NotoSansCJKtc-Regular",boldWtFontName:"loilo-NotoSansCJKtc-Black",uiFontName:"Noto Sans TC",couldntGetSubmissionMessage:"\u7121\u6CD5\u53D6\u5F97\u7E73\u4EA4\u8CC7\u6599\u4E4B\u7E73\u4EA4\u72C0\u6CC1",couldntGetSubmissionHistory:"\u7121\u6CD5\u53D6\u5F97\u7E73\u4EA4\u5C65\u6B77",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"\u5171\u4EAB\u7B46\u8A18",submissionBox:"\u7E73\u4EA4\u76D2",error:"\u932F\u8AA4",timeline:"\u6642\u9593\u8EF8",status400Msg:"\u8981\u6C42\u683C\u5F0F\u932F\u8AA4\u3002\u4E00\u822C\u4E0D\u6703\u767C\u751F\u6B64\u932F\u8AA4\uFF0C\u53EF\u80FD\u7531\u65BC\u767C\u751F\u6545\u969C\u6240\u9020\u6210\u3002",status403Msg:"\u6C92\u6709\u8ACB\u6C42\u8CC7\u6E90\u4E4B\u6B0A\u9650",status404Msg:"\u627E\u4E0D\u5230\u6240\u8981\u6C42\u4E4B\u8CC7\u6E90",status500Msg:"\u4F3A\u670D\u5668\u767C\u751F\u932F\u8AA4\u3002\u7CFB\u7D71\u53EF\u80FD\u6703\u767C\u751F\u5168\u9762\u6027\u4E4B\u969C\u7919",defaultErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u767C\u751F\u9810\u671F\u5916\u4E4B\u932F\u8AA4",goToTopPage:"\u8FD4\u56DE\u9996\u9801",viewStatusPage:"\u78BA\u8A8D\u4F3A\u670D\u5668\u670D\u52D9\u72C0\u6CC1",login:"\u767B\u5165",masterUserLoginUnsupported:"\u6B64\u5E33\u865F\u7121\u6CD5\u4F7F\u7528\u65BC\u7C21\u6613\u767B\u5165",invalidCredentials:"\u5B78\u6821ID\u3001\u4F7F\u7528\u8005ID\u3001\u5BC6\u78BC\u4E4B\u7D44\u5408\u4E0D\u6B63\u78BA",invalidIPAddress:"\u5B58\u53D6\u9EDE\u4E4BIP\u4F4D\u7F6E\u53D7\u5230\u9650\u5236\u3002\u8ACB\u5411\u5B78\u6821\u7BA1\u7406\u8005\u78BA\u8A8D\u3002",accountLocked:"\u5E33\u865F\u5DF2\u88AB\u9396\u5B9A\u3002\u8ACB\u6D3D\u5B78\u6821\u7BA1\u7406\u4EBA\u54E1\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u5E33\u865F\u7121\u6CD5\u4F7F\u7528\u65BC\u8EDF\u9AD4\u767B\u5165\u3002",forbiddenIsSSOUser:"\u8207Google\u5E33\u6236\u9023\u52D5\u4E4B\u7528\u6236\u7121\u6CD5\u767B\u5165\u3002",couldntLogIn:"\u7121\u6CD5\u767B\u5165",endpoint:"\u5B58\u53D6\u9EDE",schoolIDLabel:"\u5B78\u6821",schoolIDPlaceholder:"\u5B78\u6821\u5E33\u865F",schoolIDTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u3001- (\u9023\u5B57\u865F)\u3001_ (\u5E95\u7DDA)",userIDLabel:"\u4F7F\u7528\u8005",userIDPlaceholder:"\u4F7F\u7528\u8005\u5E33\u865F",userIDTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u6216\u7B26\u865F",passwordPlaceholder:"\u5BC6\u78BC",passwordTitle:"\u8ACB\u8F38\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6578\u5B57\u6216\u7B26\u865F",adminSignInLinkText:"\u7BA1\u7406\u8005\u767B\u5165",recommendUpdateTitle:"\u5EFA\u8B70\u66F4\u65B0\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",recommendUpdateMsg:"\u6B64App\u4E4B\u67D0\u4E9B\u529F\u80FD\u53EF\u80FD\u7121\u6CD5\u6B63\u5E38\u904B\u4F5C",loginContinueBtnText:"\u7E7C\u7E8C\u4F7F\u7528",recommendNativeAppTitle:"\u5EFA\u8B70\u4F7F\u7528iOS App",recommendNativeAppMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u700F\u89BD\u5668\u9650\u5236\u4E86\u9019\u500BApp\u6240\u63D0\u4F9B\u7684\u4E00\u4E9B\u529F\u80FD\u3002\u70BA\u4E86\u5F97\u5230\u6700\u4F73\u4F7F\u7528\u6548\u679C\uFF0C\u5EFA\u8B70\u4F7F\u7528\u6211\u5011\u5728iOS\u5546\u5E97\u4E2D\u63D0\u4F9B\u4E4BApp\u3002",unsupportedBrowserTitle:"\u4E0D\u652F\u63F4\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",unsupportedBrowserMsg:"\u8ACB\u4F7F\u7528\u6700\u65B0\u7248\u4E4BChrome\u700F\u89BD\u5668",unknownBrowser:"\u672A\u77E5\u4E4B\u700F\u89BD\u5668",yourBrowser:"\u6240\u4F7F\u7528\u4E4B\u700F\u89BD\u5668",supportedVersionsLabel:"\u652F\u63F4\u4E4B\u700F\u89BD\u5668\u7248\u672C",otherIOSBrowsers:"\u5176\u4ED6iOS\u700F\u89BD\u5668\uFF1AiOS 13\u4EE5\u4E0A",signUpPageUrl:`${Zc}/users/sign_up?lang=tw`,iosAppStorePageUrl:"https://apps.apple.com/tw/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/zh-TW/chrome/",needBrowserUpdateMsg:"\u8ACB\u5C07\u60A8\u7684\u700F\u89BD\u5668\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C",installBrowser:"\u4E0B\u8F09\u700F\u89BD\u5668\u6700\u65B0\u7248\u672C",getApp:"\u7531\u5546\u5E97\u53D6\u5F97App",appStatusPageUrl:"https://status.loilonote.app/zh-Hant",couldntEncodeDrawnData:"\u7121\u6CD5\u5B8C\u6210\u624B\u5BEB\u6578\u64DA\u7DE8\u78BC",accessNotPermitted:"\u6C92\u6709\u5B58\u53D6\u6B0A\u9650",giveClipboardAccess:"\u5982\u6B32\u4F7F\u7528\u526A\u8CBC\u529F\u80FD\uFF0C\u5FC5\u9808\u958B\u555F\u526A\u8CBC\u7C3F\u5B58\u53D6\u6B0A\u9650\u3002",couldntLoadFontFileMsg:"\u7121\u6CD5\u8B80\u53D6\u6240\u9700\u4E4B\u5B57\u578B",noMemoryErrorTitle:"\u8A18\u61B6\u9AD4\u4E0D\u8DB3",noMemoryErrorMsg:"\u7531\u65BC\u8A18\u61B6\u9AD4\u4E0D\u8DB3\u7121\u6CD5\u5B8C\u6210\u8655\u7406\u3002\u8ACB\u91CD\u65B0\u958B\u555F\u61C9\u7528\u7A0B\u5F0F\u3002",couldntChangeTool:"\u7121\u6CD5\u5207\u63DB\u601D\u7DAD\u5DE5\u5177\u5716",couldntFetchData:"\u7121\u6CD5\u53D6\u5F97\u6578\u64DA\u8CC7\u6599",couldntSetupPdfWorker:"\u7121\u6CD5\u88FD\u4F5CPDF worker",couldntDeleteAsOtherInCharge:`\u9019\u500B\u8AB2\u7A0B\u5DF2\u6709\u5176\u4ED6\u8001\u5E2B\u4F7F\u7528\uFF0C\u6545\u7121\u6CD5\u522A\u9664\u3002
\u60A8\u8981\u89E3\u9664\u672C\u8AB2\u7A0B\u7684\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD\u55CE\uFF1F`,relatedSubjectsMsg:"\u203B\u82E5\u60A8\u8981\u89E3\u9664\u6B64\u8AB2\u7A0B\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD\uFF0C\u4E0B\u5217\u5171\u7528\u8CC7\u6599\u76D2\u7684\u8AB2\u7A0B\u8CA0\u8CAC\u4EBA\u4E5F\u6703\u4E00\u4F75\u89E3\u9664",stopBeginInCharge:"\u89E3\u9664\u8CA0\u8CAC\u4EBA\u8EAB\u4EFD",fileTooBigTitle:"\u6A94\u6848\u904E\u65BC\u9F90\u5927",fileTooBigMessage:"\u7121\u6CD5\u4E0A\u50B31GB\u4EE5\u4E0A\u4E4B\u6A94\u6848",exceedVideoQuality:`\u542B\u6709\u8F03\u5927\u4E4B\u5F71\u7247\u6A94\u6848\uFF0C\u767C\u5E03\u756B\u9762\u6642\u6050\u6703\u6709\u64AD\u653E\u4E0D\u9806\u66A2\u4E4B\u60C5\u6CC1\u3002
\u662F\u5426\u7E7C\u7E8C\u4E0A\u50B3?`,confirmDeleteTarget:"\u662F\u5426\u522A\u9664\u300C%1$s\u300D\uFF1F",signInWithXXX:"\u4EE5%1$s\u767B\u5165",confirmDisplayAnswers:"\u8981\u986F\u793A\u7B54\u6848\u55CE\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u5361\u7247\u8F49\u5B58\u5931\u6557",pdf:"PDF",exportingCardAsPdf:"\u5361\u7247\u6B63\u5728\u8F49\u5B58\u6210PDF\u6A94...",open:"\u958B\u5553",cache:"\u5FEB\u53D6",submittersAnswer:"%1$s\u7684\u7B54\u6848",previousSomeonesAnswer:"\u4E0A\u4E00\u4F4D\u7684\u7B54\u6848",nextSomeonesAnswer:"\u4E0B\u4E00\u4F4D\u7684\u7B54\u6848",newerDataExistsOnServer:"\u4F3A\u670D\u5668\u6709\u65B0\u7248\u672C\u8CC7\u6599\u5B58\u5728",qrCodePreviewDialogTitle:"\u5DF2\u8B80\u53D6QR Code",createWebCard:"\u88FD\u4F5CWeb\u5361",createTextCard:"\u88FD\u4F5C\u6587\u5B57\u5361",qrCodeScannerPrepError:"QR Code\u8B80\u53D6\u529F\u80FD\u5C1A\u672A\u5C31\u7DD2",textCardPlaceholderImgPath:"/svg/text_zh_100x75_margin.svg",qrModeGuidance:"\u8ACB\u5C07QR Code\u7F6E\u4E2D\u65BC\u6383\u7784\u7BC4\u570D\u5185",selectAnswers:"\u8ACB\u9078\u64C7\u56DE\u7B54",selectAnswersCompare:"\u8ACB\u9078\u64C7\u8981\u6BD4\u8F03\u7684\u7B54\u6848",selectNoteForAddingMaterials:"\u8981\u5C07\u8CC7\u6599\u6DFB\u52A0\u81F3\u54EA\u4E00\u4EFD\u7B46\u8A18\uFF1F",videoRecordingTimeLimitReached:"\u9304\u5F71\u6642\u9593\u5DF2\u9054\u4E0A\u9650\uFF0C\u5C07\u505C\u6B62\u9304\u5F71\u3002",creatingAttendanceCard:"\u6B63\u5728\u88FD\u4F5C\u51FA\u7F3A\u52E4\u5361",createdAttendanceCard:"\u51FA\u7F3A\u52E4\u5361\u88FD\u4F5C\u5B8C\u6210",failedCreateAttendanceCard:"\u7121\u6CD5\u88FD\u4F5C\u51FA\u7F3A\u52E4\u5361",attendance:"\u51FA\u7F3A\u52E4\u5361",attendanceReport:"\u51FA\u7F3A\u52E4\u806F\u7D61",attendanceCardCreator:"\u7DE8\u8005",attendanceCardEditAndResult:"\u7DE8\u8F2F\u30FB\u7D71\u8A08",preparingAttendance:"\u6B63\u5728\u6E96\u5099\u51FA\u7F3A\u52E4\u806F\u7D61",clickHereForHelp:"\u4F7F\u7528\u65B9\u6CD5\u8ACB\u53C3\u95B1\u6B64\u8655",helpPageLinkForQuizCardTest:"https://scrapbox.io/hkloilomanual/%E6%B8%AC%E9%A9%97%E5%8D%A1",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/hkloilomanual/%E5%95%8F%E5%8D%B7%E5%8D%A1",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/hkloilomanual/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/hkloilomanual/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",loginPageTitle:"\u767B\u5165LoiLoNote School",loginPageDesc:"\u6B61\u8FCE\u4F86\u5230LoiLoNote School\uFF0C\u8B93\u6211\u5011\u52A0\u5165\u6709\u8DA3\u7684\u8AB2\u7A0B\u5427!",penType:"\u7B46\u7684\u7A2E\u985E",penColor:"\u7B46\u7684\u984F\u8272",highlighterColor:"\u87A2\u5149\u7B46\u984F\u8272",clearAll:"\u5168\u90E8\u6E05\u9664",penThickness:"\u7DDA\u689D\u7C97\u7D30",eraserSize:"\u6A61\u76AE\u64E6\u6E05\u9664\u7BC4\u570D\u5927\u5C0F",myFolder:"\u6211\u7684\u8CC7\u6599\u593E",schoolWideFolder:"\u6821\u5167",districtShared:"%1$s\u5171\u7528",schoolShared:"\u6821\u5167\u5171\u7528",classShared:"\u6B64\u8AB2\u7A0B\u5171\u7528",teachersOnlyFolder:"\u50C5\u9650\u8001\u5E2B",classFolder:"%1$s \u5C02\u7528",sortCreateDateOrder:"\u88FD\u4F5C\u65E5\u671F\u9806\u5E8F",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u671F\u9806\u5E8F",sortUpdateDateOrderForMaterialBox:"\u66F4\u65B0\u65E5\u671F\u9806\u5E8F",materialNameOrder:"\u540D\u7A31\u9806\u5E8F",materialFileUpdateDateFolderNameOrder:"\u6A94\u6848\u593E\u540D\u7A31\u9806\u5E8F",pushTokenRegistration:"\u767B\u9304\u901A\u77E5\u901A\u8B49",registered:"\u5DF2\u767B\u9304",unregistered:"\u672A\u767B\u9304",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",confirmMarkAllSubmitsAsRead:"\u5C07\u6700\u65B0\u7684\u7E73\u4EA4\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80\u3002\u662F\u5426\u57F7\u884C\uFF1F",markedAllSubmitsAsRead:"\u6700\u65B0\u7684\u7E73\u4EA4\u5DF2\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",confirmMarkAllRevealAnswersAsRead:"\u5C07\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80\u3002\u662F\u5426\u57F7\u884C\uFF1F",markedAllRevealAnswersAsRead:"\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6A19\u793A\u70BA\u5DF2\u8B80",failedToMarkAllAsRead:"\u7121\u6CD5\u8B8A\u66F4\u70BA\u5DF2\u8B80\u53D6",copied:"\u5DF2\u62F7\u8C9D",copiedToClipboard:"\u5DF2\u7D93\u8907\u88FD\u5230\u526A\u8CBC\u7C3F",failedToCopyCards:"\u7121\u6CD5\u8907\u88FD\u5361\u7247",tooManyCards:"\u5361\u7247\u6578\u904E\u591A",cannotCreateWebCardFromExtension:"\u7121\u6CD5\u88FD\u4F5CWeb\u5361",failedCreateWebCardFromExtension:"\u958B\u555F\u5305\u542BWeb\u5361\u7684\u7B46\u8A18\u5F8C\uFF0C\u8ACB\u4F7F\u7528\u64F4\u5145\u529F\u80FD\u4F86\u88FD\u4F5C\u5361\u7247\u3002",failedCreateWebCardFromExtensionTitle:"\u8ACB\u958B\u555F\u7B46\u8A18",enableSharedNote:"\u88FD\u4F5C\u5171\u4EAB\u7B46\u8A18(\u50C5\u9650\u8001\u5E2B)",selectSchool:"\u8ACB\u9078\u64C7\u8981\u767B\u5165\u4E4B\u5B78\u6821",showAnnotation:"\u986F\u793A\u4FEE\u6B63\u8655",showSubmission:"\u986F\u793A\u7E73\u4EA4\u8CC7\u6599",hideAnnotation:"\u4E0D\u986F\u793A\u4FEE\u6B63\u8655",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u622A\u6B62",submissionBoxDeletedOrNotExisted:"\u7E73\u4EA4\u76D2\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u522A\u9664",getToWork:"\u99AC\u4E0A\u524D\u5F80\u8A2D\u5B9A\uFF01",chooseNoteToWorkIn:"\u8981\u4F7F\u7528\u54EA\u4E00\u4EFD\u7B46\u8A18\u4F86\u8A2D\u5B9A\u4E3B\u984C\uFF1F",newTaskCreated:"\u6709\u65B0\u589E\u4E4B\u7E73\u4EA4\u8CC7\u6599",standardNote:"\u500B\u4EBA\u7B46\u8A18",xIsDeleted:"\u5C07\u522A\u9664 %1$s",couldntFetchSharedNoteMembers:"\u7121\u6CD5\u53D6\u5F97\u6210\u54E1",manageSharedNoteMember:"\u6210\u54E1\u4E4B\u7BA1\u7406",chooseNoteToManageMember:"\u8ACB\u9078\u64C7\u7BA1\u7406\u7B46\u8A18\u4E4B\u6210\u54E1",chooseNoteToExport:"\u8ACB\u9078\u64C7\u532F\u51FA\u4E4B\u7B46\u8A18",chooseNoteToImport:"\u8ACB\u9078\u64C7\u532F\u5165\u4E4B\u7B46\u8A18",couldntEditMember:"\u7121\u6CD5\u7DE8\u8F2F\u6210\u54E1",couldntAdd:"%1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u7121\u6CD5\u8FFD\u52A0",couldntDel:"%1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u4EBA\u7121\u6CD5\u522A\u9664",couldntEditMemberWithCount:"%1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u4EBA\u7121\u6CD5\u7DE8\u8F2F",removedFromSharedNoteMembers:"\u5DF2\u89E3\u9664\u5171\u6709\u7B46\u8A18\u6210\u54E1\u8EAB\u5206",couldntGetDeviceInfo:"\u7121\u6CD5\u53D6\u5F97\u8A2D\u5099\u8CC7\u8A0A",changePassword:"\u66F4\u65B0\u5BC6\u78BC",submitPassword:"\u66F4\u65B0",currentPasswordIncorrect:"\u76EE\u524D\u4E4B\u5BC6\u78BC\u4E0D\u6B63\u78BA",currentPassword:"\u76EE\u524D\u4E4B\u5BC6\u78BC",newPassword:"\u65B0\u5BC6\u78BC",newPasswordConfirm:"\u65B0\u5BC6\u78BC\uFF08\u78BA\u8A8D\uFF09",couldntChangePassword:"\u7121\u6CD5\u66F4\u65B0\u5BC6\u78BC",passwordUpdated:"\u5BC6\u78BC\u5DF2\u66F4\u65B0",hiUser:"%1$s\u60A8\u597D",setNewPassword:"\u8ACB\u8A2D\u5B9A\u4E0B\u6B21\u767B\u5165\u6642\u4F7F\u7528\u7684\u65B0\u5BC6\u78BC",welcomeToLns:"\u6B61\u8FCE\u4F86\u5230LoiLoNote School",connectionStatus:"\u9023\u7DDA\u72C0\u6CC1",connectedToPushServer:"\u5DF2\u9023\u63A5\u901A\u77E5\u4F3A\u670D\u5668",couldntConnectToPushServer:"\u672A\u9023\u63A5\u901A\u77E5\u4F3A\u670D\u5668\uFF0C\u90E8\u5206\u529F\u80FD\u7121\u6CD5\u4F7F\u7528",reconnectingToPushServer:"\u8207\u901A\u77E5\u4F3A\u670D\u5668\u91CD\u65B0\u9023\u63A5\u4E2D...",pleaseConnectToInternet:"\u8ACB\u9023\u63A5\u7DB2\u8DEF",pleaseConnectToInternetDesc:"\u76EE\u524D\u70BA\u96E2\u7DDA\u72C0\u614B\u3002\u8ACB\u78BA\u8A8D\u7DB2\u8DEF\u9023\u7DDA\u3002",default:"\u9810\u8A2D",confirmCloseNoteForOtherSubmissionBox:`\u6B63\u524D\u5F80\u5176\u4ED6\u8AB2\u7A0B\u4E4B\u7E73\u4EA4\u76D2\u3002
\u5C07\u95DC\u9589\u76EE\u524D\u7B46\u8A18\uFF0C\u662F\u5426\u57F7\u884C?`,confirmCloseNoteForOtherTimeline:`\u6B63\u524D\u5F80\u5176\u4ED6\u8AB2\u7A0B\u4E4B\u6642\u9593\u8EF8\u3002
\u5C07\u95DC\u9589\u76EE\u524D\u7B46\u8A18\uFF0C\u662F\u5426\u57F7\u884C?`,confirmCloseNoteForOtherCourse:`\u6B63\u524D\u5F80\u5176\u4ED6\u8AB2\u7A0B\u4E4B\u7B46\u8A18\u3002
\u5C07\u95DC\u9589\u76EE\u524D\u7B46\u8A18\uFF0C\u662F\u5426\u57F7\u884C?`,selectItemsToExport:"\u8ACB\u9078\u64C7\u532F\u51FA\u4E4B\u6A94\u6848",retry:"\u518D\u6B21\u57F7\u884C",exceedNumberOfExportableItemsMsg:"\u53EF\u532F\u51FA\u4E4B\u6A94\u6848\u30FB\u6587\u4EF6\u593E\u6578\u91CF\u8D85\u904E\u4E0A\u9650\u505C\u6B62\u532F\u51FA",exceedNumberOfExportableHierarchyMsg:"\u53EF\u532F\u51FA\u4E4B\u6A94\u6848\u30FB\u6587\u4EF6\u593E\u968E\u5C64\u8D85\u904E\u4E0A\u9650\u505C\u6B62\u532F\u51FA",analyzingDocument:"\u6B63\u5728\u8B80\u53D6\u6A94\u6848",exportingDocument:"\u6B63\u5728\u532F\u51FA\u6A94\u6848",couldntExportDocument:"\u7121\u6CD5\u532F\u51FA\u6A94\u6848",import:"\u532F\u5165",imported:"\u5DF2\u532F\u5165",export:"\u532F\u51FA",underMaintenace:"\u76EE\u524D\u6B63\u5728\u9032\u884C\u7DAD\u8B77",maintenanceNotification:"\u4F3A\u670D\u5668\u7DAD\u8B77\u901A\u77E5",maintenanceScheduled:"\u5DF2\u9810\u5B9A\u8981\u57F7\u884C\u7DAD\u8B77",seeDetail:"\u8A73\u60C5\u8ACB\u53C3\u95B1\u6B64\u8655",endSchedule:"\u7D50\u675F\u9810\u5B9A\u6642\u9593",watchTutorial:"\u89C0\u770B\u793A\u7BC4\u5F71\u7247",closeTutorialTitle:"\u662F\u5426\u7D50\u675F\u793A\u7BC4\u5F71\u7247\uFF1F",closeTutorialMsg:"\u6B64\u5F71\u7247\u53EF\u96A8\u6642\u89C0\u770B",closeTutorialCheckLabel:"\u4EE5\u5F8C\u4E0D\u518D\u986F\u793A",understood:"\u77E5\u9053\u4E86",failedPlayTutorial:"\u7121\u6CD5\u64AD\u653E\u793A\u7BC4\u5F71\u7247",importingNotes:"\u6B63\u5728\u532F\u5165\u7B46\u8A18...",exportingNotes:"\u6B63\u5728\u532F\u51FA\u7B46\u8A18...",ipAddressRestricted:"\u7981\u6B62\u5F9E\u9019\u500BIP\u4F4D\u5740\u5B58\u53D6",insufficientPermissionToJoin:"\u6C92\u6709\u53C3\u52A0\u6B0A\u9650",classHasEnded:"\u6B64\u73ED\u7D1A\u5DF2\u95DC\u9589",onlyStudentsAllowedToJoin:"\u9664\u5B78\u751F\u5916\u7121\u6CD5\u53C3\u52A0",graduatesNotAllowedToJoinClass:"\u7121\u6CD5\u53C3\u52A0\u5DF2\u7562\u696D\u6821\u4E4B\u73ED\u7D1A",ssoLogin422Msg:"\u5B78\u6821\u5167\u6709\u76F8\u540C\u4E4B%1$s\u5E33\u865F\u91CD\u8907\u767B\u9304\uFF61 \u9664\u4E86\u60F3\u4F7F\u7528\u65BC\u767B\u5165\u4E4B\u5E33\u865F\u5916, \u8ACB\u89E3\u9664\u5E33\u865F\u4E4B\u91CD\u8907\u7D81\u5B9A\uFF61",ssoLogin422Url:"https://scrapbox.io/hkloilomanual/%E4%BB%A5SSO%E7%99%BB%E5%85%A5%E6%99%82%E6%89%80%E5%87%BA%E7%8F%BE%E9%87%8D%E8%A4%87%E7%99%BB%E9%8C%B2%E4%B9%8B%E9%8C%AF%E8%AA%A4%E8%A8%8A%E6%81%AF",ssoLogin404Msg:"\u6B64%1$s\u5E33\u865F\u5C1A\u672A\u767B\u9304\u81F3LoiLoNote\u30FBSchool\u6545\u7121\u6CD5\u4F7F\u7528\u3002\u8ACB\u6D3D\u8A62\u7BA1\u7406\u8005\u3002",importNotes:"\u532F\u5165%1$d\u500B\u7B46\u8A18",createCourseAfterUserGroupCreation:"\u8ACB\u7E7C\u7E8C\u5EFA\u7ACB\u8AB2\u7A0B",createCourseAfterUserGroupCreationDesc:"\u5C07\u5EFA\u7ACB\u73ED\u7D1A\u6240\u9700\u4E4B\u570B\u8A9E.\u6578\u5B78.\u82F1\u6587\u7B49\u8AB2\u7A0B",insufficientPermission:"\u7121\u57F7\u884C\u6B0A\u9650",accessDenied:"\u7121\u5B58\u53D6\u6B0A\u9650",actionCannotBeCarriedOutOnClosedCourse:"\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B\u7121\u6CD5\u4F7F\u7528",couldNotGetSubmissionAnswers:"\u7121\u6CD5\u958B\u555F\u7E73\u4EA4\u76D2\u6AA2\u8996\u5167\u5BB9",folderWithThisNameAlreadyExists:"\u5DF2\u6709\u76F8\u540C\u540D\u7A31\u7684\u6587\u4EF6\u593E\u5B58\u5728",importDocument:"\u6B63\u5728\u532F\u5165\u6A94\u6848",couldntImportDocument:"\u7121\u6CD5\u532F\u5165\u6A94\u6848",folderForImportedItemsWillBeCreated:"\u88FD\u4F5C\u532F\u51FA\u8655\u6A94\u6848",save:"\u5132\u5B58",administrator:"\u7BA1\u7406\u8005",owner:"\u64C1\u6709\u8005",reuse:"\u518D\u6B21\u4F7F\u7528",reuseThisTestCard:"\u518D\u6B21\u4F7F\u7528\u9019\u5F35\u6E2C\u9A57\u5361",reuseThisAttendanceCard:"\u518D\u6B21\u4F7F\u7528\u9019\u5F35\u51FA\u7F3A\u52E4\u5361",pleaseWaitForMaintenanceEnd:"\u8ACB\u7A0D\u5F85\u7247\u523B\u76F4\u5230\u7DAD\u8B77\u5DE5\u4F5C\u7D50\u675F",uploadingXXX:"\u6B63\u5728\u4E0A\u50B3%1$s...",upload:"\u4E0A\u50B3",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"\u7121\u6CD5\u4E0A\u50B3\u6587\u4EF6\u593E",filesNoExtCannotBeUploaded:"\u7121\u6CD5\u4E0A\u50B3\u7121\u526F\u6A94\u540D\u4E4B\u6A94\u6848",fileWithInvalidNameContained:"\u542B\u6709\u540D\u7A31\u7121\u6548\u4E4B\u6587\u4EF6",insufficientPermissionToDocumentGroup:"\u4E0D\u5177\u5BEB\u5165\u6587\u4EF6\u593E\u4E4B\u6B0A\u9650",newSharedNote:"\u65B0\u5171\u4EAB\u7B46\u8A18",convertToSharedNote:"\u5C07\u5171\u4EAB\u7B46\u8A18",chooseNoteToShare:"\u8ACB\u9078\u64C7\u8981\u5171\u4EAB\u7684\u7B46\u8A18",chooseUsersToBeShared:"\u8ACB\u9078\u64C7\u5171\u4EAB\u7B46\u8A18\u7684\u6210\u54E1",shareXXX:" \u5171\u4EAB%1$s",confirmShareNote:"\u8A2D\u5B9A\u70BA\u5171\u4EAB\u7B46\u8A18\u7121\u6CD5\u518D\u56DE\u5FA9\u5230\u4E00\u822C\u7B46\u8A18\u3002\u7121\u6CD5\u5C0D\u61C9\u5171\u4EAB\u7B46\u8A18\u7684\u61C9\u7528\u8EDF\u9AD4\u5C07\u4E0D\u6703\u986F\u793A\u5728\u4E00\u89BD\u8868\u4E2D\uFF0C\u662F\u5426\u63A5\u53D7? ",teacherNoClosedCourseTitle:"\u4F60\u4E0D\u8CA0\u8CAC\u4EFB\u4F55\u904E\u53BB\u7684\u79D1\u76EE",studentNoClosedCourseTitle:"\u4F60\u6C92\u6709\u52A0\u5165\u4EFB\u4F55\u904E\u53BB\u7684\u79D1\u76EE",pasteTips:"\u8CBC\u4E0A\u6587\u672C\u6216\u662F\u7531\u7DB2\u8DEF\u8907\u88FD\u904E\u4F86\u7684\u5716\u7247",noMembersInGroup:"\u73ED\u7D1A\u672A\u6709\u5B78\u751F\u52A0\u5165",showCodeToInviteStudents:"\u516C\u5E03\u8AB2\u7A0B\u53C3\u52A0\u4EE3\u78BC\uFF0C\u8ACB\u5B78\u751F\u8F38\u5165",members:"\u4EBA",saved:"\u5DF2\u5132\u5B58",collectCard:"\u532F\u96C6\u5361\u7247",collectedCard:"\u5DF2\u532F\u96C6\u4E4B\u5361\u7247",collectCardDialogTitle:"\u662F\u5426\u5C07\u5361\u7247\u532F\u96C6\u5230\u684C\u9762\u4E2D\u5FC3\u8655\uFF1F",collect:"\u532F\u96C6",confirmCollectCardMessage:"\u4F3C\u4E4E\u6709\u5F88\u5927\u578B\u7684\u5361\u7247\u6216\u5EA7\u843D\u5728\u5F88\u9060\u4F4D\u7F6E\u7684\u5361\u7247\u3002\u6703\u5C07%1$d\u5F35\u5361\u7247\u532F\u96C6\u81F3\u4E2D\u5FC3\u8655\u9032\u884C\u4FEE\u5FA9\u3002",completeCollectCardMessage:"\u5B8C\u6210\u5927\u578B\u5361\u7247\u4EE5\u53CA\u5EA7\u843D\u5728\u5F88\u9060\u4F4D\u7F6E\u4E4B\u5361\u7247\u6536\u96C6\u3002",sentToNote:"\u5DF2\u50B3\u9001\u7D66\u300C%1$s\u300D",myNote:"\u500B\u4EBA\u7B46\u8A18",searchNote:"\u6AA2\u7D22\u7B46\u8A18",searchMaterial:"\u6AA2\u7D22\u8CC7\u6599\u76D2",enableSearch:"\u5C07\u6AA2\u7D22\u8A2D\u5B9A\u70BA\u6709\u52B9",noMatchesFound:"\u627E\u4E0D\u5230\u4E00\u81F4\u7684\u6AA2\u7D22\u7D50\u679C",endSearch:"\u6AA2\u7D22\u7D50\u675F",searchResult:"\u6AA2\u7D22\u7D50\u679C",graduated:"\u5DF2\u7562\u696D",textPointerIconPath:"/svg/text_circle_zh.svg",download:"\u4E0B\u8F09",downloadAndUploadLater:"\u4E0B\u8F09\u5F8C\u518D\u91CD\u65B0\u4E0A\u50B3\u5373\u53EF\u4FEE\u5FA9\u3002",reloading:"\u518D\u6B21\u8B80\u53D6\u4E2D...",graduateMsg:"\u606D\u559C\u60A8\u7562\u696D\u4E86!\u5728\u5B78\u671F\u9593\u7684\u4E0A\u8AB2\u8CC7\u6599\uFF0C\u53EF\u4EE5\u5F9E\u300C\u5DF2\u7D50\u675F\u4E4B\u8AB2\u7A0B\u300D\u4F86\u700F\u89BD\u3002",sharedNoteProtocolVersionErrorMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u61C9\u7528\u7A0B\u5F0F\u672A\u652F\u63F4\u5171\u4EAB\u7B46\u8A18\u7684\u90E8\u5206\u529F\u80FD\u3002\u8ACB\u91CD\u65B0\u8B80\u53D6\u4E26\u57F7\u884C\u66F4\u65B0\u3002",couldNotConnectSharedNote:"\u7121\u6CD5\u9023\u7D50\u5171\u4EAB\u7B46\u8A18",failedToSaveDataToServer:`\u6578\u64DA\u8CC7\u6599\u7121\u6CD5\u5132\u5B58\u81F3\u4F3A\u670D\u5668\u3002
\u662F\u5426\u5F37\u5236\u95DC\u9589\uFF1F`,recordingSettingTitle:"\u9304\u97F3\u30FB\u9304\u5F71",enableAudioNoiseReduction:"\u964D\u4F4E\u566A\u97F3",loadingFailed:"\u7121\u6CD5\u8B80\u53D6",decodingFailed:"\u7121\u6CD5\u89E3\u78BC\u3002",browserCannotReadTheVideo:"\u8A72\u5F71\u7247\u70BA\u700F\u89BD\u5668\u7121\u6CD5\u8B80\u53D6\u7684\u683C\u5F0F",browserCannotReadTheAudio:"\u8A72\u97F3\u6A94\u70BA\u700F\u89BD\u5668\u7121\u6CD5\u8B80\u53D6\u7684\u683C\u5F0F",networkError:"\u7DB2\u8DEF\u932F\u8AA4",loadingInterrupted:"\u5DF2\u4E2D\u65B7\u8B80\u53D6",couldntEditNote:"\u7121\u6CD5\u8B8A\u66F4\u5171\u4EAB\u7B46\u8A18",noteIsReadonly:"\u6B64\u4EFD\u7B46\u8A18\u70BA\u8B80\u53D6\u5C08\u7528",notConnectedToSharedNote:"\u672A\u9023\u63A5\u5230\u5171\u4EAB\u7B46\u8A18",materialBoxAccessibleMessageForTeacher:"\u9019\u500B\u8CC7\u6599\u593E\u5B78\u751F\u4E5F\u53EF\u4EE5\u700F\u89BD",trashBox:"\u5783\u573E\u6876",restore:"\u5FA9\u539F",selectItemsToRestore:"\u8ACB\u9EDE\u64CA\u8981\u5FA9\u539F\u7684\u9805\u76EE",restoreToThisFolder:"\u5FA9\u539F\u81F3\u6B64\u8CC7\u6599\u593E\u7576\u4E2D",restoringDocument:"\u6A94\u6848\u5FA9\u539F\u4E2D...",invalidDocumentRestoreDetails:"\u627E\u4E0D\u5230\u6A94\u6848\u6216\u6A94\u6848\u593E\uFF0C\u6216\u8005\u76EE\u6A19\u662F\u7121\u6548\u8DEF\u5F91",couldntRestoreDocument:"\u7121\u6CD5\u5FA9\u539F\u6A94\u6848",materialTrashBoxHeaderMessage:"\u79FB\u81F3\u5783\u573E\u6876\u5F8C\uFF0C\u8A72\u9805\u76EE\u5C07\u572830\u5929\u5F8C\u81EA\u52D5\u5B8C\u5168\u522A\u9664",notShared:"\u4E0D\u5171\u4EAB",sharedInManageable:"\u7BA1\u7406",sharedInWritable:"\u5BEB\u5165",sharedInViewOnly:"\u50C5\u700F\u89BD",sharedNoteMembers:"\u5171\u4EAB\u6210\u54E1",settings:"\u8A2D\u5B9A",sharedNoteSettings:"\u5171\u4EAB\u8A2D\u5B9A",couldNotChangeSharedNoteSettings:"\u7121\u6CD5\u8B8A\u66F4\u5171\u4EAB\u8A2D\u5B9A",change:"\u8B8A\u66F4",noteName:"\u7B46\u8A18\u540D\u7A31",sharedRange:"\u5171\u4EAB\u7BC4\u570D",allTeachers:"\u6240\u6709\u8001\u5E2B",add:"\u65B0\u589E",execute:"\u57F7\u884C",javaScriptRequired:"JavaScript\u5DF2\u88AB\u505C\u7528\uFF61 \u70BA\u4E86\u4F7F\u7528LoiLoNote School, \u8ACB\u958B\u555F\u700F\u89BD\u5668\u7684JavaScript\u8A2D\u7F6E\uFF61",selectQuizSharingMode:"\u8ACB\u9078\u64C7\u767C\u5E03\u6A21\u5F0F",quizSharingModeNormal:"\u666E\u901A\u6A21\u5F0F",quizSharingModeGame:"\u904A\u6232\u6A21\u5F0F(\u03B2)",reconnectingToSharedNote:"\u518D\u6B21\u9023\u7D50\u5171\u4EAB\u7B46\u8A18..."};var cK={start:"\u5F00\u59CB",status404ItemNotFound:"\u9879\u76EE\u4E0D\u5B58\u5728",aboutThisApp:"\u5173\u4E8E\u8FD9\u4E2AApp",addCardDialogTitle:"\u65B0\u589E\u5361\u7247",addCourseDialogJoinCourseBtnLabel:"\u65B0\u589E",addCourseLabel:"\u65B0\u589E\u8BFE\u7A0B",addCourseDesc:"\u8BF7\u201C\u65B0\u589E\u8BFE\u7A0B\u201D",adminPage:"\u7BA1\u7406\u9875\u9762",allMembers:"\u6240\u6709\u4EBA",alreadyJoinedGroup:"\u5DF2\u53C2\u52A0",and:"\u548C",andOtherMembers:"\u5176\u4ED6%1$d",anonymous:"\u4E0D\u8BB0\u540D",answersNotVisibleWarnMsg:"\u8001\u5E08\u672B\u5F00\u542F\u5171\u4EAB\u529F\u80FD\uFF0C\u76EE\u524D\u65E0\u6CD5\u53C2\u9605\u5176\u4ED6\u4EBA\u7684\u56DE\u7B54",answersNotVisibleWarnTitle:"\u672A\u5206\u4EAB\u4E4B\u56DE\u7B54",api202ErrorMsg:"202:\u5305\u542B %1$s\u4E4B\u6863\u6848\u672A\u5B8C\u6210\u4E0A\u4F20\u5904\u7406\u3002\u7A0D\u5F85\u7247\u523B\u540E\u5373\u53EF\u8BFB\u53D6\u3002",api403ErrorMsg:"\u6CA1\u6709%1$s\u4E4B\u6743\u9650\u3002\u8BE6\u7EC6\u60C5\u5F62\u8BF7\u6D3D\u6821\u65B9\u7BA1\u7406\u4EBA\u5458\u3002",api404ErrorMsg:"\u65E0\u6CD5\u627E\u5230\u4F3A\u670D\u5668\u6240\u8981\u6C42\u4E4B%1$s\u3002\u65E0\u6CD5\u5EFA\u7ACB\u6B64%1$s\uFF0C\u5C06\u6709\u53EF\u80FD\u88AB\u5220\u9664\u3002",arrange:"\u6392\u5217",asNextCard:"\u4E0B\u4E00\u5F20\u5361\u7247",attending:"\u4E0A\u8BFE\u4E2D",attendingOtherCourse:"\u53C2\u52A0\u5176\u4ED6\u8BFE\u7A0B",audioDefaultFileName:"\u97F3\u9891",audioRecordBtnLabel:"\u5F55\u97F3",automatic:"\u81EA\u52A8",back:"\u8FD4\u56DE",backToAnswerList:"\u8FD4\u56DE\u56DE\u7B54\u4E00\u89C8\u8868",brokenNoteErrorMsg:"\u50A8\u5B58\u4E8E\u4F3A\u670D\u5668\u4E0A\u4E4B%1$s\u53EF\u80FD\u53D1\u751F\u6BC1\u635F\u3002\u656C\u8BF7\u8054\u7EDC\u672C\u516C\u53F8\u5BA2\u670D\u90E8\u95E8\u5904\u7406\u3002\uFF08\u9519\u8BEF\u4EE3\u7801: %2$d,\u8BFE\u7A0BID: %3$d,\u7B14\u8BB0ID: %4$s\uFF09",browserDoesntSupportAudioRecording:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668\u4E0D\u652F\u63F4\u5F55\u97F3\u529F\u80FD",browserDoesntSupportMediaCapture:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668\u4E0D\u652F\u63F4\u7167\u76F8\u529F\u80FD",browsingWeb:"Web",camera:"\u7167\u76F8\u673A",cancel:"\u53D6\u6D88",canceledBatchDownload:"\u6279\u6B21\u4E0B\u8F09\u5DF2\u4E2D\u65B7",cancelingDownload:"\u6B63\u5728\u53D6\u6D88\u4E0B\u8F7D...",cannotDeleteThisHistory:"\u65E0\u6CD5\u5220\u9664\u6B64\u5C65\u5386",cannotInsertWhileStillLoadingDocument:"\u8D44\u6599\u8BFB\u53D6\u4F5C\u4E1A\u5C1A\u672A\u5B8C\u6210\uFF0C\u65E0\u6CD5\u65B0\u589E\u5361\u7247",cantFindUsableDevice:"\u65E0\u6CD5\u53D6\u5F97\u53EF\u4EE5\u4F7F\u7528\u4E4B\u8F7D\u5177\u8D44\u8BAF",cardHasUnsavedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u6B63\u5728\u4E0A\u4F20\u7684\u6863\u6848",cardHasUploadFailedAttachments:"\u5361\u7247\u4E2D\u5305\u542B\u6709\u4E0A\u4F20\u5931\u8D25\u7684\u6863\u6848",changeLayout:"\u53D8\u66F4\u7248\u9762",changeLayoutDescription:"\u53EF\u4EE5\u53D8\u66F4\u63D0\u51FA\u8D44\u6599\u7684\u7248\u9762",changeTools:"\u5207\u6362\u601D\u7EF4\u5DE5\u5177",renamingNote:"\u6B63\u5728\u5C06\u201C%1$s\u201D\u4E4B\u540D\u79F0\u53D8\u66F4\u4E3A\u201C%2$s\u201D...",checkAttendance:"\u786E\u8BA4\u53C2\u52A0\u8005",checking:"\u786E\u8BA4\u4E2D...",checkScreenLock:"\u786E\u8BA4\u8367\u5E55\u9501\u5B9A",checkServiceStatus:"\u8BF7\u786E\u8BA4\u4F3A\u670D\u5668\u4E4B\u670D\u52A1\u72B6\u51B5",selectItemsToCopy:"\u8BF7\u9009\u62E9\u8981\u590D\u5236\u7684\u9879\u76EE",selectItemsToErase:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE",selectItemsToMove:"\u8BF7\u9009\u62E9\u8981\u79FB\u52A8\u7684\u9879\u76EE",selectItemToRename:"\u8BF7\u70B9\u51FB\u8981\u53D8\u66F4\u540D\u79F0\u7684\u9879\u76EE",askWhichFolderToCopyItTo:"\u4F60\u60F3\u628A\u5B83\u590D\u5236\u5230\u54EA\u4E2A\u6587\u4EF6\u5939\uFF1F",askWhichFolderToImportItTo:"\u4F60\u60F3\u5BFC\u5165\u54EA\u4E2A\u6587\u4EF6\u5939\uFF1F",askWhichFolderToMoveItTo:"\u4F60\u60F3\u79FB\u52A8\u5230\u54EA\u4E2A\u6587\u4EF6\u5939\uFF1F",askWhichFolderToRestoreItTo:"\u8BF7\u95EE\u60A8\u8981\u590D\u539F\u81F3\u54EA\u4E2A\u8D44\u6599\u5939\u5462\uFF1F",askWhichFolderToSaveItTo:"\u4F60\u60F3\u628A\u5B83\u4FDD\u5B58\u5728\u54EA\u4E2A\u6587\u4EF6\u5939\u91CC\uFF1F",chooseGroupToAddTo:"\u8BF7\u9009\u62E9\u60A8\u8981\u6388\u8BFE\u4E4B\u73ED\u7EA7",noGroups:"\u672C\u5E74\u5EA6\u5C1A\u672A\u6709\u73ED\u7EA7\u767B\u8BB0",createNewGroupDesc:"\u8BF7\u7531\u2193 \u201C\u5EFA\u7ACB\u65B0\u73ED\u7EA7\u201D",groupDesc:"\u4E00\u7FA4\u540C\u65F6\u4E0A\u8BFE\u4E4B\u5B66\u751F\u79F0\u4E4B\u4E3A\u201C\u73ED\u7EA7\u201D",chooseGroupToDelete:"\u8BF7\u9009\u62E9\u8981\u5220\u9664\u4E4B\u73ED\u7EA7",chooseNoteToCopy:"\u8BF7\u9009\u62E9\u8981\u590D\u5236\u4E4B\u7B14\u8BB0",chooseNoteToRename:"\u8BF7\u9009\u62E9\u8981\u53D8\u66F4\u540D\u79F0\u4E4B\u7B14\u8BB0",choosingCourse:"\u9009\u8BFE\u4E2D",close:"\u5173\u95ED",closeAfterTen:"10\u5206\u949F\u540E",closeCamera:"\u5173\u95ED\u7167\u76F8\u673A",closedTaskLabel:"\u622A\u6B62",closeNote:"\u5173\u95ED\u7B14\u8BB0",closeNow:"\u7ACB\u523B\u5173\u95ED",closeThisScreen:"\u5173\u95ED\u6B64\u753B\u9762",closeToday:"\u4ECA\u65E5\u5185",comparison:"\u6BD4\u8F83",complete:"\u5B8C\u6210",completedBatchDownload:"\u6279\u6B21\u4E0B\u8F7D\u5DF2\u5B8C\u6210",confirmAnswerShare:"\u5206\u4EAB\u5B66\u751F\u7B54\u6848\u3002\u662F\u5426\u6267\u884C?",confirmAudioRecordingOverwrite:"\u91CD\u65B0\u5F55\u97F3\u5C06\u8986\u76D6\u539F\u6709\u97F3\u6863\u3002\u662F\u5426\u6267\u884C?",confirmCardDelete:"\u662F\u5426\u5220\u9664\u5361\u7247?",confirmDeleteTimelineHistory:"\u5220\u9664\u65F6\u95F4\u8F74\u5C65\u5386\u3002\u662F\u5426\u6267\u884C\uFF1F",confirmDuplicateAllConnectedCards:"\u5EFA\u7ACB\u6240\u6709\u4E32\u8054\u4E4B\u5361\u7247\u7684\u526F\u672C\u3002\u662F\u5426\u786E\u5B9A\uFF1F",confirmCreateSubject:"\u662F\u5426\u5EFA\u7ACB\u201C%1$s\u201D\uFF1F",confirmDelete:"\u662F\u5426\u5220\u9664?",confirmDeleteAudioRecording:"\u5220\u9664\u97F3\u6863\u3002\u662F\u5426\u6267\u884C?",confirmGroupJoin:"\u53C2\u52A0%1$s\u3002\u662F\u5426\u6267\u884C?",confirmLogout:"\u662F\u5426\u767B\u51FA?",confirmMultiChildCardDelete:"\u662F\u5426\u5220\u9664\u5361\u7247\u4E0E%1$d\u4E4B\u5B50\u5361\u7247\uFF1F",confirmMultiCardGroupDelete:"\u662F\u5426\u5220\u9664%1$d\u4E4B\u5361\u7247\u4E0E\u5B50\u5361\u7247\uFF1F",confirmMultiFileDelete:"\u5220\u9664%1$d\u6863\u6848\u3002\u662F\u5426\u6267\u884C\uFF1F",confirmReloadWhileUnsavedChangesExist:"\u7B14\u8BB0\u6709\u672A\u4FDD\u5B58\u4E4B\u53D8\u66F4\u5185\u5BB9\uFF0C\u6267\u884C\u66F4\u65B0\u6709\u53EF\u80FD\u4F1A\u6D88\u5931\uFF0C\u662F\u5426\u7EE7\u7EED\u6267\u884C?",confirmResetVideoCamera:"\u91CD\u65B0\u5F55\u5F71\u3002\u662F\u5426\u6267\u884C?",confirmResubmit:"\u662F\u5426\u518D\u6B21\u7F34\u4EA4\u81F3\u201C%1$s\u201D?",confirmRevealSubmitterNames:"\u5C06\u6392\u5217\u987A\u5E8F\u53D8\u66F4\u4E3A\u201C%1$s\u201D\u3002\u663E\u793A\u6240\u6709\u56DE\u7B54\u8005\u4E4B\u59D3\u540D\uFF0C\u662F\u5426\u6267\u884C\uFF1F",confirmSendBack:"\u662F\u5426\u56DE\u8986?",confirmSendToAll:"\u662F\u5426\u4F20\u9001\u7ED9\u6240\u6709\u4EBA\uFF1F",confirmSendBackAll:"\u662F\u5426\u5C06\u5DF2\u6279\u6539\u4E4B\u4F5C\u4E1A\u56DE\u8986\u7ED9%1$d\uFF1F",confirmSingleFileDelete:"\u5220\u9664\u4E00\u4E2A\u6863\u6848\u3002\u662F\u5426\u6267\u884C?",confirmStartPresentation:"\u8BA9\u5B66\u751F\u5F00\u59CB\u53D1\u8868\u5417?",confirmStartScreenSharing:"\u662F\u5426\u53D1\u5E03\u753B\u9762?",copy:"\u590D\u5236",duplicate:"\u5EFA\u7ACB\u526F\u672C",duplicateAllConnectedCards:"\u5EFA\u7ACB\u6240\u6709\u4E32\u8054\u4E4B\u5361\u7247\u7684\u526F\u672C",couldntReuseCard:"\u518D\u6B21\u4F7F\u7528\u5361\u7247\u5931\u8D25",copyingDocument:"\u6B63\u5728\u590D\u5236\u6863\u6848...",copyingNote:"\u6B63\u5728\u590D\u5236\u7B14\u8BB0...",copyOf:"%1$s\u4E4B\u526F\u672C",duplicateThisCard:"\u5EFA\u7ACB\u8FD91\u5F20\u5361\u7247\u7684\u526F\u672C",copyToThisFolder:"\u590D\u5236\u5230\u6B64\u8D44\u6599\u5939",corruptFileErrorMsg:"\u6863\u6848\u65E0\u6CD5\u8F7D\u5165\u3002\u8BE5\u6863\u6848\u53EF\u80FD\u53D1\u751F\u6BC1\u635F\u3002",couldntDelete:"\u5220\u9664\u5931\u8D25",couldntRenameNote:"\u65E0\u6CD5\u53D8\u66F4\u7B14\u8BB0\u540D\u79F0",couldntChangeScreenLock:"\u65E0\u6CD5\u53D8\u66F4\u64CD\u4F5C\u9501\u5B9A",couldntChangeStudentSharingLock:"\u65E0\u6CD5\u53D8\u66F4\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A",couldntCopyDocument:"\u65E0\u6CD5\u590D\u5236\u6863\u6848",couldntCopyNote:"\u590D\u5236\u7B14\u8BB0\u5931\u8D25",couldntCreateFolder:"\u65E0\u6CD5\u5EFA\u7ACB\u6863\u6848\u5939",couldntCreateGroup:"\u65E0\u6CD5\u5EFA\u7ACB\u73ED\u7EA7",couldntCreateNote:"\u65E0\u6CD5\u5EFA\u7ACB\u7B14\u8BB0",couldntCreateSubject:"\u65E0\u6CD5\u5EFA\u7ACB\u8BFE\u7A0B",couldntCreateTask:"\u65E0\u6CD5\u5EFA\u7ACB\u7F34\u4EA4\u76D2",couldntDeleteArchivedGroup:"\u6B64\u73ED\u7EA7\u5DF2\u8F6C\u5165\u8FC7\u53BB\u7684\u8BFE\u7A0B\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsMaterialsExist:"\u6863\u6848\u5DF2\u50A8\u5B58\u4E8E\u6B64\u8BFE\u7A0B\u4E4B\u8D44\u6599\u76D2\u4E2D\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsNotesExist:"\u6B64\u8BFE\u7A0B\u542B\u6709\u5DF2\u50A8\u5B58\u4E4B\u7B14\u8BB0\uFF0C\u65E0\u6CD5\u5220\u9664",couldntDeleteAsSubjectsExist:"\u6B64\u73ED\u7EA7\u6709\u5DF2\u767B\u5F55\u4E4B\u8BFE\u7A0B\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteAsUsersExist:"\u6B64\u73ED\u7EA7\u6709\u5DF2\u767B\u5F55\u4E4B\u4F7F\u7528\u8005\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteClosedGroup:"\u6B64\u73ED\u7EA7\u5DF2\u5173\u95ED\uFF0C\u65E0\u6CD5\u5220\u9664\u3002",couldntDeleteCourse:"\u65E0\u6CD5\u5220\u9664\u8BFE\u7A0B",couldntDeleteDocument:"\u65E0\u6CD5\u5220\u9664\u6863\u6848",couldntDeleteGroup:"\u65E0\u6CD5\u5220\u9664\u73ED\u7EA7",couldntDeleteNote:"\u5220\u9664\u201C%1$s\u201D\u5931\u8D25",couldntDeleteTask:"\u65E0\u6CD5\u5220\u9664\u7F34\u4EA4\u76D2",describeTask:"\u8BF7\u8F93\u5165\u7F34\u4EA4\u5185\u5BB9",couldntDownloadFile:"\u65E0\u6CD5\u4E0B\u8F7D\u6863\u6848",couldntDownloadFileErrorMsg:"%1$d: \u65E0\u6CD5\u7531\u4F3A\u670D\u5668\u4E0B\u8F7D\u6863\u6848\u3002\u8BF7\u91CD\u8BD5\u3002",couldntGet_CheckInternetConnection:"\u65E0\u6CD5\u4F20\u9001\u8BF7\u6C42\u3002\u8BF7\u786E\u8BA4\u7F51\u8DEF\u72B6\u6001\u3002",checkInternetConnection:"\u8BF7\u786E\u8BA4\u7F51\u8DEF\u72B6\u6001\u3002",couldntGetCourses:"\u65E0\u6CD5\u53D6\u5F97\u8BFE\u7A0B",couldntGetNote:"\u65E0\u6CD5\u53D6\u5F97\u7B14\u8BB0",couldntGetOtherTeachersCourses:"\u65E0\u6CD5\u53D6\u5F97\u5176\u4ED6\u6559\u5E08\u4E4B\u8BFE\u7A0B",couldntGetPhotoData:"\u65E0\u6CD5\u53D6\u5F97\u7167\u7247\u6570\u636E\u8D44\u6599",couldntGetPreviousYearsCourses:"\u65E0\u6CD5\u53D6\u5F97\u5E74\u5EA6\u4E00\u89C8\u8868",couldntGetVideoData:"\u65E0\u6CD5\u53D6\u5F97\u5F71\u7247\u6570\u636E\u8D44\u6599",couldntInsertFile:"\u6863\u6848\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertItemTitle:"%1$s\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertPhoto:"\u7167\u7247\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntInsertVideo:"\u5F71\u7247\u65E0\u6CD5\u52A0\u5165\u7B14\u8BB0",couldntJoinGroup:"\u65E0\u6CD5\u53C2\u52A0\u6B64\u73ED\u7EA7",couldntJoinSubject:"\u65E0\u6CD5\u53C2\u52A0\u8BFE\u7A0B",couldntLoadFileTitle:"\u65E0\u6CD5\u8BFB\u53D6\u6863\u6848",couldntMoveDocument:"\u65E0\u6CD5\u79FB\u52A8\u6863\u6848",couldntOpenItem:"\u65E0\u6CD5\u6253\u5F00%1$s\u7B14\u8BB0\u8D44\u6599",couldntReceiveScreenShare:"\u65E0\u6CD5\u63A5\u6536\u53D1\u5E03\u4E4B\u753B\u9762",couldntRenameItem:"\u65E0\u6CD5\u53D8\u66F4%1$s\u4E4B\u540D\u79F0",couldntSaveNote:"\u65E0\u6CD5\u50A8\u5B58\u7B14\u8BB0",couldntSaveToMaterials:"\u65E0\u6CD5\u50A8\u5B58\u6863\u6848",couldntSendBackDocument:"\u65E0\u6CD5\u56DE\u8986",couldntSendCards:"\u65E0\u6CD5\u4F20\u9001\u8D44\u6599",couldntShareScreen:"\u65E0\u6CD5\u53D1\u5E03\u753B\u9762",couldntStartAudioRecording:"\u65E0\u6CD5\u5F00\u59CB\u5F55\u97F3",couldntFinishedAudioRecording:"\u65E0\u6CD5\u5B8C\u6210\u5F55\u97F3",couldntSubmitCards:"\u65E0\u6CD5\u7F34\u4EA4",couldntSubmitWhileSubmittingOthers:"\u6B63\u5728\u6536\u96C6\u5176\u4ED6\u7F34\u4EA4\u8D44\u6599\uFF0C\u76EE\u524D\u65E0\u6CD5\u7F34\u4EA4",couldntUpdateSubmission:"\u65E0\u6CD5\u66F4\u65B0\u7F34\u4EA4\u72B6\u6001",couldntUploadDocument:"\u6863\u6848\u65E0\u6CD5\u4E0A\u4F20",couldntUploadNotes:"\u7B14\u8BB0\u65E0\u6CD5\u4E0A\u4F20",courseAccessDenied:"\u5B58\u53D6\u6B64\u8BFE\u7A0B\u4E4B\u6743\u9650\u4E0D\u8DB3",courseDoesntExist:"\u8BE5\u8BFE\u7A0B\u4E0D\u5B58\u5728",courseFetchErrorOccurred:"\u53D6\u5F97\u8BFE\u7A0B\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",groupFetchErrorOccurred:"\u53D6\u5F97\u73ED\u7EA7\u5217\u8868\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",courseJoinedMark:"\u5DF2\u65B0\u589E",courseListTitle:"\u8BFE\u7A0B\u4E00\u89C8",create:"\u5EFA\u7ACB",createCard:"\u5236\u4F5C\u5361\u7247",createdSubjectsListTitle:"\u5DF2\u5EFA\u7ACB\u4E4B\u8BFE\u7A0B",createFolder:"\u5EFA\u7ACB\u8D44\u6599\u5939",createNewGroupBtnLabel:"\u5EFA\u7ACB\u65B0\u73ED\u7EA7",createNewNote:"\u5EFA\u7ACB\u65B0\u7B14\u8BB0",createNewSubjectBtnLabel:"\u5EFA\u7ACB\u65B0\u8BFE\u7A0B",createNewTask:"\u5EFA\u7ACB\u65B0\u7F34\u4EA4\u76D2",creatingFolder:"\u8D44\u6599\u5939\u5EFA\u7ACB\u4E2D...",creatingGroup:"\u73ED\u7EA7\u201C%1$s\u201D\u5EFA\u7ACB\u4E2D...",creatingNote:"\u201C%1$s\u201D\u5EFA\u7ACB\u4E2D...",creatingSubjectForGroup:"\u5C06\u8BFE\u7A0B\u201C%1$s\u201D\u5EFA\u7ACB\u5230\u73ED\u7EA7\u201C%2$s\u201D\uFF0C\u4F5C\u4E1A\u4E2D...",creatingTask:"\u7F34\u4EA4\u76D2\u5EFA\u7ACB\u4E2D...",webCard:"Web\u5361",creatingWebCard:"Web\u5361\u51C6\u5907\u4E2D...",cut:"\u526A\u4E0B",dateLabel:"\u65E5\u671F",daysRemaining:"\u5269\u4F59%d\u65E5",yearTimeUnit:"\u5E74",dayTimeUnit:"\u65E5",deferToOtherDeviceVersionDesc:"\u820D\u5F03\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\uFF0C\u7531\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4\u5185\u5BB9\u8986\u76D6\u8FC7\u6765",deferToOtherDeviceVersionTitle:"\u4F18\u5148\u5904\u7406\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4",delete:"\u5220\u9664",deletingDocument:"\u6B63\u5728\u5220\u9664\u6863\u6848...",deletingGroup:"\u6B63\u5728\u5220\u9664\u201C%1$s\u201D\u73ED\u7EA7...",deletingNote:"\u6B63\u5728\u5220\u9664\u201C%1$s\u201D...",deletingTask:"\u6B63\u5728\u5220\u9664\u201C%1$s\u201D\u7F34\u4EA4\u76D2...",deletingTimelineHistory:"\u6B63\u5728\u5220\u9664\u5C65\u5386...",didInsertFile:"\u5DF2\u5C06\u6863\u6848\u52A0\u5165\u7B14\u8BB0!",didInsertMaterials:"\u5DF2\u5C06\u8D44\u6599\u52A0\u5165\u7B14\u8BB0!",didInsertPhoto:"\u5DF2\u5C06\u7167\u7247\u52A0\u5165\u7B14\u8BB0!",didInsertVideo:"\u5DF2\u5C06\u5F71\u7247\u52A0\u5165\u7B14\u8BB0!",didJoinGroup:"\u5DF2\u53C2\u52A0%1$s\uFF01",didSaveToMaterialsStorage:"\u5DF2\u50A8\u5B58\u4E8E\u8D44\u6599\u76D2!",didSendBackDocument:"\u5DF2\u56DE\u8986!",didCompleteSendBack:"\u5DF2\u5B8C\u6210\u6240\u6709\u56DE\u8986!",didSendCards:"\u8D44\u6599\u5DF2\u4F20\u9001!",didSubmitCards:"\u5DF2\u8D44\u6599\u63D0\u51FA!",displayByStudent:"\u663E\u793A\u7ED9\u6BCF\u4E00\u4F4D\u5B66\u751F",documentCopyDenied:"\u6CA1\u6709\u590D\u5236\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",documentMoveDenied:"\u6CA1\u6709\u79FB\u52A8\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",downloadFile:"\u4E0B\u8F7D%1$s",downloadingFile:"\u6863\u6848\u4E0B\u8F7D\u4E2D...",duplicatedSubjectError:"\u8BE5\u8BFE\u7A0B\u540D\u79F0\u5DF2\u7ECF\u88AB\u767B\u8BB0\u4E8E\u73ED\u7EA7\u4E4B\u4E0B\uFF0C\u6545\u65E0\u6CD5\u5EFA\u7ACB",duplicatedUserGroup:"\u73ED\u7EA7\u540D\u79F0\u5DF2\u7ECF\u88AB\u4F7F\u7528",image:"\u56FE\u7247",itemNameInvalid:"%1$s\u4E4B\u540D\u79F0\u4E0D\u6B63\u786E",itemNotFound:"\u65E0\u6CD5\u627E\u5230%1$s",itemRenameDenied:"\u6CA1\u6709%1$s\u4E4B\u64CD\u4F5C\u6743\u9650",drawingDefaultFileName:"\u7ED8\u56FE",duplicateNoteNameSuffix:"\u526F\u672C",edit:"\u7F16\u8F91",end:"\u7ED3\u675F",endAnswerSharing:"\u5173\u95ED\u5206\u4EAB\u7B54\u6848",endPresentationLine1:"\u53D1\u8868",endPresentationLine2:"\u7ED3\u675F",endScreenShareReceiving:"\u505C\u6B62\u63A5\u6536\u53D1\u5E03\u753B\u9762",endSharingLine1:"\u53D1\u5E03\u753B\u9762",endSharingLine2:"\u505C\u6B62",enterDocumentName:"\u8BF7\u8F93\u5165\u6559\u6750\u540D\u79F0",enterFileName:"\u8F93\u5165\u6863\u6848\u540D\u79F0",enterFolderName:"\u8F93\u5165\u8D44\u6599\u5939\u540D\u79F0",enterGroupCode:"\u8BF7\u8F93\u5165\u53C2\u52A0\u4EE3\u7801",enterNewGroupName:"\u8BF7\u8F93\u5165\u65B0\u7684\u73ED\u7EA7\u540D\u79F0",enterTaskName:"\u8BF7\u8F93\u5165\u7F34\u4EA4\u5185\u5BB9",enumerationWithReadingPoint:"\u3001",userGroupNamePlaceholder:"(\u4F8B)1\u5E741\u73ED",errorOccurred:"\u53D1\u751F\u9519\u8BEF",expand:"\u653E\u5927",expiry:"\u622A\u6B62",expiryDialogTitle:"\u622A\u6B62\u65E5\u671F\u4E0E\u65F6\u95F4",exportCard:"\u8F6C\u51FA",pdfFile:"PDF\u6863\u6848",failedDownloadFile:"\u65E0\u6CD5\u4E0B\u8F7D%1$s\u7684\u6863\u6848",failedDownloadFiles:"\u65E0\u6CD5\u4E0B\u8F7D%1$s\u7684\u6863\u6848",failedDownloadFilesWithOthers:"\u65E0\u6CD5\u4E0B\u8F7D%1$s\u548C\u5176\u5B83%2$d\u4EBA\u7684\u6863\u6848",file:"\u6863\u6848",fileOrFolderDeletionDenied:"\u6CA1\u6709\u5220\u9664\u6863\u6848\u6216\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",fileOrFolderInvalid:"\u6863\u6848\u6216\u8D44\u6599\u5939\u6709\u95EE\u9898",fileUpdatedAtDateTimeFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",focusOnTheTeacher:"\u5148\u505C\u6B62\u624B\u8FB9\u5DE5\u4F5C\uFF0C\u62AC\u5934\u770B\u8001\u5E08",forgotPasswordLinkText:"\u4E0D\u77E5\u9053\u5BC6\u7801\u65F6",forgotPasswordPageUrl:"https://scrapbox.io/hkloilomanual/%E5%BF%98%E8%A8%98%E7%99%BB%E5%85%A5ID%E3%80%81%E5%AF%86%E7%A2%BC",folder:"\u8D44\u6599\u5939",folderCreationDenied:"\u65E0\u5EFA\u7ACB\u8D44\u6599\u5939\u4E4B\u64CD\u4F5C\u6743\u9650",folderLocationNotFound:"\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u8D44\u6599\u5939",folderNotFound:"\u65E0\u6CD5\u627E\u5230\u8D44\u6599\u5939",generalCameraPrepError:"\u7167\u76F8\u529F\u80FD\u5C1A\u672A\u5B8C\u5907",cameraMicPermissionDeniedErrorMsg:"\u5141\u8BB8\u4F7F\u7528\u7167\u76F8\u673A\u4EE5\u53CA\u9EA6\u514B\u98CE",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/hkloilomanual/%E5%85%81%E8%A8%B1Android%E7%B3%BB%E7%B5%B1%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%A9%9F%E4%BB%A5%E5%8F%8A%E9%BA%A5%E5%85%8B%E9%A2%A8%E7%9A%84%E6%96%B9%E6%B3%95",getHelp:"\u53C2\u9605\u8BF4\u660E",goBackToDesktop:"\u56DE\u5230\u7B14\u8BB0",goBackToNoteList:"\u56DE\u5230\u7B14\u8BB0\u4E00\u89C8\u8868",groupAlreadyDeleted:"\u6B64\u73ED\u7EA7\u5DF2\u7ECF\u88AB\u5220\u9664",groupCode:"\u53C2\u52A0\u4EE3\u7801",groupDeletionDenied:"\u65E0\u5220\u9664\u6B64\u73ED\u7EA7\u4E4B\u64CD\u4F5C\u6743\u9650",groupDoesntExist:"\u6B64\u73ED\u7EA7\u4E0D\u5B58\u5728",groupJoinInstructions:"\u5404\u4F4D\u540C\u5B66\uFF0C\u8BF7\u8F93\u5165\u6B64\u53C2\u52A0\u4EE3\u7801",groupJoinCodeDeactivated:"\u8FD9\u4E2A\u73ED\u7EA7\u7684\u53C2\u52A0\u4EE3\u7801\u5DF2\u88AB\u505C\u7528",groupName:"\u73ED\u7EA7\u540D\u79F0",groupNoLongerExists:"\u73ED\u7EA7\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u5220\u9664",groupUnavailable:"\u76EE\u524D\u65E0\u6CD5\u4F7F\u7528\u6B64\u73ED\u7EA7",hasExpired:"\u5DF2\u622A\u6B62",helpWebCardExtensionUrl:"https://scrapbox.io/hkloilomanual/Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",helpWebCardExtensionUrlForEdge:"https://scrapbox.io/hkloilomanual/Web%E5%8D%A1%E6%93%B4%E5%85%85%E5%8A%9F%E8%83%BD",hoursRemaining:"\u5269\u4F59%d\u65F6\u95F4",hourTimeUnit:"\u65F6\u95F4",inputCannotContainSpacesWarning:"\u6807\u9898\u4E0D\u5F97\u5305\u542B\u7A7A\u683C",inputTooLongWarning:"\u8F93\u5165\u5B57\u6570\u4E0D\u5F97\u8D85\u8FC7%1$d\u5B57",insertCardFromDocument:"\u5C06\u6B64\u8D44\u6599\u5361\u52A0\u5165\u7B14\u8BB0",insertingFile:"\u5C06\u6863\u6848\u52A0\u5165\u7B14\u8BB0...",insertingMaterials:"\u5C06\u8D44\u6599\u52A0\u5165\u7B14\u8BB0...",insertingPhoto:"\u5C06\u7167\u7247\u52A0\u5165\u7B14\u8BB0...",insertingVideo:"\u5C06\u5F71\u7247\u52A0\u5165\u7B14\u8BB0...",inThisCard:"\u5361\u7247\u5185",invalidDirectoryNameForBatchDownload:"\u6863\u6848\u540D\u79F0\u53EF\u80FD\u5305\u542B\u4E86\u65E0\u6CD5\u4F7F\u7528\u7684\u6587\u5B57",invalidDocumentCopyDetails:"\u6863\u6848\u3001\u8D44\u6599\u5939\u3001\u6216\u662F\u590D\u5236\u4F4D\u7F6E\u4E0D\u6B63\u786E",invalidDocumentMoveDetails:"\u6863\u6848\u3001\u8D44\u6599\u5939\u3001\u6216\u662F\u79FB\u52A8\u4F4D\u7F6E\u4E0D\u6B63\u786E",invalidDocumentName:"\u6863\u6848\u540D\u79F0\u4E0D\u6B63\u786E",invalidFileNameOrPath:"\u6709\u53EF\u80FD\u662F\u6863\u6848\u540D\u79F0\u6216\u662F\u6863\u6848\u8DEF\u5F84\u8FC7\u957F",invalidFolderName:"\u8D44\u6599\u5939\u540D\u79F0\u4E0D\u6B63\u786E",invalidGroupCode:"\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801\u6709\u8BEF",invalidOpenUrl:"URL\u542B\u6709\u65E0\u52B9\u4E4B\u6587\u5B57\uFF0C\u65E0\u6CD5\u5F00\u542F\u6B64Web\u5361\u3002",invalidRequest:"\u9519\u8BEF\u4E4B\u8BF7\u6C42",invalidUrlHelp:"\u8BF7\u8F93\u5165\u4EE5https://\u6216\u662Fhttp://\u4E3A\u5F00\u5934\u4E4B\u6B63\u786EURL",invertMouseWheel:"\u53CD\u8F6C\u6ED1\u9F20\u6EDA\u8F6E\u65B9\u5411",joinCourseBtnLabel:"\u8F93\u5165\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801",joiningGroup:"\u52A0\u5165\u73ED\u7EA7\u4E2D...",joiningSubject:"\u5DF2\u52A0\u5165%1$s...",learnAboutThinkingTools:"\u8BA4\u8BC6\u601D\u7EF4\u5DE5\u5177",learnMore:"\u8BE6\u8BF7\u8BF7\u53C2\u9605\u6B64\u5904",loadingFile:"\u6863\u6848\u8BFB\u53D6\u4E2D...",lockingScreens:"\u64CD\u4F5C\u9501\u5B9A\u4E2D...",lockingStudentSharing:"\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A\u4E2D...",logout:"\u767B\u51FA",logoutOption:"\u767B\u51FA",mapDefaultFileName:"\u5730\u56FE",material:"\u8D44\u6599",materialsStorage:"\u8D44\u6599\u76D2",membersJoinedCount:"\u53C2\u52A0\u4EBA\u6570",micPermissionDeniedErrorMsg:"\u5141\u8BB8\u4F7F\u7528\u9EA6\u514B\u98CE",minRemaining:"\u5269\u4F59%1$s\u5206",minuteTimeUnit:"\u5206",mouseWheelSensitivity:"\u6ED1\u9F20\u654F\u611F\u5EA6",move:"\u79FB\u52A8",moveToThisFolder:"\u79FB\u81F3\u8FD9\u4E2A\u8D44\u6599\u5939",movingDocument:"\u6863\u6848\u79FB\u52A8\u4E2D...",nameOrder:"\u540D\u79F0\u6392\u5E8F",newNoteDefaultNameFmt:"%1$d\u5E74%2$d\u6708%3$d\u4E4B\u7B14\u8BB0",noExpiry:"\u65E0\u6307\u5B9A",noJoinedCourseTitle2:"\u65E0\u8BFE\u7A0B",noMicFoundErrorMsg:"\u65E0\u6CD5\u627E\u5230\u53EF\u4EE5\u4F7F\u7528\u4E4B\u9EA6\u514B\u98CE",noNotesFound:"\u5148\u5EFA\u7ACB\u65B0\u7B14\u8BB0\u5427!",noOpenTasks:"\u6CA1\u6709\u6B63\u5728\u6536\u96C6\u7684\u7F34\u4EA4\u76D2",fileDestinationNotExist:"\u5199\u5165\u76EE\u7684\u5730\u4E0D\u5B58\u5728\u6216\u662F\u5DF2\u7ECF\u88AB\u5220\u9664",inPreparation:"\u51C6\u5907\u4E2D",title:"\u7F34\u4EA4\u76D2\u540D\u79F0",titleRedirect:"\u91CD\u65B0\u5B9A\u5411 | LoiLoNote School",createInPreparation:"\u5C1A\u672A\u5F00\u653E\u7F34\u4EA4",callForAnswersNow:"\u5F00\u59CB\u7F34\u4EA4",pleaseChooseTask:"\u8BF7\u9009\u62E9\u8981\u63D0\u4EA4\u5230\u4F55\u5904",expiredTasks:"\u63D0\u4EA4\u65F6\u95F4\u622A\u6B62",allExpiredTasks:"\u63D0\u4EA4\u5E93\u5217\u8868",noTasksExpired:"\u6CA1\u6709\u5DF2\u622A\u6B62\u65F6\u95F4\u7684\u63D0\u4EA4\u5E93",setTimeAndDateForDeadline:"\u8BF7\u8BBE\u5B9A\u622A\u6B62\u65E5\u4E0E\u65F6\u95F4",callForAnswers:"\u5F00\u59CB\u7F34\u4EA4",notAttending:"\u6CA1\u6709\u52A0\u5165\u8BFE\u5802",note:"\u7B14\u8BB0",noteChangedFromOtherDevice:"\u5176\u4ED6\u8F7D\u5177\u4E0A\u4E4B\u7B14\u8BB0\u5DF2\u7ECF\u53D8\u66F4\uFF0C\u5C06\u518D\u6B21\u8BFB\u53D6",noteConflictDialogTitle:"\u7B14\u8BB0\u53D1\u751F\u51B2\u7A81\u72B6\u51B5",noteFetchErrorOccurred:"\u53D6\u5F97\u7B14\u8BB0\u65F6\u53D1\u751F\u9519\u8BEF",noteListTitle:"\u7B14\u8BB0\u4E00\u89C8\u8868",nowSharingIndicator:"\u6B63\u5728\u4F20\u9001\u7ED9%1$s %2$s",okay:"OK",deadlineDate:"\u622A\u6B62\u65F6\u95F4",openForSubmissions:"\u6536\u96C6\u4E2D",openingNote:"\u5F00\u542F\u7B14\u8BB0",openTask:"\u6709\u63D0\u4EA4\u8D44\u6599",statusSubmitted:"\u5DF2\u63D0\u4EA4",openTaskCount:"\u3001\u5176\u4ED6%1$d\u4E2A",openWebPage:"\u5F00\u542F\u7F51\u9875",others:"\u3001\u5176\u4ED6%1$d",otherTeachersCourseNotFound:"\u627E\u4E0D\u5230\u5176\u4ED6\u8001\u5E08\u4E4B\u8BFE\u7A0B",otherTeachersCoursesTitle:"\u5176\u4ED6\u8001\u5E08\u4E4B\u8BFE\u7A0B",overwritingNote:"\u7B14\u8BB0\u8986\u76D6\u540E\u50A8\u5B58...",paste:"\u8D34\u4E0A",pasteImage:"\u8D34\u4E0A\u56FE\u7247",pasteText:"\u8D34\u4E0A\u6587\u672C",pasteCards:"\u8D34\u4E0A\u5361\u7247",nothingToPaste:"\u6CA1\u6709\u4EC0\u4E48\u53EF\u7C98\u8D34\u7684",pasteCopiedUrl:"\u8D34\u4E0A\u5DF2\u590D\u5236\u4E4BURL",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"%1$d\u4E4B\u6863\u6848\u4E0E%2$d\u4E4B\u7F29\u56FE\u6B63\u5728\u4E0A\u4F20...",pendingFileUploadCount:"%1$d\u4E4B\u6863\u6848\u6B63\u5728\u4E0A\u4F20...",pendingThumbUploadCount:"%1$d\u4E4B\u7F29\u56FE\u6B63\u5728\u4E0A\u4F20...",photo:"\u7167\u7247",photoDefaultFileName:"\u7167\u7247",pleaseEnterFolderName:"\u8BF7\u8F93\u5165\u8D44\u6599\u5939\u540D\u79F0",preferences:"\u73AF\u5883\u8BBE\u5B9A",preparingScreenSharing:"\u6B63\u5728\u51C6\u5907\u53D1\u5E03\u753B\u9762...",preparingStudentPresentation:"\u6B63\u5728\u51C6\u5907\u5B66\u751F\u53D1\u8868...",endedCoursesTitle:"\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B",endedCoursesDesc:"\u203B\u53BB\u5E74\u4E4B\u8BFE\u7A0B\u5DF2\u5217\u5165\u201C\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B\u201D",print:"\u5217\u5370",prioritizeThisVersionDesc:"\u820D\u5F03\u5176\u4ED6\u8F7D\u5177\u4E0A\u4E4B\u53D8\u66F4\uFF0C\u5C06\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u5185\u5BB9\u8986\u76D6\u8FC7\u53BB",prioritizeThisVersionTitle:"\u4EE5\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u4E3A\u4F18\u5148",audio:"\u97F3\u9891",audioRecording:"\u5F55\u97F3",redirectSubmissionMessage:"\u91CD\u65B0\u5B9A\u5411\u81F3\u7F34\u4EA4\u8D44\u6599\u3002\u4E0D\u91CD\u65B0\u5B9A\u5411\u8BF7\u70B9\u51FB\u4EE5\u4E0B\u8FDE\u7ED3\u3002",release:"\u89E3\u9664",releaseAll:"\u5168\u90E8\u89E3\u9664",reload:"\u518D\u6B21\u8BFB\u53D6",rename:"\u53D8\u66F4\u540D\u79F0",renamingItem:"%1$s\u4E4B\u540D\u79F0\u53D8\u66F4\u4E2D...",renameNoteDialogMsg:"\u53D8\u66F4\u7B14\u8BB0\u540D\u79F0",requestPresentationLine1:"\u5B66\u751F",requestPresentationLine2:"\u53D1\u8868",resetCamera:"\u91CD\u7F6E\u7167\u76F8\u673A",resetLayout:"\u56DE\u590D\u521D\u671F\u8BBE\u5B9A",resolve:"\u89E3\u51B3",retake:"\u91CD\u65B0\u62CD\u6444",rotate:"\u56DE\u8F6C",failedToRotate:"\u65E0\u6CD5\u65CB\u8F6C\u5361\u7247",saveNoteUnderOtherNameDesc:"\u76EE\u524D\u4E4B\u7B14\u8BB0\u5DF2\u88AB\u5176\u4ED6\u8F7D\u5177\u4E4B\u53D8\u66F4\u8986\u76D6\uFF0C\u5728\u6B64\u8F7D\u5177\u4E0A\u4E4B\u53D8\u66F4\u5185\u5BB9\u5C06\u4EE5\u65B0\u7B14\u8BB0\u5F62\u5F0F\u50A8\u5B58",saveNoteUnderOtherNameTitle:"\u6B64\u8F7D\u5177\u4E4B\u53D8\u66F4\u5C06\u4EE5\u5176\u4ED6\u540D\u79F0\u50A8\u5B58",saveToThisFolder:"\u50A8\u5B58\u4E8E\u6B64\u8D44\u6599\u5939",saving:"\u6B63\u5728\u50A8\u5B58...",savingNoteWithOtherName:"\u7B14\u8BB0\u5C06\u4EE5\u5176\u4ED6\u540D\u79F0\u50A8\u5B58...",schoolLoiloTVUrl:"https://school.loilo.tv/cn/web.html",schoolLoiloTVUrlWithExtension:"https://school.loilo.tv/cn/web-ext.html",screenLock:"\u753B\u9762\u9501\u5B9A",screensAreLocked:"\u64CD\u4F5C\u9501\u5B9A\u4E2D",screenSharingErrorOccurred:"\u53D1\u5E03\u753B\u9762\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",screenSharingTimedOutErrorMsg:"%1$d: \u53D1\u5E03\u6570\u636E\u4E4B\u53D6\u5F97\u903E\u65F6\u65E0\u6CD5\u6267\u884C",search:"\u68C0\u7D22",secondTimeUnit:"\u79D2",secRemaining:"\u5269\u4F59%1$s\u79D2",seeNextError:"\u67E5\u770B\u4E0B\u4E2A\u9519\u8BEF",selection:"\u9009\u62E9",selectAll:"\u9009\u62E9\u5168\u90E8",selfStudy:"\u81EA\u4E3B\u5B66\u4E60",loiLoNews:"\u6765\u81EALoiLo\u7684\u901A\u77E5",lessonPlans:"\u6559\u6848",send:"\u4F20\u9001",sendBack:"\u56DE\u8986",sendBackAll:"\u4E00\u6B21\u56DE\u8986",sendBackErrorOccurred:"\u56DE\u8986\u8FC7\u7A0B\u4E2D\u53D1\u751F\u9519\u8BEF",sendBackIncomplete:"%1$d\u4E2D%2$d\u4E2A\u56DE\u8986\u5C1A\u672A\u5904\u7406\u5B8C\u6BD5",sendingBackDocument:"\u56DE\u8986\u4E2D...",sendingThumbnails:"\u4EE5\u7F29\u56FE\u65B9\u5F0F\u4F20\u9001",sendToDialogTitle:"\u9009\u62E9\u5361\u7247\u4F20\u9001\u4E4B\u5BF9\u8C61",sendToIndividuals:"\u4E2A\u4EBA",sendToMultiple:"\u9001\u51FA\uFF08%1$d\u4EBA\uFF09",sentBackBy:"\u7531%1$s\u4E4B\u56DE\u8986",serviceStatus:"\u670D\u52A1\u72B6\u51B5",sessionExpiredMsg:"\u5DF2\u8D85\u8FC7\u6709\u6548\u671F\u9650\u3002\u8981\u7EE7\u7EED\u4F7F\u7528\u8BF7\u518D\u6B21\u8BFB\u53D6",sessionExpiredTitle:"\u8BF7\u518D\u6B21\u8BFB\u53D6",badCsrfTokenTitle:"CSRF\u8BA4\u8BC1\u6709\u95EE\u9898",badCsrfTokenMsg:"\u8DE8\u7F51\u7AD9\u4F2A\u9020\u8981\u6C42(CSRF)\u4E4B\u8BA4\u8BC1\u6709\u95EE\u9898\uFF0C\u8BF7\u91CD\u65B0\u767B\u5165",sharedBy:"%1$s\u91CA\u51FA\u5171\u4EAB",shareScreen:"\u53D1\u5E03\u753B\u9762",sharing:"\u53D1\u5E03\u4E2D",sharingAnswers:"\u5206\u4EAB\u7B54\u6848\u4E2D",shrink:"\u7F29\u5C0F",startAnswerSharing:"\u5206\u4EAB\u7B54\u6848",startComparing:"\u5F00\u59CB\u6BD4\u8F83",startSharingLine1:"\u753B\u9762",startSharingLine2:"\u53D1\u5E03",status403AccessDenied:"\u65E0\u5B58\u53D6\u6743\u9650",statusFetchErrorOccurred:"\u8D44\u6599\u53D6\u5F97\u4E2D\u9014\u53D1\u751F\u9519\u8BEF",stoppingScreenSharing:"\u505C\u6B62\u53D1\u5E03\u753B\u9762...",stoppingStudentPresentation:"\u7ED3\u675F\u5B66\u751F\u53D1\u8868...",stopScreenSharing:"\u505C\u6B62\u53D1\u5E03",student:"\u5B66\u751F",enterClassCodeToJoinClass:"\u2193 \u8BF7\u8F93\u5165\u6559\u5E08\u6240\u63D0\u793A\u4E4B\u73ED\u7EA7\u53C2\u52A0\u4EE3\u7801",studentSharing:"\u5B66\u751F\u95F4\u901A\u8BAF",subjectNameInputPlaceholder:"\u8BF7\u8F93\u5165\u8BFE\u7A0B\u540D\u79F0...",subjectOrTaskDoesntExist:"\u8BFE\u7A0B\u6216\u7F34\u4EA4\u76D2\u4E0D\u5B58\u5728",subjectTitle:"\u8BFE\u7A0B",requestContainsInvalidID:"\u8BFE\u7A0BID\u6216\u7F34\u4EA4\u76D2\u4E4BID\u4E0D\u6B63\u786E",submissionName:"%1$s\u4E4B\u56DE\u7B54",submissions:"\u7F34\u4EA4\u8D44\u6599",submit:"\u7F34\u4EA4",submitOrder:"\u7F34\u4EA4\u987A\u5E8F",submitted:"\u5DF2\u63D0\u51FA",submittedBy:"%1$s\u4E4B\u7F34\u4EA4",submittingDocument:"\u7F34\u4EA4\u4E2D",support:"\u652F\u63F4",taskExpiryFmt:"yyyy\u5E74m\u6708d\u65E5",taskListTitle:"\u7F34\u4EA4\u76D2",taskNameDefaultPrefix:"\u7F34\u4EA4\u8D44\u6599",teacher:"\u8001\u5E08",teacherLockedScreens:"\u64CD\u4F5C\u9501\u5B9A",teacherNoJoinedCourseTitle1:"\u8FD8\u6CA1\u6709\u4F60\u8D1F\u8D23\u7684\u8BFE\u7A0B",text:"\u6587\u5B57",textButtonIconClass:"textButtonIconZhHans",textCardMenuBtnImgPath:"/svg/text_zh_60x60_margin_less.svg",textDefaultFileName:"\u6559\u6750",thinkingTool:"\u601D\u7EF4\u5DE5\u5177",thisGroupHasNoSubjects:"\u6B64\u73ED\u7EA7\u65E0\u4EFB\u4F55\u8BFE\u7A0B",thisIsAnEmptyFolder:"\u7A7A\u8D44\u6599\u5939",trackpadPinchZoomSensitivity:"\u89E6\u63A7\u753B\u9762\u7F29\u653E\u8C03\u8282\u7075\u654F\u5EA6",timelineDateFmtPrevYear:"%d\u5E74%d\u6708%d\u65E5",timelineDateFmtThisYear:"%d\u6708%d\u65E5 %02d:%02d",timelineDateFmtToday:"%02d:%02d",timeLabel:"\u65F6\u95F4",timelineTitle:"\u65F6\u95F4\u8F74",toWhichSubjectDoYouWantToCopy:"\u4F60\u60F3\u590D\u5236\u54EA\u4E9B\u8BFE\u7A0B\uFF1F",toWhichSubjectNotesDoYouWantToSend:"\u4F60\u60F3\u4F20\u9001\u54EA\u4E2A\u8BFE\u7A0B\u7684\u7B14\u8BB0\uFF1F",ttAnalysis:"\u6D41\u7A0B\u5206\u6790\u56FE",ttButterfly:"\u8774\u8776\u56FE",ttCandy:"\u7CD6\u679C\u56FE",ttCircles:"\u540C\u5FC3\u5706\u56FE",ttDataChart3:"\u6570\u636E\u56FE(3)",ttDataChart6:"\u6570\u636E\u56FE(6)",ttDiamond:"\u94BB\u77F3\u56FE",ttFishbone:"\u9C7C\u9AA8\u56FE",ttJellyfish:"\u6C34\u6BCD\u56FE",ttOneAxis:"\u5EA7\u6807\u6A2A\u8F74\u56FE",ttPlotLeft:"\u60C5\u8282\u6784\u6210\u56FE(\u5DE6)",ttPlotRight:"\u60C5\u8282\u6784\u6210\u56FE(\u53F3)",ttPMI:"PMI/KWL\u56FE",ttPyramid:"\u91D1\u5B57\u5854\u56FE",ttRake:"\u9489\u8019\u56FE",ttSheet:"\u7A7A\u767D\u5E95\u56FE",ttTwoAxes:"\u5EA7\u6807\u8F74\u56FE",ttVenn2:"\u97E6\u6069\u56FE",ttVenn3:"\u97E6\u6069\u4E09\u5706\u56FE",ttWChart:"W\u56FE",ttWebbing:"\u4E2D\u5FC3\u5706\u56FE",ttXChart:"X\u56FE",ttYChart:"Y\u56FE",uncaughtErrorOccurred:"\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF\uFF0CApp\u5DF2\u505C\u6B62\u52A8\u4F5C\u3002\u8BF7\u5C06\u8BE6\u7EC6\u4E4B\u9519\u8BEF\u5185\u5BB9\u56DE\u62A5\u7ED9\u5BA2\u670D\u4EBA\u5458\uFF0C\u6216\u662F\u91CD\u65B0\u542F\u52A8\u5E94\u7528\u7A0B\u5F0F\u3002",viewErrorDetail:"\u8BE6\u7EC6\u5185\u5BB9",unexpectedErrorOccurred:"\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF",unknownApiErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u4F3A\u670D\u5668\u53D1\u751F\u65E0\u9884\u671F\u4E4B\u9519\u8BEF",unknownError:"\u4E0D\u660E\u539F\u56E0\u9519\u8BEF",unknownUser:"\u672A\u77E5\u4E4B\u4F7F\u7528\u8005",unlockingScreens:"\u89E3\u9664\u64CD\u4F5C\u9501\u5B9A...",unlockingStudentSharing:"\u89E3\u9664\u5B66\u751F\u95F4\u901A\u8BAF\u9501\u5B9A...",unnamedNote:"\u672A\u547D\u540D\u4E4B\u7B14\u8BB0",unsaved:"\u672A\u50A8\u5B58",unsupportedContentType:"\u6B64\u7C7B\u6863\u6848\u65E0\u6CD5\u65B0\u589E\u7B14\u8BB0",unsupportedFileErrorMsg:"\u4E0D\u5BF9\u5E94\u6B64\u6863\u6848\u3002\u6863\u6848\u683C\u5F0F: \u201C%1$s\u201D\u3001\u526F\u6863\u540D: \u201C%2$s\u201D",unsupportedFileErrorWithoutOptMsg:"\u4E0D\u5BF9\u5E94\u6B64\u6863\u6848",unsupportedNoteFeatErrorMsg:"%1$s\u5305\u542B\u65B0\u529F\u80FD\u3002\u6B64\u7B14\u8BB0\u53EF\u80FD\u4EE5\u5F00\u53D1\u4E2D\u4E4BApp\u6240\u5236\u4F5C\u3002\uFF08\u7248\u672C: %2$s, \u529F\u80FD\u4EE3\u7801: %3$s\uFF09",unsupportedNoteVerErrorMsg:"\u4E0D\u652F\u63F4%1$s\u4E4B\u683C\u5F0F\u3002\u6B64%1$s\u53EF\u80FD\u4EE5\u65B0\u7248\u672CApp\u6765\u5236\u4F5C\u6545\u65E0\u6CD5\u5F00\u542F\u3002\uFF08\u7248\u672C: %2$s\uFF09",update:"\u66F4\u65B0",updateCard:"\u66F4\u65B0\u5361\u7247",updateOrder:"\u66F4\u65B0\u987A\u5E8F",updatingSubmission:"\u6B63\u5728\u66F4\u65B0\u7F34\u4EA4\u8D44\u6599",uploadingAsset:"\u6B63\u5728\u4E0A\u4F20\u8D44\u6599...",uploadingDocument:"\u6B63\u5728\u4E0A\u4F20\u6587\u4EF6...",use:"\u4F7F\u7528",useAll:"\u4F7F\u7528\u5168\u90E8",useFormally:"\u4F7F\u7528",version:"\u7248\u672C",verticalWritingBtnLabel:"\u76F4",video:"\u5F71\u7247",videoDefaultFileName:"\u5F71\u7247",volume:"\u97F3\u91CF",web:"\u7F51\u9875",webCardExtensionLeadingText:`\u4F7F\u7528\u6D4F\u89C8\u5668\u6269\u5145\u529F\u80FD
\u53EF\u4EE5\u8F7B\u677E\u5730\u5236\u4F5C Web\u5361`,webPageSharedText:"\u5DF2\u5206\u4EAB\u7F51\u9875",webPageSharedTextBy:"%1$s \u5DF2\u5C06\u7F51\u9875\u5206\u4EAB",quiz:"\u95EE\u7B54",quizPresetTest:"\u6D4B\u9A8C",quizPresetSurvey:"\u95EE\u5377",author:"\u51FA\u9898\u8005",questionCount:"\u95EE\u9898\u6570 %1$d",result:"\u7ED3\u679C",answerTest:"\u56DE\u7B54",answerQuestionnaire:"\u56DE\u7B54",viewTestAnswers:"\u786E\u8BA4\u56DE\u7B54",viewQuestionnaireAnswers:"\u786E\u8BA4\u56DE\u7B54",answerTestTogether:"\u5168\u4F53\u56DE\u7B54",answerQuestionnaireTogether:"\u5168\u4F53\u56DE\u7B54",creatingTestCard:"\u6B63\u5728\u5236\u4F5C\u6D4B\u9A8C\u5361",createdTestCard:"\u6D4B\u9A8C\u5361\u5236\u4F5C\u5B8C\u6210",failedCreateTestCard:"\u65E0\u6CD5\u5236\u4F5C\u6D4B\u9A8C\u5361",reloadForTestCard:"\u9700\u8981\u66F4\u65B0\u6D4B\u9A8C\u5361\u7684\u8BA4\u8BC1\u8BAF\u606F\u3002\u8BF7\u4E8E\u9875\u9762\u5237\u65B0\u540E\uFF0C\u518D\u6B21\u5C1D\u8BD5\u3002",failedGoogleLoginHelpText:"failedGoogleLoginHelpText",failedGoogleLoginHelpLink:"failedGoogleLoginHelpLink",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"\u6B63\u5728\u51C6\u5907\u6D4B\u9A8C\u95EE\u9898",preparingQuestionnaire:"\u6B63\u5728\u51C6\u5907\u95EE\u5377\u5185\u5BB9",webDefaultFileName:"\u7F51\u9875\u641C\u5BFB",didBackupUnsavedChanges:"\u5DF2\u50A8\u5B58\u5148\u524D\u53D8\u66F4\u5907\u4EFD\u3002\u76EE\u524D\u5DF2\u5907\u4EFD\u4E4B\u7B14\u8BB0\u6709%1$d\u4E2A\u3002",willDeleteGroupFromSubject:"\u7531%1$s\u5220\u9664%2$s...",year:"%1$d\u5E74",yourTurnToPresent:"\u8F6E\u5230\u4F60\u53D1\u8868!",zoomTitle:"\u653E\u5927\u30FB\u7F29\u5C0F",languageSettingTitle:"\u8A00\u8BED\u8BBE\u5B9A",english:"\u82F1\u8BED",japanese:"\u65E5\u6587",japaneseHira:"\u65E5\u6587\uFF08Hiragana\uFF09",traditionalChinese:"\u7E41\u4F53\u4E2D\u6587",simplifiedChinese:"\u7B80\u4F53\u4E2D\u6587",drawn:"\u7ED8\u56FE",annotation:"\u6279\u6539",couldntSave:"\u65E0\u6CD5\u4FDD\u5B58%1$s",annotationThumbnail:"\u5DF2\u6279\u6539\u8D44\u6599\u4E4B\u7F29\u56FE",documentThumbnail:"\u6587\u6863\u7F29\u56FE",couldntGetCoursesAttributes:"\u65E0\u6CD5\u53D6\u5F97\u8BFE\u7A0B\u8D44\u8BAF",inButtonIconClass:"inButtonIconZhHans",outButtonIconClass:"outButtonIconZhHans",thinkingToolHelpPageUrl:"https://n.loilo.tv/cn/thinkingtool",couldntGetSubmissions:"\u65E0\u6CD5\u53D6\u5F97\u7F34\u4EA4\u8D44\u6599",tasksFeatureIsUnavailable:"%1$d\u4EBA\u4EE5\u4E0A\u4E4B\u8BFE\u7A0B\u65E0\u6CD5\u4F7F\u7528\u7F34\u4EA4\u76D2",regularWtFontName:"loilo-NotoSansCJKsc-Regular",boldWtFontName:"loilo-NotoSansCJKsc-Black",uiFontName:"Noto Sans SC",couldntGetSubmissionMessage:"\u65E0\u6CD5\u53D6\u5F97\u7F34\u4EA4\u8D44\u6599\u4E4B\u7F34\u4EA4\u72B6\u51B5",couldntGetSubmissionHistory:"\u65E0\u6CD5\u53D6\u5F97\u7F34\u4EA4\u5C65\u5386",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"\u5171\u4EAB\u7B14\u8BB0",submissionBox:"\u7F34\u4EA4\u76D2",error:"\u9519\u8BEF",timeline:"\u65F6\u95F4\u8F74",status400Msg:"\u8981\u6C42\u683C\u5F0F\u9519\u8BEF\u3002\u4E00\u822C\u4E0D\u4F1A\u53D1\u751F\u6B64\u9519\u8BEF\uFF0C\u53EF\u80FD\u7531\u4E8E\u53D1\u751F\u6545\u969C\u6240\u9020\u6210\u3002",status403Msg:"\u6CA1\u6709\u8BF7\u6C42\u8D44\u6E90\u4E4B\u6743\u9650",status404Msg:"\u627E\u4E0D\u5230\u6240\u8981\u6C42\u4E4B\u8D44\u6E90",status500Msg:"\u4F3A\u670D\u5668\u53D1\u751F\u9519\u8BEF\u3002\u7CFB\u7EDF\u53EF\u80FD\u4F1A\u53D1\u751F\u5168\u9762\u6027\u4E4B\u969C\u788D",defaultErrorMsg:"\u975E\u5E38\u62B1\u6B49\uFF0C\u53D1\u751F\u9884\u671F\u5916\u4E4B\u9519\u8BEF",goToTopPage:"\u8FD4\u56DE\u9996\u9875",viewStatusPage:"\u786E\u8BA4\u4F3A\u670D\u5668\u670D\u52A1\u72B6\u51B5",login:"\u767B\u5165",masterUserLoginUnsupported:"\u6B64\u5E10\u53F7\u65E0\u6CD5\u4F7F\u7528\u4E8E\u7B80\u6613\u767B\u5165",invalidCredentials:"\u5B66\u6821ID\u3001\u4F7F\u7528\u8005ID\u3001\u5BC6\u7801\u4E4B\u7EC4\u5408\u4E0D\u6B63\u786E",invalidIPAddress:"\u5B58\u53D6\u70B9\u4E4BIP\u4F4D\u7F6E\u53D7\u5230\u9650\u5236\u3002\u8BF7\u5411\u5B66\u6821\u7BA1\u7406\u8005\u786E\u8BA4\u3002",accountLocked:"\u5E10\u53F7\u5DF2\u88AB\u9501\u5B9A\u3002\u8BF7\u6D3D\u5B66\u6821\u7BA1\u7406\u4EBA\u5458\u3002",forbiddenIsAdmin:"\u7BA1\u7406\u8005\u5E10\u53F7\u65E0\u6CD5\u4F7F\u7528\u4E8E\u8F6F\u4F53\u767B\u5165\u3002",forbiddenIsSSOUser:"\u4E0EGoogle\u5E10\u6237\u8FDE\u52A8\u4E4B\u7528\u6237\u65E0\u6CD5\u767B\u5165\u3002",couldntLogIn:"\u65E0\u6CD5\u767B\u5165",endpoint:"\u5B58\u53D6\u70B9",schoolIDLabel:"\u5B66\u6821",schoolIDPlaceholder:"\u5B66\u6821\u5E10\u53F7",schoolIDTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u3001- (\u8FDE\u5B57\u53F7)\u3001_ (\u5E95\u7EBF)",userIDLabel:"\u4F7F\u7528\u8005",userIDPlaceholder:"\u4F7F\u7528\u8005\u5E10\u53F7",userIDTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u6216\u7B26\u53F7",passwordPlaceholder:"\u5BC6\u7801",passwordTitle:"\u8BF7\u8F93\u5165\u534A\u5F62\u4E4B\u82F1\u6587\u6570\u5B57\u6216\u7B26\u53F7",adminSignInLinkText:"\u7BA1\u7406\u8005\u767B\u5165",recommendUpdateTitle:"\u5EFA\u8BAE\u66F4\u65B0\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",recommendUpdateMsg:"\u6B64App\u4E4B\u67D0\u4E9B\u529F\u80FD\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u8FD0\u4F5C",loginContinueBtnText:"\u7EE7\u7EED\u4F7F\u7528",recommendNativeAppTitle:"\u5EFA\u8BAE\u4F7F\u7528iOS App",recommendNativeAppMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u6D4F\u89C8\u5668\u9650\u5236\u4E86\u8FD9\u4E2AApp\u6240\u63D0\u4F9B\u7684\u4E00\u4E9B\u529F\u80FD\u3002\u4E3A\u4E86\u5F97\u5230\u6700\u4F73\u4F7F\u7528\u6548\u679C\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u6211\u4EEC\u5728iOS\u5546\u5E97\u4E2D\u63D0\u4F9B\u4E4BApp\u3002",unsupportedBrowserTitle:"\u4E0D\u652F\u63F4\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",unsupportedBrowserMsg:"\u8BF7\u4F7F\u7528\u6700\u65B0\u7248\u4E4BChrome\u6D4F\u89C8\u5668",unknownBrowser:"\u672A\u77E5\u4E4B\u6D4F\u89C8\u5668",yourBrowser:"\u6240\u4F7F\u7528\u4E4B\u6D4F\u89C8\u5668",supportedVersionsLabel:"\u652F\u63F4\u4E4B\u6D4F\u89C8\u5668\u7248\u672C",otherIOSBrowsers:"\u5176\u4ED6iOS\u6D4F\u89C8\u5668\uFF1AiOS 13\u4EE5\u4E0A",signUpPageUrl:`${Zc}/users/sign_up?lang=en`,iosAppStorePageUrl:"https://apps.apple.com/cn/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/zh-CN/chrome/",needBrowserUpdateMsg:"\u8BF7\u5C06\u60A8\u7684\u6D4F\u89C8\u5668\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C",installBrowser:"\u4E0B\u8F7D\u6D4F\u89C8\u5668\u6700\u65B0\u7248\u672C",getApp:"\u7531\u5546\u5E97\u53D6\u5F97App",appStatusPageUrl:"https://status.loilonote.app/zh-Hans",couldntEncodeDrawnData:"\u65E0\u6CD5\u5B8C\u6210\u624B\u5199\u6570\u636E\u7F16\u7801",accessNotPermitted:"\u6CA1\u6709\u5B58\u53D6\u6743\u9650",giveClipboardAccess:"\u5982\u6B32\u4F7F\u7528\u526A\u8D34\u529F\u80FD\uFF0C\u5FC5\u987B\u5F00\u542F\u526A\u8D34\u7C3F\u5B58\u53D6\u6743\u9650\u3002",couldntLoadFontFileMsg:"\u65E0\u6CD5\u8BFB\u53D6\u6240\u9700\u4E4B\u5B57\u578B",noMemoryErrorTitle:"\u8BB0\u5FC6\u4F53\u4E0D\u8DB3",noMemoryErrorMsg:"\u7531\u4E8E\u8BB0\u5FC6\u4F53\u4E0D\u8DB3\u65E0\u6CD5\u5B8C\u6210\u5904\u7406\u3002\u8BF7\u91CD\u65B0\u5F00\u542F\u5E94\u7528\u7A0B\u5F0F\u3002",couldntChangeTool:"\u65E0\u6CD5\u5207\u6362\u601D\u7EF4\u5DE5\u5177\u56FE",couldntFetchData:"\u65E0\u6CD5\u53D6\u5F97\u6570\u636E\u8D44\u6599",couldntSetupPdfWorker:"\u65E0\u6CD5\u5236\u4F5CPDF worker",couldntDeleteAsOtherInCharge:`\u8FD9\u4E2A\u8BFE\u7A0B\u5DF2\u6709\u5176\u4ED6\u8001\u5E08\u4F7F\u7528\uFF0C\u6545\u65E0\u6CD5\u5220\u9664\u3002
\u60A8\u8981\u89E3\u9664\u672C\u8BFE\u7A0B\u7684\u8D1F\u8D23\u4EBA\u8EAB\u4EFD\u5417\uFF1F`,relatedSubjectsMsg:"\u203B\u82E5\u60A8\u8981\u89E3\u9664\u6B64\u8BFE\u7A0B\u8D1F\u8D23\u4EBA\u8EAB\u4EFD\uFF0C\u4E0B\u5217\u5171\u7528\u8D44\u6599\u76D2\u7684\u8BFE\u7A0B\u8D1F\u8D23\u4EBA\u4E5F\u4F1A\u4E00\u5E76\u89E3\u9664",stopBeginInCharge:"\u89E3\u9664\u8D1F\u8D23\u4EBA\u8EAB\u4EFD",fileTooBigTitle:"\u6863\u6848\u8FC7\u4E8E\u5E9E\u5927",fileTooBigMessage:"\u65E0\u6CD5\u4E0A\u4F201GB\u4EE5\u4E0A\u4E4B\u6863\u6848",exceedVideoQuality:`\u542B\u6709\u8F83\u5927\u4E4B\u5F71\u7247\u6863\u6848\uFF0C\u53D1\u5E03\u753B\u9762\u65F6\u6050\u4F1A\u6709\u64AD\u653E\u4E0D\u987A\u7545\u4E4B\u60C5\u51B5\u3002
\u662F\u5426\u7EE7\u7EED\u4E0A\u4F20?`,confirmDeleteTarget:"\u662F\u5426\u5220\u9664\u201C%1$s\u201D\uFF1F",signInWithXXX:"\u4EE5%1$s\u767B\u5165",confirmDisplayAnswers:"\u8981\u663E\u793A\u7B54\u6848\u5417\uFF1F",submissionListDateShortFmt:"m\u6708d\u65E5 HH:MM",submissionListDateFullFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM",couldntExportCard:"\u5361\u7247\u8F6C\u5B58\u5931\u8D25",pdf:"PDF",exportingCardAsPdf:"\u5361\u7247\u6B63\u5728\u8F6C\u5B58\u6210PDF\u6863...",open:"\u5F00\u542F",cache:"\u5FEB\u53D6",submittersAnswer:"%1$s\u7684\u7B54\u6848",previousSomeonesAnswer:"\u4E0A\u4E00\u4F4D\u7684\u7B54\u6848",nextSomeonesAnswer:"\u4E0B\u4E00\u4F4D\u7684\u7B54\u6848",newerDataExistsOnServer:"\u4F3A\u670D\u5668\u6709\u65B0\u7248\u672C\u8D44\u6599\u5B58\u5728",qrCodePreviewDialogTitle:"\u5DF2\u8BFB\u53D6QR Code",createWebCard:"\u5236\u4F5CWeb\u5361",createTextCard:"\u5236\u4F5C\u6587\u5B57\u5361",qrCodeScannerPrepError:"QR Code\u8BFB\u53D6\u529F\u80FD\u5C1A\u672A\u5C31\u7EEA",textCardPlaceholderImgPath:"/svg/text_zh_100x75_margin.svg",qrModeGuidance:"\u8BF7\u5C06QR Code\u7F6E\u4E2D\u4E8E\u626B\u7784\u8303\u56F4\u5185",selectAnswers:"\u8BF7\u9009\u62E9\u56DE\u7B54",selectAnswersCompare:"\u8BF7\u9009\u62E9\u8981\u6BD4\u8F83\u7684\u7B54\u6848",selectNoteForAddingMaterials:"\u8981\u5C06\u8D44\u6599\u6DFB\u52A0\u81F3\u54EA\u4E00\u4EFD\u7B14\u8BB0\uFF1F",videoRecordingTimeLimitReached:"\u5F55\u5F71\u65F6\u95F4\u5DF2\u8FBE\u4E0A\u9650\uFF0C\u5C06\u505C\u6B62\u5F55\u5F71\u3002",creatingAttendanceCard:"\u6B63\u5728\u5236\u4F5C\u51FA\u7F3A\u52E4\u5361",createdAttendanceCard:"\u51FA\u7F3A\u52E4\u5361\u5236\u4F5C\u5B8C\u6210",failedCreateAttendanceCard:"\u65E0\u6CD5\u5236\u4F5C\u51FA\u7F3A\u52E4\u5361",attendance:"\u51FA\u7F3A\u52E4\u5361",attendanceReport:"\u51FA\u7F3A\u52E4\u8054\u7EDC",attendanceCardCreator:"\u7F16\u8005",attendanceCardEditAndResult:"\u7F16\u8F91\u30FB\u7EDF\u8BA1",preparingAttendance:"\u6B63\u5728\u51C6\u5907\u51FA\u7F3A\u52E4\u8054\u7EDC",clickHereForHelp:"\u4F7F\u7528\u65B9\u6CD5\u8BF7\u53C2\u9605\u6B64\u5904",helpPageLinkForQuizCardTest:"https://scrapbox.io/hkloilomanual/%E6%B8%AC%E9%A9%97%E5%8D%A1",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/hkloilomanual/%E5%95%8F%E5%8D%B7%E5%8D%A1",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/hkloilomanual/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/hkloilomanual/%E5%87%BA%E7%BC%BA%E5%8B%A4%E5%8D%A1",loginPageTitle:"\u767B\u5165LoiLoNote School",loginPageDesc:"\u6B22\u8FCE\u6765\u5230LoiLoNote School\uFF0C\u8BA9\u6211\u4EEC\u52A0\u5165\u6709\u8DA3\u7684\u8BFE\u7A0B\u5427!",penType:"\u7B14\u7684\u79CD\u7C7B",penColor:"\u7B14\u7684\u989C\u8272",highlighterColor:"\u8367\u5149\u7B14\u989C\u8272",clearAll:"\u5168\u90E8\u6E05\u9664",penThickness:"\u7EBF\u6761\u7C97\u7EC6",eraserSize:"\u6A61\u76AE\u64E6\u6E05\u9664\u8303\u56F4\u5927\u5C0F",myFolder:"\u6211\u7684\u8D44\u6599\u5939",schoolWideFolder:"\u6821\u5185",districtShared:"%1$s\u5171\u7528",schoolShared:"\u6821\u5185\u5171\u7528",classShared:"\u6B64\u8BFE\u7A0B\u5171\u7528",teachersOnlyFolder:"\u4EC5\u9650\u8001\u5E08",classFolder:"%1$s \u5C02\u7528",sortCreateDateOrder:"\u5236\u4F5C\u65E5\u671F\u987A\u5E8F",sortUpdateDateOrder:"\u66F4\u65B0\u65E5\u671F\u987A\u5E8F",sortUpdateDateOrderForMaterialBox:"\u66F4\u65B0\u65E5\u671F\u987A\u5E8F",materialNameOrder:"\u540D\u79F0\u987A\u5E8F",materialFileUpdateDateFolderNameOrder:"\u6863\u6848\u5939\u540D\u79F0\u987A\u5E8F",pushTokenRegistration:"\u767B\u5F55\u901A\u77E5\u901A\u8BC1",registered:"\u5DF2\u767B\u5F55",unregistered:"\u672A\u767B\u5F55",citationNotePrefix:"\u5F15\u7528",markAllAsRead:"\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",confirmMarkAllSubmitsAsRead:"\u5C06\u6700\u65B0\u7684\u7F34\u4EA4\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB\u3002\u662F\u5426\u6267\u884C\uFF1F",markedAllSubmitsAsRead:"\u6700\u65B0\u7684\u7F34\u4EA4\u5DF2\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",confirmMarkAllRevealAnswersAsRead:"\u5C06\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB\u3002\u662F\u5426\u6267\u884C\uFF1F",markedAllRevealAnswersAsRead:"\u6700\u65B0\u7684\u5206\u4EAB\u7B54\u6848\u5168\u90E8\u6807\u793A\u4E3A\u5DF2\u8BFB",failedToMarkAllAsRead:"\u65E0\u6CD5\u53D8\u66F4\u4E3A\u5DF2\u8BFB\u53D6",copied:"\u5DF2\u62F7\u8D1D",copiedToClipboard:"\u5DF2\u7ECF\u590D\u5236\u5230\u526A\u8D34\u7C3F",failedToCopyCards:"\u65E0\u6CD5\u590D\u5236\u5361\u7247",tooManyCards:"\u5361\u7247\u6570\u8FC7\u591A",cannotCreateWebCardFromExtension:"\u65E0\u6CD5\u5236\u4F5CWeb\u5361",failedCreateWebCardFromExtension:"\u5F00\u542F\u5305\u542BWeb\u5361\u7684\u7B14\u8BB0\u540E\uFF0C\u8BF7\u4F7F\u7528\u6269\u5145\u529F\u80FD\u6765\u5236\u4F5C\u5361\u7247\u3002",failedCreateWebCardFromExtensionTitle:"\u8BF7\u5F00\u542F\u7B14\u8BB0",enableSharedNote:"\u5236\u4F5C\u5171\u4EAB\u7B14\u8BB0(\u4EC5\u9650\u8001\u5E08)",selectSchool:"\u8BF7\u9009\u62E9\u8981\u767B\u5165\u4E4B\u5B66\u6821",showAnnotation:"\u663E\u793A\u4FEE\u6B63\u5904",showSubmission:"\u663E\u793A\u7F34\u4EA4\u8D44\u6599",hideAnnotation:"\u4E0D\u663E\u793A\u4FEE\u6B63\u5904",submissionDeadlineFmt:"yyyy\u5E74m\u6708d\u65E5 HH:MM \u622A\u6B62",submissionBoxDeletedOrNotExisted:"\u7F34\u4EA4\u76D2\u4E0D\u5B58\u5728\uFF0C\u5DF2\u88AB\u5220\u9664",getToWork:"\u9A6C\u4E0A\u524D\u5F80\u8BBE\u5B9A\uFF01",chooseNoteToWorkIn:"\u8981\u4F7F\u7528\u54EA\u4E00\u4EFD\u7B14\u8BB0\u6765\u8BBE\u5B9A\u4E3B\u9898\uFF1F",newTaskCreated:"\u6709\u65B0\u589E\u4E4B\u7F34\u4EA4\u8D44\u6599",standardNote:"\u4E2A\u4EBA\u7B14\u8BB0",xIsDeleted:"\u5C06\u5220\u9664 %1$s",couldntFetchSharedNoteMembers:"\u65E0\u6CD5\u53D6\u5F97\u6210\u5458",manageSharedNoteMember:"\u6210\u5458\u4E4B\u7BA1\u7406",chooseNoteToManageMember:"\u8BF7\u9009\u62E9\u7BA1\u7406\u7B14\u8BB0\u4E4B\u6210\u5458",chooseNoteToExport:"\u8BF7\u9009\u62E9\u6C47\u51FA\u4E4B\u7B14\u8BB0",chooseNoteToImport:"\u8BF7\u9009\u62E9\u6C47\u5165\u4E4B\u7B14\u8BB0",couldntEditMember:"\u65E0\u6CD5\u7F16\u8F91\u6210\u5458",couldntAdd:"%1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u65E0\u6CD5\u8FFD\u52A0",couldntDel:"%1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u65E0\u6CD5\u5220\u9664",couldntEditMemberWithCount:"1$d\u4EBA\u4E2D\u6709%2$d\u4EBA\u65E0\u6CD5\u7F16\u8F91",removedFromSharedNoteMembers:"\u5DF2\u89E3\u9664\u5171\u6709\u7B14\u8BB0\u6210\u5458\u8EAB\u5206",couldntGetDeviceInfo:"\u65E0\u6CD5\u53D6\u5F97\u8BBE\u5907\u8D44\u8BAF",changePassword:"\u66F4\u65B0\u5BC6\u7801",submitPassword:"\u66F4\u65B0",currentPasswordIncorrect:"\u76EE\u524D\u4E4B\u5BC6\u7801\u4E0D\u6B63\u786E",currentPassword:"\u76EE\u524D\u4E4B\u5BC6\u7801",newPassword:"\u65B0\u5BC6\u7801",newPasswordConfirm:"\u65B0\u5BC6\u7801\uFF08\u786E\u8BA4\uFF09",couldntChangePassword:"\u65E0\u6CD5\u66F4\u65B0\u5BC6\u7801",passwordUpdated:"\u5BC6\u7801\u5DF2\u66F4\u65B0",hiUser:"%1$s\u60A8\u597D",setNewPassword:"\u8BF7\u8BBE\u5B9A\u4E0B\u6B21\u767B\u5165\u65F6\u4F7F\u7528\u7684\u65B0\u5BC6\u7801",welcomeToLns:"\u6B22\u8FCE\u6765\u5230LoiLoNote School",connectionStatus:"\u8FDE\u7EBF\u72B6\u51B5",connectedToPushServer:"\u5DF2\u8FDE\u63A5\u901A\u77E5\u4F3A\u670D\u5668",couldntConnectToPushServer:"\u672A\u8FDE\u63A5\u901A\u77E5\u4F3A\u670D\u5668\uFF0C\u90E8\u5206\u529F\u80FD\u65E0\u6CD5\u4F7F\u7528",reconnectingToPushServer:"\u4E0E\u901A\u77E5\u4F3A\u670D\u5668\u91CD\u65B0\u8FDE\u63A5\u4E2D...",pleaseConnectToInternet:"\u8BF7\u8FDE\u63A5\u7F51\u8DEF",pleaseConnectToInternetDesc:"\u76EE\u524D\u4E3A\u79BB\u7EBF\u72B6\u6001\u3002\u8BF7\u786E\u8BA4\u7F51\u8DEF\u8FDE\u7EBF\u3002",default:"\u9884\u8BBE",confirmCloseNoteForOtherSubmissionBox:`\u6B63\u524D\u5F80\u5176\u4ED6\u8BFE\u7A0B\u4E4B\u7F34\u4EA4\u76D2\u3002
\u5C06\u5173\u95ED\u76EE\u524D\u7B14\u8BB0\uFF0C\u662F\u5426\u6267\u884C?`,confirmCloseNoteForOtherTimeline:`\u6B63\u524D\u5F80\u5176\u4ED6\u8BFE\u7A0B\u4E4B\u65F6\u95F4\u8F74\u3002
\u5C06\u5173\u95ED\u76EE\u524D\u7B14\u8BB0\uFF0C\u662F\u5426\u6267\u884C?`,confirmCloseNoteForOtherCourse:`\u6B63\u524D\u5F80\u5176\u4ED6\u8BFE\u7A0B\u4E4B\u7B14\u8BB0\u3002
\u5C06\u5173\u95ED\u76EE\u524D\u7B14\u8BB0\uFF0C\u662F\u5426\u6267\u884C?`,selectItemsToExport:"\u8BF7\u9009\u62E9\u6C47\u51FA\u4E4B\u6863\u6848",retry:"\u518D\u6B21\u6267\u884C",exceedNumberOfExportableItemsMsg:"\u53EF\u6C47\u51FA\u4E4B\u6863\u6848\u30FB\u6587\u4EF6\u5939\u6570\u91CF\u8D85\u8FC7\u4E0A\u9650\u505C\u6B62\u6C47\u51FA",exceedNumberOfExportableHierarchyMsg:"\u53EF\u6C47\u51FA\u4E4B\u6863\u6848\u30FB\u6587\u4EF6\u5939\u9636\u5C42\u8D85\u8FC7\u4E0A\u9650\u505C\u6B62\u6C47\u51FA",analyzingDocument:"\u6B63\u5728\u8BFB\u53D6\u6863\u6848",exportingDocument:"\u6B63\u5728\u6C47\u51FA\u6863\u6848",couldntExportDocument:"\u65E0\u6CD5\u6C47\u51FA\u6863\u6848",import:"\u6C47\u5165",imported:"\u5DF2\u6C47\u5165",export:"\u6C47\u51FA",underMaintenace:"\u76EE\u524D\u6B63\u5728\u8FDB\u884C\u7EF4\u62A4",maintenanceNotification:"\u4F3A\u670D\u5668\u7EF4\u62A4\u901A\u77E5",maintenanceScheduled:"\u5DF2\u9884\u5B9A\u8981\u6267\u884C\u7EF4\u62A4",seeDetail:"\u8BE6\u60C5\u8BF7\u53C2\u9605\u6B64\u5904",endSchedule:"\u7ED3\u675F\u9884\u5B9A\u65F6\u95F4",watchTutorial:"\u89C2\u770B\u793A\u8303\u5F71\u7247",closeTutorialTitle:"\u662F\u5426\u7ED3\u675F\u793A\u8303\u5F71\u7247\uFF1F",closeTutorialMsg:"\u6B64\u5F71\u7247\u53EF\u968F\u65F6\u89C2\u770B",closeTutorialCheckLabel:"\u4EE5\u540E\u4E0D\u518D\u663E\u793A",understood:"\u77E5\u9053\u4E86",failedPlayTutorial:"\u65E0\u6CD5\u64AD\u653E\u793A\u8303\u5F71\u7247",importingNotes:"\u6B63\u5728\u6C47\u5165\u7B14\u8BB0...",exportingNotes:"\u6B63\u5728\u6C47\u51FA\u7B14\u8BB0...",ipAddressRestricted:"\u7981\u6B62\u4ECE\u8FD9\u4E2AIP\u4F4D\u5740\u5B58\u53D6",insufficientPermissionToJoin:"\u6CA1\u6709\u53C2\u52A0\u6743\u9650",classHasEnded:"\u6B64\u73ED\u7EA7\u5DF2\u5173\u95ED",onlyStudentsAllowedToJoin:"\u9664\u5B66\u751F\u5916\u65E0\u6CD5\u53C2\u52A0",graduatesNotAllowedToJoinClass:"\u65E0\u6CD5\u53C2\u52A0\u5DF2\u6BD5\u4E1A\u6821\u4E4B\u73ED\u7EA7",ssoLogin422Msg:"\u5B66\u6821\u5185\u6709\u76F8\u540C\u4E4B%1$s\u5E10\u53F7\u91CD\u590D\u767B\u5F55\uFF61 \u9664\u4E86\u60F3\u4F7F\u7528\u4E8E\u767B\u5165\u4E4B\u5E10\u53F7\u5916, \u8BF7\u89E3\u9664\u5E10\u53F7\u4E4B\u91CD\u590D\u7ED1\u5B9A\uFF61",ssoLogin422Url:"https://scrapbox.io/enloilomanual/Duplicate_registration_error_is_displayed_when_logging_in_with_SSO.",ssoLogin404Msg:"\u6B64%1$s\u5E10\u53F7\u5C1A\u672A\u767B\u5F55\u81F3LoiLoNote\u30FBSchool\u6545\u65E0\u6CD5\u4F7F\u7528\u3002\u8BF7\u6D3D\u8BE2\u7BA1\u7406\u8005\u3002",importNotes:"\u6C47\u5165%1$d\u4E2A\u7B14\u8BB0",createCourseAfterUserGroupCreation:"\u8BF7\u7EE7\u7EED\u5EFA\u7ACB\u8BFE\u7A0B",createCourseAfterUserGroupCreationDesc:"\u5C06\u5EFA\u7ACB\u73ED\u7EA7\u6240\u9700\u4E4B\u56FD\u8BED.\u6570\u5B66.\u82F1\u6587\u7B49\u8BFE\u7A0B",insufficientPermission:"\u65E0\u6267\u884C\u6743\u9650",accessDenied:"\u65E0\u5B58\u53D6\u6743\u9650",actionCannotBeCarriedOutOnClosedCourse:"\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B\u65E0\u6CD5\u4F7F\u7528",couldNotGetSubmissionAnswers:"\u65E0\u6CD5\u5F00\u542F\u7F34\u4EA4\u76D2\u68C0\u89C6\u5185\u5BB9",folderWithThisNameAlreadyExists:"\u5DF2\u6709\u76F8\u540C\u540D\u79F0\u7684\u6587\u4EF6\u5939\u5B58\u5728",importDocument:"\u6B63\u5728\u6C47\u5165\u6863\u6848",couldntImportDocument:"\u65E0\u6CD5\u6C47\u5165\u6863\u6848",folderForImportedItemsWillBeCreated:"\u5236\u4F5C\u6C47\u51FA\u5904\u6863\u6848",save:"\u50A8\u5B58",administrator:"\u7BA1\u7406\u8005",owner:"\u62E5\u6709\u8005",reuse:"\u518D\u6B21\u4F7F\u7528",reuseThisTestCard:"\u518D\u6B21\u4F7F\u7528\u8FD9\u5F20\u6D4B\u9A8C\u5361",reuseThisAttendanceCard:"\u518D\u6B21\u4F7F\u7528\u8FD9\u5F20\u51FA\u7F3A\u52E4\u5361",pleaseWaitForMaintenanceEnd:"\u8BF7\u7A0D\u5F85\u7247\u523B\u76F4\u5230\u7EF4\u62A4\u5DE5\u4F5C\u7ED3\u675F",uploadingXXX:"\u6B63\u5728\u4E0A\u4F20%1$s...",upload:"\u4E0A\u4F20",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"\u65E0\u6CD5\u4E0A\u4F20\u6587\u4EF6\u5939",filesNoExtCannotBeUploaded:"\u65E0\u6CD5\u4E0A\u4F20\u65E0\u526F\u6863\u540D\u4E4B\u6863\u6848",fileWithInvalidNameContained:"\u542B\u6709\u540D\u79F0\u65E0\u6548\u4E4B\u6587\u4EF6",insufficientPermissionToDocumentGroup:"\u4E0D\u5177\u5199\u5165\u6587\u4EF6\u5939\u4E4B\u6743\u9650",newSharedNote:"\u65B0\u5171\u4EAB\u7B14\u8BB0",convertToSharedNote:"\u5C06\u5171\u4EAB\u7B14\u8BB0",chooseNoteToShare:"\u8BF7\u9009\u62E9\u8981\u5171\u4EAB\u7684\u7B14\u8BB0",chooseUsersToBeShared:"\u8BF7\u9009\u62E9\u5171\u4EAB\u7B14\u8BB0\u7684\u6210\u5458",shareXXX:" \u5171\u4EAB%1$s",confirmShareNote:"\u8BBE\u5B9A\u4E3A\u5171\u4EAB\u7B14\u8BB0\u65E0\u6CD5\u518D\u56DE\u590D\u5230\u4E00\u822C\u7B14\u8BB0\u3002\u65E0\u6CD5\u5BF9\u5E94\u5171\u4EAB\u7B14\u8BB0\u7684\u5E94\u7528\u8F6F\u4F53\u5C06\u4E0D\u4F1A\u663E\u793A\u5728\u4E00\u89C8\u8868\u4E2D\uFF0C\u662F\u5426\u63A5\u53D7?",teacherNoClosedCourseTitle:"\u4F60\u4E0D\u8D1F\u8D23\u4EFB\u4F55\u8FC7\u53BB\u7684\u79D1\u76EE",studentNoClosedCourseTitle:"\u4F60\u6CA1\u6709\u52A0\u5165\u4EFB\u4F55\u8FC7\u53BB\u7684\u79D1\u76EE",pasteTips:"\u8D34\u4E0A\u6587\u672C\u6216\u662F\u7531\u7F51\u8DEF\u590D\u5236\u8FC7\u6765\u7684\u56FE\u7247",noMembersInGroup:"\u73ED\u7EA7\u672A\u6709\u5B66\u751F\u52A0\u5165",showCodeToInviteStudents:"\u516C\u5E03\u8BFE\u7A0B\u53C2\u52A0\u4EE3\u7801\uFF0C\u8BF7\u5B66\u751F\u8F93\u5165",members:"\u4EBA",saved:"\u5DF2\u50A8\u5B58",collectCard:"\u6C47\u96C6\u5361\u7247",collectedCard:"\u5DF2\u6C47\u96C6\u4E4B\u5361\u7247",collectCardDialogTitle:"\u662F\u5426\u5C06\u5361\u7247\u6C47\u96C6\u5230\u684C\u9762\u4E2D\u5FC3\u5904\uFF1F",collect:"\u6C47\u96C6",confirmCollectCardMessage:"\u4F3C\u4E4E\u6709\u5F88\u5927\u578B\u7684\u5361\u7247\u6216\u5EA7\u843D\u5728\u5F88\u8FDC\u4F4D\u7F6E\u7684\u5361\u7247\u3002\u4F1A\u5C06%1$d\u5F20\u5361\u7247\u6C47\u96C6\u81F3\u4E2D\u5FC3\u5904\u8FDB\u884C\u4FEE\u590D\u3002",completeCollectCardMessage:"\u5B8C\u6210\u5927\u578B\u5361\u7247\u4EE5\u53CA\u5EA7\u843D\u5728\u5F88\u8FDC\u4F4D\u7F6E\u4E4B\u5361\u7247\u6536\u96C6\u3002",sentToNote:"\u5DF2\u4F20\u9001\u7ED9\u300C%1$s\u300D",myNote:"\u4E2A\u4EBA\u7B14\u8BB0",searchNote:"\u68C0\u7D22\u7B14\u8BB0",searchMaterial:"\u68C0\u7D22\u8D44\u6599\u76D2",enableSearch:"\u5C06\u68C0\u7D22\u8BBE\u5B9A\u4E3A\u6709\u6548",noMatchesFound:"\u627E\u4E0D\u5230\u4E00\u81F4\u7684\u68C0\u7D22\u7ED3\u679C",endSearch:"\u68C0\u7D22\u7ED3\u675F",searchResult:"\u68C0\u7D22\u7ED3\u679C",graduated:"\u5DF2\u6BD5\u4E1A",textPointerIconPath:"/svg/text_circle_zh.svg",download:"\u4E0B\u8F7D",downloadAndUploadLater:"\u4E0B\u8F7D\u540E\u518D\u91CD\u65B0\u4E0A\u4F20\u5373\u53EF\u4FEE\u590D\u3002",reloading:"\u518D\u6B21\u8BFB\u53D6\u4E2D...",graduateMsg:"\u606D\u559C\u60A8\u6BD5\u4E1A\u4E86!\u5728\u5B66\u671F\u95F4\u7684\u4E0A\u8BFE\u8D44\u6599\uFF0C\u53EF\u4EE5\u4ECE\u300C\u5DF2\u7ED3\u675F\u4E4B\u8BFE\u7A0B\u300D\u6765\u6D4F\u89C8\u3002",sharedNoteProtocolVersionErrorMsg:"\u60A8\u6240\u4F7F\u7528\u7684\u5E94\u7528\u7A0B\u5F0F\u672A\u652F\u63F4\u5171\u4EAB\u7B14\u8BB0\u7684\u90E8\u5206\u529F\u80FD\u3002\u8BF7\u91CD\u65B0\u8BFB\u53D6\u5E76\u6267\u884C\u66F4\u65B0\u3002",couldNotConnectSharedNote:"\u65E0\u6CD5\u8FDE\u7ED3\u5171\u4EAB\u7B14\u8BB0",failedToSaveDataToServer:`\u6570\u636E\u8D44\u6599\u65E0\u6CD5\u50A8\u5B58\u81F3\u4F3A\u670D\u5668\u3002
\u662F\u5426\u5F3A\u5236\u5173\u95ED\uFF1F`,recordingSettingTitle:"\u5F55\u97F3\u30FB\u5F55\u5F71",enableAudioNoiseReduction:"\u964D\u4F4E\u566A\u97F3",loadingFailed:"\u65E0\u6CD5\u8BFB\u53D6",decodingFailed:"\u65E0\u6CD5\u89E3\u7801\u3002",browserCannotReadTheVideo:"\u8BE5\u5F71\u7247\u4E3A\u6D4F\u89C8\u5668\u65E0\u6CD5\u8BFB\u53D6\u7684\u683C\u5F0F",browserCannotReadTheAudio:"\u8BE5\u97F3\u6863\u4E3A\u6D4F\u89C8\u5668\u65E0\u6CD5\u8BFB\u53D6\u7684\u683C\u5F0F",networkError:"\u7F51\u8DEF\u9519\u8BEF",loadingInterrupted:"\u5DF2\u4E2D\u65AD\u8BFB\u53D6",couldntEditNote:"\u65E0\u6CD5\u53D8\u66F4\u5171\u4EAB\u7B14\u8BB0",noteIsReadonly:"\u6B64\u4EFD\u7B14\u8BB0\u4E3A\u8BFB\u53D6\u4E13\u7528",notConnectedToSharedNote:"\u672A\u8FDE\u63A5\u5230\u5171\u4EAB\u7B14\u8BB0",materialBoxAccessibleMessageForTeacher:"\u8FD9\u4E2A\u8D44\u6599\u5939\u5B66\u751F\u4E5F\u53EF\u4EE5\u6D4F\u89C8",trashBox:"\u5783\u573E\u6876",restore:"\u590D\u539F",selectItemsToRestore:"\u8BF7\u70B9\u51FB\u8981\u590D\u539F\u7684\u9879\u76EE",restoreToThisFolder:"\u590D\u539F\u81F3\u6B64\u8D44\u6599\u5939\u5F53\u4E2D",restoringDocument:"\u6863\u6848\u590D\u539F\u4E2D...",invalidDocumentRestoreDetails:"\u627E\u4E0D\u5230\u6863\u6848\u6216\u6863\u6848\u5939\uFF0C\u6216\u8005\u76EE\u6807\u662F\u65E0\u6548\u8DEF\u5F84",couldntRestoreDocument:"\u65E0\u6CD5\u590D\u539F\u6863\u6848",materialTrashBoxHeaderMessage:"\u79FB\u81F3\u5783\u573E\u6876\u540E\uFF0C\u8BE5\u9879\u76EE\u5C06\u572830\u5929\u540E\u81EA\u52A8\u5B8C\u5168\u5220\u9664",notShared:"\u4E0D\u5171\u4EAB",sharedInManageable:"\u7BA1\u7406",sharedInWritable:"\u5199\u5165",sharedInViewOnly:"\u4EC5\u6D4F\u89C8",sharedNoteMembers:"\u5171\u4EAB\u6210\u5458",settings:"\u8A2D\u5B9A",sharedNoteSettings:"\u5171\u4EAB\u8BBE\u5B9A",couldNotChangeSharedNoteSettings:"\u65E0\u6CD5\u53D8\u66F4\u5171\u4EAB\u8BBE\u5B9A",change:"\u53D8\u66F4",noteName:"\u7B14\u8BB0\u540D\u79F0",sharedRange:"\u5171\u4EAB\u8303\u56F4",allTeachers:"\u6240\u6709\u8001\u5E08",add:"\u65B0\u589E",execute:"\u6267\u884C",javaScriptRequired:"JavaScript\u5DF2\u88AB\u505C\u7528\uFF61 \u4E3A\u4E86\u4F7F\u7528LoiLoNote School, \u8BF7\u5F00\u542F\u6D4F\u89C8\u5668\u7684JavaScript\u8BBE\u7F6E\uFF61",selectQuizSharingMode:"\u8BF7\u9009\u62E9\u53D1\u5E03\u6A21\u5F0F",quizSharingModeNormal:"\u666E\u901A\u6A21\u5F0F",quizSharingModeGame:"\u6E38\u620F\u6A21\u5F0F(\u03B2)",reconnectingToSharedNote:"\u518D\u6B21\u8FDE\u7ED3\u5171\u4EAB\u7B14\u8BB0..."};var pK={aboutThisApp:"About this App",addCardDialogTitle:"Add Card",addCourseDialogJoinCourseBtnLabel:"Add",addCourseLabel:"Add Subject",addCourseDesc:'Please go to "Add Subject"',adminPage:"Admin Page",allMembers:"All",alreadyJoinedGroup:"Already joined",and:"and",andOtherMembers:"and %1$d other%2$s",anonymous:"Name Display Off",answersNotVisibleWarnTitle:"Answer not Viewable",answersNotVisibleWarnMsg:"Other answers cannot be viewed, as Answer Sharing is turned off.",api202ErrorMsg:"The server has not yet finished processing this item. It should become available after a short delay. Please wait a few minutes, then try again.",api403ErrorMsg:"No permission for %1$s. Please check with your school's administrator for LoiLoNote School.",api404ErrorMsg:"Could not find %1$s. It is possible this %1$s was never created, or was previously deleted.",arrange:"Arrange",asNextCard:"as next card",attending:"Attending",attendingOtherCourse:"Attending other Subject",audioDefaultFileName:"audio",audioRecordBtnLabel:"REC",automatic:"Auto",back:"Back",backToAnswerList:"Back to Answer List",brokenNoteErrorMsg:"The version of %1$s saved on the server may be corrupted. Please contact our support staff. (Error Code: %2$d, Subject ID: %3$d, Note ID: %4$s) We apologize for the inconvenience caused.",browserDoesntSupportAudioRecording:"Your browser does not support audio recording",browserDoesntSupportMediaCapture:"Your browser does not image recording",browsingWeb:"Web",camera:"Camera",cancel:"Cancel",cancelingDownload:"The download is being canceled",canceledBatchDownload:"Batch download canceled",cannotDeleteThisHistory:"This history cannot be deleted",cannotInsertWhileStillLoadingDocument:"Cards cannot be displayed, as they are still loading",cantFindUsableDevice:"No available camera device found",cardHasUnsavedAttachments:"Included files have not finished uploading",cardHasUploadFailedAttachments:"Could not upload included files",changeLayout:"Change layout",changeLayoutDescription:"You can change the layout of the submissions",changeTools:"Change Tools",renamingNote:'Renaming "%1$s" to "%2$s"...',checkAttendance:"Student List",checking:"Checking...",checkScreenLock:"Confirm Screen Lock",checkServiceStatus:"Please check status of services",selectItemsToCopy:"Select items to copy",selectItemsToErase:"Select items to erase",selectItemsToMove:"Select items to move",selectItemToRename:"Select item to rename",askWhichFolderToCopyItTo:"Which folder do you want to copy it to?",askWhichFolderToImportItTo:"Which folder do you want to import it to?",askWhichFolderToMoveItTo:"Which folder do you want to move it to?",askWhichFolderToRestoreItTo:"Which folder do you want to restore it to?",askWhichFolderToSaveItTo:"Which folder do you want to save it to?",chooseGroupToAddTo:"Select the class you will be teaching",noGroups:"None of this year's classes have been registered yet",createNewGroupDesc:'"Create a New Class" from \u2193',groupDesc:'A group of students taking a class at the same time is called a "class"',chooseGroupToDelete:"Select group to delete",chooseNoteToCopy:"Select note to copy",chooseNoteToRename:"Select note to rename",choosingCourse:"Choosing Subject",close:"Close",closeAfterTen:"In 10 min",closeCamera:"Close Camera",closedTaskLabel:"Closed",closeNote:"Close Note",closeNow:"Now",closeThisScreen:"Close this Dialog",closeToday:"Today",comparison:"Compare",complete:"Done",completedBatchDownload:"Batch download is complete",confirmAnswerShare:"Share answers with students?",confirmAudioRecordingOverwrite:"Overwrite audio recording?",confirmCardDelete:"Delete cards?",confirmDuplicateAllConnectedCards:"Duplicate all connected cards?",confirmCreateSubject:'Create "%1$s"',confirmDelete:"Delete?",confirmDeleteAudioRecording:"Delete audio recording?",confirmDeleteTimelineHistory:"Delete timeline history?",confirmGroupJoin:'Join "%1$s"?',confirmLogout:"Log out?",confirmMultiChildCardDelete:"Delete this Card and the %1$d Cards inside it?",confirmMultiCardGroupDelete:"Delete %1$d Cards and the connected Cards?",confirmMultiFileDelete:"Delete %1$d file%2$s?",confirmReloadWhileUnsavedChangesExist:"This note contains unsaved changes. Reloading the page may cause the loss of these changes. Reload?",confirmResetVideoCamera:"Retake video?",confirmResubmit:'Submit you work to "%1$s"?',confirmRevealSubmitterNames:"Students' names will be displayed. Continue?",confirmSendToAll:"Send to all members?",confirmSendBack:"Send marks back to student?",confirmSendBackAll:"Send back %1$d marked submission%2$s?",confirmSingleFileDelete:"Delete 1 file?",confirmStartPresentation:"Ask student to present?",confirmStartScreenSharing:"Start screen sharing?",copy:"Copy",duplicate:"Duplicate",duplicateAllConnectedCards:"Duplicate All Connected Cards",couldntDelete:"Could not delete",couldntReuseCard:"Could not reuse card",copyingDocument:"Copying file...",copyingNote:"Copying note...",copyOf:"%1$sCopy",duplicateThisCard:"Duplicate This Card",copyToThisFolder:"Copy to This Folder",corruptFileErrorMsg:"Could not load file. Its data may be invalid.",couldntRenameNote:"Could not rename note",couldntChangeScreenLock:"Could not change screen lock",couldntChangeStudentSharingLock:"Could not change student sharing lock",couldntCopyDocument:"Could not copy file",couldntCopyNote:"Could not copy note",couldntCreateFolder:"Could not create folder",couldntCreateGroup:"Could not create group",couldntCreateNote:"Could not create note",couldntCreateSubject:"Could not create subject",couldntCreateTask:"Could not create task",couldntDeleteArchivedGroup:"Could not delete group, as it is archived",couldntDeleteAsMaterialsExist:"Could not delete subject, as it contains materials saved to storage",couldntDeleteAsNotesExist:"Could not delete subject, as it contains saved notes",couldntDeleteAsSubjectsExist:"Could not delete group, as registered subjects remain",couldntDeleteAsUsersExist:"Could not delete group, as it contains member users",couldntDeleteClosedGroup:"Could not delete group, as it is already closed",couldntDeleteCourse:"Could not delete subject",couldntDeleteDocument:"Could not delete file",couldntDeleteGroup:"Could not delete group",couldntDeleteNote:'Could not delete "%1$s"',couldntDeleteTask:"Could not delete task",describeTask:"Describe the task",couldntDownloadFileErrorMsg:"%1$d: Could not download file from server. Please try again.",couldntGet_CheckInternetConnection:"Could not send requests. Please check your Internet connection.",checkInternetConnection:"Please check your Internet connection.",couldntGetCourses:"Could not get subject data",couldntGetNote:"Could not get note data",couldntGetOtherTeachersCourses:"Could not get data for other teacher's subjects",couldntGetPhotoData:"Could not get photo data",couldntGetPreviousYearsCourses:"Could not get data for previous years' subjects",couldntGetVideoData:"Could not get video data",couldntInsertFile:"Could not add file to note",couldntInsertItemTitle:"Could not add %1$s to note",couldntInsertPhoto:"Could not add photo to note",couldntInsertVideo:"Could not add video to note",couldntJoinGroup:"Cannot Join Class",couldntJoinSubject:"Could not join subject",couldntLoadFileTitle:"Could not read file",couldntMoveDocument:"Could not move file",couldntOpenItem:"Could not open %1$s",couldntReceiveScreenShare:"Could not receive shared screen",couldntRenameItem:"Could not change name of %1$s",couldntSaveNote:"Could not save note",couldntSaveToMaterials:"Could not save file",couldntSendBackDocument:"Could not send back marks",couldntSendCards:"Could not send cards",couldntShareScreen:"Could not share screen",couldntStartAudioRecording:"Could not start audio recording",couldntFinishedAudioRecording:"Could not finish audio recording",couldntSubmitCards:"Could not submit cards",couldntSubmitWhileSubmittingOthers:"Could not submit, as other submission is pending",couldntUpdateSubmission:"Could not update submission",couldntUploadDocument:"Could not upload files",couldntUploadNotes:"Could not upload notes",courseAccessDenied:"Insufficient access permission for this subject",courseDoesntExist:"Subject does not exist",courseFetchErrorOccurred:"Error occurred while fetching data for subject",groupFetchErrorOccurred:"Error occurred while fetching data for class",courseJoinedMark:"Added",courseListTitle:"Subject List",create:"Create",createCard:"Create Card",createdSubjectsListTitle:"Existing subjects",createFolder:"Create Folder",createNewGroupBtnLabel:"Create New Group",createNewNote:"Create New Note",createNewSubjectBtnLabel:"Create new subject",createNewTask:"Create New Task",creatingFolder:"Creating folder...",creatingGroup:'Creating group "%1$s"...',creatingNote:'Creating "%1$s"...',creatingSubjectForGroup:'Creating subject "%1$s" for group "%2$s"...',creatingTask:"Creating task...",webCard:"Web Card",creatingWebCard:"Creating Web Card...",cut:"Cut",timelineDateFmtPrevYear:"%2$d/%3$d/%1$d",timelineDateFmtThisYear:"%d-%d, %02d:%02d",timelineDateFmtToday:"%02d:%02d",dateLabel:"Date",daysRemaining:"%d days left",yearTimeUnit:"years",dayTimeUnit:"days",deferToOtherDeviceVersionDesc:"Undo changes made on this device, and apply the changes made from the other device.",deferToOtherDeviceVersionTitle:"Apply other device's changes",delete:"Delete",deletingDocument:"Deleting file...",deletingGroup:'Deleting group "%1$s"...',deletingNote:'Deleting "%1$s"...',deletingTask:'Deleting Task "%1$s"...',deletingTimelineHistory:"Deleting timeline history...",didInsertFile:"File added to note",didInsertMaterials:"Cards added to note",didInsertPhoto:"Photo added to note",didInsertVideo:"Video added to note",didJoinGroup:"Joined %1$s",didSaveToMaterialsStorage:"Saved to Materials Storage",didSendBackDocument:"Marks sent back",didCompleteSendBack:"All marks sent back",didSendCards:"Cards sent",didSubmitCards:"Cards submitted",displayByStudent:"Display by student",documentCopyDenied:"Insufficient permission to copy file or folder",documentMoveDenied:"Insufficient permission to move file or folder",downloadFile:"Download %1$s",downloadingFile:"Downloading a file...",couldntDownloadFile:"Could not download a file",duplicatedSubjectError:"Could not create subject, as it is already registered in the group",duplicatedUserGroup:"This group name already exists",image:"Image",audio:"Audio",itemNameInvalid:"Invalid %1$s name",itemNotFound:"Could not find %1$s",itemRenameDenied:"Insufficient permission to rename %1$s",drawingDefaultFileName:"Drawing",duplicateNoteNameSuffix:" Copy",edit:"Edit",end:"End",endAnswerSharing:"Unshare Answers",endPresentationLine1:"End",endPresentationLine2:"Presentation",endScreenShareReceiving:"End reception of screen sharing",endSharingLine1:"End",endSharingLine2:"Sharing",enterDocumentName:"Enter name for item",enterFileName:"Enter file name",enterFolderName:"Enter folder name",enterGroupCode:"Please enter class code",enterNewGroupName:"Please enter new group name",enterTaskName:"Please describe task",enumerationWithReadingPoint:", ",userGroupNamePlaceholder:"e.g. Mr.LoiLo's class",errorOccurred:"Error occurred",expand:"Expand",expiry:"Expiry",expiryDialogTitle:"Expiry",exportCard:"Export",pdfFile:"PDF File",failedDownloadFile:"Failed with %1$s's file.",failedDownloadFiles:"Failed with %1$s files.",failedDownloadFilesWithOthers:"Failed with %1$s and %2$d others files.",file:"File",fileOrFolderDeletionDenied:"Insufficient permission to delete file or folder",fileOrFolderInvalid:"File or folder is invalid",fileUpdatedAtDateTimeFmt:"yyyy/mm/dd hh:MM TT",focusOnTheTeacher:"Please pause your work and focus on your teacher.",forgotPasswordLinkText:"Forgot your password?",forgotPasswordPageUrl:"https://scrapbox.io/enloilomanual/Forgot_login_ID_and_password",folder:"Folder",folderCreationDenied:"Insufficient permission to create folder at given location",folderLocationNotFound:"Could not find specified parent folder",folderNotFound:"Could not find specified folder",generalCameraPrepError:"Could not prepare camera device",cameraMicPermissionDeniedErrorMsg:"Please give this app permission to use cameras and microphones",helpPageLinkToPermitCameraAndMic:"https://scrapbox.io/enloilomanual/Give_the_Android_App_Camera_and_Microphone_Permission",helpPageLinkToPermitCameraAndMicForAndroid:"https://scrapbox.io/enloilomanual/Give_the_Android_App_Camera_and_Microphone_Permission",getHelp:"Get Help",goBackToDesktop:"Back to Note",goBackToNoteList:"Back to Note List",graduated:"Graduated",groupAlreadyDeleted:"This group was already deleted",groupCode:"Class Code",groupDeletionDenied:"Insufficient permission to delete group",groupDoesntExist:"Group does not exist",groupJoinInstructions:"Students, please enter this Class Code",groupJoinCodeDeactivated:"The Code to join this class has been deactivated",groupName:"Group Name",groupNoLongerExists:"Group no longer exists",groupUnavailable:"This group cannot be used",hasExpired:"Expired",helpWebCardExtensionUrl:"https://scrapbox.io/enloilomanual/LoiLo_Web_Card_Extensions",helpWebCardExtensionUrlForEdge:"https://scrapbox.io/enloilomanual/LoiLo_Web_Card_Extensions",hoursRemaining:"%d hours left",hourTimeUnit:"hours",inputCannotContainSpacesWarning:"Input cannot contain blank spaces",inputTooLongWarning:"Please use %1$d characters or less",insertCardFromDocument:"Add materials to note",insertingFile:"Adding file to note...",insertingMaterials:"Adding materials to note...",insertingPhoto:"Adding photo to note...",insertingVideo:"Adding video to note...",inThisCard:"in this card",invalidDirectoryNameForBatchDownload:"Folder name may contain characters that cannot be used",invalidDocumentCopyDetails:"File, folder, or copy location invalid",invalidDocumentMoveDetails:"File folder, or move location invalid",invalidDocumentName:"File name invalid",invalidFileNameOrPath:"The file name or file path may be too long.",invalidFolderName:"Folder name invalid",invalidGroupCode:"The Class Code is invalid",invalidOpenUrl:"This card's URL cannot be opened, as it contains one or more invalid characters.",invalidRequest:"Invalid request",invalidUrlHelp:'Please enter an address starting with "http://" or "https://"',invertMouseWheel:"Invert mouse wheel direction",joinCourseBtnLabel:"Enter Class Code",joiningGroup:"Joining group...",joiningSubject:"Joining %1$s...",learnAboutThinkingTools:"Learn about Thinking Tools",learnMore:"Learn more",loadingFile:"Loading file...",lockingScreens:"Locking screens...",lockingStudentSharing:"Locking student sharing...",logout:"Log Out",logoutOption:"Log Out",mapDefaultFileName:"Map",material:"Material",materialsStorage:"Materials",membersJoinedCount:"Number of members",micPermissionDeniedErrorMsg:"Please give this app permission to use microphones",minRemaining:"%1$s min left",minuteTimeUnit:"min",mouseWheelSensitivity:"Mouse wheel sensitivity",move:"Move",moveToThisFolder:"Move to This Folder",movingDocument:"Moving file...",nameOrder:"Name Order",newNoteDefaultNameFmt:"%2$d/%3$d/%1$d's Note",noExpiry:"None",fileDestinationNotExist:"File destination does not exist or has been deleted",noJoinedCourseTitle2:"any subjects",noMicFoundErrorMsg:"Could not find a usable mic",noNotesFound:"To get started, create a new note!",noOpenTasks:"No open tasks",inPreparation:"In preparation",title:"Title",titleRedirect:"Redirect | LoiLoNote School",createInPreparation:"Create in preparation",callForAnswersNow:"Call For Answers Now",pleaseChooseTask:"Please choose a task",expiredTasks:"Expired Tasks",allExpiredTasks:"All Expired Tasks",noTasksExpired:"No tasks expired",setTimeAndDateForDeadline:"Set time and date for deadline",callForAnswers:"Call for Answers",notAttending:"Not attending",note:"Note",noteChangedFromOtherDevice:"New changes to this note where made on a different device. Reload to update.",noteConflictDialogTitle:"Note data conflict occurred",noteFetchErrorOccurred:"Error occurred while fetching note data",noteListTitle:"Note List",nowSharingIndicator:"Sending to %1$s%2$s",okay:"OK",deadlineDate:"Deadline",openForSubmissions:"Waiting for answers",openingNote:"Opening note...",openTask:"Open Task",statusSubmitted:"Submitted",openTaskCount:", %1$d other%2$s",openWebPage:"Open Web Page",others:", %1$d others",otherTeachersCourseNotFound:"Other teachers' subject not found",otherTeachersCoursesTitle:"Other teachers' subjects",overwritingNote:"Overwriting note",paste:"Paste",pasteImage:"Paste image",pasteText:"Paste text",pasteCards:"Paste cards",nothingToPaste:"Nothing to paste",pasteCopiedUrl:"Paste copied URL",pdfDefaultFileName:"PDF",pendingFileAndThumbUploadCount:"Uploading %1$d file%3$s and %2$d thumbnail%4$s...",pendingFileUploadCount:"Uploading %1$d file%2$s...",pendingThumbUploadCount:"Uploading %1$d thumbnail%2$s...",photo:"Photo",photoDefaultFileName:"photo",pleaseEnterFolderName:"Enter folder name",preferences:"Preferences",preparingScreenSharing:"Preparing screen sharing...",preparingStudentPresentation:"Preparing for student presentation...",endedCoursesTitle:"Ended subjects",endedCoursesDesc:`Last year's subjects are in the "Ended Subjects" section`,print:"Print",prioritizeThisVersionDesc:"Destroy changes made on other devices and apply the changes made on this device.",prioritizeThisVersionTitle:"Apply local changes",audioRecording:"Recording",redirectSubmissionMessage:"You will be redirected to the submission. If you do not want to be redirected, click the link below.",release:"Remove",releaseAll:"Deselect All",reload:"Reload",rename:"Rename",renamingItem:"Renaming %1$s...",renameNoteDialogMsg:"Rename Note",requestPresentationLine1:"Ask to",requestPresentationLine2:"Present",resetCamera:"Reset Camera",resetLayout:"Reset layout",resolve:"Resolve",retake:"Retake",rotate:"Rotate",failedToRotate:"Failed to rotate card",saveNoteUnderOtherNameDesc:"Overwrite this note applying changes from another device, and save the changes made from this device as a new note.",saveNoteUnderOtherNameTitle:"Save local changes as new note",saveToThisFolder:"Save to This Folder",saving:"Saving...",savingNoteWithOtherName:"Saving note with other name...",schoolLoiloTVUrl:"https://school.loilo.tv/us/web.html",schoolLoiloTVUrlWithExtension:"https://school.loilo.tv/us/web-ext.html",screenLock:"Screen Lock",screensAreLocked:"Screens Locked",screenSharingErrorOccurred:"Error occurred while preparing to share screen",screenSharingTimedOutErrorMsg:"%1$d: Time limit to fetch screen sharing data reached",search:"Search",secondTimeUnit:"sec",secRemaining:"%1$s sec left",seeNextError:"See next error",selection:"Select",selectAll:"Select All",selfStudy:"Self-Study",loiLoNews:"LoiLo News",lessonPlans:"Lesson Plans",send:"Send",sendBack:"Send Back",sendBackAll:"Send Back All",sendBackErrorOccurred:"Error occurred while sending back marks",sendBackIncomplete:"%2$d of %1$d item%3$s were not sent back",sendingBackDocument:"Sending back...",sendingThumbnails:"Sending thumbnails...",sendToDialogTitle:"Select Recipients",sendToIndividuals:"Members",sendToMultiple:"Send (%1$d)",sentBackBy:"Send back by %1$s",serviceStatus:"Service Status",sessionExpiredMsg:"Your session has expired. To continue, please reload this page.",sessionExpiredTitle:"Reload Required",badCsrfTokenTitle:"Invalid CSRF token",badCsrfTokenMsg:"Cross-site request forgery token is invalid. Please log in again.",sharedBy:"Shared by %1$s",shareScreen:"Share Screen",sharing:"Sharing",sharingAnswers:"Sharing Answers",shrink:"Shrink",start:"Start",startAnswerSharing:"Share Answers",startComparing:"Start Comparing",startSharingLine1:"Share",startSharingLine2:"Screen",status403AccessDenied:"Access denied",status404ItemNotFound:"Item does not exist or was deleted",statusFetchErrorOccurred:"Error occurred while fetching data",stoppingScreenSharing:"Stopping screen sharing...",stoppingStudentPresentation:"Stopping student presentation...",stopScreenSharing:"Stop Sharing",student:"Students",enterClassCodeToJoinClass:"\u2193 Enter the class code that your teacher gave you",studentSharing:"Lock Tunnels",subjectNameInputPlaceholder:"Enter subject name...",subjectOrTaskDoesntExist:"Subject or task does not exist",subjectTitle:"Subject",requestContainsInvalidID:"Invalid subject or task ID",submissionName:"%1$s's Submission",submissions:"Tasks",submit:"Submit",submitOrder:"Submission Order",submitted:"submitted",submittedBy:"Submitted by %1$s",submittingDocument:"Submitting",support:"Support",taskExpiryFmt:"mm/dd/yyyy",taskListTitle:"Task List",taskNameDefaultPrefix:"Task ",teacher:"Teachers",teacherLockedScreens:"Screens locked",teacherNoJoinedCourseTitle1:"You are not yet in charge of",text:"Text",textButtonIconClass:"textButtonIconEnUs",textCardMenuBtnImgPath:"/svg/text_en_60x60_margin_less.svg",textDefaultFileName:"text",thinkingTool:"Thinking Tools",thisGroupHasNoSubjects:"This group has no subjects",thisIsAnEmptyFolder:"This is an empty folder",trackpadPinchZoomSensitivity:"Trackpad pinch zoom sensitivity",timeLabel:"Time",timelineTitle:"Timeline",toWhichSubjectDoYouWantToCopy:"To which subject do you want to copy?",toWhichSubjectNotesDoYouWantToSend:"To which subject notes do you want to send?",ttAnalysis:"Analysis",ttButterfly:"Butterfly",ttCandy:"Candy",ttCircles:"Concentric Circles",ttDataChart3:"Data(3)",ttDataChart6:"Data(6)",ttDiamond:"Diamond",ttFishbone:"Fishbone",ttJellyfish:"Jellyfish",ttOneAxis:"1 Axis",ttPlotLeft:"Plot(Left)",ttPlotRight:"Plot(Right)",ttPMI:"PMI/KWL",ttPyramid:"Pyramid",ttRake:"Rake",ttSheet:"Blank",ttTwoAxes:"2 Axes",ttVenn2:"2 Circle Venn",ttVenn3:"3 Circle Venn",ttWChart:"W",ttWebbing:"Webbing",ttXChart:"X",ttYChart:"Y",uncaughtErrorOccurred:"An unexpected error has caused the app to stop. Please view the details of the error and pass them on to our support staff, or reload the app.",viewErrorDetail:"View Details",unexpectedErrorOccurred:"Unexpected error occurred",unknownApiErrorMsg:"An unexpected server error has occurred. Please pardon the inconvenience caused.",unknownError:"Unknown error",unknownUser:"Unknown user",unlockingScreens:"Unlocking screens...",unlockingStudentSharing:"Unlocking student sharing...",unnamedNote:"unnamed node",unsaved:"Unsaved",unsupportedContentType:"This type of content cannot be added to a note",unsupportedFileErrorMsg:'Unsupported file type: "%1$s" Extension: "%2$s"',unsupportedFileErrorWithoutOptMsg:"Unsupported file type",unsupportedNoteFeatErrorMsg:"%1$s may contain features created by a newer version of our app. (version: %2$s, feature codes: %3$s)",unsupportedNoteVerErrorMsg:"%1$s format was created by a newer version of our app and cannot be open. (version: %2$s)",update:"Update",updateCard:"Update Card",updateOrder:"Update Order",updatingSubmission:"Updating submission",uploadingAsset:"Uploading assets...",uploadingDocument:"Uploading documents...",use:"Use",useAll:"Use All",useFormally:"Use",version:"version",verticalWritingBtnLabel:"V",video:"Video",videoDefaultFileName:"video",volume:"Volume",web:"web",webCardExtensionLeadingText:`To easily create Web Cards,
use the LoiLo Web Card browser extension`,webPageSharedText:"Web page shared",webPageSharedTextBy:"%1$s has shared a web page with you",quiz:"Test",quizPresetTest:"Test",quizPresetSurvey:"Questionnaire",author:"Setter",questionCount:"%1$d Question%2$s",result:"Result",answerTest:"Answer",answerQuestionnaire:"Answer",viewTestAnswers:"View Answers",viewQuestionnaireAnswers:"View Answers",answerTestTogether:`Answer
Together`,answerQuestionnaireTogether:`Answer
Together`,creatingTestCard:"Creating Test Card",createdTestCard:"Test Card created",failedCreateTestCard:"Could not create Test Card",reloadForTestCard:"Test Card credentials needs update. To continue, please reload this page.",quizCardMenuBtnImgPath:"/svg/quiz_60x60_margin_less.svg",surveyBtnImgPath:"/svg/survey_60x60_margin_less.svg",testBtnImgPath:"/svg/test_60x60_margin_less.svg",preparingTest:"Preparing test",preparingQuestionnaire:"Preparing questionnaire",webDefaultFileName:"web",didBackupUnsavedChanges:"Unsaved changes will be backed up locally. Currently there are %1$d backed up note%2$s.",willDeleteGroupFromSubject:"Deleting %2$s from %1$s...",year:"%1$d yrs",yourTurnToPresent:"It's your turn to present",zoomTitle:"Zoom",annotation:"teacher's marks",couldntSave:"Could not save %1$s",annotationThumbnail:"thumbnails for teacher's marks",documentThumbnail:"document thumbnails",couldntGetCoursesAttributes:"Could not get subject attributes",languageSettingTitle:"Language Setting",english:"English",japanese:"Japanese",japaneseHira:"Japanese\uFF08Hiragana\uFF09",traditionalChinese:"Traditional Chinese",simplifiedChinese:"Simplified Chinese",drawn:"drawing",inButtonIconClass:"inButtonIconEnUs",outButtonIconClass:"outButtonIconEnUs",thinkingToolHelpPageUrl:"https://n.loilo.tv/en/thinkingtool",couldntGetSubmissions:"Could not get submission data",tasksFeatureIsUnavailable:"Tasks feature is unavailable for groups of %1$d or more users",regularWtFontName:"loilo-NotoSansCJKjp-Regular",boldWtFontName:"loilo-NotoSansCJKjp-Black",uiFontName:"Noto Sans JP",couldntGetSubmissionMessage:"Could not get submission status information",couldntGetSubmissionHistory:"Could not get submission history",appName:"LoiLoNote School",loiloNote:"LoiLoNote",sharedNote:"Shared Note",submissionBox:"Tasks",error:"Error",timeline:"Timeline",status400Msg:"Request format is invalid. This type of error does not ordinarily occur and may indicate a bug.",status403Msg:"Insufficient permission for requested resource",status404Msg:"Resource not found",status500Msg:"A server error occurred. A service-wide outage may be occurring.",defaultErrorMsg:"An unexpected error has occurred. We apologize for the inconvenience caused.",goToTopPage:"Back to the top",viewStatusPage:"View the service status page",login:"Sign in",masterUserLoginUnsupported:"Sign-in via the Quick Sign-in user is not supported",invalidCredentials:"The input school ID, user ID, or password are invalid",invalidIPAddress:"This account is temporarily suspended. Please contact your LoiLoNote School account administrator.",accountLocked:"Your account is locked. Please contact the school's LoiLoNote School administrator",forbiddenIsAdmin:"Sign-in via administrator account is not allowed.",forbiddenIsSSOUser:"Sign-in using school ID, user ID, and password is not allowed for accounts linked to Google services.",couldntLogIn:"Could not sign in",endpoint:"Endpoint",schoolIDLabel:"School",schoolIDPlaceholder:"school ID",schoolIDTitle:'Please enter half-width alphanumeric, "-" (hyphen), or "_" characters.',userIDLabel:"User",userIDPlaceholder:"user ID",userIDTitle:"please use half-width alphanumeric characters only",passwordPlaceholder:"password",passwordTitle:"please use half-width alphanumeric characters only",adminSignInLinkText:"Admin Sign In Page",recommendUpdateTitle:"Please consider updating your browser",recommendUpdateMsg:"Some features of this app may not function correctly",loginContinueBtnText:"Continue",recommendNativeAppTitle:"Please consider using our iOS app",recommendNativeAppMsg:"Your browser limits some of the features offered by our app. For the best possible experience, we recommend using our native app available in the iOS App Store.",unsupportedBrowserTitle:"Your browser is not supported.",unsupportedBrowserMsg:"Please use the latest version of Google Chrome",unknownBrowser:"unknown browser",yourBrowser:"Your browser",supportedVersionsLabel:"Supported versions",otherIOSBrowsers:"Other iOS browsers on iOS v. 13 or higher",signUpPageUrl:`${Zc}/users/sign_up?lang=en`,iosAppStorePageUrl:"https://apps.apple.com/us/app/loilonote-school/id840810729",loginLogoUrl:"/svg/header_logo_en.svg",chromeDownloadPageUrl:"https://www.google.com/intl/en_us/chrome/",needBrowserUpdateMsg:"Please update your browser to the latest version",installBrowser:"Get Latest Version of Chrome",getApp:"Get App from App Store",appStatusPageUrl:"https://status.loilonote.app/en",couldntEncodeDrawnData:"Could not encode pen mark data",accessNotPermitted:"Access Not Permitted",giveClipboardAccess:"Please give this app permission to use the clipboard.",couldntLoadFontFileMsg:"Could not load font file",noMemoryErrorTitle:"Not Enough Memory",noMemoryErrorMsg:"Could not complete some processing, as there is not enough memory. Please reload the app.",couldntChangeTool:"Could not change tools",couldntFetchData:"Could not get data",couldntSetupPdfWorker:"Could not create PDF worker",couldntDeleteAsOtherInCharge:`Subject cannot be deleted as other teachers are using it.
 Do you want to stop being in charge of this subject?`,relatedSubjectsMsg:"*If you stop being in charge of this subject, you will also stop being in charge of the following subjects which share materials.",stopBeginInCharge:"Stop Being In Charge",fileTooBigTitle:"Very Large File",fileTooBigMessage:"Cannot upload individual files larger than 1GB",exceedVideoQuality:`You have selected one or more large video files.
 They may not play smoothly when broadcast to other users.
 Add anyway?`,confirmDeleteTarget:'Delete "%1$s"?',signInWithXXX:"Sign in with %1$s",confirmDisplayAnswers:"Display answers?",submissionListDateShortFmt:"mm/dd hh:MM TT",submissionListDateFullFmt:"yyyy/mm/dd hh:MM TT",couldntExportCard:"Could not export cards",pdf:"PDF",exportingCardAsPdf:"Exporting cards as PDF...",open:"Open",cache:"Cache",submittersAnswer:"%1$s's Answer",previousSomeonesAnswer:"Previous person's answer",nextSomeonesAnswer:"Next person's answer",newerDataExistsOnServer:"Newer version of data already exists on server",qrCodePreviewDialogTitle:"QR Code Found",createWebCard:"Create Web Card",createTextCard:"Create Text Card",qrCodeScannerPrepError:"Could not prepare QR code scanner",textCardPlaceholderImgPath:"/svg/text_en_100x75_margin.svg",qrModeGuidance:"Please position a QR code in the frame",selectAnswers:"Select Answers",selectAnswersCompare:"Select Answers to Compare",selectNoteForAddingMaterials:"To which note would you like to add the received materials?",videoRecordingTimeLimitReached:"This video has reached the maximum allowed length. Recording was stopped.",creatingAttendanceCard:"Creating Attendance Card",createdAttendanceCard:"Attendance Card created",failedCreateAttendanceCard:"Could not create Attendance Card",failedGoogleLoginHelpText:"",failedGoogleLoginHelpLink:"",attendance:"Attendance",attendanceReport:"Attendance Report",attendanceCardCreator:"Creator",attendanceCardEditAndResult:"Edit/Result",preparingAttendance:"Preparing attendance report",clickHereForHelp:"Click here for help",helpPageLinkForQuizCardTest:"https://scrapbox.io/enloilomanual/Test_Card_Instructions",helpPageLinkForQuizCardSurvey:"https://scrapbox.io/enloilomanual/Questionnaire_Card_Instructions",helpPageLinkForAttendanceCardTeacher:"https://scrapbox.io/enloilomanual/Attendance_Card_Instructions",helpPageLinkForAttendanceCardStudent:"https://scrapbox.io/enloilomanual/Attendance_Card_Instructions",loginPageTitle:"Sign in to LoiLoNote School",loginPageDesc:"Welcome to LoiLoNote School. We hope you enjoy your lesson!",penType:"Pen Type",penColor:"Pen Color",highlighterColor:"Highlighter Color",clearAll:"Clear All",penThickness:"Pen Thickness",eraserSize:"Eraser Size",myFolder:"Personal",schoolWideFolder:"School-Wide",districtShared:"%1$s Shared",schoolShared:"School-Wide Shared",classShared:"Subject Shared",teachersOnlyFolder:"Teachers-Only",classFolder:"%1$s",sortCreateDateOrder:"Creation Order",sortUpdateDateOrder:"Update Order",sortUpdateDateOrderForMaterialBox:"Update Order",materialNameOrder:"Name Order",materialFileUpdateDateFolderNameOrder:"Folder Name Order",pushTokenRegistration:"Notification Token Registration",registered:"Completed",unregistered:"Incomplete",citationNotePrefix:"Source",markAllAsRead:"Mark all as read",confirmMarkAllSubmitsAsRead:"Mark all new submissions as read?",markedAllSubmitsAsRead:"All new submissions marked as read",confirmMarkAllRevealAnswersAsRead:"Mark all newly shared answers as read?",markedAllRevealAnswersAsRead:"All newly shared answers marked as read",failedToMarkAllAsRead:"Failed to mark all as read",copied:"Copied",copiedToClipboard:"Copied to clipboard",failedToCopyCards:"Could not copy cards",tooManyCards:"Too many cards",cannotCreateWebCardFromExtension:"Could not create a Web Card.",failedCreateWebCardFromExtension:"Please open the note to which you wish to add a Web Card, then try once again to create a card via the browser extension",failedCreateWebCardFromExtensionTitle:"Please open a note",enableSharedNote:"Create Shared Notes (teachers only)",selectSchool:"Please choose a school to login",showAnnotation:"Show Marks",showSubmission:"Show Submissions",hideAnnotation:"Hide Marks",submissionDeadlineFmt:"Due by hh:MM TT 'on' mm/dd/yyyy",submissionBoxDeletedOrNotExisted:"Task does not exist or was deleted",getToWork:"Get to work!",chooseNoteToWorkIn:"Select note to work in",newTaskCreated:"New task created",standardNote:"Private Note",xIsDeleted:"%1$s deleted",couldntFetchSharedNoteMembers:"Could not get list of members",manageSharedNoteMember:"Manage Members",chooseNoteToManageMember:"Please select the note whose members you wish to manage",chooseNoteToExport:"Select notes to export",chooseNoteToImport:"Select notes to import",couldntEditMember:"Could not edit users",couldntAdd:"Could not add %2$d out of %1$d people",couldntDel:"Could not delete %2$d out of %1$d people",couldntEditMemberWithCount:"Could not edit %2$d out of %1$d people",removedFromSharedNoteMembers:"You have been removed from this shared note's list of members",couldntGetDeviceInfo:"Device information unavailable",changePassword:"Change Password",submitPassword:"Change",currentPasswordIncorrect:"Old password is incorrect",currentPassword:"Old Password",newPassword:"New Password",newPasswordConfirm:"Confirm New Password",couldntChangePassword:"Could not change password",passwordUpdated:"Password changed",hiUser:"Hi %1$s,",setNewPassword:"Please create a password to be used when you next sign in",welcomeToLns:"Welcome to LoiLoNote School!",connectionStatus:"Connection Status",connectedToPushServer:"Connected to notification server",couldntConnectToPushServer:"Notification server connection lost. Some features not available.",reconnectingToPushServer:"Reconnecting to notification server...",pleaseConnectToInternet:"Please connect to the Internet",pleaseConnectToInternetDesc:"Your Internet connection is offline. Please check your connection.",default:"Default",confirmCloseNoteForOtherSubmissionBox:"You are attempting to open an Answer List in a subject different from the currently open note. Close the current note?",confirmCloseNoteForOtherTimeline:"You are attempting to open the Timeline of a subject different from the currently open note. Close the current note?",confirmCloseNoteForOtherCourse:"You are attempting to open the note of a subject different from the currently open note. Close the current note?",selectItemsToExport:"Select items to export",retry:"Retry",exceedNumberOfExportableItemsMsg:"Export cancelled, as too many items where selected",exceedNumberOfExportableHierarchyMsg:"Export cancelled, as selected folders contain too many levels of sub-folders",analyzingDocument:"Reading items",exportingDocument:"Exporting items",couldntExportDocument:"Could not export items",import:"Import",imported:"Imported",export:"Export",underMaintenace:"Currently Under Maintenance",maintenanceNotification:"Notice of Maintenance Schedule",maintenanceScheduled:"Maintenance Scheduled",seeDetail:"More Details Here",endSchedule:"Expected Completion",watchTutorial:"View tutorial",closeTutorialTitle:"End tutorial?",closeTutorialMsg:"You can access these videos here",closeTutorialCheckLabel:"Don't show this again",understood:"OK!",failedPlayTutorial:"Could not start tutorial",importingNotes:"Importing Notes...",exportingNotes:"Exporting Notes...",ipAddressRestricted:"Access from your IP address is not allowed",insufficientPermissionToJoin:"Insufficient permission to join",classHasEnded:"This class has ended",onlyStudentsAllowedToJoin:"Only students allowed to join",graduatesNotAllowedToJoinClass:"Graduates not allowed to join this class",ssoLogin422Msg:"The same %1$s account is connected to multiple LoiLo accounts. To resolve this, please disconnect all but the one account you intend to use to sign in.",ssoLogin422Url:"https://scrapbox.io/enloilomanual/SSO%E3%81%A7%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%97%E3%81%9F%E6%99%82%E3%81%AB%E9%87%8D%E8%A4%87%E7%99%BB%E9%8C%B2%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%A8%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%82%8B",ssoLogin404Msg:"This %1$s account is not connected to a LoiLoNote School account. Please contact your account administrator.",importNotes:"Importing %1$d note%2$s",createCourseAfterUserGroupCreation:"Go on and create a subject",createCourseAfterUserGroupCreationDesc:"Subject entries need to be created on a class-by-class and subject-by-subject basis. Each subject entry corresponds to each subject, such as grammar, math, geography, etc.",insufficientPermission:"Insufficient permission",accessDenied:"Access denied",actionCannotBeCarriedOutOnClosedCourse:"Action cannot be carried out on closed subject",couldNotGetSubmissionAnswers:"Could not get answers",folderWithThisNameAlreadyExists:"A folder with this name already exists",importDocument:"Importing files",couldntImportDocument:"Could not import files",folderForImportedItemsWillBeCreated:"Folder for imported items will be created",save:"Save",administrator:"Administrator",owner:"Owner",reuse:"Reuse",reuseThisTestCard:"Reuse This Test Card",reuseThisAttendanceCard:"Reuse This Attendance Card",pleaseWaitForMaintenanceEnd:"Please wait for a while until the maintenance is finished.",uploadingXXX:"Uploading %1$s...",upload:"Upload",experimentalFeatures:"Experimental Features",folderCannotBeUploaded:"Folders cannot be uploaded.",filesNoExtCannotBeUploaded:"Files with no file extension cannot be uploaded.",fileWithInvalidNameContained:"Contains a file with an invalid name.",insufficientPermissionToDocumentGroup:"You do not have permission to write to the folder.",newSharedNote:"New Shared Note",convertToSharedNote:"Convert to Shared Note",chooseNoteToShare:"Choose a note to share",chooseUsersToBeShared:"Choose users to be a member",shareXXX:"Share %1$s",confirmShareNote:"A Shared Note cannot be reverted to a Regular Note. If the app does not support shared notes, it will not appear in the list, is that okay?",teacherNoClosedCourseTitle:"You were not in charge of any past subjects",studentNoClosedCourseTitle:"You did not join any past subjects",pasteTips:"Paste text or an image copied from the web",noMembersInGroup:"No students have joined the class.",showCodeToInviteStudents:"Display the class code and have students enter it",members:"members",saved:"Saved",collectCard:"Collect Card",collectedCard:"Collected Cards",collectCardDialogTitle:"Collect broken cards?",collect:"Collect",confirmCollectCardMessage:"There seems to be a very large card or a card located far away from center. You can fix the note by collecting %1$d cards in the center.",completeCollectCardMessage:"The collection of large cards or cards located far away is completed.",sentToNote:'Sent to "%1$s"',myNote:"My Note",searchNote:"Search Notes",searchMaterial:"Search Materials",enableSearch:"Enable Search",noMatchesFound:"No matches found",endSearch:"End of search",searchResult:"Search results",textPointerIconPath:"/svg/text_circle_en.svg",download:"Download",downloadAndUploadLater:"You can download it and re-upload it later.",reloading:"Reloading...",graduateMsg:'Congratulations on your graduation! Previously attended subjects are in the "Ended Subjects" section.',sharedNoteProtocolVersionErrorMsg:"Your app does not support some features of shared notes. Reload to update.",couldNotConnectSharedNote:"Could not connect to shared note",failedToSaveDataToServer:`Failed to upload data to server.
Do you want to force close?`,recordingSettingTitle:"Audio and video recordings",enableAudioNoiseReduction:"Enable audio noise reduction",loadingFailed:"Loading failed",decodingFailed:"Decoding failed. ",browserCannotReadTheVideo:"The video is in a format that the browser cannot read",browserCannotReadTheAudio:"The audio is in a format that the browser cannot read",networkError:"Network error",loadingInterrupted:"Loading interrupted",couldntEditNote:"Could not edit note",noteIsReadonly:"This note is read-only",notConnectedToSharedNote:"Not connected to shared note",materialBoxAccessibleMessageForTeacher:"This folder is also accessible to students.",trashBox:"Trash Box",restore:"Restore",selectItemsToRestore:"Select items to restore",restoreToThisFolder:"Restore to This Folder.",restoringDocument:"Restoring File...",invalidDocumentRestoreDetails:"File folder, or restore location invalid",couldntRestoreDocument:"Could not restore to the folder",materialTrashBoxHeaderMessage:"After 30days in trash box, it will be permanently deleted",notShared:"Not Shared",sharedInManageable:"Manage",sharedInWritable:"Writable",sharedInViewOnly:"View Only",sharedNoteMembers:"Shared Members",settings:"Settings",sharedNoteSettings:"Share Settings",couldNotChangeSharedNoteSettings:"Could not change share settings",change:"Change",noteName:"Name",sharedRange:"Shared Range",allTeachers:"All Teachers",add:"Add",execute:"Execute",javaScriptRequired:"JavaScript is disabled in your browser. To use LoiLoNote, please set JavaScript enabled in your browser.",selectQuizSharingMode:"Select Answer Mode",quizSharingModeNormal:"Normal",quizSharingModeGame:"Game Mode(\u03B2)",reconnectingToSharedNote:"Reconnecting to shared note..."};var bve=["en-US","ja-JP","ja-Hira","zh-Hant","zh-Hans"];function hK(r){return bve.some(e=&gt;e===r)}var fK={"ja-JP":"japanese","ja-Hira":"japaneseHira","en-US":"english","zh-Hant":"traditionalChinese","zh-Hans":"simplifiedChinese"};function mK(r){switch(r){case"ja-JP":case"ja-Hira":return r;case"zh-Hant":return"zh-TW";default:return"en-US"}}function gK(r){switch(r){case"en-US":return"en";case"zh-Hant":return"zh-tw";case"ja-JP":return"ja";case"ja-Hira":return"ja-Hira";default:return"en"}}function vK(r){return`https://status.loilonote.app/${(t=&gt;{switch(t){case"ja-JP":case"ja-Hira":return"ja";case"en-US":return"en";default:return t}})(r)}`}function Hm(r){switch(r){case"en-US":return"en";case"zh-Hant":return"zh-tw";case"zh-Hans":return"zh-cn";case"ja-JP":return"ja";case"ja-Hira":return"ja-Hira";default:return"en"}}function x4(r,e){var o,i;if(!e)return(o={"en-US":"en","ja-JP":"jp","zh-Hant":"hk","zh-Hans":"hk","ja-Hira":"jp"}[r])!=null?o:"en";let t=e.toLocaleLowerCase();return(i={jp:"jp",tw:"tw",hk:"hk",cn:"hk",mo:"hk"}[t])!=null?i:"en"}function bK(r,e){let t=x4(r,e);return t==="jp"?"https://help.loilonote.app/":`https://scrapbox.io/${t}loilots/`}function yK(r){switch(r){case"ja-Hira":return"ja-JP";case"zh-Hant":return"zh-cmn-Hant";case"zh-Hans":return"zh-cmn-Hans";default:return r}}var yve="https://help.loilonote.app/--6351e517302115001d40cd3d",Cve="https://help.loilonote.app/--6351e58f067d99001db9f4fc",Sve="https://scrapbox.io/enloilots/News",xve="https://scrapbox.io/enloilots/News_for_Students",wve="https://scrapbox.io/hkloilots/%E9%80%9A%E7%9F%A5",Tve="https://scrapbox.io/hkloilots/%E7%B5%A6%E5%AD%B8%E7%94%9F%E7%9A%84%E9%80%9A%E7%9F%A5",Dve="https://scrapbox.io/twloilots/%E9%80%9A%E7%9F%A5",kve="https://scrapbox.io/twloilots/%E7%B5%A6%E5%AD%B8%E7%94%9F%E7%9A%84%E9%80%9A%E7%9F%A5";function w4(r,e,t){let n=x4(r,e);return n==="jp"?t?yve:Cve:n==="hk"?t?wve:Tve:n==="tw"?t?Dve:kve:t?Sve:xve}function CK(r,e){let t=x4(r,e);return t==="jp"?"https://help.loilonote.app/--602630326cb271001c1f19d7":t==="hk"?"https://scrapbox.io/hkloilots/%E3%80%90%E6%95%99%E6%A1%88%E5%88%86%E4%BA%AB%E3%80%91Index":t==="tw"?"https://scrapbox.io/twloilots/%E3%80%90%E6%95%99%E6%A1%88%E5%88%86%E4%BA%AB%E3%80%91Index":"https://scrapbox.io/enloilots/%3CLesson_Plan%3E_Index"}function SK(r){switch(r){case"ja-JP":case"ja-Hira":return"ja";default:return r}}var he=class{constructor(e="ja-JP"){this._locale=e}get locale(){return this._locale}static get(){let e=this.instance;return e||(e=new he,this.instance=e),this.instance}setLocale(e){this._locale=e}static resolve(e){return e==="ja-JP"?lK:e==="ja-Hira"?uK:e==="zh-Hant"?dK:e==="zh-Hans"?cK:pK}get strings(){return he.resolve(this._locale)}pluralSafeSuffix(e){return this.locale==="en-US"&amp;&amp;e&gt;1?"s":""}enumerate(e){return e.length===0?"":e.length===1?e[0]:e.join(this.strings.enumerationWithReadingPoint)}and(e,t){return e+` ${this.strings.and} `+t}};var Gm=(0,mE.createContext)(he.get().strings);function pe(){return(0,mE.useContext)(Gm)}var xK=Gm.Provider;var uo=class extends Error{constructor(e="not enough memory"){super(e)}},ep=class extends Error{constructor(e="could not load font"){super(e)}},sr=class extends Error{constructor(t,n){super(n);this.status=t;if(n)try{this.json=JSON.parse(n)}catch(o){}}asJson(){return this.json}isBadCSRFToken(){var t;return this.status===403&amp;&amp;((t=this.json)==null?void 0:t.code)==="EBADCSRFTOKEN"}isUnderMaintenance(){var t;return this.status===503&amp;&amp;((t=this.json)==null?void 0:t.maintenance)===!0}},tp=class extends Error{constructor(e){super(e)}},co=class extends Error{constructor(e){super(e)}},Oh=class extends Error{};function iu(r,e){return r instanceof Error?r:new Error(e)}function vE(r){let e=he.get().strings;if(r instanceof ep)return{title:e.couldntLoadFontFileMsg,okMessage:e.reload,color:"error",onOk(){return location.reload(),new Promise(()=&gt;{})}};if(r instanceof uo)return{title:e.noMemoryErrorTitle,message:e.noMemoryErrorMsg,okMessage:e.reload,color:"error",async onOk(){return location.reload(),new Promise(()=&gt;{})}};if(r instanceof sr){if(r.status===401)return{title:e.sessionExpiredTitle,message:e.sessionExpiredMsg,okMessage:e.reload,color:"info",onOk:async()=&gt;new Promise(()=&gt;{let t=new URL(location.href);t.searchParams.set("refresh","1"),location.assign(t.href)})};if(r.isBadCSRFToken())return{title:e.badCsrfTokenTitle,message:e.badCsrfTokenMsg,okMessage:e.logout,color:"error",onOk(){location.href="/logout"}}}return{title:e.errorOccurred,message:e.uncaughtErrorOccurred,okMessage:e.reload,cancelMessage:e.logout,color:"error",onCancel:()=&gt;{location.href="/logout"},async onOk(){location.assign(location.href)},unknownError:r}}var Wm=({title:r,cancelMessage:e,onCancel:t,message:n,okMessage:o,onOk:i,unknownError:s,color:a,buttonColor:l="normal"})=&gt;{var v,b;let u=(C,x)=&gt;()=&gt;{x(!0);let y=C();y instanceof Promise?y.finally(()=&gt;x(!1)):x(!1)},[d,c]=(0,gE.useState)(!1),[p,h]=(0,gE.useState)(!1),f="";s&amp;&amp;(s.id&amp;&amp;(f+=`id: ${s.id}
`),f+=(b=(v=s.stack)!=null?v:s.message)!=null?b:"");let m=pe(),g;return n&amp;&amp;(g=Array.isArray(n)?n:[n]),Rn.default.createElement(h0,null,Rn.default.createElement("div",{className:"uiDialogContent"},Rn.default.createElement("div",{className:"uiDialogBar","data-color":a}),Rn.default.createElement("div",{className:"uiDialogTitle"},r),(g||s)&amp;&amp;Rn.default.createElement("div",{className:"uiDialogMessage"},g&amp;&amp;g.map((C,x)=&gt;Rn.default.createElement("div",{className:"uiDialogSection",key:x},C)),s&amp;&amp;Rn.default.createElement("div",{className:"uiDialogSection"},Rn.default.createElement(Pve,{openTitle:m.viewErrorDetail,closeTitle:m.close},Rn.default.createElement("textarea",{defaultValue:f,rows:4,style:{width:"100%",marginTop:15}})))),Rn.default.createElement(la,null,e&amp;&amp;t&amp;&amp;Rn.default.createElement(Ui,{className:l==="normal"?"uiDialogCancelButton":"",disabled:p,onClick:u(t,h)},e),Rn.default.createElement(Ui,{className:l==="inverse"?"uiDialogCancelButton":"",disabled:d,onClick:u(i,c)},o))))},Pve=({openTitle:r,closeTitle:e,children:t})=&gt;{let[n,o]=(0,gE.useState)(!1);return Rn.default.createElement("div",null,Rn.default.createElement("p",{style:{textAlign:"center"}},Rn.default.createElement("a",{href:"#",onClick:i=&gt;{i.preventDefault(),i.stopPropagation(),o(!n)}},n?e:r)),n&amp;&amp;t)},$m=({children:r})=&gt;Array.isArray(r)?Rn.default.createElement(h0,null,Rn.default.createElement("div",{style:{flex:1}}),r,Rn.default.createElement("div",{style:{flex:1}})):Rn.default.createElement(h0,null,r),wK=({children:r})=&gt;Rn.default.createElement("div",{className:"uiDialogContent"},Rn.default.createElement("div",{className:"uiDialogTitle"},r),Rn.default.createElement(_t,null)),Vm=({title:r,type:e="primary",children:t})=&gt;Rn.default.createElement(h0,null,Rn.default.createElement("div",{className:"uiDialogContent"},Rn.default.createElement("div",{className:"uiDialogBar",style:{backgroundColor:e==="primary"?"#0075f6":"#FF5E4D"}}),Rn.default.createElement("div",{className:"uiDialogTitle"},r),Rn.default.createElement("div",null,t))),TK=({children:r})=&gt;Rn.default.createElement("div",{className:"uiDialogBody"},r),la=({children:r})=&gt;Rn.default.createElement("div",{className:"uiDialogButtonWrapper"},r),Ui=({children:r,className:e,...t})=&gt;Rn.default.createElement(Gt,{className:"uiDialogButton "+e,...t},r),_t=({height:r=3,style:e={},absolute:t})=&gt;(t&amp;&amp;(e.position="absolute",t==="top"?e.top=0:e.bottom=0,e.left=0),Rn.default.createElement("div",{className:"uiDialogLoadingBarWrapper",style:e},Rn.default.createElement("div",{className:"uiDialogLoadingBarContent",style:{height:r}}))),h0=({children:r})=&gt;Rn.default.createElement("div",{className:"uiDialog",onDragOver:n=&gt;{n.preventDefault()},onDrop:n=&gt;{n.preventDefault()}},r);var nt=class{static user(e){return`users/${e}`}static courses(){return"courses"}static otherTeacherCourses(){return"other-teachers"}static closedYears(){return"closed-years"}static closedCoursesByYear(e){return`closed-courses/${e}`}static userGroupCode(e){return`user-group-code/${e}`}static userGroupAttendances(e){return`user-group-attendances/${e}`}static notes(e){return`courses/${e}/notes`}static noteInfo(e){return`notes/${e}/info`}static courseUserStatus(e){return`courses/${e}/user-statuses`}static courseAttributes(e){return`courses/${e}`}static courseTemporaryTeachers(e){return`courses/${e}/temporary-teachers`}static submissionAnswers(e,t){return`courses/${e}/submissions/${t}/answers`}static submissions(e){return`courses/${e}/submissions`}static submission(e,t){return`courses/${e}/submission/${t}`}static submissionHistory(e){let{courseId:t,submissionNumber:n,authorId:o}=e;return`courses/${t}/submissions/${n}/authorId/${o}`}static timelineEntries(e){return`timeline-entries/${e}`}static mobilePushes(){return"mobile-pushes"}static receiverStatus(e){return`courses/${e}/receiverStatus`}static sharedNotes(e){return`courses/${e}/sharedNotes/${e}`}static sharedNote(e){return`sharedNotes/${e}`}static sharedNoteIndividualMembers(e){return`sharedNotes/${e}/individual-members`}static tutorial(){return"tutorial"}static prepareForAddCourse(){return"prepare-for-add-course"}};function bE(r,e,t){if(r.length===0)return;let n=0,o=Math.abs(t(r[0],e));for(let i=1;i&lt;r.length;i++){let s=Math.abs(t(r[i],e));o&gt;s&amp;&amp;(n=i,o=s)}return n}function f0(r,e){let t=[...r];for(let n of r)if(e(n)){let o=t.indexOf(n);t.splice(o,1)}return t}function yE(r){return Array.from(new Set(r).values())}function DK(r,e){if(r.length!==e.length)return!1;for(let t=0;t&lt;r.length;t++)if(r[t]!==e[t])return!1;return!0}function Lr(r,e){let t=[];for(let n=r;n&lt;r+e;n++)t.push(n);return t}function xb(r){let e=Array();for(let t of r)e=e.concat(t);return e}function kK(r,e){Ee(e&gt;0&amp;&amp;Number.isInteger(e),"step must be natural");let t=[];for(let n=0;n&lt;r.length;n+=e){let o=Math.min(n+e,r.length),i=r.slice(n,o);for(;i.length&lt;e;)i.push(null);t.push(i)}return t}function PK(r,e){let t=[],n=0;for(let o of r){let i=e(o,n++);i!==void 0&amp;&amp;t.push(i)}return t}function T4(r){let e="/_/";return r?tc(e):e}function m1(r,e){let t=`/_/${r}`;return e?tc(t):t}function m0(r,e,t){let n=`/_/${r}/${e}`;return t?tc(n):n}function g0(r,e,t,n){let o=`/_/${r}/${e}/${t}`;return n?tc(o):o}function CE(r,e){let t=`/_/${r}/submissions`;return e?tc(t):t}function SE(r,e,t){let n=`/_/${r}/submissions/${e}`;return t?tc(n):n}function xE({courseId:r,submissionNumber:e,authorKey:t,generation:n,answerId:o,pageIndex:i,zoomCardId:s,twa:a}){let l;return s?l=`/_/${r}/submissions/${e}/${t}/${n}/${o}/${i}/${s}`:l=`/_/${r}/submissions/${e}/${t}/${n}/${o}/${i}`,a?tc(l):l}function wE(r,e){let t=`/_/${r}/timeline`;return e?tc(t):t}function D4(r,e,t){let n=`/_/${r}/timeline/${e}`;return t?tc(n):n}function tc(r){let e=new URL(r,location.href),t=new URLSearchParams(e.search);return t.has("twa")?r:(t.append("twa","true"),`${e.pathname}?${t.toString()}`)}function g1(r,e){for(let t in e)if(e.hasOwnProperty(t)){let n=r[t],o=e[t];AK(n)&amp;&amp;AK(o)?r[t]=g1(n,o):r[t]=o}return r}function TE(r){return JSON.parse(JSON.stringify(r))}function AK(r){return typeof r=="object"&amp;&amp;typeof(r==null?void 0:r.constructor)=="function"&amp;&amp;r.constructor.name==="Object"}function k4(r,e,t,n=!0){let o=e.split("."),i=o.pop(),s=r,a,l="";for(;(a=o.shift())&amp;&amp;(l+=`.${a}`);){if(!s.hasOwnProperty(a))if(n)s[a]={};else throw new Error(`property missing: ${l} not defined.`);s=s[a]}if(!s)throw new Error(`property missing: ${l} not defined.`);s[i]=t}function IK(r,e){let t=e.split("."),n=t.pop(),o,i=r;for(;o=t.shift();)i=i[o];return delete i[n]}function rn(r){let e=Object.create({});for(let[t,n]of r)e.hasOwnProperty(t)||(e[t]=n);return e}function dn(r){let[e,t,n,o]=_K(r);return nn({a:e,r:t,g:n,b:o})}function mt(r){let[e,t,n,o]=_K(r);return nn({a:o,r:e,g:t,b:n})}function cn(){return nn({a:255,g:255,b:255,r:255})}function To(){return nn({a:255,g:0,b:0,r:0})}function nn(r=To()){let e=r.a,t=r.r,n=r.g,o=r.b;function i(){e=it(Math.round(e),0,255),t=it(Math.round(t),0,255),n=it(Math.round(n),0,255),o=it(Math.round(o),0,255)}function s(m){return t===m.r&amp;&amp;n===m.g&amp;&amp;o===m.b&amp;&amp;ru(e,m.a)}function a(){return t===255&amp;&amp;n===255&amp;&amp;o===255}function l(){return e===0}function u(){return i(),"#"+[e,t,n,o].map(EK).join("")}function d(){return i(),"#"+[t,n,o,e].map(EK).join("")}function c(){return i(),`rgba(${t}, ${n}, ${o}, ${e/255})`}function p(){return i(),{r:t,g:n,b:o,a:e}}function h(){return{r:t/255,g:n/255,b:o/255,a:e/255}}function f(){return nn({a:e,r:t,g:n,b:o})}return i(),{a:e,r:t,g:n,b:o,isWhite:a,isTransparent:l,toARGBHex:u,toRGBAHex:d,toCSSRGBA:c,toRGBA:p,equals:s,normalized:h,freeze:f}}var Ave=/^#[0-9a-f]{8}$/i;function _K(r){if(!r.match(Ave))throw new Error("invalid format:"+r);let e=parseInt(r.slice(1,3),16),t=parseInt(r.slice(3,5),16),n=parseInt(r.slice(5,7),16),o=parseInt(r.slice(7,9),16);return[e,t,n,o]}function EK(r){let e=r.toString(16);return e.length&lt;2?"0"+e:e.toUpperCase()}function FK(r,e){let t=r.r-e.r,n=r.g-e.g,o=r.b-e.b;return Math.sqrt(t*t+n*n+o*o)}function wb(r){let[e,t,n,o]=[r.r/255,r.g/255,r.b/255,r.a],i=Math.max(e,t,n),s=Math.min(e,t,n),a=i-s;a&gt;0&amp;&amp;(i===e?(a=(t-n)/a,a&lt;0&amp;&amp;(a+=6)):i===t?a=2+(n-e)/a:a=4+(e-t)/a),a=a/6;let l=i-s;return i&gt;0&amp;&amp;(l=l/i),{h:a,s:l,v:i,a:o}}function MK(r){let{h:e,s:t,v:n,a:o}=r,i=n,s=n,a=n;if(t&gt;0){let l=e*6,u=Math.floor(l),d=l-u;switch(u){case 0:s*=1-t*(1-d),a*=1-t;break;case 1:i*=1-t*d,a*=1-t;break;case 2:i*=1-t,a*=1-t*(1-d);break;case 3:i*=1-t,s*=1-t*d;break;case 4:i*=1-t*(1-d),s*=1-t;break;case 5:s*=1-t,a*=1-t*d;break}}return i=it(Math.round(i*255),0,255),s=it(Math.round(s*255),0,255),a=it(Math.round(a*255),0,255),{r:i,g:s,b:a,a:o}}function P4(r){let e=wb(r),t=.6;return e.v&lt;t||e.a===0}var is=mt("#ffffff00").freeze(),NK=mt("#7FA0AFFF").freeze(),BK=mt("#ffffff7f").freeze(),RK=mt("#19335eff").freeze(),LK=mt("#f9f8f4ff").freeze(),DE=mt("#596782ff").freeze(),OK=mt("#BBBFBDFF").freeze(),v0=mt("#12264dff").freeze(),A4=mt("#4B4B4BFF").freeze(),I4=mt("#448AFFFF").freeze(),E4=mt("#2E647C99").freeze(),UK=mt("#FFFF00FF").freeze(),zK=mt("#88FBC4FF").freeze(),e4e=mt("#00000020").freeze();var XK=oe(jK());function ss(){let r=n=&gt;{},e=n=&gt;{},t=new Promise((n,o)=&gt;{r=n,e=o});return Object.assign(t,{resolve:r,reject:e})}var Km=class{constructor(e){this.command=e}},nc=class{constructor(e){this.params=e}},np=class{constructor(e,t){this.position=e;this.finished=t}};var Db=class{constructor(e,t){this.toolType=e;this.startPosition=t}},qm=class{constructor(e,t){this.toolType=e;this.position=t}},b0=class{constructor(e,t,n){this.cardId=e;this.sheetType=t;this.position=n}},Dl=class{constructor(e){this.params=e}},Yu=class{constructor(e,t){this.startPosition=e;this.webCardContentBase=t}},Ym=class{constructor(e,t){this.position=e;this.webCardContentBase=t}},y0=class{constructor(e,t){this.startPosition=e;this.file=t}},C0=class{constructor(e,t){this.startPosition=e;this.quizContentBase=t}},S0=class{constructor(e,t){this.startPosition=e;this.contentBase=t}},Uh=class{constructor(e,t){this.startPosition=t;this.files=[];for(let n=0;n&lt;e.length;n++)this.files[n]=e[n]}},op=class{constructor(e,t){this.position=t;this.files=[];for(let n=0;n&lt;e.length;n++)this.files[n]=e[n]}},Xm=class{constructor(e,t){this.position=t;this.files=[];this.files=[...e]}},x0=class{constructor(e,t){this.url=e;this.startPosition=t;this.type="image/jpeg"}},w0=class{constructor(e,t,n){this.url=e;this.type=t;this.startPosition=n}},T0=class{constructor(e){this.creatorCardId=e.creatorCardId,this.card=e.card,this.type=e.insertType,this.imageFile=e.imageFile,this.url=e.url}},D0=class{constructor(e){this.creatorCardId=e.creatorCardId,this.card=e.card,this.type=e.insertType,this.videoFile=e.videoFile,this.url=e.url}},k0=class{constructor(e,t,n,o){this.creatorCardId=e;this.sheetType=t;this.card=n;this.type=o}},P0=class{constructor(e,t,n,o){this.original=e;this.file=t;this.type=n;this.cardId=o}},ip=class{constructor(e,t,n,o,i){this.cardId=e;this.position=t;this.url=n;this.title=o;this.thumbnailFile=i}},b1=class{constructor(e,t,n,o){this.cardId=e;this.url=t;this.title=n;this.thumbnailFile=o}},A0=class{constructor(e,t,n,o){this.cardId=e;this.created=t;this.thumbnail=n;this.type=o}},y1=class{constructor(e,t){this.cardId=e;this.file=t}},kb=class{constructor(e,t){this.head=e;this.startPosition=t}},I0=class{constructor(e,t){this.head=e;this.position=t}},E0=class{constructor(e,t,n){this.parentCardId=e;this.head=t;this.position=n}},_0=class{constructor(e,t){this.documentInfoList=e;this.startPosition=t}},Pb=class{constructor(e,t){this.documentInfo=e;this.startPosition=t}},Ab=class{constructor(e,t){this.documentInfo=e;this.position=t}},Xu=class{constructor(e,t,n){this.cardId=e;this.target=t;this.isRootCard=n}},sp=class{constructor(e,t){this.cardId=e;this.isRootCard=t}},F0=class{constructor(e,t){this.cardId=e;this.isRootCard=t}},M0=class{constructor(e,t){this.srcId=e;this.type=t}},zh=class{constructor(e,t,n){this.command=e;this.effect=t;this.byOtherUserId=n}},oc=class{constructor(e){var t,n;this.cardId=e.cardId,this.color=e.color,this.backcolor=e.backcolor,this.position=e.position,this.unmodified=(t=e.unmodified)!=null?t:!1,this.text=(n=e.text)!=null?n:""}},Qm=class{constructor(e){this.creatorCardId=e.cardId,this.card=e.card,this.type=e.type}},N4=new Map;function Ib(r,e){N4.set(r,e)}function C1(r){return N4.get(r)}function KK(){N4.clear()}function B4(r){return YK(r,["materialBox","submitButton","sendButton","desktopTrashBox"])}function qK(r){return YK(r,["editorTrashBox"])}function YK(r,e){for(let t of e){let n=C1(t);if(!n)continue;let[o,i]=[r.x/window.devicePixelRatio,r.y/window.devicePixelRatio];if(Pn(n,{x:o,y:i}))return t}}function ic(){let r=new Map,e=0;function t(s){for(let[a,l]of r)try{l(s)}catch(u){fe.error(u)}}function n(s){t(new Km(s))}function o(s){let a=e++;return r.set(a,s),{close(){r.delete(a)}}}function i(){return r.size}return{publish:t,emit:n,subscribe:o,subscribers:i}}var R4=ic();function ap(r){return R4.subscribe(r)}function At(r){R4.publish(r)}function We(r){R4.emit(r)}function L4(r,...e){let t;for(let o of e){let i=o(r);!i||(t?t=g1(t,i):t=i)}return t==null?r:(fe.log("applyChange",t),{...(0,XK.default)(r,t)})}function N0(r){let e=!1,t=[],n=!1,o=ic(),i=(...f)=&gt;{if(n){fe.warn("store is hanging. all reducers are ignored");return}if(e){t.push(f);return}e=!0;try{let g=L4(p,...f);g!=p&amp;&amp;h({...g,reduce:i,waitUntil:l,subscribe:s,setHanged:a})}catch(g){throw g}finally{e=!1}let m=t;t=[];for(let g of m)i(...g)},s=f=&gt;o.subscribe(f),a=f=&gt;{n=f},l=(...f)=&gt;{try{if(u(p,f))return Promise.resolve()}catch(g){return Promise.reject(g)}let m=ss();return c.push([f,m]),m},u=(f,m)=&gt;!m.some(g=&gt;!g(f)),d=f=&gt;{for(let m=0;m&lt;c.length;m++){let[g,v]=c[m];try{if(u(f,g))v.resolve();else continue}catch(b){v.reject(b)}c.splice(m,1),m--}},c=[],p={...r,reduce:i,waitUntil:l,setHanged:a,subscribe:s},h=f=&gt;{p=f,o.publish(f),d(p)};return p}var Eb=class{static subscribe(e){Eb.subs.push(e)}static reduce(e){for(let t of Eb.subs)try{t(e)}catch(n){fe.error(n)}}static shouldHandle(e){if(e instanceof sr){if(e.status===401)return!0;if(e.isBadCSRFToken())return!0}else{if(e instanceof uo)return!0;if(e instanceof ep)return!0}return!1}static handleError(e){if(Eb.shouldHandle(e)){Eb.reduce(PE(e));return}throw e}static catchError(e){try{return Eb.handleError(e),!0}catch(t){return!1}}},Je=Eb;Je.subs=[];var QK=new Map([["image/gif",".gif"],["image/png",".png"],["image/jpeg",".jpg"],["image/webp",".webp"]]),AE=new Map([[".gif","image/gif"],[".png","image/png"],[".jpg","image/jpeg"],[".jpeg","image/jpeg"],[".webp","image/webp"]]),IE=new Map([["video/mp4",".mp4"],["video/quicktime",".mov"],["video/webm",".webm"]]),JK=new Map([[".mp4","video/mp4"],[".mov","video/quicktime"],[".qt","video/quicktime"],[".webm","video/webm"]]),B0=new Map([["audio/mp3",".mp3"],["audio/mpeg",".mp3"],["audio/aac",".aac"],["audio/vnd.dlna.adts",".aac"],["audio/x-m4a",".m4a"],["audio/mp4",".m4a"],["audio/wav",".wav"],["audio/webm",".weba"]]),ZK=new Map([[".mp3","audio/mp3"],[".aac","audio/aac"],[".m4a","audio/x-m4a"],[".wav","audio/wav"],[".weba","audio/webm"]]),Zo=new Map([["application/pdf",".pdf"],...QK.entries(),...B0.entries(),...IE.entries()]),R0=new Map([[".pdf","application/pdf"],...AE.entries(),...ZK.entries(),...JK.entries()]),EE="text/plain",Jm="text/html",S1="image/png";function x1(r){return QK.has(r)}function Za(r){return ZK.has(r.toLowerCase())}function _E(r){return B0.has(r)}function L0(r){return AE.has(r.toLowerCase())}function Hh(r){return JK.has(r.toLowerCase())}function Qu(r){return IE.has(r)}function eq(r){return r==="application/pdf"}function O0(r){return r.toLowerCase()===".pdf"}function O4(r){return r.toLowerCase()===".webm"}function sc(r){let e=r==null?void 0:r.toLowerCase();return e===".webm"||e===".weba"}function _b(r){return r.toLowerCase()===".lnfragment"}var Gh="image/jpeg";function U0(r){return L0(r)||Hh(r)||Za(r)||O0(r)}function tq(r){let e=Zo.get(r);return e?U0(e):!1}var fr=class{static create(e,t){let n=document.createElement("canvas");return e!=null&amp;&amp;(typeof e=="number"?n.width=e:(n.width=e.width,n.height=e.height)),t!=null&amp;&amp;(n.height=t),this.canvases.set(n,!0),Object.assign(n,{getContext2dForce(){let o=n.getContext("2d");if(!o)throw new uo;return o}})}};fr.canvases=new WeakMap;function rq(r,e,t,n,o,i){let s=Math.min(n,o)/2,a=Math.min(i,s);r.moveTo(e+n-a,t),r.arcTo(e+n,t,e+n,t+a,a),r.lineTo(e+n,t+o-a),r.arcTo(e+n,t+o,e+n-a,t+o,a),r.lineTo(e+a,t+o),r.arcTo(e,t+o,e,t+o-a,a),r.lineTo(e,t+a),r.arcTo(e,t,e+a,t,a),r.closePath()}function Wh(r){let e={video:!1,audio:!1};if(r.video===!0)e.video=!0;else if(r.video){let{resolution:t,deviceId:n}=r.video,o=n?{deviceId:n}:{facingMode:"environment"};e.video={...o,...t.asLandscape()}}if(r.audio===!0)e.audio=!0;else if(r.audio){let{enableNoiseReduction:t,deviceId:n}=r.audio;e.audio={...n&amp;&amp;{deviceId:n},sampleRate:44100,channelCount:2,noiseSuppression:t,echoCancellation:t}}return e}function nq(){return navigator.mediaDevices!==void 0&amp;&amp;navigator.mediaDevices.getUserMedia!==void 0}function ME(r){let e="getCapabilities";return e in r&amp;&amp;typeof r[e]=="function"}function oq(r,e){return new Promise((t,n)=&gt;{try{r.pause();let{srcObject:o}=r;if(!(o instanceof MediaStream))throw new Error("srcObject is not instance of MediaStream");let i=o.getVideoTracks()[0],{width:s,height:a}=i.getSettings();if(!s||!a)throw new Error("invalid video track dimensions");let l=e%2===0?fr.create(s,a):fr.create(a,s),u=l.getContext2dForce();u.translate(l.width/2,l.height/2),u.rotate(Math.PI/2*e),u.drawImage(r,-s/2,-a/2),l.toBlob(d=&gt;{if(!d){n(new Error("toBlob failed"));return}try{let c=URL.createObjectURL(d);t(c)}catch(c){n(c)}},Gh)}catch(o){n(o)}})}var Fb=class extends Error{constructor(t){super(t==null?void 0:t.message);this.error=t;this.name="AudioVideoNotAllowedError"}},FE=class{constructor(){this.isInitialized=!1}async initialize(){(await navigator.mediaDevices.getUserMedia(Wh({video:!0}))).getTracks().forEach(n=&gt;n.stop()),(await navigator.mediaDevices.getUserMedia(Wh({video:!0,audio:!0})).catch(n=&gt;{throw new Fb(n.message)})).getTracks().forEach(n=&gt;n.stop())}async getReport(){this.isInitialized||(this.isInitialized=!0,await this.initialize());let e=await navigator.mediaDevices.enumerateDevices(),t=[],n=[];for(let o of e){if(o.deviceId==="default")continue;let i=o.kind;i==="audioinput"?t.push(o):i==="videoinput"&amp;&amp;n.push(o)}if(n.length&lt;1)throw new Error("No video devices found.");return{video:n,audio:t}}};var kl=class{constructor(e,t){this.width=e;this.height=t}static findGreatestCommonDivisor(e,t){let n=Math.min(e,t),o=Math.max(e,t);for(;o&gt;0&amp;&amp;Math.abs(1-n/o)&gt;Number.EPSILON;){let i=n%o;n=o,o=i}return n}get label(){let{width:e,height:t}=this,n=kl.findGreatestCommonDivisor(e,t),o=`${e/n}:${t/n}`;return`${this.width} x ${this.height} (${o})`}equals(e){return this.width===e.width&amp;&amp;this.height===e.height}asLandscape(){return new kl(Math.max(this.width,this.height),Math.min(this.width,this.height))}asPortrait(){return new kl(Math.min(this.width,this.height),Math.max(this.width,this.height))}},Lve=[[1920,1080],[1280,720],[1024,576]].map(([r,e])=&gt;new kl(r,e)),Ove=[[1600,1200],[1280,960],[800,600]].map(([r,e])=&gt;new kl(r,e)),iq=[...Lve,...Ove],Uve=iq.map(r=&gt;r.asPortrait());function zve(r,e,t){let n=t?1:-1,o=r.width/r.height,i=e.width/e.height;return o&gt;i?-n:o&lt;i?n:0}function Hve(r,e){let t=r.width*r.height,n=e.width*e.height;return t&gt;n?-1:t&lt;n?1:0}function Gve(r){return(e,t)=&gt;{let n=zve(e,t,r);return n===0?Hve(e,t):n}}function sq(r,e,t){let{width:n,height:o}=r,{width:i,height:s}=e,a=[],l=!0,u=n&lt;=o&amp;&amp;t,d=u?Uve:iq;for(let c of d){let{width:p,height:h}=c.asLandscape();p&lt;=i&amp;&amp;h&lt;=s&amp;&amp;a.push(c),c.equals(r)&amp;&amp;(l=!1)}return l&amp;&amp;a.push(r),a.sort(Gve(!u))}function aq(r){if(typeof(r==null?void 0:r.getSettings)!="function")throw new Error("MediaStreamTrack.getSettings not supported");let{width:e,height:t}=r.getSettings();if(e===void 0||t===void 0)throw new Error(`invalid video track dimensions: [ ${e} x ${t} ]`);return new kl(e,t)}function lq(r){if(!ME(r))throw new Error("MediaStreamTrack.getCapabilities not supported");let e=r.getCapabilities(),{width:t,height:n}=e;if(t===void 0||n===void 0)throw new Error("invalid video track capability dimensions");let o=t.max,i=n.max;if(o===void 0||i===void 0)throw new Error(`invalid video track maximum dimensions [ ${o} x ${i} ]`);return new kl(o,i)}function uq(r){let e=Object.entries(r);if(e.length&lt;1)return{};let t={};for(let[n,o]of e)Ja(o)&amp;&amp;(t[n]=new kl(o.width,o.height));return t}function NE(r){var t;let e=(t=r.orientation)==null?void 0:t.type;if(typeof e=="string")return/^portrait/.test(e.toLowerCase())}var U4=new kl(1920,1080),dq=new kl(1280,720),BE=new kl(600,600);function cq(r){return r.sort((e,t)=&gt;{var n,o,i;return(i=(o=(n=z0(t.is_teacher,e.is_teacher))!=null?n:tg(e.sort_key,t.sort_key))!=null?o:eg(e.username,t.username))!=null?i:Zm(e.id,t.id)})}function z4(r){return r.sort((e,t)=&gt;{var n,o,i;return(i=(o=(n=z0(e.is_teacher,t.is_teacher))!=null?n:tg(e.sort_key,t.sort_key))!=null?o:eg(e.username,t.username))!=null?i:Zm(e.id,t.id)})}function pq({cells:r,orderType:e,hideAuthor:t,topSelectedId:n}){return n?Kve(r,n):t?jve(r):e==="byUpdatedDate"?$ve(r):e==="byAuthorName"?Vve(r):Wve(r)}function Wve(r){return r.sort((e,t)=&gt;{var n,o,i,s,a,l,u,d,c,p,h,f,m,g;return(g=(h=(d=(a=(s=(i=H4(e.submissionAnswer,t.submissionAnswer))!=null?i:z0((n=e.user)==null?void 0:n.is_teacher,(o=t.user)==null?void 0:o.is_teacher))!=null?s:G4(e.submissionAnswer,t.submissionAnswer))!=null?a:hq(e.attendantStatus,t.attendantStatus))!=null?d:tg((l=e.user)==null?void 0:l.sort_key,(u=t.user)==null?void 0:u.sort_key))!=null?h:eg((c=e.user)==null?void 0:c.username,(p=t.user)==null?void 0:p.username))!=null?g:Zm((f=e.user)==null?void 0:f.id,(m=t.user)==null?void 0:m.id)})}function $ve(r){return r.sort((e,t)=&gt;{var n,o,i,s,a,l,u,d,c,p,h,f,m,g;return(g=(h=(d=(a=(s=(i=H4(e.submissionAnswer,t.submissionAnswer))!=null?i:z0((n=e.user)==null?void 0:n.is_teacher,(o=t.user)==null?void 0:o.is_teacher))!=null?s:G4(t.submissionAnswer,e.submissionAnswer))!=null?a:hq(e.attendantStatus,t.attendantStatus))!=null?d:tg((l=e.user)==null?void 0:l.sort_key,(u=t.user)==null?void 0:u.sort_key))!=null?h:eg((c=e.user)==null?void 0:c.username,(p=t.user)==null?void 0:p.username))!=null?g:Zm((f=e.user)==null?void 0:f.id,(m=t.user)==null?void 0:m.id)})}function Vve(r){return r.sort((e,t)=&gt;{var n,o,i,s,a,l,u,d,c,p,h;return(h=(d=(a=z0((n=e.user)==null?void 0:n.is_teacher,(o=t.user)==null?void 0:o.is_teacher))!=null?a:tg((i=e.user)==null?void 0:i.sort_key,(s=t.user)==null?void 0:s.sort_key))!=null?d:eg((l=e.user)==null?void 0:l.username,(u=t.user)==null?void 0:u.username))!=null?h:Zm((c=e.user)==null?void 0:c.id,(p=t.user)==null?void 0:p.id)})}function jve(r){return r.sort((e,t)=&gt;{var n,o;return(o=(n=H4(e.submissionAnswer,t.submissionAnswer))!=null?n:G4(e.submissionAnswer,t.submissionAnswer))!=null?o:0})}function Kve(r,e){return r.sort((t,n)=&gt;{var o,i,s,a,l,u,d,c,p,h,f,m,g,v;return(v=(f=(c=(l=qve((o=t.user)==null?void 0:o.id,(i=n.user)==null?void 0:i.id,e))!=null?l:z0((s=t.user)==null?void 0:s.is_teacher,(a=n.user)==null?void 0:a.is_teacher))!=null?c:tg((u=t.user)==null?void 0:u.sort_key,(d=n.user)==null?void 0:d.sort_key))!=null?f:eg((p=t.user)==null?void 0:p.username,(h=n.user)==null?void 0:h.username))!=null?v:Zm((m=t.user)==null?void 0:m.id,(g=n.user)==null?void 0:g.id)})}function H4(r,e){return r!==void 0&amp;&amp;e===void 0?-1:e!==void 0&amp;&amp;r===void 0?1:null}function G4(r,e){return r!==void 0&amp;&amp;e!==void 0?r.timestamp.localeCompare(e.timestamp):r!==void 0?-1:e!==void 0?1:null}function Zm(r,e){return r!==void 0&amp;&amp;e!==void 0?r&lt;e?-1:1:r!==void 0?-1:e!==void 0?1:0}function eg(r,e){return r!=null&amp;&amp;e!=null?r.localeCompare(e):r!=null?-1:e!=null?1:null}function tg(r,e){if(r!=null&amp;&amp;e!=null){let t=r.toUpperCase(),n=e.toUpperCase();return t.localeCompare(n)}return r!=null?-1:e!=null?1:null}function hq(r,e){return r!=="good"&amp;&amp;e==="good"?1:r==="good"&amp;&amp;e!=="good"?-1:null}function z0(r=!1,e=!1){return!r&amp;&amp;e?-1:r&amp;&amp;!e?1:null}function qve(r,e,t){return t===void 0?null:r===t?-1:e===t?1:null}function $h(r,e){return`${r}_${e}`}function pn(r,e){return`${r}/${e}`}function rg(r,e,t){return`${r}/${e}/${t}`}function Vh(r,e){return`${r}/${e}`}function H0(r,e){return`${r}_${e}`}function G0(r){let{courseId:e,drawer:t,desktop:n,editor:o,screen:i,submissionBoxOpen:s,submissionAnswer:a,submissionAnswerPageIndexStates:l,submissionNumber:u,materialBoxOpen:d,timelineOpen:c,timelineEntry:p,preferenceOpen:h}=r;return{courseId:e,drawer:t,desktop:n,editor:o,screen:i,submissionBoxOpen:s,submissionAnswer:a,submissionAnswerPageIndexStates:l,submissionNumber:u,materialBoxOpen:d,timelineOpen:c,timelineEntry:p,preferenceOpen:h}}function gq(r){return`app.loilonote:preferences:${r}`}function W4(r,e){return`${r}:${e?"photo":"video"}`}var $4=[1,2,6,12,30],V4=[12,20,30,42,56],Yve=$4[1],Xve=V4[2],er=class{constructor(){}};er.red=mt("#E53935FF"),er.orange=mt("#FE7914FF"),er.yellow=mt("#FFD600FF"),er.green=mt("#12AD50FF"),er.blue=mt("#004CBAFF"),er.purple=mt("#B71A86FF"),er.brown=mt("#71411DFF"),er.black=mt("#131313FF"),er.pastelPink=mt("#F48A9CFF"),er.pastelOrange=mt("#FFA877FF"),er.pastelYellow=mt("#FFE55CFF"),er.pastelGreen=mt("#9EE864FF"),er.pastelBlue=mt("#54B7EDFF"),er.pastelPurple=mt("#E59ED6FF"),er.pastelBrown=mt("#C29874FF"),er.gray=mt("#AEB5BAFF"),er.vividPink=mt("#FF6CC0FF"),er.vividOrange=mt("#FFAD40FF"),er.vividYellow=mt("#FFFF00FF"),er.vividGreen=mt("#37F091FF"),er.vividBlue=mt("#0AD8FEFF"),er.vividPurple=mt("#D483FFFF"),er.peach=mt("#FFDEC2FF"),er.white=mt("#FFFFFFFF");function fq(r){return{width:Yve,activeColor:1,colors:(t=&gt;t==="highlighter"?{1:er.vividYellow.toRGBA(),2:er.vividPink.toRGBA(),3:er.vividGreen.toRGBA()}:{1:er.black.toRGBA(),2:er.red.toRGBA(),3:er.blue.toRGBA()})(r),activeRuler:!1}}function mq(){return{activeTool:"pen",activePen:"pencil",prefs:{eraser:{width:Xve},highlighter:fq("highlighter"),pen:fq("pen")},lastToolSolidLine:"pen",lastToolWithWidth:"pen"}}function Qve(){return{audioDeviceId:null,videoDeviceId:null,qrVideoDeviceId:null,mode:"photo",resolutions:{}}}function Jve(){return{enableSharedNote:!1,enableSearch:!1}}function vq(r){var n;let e={invertMouseWheel:!1,mouseWheelMultiplier:1,trackpadPinchZoomMultiplier:1,cardDrawToolPrefs:mq(),documentDrawToolPrefs:mq(),cameraPrefs:Qve(),experimentalFeatures:Jve(),debugFeatures:{showDrawnAssetState:!1,forceSharedNoteDisconnected:!1},materialBoxSortOrder:{key:"updateDate",direction:"descending"},noteListSortOrder:{key:"updatedAt",direction:"descending"},recordingDeviceId:"default",enableAudioNoiseReduction:!1};if(!globalThis.localStorage)return e;let t=localStorage.getItem(gq(r.userInfo.user_id));if(t){let o=JSON.parse(t),i=(n=o==null?void 0:o.cameraPrefs)==null?void 0:n.resolutions;return i&amp;&amp;(o.cameraPrefs.resolutions=uq(i)),g1(e,o)}else return e}function bq(r,e){!globalThis.localStorage||localStorage.setItem(gq(r),JSON.stringify(e))}function yq(r){let e=N0(r);return Je.subscribe(e.reduce),e}var Cq=["write","read","none"],Sq=["manage","write","read","none"];var Ju=class extends Error{constructor({resp:t,note:n,noteId:o,courseId:i}){super(t.error);this.error=t.error,this.info=t.info,this.note=n,this.noteId=o,this.courseId=i}},ng=class extends Error{constructor(t){super(t.rejection);this.errorResponse=t;Ee(t.rejection!=="revision_error")}},og=class extends Error{constructor(t){super(t.rejection);this.errorResponse=t}};var Fn=class extends Map{constructor(t,n){super(n);this.provider=t}get(t){let n=super.get(t);return n||(n=this.provider(t),super.set(t,n)),n}},w1=class extends WeakMap{constructor(t,n){super(n);this.provider=t}get(t){let n=super.get(t);return n||(n=this.provider(t),super.set(t,n)),n}};var ac=oe(Wr());function j4(r,e){return new Date(r).getTime()-new Date(e).getTime()}var Ls=class extends Date{constructor(e){e?super(e):super()}afterHours(e){return new Ls(this.getTime()+po.hour*e)}after(e){return new Ls(this.getTime()+e)}add(e){this.setTime(this.getTime()+e)}static today(){let e=new Ls;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}static tomorrow(){let e=Ls.today();return e.add(1*po.day),e}isToday(){let e=new Date().toISOString(),t=this.toISOString();return e.slice(0,10)===t.slice(0,10)}isThisYear(){let e=new Date;return this.getFullYear()===e.getFullYear()}toTimelineDate(){let e=he.get().strings;return this.isToday()?(0,ac.sprintf)(e.timelineDateFmtToday,this.getHours(),this.getMinutes()):this.isThisYear()?(0,ac.sprintf)(e.timelineDateFmtThisYear,this.getMonth()+1,this.getDate(),this.getHours(),this.getMinutes()):(0,ac.sprintf)(e.timelineDateFmtPrevYear,this.getFullYear(),this.getMonth()+1,this.getDate())}},su=class{constructor(e){this.ms=e}isPast(){return this.ms&lt;0}days(){return Math.floor(this.ms/po.day)}hours(){return Math.floor(this.ms/po.hour)}minutes(){return Math.floor(this.ms/po.min)}seconds(){return Math.floor(this.ms/po.sec)}toRelativeString(){let e=this.seconds(),t=this.minutes(),n=this.hours(),o=this.days(),i=he.get().strings;if(0&lt;o)return(0,ac.sprintf)(i.daysRemaining,o);if(0&lt;n)return(0,ac.sprintf)(i.hoursRemaining,n);if(0&lt;t){let s="%d";return(0,ac.sprintf)((0,ac.sprintf)(i.minRemaining,s),t)}else{let s="%02d";return(0,ac.sprintf)((0,ac.sprintf)(i.secRemaining,s),e)}}};function jh(r){let e=Math.floor(r/60),t=Math.floor(r-60*e);return(0,ac.sprintf)("%02d:%02d",e,t)}var po=(i=&gt;(i[i.ms=1]="ms",i[i.sec=1e3]="sec",i[i.min=6e4]="min",i[i.hour=36e5]="hour",i[i.day=864e5]="day",i))(po||{});var OE=(r,e)=&gt;Zve(r,e)||ebe(r,e),Zve=(r,e)=&gt;r.expiry&amp;&amp;e.expiry?j4(r.expiry,e.expiry):r.expiry?1:e.expiry?-1:j4(e.timestamp,r.timestamp),ebe=(r,e)=&gt;r.message&amp;&amp;e.message?r.message.localeCompare(e.message,"en"):r.message?1:e.message?-1:0;function UE(r,e,t){return r.author_id===t.user_id?!0:t.is_graduated?!1:ig({submission:e,userInfo:t})}function Kh(r){return r.reveal_answer===2&amp;&amp;r.expiry?new Date(r.expiry)&lt;new Date:r.reveal_answer===1}function ig(r){let{submission:e,userInfo:t}=r;return t.is_teacher?!0:t.is_graduated?!1:Kh(e)}function zE(r){let{targetIds:e,currentIds:t,getSubmissionAnswer:n}=r,o=e.filter(s=&gt;s!==null&amp;&amp;!t.includes(s));if(o.length&lt;=0)return e;let i=rn(o.map(s=&gt;{var u,d;let a=(u=n(s))==null?void 0:u.author_key,l=(d=t.map(c=&gt;n(c)).find(c=&gt;(c==null?void 0:c.author_key)===a))==null?void 0:d.id;return[s,l]}));for(let s of o){let a=e.indexOf(s),l=i[s];l?e[a]=l:e.splice(a,1)}return e}function xq(r,e,t){var i;return((i=r.submissions.byCourseId[e])!=null?i:[]).map(s=&gt;r.submissions.byKey[s]).filter(s=&gt;{if(s.expiry===null)return!1;let a=new Date(s.expiry);return t.getTime()&lt;a.getTime()})}function wq(r,e){var o;return((o=r.submissions.byCourseId[e])!=null?o:[]).map(i=&gt;r.submissions.byKey[i]).filter(i=&gt;i.preparation)}function Tq(r,e,t){var s;return((s=r.submissions.byCourseId[e])!=null?s:[]).map(a=&gt;r.submissions.byKey[a]).filter(a=&gt;{var u;let l=new Date((u=a.expiry)!=null?u:a.timestamp);return(!a.expiry||t.getTime()&gt;=l.getTime())&amp;&amp;!a.preparation})}function Dq(r,e){let t=tbe(r);return Array.from(t.keys()).sort(rbe).map(n=&gt;{var u;let{time:o,expiry:i}=K4(n),s=new Date(o),a=e(s,i),l=(u=t.get(n))!=null?u:[];return{title:a,submissions:l}})}function tbe(r){var t;let e=new Fn(()=&gt;[]);for(let n of r){let o=new Date((t=n.expiry)!=null?t:n.timestamp),i=new Date(o.getFullYear(),o.getMonth(),o.getDate()).getTime(),s=n.expiry!==null,a=`${i}/${s}`;e.get(a).push(n)}return e}var K4=r=&gt;{let e=r.split("/"),t=Number(e[0]),n=e[1]==="true";return{time:t,expiry:n}},rbe=(r,e)=&gt;{let{time:t,expiry:n}=K4(r),{time:o,expiry:i}=K4(e);return t&lt;o?1:t&gt;o?-1:!n&amp;&amp;i?1:n&amp;&amp;!i?-1:0},ua=(r,e,t)=&gt;{let n=e.is_teacher,o=e.user_id;return(n||(r==null?void 0:r.author_id)===o||!t)&amp;&amp;r.author_id!==void 0&amp;&amp;r.author_name!==void 0&amp;&amp;r.author_is_teacher!==void 0};function kq(r){let{store:e,courseId:t,answers:n,hideAuthor:o}=r,i=[];if(o){for(let s of n)i.push({submissionAnswer:s});return i}for(let s of n){if(s.author_id===void 0||s.author_name===void 0||s.author_is_teacher===void 0)continue;let a=e==null?void 0:e.users.byId[s.author_id],l=e==null?void 0:e.userStatuses.byKey[Vh(t,s.author_id)];a||(a={id:s.author_id,username:s.author_name,display_name:s.author_name,sort_key:null,first_name:"",last_name:"",lang:"",is_teacher:s.author_is_teacher,is_admin:!1}),i.push({user:a,attendantStatus:l==null?void 0:l.status,submissionAnswer:s})}return i}function Pq(r){let{store:e,courseId:t,answers:n,hideAuthor:o}=r,i=[],{students:s,teachers:a}=qh({store:e,courseId:t,includeSelf:!0});if(o){let l=a.length+s.length-n.length;for(let u=0;u&lt;l;u++)i.push({});return i}for(let l of a.concat(s)){if(n.find(d=&gt;d.author_id===l.id))continue;let u=e.userStatuses.byKey[Vh(t,l.id)];i.push({user:l,attendantStatus:u==null?void 0:u.status,submissionAnswer:void 0})}return i}var T1=r=&gt;typeof r=="object"&amp;&amp;(as(r)||D1(r)),Aq=r=&gt;typeof r=="object"&amp;&amp;(T1(r)||Mb(r)),as=r=&gt;typeof r=="object"&amp;&amp;r.action==="screen_sharing"&amp;&amp;r.type==="fullscreen",D1=r=&gt;typeof r=="object"&amp;&amp;r.action==="screen_sharing"&amp;&amp;r.type==="comparison",Iq=r=&gt;typeof r=="object"&amp;&amp;r.action==="screen_sharing"&amp;&amp;r.type==="ready",Mb=r=&gt;typeof r=="object"&amp;&amp;r.action==="screen_sharing"&amp;&amp;r.type==="end";function q4(r){let e={};for(let n of r)for(let o of n.courses){let i=`${o.user_group_id}:${o.user_group_name}`;(e[i]||(e[i]=[])).push({subject_id:n.subject_id,subject_name:n.subject_name,course_id:o.course_id,timestamp:o.timestamp})}let t=[];for(let n in e){let o=n.split(":"),i=parseInt(o[0]),s=o[1],a=e[n];t.push({user_group_id:i,user_group_name:s,courses:a})}return t}function HE(r){let e=[];for(let{user_group_id:t,user_group_name:n,courses:o}of r)for(let{subject_id:i,subject_name:s,course_id:a}of o)e.push({subject_id:i,subject_name:s,course_id:a,user_group_name:n,user_group_id:t});return e}function Nb(r){return nbe(r).filter(e=&gt;e.length&gt;0).sort((e,t)=&gt;e[0].user_group_name.localeCompare(t[0].user_group_name))}function nbe(r){let e=new Map;for(let t of r){let n=e.get(t.user_group_id);n||(n=[],e.set(t.user_group_id,n)),n.push(t)}return[...e.values()]}function zt(r){return r?r.display_name?r.display_name:`${r.last_name} ${r.first_name}`.trim():""}var _q=oe(Eq());function obe(){let r=new _q.DI,e={};r.set("devtool",e);function t(){r.reset()}return{reset:t,set apiClient(n){r.set("apiClient",n)},get apiClient(){return r.get("apiClient")},set lnsClient(n){r.set("lnsClient",n)},get lnsClient(){return r.get("lnsClient")},set shareClient(n){r.set("shareClient",n)},get shareClient(){return r.get("shareClient")},set initialState(n){r.set("initialState",n)},get initialState(){return r.get("initialState")},set res(n){r.set("res",n)},get res(){return r.get("res")},set pushClient(n){r.set("pushClient",n)},get pushClient(){return r.get("pushClient")},set noteSearchClient(n){r.set("noteSearchClient",n)},get noteSearchClient(){return r.get("noteSearchClient")},set materialDocumentSearchClient(n){r.set("materialDocumentSearchClient",n)},get materialDocumentSearchClient(){return r.get("materialDocumentSearchClient")},set fcmPushClient(n){r.set("fcmPushClient",n)},get fcmPushClient(){return r.get("fcmPushClient")},set pdf(n){r.set("pdf",n)},get pdf(){return r.get("pdf")},devtool:e,set idb(n){r.set("idb",n)},get idb(){return r.get("idb")},set fileManager(n){r.set("fileManager",n)},get fileManager(){return r.get("fileManager")},set localStorage(n){r.set("localStorage",n)},get localStorage(){return r.get("localStorage")}}}var ie=obe();function Pl(r){return e=&gt;{let t=he.get().strings,{store:n,id:o,title:i,okMessage:s,onOkClick:a}=r;return me(o,{title:i,...ot(e,{403:t.status403AccessDenied,404:t.status404ItemNotFound}),okMessage:s!=null?s:t.back,onOk:()=&gt;{a==null||a(),n.reduce(me(o,void 0))}})}}function Ln(r,{fetchingId:e,promise:t,beforeReducers:n=[],doneReducer:o,errorReducer:i}){return r.reduce(ei(e,"fetching"),...n),t.then(async s=&gt;{let a=await o(s),l=Array.isArray(a)?a:[a];r.reduce(ei(e,"done"),...l)}).catch(Je.handleError).catch(async s=&gt;{fe.error(s);let a=[ei(e,s)];if(i){let l=await i(s),u=Array.isArray(l)?l:[l];a=a.concat(u)}r.reduce(...a)})}function ot(r,e={}){var o;let t=he.get().strings,n={message:(o=e.default)!=null?o:t.unexpectedErrorOccurred};if(r instanceof sr){let i=e[r.status];if(typeof i=="string")n.message=i;else if(typeof i=="function")try{n.message=i(r)}catch(s){fe.error(s)}n.message=`${r.status}: ${n.message}`}else r instanceof ng||r instanceof og?n.message=t.sharedNoteProtocolVersionErrorMsg:r instanceof tp?n.message=t.couldntGet_CheckInternetConnection:r instanceof co?n.message=r.message:n.unknownError=r;return n}function lp(r,e){let t=nt.user(e);r.fetchStates[t]!=="fetching"&amp;&amp;Ln(r,{fetchingId:t,promise:ie.lnsClient.getUser(e),doneReducer:n=&gt;Fq(e,n)})}function Nr(r,e){return r.userInfo.user_id===e?{id:e,name:zt(r.userInfo)}:{id:e,name:zt(r.users.byId[e])}}async function Mq(r,e){let t=r.users.byId[e];if(t)return t;let n=nt.user(e);if(lp(r,e),await r.waitUntil(({fetchStates:o,users:i})=&gt;(o[n]==="done"&amp;&amp;(t=i.byId[e]),o[n]==="done"||o[n]instanceof Error)),!!t)return t}function ls(r,e,t){let{selfStudy:n}=t!=null?t:he.get().strings;if(!e)return;if(e==="self-study")return n;let o=r.courses.byId[e];if(o)return o.subject_name;let i=r.courseAttributes.byId[e];if(!!i)return i.name}function Xh({store:r,courseId:e,noteId:t,name:n,strings:o}){var l;let i=o!=null?o:he.get().strings,s=ls(r,e,i),a=n!=null?n:(l=r.notes.byId[t])==null?void 0:l.name;return s&amp;&amp;a?`${s} ${a}`:i.appName}function sg(r,e){return[au(r,e),ls(r,e)].filter(Boolean).join(" ")}function $0(r,e,t){let n=t!=null?t:he.get().strings,o=ls(r,e,n);return o?`${o} ${n.timelineTitle}`:n.timelineTitle}function Yh({store:r,courseId:e,submissionNumber:t,message:n,strings:o}){var u;let i=o!=null?o:he.get().strings,s=ls(r,e,i),a=`${e}/${t}`,l=t?n!=null?n:(u=r.submissions.byKey[a])==null?void 0:u.message:void 0;return s&amp;&amp;l?`${s} ${l}`:s?`${s} ${i.submissionBox}`:i.submissionBox}function V0(r,e,t){let n=t!=null?t:he.get().strings,o=ls(r,e,n);return o?`${o} ${n.noteListTitle}`:n.noteListTitle}function Nq(r,e){let t=new URL(e),{pathname:n}=t,[o,i,s,a,l]=n.substr(1).split("/");if(o!=="_")return;if(!i)return he.get().strings.courseListTitle;let u=i==="self-study"?i:parseInt(i);if(s)if(a){if(a==="submissions"&amp;&amp;!l)return Yh({store:r,courseId:u});if(a==="submissions"){let d=parseInt(l);return Yh({store:r,courseId:u,submissionNumber:d})}else return a==="timeline"?$0(r,u):void 0}else{let d=parseInt(s);return Xh({store:r,courseId:u,noteId:d})}else return V0(r,u)}function au(r,e){if(!e||e==="self-study")return;let t=r.courses.byId[e];if(t)return t.user_group_name;let n=r.courseAttributes.byId[e];if(n)return n.user_group_name}function Xt(r){var e,t;return(t=(e=r.desktop)==null?void 0:e.courseId)!=null?t:r.courseId}function k1(r){let e=dp(r);return typeof e=="number"&amp;&amp;!r.userInfo.is_teacher&amp;&amp;r.screenLockStates[e]===!0}function up(r){let e=dp(r);if(typeof e!="number")return!1;let t=r.screenSharingActionNotification[e];if(!T1(t))return!1;let n=r.userInfo.user_id,{publisher:o,presenter:i}=t;return o!==n||!!i&amp;&amp;i!==n}function Q4(r){return Object.keys(r.updatingMessages).length&gt;0}function WE(r){var t;let e=r.userInfo.user_id;return((t=r.screenSharingState)==null?void 0:t.presenter)===e}function el(r){return WE(r)||up(r)||k1(r)}function Bq(r){let{drawer:e,materialBoxOpen:t,timelineOpen:n,submissionBoxOpen:o}=r;return e.open||t||n||o}function P1(r){let{userProfileOpen:e,cameraDialogOpen:t,addSheetDialogOpen:n,addTextCardDialogOpen:o,addQuizCardDialogOpen:i,preferenceOpen:s,leadingWebCardExtensionDialogState:a,newSubmissionDialog:l}=r;return e||t||n||o||i||s||a==="open"||!!l||Q4(r)}function qh({store:r,courseId:e,includeSelf:t=!1}){var u,d;let n=[],o=[],i=r.userInfo.user_id,s=(u=r.users.byCourseId[e])!=null?u:[],a=(d=r.users.byTemporaryCourseId[e])!=null?d:[],l=[...s,...a];t||(l=l.filter(c=&gt;c!==i));for(let c of l){let p=r.users.byId[c];p.is_teacher?n.push({...p,is_teacher:!0}):o.push({...p,is_teacher:!1})}return n=z4(n),o=z4(o),{teachers:n,students:o,allIds:l}}function W0(r){var l;let{store:e,courseId:t,submissionNumber:n,authorKey:o}=r,i=pn(t,n),a=((l=e.submissionAnswers.bySubmissionKey[i])!=null?l:[]).find(u=&gt;{var d;return((d=e.submissionAnswers.byId[u])==null?void 0:d.author_key)===o});return a?e.submissionAnswers.byId[a]:void 0}function j0(r,e){var p,h,f;let{submissionAnswer:t,submissionNumber:n,userInfo:o}=r,i=Xt(r);if(!t)return;let{id:s,orderedAuthors:a}=t;if(!Or(i))return;let l=r.screenSharingActionNotification[i];if(as(l)&amp;&amp;l.presenter===o.user_id)return{preview:s};if(!n)return;let u=pn(i,n),d=r.submissions.byKey[u];if(e.parent===void 0&amp;&amp;ig({submission:d,userInfo:o})){let m=(p=r.submissionAnswers.byId[s])==null?void 0:p.author_key;if(!m)return;let g=a.indexOf(m);if(g&lt;0)return;let v,b;if(g!==0){let C=a[g-1];v=(h=W0({store:r,courseId:i,submissionNumber:d.submission_number,authorKey:C}))==null?void 0:h.id}if(g!==a.length-1){let C=a[g+1];b=(f=W0({store:r,courseId:i,submissionNumber:d.submission_number,authorKey:C}))==null?void 0:f.id}return{prev:v,preview:s,next:b}}else return{preview:s}}function dp(r){var t;let e=(t=r.desktop)==null?void 0:t.courseId;return!e&amp;&amp;(r.submissionBoxOpen||r.timelineOpen)&amp;&amp;(e=r.courseId),e}function J4(r,e){return typeof e=="number"&amp;&amp;r.userPreference.experimentalFeatures.enableSharedNote&amp;&amp;r.userInfo.is_teacher}function Rq(r){if(r.pushConnectionState==="reconnecting")return{severity:"yellow",count:1};if(r.pushConnectionState==="error")return{severity:"red",count:1}}function Lq(r){let{desktop:e,noteStates:t,assetUploadStates:n}=r,o=0,i=0;e!=null&amp;&amp;e.isShared||(o=Object.values(t).filter(u=&gt;u.saveState!=="done").length,i=Object.values(n).filter(u=&gt;u.drawn!==void 0).length);let s=0,a=e==null?void 0:e.rotatingStates;a&amp;&amp;(s=Object.keys(a).filter(u=&gt;{var d;return a[u]==="rotating"&amp;&amp;((d=n[u])==null?void 0:d.content)!=="saving"}).length);let l=Object.values(n).filter(u=&gt;u.content!==void 0||u.narration!==void 0).length;return o+i+l+s}function Qh(r){var e;if(!!((e=r.desktop)!=null&amp;&amp;e.isShared)){if(r.sharedNoteConnectionState!=="connected")return"noConnection";if(X4(r,r.desktop.noteId)==="read")return"readPermission"}}function X4(r,e){var t;return(t=r.notes.byId[e])==null?void 0:t.viewer_permission}function on(r){return!!Qh(r)}function $E(r,e){return on(e)&amp;&amp;!on(r)}var Z4=r=&gt;{if(r.some(t=&gt;t==="fetching"))return"fetching";if(r.every(t=&gt;t==="done"))return"done";let e=r.find(t=&gt;t instanceof Error);return e||null};function K0(r){return r.lnsEndpoint===pE}function Bb(r,e){return e?r.userPreference.documentDrawToolPrefs:r.userPreference.cardDrawToolPrefs}function Oq(r,e,t){let n=X4(e,r),o=X4(t,r);return n!==o}function Uq(r,e){let t=r.sharedNoteConnectionState,n=e.sharedNoteConnectionState;return t==="reconnecting"&amp;&amp;n==="connected"}function zq(r,e){let t=r.sharedNoteConnectionState,n=e.sharedNoteConnectionState;return t==="reconnecting"&amp;&amp;n==="reconnect_failed"}function Rb(r,e){return()=&gt;({noteStates:{[r]:{$set:e}}})}function A1(r,e){return()=&gt;({noteFiles:{[r]:{$set:e}}})}function eU(r,e){return()=&gt;({sharedNoteFiles:{[r]:{$set:e}}})}function Hq(r){return()=&gt;({sharedNoteFiles:{$unset:[r]}})}function tU(r,e){return()=&gt;({users:{byId:{$merge:rn(e.map(t=&gt;[t.id,t]))}},sharedNotePermissions:{[r]:{$set:rn(e.map(({id:t,permission:n})=&gt;[t,n]))}}})}function Gq({noteId:r,adds:e=[],dels:t=[]}){return({sharedNotePermissions:n})=&gt;{var i;let o=(i=n[r])!=null?i:{};for(let s of e)o[s]="write";for(let s of t)delete o[s];return{sharedNotePermissions:{$set:{[r]:o}}}}}function q0(r,e){return({sharedNotePermissions:t})=&gt;{let n={...t[r]};for(let{userId:o,permission:i}of e)n[o]=i;return{sharedNotePermissions:{$set:{[r]:n}}}}}function I1(r,e){return({sharedNotePermissions:t})=&gt;{if(!!t[r])return{sharedNotePermissions:{[r]:{$unset:e}}}}}function VE(r,e){return()=&gt;({sharedNotePermissions:{[r]:{$merge:rn(e.map(({userId:t,permission:n})=&gt;[t,n]))}}})}function Wq(r,e){return()=&gt;({sharedNoteSessions:{byId:{$merge:rn(e.map(t=&gt;[t.id,t]))},byNoteId:{[r]:{$set:e.map(t=&gt;t.id)}}}})}function $q(r,e){return t=&gt;{var o;let n=(o=t.sharedNoteSessions.byNoteId[r])!=null?o:[];return{sharedNoteSessions:{byId:{[e.id]:{$set:e}},byNoteId:{[r]:{$set:[...n,e.id]}}}}}}function Vq(r,e){return({sharedNoteSessions:t})=&gt;{var o;let n=(o=t.byNoteId[r])!=null?o:[];return n=n.filter(i=&gt;i!==e),{sharedNoteSessions:{byId:{$unset:[e]},byNoteId:{[r]:{$set:n}}}}}}function jq(r){return({pushConnectionState:e})=&gt;{if(e!==r)return{pushConnectionState:{$set:r}}}}function Y0(r){return({userPreference:e})=&gt;({sharedNoteConnectionState:{$set:e.debugFeatures.forceSharedNoteDisconnected?"disconnected":r}})}function jE(r,e){return()=&gt;({noteNeedsReload:{[r]:{$set:e}}})}function ag(r,e){return()=&gt;({noteStates:{[r]:{$merge:e}}})}function lu(r,e){return t=&gt;{if(!!t.notes.byId[r])return{notes:{byId:{[r]:{$merge:e}}}}}}function X0({courseId:r,noteId:e,pushState:t,name:n}){return o=&gt;{let i={courseId:{$set:r},drawer:{open:{$set:!1}}};if(t){let s=m0(r,e,o.twa),a=Xh({store:o,courseId:r,noteId:e,name:n});i.pushState={$set:Io({url:s,type:"desktop",title:a})}}return i}}function Fq(r,e){return()=&gt;({users:{byId:{[r]:{$set:e}}}})}function KE(r,e){let t=[...e.teachers,...e.students];return()=&gt;({courseAttributes:{byId:{[r]:{$set:e}}},users:{byId:rn(t.map(n=&gt;[n.id,{$set:n}])),byCourseId:{[r]:{$set:t.map(n=&gt;n.id)}}},screenLockStates:{[r]:{$set:e.is_screen_locked}},tunnelStates:{[r]:{$set:e.is_tunnel_enabled}}})}function Kq(r,e){return()=&gt;({users:{byId:rn(e.map(t=&gt;[t.id,{$set:t}])),byTemporaryCourseId:{[r]:{$set:e.map(t=&gt;t.id)}}}})}function Q0(r){return()=&gt;({checkingScreenLockState:{$set:r}})}function qq(r){return()=&gt;({pageFocused:{$set:r}})}function zi(r){return()=&gt;({teacherToolVisible:{$set:r}})}function lg(r){return()=&gt;({teacherToolOpen:{$set:r}})}function rU(r){return()=&gt;({userStatusListOpen:{$set:r}})}function cp(r){return()=&gt;({drawer:{open:{$set:r}}})}function Zu(...r){return()=&gt;({drawer:{viewStack:{$push:r}}})}function Yq(){return r=&gt;{Ee(r.desktop!=null,"desktop must be defined");let{noteId:e,courseId:t}=r.desktop,n=m0(t,e,r.twa),o=Xh({store:r,courseId:t,noteId:e}),i=Io({url:n,type:"desktop",title:o});return{courseId:{$set:t},drawer:{open:{$set:!1}},pushState:{$set:i}}}}function Lb(r){return e=&gt;{if(!!e.desktop&amp;&amp;e.desktop.hoverCardId!==r)return{desktop:{hoverCardId:{$set:r}}}}}function qE(r){return e=&gt;{if(!!e.desktop){if(r&amp;&amp;e.desktop.heldCard){if(r.head===e.desktop.heldCard.head&amp;&amp;DK(r.all,e.desktop.heldCard.all))return}else if(!r&amp;&amp;!e.desktop.heldCard)return;return{desktop:{heldCard:{$set:r}}}}}}function Ar(r){return e=&gt;{if(!(!e.desktop||e.desktop.popoverOpen===r))return{desktop:{popoverOpen:{$set:r}}}}}function Hi(r){return e=&gt;{if(!!e.desktop)return{desktop:{focusingCard:{$set:r}}}}}function ti(){return r=&gt;{var e;if(!!((e=r.desktop)!=null&amp;&amp;e.focusingCard))return{desktop:{focusingCard:{$set:void 0},popoverOpen:{$set:!1}}}}}function hn(r){return e=&gt;{if(!(!e.desktop||e.desktop.positionPopoverOpen===r))return{desktop:{positionPopoverOpen:{$set:r}}}}}function YE(r,e){return t=&gt;{var o;if(!t.desktop)return;let n=(o=t.desktop.rotatingStates)!=null?o:{};return n[r]=e,{desktop:{rotatingStates:{$set:n}}}}}function E1(r){return e=&gt;{var n;if(!!((n=e.desktop)==null?void 0:n.rotatingStates))return{desktop:{rotatingStates:{$unset:[r]}}}}}function _1(r){return()=&gt;({fixedUIHit:{$set:r}})}function Xq({cardId:r,animate:e,updatePushState:t=!0}){return n=&gt;{Ee(n.desktop!=null,"desktop must be defined");let{courseId:o,noteId:i}=n.desktop,s=n.editor?[...n.editor]:[],a=g0(o,i,r,n.twa),l=Xh({store:n,courseId:o,noteId:i});return{editor:{$set:[...s,{cardId:r,animate:e}]},highlightedCardId:{$set:void 0},pushState:{$set:t?Io({url:a,type:"editor",title:l}):n.pushState}}}}function XE({deleted:r,updateEditorState:e=!0}){return t=&gt;{Ee(t.desktop!=null,"desktop must be defined"),Ee(t.editor!=null,"editor must be defined");let{courseId:n,noteId:o}=t.desktop,i=Xh({store:t,courseId:n,noteId:o}),s=[...t.editor],a=s.pop(),l=r||a==null?void 0:a.cardId;if(s.length===0){let u=m0(n,o,t.twa);return{editor:{$set:void 0},highlightedCardId:{$set:l},pushState:{$set:Io({url:u,type:"desktop",title:i})}}}else{let u=s[s.length-1],d=g0(n,o,u.cardId,t.twa);return{editor:{$set:s},highlightedCardId:{$set:l},pushState:{$set:e?Io({url:d,type:"editor",title:i}):t.pushState}}}}}function nU(r,e=!0){return t=&gt;{let{desktop:n,editor:o}=t;Ee(n!=null,"desktop must be defined"),Ee(o!=null,"editor must be defined");let i=o.length-1,{courseId:s,noteId:a}=n,l=g0(s,a,r,t.twa),u=Xh({store:t,courseId:s,noteId:a});return{editor:{[i]:{$set:{cardId:r,animate:!1}}},pushState:{$set:e?Io({url:l,type:"editor",title:u}):void 0}}}}function oU(r){return()=&gt;({screen:{$set:{isMobile:u1(r),...r}}})}function ug(r){return e=&gt;{let t=m1(r,e.twa),n=V0(e,r);return{courseId:{$set:r},pushState:{$set:Io({url:t,title:n,type:"note-list"})}}}}function Ob(){return r=&gt;{let e=[...r.drawer.viewStack];if(e.length&lt;=1)throw new Ho("cannot pop.");for(e.pop();e[e.length-1].type==="noteList";)e.pop();let t=e[e.length-1];if(t.type==="courseList"){let{courseListTitle:n}=he.get().strings;return{courseId:{$set:void 0},drawer:{viewStack:{$set:e}},pushState:{$set:Io({url:T4(r.twa),title:n,type:"course-list"})}}}else if(t.type==="closedYearList"||t.type==="unassignedCourseList"||t.type==="closedCourseList"||t.type==="closedUnassignedCourseList")return{drawer:{viewStack:{$set:e}}}}}function QE(r,e){return({notes:t})=&gt;{var n,o;if(typeof r=="number"){let s=((n=t.byCourseId[r])!=null?n:[]).indexOf(e);return s&lt;0?void 0:{notes:{byId:{$unset:[e]},byCourseId:{[r]:{$splice:[[s,1]]}}}}}else{let s=((o=t.selfStudyIds)!=null?o:[]).indexOf(e);return s&lt;0?void 0:{notes:{byId:{$unset:[e]},selfStudyIds:{$splice:[[s,1]]}}}}}}function ed(){return r=&gt;{var o;let e,t=Xt(r);if(t){let i=V0(r,t);e=Io({url:m1(t,r.twa),title:i,type:"note-list"})}else{let{courseListTitle:i}=he.get().strings;e=Io({url:T4(r.twa),title:i,type:"course-list"})}let n={desktop:{$set:void 0},editor:{$set:void 0},drawer:{open:{$set:!0}},pushState:{$set:e}};if(r.desktop&amp;&amp;r.desktop.isShared){let{noteId:i}=r.desktop,s=(o=r.sharedNoteSessions.byNoteId[i])!=null?o:[];n.sharedNoteSessions={byId:{$unset:s},byNoteId:{[i]:{$set:[]}}}}return n}}function we(r,e){return({updatingMessageOrder:t})=&gt;{let n,o=t.indexOf(r);return typeof e=="string"?(n={updatingMessages:{[r]:{$set:e}}},o&lt;0&amp;&amp;(n.updatingMessageOrder={$push:[r]})):(n={updatingMessages:{$unset:[r]}},o&gt;-1&amp;&amp;(n.updatingMessageOrder={$splice:[[o,1]]})),n}}function iU(r){return e=&gt;{if(e.restartLoadingDialogOpen!=r)return{restartLoadingDialogOpen:{$set:r}}}}function Jt(r){return()=&gt;({toastMessage:{$set:r}})}function me(r,e){return()=&gt;e?{alerts:{[r]:{$set:{...e,color:"error"}}}}:{alerts:{$unset:[r]}}}function Co(r,e){return()=&gt;e?{alerts:{[r]:{$set:e}}}:{alerts:{$unset:[r]}}}function Gi(r){return e=&gt;{var o;let t=e.submissionNumber;Ee(t!=null,"submissionNumber must be defined");let n=Gr(Xt(e));if(r){let{authorKey:i,generation:s,id:a}=r,l=(o=r.zoomChildViewStack)!=null?o:[],u=l.length-1,d;u&gt;=0&amp;&amp;(d=l[u].cardId);let c=z1({store:e,courseId:n,submissionNumber:t,authorKey:i,generation:s,answerId:a,pageIndex:r.pageIndex,zoomCardId:d});return{submissionAnswer:{$set:{...r,zoomChildViewStack:l}},submissionAnswerPageIndexStates:{[a]:{$set:r.pageIndex}},pushState:{$set:c}}}else{let i=Yh({store:e,courseId:n,submissionNumber:t});return{submissionAnswer:{$set:r},pushState:{$set:Io({url:SE(n,t,e.twa),type:"submission-box",title:i})}}}}}function Jh(r,e){return t=&gt;{let n=Gr(Xt(t)),o=Yh({store:t,courseId:n,submissionNumber:r,message:e});return r?{submissionNumber:{$set:r},pushState:{$set:Io({url:SE(n,r,t.twa),type:"submission-box",title:o})}}:{submissionNumber:{$set:r},pushState:{$set:Io({url:CE(n,t.twa),type:"submission-list",title:o})}}}}function Qq(r,e,t){return n=&gt;{let o=Yh({store:n,courseId:r,submissionNumber:e,message:t});return{submissionBoxOpen:{$set:!0},submissionNumber:{$set:e},pushState:{$set:Io({url:SE(r,e,n.twa),type:"submission-box",title:o})}}}}function F1(r){return e=&gt;{let t=Xt(e);if(r===e.submissionNumber&amp;&amp;typeof t=="number"){let n=Yh({store:e,courseId:t});return{submissionNumber:{$set:void 0},pushState:{$set:Io({url:CE(t,e.twa),type:"submission-list",title:n})}}}}}function J0(r,e=!0){return t=&gt;{let n=Gr(Xt(t)),o=t.desktop;if(r){let i=Yh({store:t,courseId:n}),s={submissionBoxOpen:{$set:r}};return e&amp;&amp;(s.pushState={$set:Io({url:CE(n,t.twa),type:"submission-list",title:i})}),s}else{let i={submissionBoxOpen:{$set:r},submissionNumber:{$set:void 0},submissionAnswer:{$set:void 0},submissionComparisonIds:{$set:void 0}};if(e)if(o){let{noteId:s}=o;i.pushState={$set:Io({url:m0(n,s,t.twa),type:"desktop",title:Xh({store:t,courseId:n,noteId:s})})}}else i.pushState={$set:Io({url:m1(n,t.twa),type:"note-list",title:V0(t,n)})};return i}}}function Os(r){return()=&gt;{let e={screenSharingState:{$set:r}};return r||(e.screenSharingForPresenter={$set:!1},e.screenSharingForSelf={$set:!1}),e}}function JE(r){return()=&gt;({screenSharingForSelf:{$set:r}})}function Z0(r){return()=&gt;({screenSharingForPresenter:{$set:r}})}function ZE(r,e){return()=&gt;({documentAnnotationLayerUpdateNotification:{[r]:{$set:e}}})}function e_(r,e){return()=&gt;({documentExtensionLayerUpdateNotification:{[r]:{$set:e}}})}function eS(r,e){return t=&gt;{if(t.submissionAnswers.byId[r])return{submissionAnswers:{byId:{[r]:{reply_status:{$merge:e}}}}}}}function dg(r,e){return()=&gt;({screenLockStates:{[r]:{$set:e}}})}function pp(r,e){return()=&gt;e?{screenSharingActionNotification:{[r]:{$set:e}}}:{screenSharingActionNotification:{$unset:[r]}}}function tS(r,e){return()=&gt;({screenSharingReadyStates:{[r]:{$set:e}}})}function Jq(){return()=&gt;({screenSharingReadyStates:{$set:{}}})}function M1(r,e){return()=&gt;({tunnelStates:{[r]:{$set:e}}})}function Zq(r,e){return()=&gt;({userStatuses:{byKey:{[Vh(r,e.user_id)]:{$set:{is_web_browsing:e.is_web_browsing,browsing_web_page:e.browsing_web_page,id:e.user_id,status:e.status}}}}})}function t_(r,e){return()=&gt;({userStatuses:{byKey:{$merge:rn(e.map(t=&gt;[Vh(r,t.id),t]))},byCourseId:{[r]:{$set:e.map(t=&gt;Vh(r,t.id))}}}})}function r_(r){return e=&gt;({submissionListDisplaySetting:{$set:{...e.submissionListDisplaySetting,...r}}})}function rS(r,e,t){return n=&gt;{var s;let o=pn(r,e),i=(s=n.submissions.byCourseId[r])!=null?s:[];return{submissions:{byKey:{[o]:{$set:t}},byCourseId:{[r]:{$set:yE(i.concat(o))}},updatedAt:{$set:Date.now()}}}}}function N1(r,e,t){let n=pn(r,e);return o=&gt;{if(!!o.submissions.byKey[n])return{submissions:{byKey:{[n]:{$merge:t}},updatedAt:{$set:Date.now()}}}}}function B1(r,e){let t=pn(r,e);return n=&gt;{var s,a;let o=(s=n.submissions.byCourseId[r])!=null?s:[];o=f0(o,l=&gt;l===t),o=yE(o);let i=(a=n.submissions.byActiveInCourse[r])!=null?a:[];return i=f0(i,l=&gt;l===t),i=yE(i),{submissions:{byKey:{$unset:[t]},byCourseId:{[r]:{$set:o}},byActiveInCourse:{[r]:{$set:i}},updatedAt:{$set:Date.now()}}}}}function n_(){return()=&gt;({submissions:{updatedAt:{$set:Date.now()}}})}function nS(r){return()=&gt;({desktop:{$set:r}})}function hp(r,e){return({notes:t})=&gt;{var i;let n=e.map(s=&gt;s.id),o=rn(e.map(s=&gt;[s.id,s]));if(r==="self-study"){let s=t.selfStudyIds.concat(n);return{notes:{byId:{$merge:o},selfStudyIds:{$set:s}}}}else{let s=((i=t.byCourseId[r])!=null?i:[]).concat(n);return{notes:{byId:{$merge:o},byCourseId:{[r]:{$set:s}}}}}}}function R1(r){return()=&gt;({drawnAssetUploadTrigger:{$set:r}})}function da({state:r,cardIdList:e,type:t}){return({assetUploadStates:n})=&gt;({assetUploadStates:rn(e.map(o=&gt;{var s;let i=(s=n[o])!=null?s:{};return i[t]=r,[o,{$set:i}]}))})}function fp(r,e){return()=&gt;({assetUploadStates:{...rn(r.map(t=&gt;[t,{$unset:[e]}]))}})}function sU(r){return({savingAssetsCount:e})=&gt;({savingAssetsCount:{$set:Math.max(0,e+r)}})}function aU(r){return({savingAssetThumbsCount:e})=&gt;({savingAssetThumbsCount:{$set:Math.max(0,e+r)}})}function oS(r,e){return()=&gt;({assetMetadata:{[r]:{$set:e}}})}function lU(r,e){return()=&gt;({assetInfo:{[r]:{$set:e}}})}function L1(r){return()=&gt;({batchDownloadState:{$set:r}})}function PE(r){return()=&gt;({sessionExpired:{$set:!0},alerts:{[57]:{$set:vE(r)}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function eY(r){return()=&gt;({sessionExpired:{$set:!0},alerts:{$set:{[62]:r}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function tY(r){return()=&gt;({sessionExpired:{$set:!0},alerts:{$set:{[63]:r}},updatingMessageOrder:{$set:[]},updatingMessages:{$set:{}}})}function Zh(r){return()=&gt;({materialBoxOpen:{$set:r}})}function cg(r){return()=&gt;({cameraDialogOpen:{$set:r}})}function rY(r){return()=&gt;({isWebCardExtensionInstalled:{$set:r}})}function iS(r){return e=&gt;{let t=Gr(Xt(e)),n=e.desktop,o={timelineOpen:{$set:r},timelineEntry:{$set:void 0}},i;if(r)i=Io({url:wE(t,e.twa),title:$0(e,t),type:"timeline"});else if(n){let{noteId:s}=n;i=Io({title:Xh({store:e,courseId:t,noteId:s}),url:m0(t,s,e.twa),type:"desktop"})}else i=Io({url:m1(t,e.twa),title:V0(e,t),type:"note-list"});return o.pushState={$set:i},o}}function sS(r){return e=&gt;{let t=Gr(Xt(e)),n={timelineEntry:{$set:r}},o=$0(e,t);return r?n.pushState={$set:Io({url:D4(t,r,e.twa),type:"timeline-preview",title:o})}:n.pushState={$set:Io({url:wE(t,e.twa),type:"timeline",title:o})},n}}function uU(r,e){return t=&gt;{var s;let o=((s=t.timelineEntries.byCourseId[r])!=null?s:[]).indexOf(e);if(o&lt;0)return;let i={timelineEntries:{byId:{$unset:[e]},byCourseId:{[r]:{$splice:[[o,1]]}}}};return t.timelineEntry===e&amp;&amp;(i.pushState={$set:Io({url:wE(r,t.twa),type:"timeline",title:$0(t,r)})},i.timelineEntry={$set:void 0}),i}}function nY(r){return e=&gt;{let t=e.timelineEntries.byCourseId[r],n={...e.timelineEntries.byId};return t&amp;&amp;t.forEach(o=&gt;delete n[o]),{fetchStates:{[nt.timelineEntries(r)]:{$set:null}},timelineEntry:{$set:void 0},timelineEntries:{byId:{$set:n},byCourseId:{$unset:[r]}}}}}function oY(r,e){return t=&gt;({timelineOpen:{$set:!0},timelineEntry:{$set:e},pushState:{$set:Io({url:D4(r,e,t.twa),type:"timeline-preview",title:$0(t,r)})}})}function ei(r,e){return()=&gt;({fetchStates:{[r]:{$set:e}}})}function mp(r){return()=&gt;({submissionComparisonIds:{$set:r}})}function pg(r){return()=&gt;({uploadingDocument:{$set:r}})}function O1(r){return({uploadingMaterialCount:e})=&gt;({uploadingMaterialCount:{$set:Math.max(0,e+r)}})}function Ub(r){return()=&gt;({submittingDocument:{$set:r}})}function o_(r){return()=&gt;({submitting:{$set:r}})}function iY(r,e){let t=pn(r,e);return()=&gt;({submissions:{byKey:{[t]:{$merge:{submitted:!0,submit_date:new Date().toISOString()}}}}})}function i_(r){return()=&gt;({sendingTasks:{$push:[r]}})}function ef(r){return e=&gt;{let t=e.sendingTasks.findIndex(n=&gt;n.id===r);if(t!==-1)return{sendingTasks:{$splice:[[t,1]]}}}}function aS(r){return()=&gt;({preferenceOpen:{$set:r}})}function s_(r){return()=&gt;({userPreference:{$set:r}})}function Wi(r){return()=&gt;({userPreference:r})}function a_(r){return()=&gt;({passwordDialogOpen:{$set:r}})}function U1(r){return()=&gt;({addWebCardDialogOpen:{$set:r}})}function td({forDocument:r,tool:e,pen:t}){return()=&gt;{let n=r?"documentDrawToolPrefs":"cardDrawToolPrefs",o={activeTool:e};switch(t&amp;&amp;(o.activePen=t),e){case"pen":case"highlighter":o.lastToolSolidLine=e,o.lastToolWithWidth=e;break;case"eraser":o.lastToolWithWidth=e;break;case"lasso":break}return{userPreference:{[n]:{$merge:o}}}}}function hg({forDocument:r,tool:e,part:t}){return n=&gt;{let o=r?"documentDrawToolPrefs":"cardDrawToolPrefs",i=e!=null?e:n.userPreference[o].activeTool;if(i==="lasso")return;let s=n.userPreference[o].activePen;return t.activeRuler&amp;&amp;i==="pen"&amp;&amp;s!=="pencil"&amp;&amp;(s="pencil"),{userPreference:{[o]:{activePen:{$set:s},prefs:{[i]:{$merge:t}}}}}}}function fg(r){return()=&gt;({sendingDocument:{$set:r}})}function dU(r){return()=&gt;({noteManagerReady:{$set:r}})}function sY(){return r=&gt;({saveNoteTrigger:{$set:r.saveNoteTrigger+1}})}function ho(){return r=&gt;r.editor||r.submissionAnswer||up(r)?{editorRedrawTrigger:{$set:r.editorRedrawTrigger+1}}:{desktopRedrawTrigger:{$set:r.desktopRedrawTrigger+1}}}function l_(r,e,t=!0){return n=&gt;{let{courseId:o,submissionNumber:i,submissionAnswer:s}=d_(n),a=s.id;Ee(a===r,"answerId mismatch");let l;if(t){let{authorKey:u,generation:d}=s;l=z1({store:n,courseId:o,submissionNumber:i,authorKey:u,generation:d,answerId:r,pageIndex:e})}return{submissionAnswer:{pageIndex:{$set:e},zoomChildViewStack:{$set:[]}},submissionAnswerPageIndexStates:{[r]:{$set:e}},pushState:{$set:l}}}}function cU(r){return e=&gt;{let{courseId:t,submissionNumber:n,submissionAnswer:o}=d_(e),{authorKey:i,generation:s,id:a,pageIndex:l,zoomChildViewStack:u}=o;u.push(r);let d=z1({store:e,courseId:t,submissionNumber:n,authorKey:i,generation:s,answerId:a,pageIndex:l,zoomCardId:r.cardId});return{submissionAnswer:{zoomChildViewStack:{$set:u}},pushState:{$set:d}}}}function pU(){return r=&gt;{let{courseId:e,submissionNumber:t,submissionAnswer:n}=d_(r),{authorKey:o,generation:i,id:s,pageIndex:a,zoomChildViewStack:l}=n;l.pop();let u=l.length-1,d;u&gt;=0&amp;&amp;(d=l[u].cardId);let c=z1({store:r,courseId:e,submissionNumber:t,authorKey:o,generation:i,answerId:s,pageIndex:a,zoomCardId:d});return{submissionAnswer:{zoomChildViewStack:{$set:l}},pushState:{$set:c}}}}function u_(r,e=!0){return t=&gt;{let{courseId:n,submissionNumber:o,submissionAnswer:i}=d_(t),{authorKey:s,generation:a,id:l,pageIndex:u,zoomChildViewStack:d}=i;d.pop(),d.push(r);let c;return e&amp;&amp;(c=z1({store:t,courseId:n,submissionNumber:o,authorKey:s,generation:a,answerId:l,pageIndex:u,zoomCardId:r.cardId})),{submissionAnswer:{zoomChildViewStack:{$set:d}},pushState:{$set:c}}}}function d_(r){let e=r.submissionNumber;Ee(e!=null,"submissionNumber must be defined");let t=Gr(Xt(r)),n=r.submissionAnswer;return Ee(n!=null,"submissionAnswer must be defined"),{courseId:t,submissionNumber:e,submissionAnswer:n}}function z1(r){let{store:e,courseId:t,submissionNumber:n}=r,o="submission-preview",i=Yh({store:e,courseId:t,submissionNumber:n});return Io({url:xE({...r,twa:e.twa}),type:o,title:i})}function aY(r,e){return()=&gt;({submissionAnswerPageIndexStates:{[r]:{$set:e}}})}function hU(r){return()=&gt;({arrivedDocument:{$set:r}})}function lY(){return()=&gt;({arrivedDocument:{$set:void 0}})}function fU(r){return e=&gt;{var t;if(((t=e.arrivedDocument)==null?void 0:t.id)===r)return{arrivedDocument:{$set:void 0}}}}function mU(r,e){return r==="self-study"?()=&gt;({notes:{byId:{$merge:rn(e.map(t=&gt;[t.id,t]))},selfStudyIds:{$set:e.filter(t=&gt;!t.is_deleted).reverse().map(t=&gt;t.id)}}}):()=&gt;({notes:{byId:{$merge:rn(e.map(t=&gt;[t.id,t]))},byCourseId:{[r]:{$set:e.filter(t=&gt;!t.is_deleted).reverse().map(t=&gt;t.id)}}}})}function uY(r,e,t=e.submissions.length){var a;let n=e.submissions.map(l=&gt;pn(r,l.submission_number)),o=rn(e.submissions.map(l=&gt;[pn(r,l.submission_number),l])),i=Math.min(e.submissions.length-1,t-1),s=(a=e.submissions[i])==null?void 0:a.submission_number;return l=&gt;{var c;let u=(c=l.submissions.byCourseId[r])!=null?c:[],d=new Set(u.concat(n));return{submissions:{byKey:{$merge:o},byCourseId:{[r]:{$set:Array.from(d)}},updatedAt:{$set:Date.now()}},submissionsOldest:{byCourseId:{[r]:{$set:e.oldest}}},lastSubmissionId:{byCourseId:{[r]:{$set:s}}}}}}function dY(r,e,t){let n=pn(r,e);return()=&gt;({submissionAnswers:{byId:{$merge:rn(t.map(o=&gt;[o.id,o]))},bySubmissionKey:{[n]:{$set:t.map(o=&gt;o.id)}}}})}function cY(r,e,t){return n=&gt;{var l;let o=pn(r,e),s=((l=n.submissionAnswers.bySubmissionKey[o])!=null?l:[]).map(u=&gt;n.submissionAnswers.byId[u]).filter(u=&gt;!!u),a=s.findIndex(u=&gt;u.author_key===t.author_key);return a!==-1?s[a]=t:s.push(t),{submissionAnswers:{byId:{$merge:rn(s.map(u=&gt;[u.id,u]))},bySubmissionKey:{[o]:{$set:s.map(u=&gt;u.id)}}}}}}function pY(r,e){return t=&gt;{var a;let n=t.userInfo.user_id,o=pn(r,e),s=((a=t.submissionAnswers.bySubmissionKey[o])!=null?a:[]).filter(l=&gt;{let u=t.submissionAnswers.byId[l];return(u==null?void 0:u.author_id)===n});return{submissionAnswers:{bySubmissionKey:{[o]:{$set:s}}}}}}function hY(r,e){return t=&gt;{var a;let n=t.userInfo.user_id,o=pn(r,e),s=((a=t.submissionAnswers.bySubmissionKey[o])!=null?a:[]).map(l=&gt;{let u=t.submissionAnswers.byId[l];return u&amp;&amp;u.author_id!==n&amp;&amp;(u={...u,author_id:void 0,author_is_teacher:void 0,author_name:void 0}),u}).filter(l=&gt;!!l);return{submissionAnswers:{byId:{$merge:rn(s.map(l=&gt;[l.id,l]))}}}}}function c_(r){return e=&gt;{let{courseId:t,submissionNumber:n,authorId:o,attributes:i}=r,s=rg(t,n,o),a=e.submissionHistoryAttributes[s];if(!(a&amp;&amp;i.latest_generation&lt;a.latest_generation))return{submissionHistoryAttributes:{[s]:{$set:i}}}}}function gU(r){return e=&gt;{var c;let{courseId:t,submissionNumber:n,authorId:o,data:i}=r,s=i.history,a=rg(t,n,o),l=new Set((c=e.submissionAnswers.byGenerationKey[a])!=null?c:[]);s.forEach(p=&gt;l.add(p.id));let u=[...l.values()];u.sort((p,h)=&gt;h-p);let d=e.submissionHistoryAllLoaded.byKey[a]||!i.has_more;return{submissionAnswers:{byId:{$merge:rn(s.map(p=&gt;[p.id,p]))},byGenerationKey:{[a]:{$set:u}}},submissionHistoryAllLoaded:{byKey:{$set:{[a]:d}}}}}}function H1(r){return()=&gt;({pushTokenState:{$set:r}})}function fY(r){return()=&gt;({twa:{$set:r}})}function mY(r){return()=&gt;({newSubmissionDialog:{$set:r}})}function lS(){return()=&gt;({newSubmissionDialog:{$set:void 0}})}function G1(r){return()=&gt;({leadingWebCardExtensionDialogState:{$set:r}})}function W1(){return()=&gt;({drawer:{open:{$set:!1}},fixedUIHit:{$set:void 0},editor:{$set:void 0},preferenceOpen:{$set:!1},devtoolOpen:{$set:!1},submissionNumber:{$set:void 0},submissionAnswer:{$set:void 0},submissionComparisonIds:{$set:void 0},uploadingDocument:{$set:void 0},submittingDocument:{$set:void 0},sendingDocument:{$set:void 0},teacherToolVisible:{$set:!0},materialBoxOpen:{$set:!1},timelineOpen:{$set:!1},timelineEntry:{$set:void 0},submissionBoxOpen:{$set:!1},userProfileOpen:{$set:!1},cameraDialogOpen:{$set:!1},addSheetDialogOpen:{$set:!1},addTextCardDialogOpen:{$set:!1},addWebCardDialogOpen:{$set:!1},addQuizCardDialogOpen:{$set:!1},leadingWebCardExtensionDialogState:{$set:void 0},arrivedDocument:{$set:void 0},userGroupJoinCode:{$set:void 0},highlightedCardId:{$set:void 0}})}var lc=oe(ve());var gp=oe(ve(),1);var vU=new Map,p_=new WeakMap,gY=0,ibe;function sbe(r){return r?(p_.has(r)||(gY+=1,p_.set(r,gY.toString())),p_.get(r)):"0"}function abe(r){return Object.keys(r).sort().filter(e=&gt;r[e]!==void 0).map(e=&gt;`${e}_${e==="root"?sbe(r.root):r[e]}`).toString()}function lbe(r){let e=abe(r),t=vU.get(e);if(!t){let n=new Map,o,i=new IntersectionObserver(s=&gt;{s.forEach(a=&gt;{var l;let u=a.isIntersecting&amp;&amp;o.some(d=&gt;a.intersectionRatio&gt;=d);r.trackVisibility&amp;&amp;typeof a.isVisible=="undefined"&amp;&amp;(a.isVisible=u),(l=n.get(a.target))==null||l.forEach(d=&gt;{d(u,a)})})},r);o=i.thresholds||(Array.isArray(r.threshold)?r.threshold:[r.threshold||0]),t={id:e,observer:i,elements:n},vU.set(e,t)}return t}function ube(r,e,t={},n=ibe){if(typeof window.IntersectionObserver=="undefined"&amp;&amp;n!==void 0){let l=r.getBoundingClientRect();return e(n,{isIntersecting:n,target:r,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=&gt;{}}let{id:o,observer:i,elements:s}=lbe(t),a=s.get(r)||[];return s.has(r)||s.set(r,a),a.push(e),i.observe(r),function(){a.splice(a.indexOf(e),1),a.length===0&amp;&amp;(s.delete(r),i.unobserve(r)),s.size===0&amp;&amp;(i.disconnect(),vU.delete(o))}}function vY({threshold:r,delay:e,trackVisibility:t,rootMargin:n,root:o,triggerOnce:i,skip:s,initialInView:a,fallbackInView:l,onChange:u}={}){var d;let[c,p]=gp.useState(null),h=gp.useRef(),[f,m]=gp.useState({inView:!!a,entry:void 0});h.current=u,gp.useEffect(()=&gt;{if(s||!c)return;let C;return C=ube(c,(x,y)=&gt;{m({inView:x,entry:y}),h.current&amp;&amp;h.current(x,y),y.isIntersecting&amp;&amp;i&amp;&amp;C&amp;&amp;(C(),C=void 0)},{root:o,rootMargin:n,threshold:r,trackVisibility:t,delay:e},l),()=&gt;{C&amp;&amp;C()}},[Array.isArray(r)?r.toString():r,c,o,n,i,s,t,l,e]);let g=(d=f.entry)==null?void 0:d.target,v=gp.useRef();!c&amp;&amp;g&amp;&amp;!i&amp;&amp;!s&amp;&amp;v.current!==g&amp;&amp;(v.current=g,m({inView:!!a,entry:void 0}));let b=[p,f.inView,f.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}var rd=()=&gt;{let[r,e]=(0,lc.useReducer)((t,n)=&gt;t+1,0);return()=&gt;e(r+1)},jn=r=&gt;{(0,lc.useEffect)(r,[])},nd=r=&gt;{(0,lc.useEffect)(()=&gt;r,[])},$r=function(r){return(0,lc.useReducer)((e,t)=&gt;({...e,...t}),r)},Al=(r,e)=&gt;{let t=(0,lc.useRef)(!0);(0,lc.useEffect)(()=&gt;{if(t.current){t.current=!1;return}return r()},e)};function uS(r){let[e,t]=(0,lc.useState)(()=&gt;{let n=N0(r);return n.subscribe(o=&gt;t(o)),n});return e}function bY(r){return typeof IntersectionObserver=="undefined"?{ref:()=&gt;{},inView:!0}:vY(r)}function Do(){let r;return(e,t)=&gt;(r&amp;&amp;clearTimeout(r),r=setTimeout(e,t),r)}function mg(){let r,e=Do();return{set:(o,i)=&gt;(r=e(()=&gt;{o(),r=void 0},i),r),clear:()=&gt;{clearTimeout(r),r=void 0},isSet:()=&gt;r!==void 0}}var dS=dbe(1e3);function dbe(r){let e,t=0,n=new Map;return{subscribe:i=&gt;{let s=t++;return n.set(s,i),e||(e=window.setInterval(()=&gt;{for(let[a,l]of n)l()},r)),{close:()=&gt;{n.delete(s),n.size===0&amp;&amp;(window.clearInterval(e),e=void 0)}}}}}var ao=oe(ve()),ZR=oe(ve());var Zn=oe(ve());function h_(r){fe.log("restoreDefaultBackEvent"),window.onpopstate=e=&gt;{let t=Nq(r,window.location.href);if(t&amp;&amp;(window.document.title=t),e.state){let n={uploadingDocument:void 0,submittingDocument:void 0,sendingDocument:void 0,materialBoxOpen:!1,preferenceOpen:!1,userProfileOpen:!1,cameraDialogOpen:!1,addTextCardDialogOpen:!1,addSheetDialogOpen:!1,addWebCardDialogOpen:!1},o=e.state;fe.log("popState",o),r.reduce(()=&gt;({$merge:{...o,...n}}))}else throw new Error("empty state on popstate")}}function f_(r,e){let t=G0(r),{title:n}=window.document,{href:o}=window.location;window.onpopstate=()=&gt;{history.pushState(t,n,o),window.document.title="",window.document.title=n,e==null||e()}}var bU=class{constructor(){this.authorizations=new Map}getEndpoint(e){let t=ie.initialState.userInfo.app_endpoints.find(n=&gt;n.app_id===e);if(t!=null&amp;&amp;t.endpoint)return`${t.endpoint.match("loilo")?"https":"http"}://${t.endpoint}`}mustGetEndpoint(e){let t=this.getEndpoint(e);return Ee(t!=null,"app_endpoints must be defined: app_id="+e),t}async mustIssue(e){let t=this.authorizations.get(e);if(t){let n=new Date().getTime();if(new Date(t.expired_at).getTime()&gt;n)return t}return await this.forceIssue(e)}async issue(e){try{return this.mustIssue(e)}catch(t){if(Je.catchError(t))return;throw t}}async forceIssue(e){let t=await ie.lnsClient.authenticateAppToken(e);return this.authorizations.set(e,t),t}},Vr=new bU;var uc={x:90,y:70},$1=class{constructor(e){this.nextLeftTop=De();this.currentMaxHeight=0;this.card=e,this.reset()}get scale(){return Eo(this.card.size)}get mx(){return uc.x*this.scale}get my(){return uc.y*this.scale}get right(){return this.card.bounds.x+this.card.bounds.width}add(e,t){let n=Nt(e,this.scale),o=qe(this.nextLeftTop.x,this.nextLeftTop.y,n.width,n.height);return t&amp;&amp;(o.x+=(wi*2+Aa)*this.scale),this.updateNextPosition(o,n),o}set(e,t){let n=Nt(t,this.scale),o=qe(e.x-n.width/2,e.y-n.height/2,n.width,n.height);return this.updateNextPosition(o,n),o}reset(){let{x:e,y:t}=this.card.bounds;this.nextLeftTop=De(e+this.mx,t+this.my),this.currentMaxHeight=0}updateNextPosition(e,t){let{width:n,height:o}=t;this.currentMaxHeight=Math.max(this.currentMaxHeight,o),this.nextLeftTop={x:e.x+e.width+this.mx,y:e.y},this.nextLeftTop.x+n&gt;this.right&amp;&amp;(this.nextLeftTop={x:this.card.bounds.x+this.mx,y:this.nextLeftTop.y+this.currentMaxHeight+this.my},this.currentMaxHeight=0)}};var V1=class{constructor(e){this.params=e;this.positions=[];this.hasBaseItem=!1;this.gap=Bs(uc,e.scale),this.handleWith=(wi+Aa)*e.scale;let t=e.firstItem,n=t instanceof Go?t.size:t;this.maxHeight=n.height,this.offsetX=n.width;let o=De(n.width*.5,n.height*.5);this.positions.push(o),t instanceof Go&amp;&amp;e.baseItem===t?(this.hasBaseItem=!0,this._translation=De(t.position.x-o.x,0)):this._translation=e.initPosition}get translation(){return this._translation}append(e){return e instanceof Go?this.appendCard(e):this.appendSize(e)}map(){let e=this.params.offsetY+this.maxHeight*.5;return this.hasBaseItem&amp;&amp;this.params.baseItem&amp;&amp;(this._translation.y=this.params.baseItem.position.y-e),this.positions.map(t=&gt;De(t.x,e))}nextRow(e){if(this.positions.length&lt;1)throw new Error("not found arranged targets");return new V1({firstItem:e,initPosition:this._translation,scale:this.params.scale,offsetY:this.params.offsetY+this.maxHeight+this.gap.y,maxX:this.params.maxX,baseItem:this.params.baseItem})}appendCard(e){let t=e.foldHandleVisible()?this.handleWith:0,n=this.offsetX+this.gap.x+t+e.size.width;if(this.positions.length&gt;=V1.maxRow&amp;&amp;n&gt;this.params.maxX)return!1;let o=De(this.offsetX+this.gap.x+t+e.size.width*.5,this.params.offsetY+e.size.height*.5);return this.positions.push(o),this.offsetX=n,this.maxHeight=Math.max(this.maxHeight,e.size.height),this.params.baseItem&amp;&amp;this.params.baseItem===e&amp;&amp;(this.hasBaseItem=!0,this._translation=De(e.position.x-o.x,0)),!0}appendSize(e){if(this.positions.length&gt;=V1.maxRow)return!1;let t=De(this.offsetX+this.gap.x+e.width*.5,this.params.offsetY+e.height*.5);return this.positions.push(t),this.offsetX=this.offsetX+this.gap.x+e.width,this.maxHeight=Math.max(this.maxHeight,e.height),!0}},m_=V1;m_.maxRow=4;function cS(r,e,t=1,n,o){if(e.length&lt;1)throw new Error("arrange item array length is zero");let i=e[0];if(e[0]instanceof Go&amp;&amp;n===void 0)throw new Error("need maxX when arrange cards");let s=new m_({firstItem:i,initPosition:r,scale:t,offsetY:0,maxX:n,baseItem:o}),a=[];for(let l=1;l&lt;e.length;l++)s.append(e[l])||(a=a.concat(s.map()),s=s.nextRow(e[l]));return a=a.concat(s.map()),a.map(l=&gt;De(l.x+s.translation.x,l.y+s.translation.y))}var yY=(r,e)=&gt;{let t=r.headGroup(),n=t.parent?t.parent.bounds.x+t.parent.bounds.width:e.x+e.width,o=r.bounds.x+r.bounds.width;return Math.max(0,Math.min(n,n-o))},cbe=r=&gt;!(r.hasPrevCardOrGroup||r.tail().hasNextCardOrGroup);function pbe(r,e,t){let n=[...r.iterator()],o=yY(r,e),i=De(r.bounds.x,r.bounds.y),s=cS(i,n,t,o);for(let a=0;a&lt;n.length;a++){let l=s[a];We(tf({cardId:n[a].id,x:l.x,y:l.y}))}We(rf(r.id,!1))}function g_({card:r,visibleRect:e}){let t=us(r);if(cbe(r)&amp;&amp;r.isFolded){pbe(r,e,t);return}let n=[];for(let l of r.connectedGroupHeadCards())l.isFolded?n.push(l):n=n.concat([...l.iterator()]);if(n.length&lt;1)return;let o=De(n[0].bounds.x,n[0].bounds.y),i=yY(r,e),a=cS(o,n,t,i,r);if(!a.every((l,u)=&gt;ec(l,n[u].position)))for(let l=0;l&lt;n.length;l++){let u=n[l],{x:d,y:c}=a[l];if(u.isFolded){let p=d-u.position.x,h=c-u.position.y;We(pS({topOfGroup:u.id,topX:d,topY:c,deltaX:p,deltaY:h,animationFrom:u.position}))}else We(tf({cardId:u.id,x:d,y:c,animationFrom:u.position}))}}var dc,gg=class{constructor(e=1,t=0,n=0,o=1,i=0,s=0){V7(this,dc,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.tz=0;this.a=e,this.b=t,this.c=n,this.d=o,this.e=i,this.f=s}static set(e,t,n,o,i,s,a){return e.a=t,e.b=n,e.c=o,e.d=i,e.e=s,e.f=a,e}static setMatrix(e,t){return gg.set(e,t.a,t.b,t.c,t.d,t.e,t.f)}static mul(e,t,n){let{a:o,b:i,c:s,d:a,e:l,f:u}=n,{a:d,b:c,c:p,d:h,e:f,f:m}=t;return e.a=d*o+p*i,e.c=d*s+p*a,e.e=d*l+p*u+f,e.b=c*o+h*i,e.d=c*s+h*a,e.f=c*l+h*u+m,e}static invert(e,t){let n=t.a,o=t.b,i=t.c,s=t.d,a=t.e,l=t.f,u=n*s-o*i,d=s/u,c=-o/u,p=-i/u,h=n/u,f=(i*l-s*a)/u,m=-(n*l-o*a)/u;return gg.set(e,d,c,p,h,f,m)}clone(){return new gg(this.a,this.b,this.c,this.d,this.e,this.f)}invertSelf(){return gg.invert(this,this)}inverted(e=new gg){return gg.invert(e,this)}applied(e){if(Bh(e)&amp;&amp;Ja(e))return this.transformRect(qe(),e);if(Bh(e))return this.transformPoint(De(),e);if(Ja(e))return this.transformSize($e(),e);throw Error("invalid argument")}transformPoint(e,t){return this.transformPointXY(e,t.x,t.y)}transformPointXY(e,t,n){return Xj(e,this.cross(t,n))}transformSize(e,t){return this.transformSizeWH(e,t.width,t.height)}transformSizeWH(e,t,n){let o=t*this.a+n*this.c,i=n*this.d+t*this.b;return oE(e,o,i)}transformRect(e,t){return this.transformRectXYWH(e,t.x,t.y,t.width,t.height)}transformRectXYWH(e,t,n,o,i){let s=[[t,n],[t+o,n],[t+o,n+i],[t,n+i]],a=0,l=0,u=0,d=0,c=!1,p=!1,h=!1,f=!1;for(let C=0;C&lt;s.length;C++){let[x,y]=s[C],{x:S,y:T}=this.cross(x,y);(!c||S&lt;a)&amp;&amp;(c=!0,a=S),(!p||S&gt;l)&amp;&amp;(p=!0,l=S),(!h||T&lt;u)&amp;&amp;(h=!0,u=T),(!f||T&gt;d)&amp;&amp;(f=!0,d=T)}let m=a,g=u,v=l-a,b=d-u;return tK(e,m,g,v,b)}set(e,t,n,o,i,s){return this.a=e,this.b=t,this.c=n,this.d=o,this.e=i,this.f=s,this}setMatrix(e){return this.set(e.a,e.b,e.c,e.d,e.e,e.f)}append(e,t,n,o,i,s){let{a,b:l,c:u,d,e:c,f:p}=this,[h,f,m,g,v,b]=[e,t,n,o,i,s];return this.a=a*h+u*f,this.c=a*m+u*g,this.e=a*v+u*b+c,this.b=l*h+d*f,this.d=l*m+d*g,this.f=l*v+d*b+p,this}prepend(e,t,n,o,i,s){let{a,b:l,c:u,d,e:c,f:p}=this,[h,f,m,g,v,b]=[e,t,n,o,i,s];return this.a=h*a+m*l,this.c=h*u+m*d,this.e=h*c+m*p+v,this.b=f*a+g*l,this.d=f*u+g*d,this.f=f*c+g*p+b,this}appendMatrix(e){return this.append(e.a,e.b,e.c,e.d,e.e,e.f)}prependMatrix(e){return this.prepend(e.a,e.b,e.c,e.d,e.e,e.f)}scale(e,t=e){return this.prepend(e,0,0,t,0,0)}rotate(e,t){let n=e*f4[t],o=Math.cos(n),i=Math.sin(n);return this.prepend(o,i,-i,o,0,0)}translate(e,t){return this.prepend(1,0,0,1,e,t)}cross(e,t){return{x:this.a*e+this.c*t+this.e,y:this.b*e+this.d*t+this.f}}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}equals(e){return this.a===e.a&amp;&amp;this.b===e.b&amp;&amp;this.c===e.c&amp;&amp;this.d===e.d&amp;&amp;this.e===e.e&amp;&amp;this.f===e.f}get tx(){return this.e}set tx(e){this.e=e}get ty(){return this.f}set ty(e){this.f=e}get isIdentity(){return this.a===1&amp;&amp;this.b===0&amp;&amp;this.c===0&amp;&amp;this.d===1&amp;&amp;this.e===0&amp;&amp;this.f===0}toGlMatrix(){return Ch(this,dc)[0]=this.a,Ch(this,dc)[1]=this.b,Ch(this,dc)[4]=this.c,Ch(this,dc)[5]=this.d,Ch(this,dc)[12]=this.tx,Ch(this,dc)[13]=this.ty,Ch(this,dc)[14]=this.tz,Ch(this,dc)}toCSSTransform(){return`matrix(${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e}, ${this.f})`}},ft=gg;dc=new WeakMap;function $i(r,e,t,n){let o=1;return r&gt;=t&amp;&amp;e&gt;=n?o=Math.min(r/t,e/n):r&gt;=t&amp;&amp;e&lt;n?o=e/n:r&lt;t&amp;&amp;e&gt;=n?o=r/t:o=Math.min(e/n,r/t),o}function Xr(r,e){return $i(r.width,r.height,e.width,e.height)}function vp(r,e){let t=e,n=$i(t.width,t.height,r.width,r.height),o=r.width*n,i=r.height*n,s=t.x+(t.width-o)*.5,a=t.y+(t.height-i)*.5;return{x:s,y:a,width:o,height:i}}function CY(r,e){if(!(!Li(r.width)||r.width===0||!Li(r.height)||r.height===0)&amp;&amp;!(!Li(e.width)||e.width===0||!Li(e.height)||e.height===0))if(r.width/r.height&gt;e.width/e.height){let t=r.height/e.height,n=(r.width-e.width*t)/2;return new ft(t,0,0,t,n,0)}else{let t=r.width/e.width,n=(r.height-e.height*t)/2;return new ft(t,0,0,t,0,n)}}function od(r,e){if(typeof e!="number"&amp;&amp;(e=e.width*e.height),!isFinite(r.width)||isNaN(r.width)||r.width&lt;=0||!isFinite(r.height)||isNaN(r.height)||r.height&lt;=0||e&lt;=0||!isFinite(e)||isNaN(e))return;let t=r.width*r.height;return Math.sqrt(e/t)}function ds(r,e){let t=od(r,e);if(t===void 0)throw new Error(`size is invalid: [${r.width}, ${r.height}]`);return t}function br(r,e){let t=od(r,e);return t===void 0?{width:0,height:0}:{width:r.width*t,height:r.height*t}}function yU({bounds:r,canvas:e,margins:t}){let n=$i(e.width,e.height,r.width+t.left+t.right,r.height+t.top+t.bottom),[o,i]=[r.x+r.width/2,r.y+r.height/2];o*=n,i*=n;let s=e.width/2-o,a=e.height/2-i;return new ft(n,0,0,n,s,a)}var CU=oe(vm());function uu(r){return Rh(r)?r:(CU.default.notify(new Error("invalid card position"),e=&gt;{e.addMetadata("arguments",{x:`${r.x}`,y:`${r.y}`})}),De())}function SY(r){let{width:e,height:t}=r;return e&lt;=0||t&lt;=0?(CU.default.notify(new Error("invalid card size"),n=&gt;{n.addMetadata("arguments",{width:`${e}`,height:`${t}`})}),kt):r}function hS(r){let{x:e,y:t,width:n}=r;return{x:e,y:t,width:n}}function wY(r){return typeof r=="object"&amp;&amp;hbe(r.type)}function SU(r){return r==="brush"||r==="pen"}function hbe(r){return r==="eraser"||r==="highlighter"||r==="pencil"}function TY(r){var i;let e=JSON.parse(r),t=(i=e.data.contents)!=null?i:[],n=v_(t),{revision:o}=e.data;return{canvas:e.data.canvas,contents:n,revision:o}}function fbe(r){return r.id||r.data.id||Sr()}function vg(r){var l,u;let e=atob(r.data.$binary),t=new ArrayBuffer(e.length),n=new DataView(t);for(let d=0;d&lt;t.byteLength;d++)n.setUint8(d,e[d].charCodeAt(0));let o=0,i=[],s;for(r.type==="pen"||r.type==="brush"?s=12:s=8;o+s&lt;=n.byteLength;){let d=n.getFloat32(o,!0);o+=4;let c=n.getFloat32(o,!0);if(o+=4,r.type==="pen"||r.type==="brush"){let p=n.getFloat32(o,!0);o+=4,i.push({x:d,y:c,width:p})}else if(r.type==="eraser"||r.type==="highlighter"||r.type==="pencil"){let p=r.data.width;i.push({x:d,y:c,width:p})}}let a=fbe(r);if(r.type==="pen"||r.type==="brush"){let d=(u=(l=i[0])==null?void 0:l.width)!=null?u:0;return{id:a,type:r.type,color:r.data.color,width:d,points:i}}else{if(r.type==="highlighter"||r.type==="pencil"||r.type==="eraser")return{id:a,type:r.type,color:r.data.color,width:r.data.width,points:i};throw new Error("invalid type: "+r.type)}}function v_(r){return r.map(vg)}function xY(r,e){let t=e?12:8,n=new ArrayBuffer(t*r.length),o=new DataView(n),i=0;for(let a of r)o.setFloat32(i,a.x,!0),i+=4,o.setFloat32(i,a.y,!0),i+=4,e&amp;&amp;(o.setFloat32(i,a.width,!0),i+=4);let s=[];for(let a=0;a&lt;o.byteLength;a++)s[a]=String.fromCharCode(o.getUint8(a));return btoa(s.join(""))}function b_(r){let e,{id:t}=r;if(Ee(r.type!=="laser"),r.type==="brush"||r.type==="pen"){let n=xY(r.points,!0);e={type:r.type,id:t,data:{color:r.color,$binary:n}}}else{let n=xY(r.points,!1);e={type:r.type,id:t,data:{width:r.width,color:r.color,$binary:n}}}return e}function y_(r){return r.map(e=&gt;b_(e))}function DY(r,e,t){let{points:n}=vg(r.content),{x:o,y:i}=n[n.length-1],s=t.drawnGeometry("drawn").canvas,{margins:a}=t.content,l=Xr(t.contentSize,s),u=Xr(t.size,t.contentSizeWithMargins),d=new ft().translate(-s.width/2,-s.height/2).scale(l).translate((a.left-a.right)/2,(a.top-a.bottom)/2).scale(u).translate(t.position.x,t.position.y).cross(o,i);return{type:"pointerMoved",pointerType:"draw",user:{id:e.id,name:e.displayName},cardId:r.cardId,point:d}}function fS(r){return r==="annotation"?"annotations":"drawn"}function PY(r){return r.type==="connectorMoved"||r.type==="connectorDismissed"||r.type==="pointerMoved"||r.type==="stroke"&amp;&amp;(r.operation==="write"||r.operation==="cancel")?!1:!((r.type==="cardMoved"||r.type==="groupMoved"||r.type==="cardSizesChanged"||r.type==="cardMarginsChanged")&amp;&amp;!r.committed)}function AY({author:r,position:e,startPosition:t,url:n,contentSize:o,duration:i=.5}){e=uu(e);let s=zb({author:r,url:n,position:e,contentSize:o}),a=t?[{cardId:s.id,translation:{from:t,to:e,duration:i}}]:[];return{type:"cardsInserted",cards:[s],treeStates:[{id:s.id,children:[]}],transitions:a}}function IY({user:r,position:e,startPosition:t,quizContentBase:n,duration:o=.5}){let i=r.user_id;e=uu(e);let s=kU({author:{id:i,name:zt(r)},quizContentBase:n,position:e});return{type:"cardsInserted",cards:[s],transitions:[{cardId:s.id,translation:{from:t,to:e,duration:o}}]}}function EY({user:r,position:e,startPosition:t,contentBase:n,duration:o=.5}){let i=r.user_id;e=uu(e);let s=PU({author:{id:i,name:zt(r)},contentBase:n,position:e});return{type:"cardsInserted",cards:[s],transitions:[{cardId:s.id,translation:{from:t,to:e,duration:o}}]}}function _Y(r){let{position:e,text:t,backcolor:n,author:o,firedCard:i,isTransition:s}=r,a=Eo(i.size),l=Nt(kt,a),u=r.color.toARGBHex();r.backcolor.isTransparent()&amp;&amp;(u=AU(i));let d=pu({position:e,color:u,backcolor:n.toARGBHex(),size:l,author:o,text:t});DU(d,i);let c=i.bounds,p=s?[{cardId:d.id,translation:{from:De(e.x,c.y-l.height),to:De(e.x,e.y),duration:.5}}]:[];return{type:"cardsInserted",cards:[d],groupStates:[],connections:[],treeStates:[{id:i.id,children:[{id:d.id,children:[]}]}],transitions:p}}function FY({creator:r,author:e,position:t,url:n,contentSize:o,isTransition:i}){let s=zb({author:e,url:n,contentSize:o}),a=r?Eo(r.size):1,l=Nt(s.metadata.layout_size,a),u=r.bounds;s.metadata.layout_size=l,t=uu(t),s.metadata.position={left:t.x,top:t.y};let d=i?[{cardId:s.id,translation:{from:De(t.x,u.y-l.height),to:De(t.x,t.y),duration:.5}}]:[];return{type:"cardsInserted",cards:[s],treeStates:[{id:r.id,children:[{id:s.id,children:[]}]}],transitions:d}}function MY({creator:r,author:e,position:t,asset:n,contentSize:o}){t=uu(t);let i=sf({asset:n,contentSize:o,author:e,position:t}),s=r?Eo(r.size):1,a=Nt(i.metadata.layout_size,s),l=r.bounds;return i.metadata.layout_size=a,i.metadata.position={left:t.x,top:t.y},{type:"cardsInserted",cards:[i],treeStates:[{id:r.id,children:[{id:i.id,children:[]}]}],transitions:[{cardId:i.id,translation:{from:De(t.x,l.y-a.height),to:De(t.x,t.y),duration:.5}}]}}function wU({creator:r,type:e,position:t,file:n,user:o,ignoreTransition:i=!1}){var g;let s=e==="inside"?r:r==null?void 0:r.parent,a=s?Eo(s.size):1,l=n.toCards({user:o,position:t,parent:s});for(let v of l)DU(v,r);let u=[];for(let v=0;v&lt;l.length-1;v++){let[b,C]=[l[v],l[v+1]];u.push({from:b.id,to:C.id,as_different_group:!1})}let[d]=l,c=l.map(v=&gt;({id:v.id,children:[]})),p=r.bounds,h=[],f=[];d.type==="pdf"&amp;&amp;l.length&gt;1&amp;&amp;f.push({top_of_group:d.id,is_folded:!0});let m=[];if(i||(d.type==="pdf"&amp;&amp;l.length&gt;1?m=[{cardId:d.id,translation:{from:De(d.metadata.position.left,p.y-d.metadata.layout_size.height),to:De(d.metadata.position.left,d.metadata.position.top),duration:.5}}]:m=l.map(v=&gt;({cardId:v.id,translation:{from:De(v.metadata.position.left,p.y-v.metadata.layout_size.height),to:De(v.metadata.position.left,v.metadata.position.top),duration:.5}}))),e==="inside")return{type:"cardsInserted",cards:l,connections:u,groupStates:f,treeStates:[{id:r.id,children:c}],transitions:m};{let v=uc.x*a,b=d.metadata.layout_size,C=r.bounds.width/2+b.width/2+v,x=(wi*2+Aa)*a;l.length&gt;1&amp;&amp;r.next!==r.nextGroup&amp;&amp;(C+=x);let y={left:r.position.x+C,top:r.position.y},[S,T]=[y.left-d.metadata.position.left,y.top-d.metadata.position.top];for(let U of l){let{left:B,top:z}=U.metadata.position;U.metadata.position={left:B+S,top:z+T}}r.parent&amp;&amp;h.push({id:r.parent.id,children:l.map(U=&gt;({id:U.id,children:[]}))});let w=r.next||r.nextGroup,k=d.type==="pdf"&amp;&amp;l.length&gt;1;if(!r.pinned){if(u.push({from:r.id,to:d.id,as_different_group:k}),w){let U=l[l.length-1].id;u.push({from:U,to:w.id,as_different_group:k||w===r.nextGroup})}r.isFolded&amp;&amp;k&amp;&amp;(r.isHead&amp;&amp;f.push({top_of_group:r.id,is_folded:!1}),(g=r.next)!=null&amp;&amp;g.isTail&amp;&amp;f.push({top_of_group:r.next.id,is_folded:!1}))}let[A,I]=[r.position.x-d.metadata.position.left,r.position.y-d.metadata.position.top],E=l.map(U=&gt;({cardId:U.id,translation:{from:{x:U.metadata.position.left+A,y:U.metadata.position.top+I},to:{x:U.metadata.position.left,y:U.metadata.position.top},duration:.5}})),O=C;l.length&gt;1&amp;&amp;r.next!==r.nextGroup&amp;&amp;(O+=x);let Q=TU({insertedCardSize:d.metadata.layout_size,after:r,spaceH:O,duration:0}),j=[...E,...Q];return{type:"cardsInserted",cards:l,treeStates:h,groupStates:f,connections:u,transitions:j}}}function C_({creator:r,card:e,type:t,position:n,ignoreTransition:o=!1}){let i=e,s=t==="inside"?r:r.parent,a=s?Eo(s.size):1;if(e.gadgets.title&amp;&amp;dn(e.content.backcolor).isTransparent()&amp;&amp;(e.gadgets.title.forecolor=AU(s)),t==="inside"){let l=Nt(i.metadata.layout_size,a),u=r.bounds;i.metadata.layout_size=l,i.metadata.position={left:n.x,top:n.y},DU(i,r);let d=[];return o||(d=[{cardId:i.id,translation:{from:De(n.x,u.y-l.height),to:De(n.x,n.y),duration:.5}}]),{type:"cardsInserted",cards:[i],treeStates:[{id:r.id,children:[{id:i.id,children:[]}]}],transitions:d}}else{let l=uc.x*a,u=Nt(i.metadata.layout_size,a),d=r.bounds.width/2+u.width/2+l,c=u.width+l,p={left:r.position.x+d,top:r.position.y};i.metadata.layout_size=u,i.metadata.position=p;let h=[],f=[];r.parent&amp;&amp;h.push({id:r.parent.id,children:[{id:i.id,children:[]}]});let m=r.next||r.nextGroup;r.pinned||(f.push({from:r.id,to:i.id,as_different_group:!1}),m&amp;&amp;f.push({from:i.id,to:m.id,as_different_group:m===r.nextGroup}));let g=TU({insertedCardSize:i.metadata.layout_size,after:r,spaceH:c,duration:0}),v=[{cardId:i.id,translation:{from:r.position,to:{x:p.left,y:p.top},duration:.5}},...g];return{type:"cardsInserted",cards:[i],treeStates:h,connections:f,transitions:v}}}function TU(r){var d;let{insertedCardSize:e,after:t,spaceH:n,duration:o}=r,i=(d=t.next)!=null?d:t.nextGroup;if(!i)return[];let s=[],a=De(t.position.x+n,t.position.y),l;t.isFolded?i===t.nextGroup?l=[]:l=i.toTailIterator():l=i.toTailIteratorOverGroup();let u=e.height;for(let c of l)if(!(Math.abs(c.position.y-a.y)&gt;c.size.height/2+u/2))for(let h of c.familyIterator()){let f={x:h.position.x+n,y:h.position.y};s.push({cardId:h.id,translation:{from:h.position,to:f,duration:o}})}return s}function DU(r,e){let t=r.gadgets.title;if(!t)return;let n=Eo(e.size),i=of({card:e,clipLocalFontSize:iK})/n;t.font_size=i;for(let s=0;s&lt;t.attributes.length;s++)if(t.attributes[s].type==="font"){let a=t.attributes[s];a.value.size=i}}function NY({position:r,author:e,textColor:t,backColor:n,size:o,hoverId:i,startPosition:s,duration:a=.5,text:l}){r=uu(r);let u=pu({position:r,color:t,backcolor:n,size:o,author:e,text:l}),d=i?[{id:i,children:[{id:u.id,children:[]}]}]:[],c=s?[{cardId:u.id,translation:{from:s,to:r,duration:a}}]:[];return{type:"cardsInserted",cards:[u],treeStates:d,connections:[],groupStates:[],transitions:c}}function mS({position:r,author:e,contentSize:t,asset:n,startPosition:o,duration:i=.5}){r=uu(r);let s=sf({asset:n,contentSize:t,author:e,position:r});return o?{type:"cardsInserted",cards:[s],transitions:[{cardId:s.id,translation:{from:o,to:r,duration:i}}]}:{type:"cardsInserted",cards:[s],groupStates:[],connections:[],treeStates:[],transitions:[]}}function gS({author:r,asset:e,position:t,pageSizeList:n,startPosition:o,cardArea:i,duration:s=.5,usage:a}){let l=[],u=n.map(f=&gt;br(f,i)),d=De(t.x-u[0].width*.5,t.y-u[0].height*.5),c=cS(d,u);for(let f=0;f&lt;n.length;f++)l.push(cc({author:r,asset:e,pageIndex:f,pageSize:$e(n[f]),layoutSize:u[f],position:uu(c[f]),usage:a}));let p=[],h=[];if(l.length&gt;1){h=[{top_of_group:l[0].id,is_folded:!0}];for(let f=0;f&lt;l.length-1;f++)p.push({from:l[f].id,to:l[f+1].id,as_different_group:!1})}return o?{type:"cardsInserted",cards:l,groupStates:h,connections:p,treeStates:[],transitions:[{cardId:l[0].id,translation:{from:o,to:c[0],duration:s}}]}:{type:"cardsInserted",cards:l,groupStates:h,connections:p,treeStates:[],transitions:[]}}function bg({position:r,author:e,asset:t,type:n,avDuration:o,contentSize:i,startPosition:s,duration:a=.5}){r=uu(r);let l=n==="audio"?Hb({asset:t,duration:o,author:e,position:r,contentSize:i}):af({asset:t,duration:o,author:e,position:r,contentSize:i}),u=[];return s&amp;&amp;u.push({cardId:l.id,translation:{from:s,to:r,duration:a}}),{type:"cardsInserted",cards:[l],groupStates:[],connections:[],treeStates:[],transitions:u}}function mbe(r){let e=new Map,{card:t,idMapper:n,overGroup:o,isRootCard:i}=r,s=[],a=[],l=[],u=[],d=t.copyGroup({srcIdMap:e,overGroup:o,idMapper:n}),c=[],p=[];for(let b of d.iteratorOverGroup()){for(let C of b.familyIterator({withoutSelf:!1}))a.push(C.toJSON());s.push(...b.connections({withoutSelf:!1})),l.push(...b.groupStates()),u.push(b.treeState()),c.push(...b.favoriteItems()),p.push(...b.pinnedItems({withoutSelf:!0}))}let h=rX(t,o),f=us(t),m=gbe(h,f);h.rect&amp;&amp;t.parent&amp;&amp;(m=vbe(m,h,t.parent.bounds));for(let b of a){let C=b.metadata.position,x=C.left+m.x,y=C.top+m.y;b.metadata.position={left:x,top:y}}let g=[];t.parent?g.push({id:t.parent.id,children:u}):g.push(...u);let v=[];for(let b of o?t.iteratorOverGroup():t.iterator()){let C=e.get(b.id),x=b.position,y=a.find(k=&gt;k.id===C),{left:S,top:T}=y.metadata.position,w={cardId:C,translation:{from:x,to:{x:S,y:T},duration:.5}};v.push(w)}return{srcCardId:t.id,type:"cardsCopied",grouped:!0,isRootCard:i,cards:a,connections:s,groupStates:l,treeStates:g,transitions:v,favoriteItems:c,pinnedItems:p}}function gbe(r,e){let t,n=r.rect;return n?n.width&lt;n.height?t=new Pr(n.width,0):t=new Pr(0,n.height):t=new Pr,new Pr(uc).scaled(e).added(t)}function vbe(r,e,t){let n=e.rect;if(!n)return r;let{x:o,y:i}=r;return o=Math.min(t.x+t.width,n.x+n.width+o)-(n.x+n.width),i=Math.min(t.y+t.height,n.y+n.height+i)-(n.y+n.height),o=Math.max(t.x,n.x+o)-n.x,i=Math.max(t.y,n.y+i)-n.y,new Pr(o,i)}var kY=40,bbe=30;function ybe(r){let{card:e,idMapper:t,isRootCard:n}=r,o=new Map,i=e.copy(o,t);return i.pinned=!1,S_({src:e,copied:i,isRootCard:n})}function BY({card:r,target:e,isRootCard:t,idMapper:n=()=&gt;Sr()}){return e!=="single"?mbe({card:r,overGroup:e==="all",idMapper:n,isRootCard:t}):ybe({card:r,idMapper:n,isRootCard:t})}function RY(r,e,t=()=&gt;Sr()){let n=new Map,o=r.copy(n,t),i=br(xi,r.size),s=cc({author:r.author,asset:e,position:De(r.position),pageIndex:0,pageSize:xi,layoutSize:i,usage:"thinking_tool"});s.id=t(r.id);let a=ca(s),l=Xr(a.size,r.size),u=new ft;u.translate(-a.position.x,-a.position.y),u.scale(l),u.translate(a.position.x,a.position.y);for(let d of o.familyIterator()){let c=u.applied(d.position),p=Nt(d.size,l);d.position=c,d.size=p}for(let d of o.children)a.addChild(d);return a.favorite=r.favorite,S_({src:r,copied:a,isRootCard:!0})}function LY(r,e,t){let n=Sbe({src:e,author:r,idMapper:()=&gt;Sr()});return S_({src:e,copied:n,isRootCard:t})}async function OY({store:r,card:e,isRootCard:t,idMapper:n=()=&gt;Sr()}){let o;return e instanceof jr?o=await nX({store:r,card:e,idMapper:n}):o=await oX({store:r,card:e,idMapper:n}),S_({src:e,copied:o,isRootCard:t})}function S_(r){let{src:e,isRootCard:t,copied:n}=r,o=n.connections({withoutSelf:!0});t&amp;&amp;!e.pinned&amp;&amp;o.push({from:e.id,to:n.id,as_different_group:!1});let i=e.next||e.nextGroup;t&amp;&amp;i&amp;&amp;o.push({from:n.id,to:i.id,as_different_group:i===e.nextGroup});let s,a,l;if(e.parent){s=[{id:e.parent.id,children:[n.treeState()]}];let d=$e(kY,bbe),c=Cbe(n,{parent:e.parent,besideWith:e,baseGap:d});a=c.x-e.position.x,l=c.y-e.position.y}else s=[n.treeState()],a=(e.size.width+n.size.width)/2+kY,l=0;for(let d of n.familyIterator()){let{x:c,y:p}=d.position;d.position={x:c+a,y:p+l}}let u=[{cardId:n.id,translation:{from:e.position,to:n.position,duration:.5}}];if(t){let d=TU({insertedCardSize:n.size,after:e,spaceH:a,duration:0});u.splice(u.length,0,...d)}return{srcCardId:e.id,type:"cardsCopied",grouped:!1,isRootCard:t,cards:[...n.familyIterator()].map(d=&gt;d.toJSON()),connections:o,groupStates:n.groupStates(),treeStates:s,transitions:u,favoriteItems:n.favoriteItems(),pinnedItems:n.pinnedItems()}}var nf=({head:r,destPosition:e,startPosition:t,parent:n})=&gt;{let o=[],i=[],s=[],a=[],l=[],u=[],d=n?Eo(n.size):1;yp(()=&gt;r.memberAndChildrenIteratorOverGroup(),d,De(0,0));for(let g of r.iteratorOverGroup()){for(let v of g.familyIterator())o.push(v.toJSON());i.push(...g.groupStates()),s.push(...g.connections({withoutSelf:!1})),a.push(g.treeState()),l.push(...g.favoriteItems()),u.push(...g.pinnedItems())}n&amp;&amp;(a=[{id:n.id,children:[...a]}]);let c=new Map;for(let g of o)c.set(g.id,g);let p=[...r.connectedGroupHeadCards()];for(let g of p){let v=i.find(b=&gt;b.top_of_group===g.id);g.groupMemberCount()&lt;2||(v?v.is_folded=!0:i.push({top_of_group:g.id,is_folded:!0}))}let h=uc.y*d;e=uu(e);let f=De(e.x-r.size.width/2,e.y-r.size.height/2);for(let g of p){let v=c.get(g.id),b=f.x+v.metadata.layout_size.width/2,C=f.y+v.metadata.layout_size.height/2;v.metadata.position.left=b,v.metadata.position.top=C,f.y+=h+v.metadata.layout_size.height;for(let x of g.iterator())for(let y of x.familyIterator()){let S=c.get(y.id),T=y.position.x-g.position.x,w=y.position.y-g.position.y;S.metadata.position.left=b+T,S.metadata.position.top=C+w}}let m=[];if(t){let g=e.x-t.x,v=e.y-t.y;m=p.map(b=&gt;{let C=c.get(b.id),x=De(C.metadata.position.left,C.metadata.position.top),y=De(x.x-g,x.y-v);return{cardId:C.id,translation:{from:y,to:x,duration:.5}}})}return{cards:o,groupStates:i,connections:s,treeStates:a,transitions:m,type:"cardsInserted",favoriteItems:l,pinnedItems:u}},du=(r,e)=&gt;({type:"cardDeleted",cardId:r,toCardId:e}),On=(r,e)=&gt;({type:"cardEdited",cardId:r,replacement:e}),tf=({cardId:r,x:e,y:t,committed:n=!0,animationFrom:o})=&gt;({type:"cardMoved",cardId:r,position:{x:e,y:t},committed:n,transition:o?[{cardId:r,translation:{from:o,to:{x:e,y:t},duration:.3}}]:void 0}),UY=(r,e,t,n=!1)=&gt;({type:"connectorMoved",fromId:r,position:{x:e,y:t},disconnected:n}),x_=r=&gt;({type:"connectorDismissed",fromId:r}),j1=(r,e,t=!1)=&gt;({type:"connectorConnected",fromId:r,toId:e,asDifferentGroup:t}),zY=r=&gt;({type:"connectorDisconnected",fromId:r}),w_=(r,e,t)=&gt;{let n,o,i=r.tail().nextGroup===t;return e.isFolded?n={from:r.id,to:e.id,as_different_group:!0}:n={from:r.id,to:e.id,as_different_group:r.isFolded},e.isFolded?o={from:e.tail().id,to:t.id,as_different_group:!0}:o={from:e.id,to:t.id,as_different_group:i},{type:"connectorInserted",conn1:n,conn2:o}},rf=(r,e=!1)=&gt;({type:"groupStateChanged",topOfGroup:r,isFolded:e}),pS=({topOfGroup:r,topX:e,topY:t,deltaX:n,deltaY:o,committed:i=!0,animationFrom:s})=&gt;({type:"groupMoved",delta:{x:n,y:o},topPosition:{x:e,y:t},topOfGroup:r,committed:i,transition:s?[{cardId:r,translation:{from:s,to:{x:e,y:t},duration:.3}}]:void 0}),bp=r=&gt;({type:"groupDeleted",topOfGroup:r}),K1=r=&gt;{let{cardId:e,parentId:t,grouped:n,resize:o}=r;return{type:"treeStateChanged",cardId:e,parentId:t,grouped:n,resize:o}},T_=({point:r,card:e,grouped:t,corner:n,committed:o,startBounds:i,zoom:s})=&gt;{let{y:a,height:l,x:u,width:d}=e.bounds,c=a+l,p=u+d,h=us(e),{width:f,height:m}=JY({card:e,startBounds:i,scaleToParent:h,zoom:s}),{width:g,height:v}=eX({card:e,corner:n,startBounds:i}),b,C,x,y;if(n==="bbLeftTop")x=it(c-r.y,m,v),y=it(p-r.x,f,g),b="right",C="bottom";else if(n==="bbRightTop")x=it(c-r.y,m,v),y=it(r.x-u,f,g),b="left",C="bottom";else if(n==="bbRightBottom")x=it(r.y-a,m,v),y=it(r.x-u,f,g),b="left",C="top";else if(n==="bbLeftBottom")x=it(r.y-a,m,v),y=it(p-r.x,f,g),b="right",C="top";else throw new Error("invalid corner: "+n);let S=GY({vPivot:C,hPivot:b,h:x,w:y,card:e,grouped:t});return{type:"cardSizesChanged",firedCardId:e.id,changes:S,committed:o}};function HY({card:r,grouped:e,size:t,duration:n}){let o=GY({vPivot:"top",hPivot:"left",grouped:e,card:r,h:t.height,w:t.width,duration:n});return{type:"cardSizesChanged",firedCardId:r.id,changes:o,committed:!0}}function GY({vPivot:r,hPivot:e,grouped:t,card:n,h:o,w:i,duration:s}){let{width:a,height:l}=n.bounds,u=Math.min(i/a,o/l),d=[],c=t?Array.from(n.iterator()):[n],p=De();e==="left"?p.x=n.position.x-n.size.width/2:p.x=n.position.x+n.size.width/2,r==="top"?p.y=n.position.y-n.size.height/2:p.y=n.position.y+n.size.height/2;for(let h of c)for(let f of h.familyIterator()){let m=p.x-f.position.x,g=p.y-f.position.y,v=m*u+f.position.x,b=g*u+f.position.y,C=p.x-v,x=p.y-b,y;s&amp;&amp;(y={from:{position:f.position,size:f.size},duration:s}),d.push({cardId:f.id,layoutSize:{width:f.size.width*u,height:f.size.height*u},position:{x:f.position.x+C,y:f.position.y+x},transition:y})}return d}var WY=({point:r,card:e,corner:t,committed:n,startBounds:o,startContentWithMargins:i,zoom:s})=&gt;{let{x:a,y:l,width:u,height:d}=e.bounds,c=a+u,p=l+d,h=e.position.x,f=e.position.y,m=us(e),{width:g,height:v}=ZY({card:e,corner:t,startBounds:o,scaleToParent:m,zoom:s}),{width:b,height:C}=tX({card:e,corner:t,startBounds:o}),x,y=u,S=d;if(t==="bbLeftMiddle")y=it(c-r.x,g,b),x={x:c,y:f};else if(t==="bbRightMiddle")y=it(r.x-a,g,b),x={x:a,y:f};else if(t==="bbCenterTop")S=it(p-r.y,v,C),x={x:h,y:p};else if(t==="bbCenterBottom")S=it(r.y-l,v,C),x={x:h,y:l};else throw new Error("invalid corner:"+t);let T=xl(y,e.size.width,1),w=xl(S,e.size.height,1),k=Math.min(i.width,b4.width),A=Math.min(i.height,b4.height),I=xU(e,t,T,w),E=e.contentSize.width+I.left+I.right,O=e.contentSize.height+I.top+I.bottom;if(E&lt;k){let ge=k/e.contentSizeWithMargins.width;y=e.size.width*ge,T=xl(y,e.size.width,1),I=xU(e,t,T,w)}else if(O&lt;A){let ge=A/e.contentSizeWithMargins.height;S=e.size.height*ge,w=xl(S,e.size.height,1),I=xU(e,t,T,w)}let Q=x.x-e.position.x,j=x.y-e.position.y,U=Q*T+e.position.x,B=j*w+e.position.y,z=x.x-U,N=x.y-B,V={x:e.position.x+z,y:e.position.y+N},re=(e.contentSize.width+I.left+I.right)/e.contentSizeWithMargins.width,ce=(e.contentSize.height+I.top+I.bottom)/e.contentSizeWithMargins.height;return{type:"cardMarginsChanged",cardId:e.id,position:V,layoutSize:{width:e.size.width*re,height:e.size.height*ce},margins:I,committed:n}};function xU(r,e,t,n){let o=r.content.margins,i=r.contentSize,s=r.contentSizeWithMargins,a={...r.content.margins};return e==="bbLeftMiddle"?a.left=s.width*t-o.right-i.width:e==="bbRightMiddle"?a.right=s.width*t-o.left-i.width:e==="bbCenterTop"?a.top=s.height*n-o.bottom-i.height:e==="bbCenterBottom"&amp;&amp;(a.bottom=s.height*n-o.top-i.height),a}function cu(r,e){return{type:"pinStateChanged",cardId:r,pinned:e}}function $Y(r,e){return{type:"favoriteStateChanged",cardId:r,favorite:e}}function Cbe(r,e){let{parent:t,besideWith:n,baseGap:o}=e,i=Eo(t.size),s=o.width*i,a=o.height*i,l=De(n.bounds.x+n.bounds.width+s+r.bounds.width/2,n.bounds.y+n.bounds.height/2),u=t.bounds.x,d=t.bounds.x+t.bounds.width,c=t.bounds.y,p=t.bounds.y+t.bounds.height;return l.x+r.bounds.width/2&gt;d&amp;&amp;(l=De(u+s+r.bounds.width/2,n.bounds.y+n.bounds.height+a+r.bounds.height/2),l.y+r.bounds.height/2&gt;p&amp;&amp;(l=De(l.x,c+r.bounds.height/2+a))),l}function Sbe(r){let{src:e,author:t,idMapper:n}=r,o=JSON.stringify(e.toJSON()),{id:i,metadata:s,...a}=JSON.parse(o);t&amp;&amp;(s.author=t);let l=n(i),u=ca({id:l,metadata:s,...a});return u.gadgets.title&amp;&amp;(u.gadgets.title.text="",u.gadgets.title.attributes=[],u.gadgets.title.attribute_ranges=[]),u.gadgets.drawn=void 0,u.gadgets.annotations=void 0,u.gadgets.naration=void 0,u.gadgets.bgm=void 0,u}var VY=(r,e,t)=&gt;({type:"pointerMoved",pointerType:"text",cardId:r,user:{id:e.user_id,name:zt(e)},caretRect:t}),jY=(r,e,t)=&gt;({type:"pointerMoved",pointerType:"connector",cardId:r,user:{id:e.id,name:e.displayName},point:{x:t.x,y:t.y}}),D_=(r,e)=&gt;({type:"pointerMoved",pointerType:"card",cardId:r,user:{id:e.id,name:e.displayName}}),KY=({cardId:r,content:e,isRuler:t=!1,type:n})=&gt;({type:"stroke",operation:"write",cardId:r,target:fS(n),usage:t?"replace":"append",content:e}),qY=({cardId:r,strokeId:e,type:t})=&gt;({type:"stroke",operation:"cancel",cardId:r,target:fS(t),strokeId:e}),YY=({cardId:r,content:e,type:t})=&gt;({type:"stroke",operation:"add",cardId:r,target:fS(t),content:e}),XY=({cardId:r,strokeId:e,type:t})=&gt;({type:"stroke",operation:"delete",cardId:r,strokeId:e,target:fS(t)}),QY=r=&gt;({...r,type:"stroke",operation:"assetUpdated",target:fS(r.type)});function sX(r){return{shouldHandleCardEvent(e){let t=r.getStore();if(t.screenSharingState||on(t)){let{type:n,target:o}=e;return o==="card"&amp;&amp;["down","up"].includes(n)}return!0},onConnectorDismissed(e){r.getStore().screenSharingState||We(x_(e.id))},onCardClicked(e,t){iX(r,e)},onCardFullscreenButtonClicked(e){r.getStore().screenSharingState||iX(r,e)},onCardDeleted(e){r.getStore().screenSharingState||We(du(e.id))},onCardHeld(e,t){let n=r.getStore();n.screenSharingState||(e?t?n.reduce(qE({head:e.id,all:Array.from(e.memberAndChildrenIterator()).map(o=&gt;o.id)})):n.reduce(qE({head:e.id,all:Array.from(e.familyIterator()).map(o=&gt;o.id)})):n.reduce(qE(void 0),Lb(void 0)))},onCardMoved(e,t,n){r.getStore().screenSharingState||We(tf({cardId:e.id,x:t.x,y:t.y,committed:n}))},onContentMarginsChanged(e){r.getStore().screenSharingState||We(e)},onCardSizesChanged(e){r.getStore().screenSharingState||We(e)},onConnectorInserted(e,t,n){r.getStore().screenSharingState||We(w_(e,t,n))},onConnectorConnected(e,t,n){r.getStore().screenSharingState||We(j1(e.id,t.id,n))},onConnectorDisconnected(e){r.getStore().screenSharingState||We(zY(e.id))},onConnectorMoved(e,t,n){r.getStore().screenSharingState||We(UY(e.id,t.x,t.y,n))},onGroupDeleted(e){r.getStore().screenSharingState||We(bp(e.id))},onGroupMoved(e,{pos:t,delta:n},o){r.getStore().screenSharingState||We(pS({topOfGroup:e.id,topX:t.x,topY:t.y,deltaX:n.x,deltaY:n.y,committed:o}))},onGroupStateChanged(e,t){r.getStore().screenSharingState||We(rf(e.id,t))},treeStateChanged(e,t,n,o){r.getStore().screenSharingState||We(K1({cardId:e.id,parentId:t!=null?t:null,grouped:n,resize:o}))},onHoverCard(e){let t=r.getStore();t.screenSharingState||t.reduce(Lb(e==null?void 0:e.id))},onCardLoadingStateChanged(e,t,n){},onCardInsertionCompleted(e){},onShowBoundingBox(e,t){r.getStore().reduce(Hi({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:t}),hn(void 0),Ar(!0))},onDismissBoundingBox(){r.getStore().reduce(Ar(!1),ti())}}}var fo={shouldHandleCardEvent(){return!1},onCardClicked(r,e){},onCardFullscreenButtonClicked(r){},onCardDeleted(r){},onCardHeld(r,e){},onCardMoved(r,e,t){},onContentMarginsChanged(r){},onCardSizesChanged(r){},onConnectorInserted(r,e,t){},onConnectorConnected(r,e,t){},onConnectorDisconnected(r){},onConnectorDismissed(r){},onConnectorMoved(r,e,t){},onGroupDeleted(r){},onGroupMoved(r,e,t){},onGroupStateChanged(r,e){},treeStateChanged(r,e,t,n){},onHoverCard(r){},onCardLoadingStateChanged(r,e,t){},onCardInsertionCompleted(r){},onShowBoundingBox(){},onDismissBoundingBox(){}};function iX(r,e){let t=r.getStore(),n;t.editor?n=e.id:n=e.rootParent().id;let o=!t.screenSharingState;t.reduce(Xq({cardId:n,animate:!0,updatePushState:o}))}var mo=class{static getLowerLevel(e){switch(e){case"high":return"medium";case"medium":return"small";case"small":return}}static getSizeForLevel(e){return e==="medium"?{...ou}:{...f1}}static getMaxLevelForCard(e){return e.type==="picture"||e.type==="web"||e.type==="map"?"high":"medium"}static getThumbnailSize(e,t){if(e==="high")return t;let n=mo.getSizeForLevel(e);return br(t,n)}static getHighCanvasSize(e){let{canvas:t,thumbnailRect:n}=e;return $e(Math.floor(t.width*n.width),Math.floor(t.height*n.height))}static getLevel(e,t){let n=e.width*e.height*t*t;return p0&lt;n?"high":Ku&lt;n?"medium":"small"}static mipmapLevelHigherThan(e,t){return e==="medium"&amp;&amp;t==="small"?!0:e==="high"&amp;&amp;(t==="medium"||t==="small")}};function yg(r=!1){let e=r;function t(){e=!0}function n(){let o=e;return e=!1,o}return{mark:t,drain:n}}var vS=class{constructor(){this.thumbs=new Map;this.fetchingStates=new Fn(()=&gt;null);this.uploadingStates=new Fn(()=&gt;null);this.rotated=!1;this.deferredLoads=new Fn(()=&gt;[]);this.levelDirtyMap=new Fn(()=&gt;yg());this.timestamp=Date.now()}set(e,t){this.setInternal({level:e,image:t})}setInternal({level:e,image:t}){this.thumbs.set(e,t),this.markUpdated()}setThumbs({small:e,medium:t,high:n}){e&amp;&amp;this.set("small",e),t&amp;&amp;this.set("medium",t),n&amp;&amp;this.set("high",n)}delete(e){this.thumbs.delete(e),this.markUpdated()}get(e){return this.thumbs.get(e)}getForZoom(e,t){let n;for(n=mo.getLevel(e,t);n;n=mo.getLowerLevel(n)){let o=this.get(n);if(o)return{src:o,level:n}}}has(e){return this.thumbs.has(e)}setFetchingState(e,t){this.fetchingStates.set(e,t),this.markUpdated()}getFetchingState(e){return this.fetchingStates.get(e)}setUploadingState(e,t){this.uploadingStates.set(e,t),this.markUpdated()}setUploadingStates(e,t){for(let n of e)this.setUploadingState(n,t)}getUploadingState(e){return this.uploadingStates.get(e)}getUnderLevel(e){var n;let t=mo.getLowerLevel(e);return t?(n=this.get(e))!=null?n:this.getUnderLevel(t):this.get(e)}clear(){this.thumbs.clear();for(let e of this.levelDirtyMap.keys())this.levelDirtyMap.get(e).mark();this.markUpdated()}markUpdated(){this.timestamp=Date.now()}isLoading(){for(let e of["small","medium","high"])if(this.getFetchingState(e)==="fetching"||this.getUploadingState(e)==="uploading")return!0;return!1}async load(e,t){let n=this.levelDirtyMap.get(e).drain();if(!n&amp;&amp;(this.has(e)||this.rotated))return;let o=this.getFetchingState(e);if(o==="fetching"){let s=ss();return this.deferredLoads.get(e).push(s),s}let i=mo.getLowerLevel(e);if(i&amp;&amp;this.load(i,t),!(o instanceof Error&amp;&amp;!this.shouldRetryableError(o))){this.setFetchingState(e,"fetching");try{let s=await this.loadInternal(e,t,n);s&amp;&amp;this.setInternal({level:e,...s}),this.setFetchingState(e,"done")}catch(s){fe.error(`couldn't load mipmap: level=${e}`,s);let a=he.get().strings,l=iu(s,a.unexpectedErrorOccurred);this.setFetchingState(e,l)}for(let s of this.deferredLoads.get(e))s.resolve();this.deferredLoads.set(e,[])}}shouldRetryableError(e){return!(Je.catchError(e)||e instanceof sr&amp;&amp;e.status===403)}};var k_=Symbol("None"),lf=class{constructor(){this.value=k_;this._state=null;this.waiters=[]}get(){if(this.value!==k_)return{value:this.value}}loadedAtLeastOnce(){return this.value!==k_}get state(){return this._state}set(e){this.value=e,this._state="done"}async fetch(e){this._state="fetching";try{let t=await e();this.value=t,this._state="done",this.waiters.forEach(n=&gt;n.resolve({value:t})),this.waiters=[]}catch(t){let n;t instanceof Error?n=t:n=new Error(`${t}`),this._state=n,this.waiters.forEach(o=&gt;o.resolve(void 0)),this.waiters=[]}return this.get()}async wait(){if(this.value!==k_)return{value:this.value};if(this._state==="fetching"){let e=ss();return this.waiters.push(e),e}else return}};function aX(r,e){let t=[],n=new Set;return async o=&gt;{let i=e(o);if(n.has(i)){let s=ss();return t.push([i,s]),s}return n.add(i),new Promise((s,a)=&gt;{function l(u,d){for(let c=0;c&lt;t.length;c++){let[p,h]=t[c];p===i&amp;&amp;(d?h.reject(u):h.resolve(u),t.splice(c,1),c--)}}r(o).then(u=&gt;{s(u),l(u,!1)}).catch(u=&gt;{a(u),l(u,!0)}).finally(()=&gt;{n.delete(i)})})}}var Y1=oe(bS());function xbe(r){return Pa(r,{id:Wu,metadata:{position:{left:Or,top:Or},author:{id:Or,name:Wu}}})}function wbe(r){return Pa(r,{from:Wu,to:Wu,as_different_group:d0})}function Tbe(r){return Pa(r,{top_of_group:Wu,is_folded:d0})}var P_={version:rE("1.0.0.0","2.0.0.0"),format:"note",data:{metadata:{created_by:wl},frames:Xc(xbe),connections:Xc(wbe),group_states:Xc(Tbe)}};function Dbe(r){return Pa(r,{id:Wu,relative_position:Bh})}var A_=Object.assign({},P_,{version:"2.1.0.0",data:Object.assign({fold_states:Xc(Dbe)},P_.data)});function uX(r){Qc(r,P_);let{version:e,data:t,...n}=r;return{...n,version:"2.1.0.0",data:{...t,fold_states:[]}}}function An(r){if(r==null)return{left:0,right:0,bottom:0,top:0};if(typeof r=="number"){let e=r;return{left:e,right:e,top:e,bottom:e}}else{let{left:e,top:t,bottom:n,right:o}=r;return{left:e,top:t,bottom:n,right:o}}}function I_(r,e){return An({left:r.left*e,top:r.top*e,right:r.right*e,bottom:r.bottom*e})}function dX(r){return Pa(r,{id:Wu,children:Xc(dX)})}var yS=Object.assign({},A_,{version:/^3\.(\d+)\.(\d+)\.(\d+)$/,features:Xc(wl),data:Object.assign({tree_states:Xc(dX)},A_.data)});function cX(r){Qc(r,A_);let{version:e,data:t,...n}=r,{frames:o,...i}=t;return{...n,version:"3.0.0.0",features:["sheet"],data:{...i,frames:o.map(kbe),tree_states:[]}}}function kbe(r){var h,f;let e=r.metadata.position?De(r.metadata.position.left,r.metadata.position.top):De(),t;r.type==="pdf"?t=(h=r.content.page_size)!=null?h:os:t=(f=r.content.size)!=null?f:os;let n=Um(kt)/Um(t),o=Nt(t,n),i=An(),s;if(r.type==="title"||r.type==="drawn")s={...r.content,margins:i};else{let m="#FFFFFFFF";s={...r.content,backcolor:m,margins:i}}let{drawn:a,title:l,annotations:u,bgm:d,naration:c}=r.gadgets,p={bgm:d,naration:c};if(a){let m=qe(0,0,1,1);p.drawn={...a,thumbnailRect:m}}if(u){let m=qe(0,0,1,1);p.annotations={...u,thumbnailRect:m}}if(l){let m=[{type:"font",value:{size:l.font_size,bold:!1}},{type:"foreground_color",value:l.forecolor}],g=[{index:0,range:{location:0,length:l.text.length}},{index:1,range:{location:0,length:l.text.length}}],v=!1;p.title={...l,attributes:m,attribute_ranges:g,vertical:v}}return{id:r.id,metadata:{position:{left:e.x,top:e.y},layout_size:o,duration:r.metadata.duration,author:{...r.metadata.author}},type:r.type,content:s,gadgets:p}}function pX(r){if(r.version!=="3.0.0.0")throw new Ho("version is not 3.0.0.0");let{version:e,data:t,...n}=r,{frames:o,...i}=t;return{version:"3.1.0.0",data:{frames:o.map(Pbe),favorite_items:[],pinned_items:[],...i},...n}}function Pbe(r){let e=r.type!=="video"&amp;&amp;r.type!=="audio",{metadata:t,...n}=r;return{...n,metadata:{...t,unlimited_recording_time:e}}}function hX(r){if(r.version!=="3.1.0.0")throw new Ho("version is not 3.1.0.0");let{version:e,data:t,...n}=r,{frames:o,...i}=t;return{version:"3.2.0.0",data:{frames:o,...i},...n}}function fX(r){if(r.version!=="3.2.0.0")throw new Ho("version is not 3.2.0.0");let{version:e,...t}=r;return{version:"3.3.0.0",...t}}function mX(r){if(r.version!=="3.3.0.0")throw new Ho("version is not 3.3.0.0");let{version:e,...t}=r;return{version:"3.4.0.0",...t}}function gX(r){if(r.version!=="3.4.0.0")throw new Ho("version is not 3.4.0.0");let{version:e,...t}=r;return{version:"3.5.0.0",...t}}function vX(r){if(r.version!=="3.5.0.0")throw new Ho("version is not 3.5.0.0");let{version:e,data:t,...n}=r;return{version:"3.6.0.0",data:{...t,locking_items:[]},...n}}function bX(r){if(r.version!=="3.6.0.0")throw new Ho("version is not 3.6.0.0");let{version:e,...t}=r;return{version:"3.7.0.0",...t}}function yX(r){if(r.version!=="3.7.0.0")throw new Ho("version is not 3.7.0.0");let{version:e,...t}=r;return{version:"3.8.0.0",...t}}var SS="3.8.0.0";var uf=class extends Error{constructor(t,n){super("note may be broken");this.error=t;this.type=n}};async function Cp(r,e,t){var p,h,f,m;let n=await Y1.default.loadAsync(r,t).catch(g=&gt;{throw new uf(g,0)}),o,i,s,a;try{[o,s,i,a]=await Promise.all([(p=n.file("version"))==null?void 0:p.async("text"),(h=n.file("body"))==null?void 0:h.async("text"),(f=n.file("header"))==null?void 0:f.async("text"),(m=n.file("share_metadata"))==null?void 0:m.async("text")])}catch(g){let v=he.get().strings,b=iu(g,v.unexpectedErrorOccurred);throw new uf(b,1)}if(!o||!s)throw new uf(new Error("missing required entries"),2);let l,u,d;try{l=JSON.parse(s),i&amp;&amp;(u=JSON.parse(i)),a&amp;&amp;(d=JSON.parse(a))}catch(g){let v=he.get().strings,b=iu(g,v.unexpectedErrorOccurred);throw new uf(b,3)}let c;if(o.match(/^\d+\n?$/))c=parseInt(o);else throw new uf(new Error("invalid version format"),4);return{version:c,header:u,note:Q1(l,e),share_metadata:d}}async function X1(r){return SX(r).generateAsync({type:"arraybuffer",compression:"DEFLATE"})}async function CX(r){return SX(r).generateAsync({type:"base64",compression:"DEFLATE"})}function SX({note:r,header:e,version:t,share_metadata:n}){Ee(r.version===e.format_version,"format version mismatch");let o=new Y1.default;return o.file("version",`${t}`),o.file("header",JSON.stringify(e)),o.file("body",JSON.stringify(r)),n&amp;&amp;o.file("share_metadata",JSON.stringify(n)),o}async function E_(r){let e=new Y1.default,t={version:"1.1.0.0",format:"drawn",data:{canvas:r.canvas,contents:y_(r.contents),revision:r.revision}};return e.file("data",JSON.stringify(t)),e.generateAsync({type:"arraybuffer",compression:"DEFLATE"})}async function __(r){var n;let t=await((n=(await Y1.default.loadAsync(r)).file("data"))==null?void 0:n.async("text"));return Ee(t!=null,"data must be stored"),TY(t)}var CS=class extends Error{constructor(t,n){super(n);this.version=t}},q1=class extends Error{constructor(t,n,o){super(o);this.version=t;this.features=n}};function Abe(r){let e=r.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);if(!e)throw new CS(r,"Unrecognized file format version: "+r);let[t,n,o,i,s]=e;try{return[n,o,i,s].map(a=&gt;parseInt(a))}catch(a){throw fe.error(a),a}}function Q1(r,e){let[t]=Abe(r.version);if(t&gt;3)throw new CS(r.version,"Unsupported file format version: "+r.version);e&amp;&amp;Ibe(r,e),(r.version==="1.0.0.0"||r.version==="2.0.0.0")&amp;&amp;(r=uX(r)),r.version==="2.1.0.0"&amp;&amp;(r=cX(r));let n=r.features,o=["sheet","quiz","attendance"],i=n.filter(s=&gt;!o.includes(s));if(i.length&gt;0)throw new q1(r.version,i);return r.version==="3.0.0.0"&amp;&amp;(r=pX(r)),r.version==="3.1.0.0"&amp;&amp;(r=hX(r)),r.version==="3.2.0.0"&amp;&amp;(r=fX(r)),r.version==="3.3.0.0"&amp;&amp;(r=mX(r)),r.version==="3.4.0.0"&amp;&amp;(r=gX(r)),r.version==="3.5.0.0"&amp;&amp;(r=vX(r)),r.version==="3.6.0.0"&amp;&amp;(r=bX(r)),r.version==="3.7.0.0"&amp;&amp;(r=yX(r)),r.version,Qc(r,yS),r}function Ibe(r,e){for(let t of r.data.frames)(!t.metadata.author||!t.metadata.author.id||!t.metadata.author.name)&amp;&amp;(t.metadata.author=e)}var F_=class{constructor(){this.strokes=[];this.ids=new Set}push(e){let{id:t}=e;this.ids.has(t)||(this.ids.add(t),this.strokes.push(e))}delete(e){this.ids.delete(e);let t=this.strokes.findIndex(n=&gt;n.id===e);t&gt;-1&amp;&amp;this.strokes.splice(t,1)}length(){return this.strokes.length}},J1=class extends F_{setBase(e){var o,i;let t=(i=(o=e[e.length-1])==null?void 0:o.id)!=null?i:"",n=this.strokes.findIndex(s=&gt;s.id===t);n&lt;0?this.strokes=[...e]:(this.strokes.splice(0,n+1),this.strokes=[...e,...this.strokes])}applyMetadata(){}applyOperation(e){for(let t of e.strokes)this.push(t);for(let t of e.deleted)this.delete(t.id)}canClearAll(){return this.strokes.length&gt;0}clear(){this.strokes=[]}[Symbol.iterator](){return this.strokes[Symbol.iterator]()}},M_=class extends F_{constructor(){super(...arguments);this.baseStrokes=[];this.ignoreBase=!1;this.ignoredIds=new Set}setBase(t){this.baseStrokes=[...t]}applyMetadata(t){this.ignoreBase=t.ignore_base;for(let n of t.garbage)this.ignoredIds.add(n)}applyOperation(t){this.ignoreBase=t.ignore_base;for(let n of t.strokes)this.push(n);for(let n of t.deleted)this.delete(n.id)}canClearAll(){return this.baseStrokes.length&gt;0||this.strokes.length&gt;0}clear(){this.strokes=[],this.baseStrokes=[]}*validStrokes(t){for(let n of t)this.ignoredIds.has(n.id)||(yield n)}*[Symbol.iterator](){this.ignoreBase||(yield*this.validStrokes(this.baseStrokes)),yield*this.validStrokes(this.strokes)}};var ri=class{add(e){let t=e instanceof ri?e.rect:e;if(t!==void 0)if(this._rect){let[n,o]=[Math.min(this._rect.x,t.x),Math.max(this._rect.x+this._rect.width,t.x+t.width)],[i,s]=[Math.min(this._rect.y,t.y),Math.max(this._rect.y+this._rect.height,t.y+t.height)];this._rect=qe(n,i,o-n,s-i)}else this._rect=qe(t.x,t.y,t.width,t.height)}clear(){this._rect=void 0}get rect(){if(!!this._rect)return qe(this._rect.x,this._rect.y,this._rect.width,this._rect.height)}};var xS=class{constructor(e){this.id=e}static reset(){this.links.clear()}static get(e){return xS.links.get(e)}linkTo(e){this.next=xS.links.get(e),this.next.prev=this}current(){let e=this;for(;e.next!=null;)e=e.next;return e}unlink(){this.next&amp;&amp;(this.next.prev=this.prev),this.prev&amp;&amp;(this.prev.next=this.next),xS.links.delete(this.id)}pop(){let e=this.current();return e.id!==this.id&amp;&amp;e.unlink(),e}},Cg=xS;Cg.links=new Fn(e=&gt;new xS(e));var df=class{static addStroke(e){return new df({contents:[e],deleted:[],ignore_base:!1})}static clearAll(e){return new df({contents:[],deleted:Array.from(e),ignore_base:!0})}constructor({contents:e,deleted:t,ignore_base:n}){this.strokes=e,this.deleted=t,this.ignore_base=n}invert(e={}){let t=Array.from(this.deleted).map(o=&gt;{let i=e.idMapper?e.idMapper(o.id):Sr();return Cg.get(o.id).linkTo(i),o.clone(i)}),n=this.strokes.map(o=&gt;{let i=Cg.get(o.id);return o.clone(i.pop().id)});return new df({contents:t,deleted:n,ignore_base:this.ignore_base})}},Z1=class{constructor(){this.done=[];this.rewind=[]}canUndo(){return this.done.length&gt;0}canRedo(){return this.rewind.length&gt;0}push(e){this.done.push(e),this.rewind.length&gt;0&amp;&amp;(this.rewind=[])}undo(){let e=this.done.pop();if(!e)return;let t=e.invert();return this.rewind.push(t),t}redo(){let e=this.rewind.pop();if(!e)return;let t=e.invert();return this.done.push(t),t}};var Il=class{constructor({real:e,imag:t}){this.real=e,this.imag=t}static cosh(e){let{real:t,imag:n}=e;return new Il({real:Math.cosh(t)*Math.cos(n),imag:Math.sinh(t)*Math.sin(n)})}static sinh(e){let{real:t,imag:n}=e;return new Il({real:Math.sinh(t)*Math.cos(n),imag:Math.cosh(t)*Math.sin(n)})}};var Fr=class{constructor(e,t){this.lowerBound=e;this.upperBound=t;Ee(this.lowerBound&lt;=this.upperBound)}overlaps(e){return!(e.upperBound&lt;this.lowerBound||this.upperBound&lt;e.lowerBound)}clampedTo(e){let t=e.lowerBound&gt;this.lowerBound?e.lowerBound:e.upperBound&lt;this.lowerBound?e.upperBound:this.lowerBound,n=e.upperBound&lt;this.upperBound?e.upperBound:e.lowerBound&gt;this.upperBound?e.lowerBound:this.upperBound;return new Fr(t,n)}};function hu(r,e){let t=Math.min(r,e),n=Math.max(r,e);return Math.sign(t)===Math.sign(n)?Math.min(Math.abs(t),Math.abs(n)):0}var id=class{constructor(e,t,n,o){this.a3=e;this.a2=t;this.a1=n;this.a0=o}y(e){let t=this.a3*e+this.a2;return t=t*e+this.a1,t=t*e+this.a0,t}minmax(e){if(this.a3===0)return new Ia(this.a2,this.a1,this.a0).minmax(e);let t=e.lowerBound,n=e.upperBound,o=3*this.a3,i=2*this.a2,s=this.a1,a=i*i-4*o*s,l=this.y(t),u=this.y(n);if(a&lt;=0)return new Fr(Math.min(l,u),Math.max(l,u));{let d=Math.sqrt(a),c=(-i-d)/(2*o),p=(-i+d)/(2*o);if(p&lt;c){let m=c;c=p,p=m}let h=this.y(c),f=this.y(p);return c&lt;t&amp;&amp;t&lt;=p&amp;&amp;p&lt;=n?new Fr(Math.min(l,u,f),Math.max(l,u,f)):t&lt;=c&amp;&amp;c&lt;=n&amp;&amp;n&lt;p?new Fr(Math.min(l,u,h),Math.max(l,u,h)):t&lt;c&amp;&amp;c&lt;n&amp;&amp;t&lt;p&amp;&amp;p&lt;n?new Fr(Math.min(l,u,h,f),Math.max(l,u,h,f)):new Fr(Math.min(l,u),Math.max(l,u))}}absmin(e){if(this.a3===0)return new Ia(this.a2,this.a1,this.a0).absmin(e);let t=e.lowerBound,n=e.upperBound,o=3*this.a3,i=2*this.a2,s=this.a1,a=i*i-4*o*s,l=this.y(t),u=this.y(n);if(a&lt;=0)return hu(l,u);{let d=Math.sqrt(a),c=(-i-d)/(2*o),p=(-i+d)/(2*o);p&lt;c&amp;&amp;([c,p]=[p,c]);let h=this.y(c),f=this.y(p);return c&lt;t&amp;&amp;t&lt;=p&amp;&amp;p&lt;=n?Math.min(hu(l,f),hu(f,u)):t&lt;=c&amp;&amp;c&lt;=n&amp;&amp;n&lt;p?Math.min(hu(l,h),hu(h,u)):t&lt;c&amp;&amp;c&lt;n&amp;&amp;t&lt;p&amp;&amp;p&lt;n?Math.min(hu(l,h),hu(h,f),hu(f,u)):hu(l,u)}}roots(){if(this.a3===0)return new Ia(this.a2,this.a1,this.a0).roots();let e=this.a3,t=this.a2,n=this.a1,o=this.a0,i=t*t-3*e*n,s=(27*e*e*o-9*e*t*n+2*t*t*t)/-2;if(-(s*s-i*i*i)&gt;0){let c=Math.sqrt(i),p=Math.acos(s/(i*c)),h=[0,1,2].map(f=&gt;2*c*Math.cos(p/3+2*f*Math.PI/3)).map(f=&gt;(-t+f)/(3*e));return[...new Set(h).values()]}let l=Math.abs(s),u=Math.abs(i),d=Math.sqrt(u);if(i===0)return[(-t+Math.cbrt(2*s))/(3*e)];if(i&gt;0&amp;&amp;s&gt;0){let c=Math.acosh(l/(u*d)),p=[0,1,2].map(h=&gt;{let f=new Il({real:c/3,imag:2*h*Math.PI/3});return Il.cosh(f)}).filter(({real:h,imag:f})=&gt;f===0).map(({real:h,imag:f})=&gt;2*d*h).map(h=&gt;(-t+h)/(3*e));return[...new Set(p).values()]}else if(i&gt;0&amp;&amp;s&lt;0){let c=Math.acosh(l/(u*d)),p=[0,1,2].map(h=&gt;{let f=new Il({real:c/3,imag:2*h*Math.PI/3});return Il.cosh(f)}).filter(({real:h,imag:f})=&gt;f===0).map(({real:h,imag:f})=&gt;-2*d*h).map(h=&gt;(-t+h)/(3*e));return[...new Set(p).values()]}else if(i&lt;0&amp;&amp;s&gt;=0){let c=Math.asinh(l/(u*d)),p=[0,1,2].map(h=&gt;{let f=new Il({real:c/3,imag:2*h*Math.PI/3});return Il.sinh(f)}).filter(({real:h,imag:f})=&gt;f===0).map(({real:h,imag:f})=&gt;2*d*h).map(h=&gt;(-t+h)/(3*e));return[...new Set(p).values()]}else{let c=Math.asinh(l/(u*d)),p=[0,1,2].map(h=&gt;{let f=new Il({real:c/3,imag:2*h*Math.PI/3});return Il.sinh(f)}).filter(({real:h,imag:f})=&gt;f===0).map(({real:h,imag:f})=&gt;-2*d*h).map(h=&gt;(-t+h)/(3*e));return[...new Set(p).values()]}}xRanges(e){if(this.a3===0)return new Ia(this.a2,this.a1,this.a0).xRanges(e);let t,n,o;this.a3&lt;0?(t=new id(-this.a3,-this.a2,-this.a1,-this.a0),n=-e.upperBound,o=-e.lowerBound):(t=this,n=e.lowerBound,o=e.upperBound);let i=new id(t.a3,t.a2,t.a1,t.a0-n),s=new id(t.a3,t.a2,t.a1,t.a0-o),a=i.roots().sort((d,c)=&gt;d-c);if(a.length&lt;=0||a.length&gt;3)return[];let l=s.roots().sort((d,c)=&gt;d-c);if(l.length&lt;=0||l.length&gt;3)return[];let u=[];switch(a.length){case 3:switch(l.length){case 3:{let d=a[0],c=l[0],p=l[1],h=a[1],f=a[2],m=l[2];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h&amp;&amp;h&lt;=f&amp;&amp;f&lt;=m))return[];u.push(new Fr(d,c)),u.push(new Fr(p,h)),u.push(new Fr(f,m));break}case 2:{let d=a[0],c=l[0],p=a[1],h=a[2],f=l[1];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h&amp;&amp;h&lt;=f))return[];u.push(new Fr(d,p)),u.push(new Fr(h,f));break}case 1:{let d=a[0],c=a[1],p=a[2],h=l[0];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h))return[];u.push(new Fr(d,c)),u.push(new Fr(p,h));break}default:return[]}break;case 2:switch(l.length){case 3:{let d=a[0],c=l[0],p=l[1],h=a[1],f=l[2];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h&amp;&amp;h&lt;=f))return[];u.push(new Fr(d,c)),u.push(new Fr(p,f));break}case 2:{let d=a[0],c=l[0],p=a[1],h=l[1];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h))return[];u.push(new Fr(d,h));break}case 1:{let d=a[0],c=a[1],p=l[0];if(!(d&lt;=c&amp;&amp;c&lt;=p))return[];i.y((d+c)/2)&gt;n?u.push(new Fr(d,p)):(u.push(new Fr(d,d)),u.push(new Fr(c,p)));break}default:return[]}break;case 1:switch(l.length){case 3:{let d=a[0],c=l[0],p=l[1],h=l[2];if(!(d&lt;=c&amp;&amp;c&lt;=p&amp;&amp;p&lt;=h))return[];u.push(new Fr(d,c)),u.push(new Fr(p,h));break}case 2:{let d=a[0],c=l[0],p=l[1];if(!(d&lt;=c&amp;&amp;c&lt;=p))return[];s.y((c+p)/2)&gt;o?(u.push(new Fr(d,c)),u.push(new Fr(p,p))):u.push(new Fr(d,p));break}case 1:{let d=a[0],c=l[0];if(!(d&lt;=c))return[];u.push(new Fr(d,c));break}default:return[]}break;default:return[]}return u}},Ia=class{constructor(e,t,n){this.a2=e;this.a1=t;this.a0=n}y(e){return(this.a2*e+this.a1)*e+this.a0}minmax(e){if(this.a2===0)return new cf(this.a1,this.a0).minmax(e);let t=e.lowerBound,n=e.upperBound,o=this.y(t),i=this.y(n),s=-this.a1/(2*this.a2);if(t&lt;=s&amp;&amp;s&lt;=n){let a=this.y(s);return new Fr(Math.min(o,a,i),Math.max(o,a,i))}else return new Fr(Math.min(o,i),Math.max(o,i))}absmin(e){if(this.a2===0)return new cf(this.a1,this.a0).absmin(e);let t=e.lowerBound,n=e.upperBound,o=this.y(t),i=this.y(n),s=-this.a1/(2*this.a2);if(t&lt;=s&amp;&amp;s&lt;=n){let a=this.y(s);return Math.min(hu(o,a),hu(a,i))}else return hu(o,i)}roots(){if(this.a2===0)return new cf(this.a1,this.a0).root();let e=this.a2,t=this.a1,n=this.a0,o=t*t-4*e*n;if(o===0)return[-t/(2*e)];if(o&gt;0){let i=Math.sqrt(o);return[...new Set([(-t+i)/(2*e),(-t-i)/(2*e)]).values()]}else return[]}xRanges(e){if(this.a2===0)return new cf(this.a1,this.a0).xRanges(e);let t,n,o;this.a2&lt;0?(t=new Ia(-this.a2,-this.a1,-this.a0),n=-e.upperBound,o=-e.lowerBound):(t=this,n=e.lowerBound,o=e.upperBound);let i=new Ia(t.a2,t.a1,t.a0-n),s=new Ia(t.a2,t.a1,t.a0-o),a=i.roots().sort((u,d)=&gt;u-d),l=s.roots().sort((u,d)=&gt;u-d);return l.length===2&amp;&amp;a.length===2?l[0]&lt;=a[0]&amp;&amp;a[1]&lt;=l[1]?[new Fr(l[0],a[0]),new Fr(a[1],l[1])]:[]:l.length===2&amp;&amp;a.length&lt;2?[new Fr(l[0],l[1])]:[]}},cf=class{constructor(e,t){this.a1=e;this.a0=t}y(e){return this.a1*e+this.a0}minmax(e){if(this.a1===0)return new Fr(this.a0,this.a0);let t=this.y(e.lowerBound),n=this.y(e.upperBound);return new Fr(Math.min(t,n),Math.max(t,n))}absmin(e){if(this.a1===0)return Math.abs(this.a0);let t=this.y(e.lowerBound),n=this.y(e.upperBound);return hu(t,n)}root(){return this.a1===0?[]:[-this.a0/this.a1]}xRanges(e){if(this.a1===0)return[];let t=(e.lowerBound-this.a0)/this.a1,n=(e.upperBound-this.a0)/this.a1;return this.a1&gt;0?[new Fr(t,n)]:[new Fr(n,t)]}};var pf=class{static boundingBox(e,t,n,o,i){let{x:s,y:a}=this.cubicEquation({p1:t,c1:n,c2:o,p2:i}),l=new Fr(0,1),u=s.minmax(l),d=a.minmax(l),c=e*.5;return qe(u.lowerBound-c,d.lowerBound-c,u.upperBound-u.lowerBound+e,d.upperBound-d.lowerBound+e)}static cubicEquation({p1:e,c1:t,c2:n,p2:o}){let i=o.x-n.x*3+t.x*3-e.x,s=n.x*3-t.x*6+e.x*3,a=t.x*3-e.x*3,l=e.x,u=new id(i,s,a,l),d=o.y-n.y*3+t.y*3-e.y,c=n.y*3-t.y*6+e.y*3,p=t.y*3-e.y*3,h=e.y,f=new id(d,c,p,h);return{x:u,y:f}}};function eD({minX:r,minY:e,maxX:t,maxY:n}){return new Sn(r,e,t-r,n-e)}var EU=class{constructor(e,t,n,o,i){this.p1=e;this.c1=t;this.c2=n;this.p2=o;this.width=i}get radius(){return Ea.radius(this.width)}},Gb=class{constructor({p1:e,p2:t,width:n}){this.p1=e,this.p2=t,this.width=n}get radius(){return Ea.radius(this.width)}get length(){return $u(this.p1,this.p2)}},N_=class{constructor({minX:e,maxX:t,y:n}){this.minX=e,this.maxX=t,this.y=n}},B_=class{constructor({x:e,minY:t,maxY:n}){this.x=e,this.minY=t,this.maxY=n}},Ea=class{static radius(e){return Math.max(this.epsilon,e*.5)}static boundingBox(e,t){let n=e*2;return{x:t.x-e,y:t.y-e,width:n,height:n}}static boundingBoxOfPoint({width:e,point:t}){let n=this.radius(e);return this.boundingBox(n,t)}static boundingBoxOfPoints({width:e,points:t}){let n=this.radius(e),o=new ri;for(let i of t)o.add(this.boundingBox(n,i));return o.rect}static curveSegmentBoundingBox(e,t,n){if(n-1&lt;0||n&gt;=t.length)return;let o=this.controlPoint1(t,n);if(!o)return;let i=this.controlPoint2(t,n);if(!i)return;let s=t[n-1],a=t[n];return Zd(Ts(s,a),0)||ec(o,s)&amp;&amp;ec(i,a)?this.boundingBoxOfPoints({width:e,points:[s,a]}):pf.boundingBox(e,s,o,i,a)}static curveBoundingBox(e,t){let n=new ri;if(t.length&gt;0){let o=t[0],i=this.boundingBoxOfPoint({width:e,point:o});i&amp;&amp;n.add(i)}if(t.length&gt;1)for(let o=1;o&lt;t.length;o++){let i=this.curveSegmentBoundingBox(e,t,o);i&amp;&amp;n.add(i)}return n.rect}static controlPoint1(e,t){if(t-1&lt;0||e.length&lt;=t)return;if(t-2&lt;0)return e[t-1];let n=e[t-2],o=e[t-1],i=e[t],s=Jo(i,n),a=Jo(o,n);if(Math.abs(iE(s,a))&lt;1e-10)return o;let l=s.scaled(this.catMulRomToBezierTightness/3);return{x:o.x+l.x,y:o.y+l.y}}static controlPoint2(e,t){if(t-1&lt;0||e.length&lt;=t)return;if(e.length-1&lt;t+1)return e[t];let n=e[t-1],o=e[t],i=e[t+1],s=Jo(n,i),a=Jo(o,i);if(Math.abs(iE(s,a))&lt;1e-10)return o;let l=s.scaled(this.catMulRomToBezierTightness/3);return{x:o.x+l.x,y:o.y+l.y}}static intersectionPoint({p1:e,p2:t,q1:n,q2:o}){if(ec(e,t)||ec(n,o))return;let i=Jo(t,e),s=Jo(o,n),a=s.x*i.y-s.y*i.x;if(!Zd(a,0))if(s.x!=0){let l=(n.y*s.x+e.x*s.y-n.x*s.y-s.x*e.y)/a,u=(e.x+l*i.x-n.x)/s.x;return l&gt;=0&amp;&amp;l&lt;=1&amp;&amp;u&gt;=0&amp;&amp;u&lt;=1?De(e.x+i.x*l,e.y+i.y*l):void 0}else if(i.x!=0){let l=(n.x-e.x)/i.x,u=(e.y+l*i.y-n.y)/s.y;return l&gt;=0&amp;&amp;l&lt;=1&amp;&amp;u&gt;=0&amp;&amp;u&lt;=1?De(e.x+i.x*l,e.y+i.y*l):void 0}else return}static minDistanceSq({start:e,end:t,point:n}){let o=e,i=t,s=n,a=o.x-s.x,l=o.y-s.y,u=i.x-o.x,d=i.y-o.y,c=u*u+d*d,p=2*(a*u+l*d),h=a*a+l*l;return new Ia(c,p,h).minmax(new Fr(0,1)).lowerBound}static hitTestCWLines(e){let{cwLine1:t,cwLine2:n}=e;if(this.intersectionPoint({p1:t.p1,p2:t.p2,q1:n.p1,q2:n.p2})!==void 0)return!0;if(t.width==0&amp;&amp;n.width==0)return!1;let o=t.radius+n.radius,i=o*o;return this.minDistanceSq({start:t.p1,end:t.p2,point:n.p1})&lt;=i||this.minDistanceSq({start:t.p1,end:t.p2,point:n.p2})&lt;=i||this.minDistanceSq({start:n.p1,end:n.p2,point:t.p1})&lt;=i||this.minDistanceSq({start:n.p1,end:n.p2,point:t.p2})&lt;=i}static isStrokeCoveredWithLasso({strokeWidth:e,strokePoints:t,lasso:n}){if(t.length===0)return!1;if(t.length===1)return this.isStrokePointCoveredWithLasso({strokeWidth:e,strokePoint:t[0],lasso:n});for(let o=1;o&lt;t.length;o++)if(this.isStrokeSegmentCoveredWithLasso({strokeWidth:e,strokePoints:t,startIndex:o,lasso:n}))return!0;return!1}static isStrokePointCoveredWithLasso({strokeWidth:e,strokePoint:t,lasso:n}){if(Pn(n,t))return!0;let o=this.radius(e),i=o*o,s=eD({minX:n.minX,minY:n.minY-o,maxX:n.maxX,maxY:n.maxY});if(Pn(s,t))return!0;let a=eD({minX:n.maxX,minY:n.minY,maxX:n.maxX+o,maxY:n.maxY});if(Pn(a,t))return!0;let l=eD({minX:n.minX,minY:n.maxY,maxX:n.maxX,maxY:n.maxY+o});if(Pn(l,t))return!0;let u=eD({minX:n.minX-o,minY:n.minY,maxX:n.minX,maxY:n.maxY});return Pn(u,t)?!0:Ts(n.leftTop,t)&lt;=i||Ts(n.rightTop,t)&lt;=i||Ts(n.rightBottom,t)&lt;=i||Ts(n.leftBottom,t)&lt;=i}static isStrokeSegmentCoveredWithLasso({strokeWidth:e,strokePoints:t,startIndex:n,lasso:o}){if(n&lt;=0||n&gt;=t.length)return!1;let i=this.radius(e),s=t[n-1],a=t[n];if(Pn(o,s)||Pn(o,a))return!0;let l=this.controlPoint1(t,n),u=this.controlPoint2(t,n);if(l&amp;&amp;u&amp;&amp;(!ec(s,l)||!ec(u,a))){let d=new Sn(pf.boundingBox(e,s,l,u,a)),c=d.insetBy({dx:-i,dy:-i});if(!Oi(o,c))return!1;if(nu(o,d))return!0;let p=new EU(s,l,u,a,e),h=new N_({minX:o.minX,maxX:o.maxX,y:o.minY}),f=new B_({x:o.maxX,minY:o.minY,maxY:o.maxY}),m=new N_({minX:o.minX,maxX:o.maxX,y:o.maxY}),g=new B_({x:o.minX,minY:o.minY,maxY:o.maxY});return this.hitTestSegmentWithHLine({segment:p,hLine:h})||this.hitTestSegmentWithHLine({segment:p,hLine:m})||this.hitTestSegmentWithVLine({segment:p,vLine:f})||this.hitTestSegmentWithVLine({segment:p,vLine:g})}else{let d=new Gb({p1:o.leftTop,p2:o.rightTop,width:0}),c=new Gb({p1:o.rightTop,p2:o.rightBottom,width:0}),p=new Gb({p1:o.rightBottom,p2:o.leftBottom,width:0}),h=new Gb({p1:o.leftBottom,p2:o.leftTop,width:0}),f=eD({minX:Math.min(s.x,a.x),minY:Math.min(s.y,a.y),maxX:Math.max(s.x,a.x),maxY:Math.max(s.y,a.y)}),m=f.insetBy({dx:-i,dy:-i});if(!Oi(o,m))return!1;if(nu(o,f))return!0;let g=new Gb({p1:s,p2:a,width:e});return this.hitTestCWLines({cwLine1:g,cwLine2:d})||this.hitTestCWLines({cwLine1:g,cwLine2:c})||this.hitTestCWLines({cwLine1:g,cwLine2:p})||this.hitTestCWLines({cwLine1:g,cwLine2:h})}}static hitTestSegmentWithHLine({segment:e,hLine:t}){let n=e.radius,o=n*n;if(Ts(e.p1,De(t.minX,t.y))&lt;=o||Ts(e.p1,De(t.maxX,t.y))&lt;=o||Ts(e.p2,De(t.minX,t.y))&lt;=o||Ts(e.p2,De(t.maxX,t.y))&lt;=o)return!0;let{x:i,y:s}=pf.cubicEquation({p1:e.p1,c1:e.c1,c2:e.c2,p2:e.p2}),a=new id(s.a3,s.a2,s.a1,s.a0-t.y),l=new Fr(0,1),u=new Fr(t.minX,t.maxX);for(let d of i.xRanges(u)){if(!d.overlaps(l))continue;let c=d.clampedTo(l);if(a.absmin(c)&lt;=n)return!0}if(Zd(i.a3,0)){let d=new Ia(i.a2,i.a1,i.a0);for(let c of d.xRanges(u)){if(!c.overlaps(l))continue;let p=c.clampedTo(l);if(a.absmin(p)&lt;=n)return!0}if(l1(i.a2,0)){let c=new cf(i.a1,i.a0);for(let p of c.xRanges(u)){if(!p.overlaps(l))continue;let h=p.clampedTo(l);if(a.absmin(h)&lt;=n)return!0}}}return!1}static hitTestSegmentWithVLine({segment:e,vLine:t}){let n=e.radius,o=n*n;if(Ts(e.p1,De(t.x,t.minY))&lt;=o||Ts(e.p1,De(t.x,t.maxY))&lt;=o||Ts(e.p2,De(t.x,t.minY))&lt;=o||Ts(e.p2,De(t.x,t.maxY))&lt;=o)return!0;let{x:i,y:s}=pf.cubicEquation({p1:e.p1,c1:e.c1,c2:e.c2,p2:e.p2}),a=new id(i.a3,i.a2,i.a1,i.a0-t.x),l=new Fr(0,1),u=new Fr(t.minY,t.maxY);for(let d of s.xRanges(u)){if(!d.overlaps(l))continue;let c=d.clampedTo(l);if(a.absmin(c)&lt;=n)return!0}if(Zd(s.a3,0)){let d=new Ia(s.a2,s.a1,s.a0);for(let c of d.xRanges(u)){if(!c.overlaps(l))continue;let p=c.clampedTo(l);if(a.absmin(p)&lt;=n)return!0}if(Zd(s.a2,0)){let c=new cf(s.a1,s.a0);for(let p of c.xRanges(u)){if(!p.overlaps(l))continue;let h=p.clampedTo(l);if(a.absmin(h)&lt;=n)return!0}}}return!1}};Ea.epsilon=1e-10,Ea.catMulRomToBezierTightness=.5;var xX=new WeakMap;function Ebe(r,e){let t=new Path2D;return pc.makeStrokePathUntilLast({path:t,points:r.points,resolutionScale:e,startIndex:0}),{path:t,resolutionScale:e}}function _be(r,e){let t=xX.get(r);if(t===void 0||t&amp;&amp;t.resolutionScale&lt;e){let n=Ebe(r,e);return xX.set(r,n),n.path}else return t.path}function O_(r){let{ctx:e,content:t,resolutionScale:n}=r,{points:o}=t;if(o.length&lt;1)return;let i=_be(t,n),s=dn(t.color);e.save(),e.beginPath(),e.fillStyle=s.toCSSRGBA(),e.fill(i),e.restore()}var L_=class{constructor(e,t){this.p0=e;this.p1=t}get length(){return $u(this.p0,this.p1)}};function R_(r){let e=r.width/2;return{x:r.x-e,y:r.y-e,width:r.width,height:r.width}}var pc=class{static boundingBox(e){let t=new ri;for(let n of e)t.add(R_(n));return t.rect}static addStrokeSegment(e,t,n){let o,i,s,a,l,u,d=t.width*.5,c=n.width*.5;c&lt;d?(o=n.x,i=n.y,s=c,a=t.x,l=t.y,u=d):(o=t.x,i=t.y,s=d,a=n.x,l=n.y,u=c);let p=new Path2D;if(FU(o-a)&amp;&amp;FU(i-l)){p.ellipse(a,l,u,u,0,0,Math.PI*2),e.addPath(p);return}let h=o-a,f=i-l,m=Math.hypot(h,f);if(s+m&lt;=u){p.ellipse(a,l,u,u,0,0,Math.PI*2),e.addPath(p);return}let g=m&gt;0?1/m:0,v=h*g,b=f*g,C,x,y,S,T,w,k,A;if(FU(s-u)){let j=-b,U=v,B=-j,z=-U;C=o+s*B,x=i+s*z,y=o+s*j,S=i+s*U,T=a+u*B,w=l+u*z,k=a+u*j,A=l+u*U}else{let j=m*s/(u-s),U=o+j*v,B=i+j*b,z=Math.asin(s/j),N=Math.sqrt(j**2-s**2),V=Math.sqrt((j+m)*(j+m)-u**2),re=Math.sin(z),ce=Math.cos(z),ge=-v*ce- -b*re,ae=-v*re+-b*ce,Y=Math.sin(-z),W=Math.cos(-z),G=-v*W- -b*Y,ee=-v*Y+-b*W;C=U+N*ge,x=B+N*ae,y=U+N*G,S=B+N*ee,T=U+V*ge,w=B+V*ae,k=U+V*G,A=B+V*ee}p.moveTo(C,x);let I=Math.atan2(x-i,C-o),E=TX(wX(C-o,x-i,y-o,S-i),s*s,!1);p.arc(o,i,s,I,I+E,!1),p.lineTo(k,A);let O=Math.atan2(A-l,k-a),Q=TX(wX(k-a,A-l,T-a,w-l),u*u,!0);p.arc(a,l,u,O,O+Q,!1),p.lineTo(C,x),p.closePath(),e.addPath(p)}static numStrokeInterpolationPoints(e){let{p0:t,p1:n,p2:o,p3:i,unit:s,maxCount:a}=e,l=Jo(o,n),u=l.magnitude();if(u&lt;=s)return 0;let d=Jo(n,t),c=d.magnitude(),p=Jo(i,o),h=p.magnitude(),f=0;if(c&gt;0&amp;&amp;u&gt;0){let v=m4(d,l)/(c*u);f=Math.acos(v)*180/Math.PI,f=90-Math.abs(f-90),f=45-Math.abs(f-45)}let m=0;if(u&gt;0&amp;&amp;h&gt;0){let v=m4(l,p)/(u*h);m=Math.acos(v)*180/Math.PI,m=90-Math.abs(m-90),m=45-Math.abs(m-45)}let g=Math.max(f,m);return g&lt;=1e-10?0:Math.floor(Math.min(a,u/s*Math.min(1,g/45)))}static addInterpolatedStrokeSegments(e){let{path:t,p0:n,p1:o,p2:i,p3:s,unit:a,maxCount:l}=e,u=this.numStrokeInterpolationPoints({p0:n,p1:o,p2:i,p3:s,unit:a,maxCount:l}),d=1/(u+1),c=o;for(let p=0;p&lt;u;p++){let h=d*(p+1),f=MU(n,o,i,s,h),m={x:f.x,y:f.y,width:NU(o.width,i.width,h)};this.addStrokeSegment(t,c,m),c=m}this.addStrokeSegment(t,c,i)}static strokePointsBoundingBox(...e){if(e.length&lt;1)throw new Error("points.length must not be empty");let t=_U(e[0]);for(let n=1;n&lt;e.length;n++)t=Rs(t,_U(e[n]));return t}static interpolatedBoundingBox(e,t,n,o){let i=new ri;i.add(R_(t)),i.add(R_(n));for(let s of[.25,.5,.75]){let a=MU(e,t,n,o,s),l=NU(t.width,n.width,s);i.add(R_({x:a.x,y:a.y,width:l}))}return i.rect}static intersectsStroke(e,t,n){if(n===void 0)return!0;let o=this.strokePointsBoundingBox(e,t);return Oi(n,o)}static interpolatedIntersectsStroke(e,t,n,o,i){if(i===void 0)return!0;let s=this.interpolatedBoundingBox(e,t,n,o);return Oi(i,s)}static makeStrokePathWithoutLast(e){let{path:t,points:n,contentExtent:o,resolutionScale:i,startIndex:s}=e,a=n.length;if(a&lt;2)return{endIndex:s};let l=a-1;if(s&gt;=l)return{endIndex:s};let u=s,d,c;if(u&lt;=1?(d=n[0],c=n[1],this.intersectsStroke(d,c,o)&amp;&amp;this.addStrokeSegment(t,d,c),u=2):(d=n[u-2],c=n[u-1]),a&lt;4)return{endIndex:u};let p=n[u],h=2/i,f=20;for(;u&lt;l;){u+=1;let m=n[u];this.interpolatedIntersectsStroke(d,c,p,m,o)&amp;&amp;this.addInterpolatedStrokeSegments({path:t,p0:d,p1:c,p2:p,p3:m,unit:h,maxCount:f}),d=c,c=p,p=m}return{endIndex:u}}static makeStrokePathUntilLast(e){let{path:t,points:n,contentExtent:o,resolutionScale:i,startIndex:s}=e,a=n.length;if(a&lt;=0)return{endIndex:s};if(s&gt;=a)return{endIndex:s};if(a===1){let l=_U(n[0]);return o===void 0||o&amp;&amp;Oi(o,l)?(t.ellipse(n[0].x,n[0].y,n[0].width/2,n[0].width/2,0,0,Math.PI*2),{endIndex:a}):{endIndex:a}}else{this.makeStrokePathWithoutLast({path:t,points:n,contentExtent:o,resolutionScale:i,startIndex:s});let l=n[a-2],u=n[a-1];return this.intersectsStroke(l,u,o)?(this.addStrokeSegment(t,l,u),{endIndex:a}):{endIndex:a}}}static radius(e){return Ea.radius(e.width)}static hitTestVWLineAndLine({vwLine:e,point1:t,point2:n}){let o=e.p0,i=e.p1,s=this.radius(e.p0),a=this.radius(e.p1);if(Zd($u(t,n),0))return this.hitTestVWLineAndPoint({vwLine:e,point:t,pointRadius:0})||this.hitTestVWLineAndPoint({vwLine:e,point:n,pointRadius:0});let l=t,u=n;if(Ea.minDistanceSq({start:l,end:u,point:o})&lt;=s**2||Ea.minDistanceSq({start:l,end:u,point:i})&lt;=a**2)return!0;if(Zd(i.y-o.y,0))return!1;let d=Jo(i,o),c=Math.atan2(d.y,d.x),p={x:o.x+s*Math.sin(c),y:o.y-s*Math.cos(c)},h={x:i.x+a*Math.sin(c),y:i.y-a*Math.cos(c)};if(Ea.intersectionPoint({p1:p,p2:h,q1:l,q2:u})!==void 0)return!0;let f={x:o.x-s*Math.sin(c),y:o.y+s*Math.cos(c)},m={x:i.x-a*Math.sin(c),y:i.y+a*Math.cos(c)};return Ea.intersectionPoint({p1:f,p2:m,q1:l,q2:u})!==void 0}static hitTestVWLineAndPoint({vwLine:e,point:t,pointRadius:n}){let o=e.p0,i=e.p1,s=t,a=this.radius(e.p0),l=this.radius(e.p1),u=n,d=Jo(o,s),c=Jo(i,o),p=c.x**2+c.y**2-(l-a)**2,h=2*(d.x*c.x+d.y*c.y)-2*(a+u)*(l-a),f=d.x**2+d.y**2-(a+u)**2,g=new Ia(p,h,f).minmax(new Fr(0,1));return g.upperBound&lt;=0||g.lowerBound&lt;=0}static isStrokeCoveredWithLasso({strokePoints:e,lasso:t,resolutionScale:n}){if(e.length===0)return!1;if(e.length&lt;=1)return this.isStrokePointCoveredWithLasso({strokePoint:e[0],lasso:t});for(let o=1;o&lt;e.length;o++)if(this.isStrokeSegmentsCoveredWithLasso({strokePoints:e,startIndex:o,lasso:t,resolutionScale:n}))return!0;return!1}static isStrokePointCoveredWithLasso({strokePoint:e,lasso:t}){if(Pn(t,e))return!0;let n=Ea.radius(e.width),o=new Sn({minX:t.minX,minY:t.minY-n,maxX:t.maxX,maxY:t.maxY});if(Pn(o,e))return!0;let i=new Sn({minX:t.maxX,minY:t.minY,maxX:t.maxX+n,maxY:t.maxY});if(Pn(i,e))return!0;let s=new Sn({minX:t.minX,minY:t.maxY,maxX:t.maxX,maxY:t.maxY+n});if(Pn(s,e))return!0;let a=new Sn({minX:t.minX-n,minY:t.minY,maxX:t.minX,maxY:t.maxY});if(Pn(a,e))return!0;let l=n**2;return Ts(t.leftTop,e)&lt;=l||Ts(t.rightTop,e)&lt;=l||Ts(t.rightBottom,e)&lt;=l||Ts(t.leftBottom,e)&lt;=l}static isStrokeSegmentsCoveredWithLasso({strokePoints:e,startIndex:t,lasso:n,resolutionScale:o}){if(t&lt;=0||e.length&lt;=1)return!1;let i=e[t-1],s=e[t],a=new L_(i,s);if(t&lt;2||e.length&lt;=t+1){let m=this.boundingBox([i,s]);return m===void 0?!1:nu(n,m)?!0:Oi(n,m)?this.hitTestVWLineAndLine({vwLine:a,point1:n.leftTop,point2:n.rightTop})||this.hitTestVWLineAndLine({vwLine:a,point1:n.rightTop,point2:n.rightBottom})||this.hitTestVWLineAndLine({vwLine:a,point1:n.rightBottom,point2:n.leftBottom})||this.hitTestVWLineAndLine({vwLine:a,point1:n.leftBottom,point2:n.leftTop}):!1}let l=2/o,u=20,d=e[t-2],c=e[t+1],p=this.numStrokeInterpolationPoints({p0:d,p1:i,p2:s,p3:c,unit:l,maxCount:u}),h=1/(p+1),f=i;for(let m=0;m&lt;=p;m++){let g=h*(m+1),v={...MU(d,i,s,c,g),width:NU(i.width,s.width,g)},b=this.interpolatedBoundingBox(d,i,s,c);if(nu(n,b))return!0;if(Oi(n,b)){let C=new L_(f,v);if(this.hitTestVWLineAndLine({vwLine:C,point1:n.leftTop,point2:n.rightTop})||this.hitTestVWLineAndLine({vwLine:C,point1:n.rightTop,point2:n.rightBottom})||this.hitTestVWLineAndLine({vwLine:C,point1:n.rightBottom,point2:n.leftBottom})||this.hitTestVWLineAndLine({vwLine:C,point1:n.leftBottom,point2:n.leftTop}))return!0}f=v}return!1}};function _U(r){let e=r.width*.5;return qe(r.x-e,r.y-e,e*2,e*2)}function FU(r){return Math.abs(r)&lt;1e-10}function wX(r,e,t,n){return r*t+e*n}function TX(r,e,t){let n=Math.acos(Math.min(1,Math.max(-1,r/e)));return t?Math.PI*2-n:n}function DX(r,e,t,n,o){let i=o*o,s=i*o;return((-s+2*i-o)*r+(3*s-5*i+2)*e+(-3*s+4*i+o)*t+(s-i)*n)*.5}function MU(r,e,t,n,o){let i=DX(r.x,e.x,t.x,n.x,o),s=DX(r.y,e.y,t.y,n.y,o);return{x:i,y:s}}function NU(r,e,t){return r+(e-r)*t}function U_(r,e,t,n={drawEraserAsStroke:!1}){r.save();for(let o of e.contents)o.points.length&lt;1||(wY(o)?BU(r,o,n.drawEraserAsStroke):O_({ctx:r,content:o,resolutionScale:t}));r.restore()}function BU(r,e,t){if(e.points.length&lt;1)return;let n=e.points[0];r.save();{r.globalCompositeOperation="source-over";let o;if(e.type==="eraser")t||(r.globalCompositeOperation="destination-out"),o="#000";else{let{r:i,g:s,b:a,a:l}=dn(e.color);e.type==="highlighter"&amp;&amp;(t&amp;&amp;(r.globalCompositeOperation="xor"),l/=2),o=nn({a:l,r:i,g:s,b:a}).toCSSRGBA()}if(r.beginPath(),e.points.length===1)r.arc(n.x,n.y,n.width/2,0,Math.PI*2),r.fillStyle=o,r.fill();else{r.strokeStyle=o,r.lineCap="round",r.lineJoin="round",r.lineWidth=n.width,r.moveTo(n.x,n.y);for(let i=1;i&lt;e.points.length;i++){let s=e.points[i-1],a=e.points[i];if(Jo(s,a).magnitude()&lt;1e-10){r.lineTo(a.x,a.y);continue}let l=Ea.controlPoint1(e.points,i)||s,u=Ea.controlPoint2(e.points,i)||a;if(l===s&amp;&amp;u===a){r.lineTo(a.x,a.y);continue}r.bezierCurveTo(l.x,l.y,u.x,u.y,a.x,a.y)}r.stroke()}}r.restore()}var fu=class{constructor(e){this.smoothedPoints=[];this.rawPoints=[];this.id=e.id,this.width=e.width,this.type=e.type,this.color=e.color}static fromContent(e){var n,o;let t=new fu({id:e.id,type:e.type,width:(n=e.width)!=null?n:1,color:dn((o=e.color)!=null?o:"#FFFFFFFF")});return t.rawPoints=[...e.points],t}*points(){var e;for(let t=0;t&lt;this.rawPoints.length;t++)yield(e=this.smoothedPoints[t])!=null?e:this.rawPoints[t]}size(){return this.rawPoints.length}clone(e){var n;let t=new fu({id:e,width:this.width,type:this.type,color:this.color});return t.rawPoints=this.rawPoints.map(hS),t.smoothedPoints=(n=this.smoothedPoints)==null?void 0:n.map(hS),t}cloneToMutable(e,t){var o;let n=new wS({...this,id:e},t);return n.rawPoints=this.rawPoints.map(hS),n.smoothedPoints=(o=this.smoothedPoints)==null?void 0:o.map(hS),n}get content(){return{id:this.id,type:this.type,color:this.color.toARGBHex(),width:this.width,points:Array.from(this.points())}}get contentLastPoint(){let e=this.rawPoints[this.rawPoints.length-1];return{...this.content,points:[e]}}draw(e){let{ctx:t,resolutionScale:n,rectUpdated:o}=e,{type:i,color:s}=this;if(SU(i)){let a=Array.from(this.points()),l=new Path2D;pc.makeStrokePathUntilLast({path:l,points:a,resolutionScale:n,startIndex:0,contentExtent:o}),t.save(),t.beginPath(),t.fillStyle=s.toCSSRGBA(),t.fill(l),t.restore()}else BU(t,this.content,!0)}},Fbe=1,wS=class extends fu{constructor(t,n){super(t);this.isRuler=n;this.LengthThreshold=8;this.MinDistance=4;this.StepAngle=15;this.MaxSlopAngle=5;this.MinLength=this.MinDistance/Math.sin(this.MaxSlopAngle*.5*h4);this.snapThreshold=t=&gt;{if(t&lt;this.MinLength)return this.MaxSlopAngle;let n=Math.asin(this.MinDistance/t)*d1*2;return Math.min(this.MaxSlopAngle,n)}}add({x:t,y:n,zoom:o,pressure:i=0,width:s=0}){let a=0;if(SU(this.type)?s&gt;0?a=s:i&gt;0&amp;&amp;(a=Math.max(0,(Math.log10(i*10)+1)*this.width)):a=this.width,this.rawPoints.length&lt;1)this.rawPoints.push({x:t,y:n,width:a});else if(this.isRuler){let h=this.rulerEndPoint(t,n);this.rawPoints=[this.rawPoints[0],{x:h.x,y:h.y,width:a}]}else{let h=this.rawPoints[this.rawPoints.length-1],f=Math.hypot(t-h.x,n-h.y);if(xl(f,1/o,1)&lt;Fbe)return qe({x:h.x,y:h.y,width:0,height:0});this.rawPoints.push({x:t,y:n,width:a})}if(this.smoothLast(),this.isRuler||this.rawPoints.length&lt;2)return;if(this.rawPoints.length===2)return pc.strokePointsBoundingBox(this.rawPoints[0],this.rawPoints[1]);if(this.rawPoints.length&lt;=4)return;let l=pc.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1],this.rawPoints[this.rawPoints.length-1],this.rawPoints[this.rawPoints.length-1]),u=pc.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.rawPoints[this.rawPoints.length-2],this.rawPoints[this.rawPoints.length-2]),d=pc.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1],this.rawPoints[this.rawPoints.length-1]),c=pc.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-4],this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.rawPoints[this.rawPoints.length-2]),p=pc.interpolatedBoundingBox(this.smoothedPoints[this.smoothedPoints.length-4],this.smoothedPoints[this.smoothedPoints.length-3],this.smoothedPoints[this.smoothedPoints.length-2],this.smoothedPoints[this.smoothedPoints.length-1]);return l=Rs(l,u),l=Rs(l,d),l=Rs(l,c),l=Rs(l,p),l}smoothLast(){let t=this.rawPoints.length,n=t-2;if(t&lt;2)return;if(t===2){this.smoothedPoints[0]=hS(this.rawPoints[0]);return}let o=0,i=0,s=0;for(let a=-1;a&lt;2;a++){let l=this.rawPoints[n+a];o+=l.x,i+=l.y,s+=l.width}o/=3,i/=3,s/=3,this.smoothedPoints[n]={x:o,y:i,width:s}}rulerEndPoint(t,n){let o=new Pr(t-this.rawPoints[0].x,n-this.rawPoints[0].y),i=o.magnitude();if(i&lt;=this.LengthThreshold)return{x:t,y:n};let s=o.angle("deg"),a=Math.round(s/this.StepAngle)*this.StepAngle;if(Math.abs(a-s)&lt;=this.snapThreshold(i)){let l=new Pr(1,0).rotate(a,"deg");return De(this.rawPoints[0].x+l.x*i,this.rawPoints[0].y+l.y*i)}else return{x:t,y:n}}};var TS=class{constructor(){this.list=[]}wait(){let e=ss();return this.list.push(e),e}resolve(e){let t=this.list;this.list=[],t.forEach(n=&gt;n.resolve(e))}reject(e){let t=this.list;this.list=[],t.forEach(n=&gt;n.reject(e))}};var Us=class{constructor(e,t){this.fetcher=e;this.retryThrottle=t;this.waiters=new TS;this.fetching=!1}get throttling(){var e;return!this.fetchedAt||!this.retryThrottle?!1:((e=this.data)==null?void 0:e.type)==="error"&amp;&amp;Date.now()&lt;this.fetchedAt+this.retryThrottle.delay*this.retryThrottle.unit}async fetch(e,t){var n;return((n=this.data)==null?void 0:n.type)==="success"?this.data:this.throttling?{type:"cancelled",reason:"throttled"}:this.fetching?this.waiters.wait():(this.fetching=!0,this._fetch(e,t).then(o=&gt;{this.data=o,this.fetchedAt=Date.now(),this.waiters.resolve(o)}).finally(()=&gt;{this.fetching=!1}),this.waiters.wait())}async _fetch(e,t){try{let n=await this.fetcher(e,t);return{type:"success",value:n}}catch(n){return t!=null&amp;&amp;t.aborted?{type:"cancelled",reason:"aborted"}:{type:"error",error:n}}}get(){var e;if(((e=this.data)==null?void 0:e.type)==="success")return{value:this.data.value}}error(){var e;if(((e=this.data)==null?void 0:e.type)==="error")return{value:this.data.error}}};function kX({now:r,intervalMs:e,index:t,total:n,jitterMs:o}){Ee(0&lt;=o&amp;&amp;o&lt;e,"jitterMs must be in range 0 ..&lt; intervalMs");let i=e*n,s=e*t,a=r%i,l=r-a+s;return l&lt;=r?l+i+o:l+o}function z_(r){if(!/^\d+?-\d+$/.test(r))throw new Error("invalid revision: "+r);return r.split("-").map(e=&gt;parseInt(e))}function El(r,e){let[t,n]=z_(r),[o,i]=z_(e);return Math.sign(t!==o?t-o:n-i)}var Sg=class{constructor(e){this.factory=e}get current(){return this.t?this.t.value:(this.t={value:this.factory()},this.t.value)}invalidate(){this.t=void 0}};function Mbe(r,e,t){return e?`${r}/${e}/${t}`:`${r}/${t}`}function Nbe(r,e,t,n){return n?`${r}/${e}/${t}:${n}`:`${r}/${e}/${t}`}var H_=class{constructor(e,t,n,o,i,s=new Sg(()=&gt;new J1)){this.type=e;this.id=t;this.pageIndex=n;this.snapshotId=o;this.strokes=i;this.receivedStrokes=s;this._remoteCurrentStrokes=new Map;this.htmlToCardMatrix=new ft;this.history=new Z1;this.updatedRectBoundingBox=new ri;this.layerLoadState=new lf;this._cancelled=!1;this.unifier=aX(e=&gt;this.updateDocumentLayerInternal(e),e=&gt;`${e.afterGeneration}`)}get currentStroke(){return this._currentStroke}get remoteCurrentStrokes(){return this._remoteCurrentStrokes}get extRevision(){return this._extRevision}get receivedStrokeRevision(){return this._receivedStrokeRevision}get assetLoadedAtLeastOnce(){var e,t;return((t=(e=this.assetFetcher)==null?void 0:e.get())==null?void 0:t.value)!==void 0}get hasAssetAndLoaded(){var e,t,n;return((n=(t=(e=this.assetFetcher)==null?void 0:e.get())==null?void 0:t.value)==null?void 0:n.remote_id)!==void 0}getLayerMetadata(){return this.layerMetadata}setLayerMetadata(e){this.layerMetadata=e}get generation(){var e,t;return(t=(e=this.layerMetadata)==null?void 0:e.generation)!=null?t:0}getLayerLoadState(){return this.layerLoadState}static reset(){this.instances=new Map}static get(e,t){var n;if(t.document)return this.forDocument(e,t.document.id,t.document.index,t.document.commentSnapshotId);{let o=(n=t.rootParent().document)==null?void 0:n.id;return this.forCard(e,t.id,o)}}static forCard(e,t,n){let o=Mbe(e,n,t),i=this.instances.get(o);return i||(i=new H_(e,t,0,void 0,new J1),i.layerLoadState.set("notFound"),this.instances.set(o,i)),i}static forDocument(e,t,n,o){let i=Nbe(e,t,n,o),s=this.instances.get(i);return s||(s=new H_(e,t,n,o,new M_),this.instances.set(i,s)),s}canClearAllStroke(){return this.strokes.canClearAll()}clearAllStroke(){if(!this.canClearAllStroke)return;let e=df.clearAll(this.strokes);return this.history.push(e),this.strokes.clear(),this._currentStroke=void 0,e}beginStroke(e){let t=e.penType,n=Sr();this._cancelled=!1,this._currentStroke=new wS({id:n,type:t,width:e.width,color:e.color},e.isRuler)}setRemoteCurrentStroke({sessionId:e,content:t,zoom:n,isRuler:o}){if(!o){let a=this._remoteCurrentStrokes.get(e);if(a)return a.add({...t.points[0],zoom:n}),a}let i={...t,color:dn(t.color)},s;return o?s=fu.fromContent(t).cloneToMutable(t.id,!0):(s=new wS(i,!1),s.add({...t.points[0],zoom:n})),this._remoteCurrentStrokes.set(e,s),s}deleteRemoteCurrentStroke(e){this._remoteCurrentStrokes.delete(e)}clearRemoteCurrentStroke(){this._remoteCurrentStrokes.clear()}addPoint(e,t,n,o){let i=this._currentStroke;if(!i)throw new Error("current stroke is not ready");let s=this.htmlToCardMatrix.applied({x:e,y:t}),a=i.add({x:s.x,y:s.y,pressure:o,zoom:n});return a&amp;&amp;this.updatedRectBoundingBox.add(a),a}endStroke(){let e=this.currentStroke;if(this._currentStroke=void 0,!!e)return this.commitStroke(e)}deleteStroke(e){this.strokes.delete(e)}get cancelled(){return this._cancelled}cancelStroke(e=!1){let t=this.currentStroke;if(!t)return;this._cancelled=!0,this._currentStroke=void 0;let{points:n}=t.content;if(e||n.length&lt;2)return;let o=n[0],i=n[n.length-1];if(n.length&gt;=c0||$u(o,i)&gt;=c0)return this.commitStroke(t)}beginLasso(e,t){return this.lasso={begin:{x:e,y:t},end:{x:e,y:t}},{width:0,height:0,...Bs({x:e,y:t},1/devicePixelRatio)}}updateLasso(e,t){let n=this.lasso;if(!n)return;let{begin:o}=n;this.lasso={begin:o,end:{x:e,y:t}};let i=Math.min(e,o.x)/devicePixelRatio,s=Math.min(t,o.y)/devicePixelRatio,a=Math.max(e,o.x)/devicePixelRatio,l=Math.max(t,o.y)/devicePixelRatio;return{...{x:i,y:s,width:a-i,height:l-s}}}endLasso(e,t){let n=this.lasso;if(!n)return;let{begin:o}=n;this.lasso={begin:o,end:{x:e,y:t}}}commitStroke(e,t=!0){this.strokes.push(e);let n=df.addStroke(e);return t&amp;&amp;this.history.push(n),n}commitReceivedStroke(e){this.receivedStrokes.current.push(fu.fromContent(e))}deleteReceivedStroke(e){this.receivedStrokes.current.delete(e)}clearUpdatedRect(){this.updatedRectBoundingBox.clear()}getUpdatedCanvasClipRect(){if(!this.updatedRectBoundingBox.rect)return;let e=this.updatedRectBoundingBox.rect,n=this.htmlToCardMatrix.inverted().applied({x:e.x,y:e.y,width:e.width,height:e.height});return n={x:Math.floor(n.x),y:Math.floor(n.y),width:Math.ceil(n.width),height:Math.ceil(n.height)},n}packContents(){return Array.from(this.strokes).map(e=&gt;e.content)}packReceivedContents(){return Array.from(this.receivedStrokes.current).map(e=&gt;e.content)}strokesSynced(){return this.strokes.length()===this.receivedStrokes.current.length()}async updateData(e){var o,i,s;let t=e.drawnAssetId(this.type);await((o=this.assetFetcher)==null?void 0:o.fetch());let n=(s=(i=this.assetFetcher)==null?void 0:i.get())==null?void 0:s.value;if(!(n&amp;&amp;n.remote_id===t))return this.assetFetcher=new Us(async()=&gt;{if(t){let{contents:a,revision:l}=await ie.lnsClient.downloadAsset(t).then(__),u=n==null?void 0:n.remote_id,d=n==null?void 0:n.assetRev;if(u&amp;&amp;d&amp;&amp;l&amp;&amp;El(l,d)&lt;=0)return{remote_id:u,assetRev:d};let c=a.map(fu.fromContent);return this.strokes.setBase(c),this.receivedStrokes.current.setBase(c),{remote_id:t,assetRev:l}}return{}}),await this.assetFetcher.fetch()}mergeExtended(e){let t=e.extendedDrawn();if(!t||t.commands.length===0)return!1;let n=!1;for(let o of t.commands){let{payload:i,revision:s}=o;if(!(this.extRevision&amp;&amp;El(s,this.extRevision)&lt;=0)){if(i.operation==="add"){let a=vg(i.content);this.commitReceivedStroke(a),this.commitStroke(fu.fromContent(a),!1)}else this.deleteReceivedStroke(i.id),this.deleteStroke(i.id);this._extRevision=s,this._receivedStrokeRevision=s,n=!0}}return n}async onServerCommand(e,t,n){if(e.operation==="add"){let o=vg(e.content);this.commitReceivedStroke(o),n&amp;&amp;this.commitStroke(fu.fromContent(o),!1)}else this.deleteReceivedStroke(e.strokeId),n&amp;&amp;this.deleteStroke(e.strokeId);this._receivedStrokeRevision=t}async updateDocumentLayer({afterGeneration:e}={afterGeneration:this.generation}){return this.unifier({afterGeneration:e})}async updateDocumentLayerInternal({afterGeneration:e}){var s;let t=Gr(this.id,`id must be document id: id=${this.id}, type=${this.type}`),n=ie.lnsClient,o=this.type,i=await this.layerLoadState.fetch(async()=&gt;{let a;if(this.snapshotId?a=await n.getDocumentLayerSnapshot({type:o,documentId:t,snapshotId:this.snapshotId,index:this.pageIndex}):a=await n.getDocumentLayer({type:o,documentId:t,index:this.pageIndex,afterGeneration:e}),!a)return"notFound";let[l,u]=a;if(!(this.generation!==l.generation))return"notUpdated";this.layerMetadata=l;for(let c of u)this.strokes.push(fu.fromContent(c));return this.strokes.applyMetadata(l),"updated"});return this.layerLoadState.state instanceof Error?{type:"error",error:this.layerLoadState.state}:{type:"success",value:(s=i==null?void 0:i.value)!=null?s:"notFound"}}updateTransformMatrix({card:e,mtx:t,canvasSize:n}){let o=e.drawnGeometry(this.type),i=e.contentSize,s=e.content.margins,a={width:s.left+i.width+s.right,height:s.top+i.height+s.bottom};this.htmlToCardMatrix.identity(),this.htmlToCardMatrix.prepend(1,0,0,1,-t.e,-t.f),this.htmlToCardMatrix.prepend(1/t.a,0,0,1/t.a,0,0);let l=1/$i(n.width,n.height,a.width,a.height);this.htmlToCardMatrix.prepend(l,0,0,l,0,0),this.htmlToCardMatrix.prepend(1,0,0,1,a.width*.5-s.left,a.height*.5-s.top);let u=$i(o.canvas.width,o.canvas.height,i.width,i.height);this.htmlToCardMatrix.prepend(u,0,0,u,0,0),this.htmlToCardMatrix.prepend(1,0,0,1,(o.canvas.width-i.width*u)*.5,(o.canvas.height-i.height*u)*.5)}clearHistory(){this.history=new Z1}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}undo(){let e=this.history.undo();return e&amp;&amp;this.runOperation(e),e}redo(){let e=this.history.redo();return e&amp;&amp;this.runOperation(e),e}runOperation(e){this.strokes.applyOperation(e)}},Xn=H_;Xn.instances=new Map;function RU(r){let e=async t=&gt;{let n=Xn.get(r,t),o=await n.updateData(t);if((o==null?void 0:o.type)==="error")throw o.error;if(t.document){let i=await n.updateDocumentLayer();if(i.type==="error")throw i.error}else n.getLayerLoadState().set("notFound");return n.packContents()};return new Us(e,{delay:1,unit:6e4})}var ES=oe(FX());function Wb(r,e){let t=new lf,n=!1,o,i=new Set;async function s(h,{force:f}={force:!1}){if(!f&amp;&amp;(n||c()===!1))return;let m;if(f||t.state===null||t.state instanceof Error){let g=new AbortController;i.add(g);try{m=await t.fetch(()=&gt;r(h,g))}finally{i.delete(g)}}else t.state==="fetching"?m=await t.wait():t.state==="done"&amp;&amp;(m=t.get());return t.state instanceof Error?(o=t.state,e&amp;&amp;(n=!0,setTimeout(()=&gt;{n=!1},e.delay*e.unit))):o=void 0,m==null?void 0:m.value}function a(h){var f;return(f=t.get())==null?void 0:f.value}function l(h){var f;return s(h),(f=t.get())==null?void 0:f.value}function u(){return n}function d(){return o}function c(){let h=t.get();if(h)return h.value!==void 0}function p(){t=new lf,i.forEach(h=&gt;h.abort()),i=new Set,n=!1,o=void 0}return{exists:c,get:a,getOrLoad:l,fetch:s,isThrottling:u,lastError:d,invalidate:p}}function Sp(r){return new Promise((t,n)=&gt;{setTimeout(t,r.delay*r.unit)})}var $b=5;async function W_({url:r,maxRetryCount:e,signal:t}){return MX({url:r,maxRetryCount:e,retryCount:0,signal:t,method:"GET"}).then(n=&gt;n==null?void 0:n.blob())}async function MX({url:r,maxRetryCount:e,retryCount:t,signal:n,method:o}){let i=await fetch(r,{method:o,signal:n});if(i.status===200)return i;if(i.status===202)return e&lt;=t?void 0:(await Sp({delay:$b,unit:1e3}),MX({url:r,maxRetryCount:e,retryCount:t+1,signal:n,method:o}));throw new sr(i.status,await i.text())}String.prototype.codePointAt||function(){var r=function(){try{var t={},n=Object.defineProperty,o=n(t,t,t)&amp;&amp;n}catch(i){}return o}(),e=function(t){if(this==null)throw TypeError();var n=String(this),o=n.length,i=t?Number(t):0;if(i!=i&amp;&amp;(i=0),!(i&lt;0||i&gt;=o)){var s=n.charCodeAt(i),a;return s&gt;=55296&amp;&amp;s&lt;=56319&amp;&amp;o&gt;i+1&amp;&amp;(a=n.charCodeAt(i+1),a&gt;=56320&amp;&amp;a&lt;=57343)?(s-55296)*1024+a-56320+65536:s}};r?r(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var nz=0,yQ=-3;function nD(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Bbe(r,e){this.source=r,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new nD,this.dtree=new nD}var CQ=new nD,SQ=new nD,oz=new Uint8Array(30),iz=new Uint16Array(30),xQ=new Uint8Array(30),wQ=new Uint16Array(30),Rbe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NX=new nD,xp=new Uint8Array(288+32);function TQ(r,e,t,n){var o,i;for(o=0;o&lt;t;++o)r[o]=0;for(o=0;o&lt;30-t;++o)r[o+t]=o/t|0;for(i=n,o=0;o&lt;30;++o)e[o]=i,i+=1&lt;&lt;r[o]}function Lbe(r,e){var t;for(t=0;t&lt;7;++t)r.table[t]=0;for(r.table[7]=24,r.table[8]=152,r.table[9]=112,t=0;t&lt;24;++t)r.trans[t]=256+t;for(t=0;t&lt;144;++t)r.trans[24+t]=t;for(t=0;t&lt;8;++t)r.trans[24+144+t]=280+t;for(t=0;t&lt;112;++t)r.trans[24+144+8+t]=144+t;for(t=0;t&lt;5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t&lt;32;++t)e.trans[t]=t}var BX=new Uint16Array(16);function UU(r,e,t,n){var o,i;for(o=0;o&lt;16;++o)r.table[o]=0;for(o=0;o&lt;n;++o)r.table[e[t+o]]++;for(r.table[0]=0,i=0,o=0;o&lt;16;++o)BX[o]=i,i+=r.table[o];for(o=0;o&lt;n;++o)e[t+o]&amp;&amp;(r.trans[BX[e[t+o]]++]=o)}function Obe(r){r.bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7);var e=r.tag&amp;1;return r.tag&gt;&gt;&gt;=1,e}function wp(r,e,t){if(!e)return t;for(;r.bitcount&lt;24;)r.tag|=r.source[r.sourceIndex++]&lt;&lt;r.bitcount,r.bitcount+=8;var n=r.tag&amp;65535&gt;&gt;&gt;16-e;return r.tag&gt;&gt;&gt;=e,r.bitcount-=e,n+t}function qU(r,e){for(;r.bitcount&lt;24;)r.tag|=r.source[r.sourceIndex++]&lt;&lt;r.bitcount,r.bitcount+=8;var t=0,n=0,o=0,i=r.tag;do n=2*n+(i&amp;1),i&gt;&gt;&gt;=1,++o,t+=e.table[o],n-=e.table[o];while(n&gt;=0);return r.tag=i,r.bitcount-=o,e.trans[t+n]}function Ube(r,e,t){var n,o,i,s,a,l;for(n=wp(r,5,257),o=wp(r,5,1),i=wp(r,4,4),s=0;s&lt;19;++s)xp[s]=0;for(s=0;s&lt;i;++s){var u=wp(r,3,0);xp[Rbe[s]]=u}for(UU(NX,xp,0,19),a=0;a&lt;n+o;){var d=qU(r,NX);switch(d){case 16:var c=xp[a-1];for(l=wp(r,2,3);l;--l)xp[a++]=c;break;case 17:for(l=wp(r,3,3);l;--l)xp[a++]=0;break;case 18:for(l=wp(r,7,11);l;--l)xp[a++]=0;break;default:xp[a++]=d;break}}UU(e,xp,0,n),UU(t,xp,n,o)}function RX(r,e,t){for(;;){var n=qU(r,e);if(n===256)return nz;if(n&lt;256)r.dest[r.destLen++]=n;else{var o,i,s,a;for(n-=257,o=wp(r,oz[n],iz[n]),i=qU(r,t),s=r.destLen-wp(r,xQ[i],wQ[i]),a=s;a&lt;s+o;++a)r.dest[r.destLen++]=r.dest[a]}}}function zbe(r){for(var e,t,n;r.bitcount&gt;8;)r.sourceIndex--,r.bitcount-=8;if(e=r.source[r.sourceIndex+1],e=256*e+r.source[r.sourceIndex],t=r.source[r.sourceIndex+3],t=256*t+r.source[r.sourceIndex+2],e!==(~t&amp;65535))return yQ;for(r.sourceIndex+=4,n=e;n;--n)r.dest[r.destLen++]=r.source[r.sourceIndex++];return r.bitcount=0,nz}function Hbe(r,e){var t=new Bbe(r,e),n,o,i;do{switch(n=Obe(t),o=wp(t,2,0),o){case 0:i=zbe(t);break;case 1:i=RX(t,CQ,SQ);break;case 2:Ube(t,t.ltree,t.dtree),i=RX(t,t.ltree,t.dtree);break;default:i=yQ}if(i!==nz)throw new Error("Data error")}while(!n);return t.destLen&lt;t.dest.length?typeof t.dest.slice=="function"?t.dest.slice(0,t.destLen):t.dest.subarray(0,t.destLen):t.dest}Lbe(CQ,SQ);TQ(oz,iz,4,3);TQ(xQ,wQ,2,1);oz[28]=0;iz[28]=258;var Gbe=Hbe;function DS(r,e,t,n,o){return Math.pow(1-o,3)*r+3*Math.pow(1-o,2)*o*e+3*(1-o)*Math.pow(o,2)*t+Math.pow(o,3)*n}function Ag(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Ag.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Ag.prototype.addPoint=function(r,e){typeof r=="number"&amp;&amp;((isNaN(this.x1)||isNaN(this.x2))&amp;&amp;(this.x1=r,this.x2=r),r&lt;this.x1&amp;&amp;(this.x1=r),r&gt;this.x2&amp;&amp;(this.x2=r)),typeof e=="number"&amp;&amp;((isNaN(this.y1)||isNaN(this.y2))&amp;&amp;(this.y1=e,this.y2=e),e&lt;this.y1&amp;&amp;(this.y1=e),e&gt;this.y2&amp;&amp;(this.y2=e))};Ag.prototype.addX=function(r){this.addPoint(r,null)};Ag.prototype.addY=function(r){this.addPoint(null,r)};Ag.prototype.addBezier=function(r,e,t,n,o,i,s,a){var l=[r,e],u=[t,n],d=[o,i],c=[s,a];this.addPoint(r,e),this.addPoint(s,a);for(var p=0;p&lt;=1;p++){var h=6*l[p]-12*u[p]+6*d[p],f=-3*l[p]+9*u[p]-9*d[p]+3*c[p],m=3*u[p]-3*l[p];if(f===0){if(h===0)continue;var g=-m/h;0&lt;g&amp;&amp;g&lt;1&amp;&amp;(p===0&amp;&amp;this.addX(DS(l[p],u[p],d[p],c[p],g)),p===1&amp;&amp;this.addY(DS(l[p],u[p],d[p],c[p],g)));continue}var v=Math.pow(h,2)-4*m*f;if(!(v&lt;0)){var b=(-h+Math.sqrt(v))/(2*f);0&lt;b&amp;&amp;b&lt;1&amp;&amp;(p===0&amp;&amp;this.addX(DS(l[p],u[p],d[p],c[p],b)),p===1&amp;&amp;this.addY(DS(l[p],u[p],d[p],c[p],b)));var C=(-h-Math.sqrt(v))/(2*f);0&lt;C&amp;&amp;C&lt;1&amp;&amp;(p===0&amp;&amp;this.addX(DS(l[p],u[p],d[p],c[p],C)),p===1&amp;&amp;this.addY(DS(l[p],u[p],d[p],c[p],C)))}}};Ag.prototype.addQuad=function(r,e,t,n,o,i){var s=r+.6666666666666666*(t-r),a=e+2/3*(n-e),l=s+1/3*(o-r),u=a+1/3*(i-e);this.addBezier(r,e,s,a,l,u,o,i)};function Ds(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Ds.prototype.moveTo=function(r,e){this.commands.push({type:"M",x:r,y:e})};Ds.prototype.lineTo=function(r,e){this.commands.push({type:"L",x:r,y:e})};Ds.prototype.curveTo=Ds.prototype.bezierCurveTo=function(r,e,t,n,o,i){this.commands.push({type:"C",x1:r,y1:e,x2:t,y2:n,x:o,y:i})};Ds.prototype.quadTo=Ds.prototype.quadraticCurveTo=function(r,e,t,n){this.commands.push({type:"Q",x1:r,y1:e,x:t,y:n})};Ds.prototype.close=Ds.prototype.closePath=function(){this.commands.push({type:"Z"})};Ds.prototype.extend=function(r){if(r.commands)r=r.commands;else if(r instanceof Ag){var e=r;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,r)};Ds.prototype.getBoundingBox=function(){for(var r=new Ag,e=0,t=0,n=0,o=0,i=0;i&lt;this.commands.length;i++){var s=this.commands[i];switch(s.type){case"M":r.addPoint(s.x,s.y),e=n=s.x,t=o=s.y;break;case"L":r.addPoint(s.x,s.y),n=s.x,o=s.y;break;case"Q":r.addQuad(n,o,s.x1,s.y1,s.x,s.y),n=s.x,o=s.y;break;case"C":r.addBezier(n,o,s.x1,s.y1,s.x2,s.y2,s.x,s.y),n=s.x,o=s.y;break;case"Z":n=e,o=t;break;default:throw new Error("Unexpected path command "+s.type)}}return r.isEmpty()&amp;&amp;r.addPoint(0,0),r};Ds.prototype.draw=function(r){r.beginPath();for(var e=0;e&lt;this.commands.length;e+=1){var t=this.commands[e];t.type==="M"?r.moveTo(t.x,t.y):t.type==="L"?r.lineTo(t.x,t.y):t.type==="C"?r.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?r.quadraticCurveTo(t.x1,t.y1,t.x,t.y):t.type==="Z"&amp;&amp;r.closePath()}this.fill&amp;&amp;(r.fillStyle=this.fill,r.fill()),this.stroke&amp;&amp;(r.strokeStyle=this.stroke,r.lineWidth=this.strokeWidth,r.stroke())};Ds.prototype.toPathData=function(r){r=r!==void 0?r:2;function e(s){return Math.round(s)===s?""+Math.round(s):s.toFixed(r)}function t(){for(var s=arguments,a="",l=0;l&lt;arguments.length;l+=1){var u=s[l];u&gt;=0&amp;&amp;l&gt;0&amp;&amp;(a+=" "),a+=e(u)}return a}for(var n="",o=0;o&lt;this.commands.length;o+=1){var i=this.commands[o];i.type==="M"?n+="M"+t(i.x,i.y):i.type==="L"?n+="L"+t(i.x,i.y):i.type==="C"?n+="C"+t(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type==="Q"?n+="Q"+t(i.x1,i.y1,i.x,i.y):i.type==="Z"&amp;&amp;(n+="Z")}return n};Ds.prototype.toSVG=function(r){var e='&lt;path d="';return e+=this.toPathData(r),e+='"',this.fill&amp;&amp;this.fill!=="black"&amp;&amp;(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&amp;&amp;(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/&gt;",e};Ds.prototype.toDOMElement=function(r){var e=this.toPathData(r),t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};function DQ(r){throw new Error(r)}function LX(r,e){r||DQ(e)}var Ir={fail:DQ,argument:LX,assert:LX},OX=32768,UX=2147483648,PS={},Pt={},Br={};function gc(r){return function(){return r}}Pt.BYTE=function(r){return Ir.argument(r&gt;=0&amp;&amp;r&lt;=255,"Byte value should be between 0 and 255."),[r]};Br.BYTE=gc(1);Pt.CHAR=function(r){return[r.charCodeAt(0)]};Br.CHAR=gc(1);Pt.CHARARRAY=function(r){typeof r=="undefined"&amp;&amp;(r="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],t=0;t&lt;r.length;t+=1)e[t]=r.charCodeAt(t);return e};Br.CHARARRAY=function(r){return typeof r=="undefined"?0:r.length};Pt.USHORT=function(r){return[r&gt;&gt;8&amp;255,r&amp;255]};Br.USHORT=gc(2);Pt.SHORT=function(r){return r&gt;=OX&amp;&amp;(r=-(2*OX-r)),[r&gt;&gt;8&amp;255,r&amp;255]};Br.SHORT=gc(2);Pt.UINT24=function(r){return[r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,r&amp;255]};Br.UINT24=gc(3);Pt.ULONG=function(r){return[r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,r&amp;255]};Br.ULONG=gc(4);Pt.LONG=function(r){return r&gt;=UX&amp;&amp;(r=-(2*UX-r)),[r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,r&amp;255]};Br.LONG=gc(4);Pt.FIXED=Pt.ULONG;Br.FIXED=Br.ULONG;Pt.FWORD=Pt.SHORT;Br.FWORD=Br.SHORT;Pt.UFWORD=Pt.USHORT;Br.UFWORD=Br.USHORT;Pt.LONGDATETIME=function(r){return[0,0,0,0,r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,r&amp;255]};Br.LONGDATETIME=gc(8);Pt.TAG=function(r){return Ir.argument(r.length===4,"Tag should be exactly 4 ASCII characters."),[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3)]};Br.TAG=gc(4);Pt.Card8=Pt.BYTE;Br.Card8=Br.BYTE;Pt.Card16=Pt.USHORT;Br.Card16=Br.USHORT;Pt.OffSize=Pt.BYTE;Br.OffSize=Br.BYTE;Pt.SID=Pt.USHORT;Br.SID=Br.USHORT;Pt.NUMBER=function(r){return r&gt;=-107&amp;&amp;r&lt;=107?[r+139]:r&gt;=108&amp;&amp;r&lt;=1131?(r=r-108,[(r&gt;&gt;8)+247,r&amp;255]):r&gt;=-1131&amp;&amp;r&lt;=-108?(r=-r-108,[(r&gt;&gt;8)+251,r&amp;255]):r&gt;=-32768&amp;&amp;r&lt;=32767?Pt.NUMBER16(r):Pt.NUMBER32(r)};Br.NUMBER=function(r){return Pt.NUMBER(r).length};Pt.NUMBER16=function(r){return[28,r&gt;&gt;8&amp;255,r&amp;255]};Br.NUMBER16=gc(3);Pt.NUMBER32=function(r){return[29,r&gt;&gt;24&amp;255,r&gt;&gt;16&amp;255,r&gt;&gt;8&amp;255,r&amp;255]};Br.NUMBER32=gc(5);Pt.REAL=function(r){var e=r.toString(),t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(t){var n=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));e=(Math.round(r*n)/n).toString()}for(var o="",i=0,s=e.length;i&lt;s;i+=1){var a=e[i];a==="e"?o+=e[++i]==="-"?"c":"b":a==="."?o+="a":a==="-"?o+="e":o+=a}o+=o.length&amp;1?"f":"ff";for(var l=[30],u=0,d=o.length;u&lt;d;u+=2)l.push(parseInt(o.substr(u,2),16));return l};Br.REAL=function(r){return Pt.REAL(r).length};Pt.NAME=Pt.CHARARRAY;Br.NAME=Br.CHARARRAY;Pt.STRING=Pt.CHARARRAY;Br.STRING=Br.CHARARRAY;PS.UTF8=function(r,e,t){for(var n=[],o=t,i=0;i&lt;o;i++,e+=1)n[i]=r.getUint8(e);return String.fromCharCode.apply(null,n)};PS.UTF16=function(r,e,t){for(var n=[],o=t/2,i=0;i&lt;o;i++,e+=2)n[i]=r.getUint16(e);return String.fromCharCode.apply(null,n)};Pt.UTF16=function(r){for(var e=[],t=0;t&lt;r.length;t+=1){var n=r.charCodeAt(t);e[e.length]=n&gt;&gt;8&amp;255,e[e.length]=n&amp;255}return e};Br.UTF16=function(r){return r.length*2};var YU={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};PS.MACSTRING=function(r,e,t,n){var o=YU[n];if(o!==void 0){for(var i="",s=0;s&lt;t;s++){var a=r.getUint8(e+s);a&lt;=127?i+=String.fromCharCode(a):i+=o[a&amp;127]}return i}};var $_=typeof WeakMap=="function"&amp;&amp;new WeakMap,V_,Wbe=function(r){if(!V_){V_={};for(var e in YU)V_[e]=new String(e)}var t=V_[r];if(t!==void 0){if($_){var n=$_.get(t);if(n!==void 0)return n}var o=YU[r];if(o!==void 0){for(var i={},s=0;s&lt;o.length;s++)i[o.charCodeAt(s)]=s+128;return $_&amp;&amp;$_.set(t,i),i}}};Pt.MACSTRING=function(r,e){var t=Wbe(e);if(t!==void 0){for(var n=[],o=0;o&lt;r.length;o++){var i=r.charCodeAt(o);if(i&gt;=128&amp;&amp;(i=t[i],i===void 0))return;n[o]=i}return n}};Br.MACSTRING=function(r,e){var t=Pt.MACSTRING(r,e);return t!==void 0?t.length:0};function XU(r){return r&gt;=-128&amp;&amp;r&lt;=127}function $be(r,e,t){for(var n=0,o=r.length;e&lt;o&amp;&amp;n&lt;64&amp;&amp;r[e]===0;)++e,++n;return t.push(128|n-1),e}function Vbe(r,e,t){for(var n=0,o=r.length,i=e;i&lt;o&amp;&amp;n&lt;64;){var s=r[i];if(!XU(s)||s===0&amp;&amp;i+1&lt;o&amp;&amp;r[i+1]===0)break;++i,++n}t.push(n-1);for(var a=e;a&lt;i;++a)t.push(r[a]+256&amp;255);return i}function jbe(r,e,t){for(var n=0,o=r.length,i=e;i&lt;o&amp;&amp;n&lt;64;){var s=r[i];if(s===0||XU(s)&amp;&amp;i+1&lt;o&amp;&amp;XU(r[i+1]))break;++i,++n}t.push(64|n-1);for(var a=e;a&lt;i;++a){var l=r[a];t.push(l+65536&gt;&gt;8&amp;255,l+256&amp;255)}return i}Pt.VARDELTAS=function(r){for(var e=0,t=[];e&lt;r.length;){var n=r[e];n===0?e=$be(r,e,t):n&gt;=-128&amp;&amp;n&lt;=127?e=Vbe(r,e,t):e=jbe(r,e,t)}return t};Pt.INDEX=function(r){for(var e=1,t=[e],n=[],o=0;o&lt;r.length;o+=1){var i=Pt.OBJECT(r[o]);Array.prototype.push.apply(n,i),e+=i.length,t.push(e)}if(n.length===0)return[0,0];for(var s=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,Pt.BYTE,Pt.USHORT,Pt.UINT24,Pt.ULONG][a],u=0;u&lt;t.length;u+=1){var d=l(t[u]);Array.prototype.push.apply(s,d)}return Array.prototype.concat(Pt.Card16(r.length),Pt.OffSize(a),s,n)};Br.INDEX=function(r){return Pt.INDEX(r).length};Pt.DICT=function(r){for(var e=[],t=Object.keys(r),n=t.length,o=0;o&lt;n;o+=1){var i=parseInt(t[o],0),s=r[i];e=e.concat(Pt.OPERAND(s.value,s.type)),e=e.concat(Pt.OPERATOR(i))}return e};Br.DICT=function(r){return Pt.DICT(r).length};Pt.OPERATOR=function(r){return r&lt;1200?[r]:[12,r-1200]};Pt.OPERAND=function(r,e){var t=[];if(Array.isArray(e))for(var n=0;n&lt;e.length;n+=1)Ir.argument(r.length===e.length,"Not enough arguments given for type"+e),t=t.concat(Pt.OPERAND(r[n],e[n]));else if(e==="SID")t=t.concat(Pt.NUMBER(r));else if(e==="offset")t=t.concat(Pt.NUMBER32(r));else if(e==="number")t=t.concat(Pt.NUMBER(r));else if(e==="real")t=t.concat(Pt.REAL(r));else throw new Error("Unknown operand type "+e);return t};Pt.OP=Pt.BYTE;Br.OP=Br.BYTE;var j_=typeof WeakMap=="function"&amp;&amp;new WeakMap;Pt.CHARSTRING=function(r){if(j_){var e=j_.get(r);if(e!==void 0)return e}for(var t=[],n=r.length,o=0;o&lt;n;o+=1){var i=r[o];t=t.concat(Pt[i.type](i.value))}return j_&amp;&amp;j_.set(r,t),t};Br.CHARSTRING=function(r){return Pt.CHARSTRING(r).length};Pt.OBJECT=function(r){var e=Pt[r.type];return Ir.argument(e!==void 0,"No encoding function for type "+r.type),e(r.value)};Br.OBJECT=function(r){var e=Br[r.type];return Ir.argument(e!==void 0,"No sizeOf function for type "+r.type),e(r.value)};Pt.TABLE=function(r){for(var e=[],t=r.fields.length,n=[],o=[],i=0;i&lt;t;i+=1){var s=r.fields[i],a=Pt[s.type];Ir.argument(a!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");var l=r[s.name];l===void 0&amp;&amp;(l=s.value);var u=a(l);s.type==="TABLE"?(o.push(e.length),e=e.concat([0,0]),n.push(u)):e=e.concat(u)}for(var d=0;d&lt;n.length;d+=1){var c=o[d],p=e.length;Ir.argument(p&lt;65536,"Table "+r.tableName+" too big."),e[c]=p&gt;&gt;8,e[c+1]=p&amp;255,e=e.concat(n[d])}return e};Br.TABLE=function(r){for(var e=0,t=r.fields.length,n=0;n&lt;t;n+=1){var o=r.fields[n],i=Br[o.type];Ir.argument(i!==void 0,"No sizeOf function for field type "+o.type+" ("+o.name+")");var s=r[o.name];s===void 0&amp;&amp;(s=o.value),e+=i(s),o.type==="TABLE"&amp;&amp;(e+=2)}return e};Pt.RECORD=Pt.TABLE;Br.RECORD=Br.TABLE;Pt.LITERAL=function(r){return r};Br.LITERAL=function(r){return r.length};function zs(r,e,t){if(e.length&amp;&amp;(e[0].name!=="coverageFormat"||e[0].value===1))for(var n=0;n&lt;e.length;n+=1){var o=e[n];this[o.name]=o.value}if(this.tableName=r,this.fields=e,t)for(var i=Object.keys(t),s=0;s&lt;i.length;s+=1){var a=i[s],l=t[a];this[a]!==void 0&amp;&amp;(this[a]=l)}}zs.prototype.encode=function(){return Pt.TABLE(this)};zs.prototype.sizeOf=function(){return Br.TABLE(this)};function oD(r,e,t){t===void 0&amp;&amp;(t=e.length);var n=new Array(e.length+1);n[0]={name:r+"Count",type:"USHORT",value:t};for(var o=0;o&lt;e.length;o++)n[o+1]={name:r+o,type:"USHORT",value:e[o]};return n}function QU(r,e,t){var n=e.length,o=new Array(n+1);o[0]={name:r+"Count",type:"USHORT",value:n};for(var i=0;i&lt;n;i++)o[i+1]={name:r+i,type:"TABLE",value:t(e[i],i)};return o}function iD(r,e,t){var n=e.length,o=[];o[0]={name:r+"Count",type:"USHORT",value:n};for(var i=0;i&lt;n;i++)o=o.concat(t(e[i],i));return o}function Q_(r){r.format===1?zs.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(oD("glyph",r.glyphs))):r.format===2?zs.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(iD("rangeRecord",r.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):Ir.assert(!1,"Coverage format must be 1 or 2.")}Q_.prototype=Object.create(zs.prototype);Q_.prototype.constructor=Q_;function J_(r){zs.call(this,"scriptListTable",iD("scriptRecord",r,function(e,t){var n=e.script,o=n.defaultLangSys;return Ir.assert(!!o,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new zs("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new zs("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:o.reqFeatureIndex}].concat(oD("featureIndex",o.featureIndexes)))}].concat(iD("langSys",n.langSysRecords,function(i,s){var a=i.langSys;return[{name:"langSysTag"+s,type:"TAG",value:i.tag},{name:"langSys"+s,type:"TABLE",value:new zs("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(oD("featureIndex",a.featureIndexes)))}]})))}]}))}J_.prototype=Object.create(zs.prototype);J_.prototype.constructor=J_;function Z_(r){zs.call(this,"featureListTable",iD("featureRecord",r,function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new zs("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(oD("lookupListIndex",n.lookupListIndexes)))}]}))}Z_.prototype=Object.create(zs.prototype);Z_.prototype.constructor=Z_;function eF(r,e){zs.call(this,"lookupListTable",QU("lookup",r,function(t){var n=e[t.lookupType];return Ir.assert(!!n,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new zs("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(QU("subtable",t.subtables,n)))}))}eF.prototype=Object.create(zs.prototype);eF.prototype.constructor=eF;var Bt={Table:zs,Record:zs,Coverage:Q_,ScriptList:J_,FeatureList:Z_,LookupList:eF,ushortList:oD,tableList:QU,recordList:iD};function zX(r,e){return r.getUint8(e)}function tF(r,e){return r.getUint16(e,!1)}function Kbe(r,e){return r.getInt16(e,!1)}function sz(r,e){return r.getUint32(e,!1)}function kQ(r,e){var t=r.getInt16(e,!1),n=r.getUint16(e+2,!1);return t+n/65535}function qbe(r,e){for(var t="",n=e;n&lt;e+4;n+=1)t+=String.fromCharCode(r.getInt8(n));return t}function Ybe(r,e,t){for(var n=0,o=0;o&lt;t;o+=1)n&lt;&lt;=8,n+=r.getUint8(e+o);return n}function Xbe(r,e,t){for(var n=[],o=e;o&lt;t;o+=1)n.push(r.getUint8(o));return n}function Qbe(r){for(var e="",t=0;t&lt;r.length;t+=1)e+=String.fromCharCode(r[t]);return e}var Jbe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Ue(r,e){this.data=r,this.offset=e,this.relativeOffset=0}Ue.prototype.parseByte=function(){var r=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,r};Ue.prototype.parseChar=function(){var r=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,r};Ue.prototype.parseCard8=Ue.prototype.parseByte;Ue.prototype.parseUShort=function(){var r=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,r};Ue.prototype.parseCard16=Ue.prototype.parseUShort;Ue.prototype.parseSID=Ue.prototype.parseUShort;Ue.prototype.parseOffset16=Ue.prototype.parseUShort;Ue.prototype.parseShort=function(){var r=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,r};Ue.prototype.parseF2Dot14=function(){var r=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,r};Ue.prototype.parseULong=function(){var r=sz(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,r};Ue.prototype.parseOffset32=Ue.prototype.parseULong;Ue.prototype.parseFixed=function(){var r=kQ(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,r};Ue.prototype.parseString=function(r){var e=this.data,t=this.offset+this.relativeOffset,n="";this.relativeOffset+=r;for(var o=0;o&lt;r;o++)n+=String.fromCharCode(e.getUint8(t+o));return n};Ue.prototype.parseTag=function(){return this.parseString(4)};Ue.prototype.parseLongDateTime=function(){var r=sz(this.data,this.offset+this.relativeOffset+4);return r-=2082844800,this.relativeOffset+=8,r};Ue.prototype.parseVersion=function(r){var e=tF(this.data,this.offset+this.relativeOffset),t=tF(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,r===void 0&amp;&amp;(r=4096),e+t/r/10};Ue.prototype.skip=function(r,e){e===void 0&amp;&amp;(e=1),this.relativeOffset+=Jbe[r]*e};Ue.prototype.parseULongList=function(r){r===void 0&amp;&amp;(r=this.parseULong());for(var e=new Array(r),t=this.data,n=this.offset+this.relativeOffset,o=0;o&lt;r;o++)e[o]=t.getUint32(n),n+=4;return this.relativeOffset+=r*4,e};Ue.prototype.parseOffset16List=Ue.prototype.parseUShortList=function(r){r===void 0&amp;&amp;(r=this.parseUShort());for(var e=new Array(r),t=this.data,n=this.offset+this.relativeOffset,o=0;o&lt;r;o++)e[o]=t.getUint16(n),n+=2;return this.relativeOffset+=r*2,e};Ue.prototype.parseShortList=function(r){for(var e=new Array(r),t=this.data,n=this.offset+this.relativeOffset,o=0;o&lt;r;o++)e[o]=t.getInt16(n),n+=2;return this.relativeOffset+=r*2,e};Ue.prototype.parseByteList=function(r){for(var e=new Array(r),t=this.data,n=this.offset+this.relativeOffset,o=0;o&lt;r;o++)e[o]=t.getUint8(n++);return this.relativeOffset+=r,e};Ue.prototype.parseList=function(r,e){e||(e=r,r=this.parseUShort());for(var t=new Array(r),n=0;n&lt;r;n++)t[n]=e.call(this);return t};Ue.prototype.parseList32=function(r,e){e||(e=r,r=this.parseULong());for(var t=new Array(r),n=0;n&lt;r;n++)t[n]=e.call(this);return t};Ue.prototype.parseRecordList=function(r,e){e||(e=r,r=this.parseUShort());for(var t=new Array(r),n=Object.keys(e),o=0;o&lt;r;o++){for(var i={},s=0;s&lt;n.length;s++){var a=n[s],l=e[a];i[a]=l.call(this)}t[o]=i}return t};Ue.prototype.parseRecordList32=function(r,e){e||(e=r,r=this.parseULong());for(var t=new Array(r),n=Object.keys(e),o=0;o&lt;r;o++){for(var i={},s=0;s&lt;n.length;s++){var a=n[s],l=e[a];i[a]=l.call(this)}t[o]=i}return t};Ue.prototype.parseStruct=function(r){if(typeof r=="function")return r.call(this);for(var e=Object.keys(r),t={},n=0;n&lt;e.length;n++){var o=e[n],i=r[o];t[o]=i.call(this)}return t};Ue.prototype.parseValueRecord=function(r){if(r===void 0&amp;&amp;(r=this.parseUShort()),r!==0){var e={};return r&amp;1&amp;&amp;(e.xPlacement=this.parseShort()),r&amp;2&amp;&amp;(e.yPlacement=this.parseShort()),r&amp;4&amp;&amp;(e.xAdvance=this.parseShort()),r&amp;8&amp;&amp;(e.yAdvance=this.parseShort()),r&amp;16&amp;&amp;(e.xPlaDevice=void 0,this.parseShort()),r&amp;32&amp;&amp;(e.yPlaDevice=void 0,this.parseShort()),r&amp;64&amp;&amp;(e.xAdvDevice=void 0,this.parseShort()),r&amp;128&amp;&amp;(e.yAdvDevice=void 0,this.parseShort()),e}};Ue.prototype.parseValueRecordList=function(){for(var r=this.parseUShort(),e=this.parseUShort(),t=new Array(e),n=0;n&lt;e;n++)t[n]=this.parseValueRecord(r);return t};Ue.prototype.parsePointer=function(r){var e=this.parseOffset16();if(e&gt;0)return new Ue(this.data,this.offset+e).parseStruct(r)};Ue.prototype.parsePointer32=function(r){var e=this.parseOffset32();if(e&gt;0)return new Ue(this.data,this.offset+e).parseStruct(r)};Ue.prototype.parseListOfLists=function(r){for(var e=this.parseOffset16List(),t=e.length,n=this.relativeOffset,o=new Array(t),i=0;i&lt;t;i++){var s=e[i];if(s===0){o[i]=void 0;continue}if(this.relativeOffset=s,r){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u&lt;a.length;u++)this.relativeOffset=s+a[u],l[u]=r.call(this);o[i]=l}else o[i]=this.parseUShortList()}return this.relativeOffset=n,o};Ue.prototype.parseCoverage=function(){var r=this.offset+this.relativeOffset,e=this.parseUShort(),t=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(t)};if(e===2){for(var n=new Array(t),o=0;o&lt;t;o++)n[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+r.toString(16)+": Coverage format must be 1 or 2.")};Ue.prototype.parseClassDef=function(){var r=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:Ue.uShort,end:Ue.uShort,classId:Ue.uShort})};throw new Error("0x"+r.toString(16)+": ClassDef format must be 1 or 2.")};Ue.list=function(r,e){return function(){return this.parseList(r,e)}};Ue.list32=function(r,e){return function(){return this.parseList32(r,e)}};Ue.recordList=function(r,e){return function(){return this.parseRecordList(r,e)}};Ue.recordList32=function(r,e){return function(){return this.parseRecordList32(r,e)}};Ue.pointer=function(r){return function(){return this.parsePointer(r)}};Ue.pointer32=function(r){return function(){return this.parsePointer32(r)}};Ue.tag=Ue.prototype.parseTag;Ue.byte=Ue.prototype.parseByte;Ue.uShort=Ue.offset16=Ue.prototype.parseUShort;Ue.uShortList=Ue.prototype.parseUShortList;Ue.uLong=Ue.offset32=Ue.prototype.parseULong;Ue.uLongList=Ue.prototype.parseULongList;Ue.struct=Ue.prototype.parseStruct;Ue.coverage=Ue.prototype.parseCoverage;Ue.classDef=Ue.prototype.parseClassDef;var HX={reserved:Ue.uShort,reqFeatureIndex:Ue.uShort,featureIndexes:Ue.uShortList};Ue.prototype.parseScriptList=function(){return this.parsePointer(Ue.recordList({tag:Ue.tag,script:Ue.pointer({defaultLangSys:Ue.pointer(HX),langSysRecords:Ue.recordList({tag:Ue.tag,langSys:Ue.pointer(HX)})})}))||[]};Ue.prototype.parseFeatureList=function(){return this.parsePointer(Ue.recordList({tag:Ue.tag,feature:Ue.pointer({featureParams:Ue.offset16,lookupListIndexes:Ue.uShortList})}))||[]};Ue.prototype.parseLookupList=function(r){return this.parsePointer(Ue.list(Ue.pointer(function(){var e=this.parseUShort();Ir.argument(1&lt;=e&amp;&amp;e&lt;=9,"GPOS/GSUB lookup type "+e+" unknown.");var t=this.parseUShort(),n=t&amp;16;return{lookupType:e,lookupFlag:t,subtables:this.parseList(Ue.pointer(r[e])),markFilteringSet:n?this.parseUShort():void 0}})))||[]};Ue.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var r=this.parseUShort(),e=this.parseUShort();Ir.argument(r===1&amp;&amp;e&lt;1,"GPOS/GSUB feature variations table unknown.");var t=this.parseRecordList32({conditionSetOffset:Ue.offset32,featureTableSubstitutionOffset:Ue.offset32});return t})||[]};var $t={getByte:zX,getCard8:zX,getUShort:tF,getCard16:tF,getShort:Kbe,getULong:sz,getFixed:kQ,getTag:qbe,getOffset:Ybe,getBytes:Xbe,bytesToString:Qbe,Parser:Ue};function Zbe(r,e){e.parseUShort(),r.length=e.parseULong(),r.language=e.parseULong();var t;r.groupCount=t=e.parseULong(),r.glyphIndexMap={};for(var n=0;n&lt;t;n+=1)for(var o=e.parseULong(),i=e.parseULong(),s=e.parseULong(),a=o;a&lt;=i;a+=1)r.glyphIndexMap[a]=s,s++}function eye(r,e,t,n,o){r.length=e.parseUShort(),r.language=e.parseUShort();var i;r.segCount=i=e.parseUShort()&gt;&gt;1,e.skip("uShort",3),r.glyphIndexMap={};for(var s=new $t.Parser(t,n+o+14),a=new $t.Parser(t,n+o+16+i*2),l=new $t.Parser(t,n+o+16+i*4),u=new $t.Parser(t,n+o+16+i*6),d=n+o+16+i*8,c=0;c&lt;i-1;c+=1)for(var p=void 0,h=s.parseUShort(),f=a.parseUShort(),m=l.parseShort(),g=u.parseUShort(),v=f;v&lt;=h;v+=1)g!==0?(d=u.offset+u.relativeOffset-2,d+=g,d+=(v-f)*2,p=$t.getUShort(t,d),p!==0&amp;&amp;(p=p+m&amp;65535)):p=v+m&amp;65535,r.glyphIndexMap[v]=p}function tye(r,e){var t={};t.version=$t.getUShort(r,e),Ir.argument(t.version===0,"cmap table version should be 0."),t.numTables=$t.getUShort(r,e+2);for(var n=-1,o=t.numTables-1;o&gt;=0;o-=1){var i=$t.getUShort(r,e+4+o*8),s=$t.getUShort(r,e+4+o*8+2);if(i===3&amp;&amp;(s===0||s===1||s===10)||i===0&amp;&amp;(s===0||s===1||s===2||s===3||s===4)){n=$t.getULong(r,e+4+o*8+4);break}}if(n===-1)throw new Error("No valid cmap sub-tables found.");var a=new $t.Parser(r,e+n);if(t.format=a.parseUShort(),t.format===12)Zbe(t,a);else if(t.format===4)eye(t,a,r,e,n);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+t.format+").");return t}function rye(r,e,t){r.segments.push({end:e,start:e,delta:-(e-t),offset:0,glyphIndex:t})}function nye(r){r.segments.push({end:65535,start:65535,delta:1,offset:0})}function oye(r){var e=!0,t;for(t=r.length-1;t&gt;0;t-=1){var n=r.get(t);if(n.unicode&gt;65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var o=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(o=o.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),o=o.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i=new Bt.Table("cmap",o);for(i.segments=[],t=0;t&lt;r.length;t+=1){for(var s=r.get(t),a=0;a&lt;s.unicodes.length;a+=1)rye(i,s.unicodes[a],t);i.segments=i.segments.sort(function(b,C){return b.start-C.start})}nye(i);var l=i.segments.length,u=0,d=[],c=[],p=[],h=[],f=[],m=[];for(t=0;t&lt;l;t+=1){var g=i.segments[t];g.end&lt;=65535&amp;&amp;g.start&lt;=65535?(d=d.concat({name:"end_"+t,type:"USHORT",value:g.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:g.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:g.delta}),h=h.concat({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),g.glyphId!==void 0&amp;&amp;(f=f.concat({name:"glyph_"+t,type:"USHORT",value:g.glyphId}))):u+=1,!e&amp;&amp;g.glyphIndex!==void 0&amp;&amp;(m=m.concat({name:"cmap12Start_"+t,type:"ULONG",value:g.start}),m=m.concat({name:"cmap12End_"+t,type:"ULONG",value:g.end}),m=m.concat({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}if(i.segCountX2=(l-u)*2,i.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(d),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(c),i.fields=i.fields.concat(p),i.fields=i.fields.concat(h),i.fields=i.fields.concat(f),i.cmap4Length=14+d.length*2+2+c.length*2+p.length*2+h.length*2+f.length*2,!e){var v=16+m.length*4;i.cmap12Offset=12+2*2+4+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:v},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:m.length/3}]),i.fields=i.fields.concat(m)}return i}var PQ={parse:tye,make:oye},Y_=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],iye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],sye=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],jb=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function AQ(r){this.font=r}AQ.prototype.charToGlyphIndex=function(r){var e=r.codePointAt(0),t=this.font.glyphs;if(t){for(var n=0;n&lt;t.length;n+=1)for(var o=t.get(n),i=0;i&lt;o.unicodes.length;i+=1)if(o.unicodes[i]===e)return n}return null};function IQ(r){this.cmap=r}IQ.prototype.charToGlyphIndex=function(r){return this.cmap.glyphIndexMap[r.codePointAt(0)]||0};function rF(r,e){this.encoding=r,this.charset=e}rF.prototype.charToGlyphIndex=function(r){var e=r.codePointAt(0),t=this.encoding[e];return this.charset.indexOf(t)};function az(r){switch(r.version){case 1:this.names=jb.slice();break;case 2:this.names=new Array(r.numberOfGlyphs);for(var e=0;e&lt;r.numberOfGlyphs;e++)r.glyphNameIndex[e]&lt;jb.length?this.names[e]=jb[r.glyphNameIndex[e]]:this.names[e]=r.names[r.glyphNameIndex[e]-jb.length];break;case 2.5:this.names=new Array(r.numberOfGlyphs);for(var t=0;t&lt;r.numberOfGlyphs;t++)this.names[t]=jb[t+r.glyphNameIndex[t]];break;case 3:this.names=[];break;default:this.names=[];break}}az.prototype.nameToGlyphIndex=function(r){return this.names.indexOf(r)};az.prototype.glyphIndexToName=function(r){return this.names[r]};function aye(r){for(var e,t=r.tables.cmap.glyphIndexMap,n=Object.keys(t),o=0;o&lt;n.length;o+=1){var i=n[o],s=t[i];e=r.glyphs.get(s),e.addUnicode(parseInt(i))}for(var a=0;a&lt;r.glyphs.length;a+=1)e=r.glyphs.get(a),r.cffEncoding?r.isCIDFont?e.name="gid"+a:e.name=r.cffEncoding.charset[a]:r.glyphNames.names&amp;&amp;(e.name=r.glyphNames.glyphIndexToName(a))}function lye(r){r._IndexToUnicodeMap={};for(var e=r.tables.cmap.glyphIndexMap,t=Object.keys(e),n=0;n&lt;t.length;n+=1){var o=t[n],i=e[o];r._IndexToUnicodeMap[i]===void 0?r._IndexToUnicodeMap[i]={unicodes:[parseInt(o)]}:r._IndexToUnicodeMap[i].unicodes.push(parseInt(o))}}function uye(r,e){e.lowMemory?lye(r):aye(r)}function dye(r,e,t,n,o){r.beginPath(),r.moveTo(e,t),r.lineTo(n,o),r.stroke()}var Vb={line:dye};function cye(r,e){var t=e||new Ds;return{configurable:!0,get:function(){return typeof t=="function"&amp;&amp;(t=t()),t},set:function(n){t=n}}}function sd(r){this.bindConstructorValues(r)}sd.prototype.bindConstructorValues=function(r){this.index=r.index||0,this.name=r.name||null,this.unicode=r.unicode||void 0,this.unicodes=r.unicodes||r.unicode!==void 0?[r.unicode]:[],"xMin"in r&amp;&amp;(this.xMin=r.xMin),"yMin"in r&amp;&amp;(this.yMin=r.yMin),"xMax"in r&amp;&amp;(this.xMax=r.xMax),"yMax"in r&amp;&amp;(this.yMax=r.yMax),"advanceWidth"in r&amp;&amp;(this.advanceWidth=r.advanceWidth),Object.defineProperty(this,"path",cye(this,r.path))};sd.prototype.addUnicode=function(r){this.unicodes.length===0&amp;&amp;(this.unicode=r),this.unicodes.push(r)};sd.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};sd.prototype.getPath=function(r,e,t,n,o){r=r!==void 0?r:0,e=e!==void 0?e:0,t=t!==void 0?t:72;var i,s;n||(n={});var a=n.xScale,l=n.yScale;if(n.hinting&amp;&amp;o&amp;&amp;o.hinting&amp;&amp;(s=this.path&amp;&amp;o.hinting.exec(this,t)),s)i=o.hinting.getCommands(s),r=Math.round(r),e=Math.round(e),a=l=1;else{i=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*t;a===void 0&amp;&amp;(a=u),l===void 0&amp;&amp;(l=u)}for(var d=new Ds,c=0;c&lt;i.length;c+=1){var p=i[c];p.type==="M"?d.moveTo(r+p.x*a,e+-p.y*l):p.type==="L"?d.lineTo(r+p.x*a,e+-p.y*l):p.type==="Q"?d.quadraticCurveTo(r+p.x1*a,e+-p.y1*l,r+p.x*a,e+-p.y*l):p.type==="C"?d.curveTo(r+p.x1*a,e+-p.y1*l,r+p.x2*a,e+-p.y2*l,r+p.x*a,e+-p.y*l):p.type==="Z"&amp;&amp;d.closePath()}return d};sd.prototype.getContours=function(){if(this.points===void 0)return[];for(var r=[],e=[],t=0;t&lt;this.points.length;t+=1){var n=this.points[t];e.push(n),n.lastPointOfContour&amp;&amp;(r.push(e),e=[])}return Ir.argument(e.length===0,"There are still points left in the current contour."),r};sd.prototype.getMetrics=function(){for(var r=this.path.commands,e=[],t=[],n=0;n&lt;r.length;n+=1){var o=r[n];o.type!=="Z"&amp;&amp;(e.push(o.x),t.push(o.y)),(o.type==="Q"||o.type==="C")&amp;&amp;(e.push(o.x1),t.push(o.y1)),o.type==="C"&amp;&amp;(e.push(o.x2),t.push(o.y2))}var i={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,t),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i};sd.prototype.draw=function(r,e,t,n,o){this.getPath(e,t,n,o).draw(r)};sd.prototype.drawPoints=function(r,e,t,n){function o(c,p,h,f){r.beginPath();for(var m=0;m&lt;c.length;m+=1)r.moveTo(p+c[m].x*f,h+c[m].y*f),r.arc(p+c[m].x*f,h+c[m].y*f,2,0,Math.PI*2,!1);r.closePath(),r.fill()}e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:24;for(var i=1/this.path.unitsPerEm*n,s=[],a=[],l=this.path,u=0;u&lt;l.commands.length;u+=1){var d=l.commands[u];d.x!==void 0&amp;&amp;s.push({x:d.x,y:-d.y}),d.x1!==void 0&amp;&amp;a.push({x:d.x1,y:-d.y1}),d.x2!==void 0&amp;&amp;a.push({x:d.x2,y:-d.y2})}r.fillStyle="blue",o(s,e,t,i),r.fillStyle="red",o(a,e,t,i)};sd.prototype.drawMetrics=function(r,e,t,n){var o;e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:24,o=1/this.path.unitsPerEm*n,r.lineWidth=1,r.strokeStyle="black",Vb.line(r,e,-1e4,e,1e4),Vb.line(r,-1e4,t,1e4,t);var i=this.xMin||0,s=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;r.strokeStyle="blue",Vb.line(r,e+i*o,-1e4,e+i*o,1e4),Vb.line(r,e+a*o,-1e4,e+a*o,1e4),Vb.line(r,-1e4,t+-s*o,1e4,t+-s*o),Vb.line(r,-1e4,t+-l*o,1e4,t+-l*o),r.strokeStyle="green",Vb.line(r,e+u*o,-1e4,e+u*o,1e4)};function K_(r,e,t){Object.defineProperty(r,e,{get:function(){return r.path,r[t]},set:function(n){r[t]=n},enumerable:!0,configurable:!0})}function lz(r,e){if(this.font=r,this.glyphs={},Array.isArray(e))for(var t=0;t&lt;e.length;t++){var n=e[t];n.path.unitsPerEm=r.unitsPerEm,this.glyphs[t]=n}this.length=e&amp;&amp;e.length||0}lz.prototype.get=function(r){if(this.glyphs[r]===void 0){this.font._push(r),typeof this.glyphs[r]=="function"&amp;&amp;(this.glyphs[r]=this.glyphs[r]());var e=this.glyphs[r],t=this.font._IndexToUnicodeMap[r];if(t)for(var n=0;n&lt;t.unicodes.length;n++)e.addUnicode(t.unicodes[n]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+r:e.name=this.font.cffEncoding.charset[r]:this.font.glyphNames.names&amp;&amp;(e.name=this.font.glyphNames.glyphIndexToName(r)),this.glyphs[r].advanceWidth=this.font._hmtxTableData[r].advanceWidth,this.glyphs[r].leftSideBearing=this.font._hmtxTableData[r].leftSideBearing}else typeof this.glyphs[r]=="function"&amp;&amp;(this.glyphs[r]=this.glyphs[r]());return this.glyphs[r]};lz.prototype.push=function(r,e){this.glyphs[r]=e,this.length++};function pye(r,e){return new sd({index:e,font:r})}function hye(r,e,t,n,o,i){return function(){var s=new sd({index:e,font:r});return s.path=function(){t(s,n,o);var a=i(r.glyphs,s);return a.unitsPerEm=r.unitsPerEm,a},K_(s,"xMin","_xMin"),K_(s,"xMax","_xMax"),K_(s,"yMin","_yMin"),K_(s,"yMax","_yMax"),s}}function fye(r,e,t,n){return function(){var o=new sd({index:e,font:r});return o.path=function(){var i=t(r,o,n);return i.unitsPerEm=r.unitsPerEm,i},o}}var Dp={GlyphSet:lz,glyphLoader:pye,ttfGlyphLoader:hye,cffGlyphLoader:fye};function EQ(r,e){if(r===e)return!0;if(Array.isArray(r)&amp;&amp;Array.isArray(e)){if(r.length!==e.length)return!1;for(var t=0;t&lt;r.length;t+=1)if(!EQ(r[t],e[t]))return!1;return!0}else return!1}function JU(r){var e;return r.length&lt;1240?e=107:r.length&lt;33900?e=1131:e=32768,e}function Tg(r,e,t){var n=[],o=[],i=$t.getCard16(r,e),s,a;if(i!==0){var l=$t.getByte(r,e+2);s=e+(i+1)*l+2;for(var u=e+3,d=0;d&lt;i+1;d+=1)n.push($t.getOffset(r,u,l)),u+=l;a=s+n[i]}else a=e+2;for(var c=0;c&lt;n.length-1;c+=1){var p=$t.getBytes(r,s+n[c],s+n[c+1]);t&amp;&amp;(p=t(p)),o.push(p)}return{objects:o,startOffset:e,endOffset:a}}function mye(r,e){var t=[],n=$t.getCard16(r,e),o,i;if(n!==0){var s=$t.getByte(r,e+2);o=e+(n+1)*s+2;for(var a=e+3,l=0;l&lt;n+1;l+=1)t.push($t.getOffset(r,a,s)),a+=s;i=o+t[n]}else i=e+2;return{offsets:t,startOffset:e,endOffset:i}}function gye(r,e,t,n,o){var i=$t.getCard16(t,n),s=0;if(i!==0){var a=$t.getByte(t,n+2);s=n+(i+1)*a+2}var l=$t.getBytes(t,s+e[r],s+e[r+1]);return o&amp;&amp;(l=o(l)),l}function vye(r){for(var e="",t=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var o=r.parseByte(),i=o&gt;&gt;4,s=o&amp;15;if(i===t||(e+=n[i],s===t))break;e+=n[s]}return parseFloat(e)}function bye(r,e){var t,n,o,i;if(e===28)return t=r.parseByte(),n=r.parseByte(),t&lt;&lt;8|n;if(e===29)return t=r.parseByte(),n=r.parseByte(),o=r.parseByte(),i=r.parseByte(),t&lt;&lt;24|n&lt;&lt;16|o&lt;&lt;8|i;if(e===30)return vye(r);if(e&gt;=32&amp;&amp;e&lt;=246)return e-139;if(e&gt;=247&amp;&amp;e&lt;=250)return t=r.parseByte(),(e-247)*256+t+108;if(e&gt;=251&amp;&amp;e&lt;=254)return t=r.parseByte(),-(e-251)*256-t-108;throw new Error("Invalid b0 "+e)}function yye(r){for(var e={},t=0;t&lt;r.length;t+=1){var n=r[t][0],o=r[t][1],i=void 0;if(o.length===1?i=o[0]:i=o,e.hasOwnProperty(n)&amp;&amp;!isNaN(e[n]))throw new Error("Object "+e+" already has key "+n);e[n]=i}return e}function _Q(r,e,t){e=e!==void 0?e:0;var n=new $t.Parser(r,e),o=[],i=[];for(t=t!==void 0?t:r.length;n.relativeOffset&lt;t;){var s=n.parseByte();s&lt;=21?(s===12&amp;&amp;(s=1200+n.parseByte()),o.push([s,i]),i=[]):i.push(bye(n,s))}return yye(o)}function rD(r,e){return e&lt;=390?e=Y_[e]:e=r[e-391],e}function FQ(r,e,t){for(var n={},o,i=0;i&lt;e.length;i+=1){var s=e[i];if(Array.isArray(s.type)){var a=[];a.length=s.type.length;for(var l=0;l&lt;s.type.length;l++)o=r[s.op]!==void 0?r[s.op][l]:void 0,o===void 0&amp;&amp;(o=s.value!==void 0&amp;&amp;s.value[l]!==void 0?s.value[l]:null),s.type[l]==="SID"&amp;&amp;(o=rD(t,o)),a[l]=o;n[s.name]=a}else o=r[s.op],o===void 0&amp;&amp;(o=s.value!==void 0?s.value:null),s.type==="SID"&amp;&amp;(o=rD(t,o)),n[s.name]=o}return n}function Cye(r,e){var t={};return t.formatMajor=$t.getCard8(r,e),t.formatMinor=$t.getCard8(r,e+1),t.size=$t.getCard8(r,e+2),t.offsetSize=$t.getCard8(r,e+3),t.startOffset=e,t.endOffset=e+4,t}var MQ=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],NQ=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Sye(r,e){var t=_Q(r,0,r.byteLength);return FQ(t,MQ,e)}function BQ(r,e,t,n){var o=_Q(r,e,t);return FQ(o,NQ,n)}function GX(r,e,t,n){for(var o=[],i=0;i&lt;t.length;i+=1){var s=new DataView(new Uint8Array(t[i]).buffer),a=Sye(s,n);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&amp;&amp;u!==0){var d=BQ(r,u+e,l,n);if(a._defaultWidthX=d.defaultWidthX,a._nominalWidthX=d.nominalWidthX,d.subrs!==0){var c=u+d.subrs,p=Tg(r,c+e);a._subrs=p.objects,a._subrsBias=JU(a._subrs)}a._privateDict=d}o.push(a)}return o}function xye(r,e,t,n){var o,i,s=new $t.Parser(r,e);t-=1;var a=[".notdef"],l=s.parseCard8();if(l===0)for(var u=0;u&lt;t;u+=1)o=s.parseSID(),a.push(rD(n,o));else if(l===1)for(;a.length&lt;=t;){o=s.parseSID(),i=s.parseCard8();for(var d=0;d&lt;=i;d+=1)a.push(rD(n,o)),o+=1}else if(l===2)for(;a.length&lt;=t;){o=s.parseSID(),i=s.parseCard16();for(var c=0;c&lt;=i;c+=1)a.push(rD(n,o)),o+=1}else throw new Error("Unknown charset format "+l);return a}function wye(r,e,t){var n,o={},i=new $t.Parser(r,e),s=i.parseCard8();if(s===0)for(var a=i.parseCard8(),l=0;l&lt;a;l+=1)n=i.parseCard8(),o[n]=l;else if(s===1){var u=i.parseCard8();n=1;for(var d=0;d&lt;u;d+=1)for(var c=i.parseCard8(),p=i.parseCard8(),h=c;h&lt;=c+p;h+=1)o[h]=n,n+=1}else throw new Error("Unknown encoding format "+s);return new rF(o,t)}function WX(r,e,t){var n,o,i,s,a=new Ds,l=[],u=0,d=!1,c=!1,p=0,h=0,f,m,g,v;if(r.isCIDFont){var b=r.tables.cff.topDict._fdSelect[e.index],C=r.tables.cff.topDict._fdArray[b];f=C._subrs,m=C._subrsBias,g=C._defaultWidthX,v=C._nominalWidthX}else f=r.tables.cff.topDict._subrs,m=r.tables.cff.topDict._subrsBias,g=r.tables.cff.topDict._defaultWidthX,v=r.tables.cff.topDict._nominalWidthX;var x=g;function y(w,k){c&amp;&amp;a.closePath(),a.moveTo(w,k),c=!0}function S(){var w;w=l.length%2!==0,w&amp;&amp;!d&amp;&amp;(x=l.shift()+v),u+=l.length&gt;&gt;1,l.length=0,d=!0}function T(w){for(var k,A,I,E,O,Q,j,U,B,z,N,V,re=0;re&lt;w.length;){var ce=w[re];switch(re+=1,ce){case 1:S();break;case 3:S();break;case 4:l.length&gt;1&amp;&amp;!d&amp;&amp;(x=l.shift()+v,d=!0),h+=l.pop(),y(p,h);break;case 5:for(;l.length&gt;0;)p+=l.shift(),h+=l.shift(),a.lineTo(p,h);break;case 6:for(;l.length&gt;0&amp;&amp;(p+=l.shift(),a.lineTo(p,h),l.length!==0);)h+=l.shift(),a.lineTo(p,h);break;case 7:for(;l.length&gt;0&amp;&amp;(h+=l.shift(),a.lineTo(p,h),l.length!==0);)p+=l.shift(),a.lineTo(p,h);break;case 8:for(;l.length&gt;0;)n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s+l.shift(),a.curveTo(n,o,i,s,p,h);break;case 10:O=l.pop()+m,Q=f[O],Q&amp;&amp;T(Q);break;case 11:return;case 12:switch(ce=w[re],re+=1,ce){case 35:n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),j=i+l.shift(),U=s+l.shift(),B=j+l.shift(),z=U+l.shift(),N=B+l.shift(),V=z+l.shift(),p=N+l.shift(),h=V+l.shift(),l.shift(),a.curveTo(n,o,i,s,j,U),a.curveTo(B,z,N,V,p,h);break;case 34:n=p+l.shift(),o=h,i=n+l.shift(),s=o+l.shift(),j=i+l.shift(),U=s,B=j+l.shift(),z=s,N=B+l.shift(),V=h,p=N+l.shift(),a.curveTo(n,o,i,s,j,U),a.curveTo(B,z,N,V,p,h);break;case 36:n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),j=i+l.shift(),U=s,B=j+l.shift(),z=s,N=B+l.shift(),V=z+l.shift(),p=N+l.shift(),a.curveTo(n,o,i,s,j,U),a.curveTo(B,z,N,V,p,h);break;case 37:n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),j=i+l.shift(),U=s+l.shift(),B=j+l.shift(),z=U+l.shift(),N=B+l.shift(),V=z+l.shift(),Math.abs(N-p)&gt;Math.abs(V-h)?p=N+l.shift():h=V+l.shift(),a.curveTo(n,o,i,s,j,U),a.curveTo(B,z,N,V,p,h);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+ce),l.length=0}break;case 14:l.length&gt;0&amp;&amp;!d&amp;&amp;(x=l.shift()+v,d=!0),c&amp;&amp;(a.closePath(),c=!1);break;case 18:S();break;case 19:case 20:S(),re+=u+7&gt;&gt;3;break;case 21:l.length&gt;2&amp;&amp;!d&amp;&amp;(x=l.shift()+v,d=!0),h+=l.pop(),p+=l.pop(),y(p,h);break;case 22:l.length&gt;1&amp;&amp;!d&amp;&amp;(x=l.shift()+v,d=!0),p+=l.pop(),y(p,h);break;case 23:S();break;case 24:for(;l.length&gt;2;)n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s+l.shift(),a.curveTo(n,o,i,s,p,h);p+=l.shift(),h+=l.shift(),a.lineTo(p,h);break;case 25:for(;l.length&gt;6;)p+=l.shift(),h+=l.shift(),a.lineTo(p,h);n=p+l.shift(),o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s+l.shift(),a.curveTo(n,o,i,s,p,h);break;case 26:for(l.length%2&amp;&amp;(p+=l.shift());l.length&gt;0;)n=p,o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i,h=s+l.shift(),a.curveTo(n,o,i,s,p,h);break;case 27:for(l.length%2&amp;&amp;(h+=l.shift());l.length&gt;0;)n=p+l.shift(),o=h,i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s,a.curveTo(n,o,i,s,p,h);break;case 28:k=w[re],A=w[re+1],l.push((k&lt;&lt;24|A&lt;&lt;16)&gt;&gt;16),re+=2;break;case 29:O=l.pop()+r.gsubrsBias,Q=r.gsubrs[O],Q&amp;&amp;T(Q);break;case 30:for(;l.length&gt;0&amp;&amp;(n=p,o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s+(l.length===1?l.shift():0),a.curveTo(n,o,i,s,p,h),l.length!==0);)n=p+l.shift(),o=h,i=n+l.shift(),s=o+l.shift(),h=s+l.shift(),p=i+(l.length===1?l.shift():0),a.curveTo(n,o,i,s,p,h);break;case 31:for(;l.length&gt;0&amp;&amp;(n=p+l.shift(),o=h,i=n+l.shift(),s=o+l.shift(),h=s+l.shift(),p=i+(l.length===1?l.shift():0),a.curveTo(n,o,i,s,p,h),l.length!==0);)n=p,o=h+l.shift(),i=n+l.shift(),s=o+l.shift(),p=i+l.shift(),h=s+(l.length===1?l.shift():0),a.curveTo(n,o,i,s,p,h);break;default:ce&lt;32?console.log("Glyph "+e.index+": unknown operator "+ce):ce&lt;247?l.push(ce-139):ce&lt;251?(k=w[re],re+=1,l.push((ce-247)*256+k+108)):ce&lt;255?(k=w[re],re+=1,l.push(-(ce-251)*256-k-108)):(k=w[re],A=w[re+1],I=w[re+2],E=w[re+3],re+=4,l.push((k&lt;&lt;24|A&lt;&lt;16|I&lt;&lt;8|E)/65536))}}}return T(t),e.advanceWidth=x,a}function Tye(r,e,t,n){var o=[],i,s=new $t.Parser(r,e),a=s.parseCard8();if(a===0)for(var l=0;l&lt;t;l++){if(i=s.parseCard8(),i&gt;=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+n+")");o.push(i)}else if(a===3){var u=s.parseCard16(),d=s.parseCard16();if(d!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var c,p=0;p&lt;u;p++){if(i=s.parseCard8(),c=s.parseCard16(),i&gt;=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+n+")");if(c&gt;t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;d&lt;c;d++)o.push(i);d=c}if(c!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return o}function Dye(r,e,t,n){t.tables.cff={};var o=Cye(r,e),i=Tg(r,o.endOffset,$t.bytesToString),s=Tg(r,i.endOffset),a=Tg(r,s.endOffset,$t.bytesToString),l=Tg(r,a.endOffset);t.gsubrs=l.objects,t.gsubrsBias=JU(t.gsubrs);var u=GX(r,e,s.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var d=u[0];if(t.tables.cff.topDict=d,d._privateDict&amp;&amp;(t.defaultWidthX=d._privateDict.defaultWidthX,t.nominalWidthX=d._privateDict.nominalWidthX),d.ros[0]!==void 0&amp;&amp;d.ros[1]!==void 0&amp;&amp;(t.isCIDFont=!0),t.isCIDFont){var c=d.fdArray,p=d.fdSelect;if(c===0||p===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");c+=e;var h=Tg(r,c),f=GX(r,e,h.objects,a.objects);d._fdArray=f,p+=e,d._fdSelect=Tye(r,p,t.numGlyphs,f.length)}var m=e+d.private[1],g=BQ(r,m,d.private[0],a.objects);if(t.defaultWidthX=g.defaultWidthX,t.nominalWidthX=g.nominalWidthX,g.subrs!==0){var v=m+g.subrs,b=Tg(r,v);t.subrs=b.objects,t.subrsBias=JU(t.subrs)}else t.subrs=[],t.subrsBias=0;var C;n.lowMemory?(C=mye(r,e+d.charStrings),t.nGlyphs=C.offsets.length):(C=Tg(r,e+d.charStrings),t.nGlyphs=C.objects.length);var x=xye(r,e+d.charset,t.nGlyphs,a.objects);if(d.encoding===0?t.cffEncoding=new rF(iye,x):d.encoding===1?t.cffEncoding=new rF(sye,x):t.cffEncoding=wye(r,e+d.encoding,x),t.encoding=t.encoding||t.cffEncoding,t.glyphs=new Dp.GlyphSet(t),n.lowMemory)t._push=function(T){var w=gye(T,C.offsets,r,e+d.charStrings);t.glyphs.push(T,Dp.cffGlyphLoader(t,T,WX,w))};else for(var y=0;y&lt;t.nGlyphs;y+=1){var S=C.objects[y];t.glyphs.push(y,Dp.cffGlyphLoader(t,y,WX,S))}}function RQ(r,e){var t,n=Y_.indexOf(r);return n&gt;=0&amp;&amp;(t=n),n=e.indexOf(r),n&gt;=0?t=n+Y_.length:(t=Y_.length+e.length,e.push(r)),t}function kye(){return new Bt.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function Pye(r){var e=new Bt.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var t=0;t&lt;r.length;t+=1)e.names.push({name:"name_"+t,type:"NAME",value:r[t]});return e}function LQ(r,e,t){for(var n={},o=0;o&lt;r.length;o+=1){var i=r[o],s=e[i.name];s!==void 0&amp;&amp;!EQ(s,i.value)&amp;&amp;(i.type==="SID"&amp;&amp;(s=RQ(s,t)),n[i.op]={name:i.name,type:i.type,value:s})}return n}function $X(r,e){var t=new Bt.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=LQ(MQ,r,e),t}function VX(r){var e=new Bt.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:r}],e}function Aye(r){var e=new Bt.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var t=0;t&lt;r.length;t+=1)e.strings.push({name:"string_"+t,type:"STRING",value:r[t]});return e}function Iye(){return new Bt.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function Eye(r,e){for(var t=new Bt.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n&lt;r.length;n+=1){var o=r[n],i=RQ(o,e);t.fields.push({name:"glyph_"+n,type:"SID",value:i})}return t}function _ye(r){var e=[],t=r.path;e.push({name:"width",type:"NUMBER",value:r.advanceWidth});for(var n=0,o=0,i=0;i&lt;t.commands.length;i+=1){var s=void 0,a=void 0,l=t.commands[i];if(l.type==="Q"){var u=.3333333333333333,d=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*n+d*l.x1),y1:Math.round(u*o+d*l.y1),x2:Math.round(u*l.x+d*l.x1),y2:Math.round(u*l.y+d*l.y1)}}if(l.type==="M")s=Math.round(l.x-n),a=Math.round(l.y-o),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),o=Math.round(l.y);else if(l.type==="L")s=Math.round(l.x-n),a=Math.round(l.y-o),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),o=Math.round(l.y);else if(l.type==="C"){var c=Math.round(l.x1-n),p=Math.round(l.y1-o),h=Math.round(l.x2-l.x1),f=Math.round(l.y2-l.y1);s=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:c}),e.push({name:"dy1",type:"NUMBER",value:p}),e.push({name:"dx2",type:"NUMBER",value:h}),e.push({name:"dy2",type:"NUMBER",value:f}),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),o=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function Fye(r){for(var e=new Bt.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),t=0;t&lt;r.length;t+=1){var n=r.get(t),o=_ye(n);e.charStrings.push({name:n.name,type:"CHARSTRING",value:o})}return e}function Mye(r,e){var t=new Bt.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=LQ(NQ,r,e),t}function Nye(r,e){for(var t=new Bt.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/e.unitsPerEm,o={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},i={},s=[],a,l=1;l&lt;r.length;l+=1)a=r.get(l),s.push(a.name);var u=[];t.header=kye(),t.nameIndex=Pye([e.postScriptName]);var d=$X(o,u);t.topDictIndex=VX(d),t.globalSubrIndex=Iye(),t.charsets=Eye(s,u),t.charStringsIndex=Fye(r),t.privateDict=Mye(i,u),t.stringIndex=Aye(u);var c=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return o.charset=c,o.encoding=0,o.charStrings=o.charset+t.charsets.sizeOf(),o.private[1]=o.charStrings+t.charStringsIndex.sizeOf(),d=$X(o,u),t.topDictIndex=VX(d),t}var OQ={parse:Dye,make:Nye};function Bye(r,e){var t={},n=new $t.Parser(r,e);return t.version=n.parseVersion(),t.fontRevision=Math.round(n.parseFixed()*1e3)/1e3,t.checkSumAdjustment=n.parseULong(),t.magicNumber=n.parseULong(),Ir.argument(t.magicNumber===1594834165,"Font header has wrong magic number."),t.flags=n.parseUShort(),t.unitsPerEm=n.parseUShort(),t.created=n.parseLongDateTime(),t.modified=n.parseLongDateTime(),t.xMin=n.parseShort(),t.yMin=n.parseShort(),t.xMax=n.parseShort(),t.yMax=n.parseShort(),t.macStyle=n.parseUShort(),t.lowestRecPPEM=n.parseUShort(),t.fontDirectionHint=n.parseShort(),t.indexToLocFormat=n.parseShort(),t.glyphDataFormat=n.parseShort(),t}function Rye(r){var e=Math.round(new Date().getTime()/1e3)+2082844800,t=e;return r.createdTimestamp&amp;&amp;(t=r.createdTimestamp+2082844800),new Bt.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:t},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],r)}var UQ={parse:Bye,make:Rye};function Lye(r,e){var t={},n=new $t.Parser(r,e);return t.version=n.parseVersion(),t.ascender=n.parseShort(),t.descender=n.parseShort(),t.lineGap=n.parseShort(),t.advanceWidthMax=n.parseUShort(),t.minLeftSideBearing=n.parseShort(),t.minRightSideBearing=n.parseShort(),t.xMaxExtent=n.parseShort(),t.caretSlopeRise=n.parseShort(),t.caretSlopeRun=n.parseShort(),t.caretOffset=n.parseShort(),n.relativeOffset+=8,t.metricDataFormat=n.parseShort(),t.numberOfHMetrics=n.parseUShort(),t}function Oye(r){return new Bt.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],r)}var zQ={parse:Lye,make:Oye};function Uye(r,e,t,n,o){for(var i,s,a=new $t.Parser(r,e),l=0;l&lt;n;l+=1){l&lt;t&amp;&amp;(i=a.parseUShort(),s=a.parseShort());var u=o.get(l);u.advanceWidth=i,u.leftSideBearing=s}}function zye(r,e,t,n,o){r._hmtxTableData={};for(var i,s,a=new $t.Parser(e,t),l=0;l&lt;o;l+=1)l&lt;n&amp;&amp;(i=a.parseUShort(),s=a.parseShort()),r._hmtxTableData[l]={advanceWidth:i,leftSideBearing:s}}function Hye(r,e,t,n,o,i,s){s.lowMemory?zye(r,e,t,n,o):Uye(e,t,n,o,i)}function Gye(r){for(var e=new Bt.Table("hmtx",[]),t=0;t&lt;r.length;t+=1){var n=r.get(t),o=n.advanceWidth||0,i=n.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:o}),e.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:i})}return e}var HQ={parse:Hye,make:Gye};function Wye(r){for(var e=new Bt.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:r.length}]),t="",n=12+r.length*4,o=0;o&lt;r.length;++o){var i=t.indexOf(r[o]);i&lt;0&amp;&amp;(i=t.length,t+=r[o]),e.fields.push({name:"offset "+o,type:"USHORT",value:n+i}),e.fields.push({name:"length "+o,type:"USHORT",value:r[o].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),e}function $ye(r,e){var t=new $t.Parser(r,e),n=t.parseULong();Ir.argument(n===1,"Unsupported ltag table version."),t.skip("uLong",1);for(var o=t.parseULong(),i=[],s=0;s&lt;o;s++){for(var a="",l=e+t.parseUShort(),u=t.parseUShort(),d=l;d&lt;l+u;++d)a+=String.fromCharCode(r.getInt8(d));i.push(a)}return i}var GQ={make:Wye,parse:$ye};function Vye(r,e){var t={},n=new $t.Parser(r,e);return t.version=n.parseVersion(),t.numGlyphs=n.parseUShort(),t.version===1&amp;&amp;(t.maxPoints=n.parseUShort(),t.maxContours=n.parseUShort(),t.maxCompositePoints=n.parseUShort(),t.maxCompositeContours=n.parseUShort(),t.maxZones=n.parseUShort(),t.maxTwilightPoints=n.parseUShort(),t.maxStorage=n.parseUShort(),t.maxFunctionDefs=n.parseUShort(),t.maxInstructionDefs=n.parseUShort(),t.maxStackElements=n.parseUShort(),t.maxSizeOfInstructions=n.parseUShort(),t.maxComponentElements=n.parseUShort(),t.maxComponentDepth=n.parseUShort()),t}function jye(r){return new Bt.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:r}])}var WQ={parse:Vye,make:jye},$Q=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],VQ={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Kye={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},jQ={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function qye(r,e,t){switch(r){case 0:if(e===65535)return"und";if(t)return t[e];break;case 1:return VQ[e];case 3:return jQ[e]}}var ZU="utf-16",Yye={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Xye={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function KQ(r,e,t){switch(r){case 0:return ZU;case 1:return Xye[t]||Yye[e];case 3:if(e===1||e===10)return ZU;break}}function Qye(r,e,t){for(var n={},o=new $t.Parser(r,e),i=o.parseUShort(),s=o.parseUShort(),a=o.offset+o.parseUShort(),l=0;l&lt;s;l++){var u=o.parseUShort(),d=o.parseUShort(),c=o.parseUShort(),p=o.parseUShort(),h=$Q[p]||p,f=o.parseUShort(),m=o.parseUShort(),g=qye(u,c,t),v=KQ(u,d,c);if(v!==void 0&amp;&amp;g!==void 0){var b=void 0;if(v===ZU?b=PS.UTF16(r,a+m,f):b=PS.MACSTRING(r,a+m,f,v),b){var C=n[h];C===void 0&amp;&amp;(C=n[h]={}),C[g]=b}}}var x=0;return i===1&amp;&amp;(x=o.parseUShort()),n}function zU(r){var e={};for(var t in r)e[r[t]]=parseInt(t);return e}function jX(r,e,t,n,o,i){return new Bt.Record("NameRecord",[{name:"platformID",type:"USHORT",value:r},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:t},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:i}])}function Jye(r,e){var t=r.length,n=e.length-t+1;e:for(var o=0;o&lt;n;o++)for(;o&lt;n;o++){for(var i=0;i&lt;t;i++)if(e[o+i]!==r[i])continue e;return o}return-1}function KX(r,e){var t=Jye(r,e);if(t&lt;0){t=e.length;for(var n=0,o=r.length;n&lt;o;++n)e.push(r[n])}return t}function Zye(r,e){var t,n=[],o={},i=zU($Q);for(var s in r){var a=i[s];if(a===void 0&amp;&amp;(a=s),t=parseInt(a),isNaN(t))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');o[t]=r[s],n.push(t)}for(var l=zU(VQ),u=zU(jQ),d=[],c=[],p=0;p&lt;n.length;p++){t=n[p];var h=o[t];for(var f in h){var m=h[f],g=1,v=l[f],b=Kye[v],C=KQ(g,b,v),x=Pt.MACSTRING(m,C);x===void 0&amp;&amp;(g=0,v=e.indexOf(f),v&lt;0&amp;&amp;(v=e.length,e.push(f)),b=4,x=Pt.UTF16(m));var y=KX(x,c);d.push(jX(g,b,v,t,x.length,y));var S=u[f];if(S!==void 0){var T=Pt.UTF16(m),w=KX(T,c);d.push(jX(3,1,S,t,T.length,w))}}}d.sort(function(I,E){return I.platformID-E.platformID||I.encodingID-E.encodingID||I.languageID-E.languageID||I.nameID-E.nameID});for(var k=new Bt.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:d.length},{name:"stringOffset",type:"USHORT",value:6+d.length*12}]),A=0;A&lt;d.length;A++)k.fields.push({name:"record_"+A,type:"RECORD",value:d[A]});return k.fields.push({name:"strings",type:"LITERAL",value:c}),k}var qQ={parse:Qye,make:Zye},ez=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function eCe(r){for(var e=0;e&lt;ez.length;e+=1){var t=ez[e];if(r&gt;=t.begin&amp;&amp;r&lt;t.end)return e}return-1}function tCe(r,e){var t={},n=new $t.Parser(r,e);t.version=n.parseUShort(),t.xAvgCharWidth=n.parseShort(),t.usWeightClass=n.parseUShort(),t.usWidthClass=n.parseUShort(),t.fsType=n.parseUShort(),t.ySubscriptXSize=n.parseShort(),t.ySubscriptYSize=n.parseShort(),t.ySubscriptXOffset=n.parseShort(),t.ySubscriptYOffset=n.parseShort(),t.ySuperscriptXSize=n.parseShort(),t.ySuperscriptYSize=n.parseShort(),t.ySuperscriptXOffset=n.parseShort(),t.ySuperscriptYOffset=n.parseShort(),t.yStrikeoutSize=n.parseShort(),t.yStrikeoutPosition=n.parseShort(),t.sFamilyClass=n.parseShort(),t.panose=[];for(var o=0;o&lt;10;o++)t.panose[o]=n.parseByte();return t.ulUnicodeRange1=n.parseULong(),t.ulUnicodeRange2=n.parseULong(),t.ulUnicodeRange3=n.parseULong(),t.ulUnicodeRange4=n.parseULong(),t.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),t.fsSelection=n.parseUShort(),t.usFirstCharIndex=n.parseUShort(),t.usLastCharIndex=n.parseUShort(),t.sTypoAscender=n.parseShort(),t.sTypoDescender=n.parseShort(),t.sTypoLineGap=n.parseShort(),t.usWinAscent=n.parseUShort(),t.usWinDescent=n.parseUShort(),t.version&gt;=1&amp;&amp;(t.ulCodePageRange1=n.parseULong(),t.ulCodePageRange2=n.parseULong()),t.version&gt;=2&amp;&amp;(t.sxHeight=n.parseShort(),t.sCapHeight=n.parseShort(),t.usDefaultChar=n.parseUShort(),t.usBreakChar=n.parseUShort(),t.usMaxContent=n.parseUShort()),t}function rCe(r){return new Bt.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],r)}var tz={parse:tCe,make:rCe,unicodeRanges:ez,getUnicodeRange:eCe};function nCe(r,e){var t={},n=new $t.Parser(r,e);switch(t.version=n.parseVersion(),t.italicAngle=n.parseFixed(),t.underlinePosition=n.parseShort(),t.underlineThickness=n.parseShort(),t.isFixedPitch=n.parseULong(),t.minMemType42=n.parseULong(),t.maxMemType42=n.parseULong(),t.minMemType1=n.parseULong(),t.maxMemType1=n.parseULong(),t.version){case 1:t.names=jb.slice();break;case 2:t.numberOfGlyphs=n.parseUShort(),t.glyphNameIndex=new Array(t.numberOfGlyphs);for(var o=0;o&lt;t.numberOfGlyphs;o++)t.glyphNameIndex[o]=n.parseUShort();t.names=[];for(var i=0;i&lt;t.numberOfGlyphs;i++)if(t.glyphNameIndex[i]&gt;=jb.length){var s=n.parseChar();t.names.push(n.parseString(s))}break;case 2.5:t.numberOfGlyphs=n.parseUShort(),t.offset=new Array(t.numberOfGlyphs);for(var a=0;a&lt;t.numberOfGlyphs;a++)t.offset[a]=n.parseChar();break}return t}function oCe(){return new Bt.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var YQ={parse:nCe,make:oCe},hc=new Array(9);hc[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(Ue.coverage),deltaGlyphId:this.parseUShort()};if(t===2)return{substFormat:2,coverage:this.parsePointer(Ue.coverage),substitute:this.parseOffset16List()};Ir.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};hc[2]=function(){var e=this.parseUShort();return Ir.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Ue.coverage),sequences:this.parseListOfLists()}};hc[3]=function(){var e=this.parseUShort();return Ir.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Ue.coverage),alternateSets:this.parseListOfLists()}};hc[4]=function(){var e=this.parseUShort();return Ir.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Ue.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var kS={sequenceIndex:Ue.uShort,lookupListIndex:Ue.uShort};hc[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:t,coverage:this.parsePointer(Ue.coverage),ruleSets:this.parseListOfLists(function(){var i=this.parseUShort(),s=this.parseUShort();return{input:this.parseUShortList(i-1),lookupRecords:this.parseRecordList(s,kS)}})};if(t===2)return{substFormat:t,coverage:this.parsePointer(Ue.coverage),classDef:this.parsePointer(Ue.classDef),classSets:this.parseListOfLists(function(){var i=this.parseUShort(),s=this.parseUShort();return{classes:this.parseUShortList(i-1),lookupRecords:this.parseRecordList(s,kS)}})};if(t===3){var n=this.parseUShort(),o=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,Ue.pointer(Ue.coverage)),lookupRecords:this.parseRecordList(o,kS)}}Ir.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};hc[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(Ue.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(kS)}})};if(t===2)return{substFormat:2,coverage:this.parsePointer(Ue.coverage),backtrackClassDef:this.parsePointer(Ue.classDef),inputClassDef:this.parsePointer(Ue.classDef),lookaheadClassDef:this.parsePointer(Ue.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(kS)}})};if(t===3)return{substFormat:3,backtrackCoverage:this.parseList(Ue.pointer(Ue.coverage)),inputCoverage:this.parseList(Ue.pointer(Ue.coverage)),lookaheadCoverage:this.parseList(Ue.pointer(Ue.coverage)),lookupRecords:this.parseRecordList(kS)};Ir.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};hc[7]=function(){var e=this.parseUShort();Ir.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new Ue(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:hc[t].call(n)}};hc[8]=function(){var e=this.parseUShort();return Ir.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(Ue.coverage),backtrackCoverage:this.parseList(Ue.pointer(Ue.coverage)),lookaheadCoverage:this.parseList(Ue.pointer(Ue.coverage)),substitutes:this.parseUShortList()}};function iCe(r,e){e=e||0;var t=new Ue(r,e),n=t.parseVersion(1);return Ir.argument(n===1||n===1.1,"Unsupported GSUB table version."),n===1?{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(hc)}:{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(hc),variations:t.parseFeatureVariationsList()}}var AS=new Array(9);AS[1]=function(e){return e.substFormat===1?new Bt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Bt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)}].concat(Bt.ushortList("substitute",e.substitute)))};AS[2]=function(e){return Ir.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new Bt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)}].concat(Bt.tableList("seqSet",e.sequences,function(t){return new Bt.Table("sequenceSetTable",Bt.ushortList("sequence",t))})))};AS[3]=function(e){return Ir.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new Bt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)}].concat(Bt.tableList("altSet",e.alternateSets,function(t){return new Bt.Table("alternateSetTable",Bt.ushortList("alternate",t))})))};AS[4]=function(e){return Ir.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new Bt.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)}].concat(Bt.tableList("ligSet",e.ligatureSets,function(t){return new Bt.Table("ligatureSetTable",Bt.tableList("ligature",t,function(n){return new Bt.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:n.ligGlyph}].concat(Bt.ushortList("component",n.components,n.components.length+1)))}))})))};AS[6]=function(e){if(e.substFormat===1){var t=new Bt.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new Bt.Coverage(e.coverage)}].concat(Bt.tableList("chainRuleSet",e.chainRuleSets,function(i){return new Bt.Table("chainRuleSetTable",Bt.tableList("chainRule",i,function(s){var a=Bt.ushortList("backtrackGlyph",s.backtrack,s.backtrack.length).concat(Bt.ushortList("inputGlyph",s.input,s.input.length+1)).concat(Bt.ushortList("lookaheadGlyph",s.lookahead,s.lookahead.length)).concat(Bt.ushortList("substitution",[],s.lookupRecords.length));return s.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new Bt.Table("chainRuleTable",a)}))})));return t}else if(e.substFormat===2)Ir.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var n=[{name:"substFormat",type:"USHORT",value:e.substFormat}];n.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(i,s){n.push({name:"backtrackCoverage"+s,type:"TABLE",value:new Bt.Coverage(i)})}),n.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(i,s){n.push({name:"inputCoverage"+s,type:"TABLE",value:new Bt.Coverage(i)})}),n.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(i,s){n.push({name:"lookaheadCoverage"+s,type:"TABLE",value:new Bt.Coverage(i)})}),n.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(i,s){n=n.concat({name:"sequenceIndex"+s,type:"USHORT",value:i.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:i.lookupListIndex})});var o=new Bt.Table("chainContextTable",n);return o}Ir.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function sCe(r){return new Bt.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Bt.ScriptList(r.scripts)},{name:"features",type:"TABLE",value:new Bt.FeatureList(r.features)},{name:"lookups",type:"TABLE",value:new Bt.LookupList(r.lookups,AS)}])}var XQ={parse:iCe,make:sCe};function aCe(r,e){var t=new $t.Parser(r,e),n=t.parseULong();Ir.argument(n===1,"Unsupported META table version."),t.parseULong(),t.parseULong();for(var o=t.parseULong(),i={},s=0;s&lt;o;s++){var a=t.parseTag(),l=t.parseULong(),u=t.parseULong(),d=PS.UTF8(r,e+l,u);i[a]=d}return i}function lCe(r){var e=Object.keys(r).length,t="",n=16+e*12,o=new Bt.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:e}]);for(var i in r){var s=t.length;t+=r[i],o.fields.push({name:"tag "+i,type:"TAG",value:i}),o.fields.push({name:"offset "+i,type:"ULONG",value:n+s}),o.fields.push({name:"length "+i,type:"ULONG",value:r[i].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),o}var QQ={parse:aCe,make:lCe};function qX(r){return Math.log(r)/Math.log(2)|0}function uz(r){for(;r.length%4!==0;)r.push(0);for(var e=0,t=0;t&lt;r.length;t+=4)e+=(r[t]&lt;&lt;24)+(r[t+1]&lt;&lt;16)+(r[t+2]&lt;&lt;8)+r[t+3];return e%=Math.pow(2,32),e}function YX(r,e,t,n){return new Bt.Record("Table Record",[{name:"tag",type:"TAG",value:r!==void 0?r:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:t!==void 0?t:0},{name:"length",type:"ULONG",value:n!==void 0?n:0}])}function JQ(r){var e=new Bt.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=r,e.numTables=r.length;var t=Math.pow(2,qX(e.numTables));e.searchRange=16*t,e.entrySelector=qX(t),e.rangeShift=e.numTables*16-e.searchRange;for(var n=[],o=[],i=e.sizeOf()+YX().sizeOf()*e.numTables;i%4!==0;)i+=1,o.push({name:"padding",type:"BYTE",value:0});for(var s=0;s&lt;r.length;s+=1){var a=r[s];Ir.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=YX(a.tableName,uz(a.encode()),i,l);for(n.push({name:u.tag+" Table Record",type:"RECORD",value:u}),o.push({name:a.tableName+" table",type:"RECORD",value:a}),i+=l,Ir.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!==0;)i+=1,o.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(d,c){return d.value.tag&gt;c.value.tag?1:-1}),e.fields=e.fields.concat(n),e.fields=e.fields.concat(o),e}function XX(r,e,t){for(var n=0;n&lt;e.length;n+=1){var o=r.charToGlyphIndex(e[n]);if(o&gt;0){var i=r.glyphs.get(o);return i.getMetrics()}}return t}function uCe(r){for(var e=0,t=0;t&lt;r.length;t+=1)e+=r[t];return e/r.length}function dCe(r){for(var e=[],t=[],n=[],o=[],i=[],s=[],a=[],l,u=0,d=0,c=0,p=0,h=0,f=0;f&lt;r.glyphs.length;f+=1){var m=r.glyphs.get(f),g=m.unicode|0;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+f+"): advanceWidth is not a number.");(l&gt;g||l===void 0)&amp;&amp;g&gt;0&amp;&amp;(l=g),u&lt;g&amp;&amp;(u=g);var v=tz.getUnicodeRange(g);if(v&lt;32)d|=1&lt;&lt;v;else if(v&lt;64)c|=1&lt;&lt;v-32;else if(v&lt;96)p|=1&lt;&lt;v-64;else if(v&lt;123)h|=1&lt;&lt;v-96;else throw new Error("Unicode ranges bits &gt; 123 are reserved for internal usage");if(m.name!==".notdef"){var b=m.getMetrics();e.push(b.xMin),t.push(b.yMin),n.push(b.xMax),o.push(b.yMax),s.push(b.leftSideBearing),a.push(b.rightSideBearing),i.push(m.advanceWidth)}}var C={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:uCe(i),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,a)};C.ascender=r.ascender,C.descender=r.descender;var x=UQ.make({flags:3,unitsPerEm:r.unitsPerEm,xMin:C.xMin,yMin:C.yMin,xMax:C.xMax,yMax:C.yMax,lowestRecPPEM:3,createdTimestamp:r.createdTimestamp}),y=zQ.make({ascender:C.ascender,descender:C.descender,advanceWidthMax:C.advanceWidthMax,minLeftSideBearing:C.minLeftSideBearing,minRightSideBearing:C.minRightSideBearing,xMaxExtent:C.maxLeftSideBearing+(C.xMax-C.xMin),numberOfHMetrics:r.glyphs.length}),S=WQ.make(r.glyphs.length),T=tz.make(Object.assign({xAvgCharWidth:Math.round(C.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:d,ulUnicodeRange2:c,ulUnicodeRange3:p,ulUnicodeRange4:h,sTypoAscender:C.ascender,sTypoDescender:C.descender,sTypoLineGap:0,usWinAscent:C.yMax,usWinDescent:Math.abs(C.yMin),ulCodePageRange1:1,sxHeight:XX(r,"xyvw",{yMax:Math.round(C.ascender/2)}).yMax,sCapHeight:XX(r,"HIKLEFJMNTZBDPRAGOQSUVWXY",C).yMax,usDefaultChar:r.hasChar(" ")?32:0,usBreakChar:r.hasChar(" ")?32:0},r.tables.os2)),w=HQ.make(r.glyphs),k=PQ.make(r.glyphs),A=r.getEnglishName("fontFamily"),I=r.getEnglishName("fontSubfamily"),E=A+" "+I,O=r.getEnglishName("postScriptName");O||(O=A.replace(/\s/g,"")+"-"+I);var Q={};for(var j in r.names)Q[j]=r.names[j];Q.uniqueID||(Q.uniqueID={en:r.getEnglishName("manufacturer")+":"+E}),Q.postScriptName||(Q.postScriptName={en:O}),Q.preferredFamily||(Q.preferredFamily=r.names.fontFamily),Q.preferredSubfamily||(Q.preferredSubfamily=r.names.fontSubfamily);var U=[],B=qQ.make(Q,U),z=U.length&gt;0?GQ.make(U):void 0,N=YQ.make(),V=OQ.make(r.glyphs,{version:r.getEnglishName("version"),fullName:E,familyName:A,weightName:I,postScriptName:O,unitsPerEm:r.unitsPerEm,fontBBox:[0,C.yMin,C.ascender,C.advanceWidthMax]}),re=r.metas&amp;&amp;Object.keys(r.metas).length&gt;0?QQ.make(r.metas):void 0,ce=[x,y,S,T,B,k,N,V,w];z&amp;&amp;ce.push(z),r.tables.gsub&amp;&amp;ce.push(XQ.make(r.tables.gsub)),re&amp;&amp;ce.push(re);for(var ge=JQ(ce),ae=ge.encode(),Y=uz(ae),W=ge.fields,G=!1,ee=0;ee&lt;W.length;ee+=1)if(W[ee].name==="head table"){W[ee].value.checkSumAdjustment=2981146554-Y,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return ge}var cCe={make:JQ,fontToTable:dCe,computeCheckSum:uz};function HU(r,e){for(var t=0,n=r.length-1;t&lt;=n;){var o=t+n&gt;&gt;&gt;1,i=r[o].tag;if(i===e)return o;i&lt;e?t=o+1:n=o-1}return-t-1}function QX(r,e){for(var t=0,n=r.length-1;t&lt;=n;){var o=t+n&gt;&gt;&gt;1,i=r[o];if(i===e)return o;i&lt;e?t=o+1:n=o-1}return-t-1}function JX(r,e){for(var t,n=0,o=r.length-1;n&lt;=o;){var i=n+o&gt;&gt;&gt;1;t=r[i];var s=t.start;if(s===e)return t;s&lt;e?n=i+1:o=i-1}if(n&gt;0)return t=r[n-1],e&gt;t.end?0:t}function aD(r,e){this.font=r,this.tableName=e}aD.prototype={searchTag:HU,binSearch:QX,getTable:function(r){var e=this.font.tables[this.tableName];return!e&amp;&amp;r&amp;&amp;(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var r=this.getTable();return r?r.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var r=this.getTable();if(!!r){for(var e=!1,t=0;t&lt;r.scripts.length;t++){var n=r.scripts[t].tag;if(n==="DFLT")return n;n==="latn"&amp;&amp;(e=!0)}if(e)return"latn"}},getScriptTable:function(r,e){var t=this.getTable(e);if(t){r=r||"DFLT";var n=t.scripts,o=HU(t.scripts,r);if(o&gt;=0)return n[o].script;if(e){var i={tag:r,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-o,0,i),i.script}}},getLangSysTable:function(r,e,t){var n=this.getScriptTable(r,t);if(n){if(!e||e==="dflt"||e==="DFLT")return n.defaultLangSys;var o=HU(n.langSysRecords,e);if(o&gt;=0)return n.langSysRecords[o].langSys;if(t){var i={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-o,0,i),i.langSys}}},getFeatureTable:function(r,e,t,n){var o=this.getLangSysTable(r,e,n);if(o){for(var i,s=o.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l&lt;s.length;l++)if(i=a[s[l]],i.tag===t)return i.feature;if(n){var u=a.length;return Ir.assert(u===0||t&gt;=a[u-1].tag,"Features must be added in alphabetical order."),i={tag:t,feature:{params:0,lookupListIndexes:[]}},a.push(i),s.push(u),i.feature}}},getLookupTables:function(r,e,t,n,o){var i=this.getFeatureTable(r,e,t,o),s=[];if(i){for(var a,l=i.lookupListIndexes,u=this.font.tables[this.tableName].lookups,d=0;d&lt;l.length;d++)a=u[l[d]],a.lookupType===n&amp;&amp;s.push(a);if(s.length===0&amp;&amp;o){a={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var c=u.length;return u.push(a),l.push(c),[a]}}return s},getGlyphClass:function(r,e){switch(r.format){case 1:return r.startGlyph&lt;=e&amp;&amp;e&lt;r.startGlyph+r.classes.length?r.classes[e-r.startGlyph]:0;case 2:var t=JX(r.ranges,e);return t?t.classId:0}},getCoverageIndex:function(r,e){switch(r.format){case 1:var t=QX(r.glyphs,e);return t&gt;=0?t:-1;case 2:var n=JX(r.ranges,e);return n?n.index+e-n.start:-1}},expandCoverage:function(r){if(r.format===1)return r.glyphs;for(var e=[],t=r.ranges,n=0;n&lt;t.length;n++)for(var o=t[n],i=o.start,s=o.end,a=i;a&lt;=s;a++)e.push(a);return e}};function lD(r){aD.call(this,r,"gpos")}lD.prototype=aD.prototype;lD.prototype.init=function(){var r=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(r)};lD.prototype.getKerningValue=function(r,e,t){for(var n=0;n&lt;r.length;n++)for(var o=r[n].subtables,i=0;i&lt;o.length;i++){var s=o[i],a=this.getCoverageIndex(s.coverage,e);if(!(a&lt;0))switch(s.posFormat){case 1:for(var l=s.pairSets[a],u=0;u&lt;l.length;u++){var d=l[u];if(d.secondGlyph===t)return d.value1&amp;&amp;d.value1.xAdvance||0}break;case 2:var c=this.getGlyphClass(s.classDef1,e),p=this.getGlyphClass(s.classDef2,t),h=s.classRecords[c][p];return h.value1&amp;&amp;h.value1.xAdvance||0}}return 0};lD.prototype.getKerningTables=function(r,e){if(this.font.tables.gpos)return this.getLookupTables(r,e,"kern",2)};function mu(r){aD.call(this,r,"gsub")}function pCe(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n&lt;t;n++)if(r[n]!==e[n])return!1;return!0}function dz(r,e,t){for(var n=r.subtables,o=0;o&lt;n.length;o++){var i=n[o];if(i.substFormat===e)return i}if(t)return n.push(t),t}mu.prototype=aD.prototype;mu.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};mu.prototype.getSingle=function(r,e,t){for(var n=[],o=this.getLookupTables(e,t,r,1),i=0;i&lt;o.length;i++)for(var s=o[i].subtables,a=0;a&lt;s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),d=void 0;if(l.substFormat===1){var c=l.deltaGlyphId;for(d=0;d&lt;u.length;d++){var p=u[d];n.push({sub:p,by:p+c})}}else{var h=l.substitute;for(d=0;d&lt;u.length;d++)n.push({sub:u[d],by:h[d]})}}return n};mu.prototype.getMultiple=function(r,e,t){for(var n=[],o=this.getLookupTables(e,t,r,2),i=0;i&lt;o.length;i++)for(var s=o[i].subtables,a=0;a&lt;s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),d=void 0;for(d=0;d&lt;u.length;d++){var c=u[d],p=l.sequences[d];n.push({sub:c,by:p})}}return n};mu.prototype.getAlternates=function(r,e,t){for(var n=[],o=this.getLookupTables(e,t,r,3),i=0;i&lt;o.length;i++)for(var s=o[i].subtables,a=0;a&lt;s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),d=l.alternateSets,c=0;c&lt;u.length;c++)n.push({sub:u[c],by:d[c]});return n};mu.prototype.getLigatures=function(r,e,t){for(var n=[],o=this.getLookupTables(e,t,r,4),i=0;i&lt;o.length;i++)for(var s=o[i].subtables,a=0;a&lt;s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),d=l.ligatureSets,c=0;c&lt;u.length;c++)for(var p=u[c],h=d[c],f=0;f&lt;h.length;f++){var m=h[f];n.push({sub:[p].concat(m.components),by:m.ligGlyph})}return n};mu.prototype.addSingle=function(r,e,t,n){var o=this.getLookupTables(t,n,r,1,!0)[0],i=dz(o,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Ir.assert(i.coverage.format===1,"Single: unable to modify coverage table format "+i.coverage.format);var s=e.sub,a=this.binSearch(i.coverage.glyphs,s);a&lt;0&amp;&amp;(a=-1-a,i.coverage.glyphs.splice(a,0,s),i.substitute.splice(a,0,0)),i.substitute[a]=e.by};mu.prototype.addMultiple=function(r,e,t,n){Ir.assert(e.by instanceof Array&amp;&amp;e.by.length&gt;1,'Multiple: "by" must be an array of two or more ids');var o=this.getLookupTables(t,n,r,2,!0)[0],i=dz(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Ir.assert(i.coverage.format===1,"Multiple: unable to modify coverage table format "+i.coverage.format);var s=e.sub,a=this.binSearch(i.coverage.glyphs,s);a&lt;0&amp;&amp;(a=-1-a,i.coverage.glyphs.splice(a,0,s),i.sequences.splice(a,0,0)),i.sequences[a]=e.by};mu.prototype.addAlternate=function(r,e,t,n){var o=this.getLookupTables(t,n,r,3,!0)[0],i=dz(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Ir.assert(i.coverage.format===1,"Alternate: unable to modify coverage table format "+i.coverage.format);var s=e.sub,a=this.binSearch(i.coverage.glyphs,s);a&lt;0&amp;&amp;(a=-1-a,i.coverage.glyphs.splice(a,0,s),i.alternateSets.splice(a,0,0)),i.alternateSets[a]=e.by};mu.prototype.addLigature=function(r,e,t,n){var o=this.getLookupTables(t,n,r,4,!0)[0],i=o.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=i),Ir.assert(i.coverage.format===1,"Ligature: unable to modify coverage table format "+i.coverage.format);var s=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(i.coverage.glyphs,s);if(u&gt;=0){for(var d=i.ligatureSets[u],c=0;c&lt;d.length;c++)if(pCe(d[c].components,a))return;d.push(l)}else u=-1-u,i.coverage.glyphs.splice(u,0,s),i.ligatureSets.splice(u,0,[l])};mu.prototype.getFeature=function(r,e,t){if(/ss\d\d/.test(r))return this.getSingle(r,e,t);switch(r){case"aalt":case"salt":return this.getSingle(r,e,t).concat(this.getAlternates(r,e,t));case"dlig":case"liga":case"rlig":return this.getLigatures(r,e,t);case"ccmp":return this.getMultiple(r,e,t).concat(this.getLigatures(r,e,t));case"stch":return this.getMultiple(r,e,t)}};mu.prototype.add=function(r,e,t,n){if(/ss\d\d/.test(r))return this.addSingle(r,e,t,n);switch(r){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(r,e,t,n):this.addAlternate(r,e,t,n);case"dlig":case"liga":case"rlig":return this.addLigature(r,e,t,n);case"ccmp":return e.by instanceof Array?this.addMultiple(r,e,t,n):this.addLigature(r,e,t,n)}};function hCe(){return typeof window!="undefined"}function fCe(r){for(var e=new Buffer(r.byteLength),t=new Uint8Array(r),n=0;n&lt;e.length;++n)e[n]=t[n];return e}function tD(r,e){if(!r)throw e}function ZX(r,e,t,n,o){var i;return(e&amp;n)&gt;0?(i=r.parseByte(),(e&amp;o)===0&amp;&amp;(i=-i),i=t+i):(e&amp;o)&gt;0?i=t:i=t+r.parseShort(),i}function ZQ(r,e,t){var n=new $t.Parser(e,t);r.numberOfContours=n.parseShort(),r._xMin=n.parseShort(),r._yMin=n.parseShort(),r._xMax=n.parseShort(),r._yMax=n.parseShort();var o,i;if(r.numberOfContours&gt;0){for(var s=r.endPointIndices=[],a=0;a&lt;r.numberOfContours;a+=1)s.push(n.parseUShort());r.instructionLength=n.parseUShort(),r.instructions=[];for(var l=0;l&lt;r.instructionLength;l+=1)r.instructions.push(n.parseByte());var u=s[s.length-1]+1;o=[];for(var d=0;d&lt;u;d+=1)if(i=n.parseByte(),o.push(i),(i&amp;8)&gt;0)for(var c=n.parseByte(),p=0;p&lt;c;p+=1)o.push(i),d+=1;if(Ir.argument(o.length===u,"Bad flags."),s.length&gt;0){var h=[],f;if(u&gt;0){for(var m=0;m&lt;u;m+=1)i=o[m],f={},f.onCurve=!!(i&amp;1),f.lastPointOfContour=s.indexOf(m)&gt;=0,h.push(f);for(var g=0,v=0;v&lt;u;v+=1)i=o[v],f=h[v],f.x=ZX(n,i,g,2,16),g=f.x;for(var b=0,C=0;C&lt;u;C+=1)i=o[C],f=h[C],f.y=ZX(n,i,b,4,32),b=f.y}r.points=h}else r.points=[]}else if(r.numberOfContours===0)r.points=[];else{r.isComposite=!0,r.points=[],r.components=[];for(var x=!0;x;){o=n.parseUShort();var y={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(o&amp;1)&gt;0?(o&amp;2)&gt;0?(y.dx=n.parseShort(),y.dy=n.parseShort()):y.matchedPoints=[n.parseUShort(),n.parseUShort()]:(o&amp;2)&gt;0?(y.dx=n.parseChar(),y.dy=n.parseChar()):y.matchedPoints=[n.parseByte(),n.parseByte()],(o&amp;8)&gt;0?y.xScale=y.yScale=n.parseF2Dot14():(o&amp;64)&gt;0?(y.xScale=n.parseF2Dot14(),y.yScale=n.parseF2Dot14()):(o&amp;128)&gt;0&amp;&amp;(y.xScale=n.parseF2Dot14(),y.scale01=n.parseF2Dot14(),y.scale10=n.parseF2Dot14(),y.yScale=n.parseF2Dot14()),r.components.push(y),x=!!(o&amp;32)}if(o&amp;256){r.instructionLength=n.parseUShort(),r.instructions=[];for(var S=0;S&lt;r.instructionLength;S+=1)r.instructions.push(n.parseByte())}}}function GU(r,e){for(var t=[],n=0;n&lt;r.length;n+=1){var o=r[n],i={x:e.xScale*o.x+e.scale01*o.y+e.dx,y:e.scale10*o.x+e.yScale*o.y+e.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};t.push(i)}return t}function mCe(r){for(var e=[],t=[],n=0;n&lt;r.length;n+=1){var o=r[n];t.push(o),o.lastPointOfContour&amp;&amp;(e.push(t),t=[])}return Ir.argument(t.length===0,"There are still points left in the current contour."),e}function eJ(r){var e=new Ds;if(!r)return e;for(var t=mCe(r),n=0;n&lt;t.length;++n){var o=t[n],i=null,s=o[o.length-1],a=o[0];if(s.onCurve)e.moveTo(s.x,s.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u&lt;o.length;++u)if(i=s,s=a,a=o[(u+1)%o.length],s.onCurve)e.lineTo(s.x,s.y);else{var d=i,c=a;i.onCurve||(d={x:(s.x+i.x)*.5,y:(s.y+i.y)*.5}),a.onCurve||(c={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5}),e.quadraticCurveTo(s.x,s.y,c.x,c.y)}e.closePath()}return e}function tJ(r,e){if(e.isComposite)for(var t=0;t&lt;e.components.length;t+=1){var n=e.components[t],o=r.get(n.glyphIndex);if(o.getPath(),o.points){var i=void 0;if(n.matchedPoints===void 0)i=GU(o.points,n);else{if(n.matchedPoints[0]&gt;e.points.length-1||n.matchedPoints[1]&gt;o.points.length-1)throw Error("Matched points out of range in "+e.name);var s=e.points[n.matchedPoints[0]],a=o.points[n.matchedPoints[1]],l={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};a=GU([a],l)[0],l.dx=s.x-a.x,l.dy=s.y-a.y,i=GU(o.points,l)}e.points=e.points.concat(i)}}return eJ(e.points)}function gCe(r,e,t,n){for(var o=new Dp.GlyphSet(n),i=0;i&lt;t.length-1;i+=1){var s=t[i],a=t[i+1];s!==a?o.push(i,Dp.ttfGlyphLoader(n,i,ZQ,r,e+s,tJ)):o.push(i,Dp.glyphLoader(n,i))}return o}function vCe(r,e,t,n){var o=new Dp.GlyphSet(n);return n._push=function(i){var s=t[i],a=t[i+1];s!==a?o.push(i,Dp.ttfGlyphLoader(n,i,ZQ,r,e+s,tJ)):o.push(i,Dp.glyphLoader(n,i))},o}function bCe(r,e,t,n,o){return o.lowMemory?vCe(r,e,t,n):gCe(r,e,t,n)}var rJ={getPath:eJ,parse:bCe},nJ,qb,oJ,rz;function iJ(r){this.font=r,this.getCommands=function(e){return rJ.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function yCe(r){return r}function sJ(r){return Math.sign(r)*Math.round(Math.abs(r))}function CCe(r){return Math.sign(r)*Math.round(Math.abs(r*2))/2}function SCe(r){return Math.sign(r)*(Math.round(Math.abs(r)+.5)-.5)}function xCe(r){return Math.sign(r)*Math.ceil(Math.abs(r))}function wCe(r){return Math.sign(r)*Math.floor(Math.abs(r))}var aJ=function(r){var e=this.srPeriod,t=this.srPhase,n=this.srThreshold,o=1;return r&lt;0&amp;&amp;(r=-r,o=-1),r+=n-t,r=Math.trunc(r/e)*e,r+=t,r&lt;0?t*o:r*o},Tp={x:1,y:0,axis:"x",distance:function(r,e,t,n){return(t?r.xo:r.x)-(n?e.xo:e.x)},interpolate:function(r,e,t,n){var o,i,s,a,l,u,d;if(!n||n===this){if(o=r.xo-e.xo,i=r.xo-t.xo,l=e.x-e.xo,u=t.x-t.xo,s=Math.abs(o),a=Math.abs(i),d=s+a,d===0){r.x=r.xo+(l+u)/2;return}r.x=r.xo+(l*a+u*s)/d;return}if(o=n.distance(r,e,!0,!0),i=n.distance(r,t,!0,!0),l=n.distance(e,e,!1,!0),u=n.distance(t,t,!1,!0),s=Math.abs(o),a=Math.abs(i),d=s+a,d===0){Tp.setRelative(r,r,(l+u)/2,n,!0);return}Tp.setRelative(r,r,(l*a+u*s)/d,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(r,e,t,n,o){if(!n||n===this){r.x=(o?e.xo:e.x)+t;return}var i=o?e.xo:e.x,s=o?e.yo:e.y,a=i+t*n.x,l=s+t*n.y;r.x=a+(r.y-l)/n.normalSlope},slope:0,touch:function(r){r.xTouched=!0},touched:function(r){return r.xTouched},untouch:function(r){r.xTouched=!1}},hf={x:0,y:1,axis:"y",distance:function(r,e,t,n){return(t?r.yo:r.y)-(n?e.yo:e.y)},interpolate:function(r,e,t,n){var o,i,s,a,l,u,d;if(!n||n===this){if(o=r.yo-e.yo,i=r.yo-t.yo,l=e.y-e.yo,u=t.y-t.yo,s=Math.abs(o),a=Math.abs(i),d=s+a,d===0){r.y=r.yo+(l+u)/2;return}r.y=r.yo+(l*a+u*s)/d;return}if(o=n.distance(r,e,!0,!0),i=n.distance(r,t,!0,!0),l=n.distance(e,e,!1,!0),u=n.distance(t,t,!1,!0),s=Math.abs(o),a=Math.abs(i),d=s+a,d===0){hf.setRelative(r,r,(l+u)/2,n,!0);return}hf.setRelative(r,r,(l*a+u*s)/d,n,!0)},normalSlope:0,setRelative:function(r,e,t,n,o){if(!n||n===this){r.y=(o?e.yo:e.y)+t;return}var i=o?e.xo:e.x,s=o?e.yo:e.y,a=i+t*n.x,l=s+t*n.y;r.y=l+n.normalSlope*(r.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(r){r.yTouched=!0},touched:function(r){return r.yTouched},untouch:function(r){r.yTouched=!1}};Object.freeze(Tp);Object.freeze(hf);function uD(r,e){this.x=r,this.y=e,this.axis=void 0,this.slope=e/r,this.normalSlope=-r/e,Object.freeze(this)}uD.prototype.distance=function(r,e,t,n){return this.x*Tp.distance(r,e,t,n)+this.y*hf.distance(r,e,t,n)};uD.prototype.interpolate=function(r,e,t,n){var o,i,s,a,l,u,d;if(s=n.distance(r,e,!0,!0),a=n.distance(r,t,!0,!0),o=n.distance(e,e,!1,!0),i=n.distance(t,t,!1,!0),l=Math.abs(s),u=Math.abs(a),d=l+u,d===0){this.setRelative(r,r,(o+i)/2,n,!0);return}this.setRelative(r,r,(o*u+i*l)/d,n,!0)};uD.prototype.setRelative=function(r,e,t,n,o){n=n||this;var i=o?e.xo:e.x,s=o?e.yo:e.y,a=i+t*n.x,l=s+t*n.y,u=n.normalSlope,d=this.slope,c=r.x,p=r.y;r.x=(d*c-u*a+l-p)/(d-u),r.y=d*(r.x-c)+p};uD.prototype.touch=function(r){r.xTouched=!0,r.yTouched=!0};function dD(r,e){var t=Math.sqrt(r*r+e*e);return r/=t,e/=t,r===1&amp;&amp;e===0?Tp:r===0&amp;&amp;e===1?hf:new uD(r,e)}function ff(r,e,t,n){this.x=this.xo=Math.round(r*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=t,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}ff.prototype.nextTouched=function(r){for(var e=this.nextPointOnContour;!r.touched(e)&amp;&amp;e!==this;)e=e.nextPointOnContour;return e};ff.prototype.prevTouched=function(r){for(var e=this.prevPointOnContour;!r.touched(e)&amp;&amp;e!==this;)e=e.prevPointOnContour;return e};var sD=Object.freeze(new ff(0,0)),TCe={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Dg(r,e){switch(this.env=r,this.stack=[],this.prog=e,r){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Tp,this.round=sJ}}iJ.prototype.exec=function(r,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState&gt;2)){var t=this.font,n=this._prepState;if(!n||n.ppem!==e){var o=this._fpgmState;if(!o){Dg.prototype=TCe,o=this._fpgmState=new Dg("fpgm",t.tables.fpgm),o.funcs=[],o.font=t,exports.DEBUG&amp;&amp;(console.log("---EXEC FPGM---"),o.step=-1);try{qb(o)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}Dg.prototype=o,n=this._prepState=new Dg("prep",t.tables.prep),n.ppem=e;var i=t.tables.cvt;if(i)for(var s=n.cvt=new Array(i.length),a=e/t.unitsPerEm,l=0;l&lt;i.length;l++)s[l]=i[l]*a;else n.cvt=[];exports.DEBUG&amp;&amp;(console.log("---EXEC PREP---"),n.step=-1);try{qb(n)}catch(u){this._errorState&lt;2&amp;&amp;console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState&gt;1))try{return oJ(r,n)}catch(u){this._errorState&lt;1&amp;&amp;(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};oJ=function(r,e){var t=e.ppem/e.font.unitsPerEm,n=t,o=r.components,i,s,a;if(Dg.prototype=e,!o)a=new Dg("glyf",r.instructions),exports.DEBUG&amp;&amp;(console.log("---EXEC GLYPH---"),a.step=-1),rz(r,a,t,n),s=a.gZone;else{var l=e.font;s=[],i=[];for(var u=0;u&lt;o.length;u++){var d=o[u],c=l.glyphs.get(d.glyphIndex);a=new Dg("glyf",c.instructions),exports.DEBUG&amp;&amp;(console.log("---EXEC COMP "+u+"---"),a.step=-1),rz(c,a,t,n);for(var p=Math.round(d.dx*t),h=Math.round(d.dy*n),f=a.gZone,m=a.contours,g=0;g&lt;f.length;g++){var v=f[g];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+p,v.yo=v.y=v.y+h}var b=s.length;s.push.apply(s,f);for(var C=0;C&lt;m.length;C++)i.push(m[C]+b)}r.instructions&amp;&amp;!a.inhibitGridFit&amp;&amp;(a=new Dg("glyf",r.instructions),a.gZone=a.z0=a.z1=a.z2=s,a.contours=i,s.push(new ff(0,0),new ff(Math.round(r.advanceWidth*t),0)),exports.DEBUG&amp;&amp;(console.log("---EXEC COMPOSITE---"),a.step=-1),qb(a),s.length-=2)}return s};rz=function(r,e,t,n){for(var o=r.points||[],i=o.length,s=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u&lt;i;u++)l=o[u],s[u]=new ff(l.x*t,l.y*n,l.lastPointOfContour,l.onCurve);for(var d,c,p=0;p&lt;i;p++)l=s[p],d||(d=l,a.push(p)),l.lastPointOfContour?(l.nextPointOnContour=d,d.prevPointOnContour=l,d=void 0):(c=s[p+1],l.nextPointOnContour=c,c.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var h=0;h&lt;i;h++)console.log(h,s[h].x,s[h].y)}if(s.push(new ff(0,0),new ff(Math.round(r.advanceWidth*t),0)),qb(e),s.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var f=0;f&lt;i;f++)console.log(f,s[f].x,s[f].y)}}};qb=function(r){var e=r.prog;if(!!e){var t=e.length,n;for(r.ip=0;r.ip&lt;t;r.ip++){if(exports.DEBUG&amp;&amp;r.step++,n=nJ[e[r.ip]],!n)throw new Error("unknown instruction: 0x"+Number(e[r.ip]).toString(16));n(r)}}};function nF(r){for(var e=r.tZone=new Array(r.gZone.length),t=0;t&lt;e.length;t++)e[t]=new ff(0,0)}function lJ(r,e){var t=r.prog,n=r.ip,o=1,i;do if(i=t[++n],i===88)o++;else if(i===89)o--;else if(i===64)n+=t[n+1]+1;else if(i===65)n+=2*t[n+1]+1;else if(i&gt;=176&amp;&amp;i&lt;=183)n+=i-176+1;else if(i&gt;=184&amp;&amp;i&lt;=191)n+=(i-184+1)*2;else if(e&amp;&amp;o===1&amp;&amp;i===27)break;while(o&gt;0);r.ip=n}function eQ(r,e){exports.DEBUG&amp;&amp;console.log(e.step,"SVTCA["+r.axis+"]"),e.fv=e.pv=e.dpv=r}function tQ(r,e){exports.DEBUG&amp;&amp;console.log(e.step,"SPVTCA["+r.axis+"]"),e.pv=e.dpv=r}function rQ(r,e){exports.DEBUG&amp;&amp;console.log(e.step,"SFVTCA["+r.axis+"]"),e.fv=r}function nQ(r,e){var t=e.stack,n=t.pop(),o=t.pop(),i=e.z2[n],s=e.z1[o];exports.DEBUG&amp;&amp;console.log("SPVTL["+r+"]",n,o);var a,l;r?(a=i.y-s.y,l=s.x-i.x):(a=s.x-i.x,l=s.y-i.y),e.pv=e.dpv=dD(a,l)}function oQ(r,e){var t=e.stack,n=t.pop(),o=t.pop(),i=e.z2[n],s=e.z1[o];exports.DEBUG&amp;&amp;console.log("SFVTL["+r+"]",n,o);var a,l;r?(a=i.y-s.y,l=s.x-i.x):(a=s.x-i.x,l=s.y-i.y),e.fv=dD(a,l)}function DCe(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SPVFS[]",t,n),r.pv=r.dpv=dD(n,t)}function kCe(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SPVFS[]",t,n),r.fv=dD(n,t)}function PCe(r){var e=r.stack,t=r.pv;exports.DEBUG&amp;&amp;console.log(r.step,"GPV[]"),e.push(t.x*16384),e.push(t.y*16384)}function ACe(r){var e=r.stack,t=r.fv;exports.DEBUG&amp;&amp;console.log(r.step,"GFV[]"),e.push(t.x*16384),e.push(t.y*16384)}function ICe(r){r.fv=r.pv,exports.DEBUG&amp;&amp;console.log(r.step,"SFVTPV[]")}function ECe(r){var e=r.stack,t=e.pop(),n=e.pop(),o=e.pop(),i=e.pop(),s=e.pop(),a=r.z0,l=r.z1,u=a[t],d=a[n],c=l[o],p=l[i],h=r.z2[s];exports.DEBUG&amp;&amp;console.log("ISECT[], ",t,n,o,i,s);var f=u.x,m=u.y,g=d.x,v=d.y,b=c.x,C=c.y,x=p.x,y=p.y,S=(f-g)*(C-y)-(m-v)*(b-x),T=f*v-m*g,w=b*y-C*x;h.x=(T*(b-x)-w*(f-g))/S,h.y=(T*(C-y)-w*(m-v))/S}function _Ce(r){r.rp0=r.stack.pop(),exports.DEBUG&amp;&amp;console.log(r.step,"SRP0[]",r.rp0)}function FCe(r){r.rp1=r.stack.pop(),exports.DEBUG&amp;&amp;console.log(r.step,"SRP1[]",r.rp1)}function MCe(r){r.rp2=r.stack.pop(),exports.DEBUG&amp;&amp;console.log(r.step,"SRP2[]",r.rp2)}function NCe(r){var e=r.stack.pop();switch(exports.DEBUG&amp;&amp;console.log(r.step,"SZP0[]",e),r.zp0=e,e){case 0:r.tZone||nF(r),r.z0=r.tZone;break;case 1:r.z0=r.gZone;break;default:throw new Error("Invalid zone pointer")}}function BCe(r){var e=r.stack.pop();switch(exports.DEBUG&amp;&amp;console.log(r.step,"SZP1[]",e),r.zp1=e,e){case 0:r.tZone||nF(r),r.z1=r.tZone;break;case 1:r.z1=r.gZone;break;default:throw new Error("Invalid zone pointer")}}function RCe(r){var e=r.stack.pop();switch(exports.DEBUG&amp;&amp;console.log(r.step,"SZP2[]",e),r.zp2=e,e){case 0:r.tZone||nF(r),r.z2=r.tZone;break;case 1:r.z2=r.gZone;break;default:throw new Error("Invalid zone pointer")}}function LCe(r){var e=r.stack.pop();switch(exports.DEBUG&amp;&amp;console.log(r.step,"SZPS[]",e),r.zp0=r.zp1=r.zp2=e,e){case 0:r.tZone||nF(r),r.z0=r.z1=r.z2=r.tZone;break;case 1:r.z0=r.z1=r.z2=r.gZone;break;default:throw new Error("Invalid zone pointer")}}function OCe(r){r.loop=r.stack.pop(),exports.DEBUG&amp;&amp;console.log(r.step,"SLOOP[]",r.loop)}function UCe(r){exports.DEBUG&amp;&amp;console.log(r.step,"RTG[]"),r.round=sJ}function zCe(r){exports.DEBUG&amp;&amp;console.log(r.step,"RTHG[]"),r.round=SCe}function HCe(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SMD[]",e),r.minDis=e/64}function GCe(r){exports.DEBUG&amp;&amp;console.log(r.step,"ELSE[]"),lJ(r,!1)}function WCe(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"JMPR[]",e),r.ip+=e-1}function $Ce(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SCVTCI[]",e),r.cvCutIn=e/64}function VCe(r){var e=r.stack;exports.DEBUG&amp;&amp;console.log(r.step,"DUP[]"),e.push(e[e.length-1])}function WU(r){exports.DEBUG&amp;&amp;console.log(r.step,"POP[]"),r.stack.pop()}function jCe(r){exports.DEBUG&amp;&amp;console.log(r.step,"CLEAR[]"),r.stack.length=0}function KCe(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SWAP[]"),e.push(t),e.push(n)}function qCe(r){var e=r.stack;exports.DEBUG&amp;&amp;console.log(r.step,"DEPTH[]"),e.push(e.length)}function YCe(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"LOOPCALL[]",t,n);var o=r.ip,i=r.prog;r.prog=r.funcs[t];for(var s=0;s&lt;n;s++)qb(r),exports.DEBUG&amp;&amp;console.log(++r.step,s+1&lt;n?"next loopcall":"done loopcall",s);r.ip=o,r.prog=i}function XCe(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"CALL[]",e);var t=r.ip,n=r.prog;r.prog=r.funcs[e],qb(r),r.ip=t,r.prog=n,exports.DEBUG&amp;&amp;console.log(++r.step,"returning from",e)}function QCe(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"CINDEX[]",t),e.push(e[e.length-t])}function JCe(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"MINDEX[]",t),e.push(e.splice(e.length-t,1)[0])}function ZCe(r){if(r.env!=="fpgm")throw new Error("FDEF not allowed here");var e=r.stack,t=r.prog,n=r.ip,o=e.pop(),i=n;for(exports.DEBUG&amp;&amp;console.log(r.step,"FDEF[]",o);t[++n]!==45;);r.ip=n,r.funcs[o]=t.slice(i+1,n)}function iQ(r,e){var t=e.stack.pop(),n=e.z0[t],o=e.fv,i=e.pv;exports.DEBUG&amp;&amp;console.log(e.step,"MDAP["+r+"]",t);var s=i.distance(n,sD);r&amp;&amp;(s=e.round(s)),o.setRelative(n,sD,s,i),o.touch(n),e.rp0=e.rp1=t}function sQ(r,e){var t=e.z2,n=t.length-2,o,i,s;exports.DEBUG&amp;&amp;console.log(e.step,"IUP["+r.axis+"]");for(var a=0;a&lt;n;a++)o=t[a],!r.touched(o)&amp;&amp;(i=o.prevTouched(r),i!==o&amp;&amp;(s=o.nextTouched(r),i===s&amp;&amp;r.setRelative(o,o,r.distance(i,i,!1,!0),r,!0),r.interpolate(o,i,s,r)))}function aQ(r,e){for(var t=e.stack,n=r?e.rp1:e.rp2,o=(r?e.z0:e.z1)[n],i=e.fv,s=e.pv,a=e.loop,l=e.z2;a--;){var u=t.pop(),d=l[u],c=s.distance(o,o,!1,!0);i.setRelative(d,d,c,s),i.touch(d),exports.DEBUG&amp;&amp;console.log(e.step,(e.loop&gt;1?"loop "+(e.loop-a)+": ":"")+"SHP["+(r?"rp1":"rp2")+"]",u)}e.loop=1}function lQ(r,e){var t=e.stack,n=r?e.rp1:e.rp2,o=(r?e.z0:e.z1)[n],i=e.fv,s=e.pv,a=t.pop(),l=e.z2[e.contours[a]],u=l;exports.DEBUG&amp;&amp;console.log(e.step,"SHC["+r+"]",a);var d=s.distance(o,o,!1,!0);do u!==o&amp;&amp;i.setRelative(u,u,d,s),u=u.nextPointOnContour;while(u!==l)}function uQ(r,e){var t=e.stack,n=r?e.rp1:e.rp2,o=(r?e.z0:e.z1)[n],i=e.fv,s=e.pv,a=t.pop();exports.DEBUG&amp;&amp;console.log(e.step,"SHZ["+r+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,d=s.distance(o,o,!1,!0),c=l.length-2,p=0;p&lt;c;p++)u=l[p],i.setRelative(u,u,d,s)}function e0e(r){for(var e=r.stack,t=r.loop,n=r.fv,o=e.pop()/64,i=r.z2;t--;){var s=e.pop(),a=i[s];exports.DEBUG&amp;&amp;console.log(r.step,(r.loop&gt;1?"loop "+(r.loop-t)+": ":"")+"SHPIX[]",s,o),n.setRelative(a,a,o),n.touch(a)}r.loop=1}function t0e(r){for(var e=r.stack,t=r.rp1,n=r.rp2,o=r.loop,i=r.z0[t],s=r.z1[n],a=r.fv,l=r.dpv,u=r.z2;o--;){var d=e.pop(),c=u[d];exports.DEBUG&amp;&amp;console.log(r.step,(r.loop&gt;1?"loop "+(r.loop-o)+": ":"")+"IP[]",d,t,"&lt;-&gt;",n),a.interpolate(c,i,s,l),a.touch(c)}r.loop=1}function dQ(r,e){var t=e.stack,n=t.pop()/64,o=t.pop(),i=e.z1[o],s=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(i,s,n,l),a.touch(i),exports.DEBUG&amp;&amp;console.log(e.step,"MSIRP["+r+"]",n,o),e.rp1=e.rp0,e.rp2=o,r&amp;&amp;(e.rp0=o)}function r0e(r){for(var e=r.stack,t=r.rp0,n=r.z0[t],o=r.loop,i=r.fv,s=r.pv,a=r.z1;o--;){var l=e.pop(),u=a[l];exports.DEBUG&amp;&amp;console.log(r.step,(r.loop&gt;1?"loop "+(r.loop-o)+": ":"")+"ALIGNRP[]",l),i.setRelative(u,n,0,s),i.touch(u)}r.loop=1}function n0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"RTDG[]"),r.round=CCe}function cQ(r,e){var t=e.stack,n=t.pop(),o=t.pop(),i=e.z0[o],s=e.fv,a=e.pv,l=e.cvt[n];exports.DEBUG&amp;&amp;console.log(e.step,"MIAP["+r+"]",n,"(",l,")",o);var u=a.distance(i,sD);r&amp;&amp;(Math.abs(u-l)&lt;e.cvCutIn&amp;&amp;(u=l),u=e.round(u)),s.setRelative(i,sD,u,a),e.zp0===0&amp;&amp;(i.xo=i.x,i.yo=i.y),s.touch(i),e.rp0=e.rp1=o}function o0e(r){var e=r.prog,t=r.ip,n=r.stack,o=e[++t];exports.DEBUG&amp;&amp;console.log(r.step,"NPUSHB[]",o);for(var i=0;i&lt;o;i++)n.push(e[++t]);r.ip=t}function i0e(r){var e=r.ip,t=r.prog,n=r.stack,o=t[++e];exports.DEBUG&amp;&amp;console.log(r.step,"NPUSHW[]",o);for(var i=0;i&lt;o;i++){var s=t[++e]&lt;&lt;8|t[++e];s&amp;32768&amp;&amp;(s=-((s^65535)+1)),n.push(s)}r.ip=e}function s0e(r){var e=r.stack,t=r.store;t||(t=r.store=[]);var n=e.pop(),o=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"WS",n,o),t[o]=n}function a0e(r){var e=r.stack,t=r.store,n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"RS",n);var o=t&amp;&amp;t[n]||0;e.push(o)}function l0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"WCVTP",t,n),r.cvt[n]=t/64}function u0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"RCVT",t),e.push(r.cvt[t]*64)}function pQ(r,e){var t=e.stack,n=t.pop(),o=e.z2[n];exports.DEBUG&amp;&amp;console.log(e.step,"GC["+r+"]",n),t.push(e.dpv.distance(o,sD,r,!1)*64)}function hQ(r,e){var t=e.stack,n=t.pop(),o=t.pop(),i=e.z1[n],s=e.z0[o],a=e.dpv.distance(s,i,r,r);exports.DEBUG&amp;&amp;console.log(e.step,"MD["+r+"]",n,o,"-&gt;",a),e.stack.push(Math.round(a*64))}function d0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"MPPEM[]"),r.stack.push(r.ppem)}function c0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"FLIPON[]"),r.autoFlip=!0}function p0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"LT[]",t,n),e.push(n&lt;t?1:0)}function h0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"LTEQ[]",t,n),e.push(n&lt;=t?1:0)}function f0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"GT[]",t,n),e.push(n&gt;t?1:0)}function m0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"GTEQ[]",t,n),e.push(n&gt;=t?1:0)}function g0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"EQ[]",t,n),e.push(t===n?1:0)}function v0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"NEQ[]",t,n),e.push(t!==n?1:0)}function b0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"ODD[]",t),e.push(Math.trunc(t)%2?1:0)}function y0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"EVEN[]",t),e.push(Math.trunc(t)%2?0:1)}function C0e(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"IF[]",e),e||(lJ(r,!0),exports.DEBUG&amp;&amp;console.log(r.step,"EIF[]"))}function S0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"EIF[]")}function x0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"AND[]",t,n),e.push(t&amp;&amp;n?1:0)}function w0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"OR[]",t,n),e.push(t||n?1:0)}function T0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"NOT[]",t),e.push(t?0:1)}function $U(r,e){var t=e.stack,n=t.pop(),o=e.fv,i=e.pv,s=e.ppem,a=e.deltaBase+(r-1)*16,l=e.deltaShift,u=e.z0;exports.DEBUG&amp;&amp;console.log(e.step,"DELTAP["+r+"]",n,t);for(var d=0;d&lt;n;d++){var c=t.pop(),p=t.pop(),h=a+((p&amp;240)&gt;&gt;4);if(h===s){var f=(p&amp;15)-8;f&gt;=0&amp;&amp;f++,exports.DEBUG&amp;&amp;console.log(e.step,"DELTAPFIX",c,"by",f*l);var m=u[c];o.setRelative(m,m,f*l,i)}}}function D0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SDB[]",t),r.deltaBase=t}function k0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SDS[]",t),r.deltaShift=Math.pow(.5,t)}function P0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"ADD[]",t,n),e.push(n+t)}function A0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SUB[]",t,n),e.push(n-t)}function I0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"DIV[]",t,n),e.push(n*64/t)}function E0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"MUL[]",t,n),e.push(n*t/64)}function _0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"ABS[]",t),e.push(Math.abs(t))}function F0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"NEG[]",t),e.push(-t)}function M0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"FLOOR[]",t),e.push(Math.floor(t/64)*64)}function N0e(r){var e=r.stack,t=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"CEILING[]",t),e.push(Math.ceil(t/64)*64)}function q_(r,e){var t=e.stack,n=t.pop();exports.DEBUG&amp;&amp;console.log(e.step,"ROUND[]"),t.push(e.round(n/64)*64)}function B0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"WCVTF[]",t,n),r.cvt[n]=t*r.ppem/r.font.unitsPerEm}function VU(r,e){var t=e.stack,n=t.pop(),o=e.ppem,i=e.deltaBase+(r-1)*16,s=e.deltaShift;exports.DEBUG&amp;&amp;console.log(e.step,"DELTAC["+r+"]",n,t);for(var a=0;a&lt;n;a++){var l=t.pop(),u=t.pop(),d=i+((u&amp;240)&gt;&gt;4);if(d===o){var c=(u&amp;15)-8;c&gt;=0&amp;&amp;c++;var p=c*s;exports.DEBUG&amp;&amp;console.log(e.step,"DELTACFIX",l,"by",p),e.cvt[l]+=p}}}function R0e(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SROUND[]",e),r.round=aJ;var t;switch(e&amp;192){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(r.srPeriod=t,e&amp;48){case 0:r.srPhase=0;break;case 16:r.srPhase=.25*t;break;case 32:r.srPhase=.5*t;break;case 48:r.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e&amp;=15,e===0?r.srThreshold=0:r.srThreshold=(e/8-.5)*t}function L0e(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"S45ROUND[]",e),r.round=aJ;var t;switch(e&amp;192){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(r.srPeriod=t,e&amp;48){case 0:r.srPhase=0;break;case 16:r.srPhase=.25*t;break;case 32:r.srPhase=.5*t;break;case 48:r.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e&amp;=15,e===0?r.srThreshold=0:r.srThreshold=(e/8-.5)*t}function O0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"ROFF[]"),r.round=yCe}function U0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"RUTG[]"),r.round=xCe}function z0e(r){exports.DEBUG&amp;&amp;console.log(r.step,"RDTG[]"),r.round=wCe}function H0e(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SCANCTRL[]",e)}function fQ(r,e){var t=e.stack,n=t.pop(),o=t.pop(),i=e.z2[n],s=e.z1[o];exports.DEBUG&amp;&amp;console.log(e.step,"SDPVTL["+r+"]",n,o);var a,l;r?(a=i.y-s.y,l=s.x-i.x):(a=s.x-i.x,l=s.y-i.y),e.dpv=dD(a,l)}function G0e(r){var e=r.stack,t=e.pop(),n=0;exports.DEBUG&amp;&amp;console.log(r.step,"GETINFO[]",t),t&amp;1&amp;&amp;(n=35),t&amp;32&amp;&amp;(n|=4096),e.push(n)}function W0e(r){var e=r.stack,t=e.pop(),n=e.pop(),o=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"ROLL[]"),e.push(n),e.push(t),e.push(o)}function $0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"MAX[]",t,n),e.push(Math.max(n,t))}function V0e(r){var e=r.stack,t=e.pop(),n=e.pop();exports.DEBUG&amp;&amp;console.log(r.step,"MIN[]",t,n),e.push(Math.min(n,t))}function j0e(r){var e=r.stack.pop();exports.DEBUG&amp;&amp;console.log(r.step,"SCANTYPE[]",e)}function K0e(r){var e=r.stack.pop(),t=r.stack.pop();switch(exports.DEBUG&amp;&amp;console.log(r.step,"INSTCTRL[]",e,t),e){case 1:r.inhibitGridFit=!!t;return;case 2:r.ignoreCvt=!!t;return;default:throw new Error("invalid INSTCTRL[] selector")}}function xg(r,e){var t=e.stack,n=e.prog,o=e.ip;exports.DEBUG&amp;&amp;console.log(e.step,"PUSHB["+r+"]");for(var i=0;i&lt;r;i++)t.push(n[++o]);e.ip=o}function wg(r,e){var t=e.ip,n=e.prog,o=e.stack;exports.DEBUG&amp;&amp;console.log(e.ip,"PUSHW["+r+"]");for(var i=0;i&lt;r;i++){var s=n[++t]&lt;&lt;8|n[++t];s&amp;32768&amp;&amp;(s=-((s^65535)+1)),o.push(s)}e.ip=t}function Wt(r,e,t,n,o,i){var s=i.stack,a=r&amp;&amp;s.pop(),l=s.pop(),u=i.rp0,d=i.z0[u],c=i.z1[l],p=i.minDis,h=i.fv,f=i.dpv,m,g,v,b;g=m=f.distance(c,d,!0,!0),v=g&gt;=0?1:-1,g=Math.abs(g),r&amp;&amp;(b=i.cvt[a],n&amp;&amp;Math.abs(g-b)&lt;i.cvCutIn&amp;&amp;(g=b)),t&amp;&amp;g&lt;p&amp;&amp;(g=p),n&amp;&amp;(g=i.round(g)),h.setRelative(c,d,v*g,f),h.touch(c),exports.DEBUG&amp;&amp;console.log(i.step,(r?"MIRP[":"MDRP[")+(e?"M":"m")+(t?"&gt;":"_")+(n?"R":"_")+(o===0?"Gr":o===1?"Bl":o===2?"Wh":"")+"]",r?a+"("+i.cvt[a]+","+b+")":"",l,"(d =",m,"-&gt;",v*g,")"),i.rp1=i.rp0,i.rp2=l,e&amp;&amp;(i.rp0=l)}nJ=[eQ.bind(void 0,hf),eQ.bind(void 0,Tp),tQ.bind(void 0,hf),tQ.bind(void 0,Tp),rQ.bind(void 0,hf),rQ.bind(void 0,Tp),nQ.bind(void 0,0),nQ.bind(void 0,1),oQ.bind(void 0,0),oQ.bind(void 0,1),DCe,kCe,PCe,ACe,ICe,ECe,_Ce,FCe,MCe,NCe,BCe,RCe,LCe,OCe,UCe,zCe,HCe,GCe,WCe,$Ce,void 0,void 0,VCe,WU,jCe,KCe,qCe,QCe,JCe,void 0,void 0,void 0,YCe,XCe,ZCe,void 0,iQ.bind(void 0,0),iQ.bind(void 0,1),sQ.bind(void 0,hf),sQ.bind(void 0,Tp),aQ.bind(void 0,0),aQ.bind(void 0,1),lQ.bind(void 0,0),lQ.bind(void 0,1),uQ.bind(void 0,0),uQ.bind(void 0,1),e0e,t0e,dQ.bind(void 0,0),dQ.bind(void 0,1),r0e,n0e,cQ.bind(void 0,0),cQ.bind(void 0,1),o0e,i0e,s0e,a0e,l0e,u0e,pQ.bind(void 0,0),pQ.bind(void 0,1),void 0,hQ.bind(void 0,0),hQ.bind(void 0,1),d0e,void 0,c0e,void 0,void 0,p0e,h0e,f0e,m0e,g0e,v0e,b0e,y0e,C0e,S0e,x0e,w0e,T0e,$U.bind(void 0,1),D0e,k0e,P0e,A0e,I0e,E0e,_0e,F0e,M0e,N0e,q_.bind(void 0,0),q_.bind(void 0,1),q_.bind(void 0,2),q_.bind(void 0,3),void 0,void 0,void 0,void 0,B0e,$U.bind(void 0,2),$U.bind(void 0,3),VU.bind(void 0,1),VU.bind(void 0,2),VU.bind(void 0,3),R0e,L0e,void 0,void 0,O0e,void 0,U0e,z0e,WU,WU,void 0,void 0,void 0,void 0,void 0,H0e,fQ.bind(void 0,0),fQ.bind(void 0,1),G0e,void 0,W0e,$0e,V0e,j0e,K0e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,xg.bind(void 0,1),xg.bind(void 0,2),xg.bind(void 0,3),xg.bind(void 0,4),xg.bind(void 0,5),xg.bind(void 0,6),xg.bind(void 0,7),xg.bind(void 0,8),wg.bind(void 0,1),wg.bind(void 0,2),wg.bind(void 0,3),wg.bind(void 0,4),wg.bind(void 0,5),wg.bind(void 0,6),wg.bind(void 0,7),wg.bind(void 0,8),Wt.bind(void 0,0,0,0,0,0),Wt.bind(void 0,0,0,0,0,1),Wt.bind(void 0,0,0,0,0,2),Wt.bind(void 0,0,0,0,0,3),Wt.bind(void 0,0,0,0,1,0),Wt.bind(void 0,0,0,0,1,1),Wt.bind(void 0,0,0,0,1,2),Wt.bind(void 0,0,0,0,1,3),Wt.bind(void 0,0,0,1,0,0),Wt.bind(void 0,0,0,1,0,1),Wt.bind(void 0,0,0,1,0,2),Wt.bind(void 0,0,0,1,0,3),Wt.bind(void 0,0,0,1,1,0),Wt.bind(void 0,0,0,1,1,1),Wt.bind(void 0,0,0,1,1,2),Wt.bind(void 0,0,0,1,1,3),Wt.bind(void 0,0,1,0,0,0),Wt.bind(void 0,0,1,0,0,1),Wt.bind(void 0,0,1,0,0,2),Wt.bind(void 0,0,1,0,0,3),Wt.bind(void 0,0,1,0,1,0),Wt.bind(void 0,0,1,0,1,1),Wt.bind(void 0,0,1,0,1,2),Wt.bind(void 0,0,1,0,1,3),Wt.bind(void 0,0,1,1,0,0),Wt.bind(void 0,0,1,1,0,1),Wt.bind(void 0,0,1,1,0,2),Wt.bind(void 0,0,1,1,0,3),Wt.bind(void 0,0,1,1,1,0),Wt.bind(void 0,0,1,1,1,1),Wt.bind(void 0,0,1,1,1,2),Wt.bind(void 0,0,1,1,1,3),Wt.bind(void 0,1,0,0,0,0),Wt.bind(void 0,1,0,0,0,1),Wt.bind(void 0,1,0,0,0,2),Wt.bind(void 0,1,0,0,0,3),Wt.bind(void 0,1,0,0,1,0),Wt.bind(void 0,1,0,0,1,1),Wt.bind(void 0,1,0,0,1,2),Wt.bind(void 0,1,0,0,1,3),Wt.bind(void 0,1,0,1,0,0),Wt.bind(void 0,1,0,1,0,1),Wt.bind(void 0,1,0,1,0,2),Wt.bind(void 0,1,0,1,0,3),Wt.bind(void 0,1,0,1,1,0),Wt.bind(void 0,1,0,1,1,1),Wt.bind(void 0,1,0,1,1,2),Wt.bind(void 0,1,0,1,1,3),Wt.bind(void 0,1,1,0,0,0),Wt.bind(void 0,1,1,0,0,1),Wt.bind(void 0,1,1,0,0,2),Wt.bind(void 0,1,1,0,0,3),Wt.bind(void 0,1,1,0,1,0),Wt.bind(void 0,1,1,0,1,1),Wt.bind(void 0,1,1,0,1,2),Wt.bind(void 0,1,1,0,1,3),Wt.bind(void 0,1,1,1,0,0),Wt.bind(void 0,1,1,1,0,1),Wt.bind(void 0,1,1,1,0,2),Wt.bind(void 0,1,1,1,0,3),Wt.bind(void 0,1,1,1,1,0),Wt.bind(void 0,1,1,1,1,1),Wt.bind(void 0,1,1,1,1,2),Wt.bind(void 0,1,1,1,1,3)];function IS(r){this.char=r,this.state={},this.activeState=null}function cz(r,e,t){this.contextName=t,this.startIndex=r,this.endOffset=e}function q0e(r,e,t){this.contextName=r,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=t}function fc(r,e){this.context=r,this.index=e,this.length=r.length,this.current=r[e],this.backtrack=r.slice(0,e),this.lookahead=r.slice(e+1)}function oF(r){this.eventId=r,this.subscribers=[]}function Y0e(r){var e=this,t=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];t.forEach(function(o){Object.defineProperty(e.events,o,{value:new oF(o)})}),r&amp;&amp;t.forEach(function(o){var i=r[o];typeof i=="function"&amp;&amp;e.events[o].subscribe(i)});var n=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];n.forEach(function(o){e.events[o].subscribe(e.updateContextsRanges)})}function Ti(r){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Y0e.call(this,r)}IS.prototype.setState=function(r,e){return this.state[r]=e,this.activeState={key:r,value:this.state[r]},this.activeState};IS.prototype.getState=function(r){return this.state[r]||null};Ti.prototype.inboundIndex=function(r){return r&gt;=0&amp;&amp;r&lt;this.tokens.length};Ti.prototype.composeRUD=function(r){var e=this,t=!0,n=r.map(function(i){return e[i[0]].apply(e,i.slice(1).concat(t))}),o=function(i){return typeof i=="object"&amp;&amp;i.hasOwnProperty("FAIL")};if(n.every(o))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:n.filter(o)};this.dispatch("composeRUD",[n.filter(function(i){return!o(i)})])};Ti.prototype.replaceRange=function(r,e,t,n){e=e!==null?e:this.tokens.length;var o=t.every(function(s){return s instanceof IS});if(!isNaN(r)&amp;&amp;this.inboundIndex(r)&amp;&amp;o){var i=this.tokens.splice.apply(this.tokens,[r,e].concat(t));return n||this.dispatch("replaceToken",[r,e,t]),[i,t]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Ti.prototype.replaceToken=function(r,e,t){if(!isNaN(r)&amp;&amp;this.inboundIndex(r)&amp;&amp;e instanceof IS){var n=this.tokens.splice(r,1,e);return t||this.dispatch("replaceToken",[r,e]),[n[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Ti.prototype.removeRange=function(r,e,t){e=isNaN(e)?this.tokens.length:e;var n=this.tokens.splice(r,e);return t||this.dispatch("removeRange",[n,r,e]),n};Ti.prototype.removeToken=function(r,e){if(!isNaN(r)&amp;&amp;this.inboundIndex(r)){var t=this.tokens.splice(r,1);return e||this.dispatch("removeToken",[t,r]),t}else return{FAIL:"removeToken: invalid token index."}};Ti.prototype.insertToken=function(r,e,t){var n=r.every(function(o){return o instanceof IS});return n?(this.tokens.splice.apply(this.tokens,[e,0].concat(r)),t||this.dispatch("insertToken",[r,e]),r):{FAIL:"insertToken: invalid token(s)."}};Ti.prototype.registerModifier=function(r,e,t){this.events.newToken.subscribe(function(n,o){var i=[n,o],s=e===null||e.apply(this,i)===!0,a=[n,o];if(s){var l=t.apply(this,a);n.setState(r,l)}}),this.registeredModifiers.push(r)};oF.prototype.subscribe=function(r){return typeof r=="function"?this.subscribers.push(r)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};oF.prototype.unsubscribe=function(r){this.subscribers.splice(r,1)};fc.prototype.setCurrentIndex=function(r){this.index=r,this.current=this.context[r],this.backtrack=this.context.slice(0,r),this.lookahead=this.context.slice(r+1)};fc.prototype.get=function(r){switch(!0){case r===0:return this.current;case(r&lt;0&amp;&amp;Math.abs(r)&lt;=this.backtrack.length):return this.backtrack.slice(r)[0];case(r&gt;0&amp;&amp;r&lt;=this.lookahead.length):return this.lookahead[r-1];default:return null}};Ti.prototype.rangeToText=function(r){if(r instanceof cz)return this.getRangeTokens(r).map(function(e){return e.char}).join("")};Ti.prototype.getText=function(){return this.tokens.map(function(r){return r.char}).join("")};Ti.prototype.getContext=function(r){var e=this.registeredContexts[r];return e||null};Ti.prototype.on=function(r,e){var t=this.events[r];return t?t.subscribe(e):null};Ti.prototype.dispatch=function(r,e){var t=this,n=this.events[r];n instanceof oF&amp;&amp;n.subscribers.forEach(function(o){o.apply(t,e||[])})};Ti.prototype.registerContextChecker=function(r,e,t){if(this.getContext(r))return{FAIL:"context name '"+r+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof t!="function")return{FAIL:"missing context end check."};var n=new q0e(r,e,t);return this.registeredContexts[r]=n,this.contextCheckers.push(n),n};Ti.prototype.getRangeTokens=function(r){var e=r.startIndex+r.endOffset;return[].concat(this.tokens.slice(r.startIndex,e))};Ti.prototype.getContextRanges=function(r){var e=this.getContext(r);return e?e.ranges:{FAIL:"context checker '"+r+"' is not registered."}};Ti.prototype.resetContextsRanges=function(){var r=this.registeredContexts;for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];t.ranges=[]}};Ti.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var r=this.tokens.map(function(n){return n.char}),e=0;e&lt;r.length;e++){var t=new fc(r,e);this.runContextCheck(t)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Ti.prototype.setEndOffset=function(r,e){var t=this.getContext(e).openRange.startIndex,n=new cz(t,r,e),o=this.getContext(e).ranges;return n.rangeId=e+"."+o.length,o.push(n),this.getContext(e).openRange=null,n};Ti.prototype.runContextCheck=function(r){var e=this,t=r.index;this.contextCheckers.forEach(function(n){var o=n.contextName,i=e.getContext(o).openRange;if(!i&amp;&amp;n.checkStart(r)&amp;&amp;(i=new cz(t,null,o),e.getContext(o).openRange=i,e.dispatch("contextStart",[o,t])),!!i&amp;&amp;n.checkEnd(r)){var s=t-i.startIndex+1,a=e.setEndOffset(s,o);e.dispatch("contextEnd",[o,a])}})};Ti.prototype.tokenize=function(r){this.tokens=[],this.resetContextsRanges();var e=Array.from(r);this.dispatch("start");for(var t=0;t&lt;e.length;t++){var n=e[t],o=new fc(e,t);this.dispatch("next",[o]),this.runContextCheck(o);var i=new IS(n);this.tokens.push(i),this.dispatch("newToken",[i,o])}return this.dispatch("end",[this.tokens]),this.tokens};function kg(r){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(r)}function uJ(r){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(r)}function Pg(r){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(r)}function X_(r){return/[A-z]/.test(r)}function X0e(r){return/\s/.test(r)}function gu(r){this.font=r,this.features={}}function Kb(r){this.id=r.id,this.tag=r.tag,this.substitution=r.substitution}function cD(r,e){if(!r)return-1;switch(e.format){case 1:return e.glyphs.indexOf(r);case 2:for(var t=e.ranges,n=0;n&lt;t.length;n++){var o=t[n];if(r&gt;=o.start&amp;&amp;r&lt;=o.end){var i=r-o.start;return o.index+i}}break;default:return-1}return-1}function Q0e(r,e){var t=cD(r,e.coverage);return t===-1?null:r+e.deltaGlyphId}function J0e(r,e){var t=cD(r,e.coverage);return t===-1?null:e.substitute[t]}function jU(r,e){for(var t=[],n=0;n&lt;r.length;n++){var o=r[n],i=e.current;i=Array.isArray(i)?i[0]:i;var s=cD(i,o);s!==-1&amp;&amp;t.push(s)}return t.length!==r.length?-1:t}function Z0e(r,e){var t=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(r.context.length&lt;t)return[];var n=jU(e.inputCoverage,r);if(n===-1)return[];var o=e.inputCoverage.length-1;if(r.lookahead.length&lt;e.lookaheadCoverage.length)return[];for(var i=r.lookahead.slice(o);i.length&amp;&amp;Pg(i[0].char);)i.shift();var s=new fc(i,0),a=jU(e.lookaheadCoverage,s),l=[].concat(r.backtrack);for(l.reverse();l.length&amp;&amp;Pg(l[0].char);)l.shift();if(l.length&lt;e.backtrackCoverage.length)return[];var u=new fc(l,0),d=jU(e.backtrackCoverage,u),c=n.length===e.inputCoverage.length&amp;&amp;a.length===e.lookaheadCoverage.length&amp;&amp;d.length===e.backtrackCoverage.length,p=[];if(c)for(var h=0;h&lt;e.lookupRecords.length;h++)for(var f=e.lookupRecords[h],m=f.lookupListIndex,g=this.getLookupByIndex(m),v=0;v&lt;g.subtables.length;v++){var b=g.subtables[v],C=this.getLookupMethod(g,b),x=this.getSubstitutionType(g,b);if(x==="12")for(var y=0;y&lt;n.length;y++){var S=r.get(y),T=C(S);T&amp;&amp;p.push(T)}}return p}function eSe(r,e){var t=r.current,n=cD(t,e.coverage);if(n===-1)return null;for(var o,i=e.ligatureSets[n],s=0;s&lt;i.length;s++){o=i[s];for(var a=0;a&lt;o.components.length;a++){var l=r.lookahead[a],u=o.components[a];if(l!==u)break;if(a===o.components.length-1)return o}}return null}function tSe(r,e){var t=cD(r,e.coverage);return t===-1?null:e.sequences[t]}gu.prototype.getDefaultScriptFeaturesIndexes=function(){for(var r=this.font.tables.gsub.scripts,e=0;e&lt;r.length;e++){var t=r[e];if(t.tag==="DFLT")return t.script.defaultLangSys.featureIndexes}return[]};gu.prototype.getScriptFeaturesIndexes=function(r){var e=this.font.tables;if(!e.gsub)return[];if(!r)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,n=0;n&lt;t.length;n++){var o=t[n];if(o.tag===r&amp;&amp;o.script.defaultLangSys)return o.script.defaultLangSys.featureIndexes;var i=o.langSysRecords;if(i)for(var s=0;s&lt;i.length;s++){var a=i[s];if(a.tag===r){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};gu.prototype.mapTagsToFeatures=function(r,e){for(var t={},n=0;n&lt;r.length;n++){var o=r[n].tag,i=r[n].feature;t[o]=i}this.features[e].tags=t};gu.prototype.getScriptFeatures=function(r){var e=this.features[r];if(this.features.hasOwnProperty(r))return e;var t=this.getScriptFeaturesIndexes(r);if(!t)return null;var n=this.font.tables.gsub;return e=t.map(function(o){return n.features[o]}),this.features[r]=e,this.mapTagsToFeatures(e,r),e};gu.prototype.getSubstitutionType=function(r,e){var t=r.lookupType.toString(),n=e.substFormat.toString();return t+n};gu.prototype.getLookupMethod=function(r,e){var t=this,n=this.getSubstitutionType(r,e);switch(n){case"11":return function(o){return Q0e.apply(t,[o,e])};case"12":return function(o){return J0e.apply(t,[o,e])};case"63":return function(o){return Z0e.apply(t,[o,e])};case"41":return function(o){return eSe.apply(t,[o,e])};case"21":return function(o){return tSe.apply(t,[o,e])};default:throw new Error("lookupType: "+r.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};gu.prototype.lookupFeature=function(r){var e=r.contextParams,t=e.index,n=this.getFeature({tag:r.tag,script:r.script});if(!n)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+r.tag+"' for script '"+r.script+"'.");for(var o=this.getFeatureLookups(n),i=[].concat(e.context),s=0;s&lt;o.length;s++)for(var a=o[s],l=this.getLookupSubtables(a),u=0;u&lt;l.length;u++){var d=l[u],c=this.getSubstitutionType(a,d),p=this.getLookupMethod(a,d),h=void 0;switch(c){case"11":h=p(e.current),h&amp;&amp;i.splice(t,1,new Kb({id:11,tag:r.tag,substitution:h}));break;case"12":h=p(e.current),h&amp;&amp;i.splice(t,1,new Kb({id:12,tag:r.tag,substitution:h}));break;case"63":h=p(e),Array.isArray(h)&amp;&amp;h.length&amp;&amp;i.splice(t,1,new Kb({id:63,tag:r.tag,substitution:h}));break;case"41":h=p(e),h&amp;&amp;i.splice(t,1,new Kb({id:41,tag:r.tag,substitution:h}));break;case"21":h=p(e.current),h&amp;&amp;i.splice(t,1,new Kb({id:21,tag:r.tag,substitution:h}));break}e=new fc(i,t),!(Array.isArray(h)&amp;&amp;!h.length)&amp;&amp;(h=null)}return i.length?i:null};gu.prototype.supports=function(r){if(!r.script)return!1;this.getScriptFeatures(r.script);var e=this.features.hasOwnProperty(r.script);if(!r.tag)return e;var t=this.features[r.script].some(function(n){return n.tag===r.tag});return e&amp;&amp;t};gu.prototype.getLookupSubtables=function(r){return r.subtables||null};gu.prototype.getLookupByIndex=function(r){var e=this.font.tables.gsub.lookups;return e[r]||null};gu.prototype.getFeatureLookups=function(r){return r.lookupListIndexes.map(this.getLookupByIndex.bind(this))};gu.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function rSe(r){var e=r.current,t=r.get(-1);return t===null&amp;&amp;kg(e)||!kg(t)&amp;&amp;kg(e)}function nSe(r){var e=r.get(1);return e===null||!kg(e)}var oSe={startCheck:rSe,endCheck:nSe};function iSe(r){var e=r.current,t=r.get(-1);return(kg(e)||Pg(e))&amp;&amp;!kg(t)}function sSe(r){var e=r.get(1);switch(!0){case e===null:return!0;case(!kg(e)&amp;&amp;!Pg(e)):var t=X0e(e);if(!t)return!0;if(t){var n=!1;if(n=r.lookahead.some(function(o){return kg(o)||Pg(o)}),!n)return!0}break;default:return!1}}var aSe={startCheck:iSe,endCheck:sSe};function lSe(r,e,t){e[t].setState(r.tag,r.substitution)}function uSe(r,e,t){e[t].setState(r.tag,r.substitution)}function dSe(r,e,t){r.substitution.forEach(function(n,o){var i=e[t+o];i.setState(r.tag,n)})}function cSe(r,e,t){var n=e[t];n.setState(r.tag,r.substitution.ligGlyph);for(var o=r.substitution.components.length,i=0;i&lt;o;i++)n=e[t+i+1],n.setState("deleted",!0)}var mQ={11:lSe,12:uSe,63:dSe,41:cSe};function pz(r,e,t){r instanceof Kb&amp;&amp;mQ[r.id]&amp;&amp;mQ[r.id](r,e,t)}function pSe(r){for(var e=[].concat(r.backtrack),t=e.length-1;t&gt;=0;t--){var n=e[t],o=uJ(n),i=Pg(n);if(!o&amp;&amp;!i)return!0;if(o)return!1}return!1}function hSe(r){if(uJ(r.current))return!1;for(var e=0;e&lt;r.lookahead.length;e++){var t=r.lookahead[e],n=Pg(t);if(!n)return!0}return!1}function fSe(r){var e=this,t="arab",n=this.featuresTags[t],o=this.tokenizer.getRangeTokens(r);if(o.length!==1){var i=new fc(o.map(function(a){return a.getState("glyphIndex")}),0),s=new fc(o.map(function(a){return a.char}),0);o.forEach(function(a,l){if(!Pg(a.char)){i.setCurrentIndex(l),s.setCurrentIndex(l);var u=0;pSe(s)&amp;&amp;(u|=1),hSe(s)&amp;&amp;(u|=2);var d;switch(u){case 1:d="fina";break;case 2:d="init";break;case 3:d="medi";break}if(n.indexOf(d)!==-1){var c=e.query.lookupFeature({tag:d,script:t,contextParams:i});if(c instanceof Error)return console.info(c.message);c.forEach(function(p,h){p instanceof Kb&amp;&amp;(pz(p,o,h),i.context[h]=p.substitution)})}}})}}function gQ(r,e){var t=r.map(function(n){return n.activeState.value});return new fc(t,e||0)}function mSe(r){var e=this,t="arab",n=this.tokenizer.getRangeTokens(r),o=gQ(n);o.context.forEach(function(i,s){o.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"rlig",script:t,contextParams:o});a.length&amp;&amp;(a.forEach(function(l){return pz(l,n,s)}),o=gQ(n))})}function gSe(r){var e=r.current,t=r.get(-1);return t===null&amp;&amp;X_(e)||!X_(t)&amp;&amp;X_(e)}function vSe(r){var e=r.get(1);return e===null||!X_(e)}var bSe={startCheck:gSe,endCheck:vSe};function vQ(r,e){var t=r.map(function(n){return n.activeState.value});return new fc(t,e||0)}function ySe(r){var e=this,t="latn",n=this.tokenizer.getRangeTokens(r),o=vQ(n);o.context.forEach(function(i,s){o.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"liga",script:t,contextParams:o});a.length&amp;&amp;(a.forEach(function(l){return pz(l,n,s)}),o=vQ(n))})}function vc(r){this.baseDir=r||"ltr",this.tokenizer=new Ti,this.featuresTags={}}vc.prototype.setText=function(r){this.text=r};vc.prototype.contextChecks={latinWordCheck:bSe,arabicWordCheck:oSe,arabicSentenceCheck:aSe};function KU(r){var e=this.contextChecks[r+"Check"];return this.tokenizer.registerContextChecker(r,e.startCheck,e.endCheck)}function CSe(){return KU.call(this,"latinWord"),KU.call(this,"arabicWord"),KU.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function SSe(){var r=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(t){var n=r.tokenizer.getRangeTokens(t);r.tokenizer.replaceRange(t.startIndex,t.endOffset,n.reverse())})}vc.prototype.registerFeatures=function(r,e){var t=this,n=e.filter(function(o){return t.query.supports({script:r,tag:o})});this.featuresTags.hasOwnProperty(r)?this.featuresTags[r]=this.featuresTags[r].concat(n):this.featuresTags[r]=n};vc.prototype.applyFeatures=function(r,e){if(!r)throw new Error("No valid font was provided to apply features");this.query||(this.query=new gu(r));for(var t=0;t&lt;e.length;t++){var n=e[t];!this.query.supports({script:n.script})||this.registerFeatures(n.script,n.tags)}};vc.prototype.registerModifier=function(r,e,t){this.tokenizer.registerModifier(r,e,t)};function hz(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function xSe(){var r=this,e="arab";if(!!this.featuresTags.hasOwnProperty(e)){hz.call(this);var t=this.tokenizer.getContextRanges("arabicWord");t.forEach(function(n){fSe.call(r,n)})}}function wSe(){var r=this,e="arab";if(!!this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("rlig")!==-1){hz.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(o){mSe.call(r,o)})}}}function TSe(){var r=this,e="latn";if(!!this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("liga")!==-1){hz.call(this);var n=this.tokenizer.getContextRanges("latinWord");n.forEach(function(o){ySe.call(r,o)})}}}vc.prototype.checkContextReady=function(r){return!!this.tokenizer.getContext(r)};vc.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&amp;&amp;(xSe.call(this),wSe.call(this)),this.checkContextReady("latinWord")&amp;&amp;TSe.call(this),this.checkContextReady("arabicSentence")&amp;&amp;SSe.call(this)};vc.prototype.processText=function(r){(!this.text||this.text!==r)&amp;&amp;(this.setText(r),CSe.call(this),this.applyFeaturesToContexts())};vc.prototype.getBidiText=function(r){return this.processText(r),this.tokenizer.getText()};vc.prototype.getTextGlyphs=function(r){this.processText(r);for(var e=[],t=0;t&lt;this.tokenizer.tokens.length;t++){var n=this.tokenizer.tokens[t];if(!n.state.deleted){var o=n.activeState.value;e.push(Array.isArray(o)?o[0]:o)}}return e};function _o(r){r=r||{},r.tables=r.tables||{},r.empty||(tD(r.familyName,"When creating a new Font object, familyName is required."),tD(r.styleName,"When creating a new Font object, styleName is required."),tD(r.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),tD(r.ascender,"When creating a new Font object, ascender is required."),tD(r.descender&lt;=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:r.familyName||" "},fontSubfamily:{en:r.styleName||" "},fullName:{en:r.fullName||r.familyName+" "+r.styleName},postScriptName:{en:r.postScriptName||(r.familyName+r.styleName).replace(/\s/g,"")},designer:{en:r.designer||" "},designerURL:{en:r.designerURL||" "},manufacturer:{en:r.manufacturer||" "},manufacturerURL:{en:r.manufacturerURL||" "},license:{en:r.license||" "},licenseURL:{en:r.licenseURL||" "},version:{en:r.version||"Version 0.1"},description:{en:r.description||" "},copyright:{en:r.copyright||" "},trademark:{en:r.trademark||" "}},this.unitsPerEm=r.unitsPerEm||1e3,this.ascender=r.ascender,this.descender=r.descender,this.createdTimestamp=r.createdTimestamp,this.tables=Object.assign(r.tables,{os2:Object.assign({usWeightClass:r.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:r.widthClass||this.usWidthClasses.MEDIUM,fsSelection:r.fsSelection||this.fsSelectionValues.REGULAR},r.tables.os2)})),this.supported=!0,this.glyphs=new Dp.GlyphSet(this,r.glyphs||[]),this.encoding=new AQ(this),this.position=new lD(this),this.substitution=new mu(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new iJ(this)}})}_o.prototype.hasChar=function(r){return this.encoding.charToGlyphIndex(r)!==null};_o.prototype.charToGlyphIndex=function(r){return this.encoding.charToGlyphIndex(r)};_o.prototype.charToGlyph=function(r){var e=this.charToGlyphIndex(r),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};_o.prototype.updateFeatures=function(r){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(t){return r[t]})}:e})};_o.prototype.stringToGlyphs=function(r,e){var t=this,n=new vc,o=function(c){return t.charToGlyphIndex(c.char)};n.registerModifier("glyphIndex",null,o);var i=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;n.applyFeatures(this,i);for(var s=n.getTextGlyphs(r),a=s.length,l=new Array(a),u=this.glyphs.get(0),d=0;d&lt;a;d+=1)l[d]=this.glyphs.get(s[d])||u;return l};_o.prototype.nameToGlyphIndex=function(r){return this.glyphNames.nameToGlyphIndex(r)};_o.prototype.nameToGlyph=function(r){var e=this.nameToGlyphIndex(r),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};_o.prototype.glyphIndexToName=function(r){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(r):""};_o.prototype.getKerningValue=function(r,e){r=r.index||r,e=e.index||e;var t=this.position.defaultKerningTables;return t?this.position.getKerningValue(t,r,e):this.kerningPairs[r+","+e]||0};_o.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};_o.prototype.forEachGlyph=function(r,e,t,n,o,i){e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:72,o=Object.assign({},this.defaultRenderOptions,o);var s=1/this.unitsPerEm*n,a=this.stringToGlyphs(r,o),l;if(o.kerning){var u=o.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,o.language)}for(var d=0;d&lt;a.length;d+=1){var c=a[d];if(i.call(this,c,e,t,n,o),c.advanceWidth&amp;&amp;(e+=c.advanceWidth*s),o.kerning&amp;&amp;d&lt;a.length-1){var p=l?this.position.getKerningValue(l,c.index,a[d+1].index):this.getKerningValue(c,a[d+1]);e+=p*s}o.letterSpacing?e+=o.letterSpacing*n:o.tracking&amp;&amp;(e+=o.tracking/1e3*n)}return e};_o.prototype.getPath=function(r,e,t,n,o){var i=new Ds;return this.forEachGlyph(r,e,t,n,o,function(s,a,l,u){var d=s.getPath(a,l,u,o,this);i.extend(d)}),i};_o.prototype.getPaths=function(r,e,t,n,o){var i=[];return this.forEachGlyph(r,e,t,n,o,function(s,a,l,u){var d=s.getPath(a,l,u,o,this);i.push(d)}),i};_o.prototype.getAdvanceWidth=function(r,e,t){return this.forEachGlyph(r,0,0,e,t,function(){})};_o.prototype.draw=function(r,e,t,n,o,i){this.getPath(e,t,n,o,i).draw(r)};_o.prototype.drawPoints=function(r,e,t,n,o,i){this.forEachGlyph(e,t,n,o,i,function(s,a,l,u){s.drawPoints(r,a,l,u)})};_o.prototype.drawMetrics=function(r,e,t,n,o,i){this.forEachGlyph(e,t,n,o,i,function(s,a,l,u){s.drawMetrics(r,a,l,u)})};_o.prototype.getEnglishName=function(r){var e=this.names[r];if(e)return e.en};_o.prototype.validate=function(){var r=this;function e(n,o){}function t(n){var o=r.getEnglishName(n);o&amp;&amp;o.trim().length&gt;0}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm&gt;0};_o.prototype.toTables=function(){return cCe.fontToTable(this)};_o.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};_o.prototype.toArrayBuffer=function(){for(var r=this.toTables(),e=r.encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),o=0;o&lt;e.length;o++)n[o]=e[o];return t};_o.prototype.download=function(r){var e=this.getEnglishName("fontFamily"),t=this.getEnglishName("fontSubfamily");r=r||e.replace(/\s/g,"")+"-"+t+".otf";var n=this.toArrayBuffer();if(hCe())if(window.URL=window.URL||window.webkitURL,window.URL){var o=new DataView(n),i=new Blob([o],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.download=r;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),s.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=ta("fs"),u=fCe(n);l.writeFileSync(r,u)}};_o.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};_o.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};_o.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function dJ(r,e){var t=JSON.stringify(r),n=256;for(var o in e){var i=parseInt(o);if(!(!i||i&lt;256)){if(JSON.stringify(e[o])===t)return i;n&lt;=i&amp;&amp;(n=i+1)}}return e[n]=r,n}function DSe(r,e,t){var n=dJ(e.name,t);return[{name:"tag_"+r,type:"TAG",value:e.tag},{name:"minValue_"+r,type:"FIXED",value:e.minValue&lt;&lt;16},{name:"defaultValue_"+r,type:"FIXED",value:e.defaultValue&lt;&lt;16},{name:"maxValue_"+r,type:"FIXED",value:e.maxValue&lt;&lt;16},{name:"flags_"+r,type:"USHORT",value:0},{name:"nameID_"+r,type:"USHORT",value:n}]}function kSe(r,e,t){var n={},o=new $t.Parser(r,e);return n.tag=o.parseTag(),n.minValue=o.parseFixed(),n.defaultValue=o.parseFixed(),n.maxValue=o.parseFixed(),o.skip("uShort",1),n.name=t[o.parseUShort()]||{},n}function PSe(r,e,t,n){for(var o=dJ(e.name,n),i=[{name:"nameID_"+r,type:"USHORT",value:o},{name:"flags_"+r,type:"USHORT",value:0}],s=0;s&lt;t.length;++s){var a=t[s].tag;i.push({name:"axis_"+r+" "+a,type:"FIXED",value:e.coordinates[a]&lt;&lt;16})}return i}function ASe(r,e,t,n){var o={},i=new $t.Parser(r,e);o.name=n[i.parseUShort()]||{},i.skip("uShort",1),o.coordinates={};for(var s=0;s&lt;t.length;++s)o.coordinates[t[s].tag]=i.parseFixed();return o}function ISe(r,e){var t=new Bt.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:r.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:r.instances.length},{name:"instanceSize",type:"USHORT",value:4+r.axes.length*4}]);t.offsetToData=t.sizeOf();for(var n=0;n&lt;r.axes.length;n++)t.fields=t.fields.concat(DSe(n,r.axes[n],e));for(var o=0;o&lt;r.instances.length;o++)t.fields=t.fields.concat(PSe(o,r.instances[o],r.axes,e));return t}function ESe(r,e,t){var n=new $t.Parser(r,e),o=n.parseULong();Ir.argument(o===65536,"Unsupported fvar table version.");var i=n.parseOffset16();n.skip("uShort",1);for(var s=n.parseUShort(),a=n.parseUShort(),l=n.parseUShort(),u=n.parseUShort(),d=[],c=0;c&lt;s;c++)d.push(kSe(r,e+i+c*a,t));for(var p=[],h=e+i+s*a,f=0;f&lt;l;f++)p.push(ASe(r,h+f*u,d,t));return{axes:d,instances:p}}var _Se={make:ISe,parse:ESe},FSe=function(){return{coverage:this.parsePointer(Ue.coverage),attachPoints:this.parseList(Ue.pointer(Ue.uShortList))}},MSe=function(){var r=this.parseUShort();if(Ir.argument(r===1||r===2||r===3,"Unsupported CaretValue table version."),r===1)return{coordinate:this.parseShort()};if(r===2)return{pointindex:this.parseShort()};if(r===3)return{coordinate:this.parseShort()}},NSe=function(){return this.parseList(Ue.pointer(MSe))},BSe=function(){return{coverage:this.parsePointer(Ue.coverage),ligGlyphs:this.parseList(Ue.pointer(NSe))}},RSe=function(){return this.parseUShort(),this.parseList(Ue.pointer(Ue.coverage))};function LSe(r,e){e=e||0;var t=new Ue(r,e),n=t.parseVersion(1);Ir.argument(n===1||n===1.2||n===1.3,"Unsupported GDEF table version.");var o={version:n,classDef:t.parsePointer(Ue.classDef),attachList:t.parsePointer(FSe),ligCaretList:t.parsePointer(BSe),markAttachClassDef:t.parsePointer(Ue.classDef)};return n&gt;=1.2&amp;&amp;(o.markGlyphSets=t.parsePointer(RSe)),o}var OSe={parse:LSe},mc=new Array(10);mc[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{posFormat:1,coverage:this.parsePointer(Ue.coverage),value:this.parseValueRecord()};if(t===2)return{posFormat:2,coverage:this.parsePointer(Ue.coverage),values:this.parseValueRecordList()};Ir.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};mc[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();Ir.assert(t===1||t===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(Ue.coverage),o=this.parseUShort(),i=this.parseUShort();if(t===1)return{posFormat:t,coverage:n,valueFormat1:o,valueFormat2:i,pairSets:this.parseList(Ue.pointer(Ue.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(o),value2:this.parseValueRecord(i)}})))};if(t===2){var s=this.parsePointer(Ue.classDef),a=this.parsePointer(Ue.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:o,valueFormat2:i,classDef1:s,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,Ue.list(u,function(){return{value1:this.parseValueRecord(o),value2:this.parseValueRecord(i)}}))}}};mc[3]=function(){return{error:"GPOS Lookup 3 not supported"}};mc[4]=function(){return{error:"GPOS Lookup 4 not supported"}};mc[5]=function(){return{error:"GPOS Lookup 5 not supported"}};mc[6]=function(){return{error:"GPOS Lookup 6 not supported"}};mc[7]=function(){return{error:"GPOS Lookup 7 not supported"}};mc[8]=function(){return{error:"GPOS Lookup 8 not supported"}};mc[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function USe(r,e){e=e||0;var t=new Ue(r,e),n=t.parseVersion(1);return Ir.argument(n===1||n===1.1,"Unsupported GPOS table version "+n),n===1?{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(mc)}:{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(mc),variations:t.parseFeatureVariationsList()}}var zSe=new Array(10);function HSe(r){return new Bt.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Bt.ScriptList(r.scripts)},{name:"features",type:"TABLE",value:new Bt.FeatureList(r.features)},{name:"lookups",type:"TABLE",value:new Bt.LookupList(r.lookups,zSe)}])}var GSe={parse:USe,make:HSe};function WSe(r){var e={};r.skip("uShort");var t=r.parseUShort();Ir.argument(t===0,"Unsupported kern sub-table version."),r.skip("uShort",2);var n=r.parseUShort();r.skip("uShort",3);for(var o=0;o&lt;n;o+=1){var i=r.parseUShort(),s=r.parseUShort(),a=r.parseShort();e[i+","+s]=a}return e}function $Se(r){var e={};r.skip("uShort");var t=r.parseULong();t&gt;1&amp;&amp;console.warn("Only the first kern subtable is supported."),r.skip("uLong");var n=r.parseUShort(),o=n&amp;255;if(r.skip("uShort"),o===0){var i=r.parseUShort();r.skip("uShort",3);for(var s=0;s&lt;i;s+=1){var a=r.parseUShort(),l=r.parseUShort(),u=r.parseShort();e[a+","+l]=u}}return e}function VSe(r,e){var t=new $t.Parser(r,e),n=t.parseUShort();if(n===0)return WSe(t);if(n===1)return $Se(t);throw new Error("Unsupported kern table version ("+n+").")}var jSe={parse:VSe};function KSe(r,e,t,n){for(var o=new $t.Parser(r,e),i=n?o.parseUShort:o.parseULong,s=[],a=0;a&lt;t+1;a+=1){var l=i.call(o);n&amp;&amp;(l*=2),s.push(l)}return s}var qSe={parse:KSe};function bQ(r,e){for(var t=[],n=12,o=0;o&lt;e;o+=1){var i=$t.getTag(r,n),s=$t.getULong(r,n+4),a=$t.getULong(r,n+8),l=$t.getULong(r,n+12);t.push({tag:i,checksum:s,offset:a,length:l,compression:!1}),n+=16}return t}function YSe(r,e){for(var t=[],n=44,o=0;o&lt;e;o+=1){var i=$t.getTag(r,n),s=$t.getULong(r,n+4),a=$t.getULong(r,n+8),l=$t.getULong(r,n+12),u=void 0;a&lt;l?u="WOFF":u=!1,t.push({tag:i,offset:s,compression:u,compressedLength:a,length:l}),n+=20}return t}function Vi(r,e){if(e.compression==="WOFF"){var t=new Uint8Array(r.buffer,e.offset+2,e.compressedLength-2),n=new Uint8Array(e.length);if(Gbe(t,n),n.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");var o=new DataView(n.buffer,0);return{data:o,offset:0}}else return{data:r,offset:e.offset}}function cJ(r,e){e=e==null?{}:e;var t,n,o=new _o({empty:!0}),i=new DataView(r,0),s,a=[],l=$t.getTag(i,0);if(l===String.fromCharCode(0,1,0,0)||l==="true"||l==="typ1")o.outlinesFormat="truetype",s=$t.getUShort(i,4),a=bQ(i,s);else if(l==="OTTO")o.outlinesFormat="cff",s=$t.getUShort(i,4),a=bQ(i,s);else if(l==="wOFF"){var u=$t.getTag(i,4);if(u===String.fromCharCode(0,1,0,0))o.outlinesFormat="truetype";else if(u==="OTTO")o.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+l);s=$t.getUShort(i,12),a=YSe(i,s)}else throw new Error("Unsupported OpenType signature "+l);for(var d,c,p,h,f,m,g,v,b,C,x,y,S=0;S&lt;s;S+=1){var T=a[S],w=void 0;switch(T.tag){case"cmap":w=Vi(i,T),o.tables.cmap=PQ.parse(w.data,w.offset),o.encoding=new IQ(o.tables.cmap);break;case"cvt ":w=Vi(i,T),y=new $t.Parser(w.data,w.offset),o.tables.cvt=y.parseShortList(T.length/2);break;case"fvar":c=T;break;case"fpgm":w=Vi(i,T),y=new $t.Parser(w.data,w.offset),o.tables.fpgm=y.parseByteList(T.length);break;case"head":w=Vi(i,T),o.tables.head=UQ.parse(w.data,w.offset),o.unitsPerEm=o.tables.head.unitsPerEm,t=o.tables.head.indexToLocFormat;break;case"hhea":w=Vi(i,T),o.tables.hhea=zQ.parse(w.data,w.offset),o.ascender=o.tables.hhea.ascender,o.descender=o.tables.hhea.descender,o.numberOfHMetrics=o.tables.hhea.numberOfHMetrics;break;case"hmtx":g=T;break;case"ltag":w=Vi(i,T),n=GQ.parse(w.data,w.offset);break;case"maxp":w=Vi(i,T),o.tables.maxp=WQ.parse(w.data,w.offset),o.numGlyphs=o.tables.maxp.numGlyphs;break;case"name":C=T;break;case"OS/2":w=Vi(i,T),o.tables.os2=tz.parse(w.data,w.offset);break;case"post":w=Vi(i,T),o.tables.post=YQ.parse(w.data,w.offset),o.glyphNames=new az(o.tables.post);break;case"prep":w=Vi(i,T),y=new $t.Parser(w.data,w.offset),o.tables.prep=y.parseByteList(T.length);break;case"glyf":p=T;break;case"loca":b=T;break;case"CFF ":d=T;break;case"kern":v=T;break;case"GDEF":h=T;break;case"GPOS":f=T;break;case"GSUB":m=T;break;case"meta":x=T;break}}var k=Vi(i,C);if(o.tables.name=qQ.parse(k.data,k.offset,n),o.names=o.tables.name,p&amp;&amp;b){var A=t===0,I=Vi(i,b),E=qSe.parse(I.data,I.offset,o.numGlyphs,A),O=Vi(i,p);o.glyphs=rJ.parse(O.data,O.offset,E,o,e)}else if(d){var Q=Vi(i,d);OQ.parse(Q.data,Q.offset,o,e)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var j=Vi(i,g);if(HQ.parse(o,j.data,j.offset,o.numberOfHMetrics,o.numGlyphs,o.glyphs,e),uye(o,e),v){var U=Vi(i,v);o.kerningPairs=jSe.parse(U.data,U.offset)}else o.kerningPairs={};if(h){var B=Vi(i,h);o.tables.gdef=OSe.parse(B.data,B.offset)}if(f){var z=Vi(i,f);o.tables.gpos=GSe.parse(z.data,z.offset),o.position.init()}if(m){var N=Vi(i,m);o.tables.gsub=XQ.parse(N.data,N.offset)}if(c){var V=Vi(i,c);o.tables.fvar=_Se.parse(V.data,V.offset,o.names)}if(x){var re=Vi(i,x);o.tables.meta=QQ.parse(re.data,re.offset),o.metas=o.tables.meta}return o}var pD=class{constructor({font:e,vertGsubMap:t,fontSize:n=1}){this.font=e,this.vertGsubMap=t,this.fontSize=n}get ascender(){return this.font.ascender/this.font.unitsPerEm*this.fontSize}get descender(){return this.font.descender/this.font.unitsPerEm*this.fontSize}get family(){return this.font.names.postScriptName.en}withSize(e){let{font:t,vertGsubMap:n}=this;return new pD({font:t,vertGsubMap:n,fontSize:e})}advanceWidth(e){if(e.advanceWidth!==void 0)return e.advanceWidth/this.font.unitsPerEm*this.fontSize}measureTextWidth(e){return this.font.getAdvanceWidth(e,this.fontSize)}},QSe={scriptTag:"kana"},JSe={scriptTag:"hani",languageTag:"ZHT "},ZSe={scriptTag:"hani",languageTag:"ZHS "};function fz(r){switch(r){case"zh-Hans":return ZSe;case"zh-Hant":return JSe;default:return QSe}}function pJ(r,e){let t={},n=cJ(r),o=n.tables.gsub;if(o){let i=sxe(o,e);for(let s of i){let a=o.lookups[s];for(let l of a.subtables)for(let{from:u,to:d}of ixe(l))t[u]=d}}return new pD({font:n,vertGsubMap:t,fontSize:1})}function*exe(r){for(let e of r)yield e}function*txe(r){for(let e of r)for(let t=e.start;t&lt;=e.end;t++)yield t}function*rxe(r,e){for(let t of r)yield{from:t,to:t+e}}function*nxe(r,e){for(let t of e){let n=r.next().value;if(typeof n=="number")yield{from:n,to:t};else break}}function oxe(r){let{coverage:e}=r,t=e.format;if(t===1){let{glyphs:n}=e;return n?exe(n):void 0}else if(t===2){let{ranges:n}=e;return n?txe(n):void 0}}function ixe(r){let{substFormat:e}=r,t=oxe(r);if(!t)return[].values();if(e===1){let{deltaGlyphId:n}=r;return typeof n!="number"?[].values():rxe(t,n)}else if(e===2){let{substitute:n}=r;return n?nxe(t,n):[].values()}else return[].values()}function sxe(r,e){var h,f,m;let{scriptTag:t,languageTag:n}=e,o=new Set,{scripts:i,features:s}=r;if(!i||!s)return o;let a=i.find(g=&gt;(g==null?void 0:g.tag)==="DFLT"),l=(f=(h=i.find(g=&gt;(g==null?void 0:g.tag)===t))==null?void 0:h.script)!=null?f:a==null?void 0:a.script;if(!l)return o;let{defaultLangSys:u,langSysRecords:d}=l,c=(m=d==null?void 0:d.find(g=&gt;(g==null?void 0:g.tag)===n))!=null?m:u;if(!c)return o;let{featureIndexes:p}=c;if(!p)return o;for(let g of p){let v=s[g];if(!v)continue;let{tag:b,feature:C}=v;if(b==="vert"&amp;&amp;!!C.lookupListIndexes)for(let x of C.lookupListIndexes)o.add(x)}return o}var bc=oe(mz());function Ig(){var e;let r=(e=bc.default.os)==null?void 0:e.family;return r?r.includes("iOS")||r.includes("OS X")&amp;&amp;window.ontouchstart!==void 0||r.includes("Android"):!1}function fD(){var r,e;return!!((e=(r=bc.default.os)==null?void 0:r.family)!=null&amp;&amp;e.includes("Android"))}function sF(){var r,e;return!!((e=(r=bc.default.os)==null?void 0:r.family)!=null&amp;&amp;e.includes("iOS"))}function mf(){var r;return!!((r=bc.default.name)!=null&amp;&amp;r.match("Safari"))}function hJ(){var r;return!!((r=bc.default.name)!=null&amp;&amp;r.match("Microsoft Edge"))}function aF(){let r="";return bc.default.os&amp;&amp;bc.default.os.family&amp;&amp;(r=bc.default.os.family),r==="OS X"}function lF(){return bc.default.name==="Chrome"||bc.default.name==="Microsoft Edge"}var gz=class{constructor(e,t,n,o){this.maxRetryCount=t;this.retryDelay=n;this.fetchCount=-1;this.waiters=new TS;let i=o!=null?o:gz.defaultFetcher;this.statefulFetcher=new Us(i(e),n)}get(){var e;return(e=this.statefulFetcher.get())==null?void 0:e.value}async getOrFetch(){let e=this.statefulFetcher.get();return e?e.value:this.fetchWithRetry()}async fetchWithRetry(){let e=await this.statefulFetcher.fetch();if(e.type==="success")return this.waiters.resolve(e.value),e.value;if(e.type==="cancelled")return this.waiters.wait();if(++this.fetchCount&lt;this.maxRetryCount)return await Sp(this.retryDelay),await this.fetchWithRetry();throw new ep}},mD=gz;mD.defaultFetcher=lxe;function axe(r){let e=ie.res.src(`/font/${r}.otf`);return mf()||sF()?e+"?q=1":e}function lxe(r){return async()=&gt;{let{fontName:e,scriptSelector:t}=r(),n=axe(e),i=[(await fetch(n,{mode:"cors"})).arrayBuffer().then(a=&gt;pJ(a,t))];typeof window!="undefined"&amp;&amp;i.push(document.fonts.load(`40px '${e}'`));let[s]=await Promise.all(i);return s}}var Ot=class{static async init(){await Promise.all([this.pinIcon.fetch(),this.regularFont.getOrFetch(),this.boldFont.getOrFetch(),this.webCardThumbnailPlaceholder.fetch(),this.mapCardPlaceholder.fetch(),this.webCardPlaceholder.fetch(),this.quizCardSurveyPlaceholder.fetch(),this.quizCardTestPlaceholder.fetch(),this.atndCardPlaceholder.fetch(),this.fullScreenIcon.fetch(),this.brokenCardIcon.fetch(),this.penPointer.fetch(),this.fingerPointerIcon.fetch()])}};Ot.pinIcon=fJ(()=&gt;ie.res.src("/svg/pinned_icon.svg")),Ot.regularFont=mJ(()=&gt;{let{locale:e,strings:t}=he.get();return{fontName:t.regularWtFontName,scriptSelector:fz(e)}}),Ot.boldFont=mJ(()=&gt;{let{locale:e,strings:t}=he.get();return{fontName:t.boldWtFontName,scriptSelector:fz(e)}}),Ot.webCardThumbnailPlaceholder=kp(()=&gt;ie.res.src("/svg/web_card_thumbnail_placeholder.svg")),Ot.qrCodeWorkerScript=new Us(vz("/js/client/camera/qr-code-worker.js")),Ot.zlibWorkerScript=new Us(vz("/js/client/worker/zlib-worker.js")),Ot.pdfWorkerScript=new Us(vz("/js/pdf.worker.js")),Ot.mapCardPlaceholder=kp(()=&gt;ie.res.src("/svg/map_card_placeholder.svg")),Ot.webCardPlaceholder=kp(()=&gt;ie.res.src("/svg/web_card_placeholder.svg")),Ot.quizCardTestPlaceholder=kp(()=&gt;ie.res.src("/svg/quiz_card_bg_test_80x60.svg")),Ot.quizCardSurveyPlaceholder=kp(()=&gt;ie.res.src("/svg/quiz_card_bg_survey_80x60.svg")),Ot.atndCardPlaceholder=kp(()=&gt;ie.res.src("/svg/attendance_card_bg_80x60.svg")),Ot.fullScreenIcon=fJ(()=&gt;ie.res.src("/svg/fullscreen.svg")),Ot.brokenCardIcon=kp(()=&gt;ie.res.src("/svg/exclamationmark_circle.svg")),Ot.penPointer=kp(()=&gt;ie.res.src("/svg/pen_circle.svg")),Ot.fingerPointerIcon=kp(()=&gt;ie.res.src("/svg/hand_circle.svg")),Ot.textPointerIcon=kp(()=&gt;ie.res.src(he.get().strings.textPointerIconPath));function kp(r){return Wb((e,t)=&gt;tl({url:r(),signal:t.signal}))}function fJ(r){return Wb(async()=&gt;{let e=await gD({url:r()}),t=new Image;return t.src=URL.createObjectURL(e),await t.decode(),t})}function vz(r){return async(e,t)=&gt;{let n=ie.res.src(r),o=await W_({url:n,maxRetryCount:5,signal:t});if(!o)throw new Error("script fetch retry failed");return URL.createObjectURL(o)}}function mJ(r){return new mD(r,3,{delay:1,unit:1e3})}function gJ(){let r=ie.res.src("/cmaps/");async function e(t,n){let o=he.get().strings,i=await Ot.pdfWorkerScript.fetch();if(i.type!=="success")throw new co(o.couldntSetupPdfWorker);ES.GlobalWorkerOptions.workerSrc=i.value;let a=await new Us(async()=&gt;{let c=new ES.PDFWorker;try{return await c.promise,c}catch(p){throw c.destroy(),p}}).fetch();if(a.type!=="success")throw new co(o.couldntSetupPdfWorker);let l={worker:a.value,cMapUrl:r,cMapPacked:!0};t instanceof ArrayBuffer?l.data=new Uint8Array(t):l.url=t;let u=await(0,ES.getDocument)(l).promise,d=[];if(n==="all")for(let c=0;c&lt;u.numPages;c++)d.push(await u.getPage(c+1));else for(let c=0;c&lt;n.length;c++)d.push(await u.getPage(n[c]+1));return{doc:u,pages:d}}return{loadPages:e}}async function dF({urlOrData:r,pageIndexList:e,pageSize:t,background:n}){let o=await ie.pdf.loadPages(r,e),{doc:i,pages:s}=o,a=await Cz({pages:s,pageSize:t,background:n});return i.destroy(),a}async function Cz(r){let{pages:e,pageSize:t,background:n}=r,o=[];for(let i=0;i&lt;e.length;i++){let s=fr.create(),a=s.getContext2dForce();s.style.display="none";let l=e[i].getViewport({scale:1}),u=[];if(!t)s.height=l.height,s.width=l.width,u=[1,0,0,1,0,0];else{let p=br({width:l.width,height:l.height},t).width/l.width;u=[p,0,0,p,0,0],s.height=t.height,s.width=t.width}let d={canvasContext:a,viewport:l,transform:u,background:n};await e[i].render(d).promise,o.push(s)}return o}var bz=class{constructor(){this._rendering=!1;this._didBitbltExactPosition=!1;this.canvas=fr.create();let e=this.canvas.getContext("2d");if(!e)throw new uo;this.ctx=e}get didBitbltExactPosition(){return this._didBitbltExactPosition}get rendering(){return this._rendering}bitblt({ctx:e,globalMtx:t,contentLocalBounds:n}){let o=this.geometry;if(!o)return;e.save();let i=o.contentLocalBounds,a=o.mtx.transformRect(qe(),i),l=t.transformRect(qe(),n),u=t.inverted();e.transform(u.a,u.b,u.c,u.d,u.e,u.f),e.drawImage(this.canvas,a.x,a.y,a.width,a.height,l.x,l.y,l.width,l.height),e.restore(),this._didBitbltExactPosition=this.hasIdenticalGeometry($e(e.canvas.width,e.canvas.height),t)}async promiseRender({destinationSize:e,pageSize:t,page:n,globalMtx:o,contentLocalBounds:i,background:s}){this.canvas.width=e.width,this.canvas.height=e.height,this.ctx.clearRect(0,0,e.width,e.height);let a=n.getViewport({scale:1}),l=ds(t,a.width*a.height);t=Nt(t,l);let u=kr(i),d=ds(t,u),c=vp(t,i),h=new ft(d,0,0,d,c.x,c.y).prependMatrix(o),f=[h.a,h.b,h.c,h.d,h.e,h.f],m={canvasContext:this.ctx,viewport:a,transform:f,background:s};try{await n.render(m).promise,this.geometry={size:e,mtx:o.clone(),contentLocalBounds:i}}catch(g){fe.error(g)}this._rendering=!1}markRenderingInProgress(){this._rendering=!0,this.geometry=void 0,this._didBitbltExactPosition=!1}hasIdenticalGeometry(e,t){if(!this.geometry)return!1;let n=1e-10;return uxe(e,this.geometry.size,n)&amp;&amp;dxe(t,this.geometry.mtx,n)}get isReady(){return!this.rendering&amp;&amp;this.geometry!==void 0}};function uxe(r,e,t){Ee(t&gt;=0);let n=Math.abs(r.width-e.width),o=Math.abs(r.height-e.height);return n&lt;=t&amp;&amp;o&lt;=t}function dxe(r,e,t){Ee(t&gt;=0);let n=Math.abs(r.a-e.a),o=Math.abs(r.b-e.b),i=Math.abs(r.c-e.c),s=Math.abs(r.d-e.d),a=Math.abs(r.e-e.e),l=Math.abs(r.f-e.f);return n&lt;=t&amp;&amp;o&lt;=t&amp;&amp;i&lt;=t&amp;&amp;s&lt;=t&amp;&amp;a&lt;=t&amp;&amp;l&lt;=t}var yz=class{constructor(e){this.currentIndex=0;let{page:t,pageSize:n}=e;this.buffers=[];for(let o=0;o&lt;2;o++)this.buffers.push(new bz);this.page=t,this.pageSize=n}current(e,t){let n=this.buffers[this.currentIndex],o=this.buffers[(this.currentIndex+1)%this.buffers.length];if(n.isReady&amp;&amp;n.hasIdenticalGeometry(e,t))return n;if(o.isReady&amp;&amp;o.hasIdenticalGeometry(e,t))return o;if(n.isReady)return n;if(o.isReady)return o}enqueue(e){let t=this.buffers[this.currentIndex],n=(this.currentIndex+1)%this.buffers.length,o=this.buffers[n];if(o.rendering||t.rendering)return;let{destinationSize:i,globalMtx:s,contentLocalBounds:a,background:l,completion:u}=e;o.hasIdenticalGeometry(i,s)||(o.markRenderingInProgress(),o.promiseRender({destinationSize:i,page:this.page,pageSize:this.pageSize,globalMtx:s,contentLocalBounds:a,background:l}).then(()=&gt;{this.currentIndex=n,u()}))}},uF=class{constructor({card:e,signalRedraw:t,documentLoaded:n}){this.loadingState="waiting";this.card=e,this.signalRedraw=t,this.documentLoaded=n,this.tryLoadPdf()}tryLoadPdf(){var n;let e=this.card,t=(n=e.content.asset)==null?void 0:n.remote_id;if(!t){this.loadingState="waiting";return}this.loadingState="loading",ie.lnsClient.downloadAsset(t).then(cF).then(o=&gt;ie.pdf.loadPages(o,[e.content.page_index]).then(i=&gt;{let{doc:s,pages:a}=i,l=a[0];this.dBuffer=new yz({page:l,pageSize:this.card.content.page_size}),this.loadingState="ok",this.doc=s,this.signalRedraw(),this.documentLoaded()})).catch(Je.handleError).catch(o=&gt;{this.loadingState="failed",fe.error(o)})}ready(e,t){var o;if(this.loadingState!=="ok")return!1;let n=(o=this.dBuffer)==null?void 0:o.current(e,t);return n?n.hasIdenticalGeometry(e,t):!1}prepare(e,t,n){if(this.loadingState==="failed")return;let o=this.dBuffer;if(!o){this.loadingState==="waiting"&amp;&amp;this.tryLoadPdf();return}let i=o.current(e,t);i&amp;&amp;i.didBitbltExactPosition||i&amp;&amp;i.hasIdenticalGeometry(e,t)||(this.prev&amp;&amp;this.prev.equals(t)&amp;&amp;o.enqueue({destinationSize:e,contentLocalBounds:this.card.contentLocalBounds,globalMtx:t.clone(),background:n,completion:()=&gt;{this.signalRedraw()}}),this.prev=t.clone())}render(e,t){if(!this.dBuffer)return;let n=$e(e.canvas.width,e.canvas.height),o=this.dBuffer.current(n,t);if(!o)return;e.save();let i=this.card.contentLocalBounds,{x:s,y:a,width:l,height:u}=i,d=1/t.a/window.devicePixelRatio;e.beginPath(),e.rect(s+2*d,a+2*d,l-4*d,u-4*d),e.clip(),o.bitblt({ctx:e,globalMtx:t,contentLocalBounds:i}),e.restore()}getNumPages(){var e;return(e=this.doc)==null?void 0:e.numPages}close(){var e;this.dBuffer=void 0,(e=this.doc)==null||e.destroy(),this.doc=void 0}};var rl=class{constructor(e,t,n){this.file=e;this.pageSizes=t;this.isThinkingTool=n;this.extension=".pdf"}static fromThinkingTool(e){return new rl(e,[xi],!0)}static async fromFile(e){let t=URL.createObjectURL(e);try{let{doc:n,pages:o}=await ie.pdf.loadPages(t,"all"),i=o.map(s=&gt;{let a=s.getViewport({scale:1});return $e(a.width,a.height)});return n.destroy(),new rl(e,i,!1)}finally{URL.revokeObjectURL(t)}}getLayoutSize(){return this.pageSizes.map(e=&gt;br(e,kt))}insert({user:e,position:t,startPosition:n}){let o={description:this.file.name,extension:this.extension};return gS({author:{id:e.user_id,name:zt(e)},asset:o,position:t,pageSizeList:this.pageSizes,cardArea:kr(kt),startPosition:n,usage:this.isThinkingTool?"thinking_tool":void 0})}toCards({parent:e,position:t,user:n}){let o=[],i=this.getLayoutSize(),s=kr(kt),a=e?Eo(e.size):1,l=i.map(h=&gt;Nt(br(h,s),a)),u=De(t.x-l[0].width*.5,t.y-l[0].height*.5),d=cS(u,l,a),c={id:n.user_id,name:zt(n)},p={description:this.file.name,extension:this.extension};for(let h=0;h&lt;i.length;h++)o.push(cc({author:c,asset:p,pageIndex:h,pageSize:this.pageSizes[h],layoutSize:l[h],position:d[h],usage:this.isThinkingTool?"thinking_tool":void 0}));return o}getMetadata(){return this.pageSizes.map((e,t)=&gt;({...e,index:t}))}async*generateThumbnails(){for await(let e of this.generateThumbnailsWithOptions({imageType:this.isThinkingTool?"image/png":"image/jpeg"}))yield e}async*generateThumbnailsWithOptions(e){let{imageType:t}=e,n=URL.createObjectURL(this.file),o,i;try{let s=await ie.pdf.loadPages(n,"all");o=s.doc,i=s.pages}catch(s){fe.error(s),o==null||o.destroy(),URL.revokeObjectURL(n),yield void 0}if(!o||!i)throw URL.revokeObjectURL(n),new Error("cannot load pdf file: "+this.file.name);for(let s=0;s&lt;i.length;s++){let a=i[s],l=this.pageSizes[s],u=br(l,Ku),d=br(l,p0);try{let c=(await Cz({pages:[a],background:this.isThinkingTool?is.toCSSRGBA():void 0}))[0],p=cs(c,u),h=cs(c,d);s===i.length-1&amp;&amp;(o.destroy(),URL.revokeObjectURL(n)),yield{high:c,small:p,medium:h,contentType:t}}catch(c){o.destroy(),URL.revokeObjectURL(n),fe.error(c),yield void 0}}}async generateHeadThumbnail(){let e=URL.createObjectURL(this.file);try{let[t]=await dF({urlOrData:e,pageIndexList:[0],background:this.isThinkingTool?is.toCSSRGBA():void 0});return t}finally{URL.revokeObjectURL(e)}}};var yc=class{constructor(e){this.audio=e.audio,this.extension=e.extension,this.name=e.name,this.contentType=e.contentType}static async fromFile(e){let t=ha(e);if(!_E(t))throw new Error("is not audio file: "+t);let n=URL.createObjectURL(e);try{let o=await Sz(n),i=B0.get(t);return new yc({audio:o,extension:i,name:e.name,contentType:t})}finally{URL.revokeObjectURL(n)}}static async fromWebmFile(e){if(!sc(pa(e.name)))throw new Error(`Non-WebM file ${e.name}`);let t=URL.createObjectURL(e);try{let n=await Sz(t);Ee(_a(n.duration),"edited audio webm should have duration");let o=ad(e.name);return new yc({audio:n,extension:".weba",name:`${o}.weba`,contentType:"audio/webm"})}finally{URL.revokeObjectURL(t)}}insert(e){let t=$e(os);return bg({position:e.position,author:{id:e.user.user_id,name:zt(e.user)},asset:{description:this.name,extension:this.extension},type:"audio",avDuration:this.audio.duration,contentSize:t,startPosition:e.startPosition})}getLayoutSize(){return[$e(kt)]}toCards({parent:e,position:t,user:n}){let o=e?Eo(e.size):1;return[Hb({scaleToParent:o,position:t,author:{id:n.user_id,name:zt(n)},duration:this.audio.duration,contentSize:$e(os),asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{duration:this.audio.duration}]}async*generateThumbnails(){yield void 0}async generateHeadThumbnail(){return tl({url:ie.res.src("/svg/audio_card_placeholder.svg")})}};var yu=oe(mF()),zDe=oe(Fz()),jee=oe(P5()),_5=oe(A5());var KF=oe(mF()),$ee=oe(I5());var LD=class{constructor(){this._buffers=[],this._stack=[]}encode(e){return Gg(e.reduce((t,n)=&gt;t.concat(this.encodeChunk(n)),[])).buffer}encodeChunk(e){return e.type==="m"?e.isEnd?this.endTag(e):this.startTag(e):(e.data=KF.Buffer.from(e.data),this.writeTag(e)),this.flush()}flush(){let e=this._buffers;return this._buffers=[],e}getSchemaInfo(e){let t=$ee.byName[e];return t===void 0?null:new KF.Buffer(t.toString(16),"hex")}writeTag(e){let t=e.name,n=this.getSchemaInfo(t),o=e.data;if(n==null)throw new Error("No schema entry found for "+t);let i=RD(n,o);if(this._stack.length&gt;0){this._stack[this._stack.length-1].children.push({tagId:n,elm:e,children:[],data:i});return}this._buffers=this._buffers.concat(i)}startTag(e){let t=e.name,n=this.getSchemaInfo(t);if(n==null)throw new Error("No schema entry found for "+t);if(e.unknownSize){let i=RD(n,new KF.Buffer(0),e.unknownSize);this._buffers=this._buffers.concat(i);return}let o={tagId:n,elm:e,children:[],data:null};this._stack.length&gt;0&amp;&amp;this._stack[this._stack.length-1].children.push(o),this._stack.push(o)}endTag(e){let t=this._stack.pop();if(t==null)throw new Error("EBML structure is broken");if(t.elm.name!==e.name)throw new Error("EBML structure is broken");let n=t.children.reduce((i,s)=&gt;{if(s.data===null)throw new Error("EBML structure is broken");return i.concat(s.data)},[]),o=Gg(n);t.elm.type==="m"?t.data=RD(t.tagId,o,t.elm.unknownSize):t.data=RD(t.tagId,o),this._stack.length&lt;1&amp;&amp;(this._buffers=this._buffers.concat(t.data))}};function RD(r,e,t=!1){return Gg([r,t?yu.Buffer.from("01ffffffffffffff","hex"):jee.tools.writeVint(e.length),e])}function Kee(r){let e=Vee("VP8 ",r),t=Gg([yu.Buffer.from("WEBP","ascii"),e]);return Vee("RIFF",t)}function Vee(r,e){let t=yu.Buffer.alloc(4);return t.writeUInt32LE(e.byteLength,0),Gg([yu.Buffer.from(r.substr(0,4),"ascii"),t,e,yu.Buffer.alloc(e.byteLength%2===0?0:1)])}function qee(r,e,t){let n=E5("EBML",r),i=OD(n)+12,s=r[r.length-1].dataEnd-i,a=E5("Info",r);HDe("Duration",a),a.splice(1,0,{name:"Duration",type:"f",data:GDe(e,8)});let l=OD(a),u=E5("Tracks",r),d=OD(u),c=47,p=[],h=5+t.length*15,f=[],m=-1,g=10;for(let C=0;C&lt;g;C++){let x=c,y=x+l,S=y+d,w=S+h-s;p=[],p.push({name:"SeekHead",type:"m",isEnd:!1}),p.push({name:"Seek",type:"m",isEnd:!1}),p.push({name:"SeekID",type:"b",data:yu.Buffer.from([21,73,169,102])}),p.push({name:"SeekPosition",type:"u",data:GS(x)}),p.push({name:"Seek",type:"m",isEnd:!0}),p.push({name:"Seek",type:"m",isEnd:!1}),p.push({name:"SeekID",type:"b",data:yu.Buffer.from([22,84,174,107])}),p.push({name:"SeekPosition",type:"u",data:GS(y)}),p.push({name:"Seek",type:"m",isEnd:!0}),p.push({name:"Seek",type:"m",isEnd:!1}),p.push({name:"SeekID",type:"b",data:yu.Buffer.from([28,83,187,107])}),p.push({name:"SeekPosition",type:"u",data:GS(S)}),p.push({name:"Seek",type:"m",isEnd:!0}),p.push({name:"SeekHead",type:"m",isEnd:!0}),c=OD(p),f=[];let k=!1;if(f.push({name:"Cues",type:"m",isEnd:!1}),t.forEach(({CueTrack:A,CueClusterPosition:I,CueTime:E})=&gt;{if(f.push({name:"CuePoint",type:"m",isEnd:!1}),f.push({name:"CueTime",type:"u",data:GS(E)}),f.push({name:"CueTrackPositions",type:"m",isEnd:!1}),f.push({name:"CueTrack",type:"u",data:GS(A)}),I-=i,I+=w,I&lt;0){k=!0;return}f.push({name:"CueClusterPosition",type:"u",data:GS(I)}),f.push({name:"CueTrackPositions",type:"m",isEnd:!0}),f.push({name:"CuePoint",type:"m",isEnd:!0})}),!k)if(f.push({name:"Cues",type:"m",isEnd:!0}),h=OD(f),m!==w){if(m=w,C===g-1)throw new Error("Failed to converge to a stable metadata size")}else break}let v=[...n,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},...p,...a,...u,...f];return new LD().encode(v)}function HDe(r,e){let t=[],n=-1;for(let o=0;o&lt;e.length;o++){let i=e[o];if(i.name===r)if(i.type==="m")if(!i.isEnd)n=o;else{if(n==-1)throw new Error(`Detected ${r} closing element before finding the start`);e.splice(n,o-n+1);return}else{e.splice(o,1);return}}}function E5(r,e){let t=[],n=-1;for(let o=0;o&lt;e.length;o++){let i=e[o];if(i.name===r)if(i.type==="m")if(!i.isEnd)n=o;else{if(n==-1)throw new Error(`Detected ${r} closing element before finding the start`);t=e.slice(n,o+1);break}else{t.push(e[o]);break}}return t}function OD(r){let e=new LD;return r.reduce((t,n)=&gt;t.concat(e.encode([n])),[]).reduce((t,n)=&gt;t+n.byteLength,0)}function Gg(r){return yu.Buffer.concat(r)}function GS(r){let e=1;for(;r&gt;=Math.pow(2,8*e);e++);if(e&gt;=7)return fe.warn("7bit or more bigger uint not supported."),new _5.Uint64BE(r).toBuffer();let t=yu.Buffer.alloc(e);return t.writeUIntBE(r,0,e),t}function GDe(r,e=8){if(e===8){let t=yu.Buffer.alloc(8);return t.writeDoubleBE(r,0),t}else if(e===4){let t=yu.Buffer.alloc(4);return t.writeFloatBE(r,0),t}else throw new Error("float type bits must 4bytes or 8bytes")}function Yee(r){return r instanceof Date?r:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(r)/1e3/1e3)}var Zee=oe(Fz()),ete=oe(Jee());var qF=class extends ete.EventEmitter{constructor(){super();this.logGroup="";this.hasLoggingStarted=!1;this.metadataloaded=!1,this.chunks=[],this.stack=[],this.segmentOffset=0,this.last2SimpleBlockVideoTrackTimecode=[0,0],this.last2SimpleBlockAudioTrackTimecode=[0,0],this.lastClusterTimecode=0,this.lastClusterPosition=0,this.timecodeScale=1e6,this.metadataSize=0,this.metadatas=[],this.cues=[],this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null},this.trackTypes=[],this.trackDefaultDuration=[],this.trackCodecDelay=[],this.trackInfo={type:"nothing"},this.ended=!1,this.logging=!1,this.use_duration_every_simpleblock=!1,this.use_webp=!1,this.use_segment_info=!0,this.drop_default_duration=!0}stop(){for(this.ended=!0,this.emit_segment_info();this.stack.length;)this.stack.pop(),this.logging&amp;&amp;console.groupEnd();this.logging&amp;&amp;this.hasLoggingStarted&amp;&amp;this.logGroup&amp;&amp;console.groupEnd()}emit_segment_info(){let t=this.chunks;if(this.chunks=[],this.metadataloaded){if(!this.use_segment_info)return;let n=this.lastClusterTimecode,o=this.duration,i=this.timecodeScale;this.emit("cluster",{timecode:n,data:t}),this.emit("duration",{timecodeScale:i,duration:o})}else{this.metadataloaded=!0,this.metadatas=t;let n=this.trackTypes.indexOf(1),o=this.trackTypes.indexOf(2);if(this.trackInfo=n&gt;=0&amp;&amp;o&gt;=0?{type:"both",trackNumber:n}:n&gt;=0?{type:"video",trackNumber:n}:o&gt;=0?{type:"audio",trackNumber:o}:{type:"nothing"},!this.use_segment_info)return;this.emit("metadata",{data:t,metadataSize:this.metadataSize})}}read(t){let n=!1;if(!this.ended){if(t.type==="m")if(t.isEnd)this.stack.pop();else{let o=this.stack[this.stack.length-1];if(o!=null&amp;&amp;o.level&gt;=t.level){this.stack.pop(),this.logging&amp;&amp;console.groupEnd(),o.dataEnd=t.dataEnd,o.dataSize=t.dataEnd-o.dataStart,o.unknownSize=!1;let i=Object.assign({},o,{name:o.name,type:o.type,isEnd:!0});this.chunks.push(i)}this.stack.push(t)}if(t.type==="m"&amp;&amp;t.name=="Segment")this.segmentOffset!=0&amp;&amp;fe.warn("Multiple segments detected!"),this.segmentOffset=t.dataStart,this.emit("segment_offset",this.segmentOffset);else if(t.type==="b"&amp;&amp;t.name==="SimpleBlock"){let{timecode:o,trackNumber:i,frames:s}=(0,Zee.default)(t.data);if(this.trackTypes[i]===1){if(!this.firstVideoBlockRead&amp;&amp;(this.firstVideoBlockRead=!0,this.trackInfo.type==="both"||this.trackInfo.type==="video")){let a=this.lastClusterTimecode+o;this.cues.push({CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a}),this.emit("cue_info",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a})}this.last2SimpleBlockVideoTrackTimecode=[this.last2SimpleBlockVideoTrackTimecode[1],o]}else if(this.trackTypes[i]===2){if(!this.firstAudioBlockRead&amp;&amp;(this.firstAudioBlockRead=!0,this.trackInfo.type==="audio")){let a=this.lastClusterTimecode+o;this.cues.push({CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a}),this.emit("cue_info",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:this.lastClusterTimecode}),this.emit("cue",{CueTrack:i,CueClusterPosition:this.lastClusterPosition,CueTime:a})}this.last2SimpleBlockAudioTrackTimecode=[this.last2SimpleBlockAudioTrackTimecode[1],o]}this.use_duration_every_simpleblock&amp;&amp;this.emit("duration",{timecodeScale:this.timecodeScale,duration:this.duration}),this.use_webp&amp;&amp;s.forEach(a=&gt;{if(a.slice(3,6).toString("hex")!=="9d012a")return;let u=Kee(a),d=new Blob([u],{type:"image/webp"}),c=this.duration;this.emit("webp",{currentTime:c,webp:d})})}else t.type==="m"&amp;&amp;t.name==="Cluster"&amp;&amp;t.isEnd===!1?(this.firstVideoBlockRead=!1,this.firstAudioBlockRead=!1,this.emit_segment_info(),this.emit("cluster_ptr",t.tagStart),this.lastClusterPosition=t.tagStart):t.type==="u"&amp;&amp;t.name==="Timestamp"?this.lastClusterTimecode=t.value:t.type==="u"&amp;&amp;t.name==="TimestampScale"?this.timecodeScale=t.value:t.type==="m"&amp;&amp;t.name==="TrackEntry"?t.isEnd?(this.trackTypes[this.currentTrack.TrackNumber]=this.currentTrack.TrackType,this.trackDefaultDuration[this.currentTrack.TrackNumber]=this.currentTrack.DefaultDuration,this.trackCodecDelay[this.currentTrack.TrackNumber]=this.currentTrack.CodecDelay):this.currentTrack={TrackNumber:-1,TrackType:-1,DefaultDuration:null,CodecDelay:null}:t.type==="u"&amp;&amp;t.name==="TrackType"?this.currentTrack.TrackType=t.value:t.type==="u"&amp;&amp;t.name==="TrackNumber"?this.currentTrack.TrackNumber=t.value:t.type==="u"&amp;&amp;t.name==="CodecDelay"?this.currentTrack.CodecDelay=t.value:t.type==="u"&amp;&amp;t.name==="DefaultDuration"?this.drop_default_duration?(fe.warn("DefaultDuration detected!, remove it"),n=!0):this.currentTrack.DefaultDuration=t.value:t.name==="unknown"&amp;&amp;fe.warn(t);!this.metadataloaded&amp;&amp;t.dataEnd&gt;0&amp;&amp;(this.metadataSize=t.dataEnd),n||this.chunks.push(t),this.logging&amp;&amp;this.put(t)}}get duration(){if(this.trackInfo.type==="nothing")return fe.warn("no video, no audio track"),0;let t=0,n=0,o=0,i=this.trackDefaultDuration[this.trackInfo.trackNumber];if(typeof i=="number")t=i;else if(this.trackInfo.type==="both")if(this.last2SimpleBlockAudioTrackTimecode[1]&gt;this.last2SimpleBlockVideoTrackTimecode[1]){t=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackTypes.indexOf(2)];typeof l=="number"&amp;&amp;(n=l),o=this.last2SimpleBlockAudioTrackTimecode[1]}else{t=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackTypes.indexOf(1)];typeof l=="number"&amp;&amp;(n=l),o=this.last2SimpleBlockVideoTrackTimecode[1]}else if(this.trackInfo.type==="video"){t=(this.last2SimpleBlockVideoTrackTimecode[1]-this.last2SimpleBlockVideoTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackInfo.trackNumber];typeof l=="number"&amp;&amp;(n=l),o=this.last2SimpleBlockVideoTrackTimecode[1]}else if(this.trackInfo.type==="audio"){t=(this.last2SimpleBlockAudioTrackTimecode[1]-this.last2SimpleBlockAudioTrackTimecode[0])*this.timecodeScale;let l=this.trackCodecDelay[this.trackInfo.trackNumber];typeof l=="number"&amp;&amp;(n=l),o=this.last2SimpleBlockAudioTrackTimecode[1]}let a=((this.lastClusterTimecode+o)*this.timecodeScale+t-n)/this.timecodeScale;return Math.floor(a)}addListener(t,n){return super.addListener(t,n)}put(t){this.hasLoggingStarted||(this.hasLoggingStarted=!0,this.logging&amp;&amp;this.logGroup&amp;&amp;console.groupCollapsed(this.logGroup)),t.type==="m"?t.isEnd?console.groupEnd():console.group(t.name+":"+t.tagStart):t.type==="b"?fe.log(t.name,t.type):fe.log(t.name,t.tagStart,t.type,t.value)}};var F5=oe(mF()),M5=oe(P5()),tte=oe(A5());var rte=oe(I5());var YF=class{constructor(){this._buffer=new F5.Buffer(0),this._tag_stack=[],this._state=1,this._cursor=0,this._total=0,this._result=[]}decode(e){this.readChunk(e);let t=this._result;return this._result=[],t}readChunk(e){for(this._buffer=Gg([this._buffer,new F5.Buffer(e)]);this._cursor&lt;this._buffer.length&amp;&amp;!(this._state===1&amp;&amp;!this.readTag()||this._state===2&amp;&amp;!this.readSize()||this._state===3&amp;&amp;!this.readContent()););}getSchemaInfo(e){let t=rte.byEbmlID[e];return t||{name:"unknown",level:-1,type:"unknown",description:"unknown"}}readTag(){if(this._cursor&gt;=this._buffer.length)return!1;let e=M5.tools.readVint(this._buffer,this._cursor);if(e==null)return!1;let n=this._buffer.slice(this._cursor,this._cursor+e.length).reduce((s,a,l,u)=&gt;s+a*Math.pow(16,2*(u.length-1-l)),0),o=this.getSchemaInfo(n),i={EBML_ID:n.toString(16),schema:o,type:o.type,name:o.name,level:o.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(i),this._cursor+=e.length,this._total+=e.length,this._state=2,!0}readSize(){if(this._cursor&gt;=this._buffer.length)return!1;let e=M5.tools.readVint(this._buffer,this._cursor);if(e==null)return!1;let t=this._tag_stack[this._tag_stack.length-1];return t.sizeEnd=t.sizeStart+e.length,t.dataStart=t.sizeEnd,t.dataSize=e.value,e.value===-1?(t.dataEnd=-1,t.type==="m"&amp;&amp;(t.unknownSize=!0)):t.dataEnd=t.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=3,!0}readContent(){let e=this._tag_stack[this._tag_stack.length-1];if(e.type==="m"){if(e.isEnd=!1,this._result.push(e),this._state=1,e.dataSize===0){let n=Object.assign({},e,{isEnd:!0});this._result.push(n),this._tag_stack.pop()}return!0}if(this._buffer.length&lt;this._cursor+e.dataSize)return!1;let t=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=t,e.type){case"u":e.value=t.readUIntBE(0,t.length);break;case"i":e.value=t.readIntBE(0,t.length);break;case"f":e.value=e.dataSize===4?t.readFloatBE(0):e.dataSize===8?t.readDoubleBE(0):(fe.warn(`cannot read ${e.dataSize} octets float. failback to 0`),0);break;case"s":e.value=t.toString("ascii");break;case"8":e.value=t.toString("utf8");break;case"b":e.value=t;break;case"d":e.value=Yee(new tte.Int64BE(t).toNumber());break}if(e.value===null)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=1,this._cursor=0,this._tag_stack.pop();this._tag_stack.length&gt;0;){let n=this._tag_stack[this._tag_stack.length-1];if(n.dataEnd&lt;0)return this._tag_stack.pop(),!0;if(this._total&lt;n.dataEnd)break;if(n.type!=="m")throw new Error("parent element is not master element");let o=Object.assign({},n,{isEnd:!0});this._result.push(o),this._tag_stack.pop()}return!0}};var $De=[{type:"video",container:"webm",codecs:["vp8","opus"]},{type:"video",container:"webm",codecs:["vp9","opus"]},{type:"video",container:"webm",codecs:["vp8","vorbis"]},{type:"video",container:"webm",codecs:["vp9","vorbis"]},{type:"video",container:"mp4"}],VDe=[{type:"audio",container:"webm"},{type:"audio",container:"mp4"}],nte={small:600,medium:960},zD={small:125e4,medium:25e5,large:4e6},HD=128e3,ote="audio/mp4",jDe="video/mp4";function KDe({type:r,container:e,codecs:t}){let n=`${r}/${e}`;return t?`${n};codecs=${t.join(",")}`:n}var qDe=()=&gt;{if(typeof MediaRecorder!="undefined"){if(MediaRecorder.isTypeSupported)return MediaRecorder.isTypeSupported;if(mf())return r=&gt;r===ote||r===jDe}};function XF(r){let e=qDe();return e?(r==="audio"?VDe:$De).map(KDe).find(e):void 0}var QF=r=&gt;{let e=r.split(";")[0];return e.split("/")[1]==="webm"?new B5(e):new N5(e)},ay=class extends Error{constructor(){super("Media length is invalid")}},N5=class{constructor(e){this.chunks=[];this.mimeType=e}add(e){this.chunks.push(e)}async close(){return new Promise(e=&gt;{let t=new Blob(this.chunks,{type:this.mimeType});this.chunks=[];let n=this.mimeType===ote?new Audio:document.createElement("video");n.onloadedmetadata=o=&gt;{let i=o.currentTarget.duration;if(Number.isNaN(i)||!Number.isFinite(i))throw new ay;e({blob:t,duration:i}),n.onloadedmetadata=null,JF(n)},n.src=URL.createObjectURL(t)})}},B5=class{constructor(e){this.editor=new ly(e)}add(e){this.editor.add(e)}async close(){return await this.editor.close()}};var ly=class{constructor(e){this.mimeType=e;this.chunks=[];this.decoder=new YF;this.reader=new qF;this.addQueue=[];this.reader.logging=!1}add(e){let t=new lf,{decoder:n,reader:o,addQueue:i}=this;this.chunks.push(e);let s=[...i];t.fetch(async function(){let a=Promise.all(s.map(d=&gt;d.wait())),[l]=await Promise.all([cF(e),a]);n.decode(l).forEach(d=&gt;o.read(d))}),i.push(t)}async close(){await Promise.all(this.addQueue.map(h=&gt;h.wait())),this.reader.stop();let{metadatas:e,metadataSize:t,duration:n,timecodeScale:o,cues:i}=this.reader;if(e.length&lt;1)throw new ay;let s=qee(e,n,i),a={type:this.mimeType},l=new Blob(this.chunks,a);this.chunks=[];let u=l.slice(t),d=new Blob([s,u],a),p=n*o*1e-9;return{blob:d,duration:p}}};async function WS(r){let e=[];for(let t of r){let n=pa(t.name);if(!sc(n)){e.push(t);continue}try{let o=new ly(t.type);o.add(t);let{blob:i}=await o.close(),s=new File([i],t.name);e.push(s)}catch(o){fe.warn(`could not make seekable version of ${t.name}`),e.push(t)}}return e}async function ite(r){try{return await ji.fromFile(r)}catch(e){if(!(e instanceof Sc))throw e}return yc.fromWebmFile(r)}function _a(r){return!!r&amp;&amp;!isNaN(r)&amp;&amp;isFinite(r)&amp;&amp;r&gt;0}function ste(r){return r!=null&amp;&amp;r.endsWith("webm")?e=&gt;YDe(e,r):XDe}async function YDe(r,e){let t=await R5(r),n=new ly(e);return n.add(t),(await n.close()).duration}function XDe(r){return new Promise((e,t)=&gt;{let n=!1,o=document.createElement("video");o.muted=!0,o.preload="none",o.autoplay=!1;let i=a=&gt;{let{duration:l}=a.currentTarget;_a(l)&amp;&amp;(o.removeEventListener("seeked",i),n=!0,e(l))},s=()=&gt;{o.addEventListener("seeked",i),o.currentTime=1*864e5,o.removeEventListener("loadeddata",s)};o.addEventListener("loadeddata",s),o.src=r,o.load(),setTimeout(()=&gt;{n||(n=!0,o.src="",o.load(),t(new Error("force-update duration timed out")))},30*1e3)})}var uy=class{constructor(){this.cancelledTasks=new Set;this.pendingTasks=new Set;this.depth=0;this.maxTaskId=0;this.complete=()=&gt;{this.depth--,this.depth===0&amp;&amp;(this.tail=void 0)}}queue(e,t){this.maxTaskId++;let n=this.maxTaskId,o;return this.tail?(this.pendingTasks.add(n),o=this.tail.then(()=&gt;(this.pendingTasks.delete(n),this.cancelledTasks.has(n)?(this.cancelledTasks.delete(n),Promise.resolve(void 0)):e(t).catch(()=&gt;{})))):o=e(t).catch(()=&gt;{}),this.depth++,this.tail=o.then(this.complete).catch(this.complete),o}cancelAllPendingTasks(){for(let e of this.pendingTasks)this.cancelledTasks.add(e);this.pendingTasks.clear()}get idle(){return this.tail===void 0}};var Mp=class{constructor(e,t,n,o){this.mainTrack=e;this._duration=t;this.subTracks=new Map;this._playing=!1;this.currentPlayQueue=new uy;this.isMutedPlay=!1;this.speedScale=1;this.muted=!1;this.waitingTracks=new Set;this.handleWaitingChanged=(e,t)=&gt;{let n=this.waitingTracks.size&gt;0;t?(this.waitingTracks.add(e),this.freeze({except:e})):this.waitingTracks.delete(e);let o=this.waitingTracks.size&gt;0;n!==o&amp;&amp;(o||this.thaw())};var s,a;e.onTimeChange=l=&gt;{var u;(u=this.onTimeChange)==null||u.call(this,l)},e.onEnded=()=&gt;{var l;(l=this.onEnded)==null||l.call(this)};let i=(a=(s=this.mainTrack)==null?void 0:s.element)==null?void 0:a.src;i&amp;&amp;!_a(this._duration)&amp;&amp;ste(n)(i).then(u=&gt;{this.duration=u,o==null||o(u)}).catch(u=&gt;{fe.warn("could not get valid duration",u)}),e.onWaitingChanged=this.handleWaitingChanged}static makeVideo(e){let{duration:t,isWebm:n,onDurationChange:o}=e,i=Wg.makeVideo(e),s=n?"video/webm":void 0;return new Mp(i,t,s,o)}static makeAudio(e){let{src:t,duration:n,volume:o,isWebm:i,onDurationChange:s,onReady:a}=e,l=Wg.makeAudio({src:t,volume:o,offset:0,loop:!1,onReady:a}),u=i?"audio/webm":void 0;return new Mp(l,n,u,s)}static makeEmpty(e,t){let n=new dy(e);return t(),new Mp(n,e)}get duration(){return this._duration}set duration(e){this._duration=e,this.mainTrack instanceof dy&amp;&amp;(this.mainTrack.duration=e)}get video(){if(this.mainTrack.element instanceof HTMLVideoElement)return this.mainTrack.element}get audio(){if(this.mainTrack.element instanceof HTMLAudioElement)return this.mainTrack.element}get isLoading(){return this.waitingTracks.size&gt;0?!0:this.tracks.some(e=&gt;e.element&amp;&amp;(ate(e.element)||e.element.seeking))}addSubTrack(e){let{url:t,volume:n,trackId:o,offset:i,loop:s,duration:a,onReady:l}=e;if(this.subTracks.has(o)){console.warn(`trackId "${o}" is already in use`);return}let u=this.playing;this.pause();let d=Wg.makeAudio({src:t,volume:n,offset:i,loop:s,onReady:l});d.onWaitingChanged=this.handleWaitingChanged,this.subTracks.set(o,d),this.mainTrack instanceof dy&amp;&amp;a?(this.duration=a,this.seek(0)):this.seek(this.mainTrack.currentTime),u&amp;&amp;this.play()}removeSubTrack(e,t){let n=this.subTracks.get(e);if(!n)return;let o=this.playing;this.pause(),this.subTracks.delete(e),this.mainTrack instanceof dy&amp;&amp;t&amp;&amp;(this.duration=t,this.seek(0)),n.close(),o&amp;&amp;this.play()}get playing(){return this._playing}play(){this._playing=!0;let e=this.mainTrack.currentTime;this.currentPlayQueue.queue(()=&gt;Promise.allSettled(this.tracks.map(t=&gt;t.play(e))).then(t=&gt;{let n=t.filter(o=&gt;o.status==="rejected").map(o=&gt;o.reason);n.length===0?this.isMutedPlay=!1:(this.pause(),!this.isMutedPlay&amp;&amp;n.some(o=&gt;o.name==="NotAllowedError"||"AbortError")&amp;&amp;(this.isMutedPlay=!0,this.setMuted(!0,!0),this.play()))}))}apply(e){(e!==this.playing||this.shouldSyncPlaying)&amp;&amp;(e?this.play():this.pause())}get shouldSyncPlaying(){let e=this.mainTrack.currentTime;return this.tracks.some(t=&gt;t.canSeekTo(e)&amp;&amp;t.frozen)&amp;&amp;this.currentPlayQueue.idle&amp;&amp;this.waitingTracks.size===0}pause(){this._playing=!1,this.currentPlayQueue.queue(()=&gt;(this.tracks.forEach(e=&gt;e.pause()),Promise.resolve()))}seek(e){var t;this.tracks.forEach(n=&gt;{n.seek(e)}),(t=this.onSeekTimeUpdated)==null||t.call(this,this.mainTrack.currentTime)}close(){this._playing=!1,this.tracks.forEach(e=&gt;e.close()),this.subTracks.clear(),this.waitingTracks.clear(),this.onMuteChanged=void 0,this.onTimeChange=void 0,this.onSeekTimeUpdated=void 0,this.onEnded=void 0}setMainTrackVolume(e){this.mainTrack.volume!==e&amp;&amp;(this.mainTrack.volume=e)}setSubTrackVolume(e,t){let n=this.subTracks.get(e);!n||n.volume!==t&amp;&amp;(n.volume=t)}setSpeedScale(e){this.speedScale=e,!(this.waitingTracks.size&gt;0)&amp;&amp;this.tracks.forEach(t=&gt;{t.setSpeedScale(this.speedScale)})}freeze(e){let{except:t}=e;this.tracks.filter(n=&gt;n!==t).forEach(n=&gt;n.freeze())}thaw(){let e=this.mainTrack.currentTime;this.tracks.filter(t=&gt;t.canSeekTo(e)).forEach(t=&gt;t.thaw())}setMuted(e,t){var n;this.muted!==e&amp;&amp;(this.tracks.forEach(o=&gt;o.muted=e),this.muted=e,(n=this.onMuteChanged)==null||n.call(this,this.muted,t))}get tracks(){return[this.mainTrack,...this.subTracks.values()]}},Wg=class{constructor(e){this.speedScale=1;this._frozen=!1;this.handleTimeUpdate=()=&gt;{var t;let e=this.currentTime;(t=this.onTimeChange)==null||t.call(this,e)};this.handleEnded=()=&gt;{var e;(e=this.onEnded)==null||e.call(this)};this.waiting=!1;this.handleWaitingChanged=()=&gt;{var t;if(!this.element)return;let e=!this.element.paused&amp;&amp;ate(this.element);e!==this.waiting&amp;&amp;(this.waiting=e,(t=this.onWaitingChanged)==null||t.call(this,this,this.waiting))};let{element:t,src:n,volume:o,offset:i,loop:s,onReady:a}=e;t.onloadeddata=()=&gt;{this.handleWaitingChanged();let d=this.pendingSeekTime;this.pendingSeekTime=void 0,d!==void 0&amp;&amp;(t.currentTime=d-this.offset)},t.volume=o,this.element=t;let l=!0,u=d=&gt;{if(!l)return;l=!1;let c;if(t.error){let p=he.get().strings,h;switch(t.error.code){case MediaError.MEDIA_ERR_DECODE:h=p.decodingFailed,t instanceof HTMLVideoElement?h+=p.browserCannotReadTheVideo:h+=p.browserCannotReadTheAudio;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t instanceof HTMLVideoElement?h=p.browserCannotReadTheVideo:h=p.browserCannotReadTheAudio;break;case MediaError.MEDIA_ERR_NETWORK:h=p.networkError;break;case MediaError.MEDIA_ERR_ABORTED:h=p.loadingInterrupted;break;default:h=`${p.unknownError}: code=${t.error.code}, message=${t.error.message}`;break}c=new co(h)}else d instanceof ErrorEvent?c=new co(d.message):d!==void 0&amp;&amp;(c=new co("Unknown error"));a(c)};t.onerror=u,t.crossOrigin="anonymous",t.oncanplay=()=&gt;{a(void 0)},t.src=n,t.load(),this.offset=i,this.loop=s,this.subscribe()}static makeVideo(e){let{src:t,volume:n,onReady:o}=e,i=document.createElement("video");return i.preload="auto",i.playsInline=!0,new Wg({element:i,src:t,volume:n,offset:0,loop:!1,onReady:o})}static makeAudio(e){let{src:t,volume:n,offset:o,loop:i,onReady:s}=e,a=new Audio;return a.preload="auto",new Wg({element:a,src:t,volume:n,offset:o,loop:i,onReady:s})}seek(e){if(!!this.element){if(this.element.src.length===0){this.pendingSeekTime=e;return}if(this.loop){let t=e%this.element.duration;this.element.currentTime=t}else this.canSeekTo(e)||this.freeze(),this.element.currentTime=e-this.offset}}pause(){var e;(e=this.element)==null||e.pause()}play(e){return this.element?(this.element.currentTime=e-this.offset,this.canSeekTo(e)?this.thaw():this.freeze(),this.element.play()):Promise.reject("track closed")}canSeekTo(e){if(!this.element)return!1;let t=e-this.offset;return isNaN(this.element.duration)?0&lt;=t:0&lt;=t&amp;&amp;t&lt;this.element.duration}get muted(){return this.element?this.element.muted:!1}set muted(e){!this.element||(this.element.muted=e)}get currentTime(){var e;return this.loop&amp;&amp;console.warn('"currentTime" reports wired timestamp in case of loop mode'),this.element?(e=this.pendingSeekTime)!=null?e:this.element.currentTime+this.offset:0}get volume(){return this.element?this.element.volume:0}set volume(e){isNaN(e)||!this.element||(this.element.volume=it(e,0,1))}get playing(){return this.element?!this.element.paused:!1}setSpeedScale(e){this.speedScale=e,!(this.frozen||!this.element)&amp;&amp;this.element.playbackRate!==e&amp;&amp;(this.element.playbackRate=e)}get frozen(){return this._frozen}freeze(){this._frozen=!0,this.element&amp;&amp;(this.element.playbackRate=0)}thaw(){this.element&amp;&amp;(this.element.playbackRate=this.speedScale),this._frozen=!1}close(){this.onTimeChange=void 0,this.onEnded=void 0,this.onWaitingChanged=void 0,this.unsubscribe(),JF(this.element),this.element=void 0}subscribe(){this.element&amp;&amp;(this.element.addEventListener("timeupdate",this.handleTimeUpdate),this.element.addEventListener("ended",this.handleEnded),this.element.addEventListener("waiting",this.handleWaitingChanged),this.element.addEventListener("playing",this.handleWaitingChanged))}unsubscribe(){this.element&amp;&amp;(this.element.removeEventListener("timeupdate",this.handleTimeUpdate),this.element.removeEventListener("ended",this.handleEnded),this.element.removeEventListener("waiting",this.handleWaitingChanged),this.element.removeEventListener("playing",this.handleWaitingChanged))}},L5=class{constructor(e,t,n){this.startSecond=Date.now()/1e3,this.timerId=window.setInterval(n,e*1e3),this.speedScale=t}close(){window.clearInterval(this.timerId)}get elapsedTime(){return(Date.now()/1e3-this.startSecond)*this.speedScale}},O5=class{constructor(e){this._duration=e;this.offset=0;this.muted=!0;this.volume=0;this.speedScale=1;this._frozen=!1;this.handleTick=()=&gt;{var t,n;let e=this.currentTime;e&gt;this._duration?((t=this.onEnded)==null||t.call(this),this.pause()):(n=this.onTimeChange)==null||n.call(this,e)}}set duration(e){this._duration=e}get currentTime(){var t,n;let e=this.frozen?0:1;return this.offset+((n=(t=this.generator)==null?void 0:t.elapsedTime)!=null?n:0)*e}close(){var e;(e=this.generator)==null||e.close(),this.generator=void 0,this.onTimeChange=void 0,this.onEnded=void 0}pause(){var e;this.offset=this.currentTime,(e=this.generator)==null||e.close(),this.generator=void 0}play(e){return this.playing||(this.offset=e,this.generator=this.createGenerator()),Promise.resolve()}seek(e){this.offset=e,this.reset()}canSeekTo(e){return!0}setSpeedScale(e){this.offset=this.currentTime,this.speedScale=e,this.reset()}get frozen(){return this._frozen}freeze(){this.offset=this.currentTime,this._frozen=!0}thaw(){this._frozen=!1}get playing(){return this.generator!==void 0}reset(){var e;this.generator&amp;&amp;((e=this.generator)==null||e.close(),this.generator=this.createGenerator())}createGenerator(){return new L5(O5.INTERVAL,this.speedScale,this.handleTick)}},dy=O5;dy.INTERVAL=.1;function ate(r){return r.readyState&lt;HTMLMediaElement.HAVE_FUTURE_DATA||isNaN(r.duration)}var $g=class{constructor(){this.handleReady=e=&gt;{var t;(t=this.onReady)==null||t.call(this,e)}}get player(){return this._player}initialize(e){var c,p,h,f,m;let t,n=e.duration,o=ZF(e)/2,i=g=&gt;{var v;return(v=this.onDurationChange)==null?void 0:v.call(this,g)};if(e instanceof zn){let g=ie.fileManager.getContentAssetUrl(e),v=(c=e.content.asset)==null?void 0:c.extension;g&amp;&amp;(t=Mp.makeVideo({src:g,duration:n,volume:o,isWebm:sc(v),onDurationChange:i,onReady:this.handleReady}))}else if(e instanceof Qn){let g=ie.fileManager.getContentAssetUrl(e),v=(p=e.content.asset)==null?void 0:p.extension;g&amp;&amp;(t=Mp.makeAudio({src:g,duration:n,volume:o,isWebm:sc(v),onDurationChange:i,onReady:this.handleReady}))}let s=t!=null?t:Mp.makeEmpty(n,()=&gt;this.handleReady(void 0)),{naration:a,bgm:l}=e.gadgets,u=ie.res.assetUrl((h=a==null?void 0:a.asset)==null?void 0:h.remote_id),d=ie.res.assetUrl((f=l==null?void 0:l.asset)==null?void 0:f.remote_id);a&amp;&amp;u&amp;&amp;s.addSubTrack({url:u,trackId:$g.TRACK_ID_NARRATION,volume:a.source_volume/2,offset:a.start_point+((m=a.start_point_adjustment)!=null?m:0),loop:!1,onReady:this.handleReady}),l&amp;&amp;d&amp;&amp;s.addSubTrack({url:d,trackId:$g.TRACK_ID_BGM,volume:o,offset:0,loop:!0,onReady:this.handleReady}),this._player=s,s.onTimeChange=g=&gt;{var v;(v=this.onTimeChange)==null||v.call(this,g)},s.onEnded=()=&gt;{var g;(g=this.onEnded)==null||g.call(this)},this._player=s,this.card=e}uninitialize(){var e;this.onDurationChange=void 0,(e=this._player)==null||e.close(),this._player=void 0}setNarration(e){var i,s;let t=this._player;if(!t)return;t.removeSubTrack($g.TRACK_ID_NARRATION,e.duration);let{naration:n}=e.gadgets;if(!n||!n.asset)return;let o=ie.res.assetUrl((i=n.asset)==null?void 0:i.remote_id);!o||t.addSubTrack({url:o,trackId:$g.TRACK_ID_NARRATION,volume:n.source_volume/2,offset:n.start_point+((s=n.start_point_adjustment)!=null?s:0),loop:!1,duration:e.duration,onReady:this.handleReady})}setNarrationDuration(e){!this.player||this.player.duration===e||(this.player.duration=e)}apply(e,t={syncTime:!1}){let n=this._player;if(!this.card||!n)return;let{avPlaying:o,avSeekTime:i,avVolume:s,avMuted:a,avSpeedScale:l,narrationVolume:u,setAvMuted:d,setAvSeekTime:c}=e,{syncTime:p}=t;n.onMuteChanged=d,p&amp;&amp;(n.onSeekTimeUpdated=h=&gt;{ru(i,h)||c(h,p)},n.seek(i)),n.setMuted(a),n.setMainTrackVolume(s/2),n.setSubTrackVolume($g.TRACK_ID_NARRATION,u/2),n.setSubTrackVolume($g.TRACK_ID_BGM,s/2),n.setSpeedScale(l),n.apply(o)}},$S=$g;$S.TRACK_ID_NARRATION=2,$S.TRACK_ID_BGM=3;async function U5(r){return new Promise((e,t)=&gt;{let n=document.createElement("video");n.preload="auto",n.src=r,n.load(),n.onloadeddata=()=&gt;{e(n)},n.onerror=t})}async function Sz(r){return new Promise((e,t)=&gt;{let n=new Audio(r);n.onloadeddata=()=&gt;{e(n)},n.onerror=t,n.load()})}function JF(r){!r||(r.removeAttribute("src"),r.load())}var ji=class{constructor(e){this.thumbnailType="image/jpeg";this.video=e.video,this.extension=e.extension,this.name=e.name,this.contentType=e.contentType,this.duration=e.duration}static async fromFile(e){let t=ha(e);if(!Qu(t))throw new Error("file is not video: "+t);let n=URL.createObjectURL(e);try{let o=Zo.get(t),i=await U5(n);if(!QDe(i.videoWidth,i.videoHeight))throw new Sc("size of video file is invalid.");let s=i.duration;return Ee(_a(s),"duration must be positive finite number"),new ji({video:i,extension:o,name:e.name,contentType:t,duration:s})}finally{URL.revokeObjectURL(n)}}static async fromObjectUrl(e,t){if(!Qu(t))throw new Error(`unsupported video content type: "${t}"`);let n=Zo.get(t),o=await U5(e),i=o.duration;return Ee(_a(i),"duration must be positive finite number"),new ji({video:o,extension:n,name:`captured${n}`,contentType:t,duration:i})}getLayoutSize(){return[br($e(this.video.videoWidth,this.video.videoHeight),kt)]}insert(e){let t=$e(this.video.videoWidth,this.video.videoHeight);return bg({position:e.position,author:{id:e.user.user_id,name:zt(e.user)},asset:{description:this.name,extension:this.extension},type:"video",avDuration:this.duration,contentSize:t,startPosition:e.startPosition})}toCards({parent:e,position:t,user:n}){let o=e?Eo(e.size):1,i=$e(this.video.videoWidth,this.video.videoHeight);return[af({scaleToParent:o,position:t,author:{id:n.user_id,name:zt(n)},duration:this.duration,contentSize:i,asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{width:this.video.videoWidth,height:this.video.videoHeight,duration:this.duration}]}async*generateThumbnails(){yield e2(await this.generateHeadThumbnail(),"image/jpeg")}async generateHeadThumbnail(){let e=fr.create(this.video.videoWidth,this.video.videoHeight);return e.getContext2dForce().drawImage(this.video,0,0),e}};function QDe(r,e){return r&amp;&amp;!isNaN(r)&amp;&amp;isFinite(r)&amp;&amp;e&amp;&amp;!isNaN(e)&amp;&amp;isFinite(e)}var Np=class extends Error{constructor(t){let n=pa(t.name),o=t.type.length&gt;0?t.type:"unknown",i=`File not supported. File Type: "${o}", Extension: "${pa(t.name)}"`;super(i);this.type=o,this.extension=n}},Sc=class extends Error{constructor(e){super(e)}};async function Vg(r){let e=ha(r),t=pa(r.name);if(x1(e))return ki.fromFile(r);if(O4(t))return ite(r);if(Qu(e))return ji.fromFile(r);if(eq(e))return rl.fromFile(r);if(_E(e))return yc.fromFile(r);throw new Np(r)}async function e2(r,e){let t=br(r,Ku),n=br(r,p0),o=cs(r,t),i=cs(r,n);return{high:r,medium:i,small:o,contentType:e}}function lte({doc:r,metadata:e,startPosition:t,position:n,author:o}){var s;let i={remote_id:nE(r.asset_proxy),extension:r.extension,description:r.name};if(L0(r.extension))return mS({position:n,author:o,contentSize:e[0],asset:i,startPosition:t});if(O4(r.extension)){let[a]=e,l=Ja(a);return bg({position:n,author:o,asset:i,contentSize:l?a:void 0,type:l?"video":"audio",avDuration:(s=a==null?void 0:a.duration)!=null?s:0,startPosition:t})}else{if(Za(r.extension))return bg({position:n,author:o,asset:i,type:"audio",avDuration:e[0].duration,startPosition:t});if(Hh(r.extension))return bg({position:n,author:o,contentSize:e[0],asset:i,type:"video",avDuration:e[0].duration,startPosition:t});if(O0(r.extension))return gS({author:o,asset:i,position:n,pageSizeList:e,cardArea:kr(kt),startPosition:t});throw new Error("invalid state")}}function pa(r){let e=r.lastIndexOf(".");return e&lt;1?"":r.substr(e)}function ad(r){let e=r.lastIndexOf(".");return e&lt;0?r:r.substring(0,e)}function ha(r){if(r.type===""){let e=pa(r.name).toLowerCase();return R0.get(e)||""}else return r.type}async function VS(r,e,t){let n=await R5(r);return new File([n],e,{type:t})}async function R5(r){let e=await fetch(r);if(e.status!==200)throw new Error(`could not fetch ObjectURL: (${e.status}) "${e.statusText}"`);return e.blob()}async function ute({ext:r,remote_id:e,metadataList:t,author:n}){var s,a;let o={extension:r,remote_id:e},[i]=t;if(L0(r))return ca(sf({asset:o,contentSize:$e(i),author:n}));if(sc(r))return Ja(i)===!0?ca(af({author:n,asset:o,duration:(s=i==null?void 0:i.duration)!=null?s:0,contentSize:$e(i)})):ca(Hb({author:n,asset:o,duration:(a=i==null?void 0:i.duration)!=null?a:0,contentSize:os}));if(Hh(r))return ca(af({author:n,asset:o,duration:i.duration,contentSize:$e(i)}));if(Za(r))return ca(Hb({author:n,asset:o,duration:i.duration}));if(O0(r)){let l=t.map((u,d)=&gt;ca(cc({author:n,asset:o,pageIndex:d,pageSize:$e(u),layoutSize:br(u,kt),position:De()})));for(let u=0;u&lt;l.length-1;u++){let d=l[u],c=l[u+1];d.connect(c)}return Ee(l.length&gt;0),l[0]}else throw new Error("unsupported extension: "+r)}var dte=r=&gt;new Promise((e,t)=&gt;{let n=new FileReader;n.onerror=o=&gt;t(o),n.onabort=o=&gt;t(o),n.onload=o=&gt;{var i;typeof((i=o.target)==null?void 0:i.result)=="string"?e(o.target.result):t(new Error("Could not read file as text"))},n.readAsText(r)});var m2=typeof self!="undefined"?self:globalThis,KD=typeof navigator!="undefined",JDe=KD&amp;&amp;typeof HTMLImageElement=="undefined",n2=!(typeof globalThis=="undefined"||typeof process=="undefined"||!process.versions||!process.versions.node),g2=m2.Buffer,t2=m2.BigInt,v2=!!g2,ZDe=r=&gt;r;function o2(r,e=ZDe){if(n2)try{return typeof ta=="function"?Promise.resolve(e(ta(r))):import(r).then(e)}catch(t){console.warn(`Couldn't load ${r}`)}}var Z5=m2.fetch,eke=r=&gt;Z5=r;if(!m2.fetch){let r=o2("http",n=&gt;n),e=o2("https",n=&gt;n),t=(n,{headers:o}={})=&gt;new Promise(async(i,s)=&gt;{let{port:a,hostname:l,pathname:u,protocol:d,search:c}=new URL(n),p={method:"GET",hostname:l,path:encodeURI(u)+c,headers:o};a!==""&amp;&amp;(p.port=Number(a));let h=(d==="https:"?await e:await r).request(p,f=&gt;{if(f.statusCode===301||f.statusCode===302){let m=new URL(f.headers.location,n).toString();return t(m,{headers:o}).then(i).catch(s)}i({status:f.statusCode,arrayBuffer:()=&gt;new Promise(m=&gt;{let g=[];f.on("data",v=&gt;g.push(v)),f.on("end",()=&gt;m(Buffer.concat(g)))})})});h.on("error",s),h.end()});eke(t)}function Mr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var i2=r=&gt;Tte(r)?void 0:r,tke=r=&gt;r!==void 0;function Tte(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(tke).length===0)}function hs(r){let e=new Error(r);throw delete e.stack,e}function py(r){return(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r).trim())===""?void 0:r}function W5(r){let e=function(t){let n=0;return t.ifd0.enabled&amp;&amp;(n+=1024),t.exif.enabled&amp;&amp;(n+=2048),t.makerNote&amp;&amp;(n+=2048),t.userComment&amp;&amp;(n+=1024),t.gps.enabled&amp;&amp;(n+=512),t.interop.enabled&amp;&amp;(n+=100),t.ifd1.enabled&amp;&amp;(n+=1024),n+2048}(r);return r.jfif.enabled&amp;&amp;(e+=50),r.xmp.enabled&amp;&amp;(e+=2e4),r.iptc.enabled&amp;&amp;(e+=14e3),r.icc.enabled&amp;&amp;(e+=6e3),e}var $5=r=&gt;String.fromCharCode.apply(null,r),cte=typeof TextDecoder!="undefined"?new TextDecoder("utf-8"):void 0;function Dte(r){return cte?cte.decode(r):v2?Buffer.from(r).toString("utf8"):decodeURIComponent(escape($5(r)))}var Na=class{static from(e,t){return e instanceof this&amp;&amp;e.le===t?e:new Na(e,void 0,void 0,t)}constructor(e,t=0,n,o){if(typeof o=="boolean"&amp;&amp;(this.le=o),Array.isArray(e)&amp;&amp;(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&amp;&amp;(n=e.byteLength-t);let i=new DataView(e,t,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Na){n===void 0&amp;&amp;(n=e.byteLength-t),(t+=e.byteOffset)+n&gt;e.byteOffset+e.byteLength&amp;&amp;hs("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,t,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else hs("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,n=Na){return e instanceof DataView||e instanceof Na?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&amp;&amp;(e=new Uint8Array(e)),e instanceof Uint8Array||hs("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Na(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return Dte(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let n=this.getUint8Array(e,t);return $5(n)}getUnicodeString(e=0,t=this.byteLength){let n=[];for(let o=0;o&lt;t&amp;&amp;e+o&lt;this.byteLength;o+=2)n.push(this.getUint16(e+o));return $5(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&amp;&amp;this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&amp;&amp;this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function V5(r,e){hs(`${r} '${e}' was not loaded, try using full build of exifr.`)}var qD=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||V5(this.kind,e),t&amp;&amp;(e in t||function(n,o){hs(`Unknown ${n} '${o}'.`)}(this.kind,e),t[e].enabled||V5(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},Bp=new qD("file parser"),ps=new qD("segment parser"),Lp=new qD("file reader");function rke(r,e){return typeof r=="string"?pte(r,e):KD&amp;&amp;!JDe&amp;&amp;r instanceof HTMLImageElement?pte(r.src,e):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new Na(r):KD&amp;&amp;r instanceof Blob?j5(r,e,"blob",gy):void hs("Invalid input argument")}function pte(r,e){return(t=r).startsWith("data:")||t.length&gt;1e4?K5(r,e,"base64"):n2&amp;&amp;r.includes("://")?j5(r,e,"url",my):n2?K5(r,e,"fs"):KD?j5(r,e,"url",my):void hs("Invalid input argument");var t}async function j5(r,e,t,n){return Lp.has(t)?K5(r,e,t):n?async function(o,i){let s=await i(o);return new Na(s)}(r,n):void hs(`Parser ${t} is not loaded`)}async function K5(r,e,t){let n=new(Lp.get(t))(r,e);return await n.read(),n}var my=r=&gt;Z5(r).then(e=&gt;e.arrayBuffer()),gy=r=&gt;new Promise((e,t)=&gt;{let n=new FileReader;n.onloadend=()=&gt;e(n.result||new ArrayBuffer),n.onerror=t,n.readAsArrayBuffer(r)}),q5=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function Ki(r,e,t){let n=new q5;for(let[o,i]of t)n.set(o,i);if(Array.isArray(e))for(let o of e)r.set(o,n);else r.set(e,n);return n}function vy(r,e,t){let n,o=r.get(e);for(n of t)o.set(n[0],n[1])}var $s=new Map,xc=new Map,Xg=new Map,jg=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],QS=["jfif","xmp","icc","iptc","ihdr"],by=["tiff",...QS],Pi=["ifd0","ifd1","exif","gps","interop"],Kg=[...by,...Pi],qg=["makerNote","userComment"],JS=["translateKeys","translateValues","reviveValues","multiSegment"],Yg=[...JS,"sanitize","mergeOutput","silentErrors"],s2=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},cy=class extends s2{get needed(){return this.enabled||this.deps.size&gt;0}constructor(e,t,n,o){if(super(),Mr(this,"enabled",!1),Mr(this,"skip",new Set),Mr(this,"pick",new Set),Mr(this,"deps",new Set),Mr(this,"translateKeys",!1),Mr(this,"translateValues",!1),Mr(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(o),this.canBeFiltered=Pi.includes(e),this.canBeFiltered&amp;&amp;(this.dict=$s.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&amp;&amp;n.length&gt;0&amp;&amp;this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:s}=n;i&amp;&amp;i.length&gt;0&amp;&amp;this.translateTagSet(i,this.pick),s&amp;&amp;s.length&gt;0&amp;&amp;this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:hs(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of JS)n=e[t],n!==void 0&amp;&amp;(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,o,{tagKeys:i,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(o=s.indexOf(n),o===-1&amp;&amp;(o=i.indexOf(Number(n))),o!==-1&amp;&amp;t.add(Number(i[o]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&amp;&amp;this.deps.size&gt;0?(this.enabled=!0,a2(this.pick,this.deps)):this.enabled&amp;&amp;this.pick.size&gt;0&amp;&amp;a2(this.pick,this.deps)}},sl={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},hte=new Map,Tf=class extends s2{static useCached(e){let t=hte.get(e);return t!==void 0||(t=new this(e),hte.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):hs(`Invalid options argument ${e}`),this.firstChunkSize===void 0&amp;&amp;(this.firstChunkSize=KD?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&amp;&amp;(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of jg)this[e]=sl[e];for(e of Yg)this[e]=sl[e];for(e of qg)this[e]=sl[e];for(e of Kg)this[e]=new cy(e,sl[e],void 0,this)}setupFromTrue(){let e;for(e of jg)this[e]=sl[e];for(e of Yg)this[e]=sl[e];for(e of qg)this[e]=!0;for(e of Kg)this[e]=new cy(e,!0,void 0,this)}setupFromArray(e){let t;for(t of jg)this[t]=sl[t];for(t of Yg)this[t]=sl[t];for(t of qg)this[t]=sl[t];for(t of Kg)this[t]=new cy(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,Pi)}setupFromObject(e){let t;for(t of(Pi.ifd0=Pi.ifd0||Pi.image,Pi.ifd1=Pi.ifd1||Pi.thumbnail,Object.assign(this,e),jg))this[t]=z5(e[t],sl[t]);for(t of Yg)this[t]=z5(e[t],sl[t]);for(t of qg)this[t]=z5(e[t],sl[t]);for(t of by)this[t]=new cy(t,sl[t],e[t],this);for(t of Pi)this[t]=new cy(t,sl[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Pi,Kg),e.tiff===!0?this.batchEnableWithBool(Pi,!0):e.tiff===!1?this.batchEnableWithUserValue(Pi,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Pi):typeof e.tiff=="object"&amp;&amp;this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Pi)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let o=t[n];this[n].enabled=o!==!1&amp;&amp;o!==void 0}}setupGlobalFilters(e,t,n,o=n){if(e&amp;&amp;e.length){for(let s of o)this[s].enabled=!1;let i=fte(e,n);for(let[s,a]of i)a2(this[s].pick,a),this[s].enabled=!0}else if(t&amp;&amp;t.length){let i=fte(t,n);for(let[s,a]of i)a2(this[s].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:o,icc:i}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),o.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:o}=this;o.needed&amp;&amp;(t.deps.add(40965),e.deps.add(40965)),t.needed&amp;&amp;e.deps.add(34665),n.needed&amp;&amp;e.deps.add(34853),this.tiff.enabled=Pi.some(i=&gt;this[i].enabled===!0)||this.makerNote||this.userComment;for(let i of Pi)this[i].finalizeFilters()}get onlyTiff(){return!QS.map(e=&gt;this[e].enabled).some(e=&gt;e===!0)&amp;&amp;this.tiff.enabled}checkLoadedPlugins(){for(let e of by)this[e].enabled&amp;&amp;!ps.has(e)&amp;&amp;V5("segment parser",e)}};function fte(r,e){let t,n,o,i,s=[];for(o of e){for(i of(t=$s.get(o),n=[],t))(r.includes(i[0])||r.includes(i[1]))&amp;&amp;n.push(i[0]);n.length&amp;&amp;s.push([o,n])}return s}function z5(r,e){return r!==void 0?r:e!==void 0?e:void 0}function a2(r,e){for(let t of e)r.add(t)}Mr(Tf,"default",sl);var Rp=class{constructor(e){Mr(this,"parsers",{}),Mr(this,"output",{}),Mr(this,"errors",[]),Mr(this,"pushToErrors",t=&gt;this.errors.push(t)),this.options=Tf.useCached(e)}async read(e){this.file=await rke(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,o]of Bp)if(o.canHandle(e,t))return this.fileParser=new o(this.options,this.file,this.parsers),e[n]=!0;this.file.close&amp;&amp;this.file.close(),hs("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&amp;&amp;this.file.close(),this.options.silentErrors&amp;&amp;t.length&gt;0&amp;&amp;(e.errors=t),i2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async n=&gt;{let o=await n.parse();n.assignToOutput(e,o)});this.options.silentErrors&amp;&amp;(t=t.map(n=&gt;n.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=ps.get("tiff",e);var o;if(t.tiff?o={start:0,type:"tiff"}:t.jpeg&amp;&amp;(o=await this.fileParser.getOrFindSegment("tiff")),o===void 0)return;let i=await this.fileParser.ensureSegmentChunk(o),s=this.parsers.tiff=new n(i,e,t),a=await s.extractThumbnail();return t.close&amp;&amp;t.close(),a}};async function b2(r,e){let t=new Rp(e);return await t.read(r),t.parse()}var nke=Object.freeze({__proto__:null,parse:b2,Exifr:Rp,fileParsers:Bp,segmentParsers:ps,fileReaders:Lp,tagKeys:$s,tagValues:xc,tagRevivers:Xg,createDictionary:Ki,extendDictionary:vy,fetchUrlAsArrayBuffer:my,readBlobAsArrayBuffer:gy,chunkedProps:jg,otherSegments:QS,segments:by,tiffBlocks:Pi,segmentsAndBlocks:Kg,tiffExtractables:qg,inheritables:JS,allFormatters:Yg,Options:Tf}),qS=class{constructor(e,t,n){Mr(this,"errors",[]),Mr(this,"ensureSegmentChunk",async o=&gt;{let i=o.start,s=o.size||65536;if(this.file.chunked)if(this.file.available(i,s))o.chunk=this.file.subarray(i,s);else try{o.chunk=await this.file.readChunk(i,s)}catch(a){hs(`Couldn't read segment: ${JSON.stringify(o)}. ${a.message}`)}else this.file.byteLength&gt;i+s?o.chunk=this.file.subarray(i,s):o.size===void 0?o.chunk=this.file.subarray(i):hs("Segment unreachable: "+JSON.stringify(o));return o.chunk}),this.extendOptions&amp;&amp;this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&amp;&amp;this.createParser(e,t)}createParser(e,t){let n=new(ps.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:n,chunk:o}=t,i=this.options[n];if(i&amp;&amp;i.enabled){let s=this.parsers[n];s&amp;&amp;s.append||s||this.createParser(n,o)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}},Cu=class{static findPosition(e,t){let n=e.getUint16(t+2)+2,o=typeof this.headerLength=="function"?this.headerLength(e,t,n):this.headerLength,i=t+o,s=n-o;return{offset:t,length:n,headerLength:o,start:i,size:s,end:i+s}}static parse(e,t={}){return new this(e,new Tf({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Na?e:new Na(e)}constructor(e,t={},n){Mr(this,"errors",[]),Mr(this,"raw",new Map),Mr(this,"handleError",o=&gt;{if(!this.options.silentErrors)throw o;this.errors.push(o.message)}),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&amp;&amp;this.localOptions.translate}translate(){this.canTranslate&amp;&amp;(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=Xg.get(t),o=xc.get(t),i=$s.get(t),s=this.options[t],a=s.reviveValues&amp;&amp;!!n,l=s.translateValues&amp;&amp;!!o,u=s.translateKeys&amp;&amp;!!i,d={};for(let[c,p]of e)a&amp;&amp;n.has(c)?p=n.get(c)(p):l&amp;&amp;o.has(c)&amp;&amp;(p=this.translateValue(p,o.get(c))),u&amp;&amp;i.has(c)&amp;&amp;(c=i.get(c)||c),d[c]=p;return d}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}};Mr(Cu,"headerLength",4),Mr(Cu,"type",void 0),Mr(Cu,"multiSegment",!1),Mr(Cu,"canHandle",()=&gt;!1);function oke(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function ike(r){return r&gt;=224&amp;&amp;r&lt;=239}function ske(r,e,t){for(let[n,o]of ps)if(o.canHandle(r,e,t))return n}var l2=class extends qS{constructor(...e){super(...e),Mr(this,"appSegments",[]),Mr(this,"jpegSegments",[]),Mr(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ps.keyList())):(e=e===void 0?ps.keyList().filter(t=&gt;this.options[t].enabled):e.filter(t=&gt;this.options[t].enabled&amp;&amp;ps.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:n,findAll:o,wanted:i,remaining:s}=this;if(!o&amp;&amp;this.file.chunked&amp;&amp;(o=Array.from(i).some(a=&gt;{let l=ps.get(a),u=this.options[a];return l.multiSegment&amp;&amp;u.multiSegment}),o&amp;&amp;await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&amp;&amp;n.chunked){let a=!1;for(;s.size&gt;0&amp;&amp;!a&amp;&amp;(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=n,u=this.appSegments.some(d=&gt;!this.file.available(d.offset||d.start,d.length||d.size));if(a=e&gt;l&amp;&amp;!u?!await n.readNextChunk(e):!await n.readNextChunk(l),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let n,o,i,s,a,l,{file:u,findAll:d,wanted:c,remaining:p,options:h}=this;for(;e&lt;t;e++)if(u.getUint8(e)===255){if(n=u.getUint8(e+1),ike(n)){if(o=u.getUint16(e+2),i=ske(u,e,o),i&amp;&amp;c.has(i)&amp;&amp;(s=ps.get(i),a=s.findPosition(u,e),l=h[i],a.type=i,this.appSegments.push(a),!d&amp;&amp;(s.multiSegment&amp;&amp;l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber&lt;a.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),p.size===0)))break;h.recordUnknownSegments&amp;&amp;(a=Cu.findPosition(u,e),a.marker=n,this.unknownSegments.push(a)),e+=o+1}else if(oke(n)){if(o=u.getUint16(e+2),n===218&amp;&amp;h.stopAfterSos!==!1)return;h.recordJpegSegments&amp;&amp;this.jpegSegments.push({offset:e,length:o,marker:n}),e+=o+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=&gt;t.multiSegment))return;let e=function(t,n){let o,i,s,a=new Map;for(let l=0;l&lt;t.length;l++)o=t[l],i=o[n],a.has(i)?s=a.get(i):a.set(i,s=[]),s.push(o);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,n])=&gt;{let o=ps.get(t,this.options);return o.handleMultiSegments?{type:t,chunk:o.handleMultiSegments(n)}:n[0]})}getSegment(e){return this.appSegments.find(t=&gt;t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&amp;&amp;(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}};Mr(l2,"type","jpeg"),Bp.set("jpeg",l2);var ake=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Y5=class extends Cu{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&amp;&amp;(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,n=new Map){let{pick:o,skip:i}=this.options[t];o=new Set(o);let s=o.size&gt;0,a=i.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u&lt;l;u++){let d=this.chunk.getUint16(e);if(s){if(o.has(d)&amp;&amp;(n.set(d,this.parseTag(e,d,t)),o.delete(d),o.size===0))break}else!a&amp;&amp;i.has(d)||n.set(d,this.parseTag(e,d,t));e+=12}return n}parseTag(e,t,n){let{chunk:o}=this,i=o.getUint16(e+2),s=o.getUint32(e+4),a=ake[i];if(a*s&lt;=4?e+=8:e=o.getUint32(e+8),(i&lt;1||i&gt;13)&amp;&amp;hs(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e}`),e&gt;o.byteLength&amp;&amp;hs(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${o.byteLength}`),i===1)return o.getUint8Array(e,s);if(i===2)return py(o.getString(e,s));if(i===7)return o.getUint8Array(e,s);if(s===1)return this.parseTagValue(i,e);{let l=new(function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(i))(s),u=a;for(let d=0;d&lt;s;d++)l[d]=this.parseTagValue(i,e),e+=u;return l}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);case 13:return n.getUint32(t);default:hs(`Invalid tiff type ${e}`)}}},WD=class extends Y5{static canHandle(e,t){return e.getUint8(t+1)===225&amp;&amp;e.getUint32(t+4)===1165519206&amp;&amp;e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&amp;&amp;await this.parseIfd0Block(),e.exif.enabled&amp;&amp;await this.safeParse("parseExifBlock"),e.gps.enabled&amp;&amp;await this.safeParse("parseGpsBlock"),e.interop.enabled&amp;&amp;await this.safeParse("parseInteropBlock"),e.ifd1.enabled&amp;&amp;await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&amp;&amp;(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&amp;&amp;(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset&lt;8&amp;&amp;hs("Malformed EXIF data"),!e.chunked&amp;&amp;this.ifd0Offset&gt;e.byteLength&amp;&amp;hs(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&amp;&amp;await e.ensureChunk(this.ifd0Offset,W5(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&amp;&amp;(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&amp;&amp;await this.file.ensureChunk(this.exifOffset,W5(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&amp;&amp;(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&amp;&amp;n.length===1&amp;&amp;e.set(t,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&amp;&amp;e.has(2)&amp;&amp;e.has(4)&amp;&amp;(e.set("latitude",mte(...e.get(2),e.get(1))),e.set("longitude",mte(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&amp;&amp;(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&amp;&amp;!this.ifd1Parsed&amp;&amp;(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset&gt;0&amp;&amp;(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,o={};for(t of Pi)if(e=this[t],!Tte(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(o,n)}else o[t]=n;return this.makerNote&amp;&amp;(o.makerNote=this.makerNote),this.userComment&amp;&amp;(o.userComment=this.userComment),o}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,o]of Object.entries(t))this.assignObjectToOutput(e,n,o)}};function mte(r,e,t,n){var o=r+e/60+t/3600;return n!=="S"&amp;&amp;n!=="W"||(o*=-1),o}Mr(WD,"type","tiff"),Mr(WD,"headerLength",10),ps.set("tiff",WD);var lke=Object.freeze({__proto__:null,default:nke,Exifr:Rp,fileParsers:Bp,segmentParsers:ps,fileReaders:Lp,tagKeys:$s,tagValues:xc,tagRevivers:Xg,createDictionary:Ki,extendDictionary:vy,fetchUrlAsArrayBuffer:my,readBlobAsArrayBuffer:gy,chunkedProps:jg,otherSegments:QS,segments:by,tiffBlocks:Pi,segmentsAndBlocks:Kg,tiffExtractables:qg,inheritables:JS,allFormatters:Yg,Options:Tf,parse:b2}),e8={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},t8=Object.assign({},e8,{firstChunkSize:4e4,gps:[1,2,3,4]});async function kte(r){let e=new Rp(t8);await e.read(r);let t=await e.parse();if(t&amp;&amp;t.gps){let{latitude:n,longitude:o}=t.gps;return{latitude:n,longitude:o}}}var r8=Object.assign({},e8,{tiff:!1,ifd1:!0,mergeOutput:!1});async function Pte(r){let e=new Rp(r8);await e.read(r);let t=await e.extractThumbnail();return t&amp;&amp;v2?g2.from(t):t}async function Ate(r){let e=await this.thumbnail(r);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}var n8=Object.assign({},e8,{firstChunkSize:4e4,ifd0:[274]});async function o8(r){let e=new Rp(n8);await e.read(r);let t=await e.parse();if(t&amp;&amp;t.ifd0)return t.ifd0[274]}var i8=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),hy=!0,fy=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,n]=e;hy=Number(t)+.1*Number(n)&lt;13.4,fy=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);hy=fy=Number(e)&lt;15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);hy=fy=Number(e)&lt;81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);hy=fy=Number(e)&lt;77}}async function Ite(r){let e=await o8(r);return Object.assign({canvas:hy,css:fy},i8[e])}var X5=class extends Na{constructor(...e){super(...e),Mr(this,"ranges",new Q5),this.byteLength!==0&amp;&amp;this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(e===0&amp;&amp;this.byteLength===0&amp;&amp;n){let o=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(o)}else{let o=e+t;if(o&gt;this.byteLength){let{dataView:i}=this._extend(o);this._swapDataView(i)}}}_extend(e){let t;t=v2?g2.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t,n=!1){return t=t||this._lengthToEnd(e),n&amp;&amp;this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,n=!1){n&amp;&amp;this._tryExtend(t,e.byteLength,e);let o=super.set(e,t);return this.ranges.add(t,o.byteLength),o}async ensureChunk(e,t){this.chunked&amp;&amp;(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}},Q5=class{constructor(){Mr(this,"list",[])}get length(){return this.list.length}add(e,t,n=0){let o=e+t,i=this.list.filter(s=&gt;gte(e,s.offset,o)||gte(e,s.end,o));if(i.length&gt;0){e=Math.min(e,...i.map(a=&gt;a.offset)),o=Math.max(o,...i.map(a=&gt;a.end)),t=o-e;let s=i.shift();s.offset=e,s.length=t,s.end=o,this.list=this.list.filter(a=&gt;!i.includes(a))}else this.list.push({offset:e,length:t,end:o})}available(e,t){let n=e+t;return this.list.some(o=&gt;o.offset&lt;=e&amp;&amp;n&lt;=o.end)}};function gte(r,e,t){return r&lt;=e&amp;&amp;e&lt;=t}var YS=class extends X5{constructor(e,t){super(0),Mr(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&amp;&amp;n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&amp;&amp;e+t&gt;this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead&lt;this.options.chunkLimit}get fullyRead(){return this.size!==void 0&amp;&amp;this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Lp.set("blob",class extends YS{async readWhole(){this.chunked=!1;let r=await gy(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,e){let t=e?r+e:void 0,n=this.input.slice(r,t),o=await gy(n);return this.set(o,r,!0)}});var uke=Object.freeze({__proto__:null,default:lke,Exifr:Rp,fileParsers:Bp,segmentParsers:ps,fileReaders:Lp,tagKeys:$s,tagValues:xc,tagRevivers:Xg,createDictionary:Ki,extendDictionary:vy,fetchUrlAsArrayBuffer:my,readBlobAsArrayBuffer:gy,chunkedProps:jg,otherSegments:QS,segments:by,tiffBlocks:Pi,segmentsAndBlocks:Kg,tiffExtractables:qg,inheritables:JS,allFormatters:Yg,Options:Tf,parse:b2,gpsOnlyOptions:t8,gps:kte,thumbnailOnlyOptions:r8,thumbnail:Pte,thumbnailUrl:Ate,orientationOnlyOptions:n8,orientation:o8,rotations:i8,get rotateCanvas(){return hy},get rotateCss(){return fy},rotation:Ite});Lp.set("url",class extends YS{async readWhole(){this.chunked=!1;let r=await my(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&amp;&amp;this._swapBuffer(r)}async _readChunk(r,e){let t=e?r+e-1:void 0,n=this.options.httpHeaders||{};(r||t)&amp;&amp;(n.range=`bytes=${[r,t].join("-")}`);let o=await Z5(this.input,{headers:n}),i=await o.arrayBuffer(),s=i.byteLength;if(o.status!==416)return s!==e&amp;&amp;(this.size=r+s),this.set(i,r,!0)}});Na.prototype.getUint64=function(r){let e=this.getUint32(r),t=this.getUint32(r+4);return e&lt;1048575?e&lt;&lt;32|t:typeof t2!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),t2(e)&lt;&lt;t2(32)|t2(t)):void hs("Trying to read 64b value but JS can only handle 53b numbers.")};var J5=class extends qS{parseBoxes(e=0){let t=[];for(;e&lt;this.file.byteLength-4;){let n=this.parseBoxHead(e);if(t.push(n),n.length===0)break;e+=n.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&amp;&amp;this.parseSubBoxes(e),e.boxes.find(n=&gt;n.kind===t)}parseBoxHead(e){let t=this.file.getUint32(e),n=this.file.getString(e+4,4),o=e+8;return t===1&amp;&amp;(t=this.file.getUint64(e+8),o+=8),{offset:e,length:t,kind:n,start:o}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t&gt;&gt;24,e.start+=4}},u2=class extends J5{static canHandle(e,t){if(t!==0)return!1;let n=e.getUint16(2);if(n&gt;50)return!1;let o=16,i=[];for(;o&lt;n;)i.push(e.getString(o,4)),o+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&amp;&amp;await this.findIcc(t),this.options.tiff.enabled&amp;&amp;await this.findExif(t)}async registerSegment(e,t,n){await this.file.ensureChunk(t,n);let o=this.file.subarray(t,n);this.createParser(e,o)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let n=this.findBox(t,"ipco");if(n===void 0)return;let o=this.findBox(n,"colr");o!==void 0&amp;&amp;await this.registerSegment("icc",o.offset+12,o.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let o=this.findExifLocIdInIinf(t),i=this.findExtentInIloc(n,o);if(i===void 0)return;let[s,a]=i;await this.file.ensureChunk(s,a);let l=4+this.file.getUint32(s);s+=l,a-=l,await this.registerSegment("tiff",s,a)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,n,o,i,s=e.start,a=this.file.getUint16(s);for(s+=2;a--;){if(t=this.parseBoxHead(s),this.parseBoxFullHead(t),n=t.start,t.version&gt;=2&amp;&amp;(o=t.version===3?4:2,i=this.file.getString(n+o+2,4),i==="Exif"))return this.file.getUintBytes(n,o);s+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t&gt;&gt;4,15&amp;t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let n=e.start,[o,i]=this.get8bits(n++),[s,a]=this.get8bits(n++),l=e.version===2?4:2,u=e.version===1||e.version===2?2:0,d=a+o+i,c=e.version===2?4:2,p=this.file.getUintBytes(n,c);for(n+=c;p--;){let h=this.file.getUintBytes(n,l);n+=l+u+2+s;let f=this.file.getUint16(n);if(n+=2,h===t)return f&gt;1&amp;&amp;console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+a,o),this.file.getUintBytes(n+a+o,i)];n+=f*d}}},d2=class extends u2{};Mr(d2,"type","heic");var c2=class extends u2{};Mr(c2,"type","avif"),Bp.set("heic",d2),Bp.set("avif",c2),Ki($s,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Ki($s,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Ki($s,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Ki(xc,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);var $D=Ki(xc,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),vte={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};$D.set(37392,vte),$D.set(41488,vte);var H5={0:"Normal",1:"Low",2:"High"};function bte(r){return typeof r=="object"&amp;&amp;r.length!==void 0?r[0]:r}function yte(r){let e=Array.from(r).slice(1);return e[1]&gt;15&amp;&amp;(e=e.map(t=&gt;String.fromCharCode(t))),e[2]!=="0"&amp;&amp;e[2]!==0||e.pop(),e.join(".")}function G5(r){if(typeof r=="string"){var[e,t,n,o,i,s]=r.trim().split(/[-: ]/g).map(Number),a=new Date(e,t-1,n);return Number.isNaN(o)||Number.isNaN(i)||Number.isNaN(s)||(a.setHours(o),a.setMinutes(i),a.setSeconds(s)),Number.isNaN(+a)?r:a}}function GD(r){if(typeof r=="string")return r;let e=[];if(r[1]===0&amp;&amp;r[r.length-1]===0)for(let t=0;t&lt;r.length;t+=2)e.push(Cte(r[t+1],r[t]));else for(let t=0;t&lt;r.length;t+=2)e.push(Cte(r[t],r[t+1]));return py(String.fromCodePoint(...e))}function Cte(r,e){return r&lt;&lt;8|e}$D.set(41992,H5),$D.set(41993,H5),$D.set(41994,H5),Ki(Xg,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?Dte(r):r}],[306,G5],[40091,GD],[40092,GD],[40093,GD],[40094,GD],[40095,GD]]),Ki(Xg,"exif",[[40960,yte],[36864,yte],[36867,G5],[36868,G5],[40962,bte],[40963,bte]]),Ki(Xg,"gps",[[0,r=&gt;Array.from(r).join(".")],[7,r=&gt;Array.from(r).join(":")]]);var VD=class extends Cu{static canHandle(e,t){return e.getUint8(t+1)===225&amp;&amp;e.getUint32(t+4)===1752462448&amp;&amp;e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:4+28+1}static findPosition(e,t){let n=super.findPosition(e,t);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&amp;&amp;n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map(t=&gt;t.chunk.getString()).join("")}normalizeInput(e){return typeof e=="string"?e:Na.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(i){let s={},a={};for(let l of Mte)s[l]=[],a[l]=0;return i.replace(hke,(l,u,d)=&gt;{if(u==="&lt;"){let c=++a[d];return s[d].push(c),`${l}#${c}`}return`${l}#${s[d].pop()}`})}(e);let t=Qg.findAll(e,"rdf","Description");t.length===0&amp;&amp;t.push(new Qg("rdf","Description",void 0,e));let n,o={};for(let i of t)for(let s of i.properties)n=pke(s.ns,o),Ete(s,n);return function(i){let s;for(let a in i)s=i[a]=i2(i[a]),s===void 0&amp;&amp;delete i[a];return i2(i)}(o)}assignToOutput(e,t){if(this.localOptions.parse)for(let[n,o]of Object.entries(t))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",o);break;case"exif":this.assignObjectToOutput(e,"exif",o);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,o)}else e.xmp=t}};Mr(VD,"type","xmp"),Mr(VD,"multiSegment",!0),ps.set("xmp",VD);var XS=class{static findAll(e){return _te(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(XS.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],o=e[3].slice(1,-1);return o=Fte(o),new XS(t,n,o)}constructor(e,t,n){this.ns=e,this.name=t,this.value=n}serialize(){return this.value}},Qg=class{static findAll(e,t,n){if(t!==void 0||n!==void 0){t=t||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var o=new RegExp(`&lt;(${t}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/&gt;|&gt;([\\s\\S]*?)&lt;\\/\\1:\\2\\3&gt;)`,"gm")}else o=/&lt;([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/&gt;|&gt;([\s\S]*?)&lt;\/\1:\2\3&gt;)/gm;return _te(e,o).map(Qg.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],o=e[4],i=e[8];return new Qg(t,n,o,i)}constructor(e,t,n,o){this.ns=e,this.name=t,this.attrString=n,this.innerXml=o,this.attrs=XS.findAll(n),this.children=Qg.findAll(o),this.value=this.children.length===0?Fte(o):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&amp;&amp;this.attrs.length===0&amp;&amp;this.children.length===0}get isListContainer(){return this.children.length===1&amp;&amp;this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&amp;&amp;(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&amp;&amp;this.name==="li"}serialize(){if(this.properties.length===0&amp;&amp;this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return cke(this.children.map(dke));if(this.isListItem&amp;&amp;this.children.length===1&amp;&amp;this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)Ete(t,e);return this.value!==void 0&amp;&amp;(e.value=this.value),i2(e)}};function Ete(r,e){let t=r.serialize();t!==void 0&amp;&amp;(e[r.name]=t)}var dke=r=&gt;r.serialize(),cke=r=&gt;r.length===1?r[0]:r,pke=(r,e)=&gt;e[r]?e[r]:e[r]={};function _te(r,e){let t,n=[];if(!r)return n;for(;(t=e.exec(r))!==null;)n.push(t);return n}function Fte(r){if(function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""}(r))return;let e=Number(r);if(!Number.isNaN(e))return e;let t=r.toLowerCase();return t==="true"||t!=="false"&amp;&amp;r.trim()}var Mte=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],hke=new RegExp(`(&lt;|\\/)(${Mte.join("|")})`,"g"),fke=Object.freeze({__proto__:null,default:uke,Exifr:Rp,fileParsers:Bp,segmentParsers:ps,fileReaders:Lp,tagKeys:$s,tagValues:xc,tagRevivers:Xg,createDictionary:Ki,extendDictionary:vy,fetchUrlAsArrayBuffer:my,readBlobAsArrayBuffer:gy,chunkedProps:jg,otherSegments:QS,segments:by,tiffBlocks:Pi,segmentsAndBlocks:Kg,tiffExtractables:qg,inheritables:JS,allFormatters:Yg,Options:Tf,parse:b2,gpsOnlyOptions:t8,gps:kte,thumbnailOnlyOptions:r8,thumbnail:Pte,thumbnailUrl:Ate,orientationOnlyOptions:n8,orientation:o8,rotations:i8,get rotateCanvas(){return hy},get rotateCss(){return fy},rotation:Ite});var Ste=o2("fs",r=&gt;r.promises);Lp.set("fs",class extends YS{async readWhole(){this.chunked=!1,this.fs=await Ste;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await Ste,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&amp;&amp;(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,e){this.fh===void 0&amp;&amp;await this.open(),r+e&gt;this.size&amp;&amp;(e=this.size-r);var t=this.subarray(r,e,!0);return await this.fh.read(t.dataView,0,e,r),t}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});Lp.set("base64",class extends YS{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&amp;&amp;(this.size-=1)}async _readChunk(r,e){let t,n,o=this.input;r===void 0?(r=0,t=0,n=0):(t=4*Math.floor(r/3),n=r-t/4*3),e===void 0&amp;&amp;(e=this.size);let i=r+e,s=t+4*Math.ceil(i/3);o=o.slice(t,s);let a=Math.min(e,this.size-r);if(v2){let l=g2.from(o,"base64").slice(n,n+a);return this.set(l,r,!0)}{let l=this.subarray(r,a,!0),u=atob(o),d=l.toUint8();for(let c=0;c&lt;a;c++)d[c]=u.charCodeAt(n+c);return l}}});var p2=class extends qS{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:n,iptc:o,icc:i}=e;n.enabled&amp;&amp;t.deps.add(700),o.enabled&amp;&amp;t.deps.add(33723),i.enabled&amp;&amp;t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:n,icc:o}=this.options;if(e.enabled||t.enabled||n.enabled||o.enabled){let i=Math.max(W5(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}};Mr(p2,"type","tiff"),Bp.set("tiff",p2);var mke=o2("zlib"),gke=["ihdr","iccp","text","itxt","exif"],h2=class extends qS{constructor(...e){super(...e),Mr(this,"catchError",t=&gt;this.errors.push(t)),Mr(this,"metaChunks",[]),Mr(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&amp;&amp;e.getUint32(0)===2303741511&amp;&amp;e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:n}=this;for(;e&lt;t;){let o=n.getUint32(e),i=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),a=o+4+4+4,l={type:s,offset:e,length:a,start:e+4+4,size:o,marker:i};gke.includes(s)?this.metaChunks.push(l):this.unknownChunks.push(l),e+=a}}parseTextChunks(){let e=this.metaChunks.filter(t=&gt;t.type==="text");for(let t of e){let[n,o]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(n,o)}}injectKeyValToIhdr(e,t){let n=this.parsers.ihdr;n&amp;&amp;n.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find(t=&gt;t.type==="ihdr");e&amp;&amp;this.options.ihdr.enabled!==!1&amp;&amp;this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find(t=&gt;t.type==="exif");e&amp;&amp;this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter(t=&gt;t.type==="itxt");for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&amp;&amp;this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find(a=&gt;a.type==="iccp");if(!e)return;let{chunk:t}=e,n=t.getUint8Array(0,81),o=0;for(;o&lt;80&amp;&amp;n[o]!==0;)o++;let i=o+2,s=t.getString(0,o);if(this.injectKeyValToIhdr("ProfileName",s),n2){let a=await mke,l=t.getUint8Array(i);l=a.inflateSync(l),this.injectSegment("icc",l)}}};Mr(h2,"type","png"),Bp.set("png",h2),Ki($s,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),vy($s,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);var xte=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];vy($s,"ifd0",xte),vy($s,"exif",xte),Ki(xc,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);var jD=class extends Cu{static canHandle(e,t){return e.getUint8(t+1)===224&amp;&amp;e.getUint32(t+4)===1246120262&amp;&amp;e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}};Mr(jD,"type","jfif"),Mr(jD,"headerLength",9),ps.set("jfif",jD),Ki($s,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);var f2=class extends Cu{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}};Mr(f2,"type","ihdr"),ps.set("ihdr",f2),Ki($s,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Ki(xc,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);var KS=class extends Cu{static canHandle(e,t){return e.getUint8(t+1)===226&amp;&amp;e.getUint32(t+4)===1229144927}static findPosition(e,t){let n=super.findPosition(e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount&gt;1,n}static handleMultiSegments(e){return function(t){let n=function(o){let i=o[0].constructor,s=0;for(let u of o)s+=u.length;let a=new i(s),l=0;for(let u of o)a.set(u,l),l+=u.length;return a}(t.map(o=&gt;o.chunk.toUint8()));return new Na(n)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength&lt;84&amp;&amp;hs("ICC header is too short");for(let[t,n]of Object.entries(vke)){t=parseInt(t,10);let o=n(this.chunk,t);o!=="\0\0\0\0"&amp;&amp;e.set(t,o)}}parseTags(){let e,t,n,o,i,{raw:s}=this,a=this.chunk.getUint32(128),l=132,u=this.chunk.byteLength;for(;a--;){if(e=this.chunk.getString(l,4),t=this.chunk.getUint32(l+4),n=this.chunk.getUint32(l+8),o=this.chunk.getString(t,4),t+n&gt;u)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(o,t,n),i!==void 0&amp;&amp;i!=="\0\0\0\0"&amp;&amp;s.set(e,i),l+=12}}parseTag(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n&gt;this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return py(this.chunk.getString(e+12,t))}parseText(e,t){return py(this.chunk.getString(e+8,t-8))}parseSig(e){return py(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,n=t.getUint32(e+8),o=t.getUint32(e+12),i=e+16,s=[];for(let a=0;a&lt;n;a++){let l=t.getString(i+0,2),u=t.getString(i+2,2),d=t.getUint32(i+4),c=t.getUint32(i+8)+e,p=py(t.getUnicodeString(c,d));s.push({lang:l,country:u,text:p}),i+=o}return n===1?s[0].text:s}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}};Mr(KS,"type","icc"),Mr(KS,"multiSegment",!0),Mr(KS,"headerLength",18);var vke={4:wf,8:function(r,e){return[r.getUint8(e),r.getUint8(e+1)&gt;&gt;4,r.getUint8(e+1)%16].map(t=&gt;t.toString(10)).join(".")},12:wf,16:wf,20:wf,24:function(r,e){let t=r.getUint16(e),n=r.getUint16(e+2)-1,o=r.getUint16(e+4),i=r.getUint16(e+6),s=r.getUint16(e+8),a=r.getUint16(e+10);return new Date(Date.UTC(t,n,o,i,s,a))},36:wf,40:wf,48:wf,52:wf,64:(r,e)=&gt;r.getUint32(e),80:wf};function wf(r,e){return py(r.getString(e,4))}ps.set("icc",KS),Ki($s,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);var r2={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&amp;T":"AT&amp;T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&amp;C":"Digital Light &amp; Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau &amp; Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},wte={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Ki(xc,"icc",[[4,r2],[12,wte],[40,Object.assign({},r2,wte)],[48,r2],[80,r2],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);var jS=class extends Cu{static canHandle(e,t,n){return e.getUint8(t+1)===237&amp;&amp;e.getString(t+4,9)==="Photoshop"&amp;&amp;this.containsIptc8bim(e,t,n)!==void 0}static headerLength(e,t,n){let o,i=this.containsIptc8bim(e,t,n);if(i!==void 0)return o=e.getUint8(t+i+7),o%2!=0&amp;&amp;(o+=1),o===0&amp;&amp;(o=4),i+8+o}static containsIptc8bim(e,t,n){for(let o=0;o&lt;n;o++)if(this.isIptcSegmentHead(e,t+o))return o}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&amp;&amp;e.getUint32(t)===943868237&amp;&amp;e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,n=!1;for(let o=0;o&lt;t;o++)if(this.chunk.getUint8(o)===28&amp;&amp;this.chunk.getUint8(o+1)===2){n=!0;let i=this.chunk.getUint16(o+3),s=this.chunk.getUint8(o+2),a=this.chunk.getLatin1String(o+5,i);e.set(s,this.pluralizeValue(e.get(s),a)),o+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}};Mr(jS,"type","iptc"),Mr(jS,"translateValues",!1),Mr(jS,"reviveValues",!1),ps.set("iptc",jS),Ki($s,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Ki(xc,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);var Nte=fke;var ki=class{constructor(e,t,n,o,i){this.image=e;this.extension=t;this.name=n;this.contentType=o;this.file=i;this.thumbnailType=o==="image/jpeg"?"image/jpeg":"image/png"}static async fromFile(e){let t=ha(e);if(!x1(t))throw new Error("non image file: "+t);let n=URL.createObjectURL(e);try{return new ki(await tl({url:n}),Zo.get(t),e.name,t,e)}finally{URL.revokeObjectURL(n)}}static async fromObjectURL(e,t){if(!x1(t))throw new Error("non image file: "+t);let n=Zo.get(t),o=`captured${n}`;return new ki(await tl({url:e}),n,o,t,await VS(e,o,t))}getLayoutSize(){return[br(this.image,kt)]}insert(e){return mS({position:e.position,author:{id:e.user.user_id,name:zt(e.user)},contentSize:$e(this.image),asset:{description:this.name,extension:this.extension},startPosition:e.startPosition})}toCards({parent:e,position:t,user:n}){let o=e?Eo(e.size):1;return[sf({scaleToParent:o,position:t,author:{id:n.user_id,name:zt(n)},contentSize:$e(this.image),asset:{description:this.name,extension:this.extension}})]}getMetadata(){return[{width:this.image.width,height:this.image.height}]}async*generateThumbnails(){yield e2(this.image,this.thumbnailType)}async generateHeadThumbnail(){return this.image}};async function Bte(r){let e=await Nte.orientation(r).catch(()=&gt;{});return e===void 0&amp;&amp;(e=0),{image:r,orientation:e}}function Rte(r){let e=new ft;switch(r){case 2:e.scale(-1,1);break;case 3:e.scale(-1,-1);break;case 4:e.scale(1,-1);break;case 5:e.rotate(90,"deg").scale(-1,1);break;case 6:e.rotate(90,"deg");break;case 7:e.rotate(-90,"deg").scale(-1,1);break;case 8:e.rotate(-90,"deg");break}return e}function Lte(r,e){switch(e){case 5:case 6:case 7:case 8:return $e(r.height,r.width);default:return r}}var Ute=oe(Ote());function zte(r){let e=new Ute.UAParser(r),t=e.getBrowser();if(!t||!t.version)return!1;let n=parseFloat(t.version);switch(t.name){case"Chrome":return n&gt;=81;case"Safari":return n&gt;=13.1;case"Firefox":return n&gt;=76;case"Edge":let o=e.getOS();if(o.name==="Windows"||o.name==="Mac OS")return n&gt;=81;if(o.name==="Android")return!1;if(o.name==="iOS")return!1;break}return!1}function ZS(r){return xke()&amp;&amp;!r.type.includes("svg")?createImageBitmap(r):new Promise((e,t)=&gt;{let n=URL.createObjectURL(r),o=new Image;o.addEventListener("load",()=&gt;e(o)),o.addEventListener("error",t),o.src=n})}async function cF(r){return new Promise((e,t)=&gt;{let n=new FileReader;n.onload=()=&gt;{n.result instanceof ArrayBuffer?e(n.result):t(new Error("failed to read"))},n.onerror=()=&gt;{t(n.error)},n.readAsArrayBuffer(r)})}async function gD({url:r,maxRetryCount:e=5,signal:t}){let n=await W_({url:r,maxRetryCount:e,signal:t});if(n)return n=await s8(n),n;throw new Error("retry failed")}function bke(r,e,t,n,o,i,s){let a=Rte(t);if(a.isIdentity)r.drawImage(e,n,o,i,s);else{r.save();let l=ds(e,{width:i,height:s});r.translate(n+i/2,o+s/2),r.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),r.scale(l,l),r.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),r.restore()}}async function s8(r){let e=await Bte(r),{image:t,orientation:n}=e,o=navigator.userAgent;return zte(o)||n&lt;2?t:ZS(t).then(s=&gt;{let a=Lte(s,n),l=fr.create(a.width,a.height),u=l.getContext2dForce();return bke(u,s,n,0,0,a.width,a.height),C2(l,"image/jpeg",1)})}async function tl(r){return gD(r).then(ZS)}async function io(r,e,t){let n=await Cke(r,e,1);return new File([n],t,{type:e})}function yke(r){let e;if(r instanceof HTMLCanvasElement)e=r;else{let t=fr.create();r instanceof HTMLVideoElement?(t.width=r.videoWidth,t.height=r.videoHeight):(t.width=r.width,t.height=r.height),t.getContext2dForce().drawImage(r,0,0),e=t}return e}async function Cke(r,e,t){let n=await C2(r,e,t);return typeof n.arrayBuffer=="function"?n.arrayBuffer():new Promise((o,i)=&gt;{let s=new FileReader;s.onload=()=&gt;{let a=s.result;o(a)},s.onerror=i,s.readAsArrayBuffer(n)})}async function C2(r,e,t){let n=yke(r);return new Promise((o,i)=&gt;{n.toBlob(s=&gt;{s?o(s):i()},e,t?it(t,0,1):void 0)})}function cs(r,e){if(kr(r)&lt;=kr(e)){let n=fr.create(e);return n.getContext2dForce().drawImage(r,0,0,e.width,e.height),n}return Ske(r,e)}function Ske(r,e){let t=r.width,n=r.height,o;t&gt;n?o=Math.ceil(Math.log2(t/e.width)):o=Math.ceil(Math.log2(n/e.height));let i=r;for(let l=0;l&lt;o-1;l++){let u={width:i.width*.5,height:i.height*.5},d=fr.create(u);d.getContext2dForce().drawImage(i,0,0,u.width,u.height),i=d}let s=fr.create(e);return s.getContext2dForce().drawImage(i,0,0,e.width,e.height),s}var Hte="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";function xke(){return typeof globalThis.ImageBitmap!="undefined"&amp;&amp;typeof globalThis.createImageBitmap!="undefined"}function S2(r,e){let t=fr.create(r.height,r.width),n=t.getContext2dForce();n.save(),n.translate(t.width/2,t.height/2);let o=e==="left"?-1:1;return n.rotate(o*Math.PI/2),n.drawImage(r,-r.width/2,-r.height/2),n.restore(),t}function x2(r){let e=/^data:image\/png;base64,/;if(!RegExp(e).test(r))throw Error("Unmatched base64-png-image when decoding string.");let t=atob(r.replace(e,""));for(var n=new Uint8Array(t.length),o=0;o&lt;t.length;o++)n[o]=t.charCodeAt(o);return new File([n],"file_image.png",{type:"image/png"})}function Gte(r){return r instanceof md&amp;&amp;r.content.asset==null||r instanceof Vo&amp;&amp;r.content.asset==null||r.type==="quiz"||r.type==="attendance"}function a8(r){if(r instanceof md&amp;&amp;!r.content.asset)return Ot.mapCardPlaceholder.getOrLoad();if(r instanceof Vo&amp;&amp;!r.content.asset)return Ot.webCardPlaceholder.getOrLoad();if(r instanceof jr)switch(r.content.preset){case"test":return Ot.quizCardTestPlaceholder.getOrLoad();case"survey":return Ot.quizCardSurveyPlaceholder.getOrLoad()}else if(r instanceof wn)return Ot.atndCardPlaceholder.getOrLoad()}var wke=["picture","video","map","web","pdf"];function w2(r){return wke.includes(r.type)&amp;&amp;r.contentAssetId()!=null||!!a8(r)}var T2=class{constructor(e){this.id=e;this.fetcher=new Sg(()=&gt;new Us((e,t)=&gt;this._fetch(e,t),{delay:1,unit:6e4}));this._revokeRequiredUrls=[]}static get(e){return T2.instances.get(e)}invalidate(){this.fetcher.invalidate(),this.revokeCachedUrl()}async load(e){let t=await this.fetch(e);if(t)return tl({url:t})}async fetch(e){let t=await this.fetcher.current.fetch(e,e.signal);if(t.type==="success")return t.value;if(t.type==="error")throw t.error}async _fetch({skipForKnown404Url:e=!1,maxRetryCount:t,url:n},o){if(!(e&amp;&amp;await ie.idb.booleans.urlNotFound(n)))try{let i=await gD({url:n,maxRetryCount:t,signal:o});this.revokeCachedUrl();let s=URL.createObjectURL(i);return this.setCachedUrl(s)}catch(i){throw i instanceof sr&amp;&amp;i.status===404&amp;&amp;await ie.idb.booleans.putUrlNotFound(n),i}}cachedUrl(){return this._cachedUrl}revokeCachedUrl(){this._cachedUrl&amp;&amp;this._revokeRequiredUrls.push(this._cachedUrl),this._cachedUrl=void 0}setCachedUrl(e){for(let t of this._revokeRequiredUrls)URL.revokeObjectURL(t);return this._revokeRequiredUrls=[],this._cachedUrl=e,e}async toUrl(e){var t;return(t=this._cachedUrl)!=null?t:this.fetch(e)}},Su=T2;Su.instances=new Fn(e=&gt;new T2(e));var D2=class extends vS{async loadInternal(e,t,n){let o=a8(t);if(o)return{image:o};if(e==="small"||e==="medium"){let i=ie.res.cardThumbUrl(t,e);if(i){let s=Su.get(i);n&amp;&amp;s.invalidate();let a=await s.load({url:i});if(a)return{image:a}}}else if(e==="high"&amp;&amp;mo.getMaxLevelForCard(t)==="high"){let i=t.contentAssetId();if(i){let s=await ie.lnsClient.downloadAsset(i);return{image:await s8(s).then(ZS)}}}}getUrlForThumb(e,t){if(!Gte(t)){if(e==="small"||e==="medium"){let n=ie.res.cardThumbUrl(t,e);if(n)return n}else if(e==="high"&amp;&amp;mo.getMaxLevelForCard(t)==="high")return ie.res.assetUrl(t.contentAssetId())}}rotate(){this.rotated=!0,this.rotateInternal("left")}resetRotated(){this.rotateInternal("right"),this.rotated=!1}rotateInternal(e){for(let[t,n]of this.thumbs){let o=S2(n,e);this.set(t,o)}}},k2=class extends vS{async loadInternal(e,t,n){let o=this.getUrlForThumb(e,t);if(!o)return;let i=Su.get(o);n&amp;&amp;i.invalidate();let s=await i.load({url:o});if(!!s)return{image:s}}getUrlForThumb(e,t){if(!t.document)return;let{id:n,index:o,commentSnapshotId:i}=t.document;if(e==="small"||e==="medium"){let{res:s}=ie;return s.documentThumbUrl({docId:n,index:o,snapshotId:i,size:e})}}},QD=class extends vS{constructor(t){super();this.type=t;this.loader=new P2(this.type,this)}get geometry(){if(this._geometry)return{...this._geometry}}async loadInternal(t,n,o){let s=await this.promoteLoader(t).load(t,n,o);if(this._geometry=n.drawnGeometry(this.type),s)return{image:s.image}}promoteLoader(t){if(this.loader instanceof XD)return this.loader;if(t==="high"){let n=new XD(this.type,this);return this.setLoader(n),n}else return this.loader}getUrlForThumb(t,n){return this.loader.getUrlForThumb(t,n)}setLoader(t){this.loader!==t&amp;&amp;(this.loader.delegate=void 0,this.loader=t)}redrawThumbnails({geometry:t,contents:n}){let{high:o,medium:i,small:s,contentType:a}=l8({geometry:t,contents:n});if(this.loader instanceof P2){let l=new XD(this.type,this);this.setLoader(l)}return this.set("high",o),this.set("medium",i),this.set("small",s),this._geometry={...t},{small:s,medium:i,high:o,contentType:a}}},P2=class{constructor(e,t){this.type=e;this.delegate=t}async load(e,t,n){var a;Ee(e!=="high");let o=ie.res.drawnThumbUrl(t,this.type,e);if(!o)return;let i=Su.get(o);n&amp;&amp;i.invalidate();let s=await i.load({url:o});if(!!s)return(a=this.delegate)==null||a.set(e,s),{image:s}}getUrlForThumb(e,t){if(e!=="high")return ie.res.drawnThumbUrl(t,this.type,e)}},XD=class{constructor(e,t){this.type=e;this.dataFetcher=RU(this.type);this.delegate=t}async load(e,t,n){var u,d,c,p;n&amp;&amp;(this.dataFetcher=RU(this.type)),await this.dataFetcher.fetch(t);let o=(u=this.dataFetcher.error())==null?void 0:u.value;if(o)throw o;let i=(d=this.dataFetcher.get())==null?void 0:d.value;if(!i)return;let s=t.drawnGeometry(this.type),a,l=Wte({contents:i,geometry:s});e==="high"&amp;&amp;(a=l),(c=this.delegate)==null||c.set("high",l);for(let h of["small","medium"]){let f=mo.getThumbnailSize(h,l),m=cs(l,f);(p=this.delegate)==null||p.set(h,m),e===h&amp;&amp;(a=m)}return Ee(a!==void 0),{image:a}}getUrlForThumb(e,t){}};function Wte({geometry:r,contents:e}){let{canvas:t,thumbnailRect:n}=r,{width:o,height:i}=mo.getHighCanvasSize(r),s=fr.create(o,i),a=s.getContext2dForce();return a.save(),a.translate(-t.width*n.x,-t.height*n.y),U_(a,{canvas:t,contents:e},1),a.restore(),s}function Tke(r){let e=mo.getThumbnailSize("small",r),t=mo.getThumbnailSize("medium",r);return{small:cs(r,e),medium:cs(r,t)}}function l8({geometry:r,contents:e}){let t=Wte({geometry:r,contents:e}),{medium:n,small:o}=Tke(t);return Ee(o!=null),Ee(n!=null),Ee(t!=null),{high:t,medium:n,small:o,contentType:"image/png"}}var A2=class{constructor(){this.content=new D2;this.document=new k2;this.drawn=new QD("drawn");this.annotation=new QD("annotation")}static get(e){var t;if(e.document){let{id:n,index:o,commentSnapshotId:i}=e.document;return this.forDocument(n,o,i)}else{let n=(t=e.rootParent().document)==null?void 0:t.id;return this.forCard(e.id,n)}}static forCard(e,t){let n;return t?n=`card/${t}/${e}`:n=`card/${e}`,this.instances.get(n)}static forDocument(e,t,n){return n!=null?this.instances.get(`document/${e}/${t}/${n}`):this.instances.get(`document/${e}/${t}`)}static reset(){this.instances=new Fn(()=&gt;new A2)}get timestamp(){return Math.max(this.content.timestamp,this.document.timestamp,this.drawn.timestamp,this.annotation.timestamp)}errors(e){let t=this.content.getFetchingState(e),n=this.document.getFetchingState(e),o=this.drawn.getFetchingState(e),i=this.annotation.getFetchingState(e),s=c=&gt;c instanceof Error,[a,l,u,d]=[t,n,o,i].map(c=&gt;s(c)?c:void 0);if(!(!a&amp;&amp;!l&amp;&amp;!u&amp;&amp;!d))return{content:a,document:l,drawn:u,annotation:d}}},mr=A2;mr.instances=new Fn(()=&gt;new A2);function Op(r){let{store:e,isRoot:t,level:n,errors:o}=r;t&amp;&amp;n==="high"&amp;&amp;Dke(e,o)}function Dke(r,e){let t=[],n=he.get().strings,o=new Set(Object.values(e).filter(s=&gt;!!s));for(let s of o.values())t.push(ot(s,{[400]:n.invalidRequest,[403]:n.accessDenied,[500]:n.unexpectedErrorOccurred}).message);let i=83;r.reduce(me(i,{title:n.loadingFailed,message:t,okMessage:n.close,onOk:()=&gt;{r.reduce(me(i,void 0))}}))}function ex(r){return r.startsWith("bb")}function wc(r){return r==="bbCenterTop"||r==="bbLeftMiddle"||r==="bbRightMiddle"||r==="bbCenterBottom"}function $te(r){return r==="quizButtonHelp"||r==="quizButtonAnswerTogether"||r==="quizButtonEdit"||r==="quizButtonResult"||r==="quizButtonAnswer"}function Vte(r){return r==="attendanceButtonOpen"||r==="attendanceButtonAnswer"||r==="attendanceButtonHelp"}function Jg(r){return window.devicePixelRatio*(window.innerWidth&lt;=480?17:20)/r}function jte(r,e,t){let n=Nt(r,e),o=Math.min(n.width,n.height),i=window.devicePixelRatio,s=(t?20:40)*i,a=i/e;return o&lt;s&amp;&amp;(a=a*o/s),a}function JD({card:r,mtx:e,isPreview:t}){let n=Jg(e.a),{width:o,height:i}=r.bounds,[s,a]=[-o/2-n,-i/2-n],[l,u]=[s+o+n*2,a+i+n*2],d=new Map([["bbLeftTop",{x:s,y:a,type:"bbLeftTop"}],["bbCenterTop",{x:0,y:a,type:"bbCenterTop"}],["bbRightTop",{x:l,y:a,type:"bbRightTop"}],["bbLeftMiddle",{x:s,y:0,type:"bbLeftMiddle"}],["bbRightMiddle",{x:l,y:0,type:"bbRightMiddle"}],["bbLeftBottom",{x:s,y:u,type:"bbLeftBottom"}],["bbCenterBottom",{x:0,y:u,type:"bbCenterBottom"}],["bbRightBottom",{x:l,y:u,type:"bbRightBottom"}]]);if(r.foldHandleVisible()&amp;&amp;!t&amp;&amp;d.delete("bbLeftMiddle"),(!r.hasNextCardOrGroup||r.isFolded&amp;&amp;!r.tail().hasNextCardOrGroup)&amp;&amp;d.delete("bbRightTop"),r.type==="quiz"||r.type==="attendance")for(let c of d.values())wc(c.type)&amp;&amp;d.delete(c.type);if(t)for(let c of d.values())wc(c.type)||d.delete(c.type);return d}var kke="\u0620-\u064A\u066E-\u066F\u0671-\u06D5\u06EE-\u06EF\u06FA-\u06FF",Pke="\u0750-\u077F",Ake=`[${kke}${Pke}]`,Ike="[\u064B-\u065F\u0670]",Kte=`${Ake}${Ike}*`;var qte="[\\u{0980}-\\u{09FF}]",Eke="[\\u{0980}-\\u{0983}\\u{09BC}-\\u{09D7}\\u{09E2}\\u{09E3}\\u{09FE}]",_ke="\\u{09CD}",Yte=`${qte}(${_ke}${qte}|${Eke})*`;var Xte="[\\u{0900}-\\u{097F}]",Fke="[\\u{0900}-\\u{0903}\\u{093A}-\\u{0957}\\u{0962}\\u{0963}]",Mke="\\u{094D}",Qte=`${Xte}(${Mke}${Xte}|${Fke})*`;var Jte="[\\u{0A80}-\\u{0AFF}]",Nke="[\\u{0A81}-\\u{0A83}\\u{0ABC}\\u{0ABE}-\\u{0ACD}\\u{0AE2}\\u{0AE3}\\u{0AFA}-\\u{0AFF}]",Bke="\\u{0ACD}",Zte=`${Jte}(${Bke}${Jte}|${Nke})*`;var Rke="[\u05D0-\u05EA]",Lke="[\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7]",ere=`${Rke}${Lke}*`;var Oke="[\\u{3041}-\\u{3096}\\u{309D}-\\u{309F}]",Uke="[\\u{30A0}-\\u{30FF}]",zke="[\\u{3099}-\\u{309A}]",Hke="[\\u{309B}-\\u{309C}]",tre=`((${Uke}|${Oke})${zke}?|${Hke})`;var rre="[\\u{0C80}-\\u{0CFF}]",Gke="[\\u{0C81}-\\u{0C83}\\u{0CBC}\\u{0CBE}-\\u{0CCD}\\u{0CD5}\\u{0CD6}\\u{0CE2}\\u{0CE3}]",Wke="\\u{0CCD}",nre=`${rre}(${Wke}${rre}|${Gke})*`;var ore="[\\u{1780}-\\u{17FF}]",$ke="[\\u{17B6}-\\u{17D1}\\u{17D3}\\u{17DD}]",Vke="\\u{17D2}",ire=`${ore}(${Vke}${ore}|${$ke})*`;var jke="[\\u{0E80}-\\u{0EFF}]",Kke="[\\u{0EB1}\\u{0EB4}-\\u{0EBC}\\u{0EC8}-\\u{0ECD}]",sre=`${jke}${Kke}*`;var are="[\\u{0D00}-\\u{0D7F}]",qke="[\\u{0D00}-\\u{0D03}\\u{0D3B}\\u{0D3C}\\u{0D3E}-\\u{0D4D}\\u{0D57}\\u{0D62}-\\u{0D63}]",Yke="\\u{0D4D}",lre=`${are}(${Yke}${are}|${qke})*`;var ure="[\\u{1000}-\\u{109F}]",Xke=["\\u{102B}-\\u{1038}","\\u{103A}-\\u{103E}","\\u{1056}-\\u{1059}","\\u{105E}-\\u{1060}","\\u{1062}-\\u{1064}","\\u{1067}-\\u{106D}","\\u{1071}-\\u{1074}","\\u{1082}-\\u{108D}","\\u{108F}","\\u{109A}-\\u{109D}"],Qke=`[${Xke.join("")}]`,Jke="\\u{1039}",dre=`${ure}(${Jke}${ure}|${Qke})*`;var Zke="[\\u{0B80}-\\u{0BFF}]",ePe="[\\u{0B82}-\\u{0B83}\\u{0BBE}-\\u{0BD7}\\u{0962}\\u{0963}]",cre=`${Zke}${ePe}*`;var pre="[\\u{0C00}-\\u{0C7F}]",tPe="[\\u{0C00}-\\u{0C04}\\u{0C3E}-\\u{0C56}\\u{0C62}\\u{0C63}]",rPe="\\u{0C4D}",hre=`${pre}(${rPe}${pre}|${tPe})*`;var nPe="[\\u0E00-\\u0E7F]",oPe="[\\u0E31\\u0E33-\\u0E3A\\u0E47-\\u0E4E]",fre=`${nPe}${oPe}*`;var iPe="[\\u{0F00}-\\u{0FFF}]",sPe="[\\0F18\\0F19\\0F35\\0F37\\0F39\\0F3E\\0F3F\\u{0F71}-\\u{0F87}\\u{0F8D}-\\u{0FBC}\\u{0FC6}]",mre=`${iPe}${sPe}*`;var vre="[\\u{1F1E6}-\\u{1F1FF}]{2}",bre="[0-9#\\*][\\u{FE0F}]?\\u{20E3}",aPe=["[\\u{2600}-\\u{26FF}]","[\\u{2700}-\\u{27BF}]","[\\u{2B00}-\\u{2BFF}]","[\\u{1F300}-\\u{1F5FF}]","[\\u{1F600}-\\u{1F64F}]","[\\u{1F680}-\\u{1F6FF}]","[\\u{1F700}-\\u{1F77F}]","[\\u{1F900}-\\u{1F9FF}]"],gre=`(${aPe.join("|")})`,lPe="\\u{200D}",uPe="[\\u{FE0E}\\u{FE0F}]",dPe="[\\u{1F3FB}-\\u{1F3FF}]",yre=`${gre}(${lPe}${gre}|${dPe}|${uPe})*`;var cPe=[vre,bre,yre,Kte,Yte,Qte,Zte,ere,tre,nre,ire,sre,lre,dre,cre,hre,fre,mre,"."],pPe=new RegExp(`(${cPe.join("|")})`,"gu");function u8(r){return r.match(pPe)||[]}var xre=oe(Sh()),wre=oe(Sre());function Tre(r,e){let t=new RegExp(`^${r}([A-Z])$`),n=Ls.today(),o=e.filter(s=&gt;s.preparation||s.expiry&amp;&amp;(0,xre.default)(s.expiry).isAfter(n)).map(s=&gt;s.message.match(t)).filter(s=&gt;s!==null).map(s=&gt;s[1]).sort((s,a)=&gt;s.localeCompare(a)),i=r+"A";if(o.length&gt;0){let s="A".charCodeAt(0);for(let a=0;a&lt;26;a++){let l=String.fromCharCode(s+a);if(!o.includes(l)){i=`${r}${l}`;break}}}return i}var d8=/^[\s\t]*$/,hPe=/^([\s\t]*).*$/;function c8(r,e){if(r.length===0)return{begin:0,end:0};let t=it(e,0,r.length),n=[],o=r,i=hPe.exec(r);if(i){let u=i[1];n.push(u),o=o.substring(u.length)}let s=new wre.default;n.push(...s.segment(o));let a=0,l="";for(let u=0;u&lt;n.length;u++){let d=n[u],c=a+d.length;if(t&gt;=c){a=c,l=d;continue}return d8.test(l)&amp;&amp;d8.test(d)?{begin:t,end:t}:d8.test(d)?{begin:a-l.length,end:a}:{begin:a,end:c}}return{begin:t,end:t}}var Dre=r=&gt;Array.from(r).map(e=&gt;e.replace(/[-/g,String.fromCharCode(e.charCodeAt(0)-65248))).join("");function*ZD(r,e=void 0){let t=e||{location:0,length:r.length},n;t.location&lt;=0?n=0:n=r.lastIndexOf(`
`,t.location-1)+1;let o=r.indexOf(`
`,t.location);if(o&lt;0?o=r.length:o++,yield{location:n,length:o-n},o!==r.length)for(n=o;n&lt;=t.location+t.length;){if(o=r.indexOf(`
`,n),o&lt;0?o=r.length:o++,yield{location:n,length:o-n},o===r.length)return;n=o}}var fn=class{static fromTitleGadget(e){let t=new fn(e);return t.attachFont(e.font_size),t}constructor({text:e,attributes:t,attribute_ranges:n}){this.text=e,this.attributes=t||[],this.attribute_ranges=n||[]}get length(){return this.text.length}substr({location:e,length:t}){let n=this.attribute_ranges.map(s=&gt;{let a=Zg({location:e,length:t},s.range);if(!a||a.length&lt;1)return;let l={location:a.location-e,length:a.length};return{index:s.index,range:l}}).filter(s=&gt;s!==void 0),{attributes:o,attribute_ranges:i}=p8({attributes:this.attributes,attribute_ranges:n});return new fn({text:this.text.substr(e,t),attributes:o,attribute_ranges:i})}*lines(e={location:0,length:this.length}){for(let{location:t,length:n}of ZD(this.text,e))yield{line:this.substr({location:t,length:n}),range:{location:t,length:n}}}attributeAt({location:e,type:t}){let n=this.attribute_ranges.findIndex(s=&gt;E2(s.range,e)&amp;&amp;this.attributes[s.index].type===t);if(n&lt;0)return;let o=this.attribute_ranges[n].index;return this.attributes[o]}attributesAt(e){return this.attribute_ranges.filter(t=&gt;E2(t.range,e)).map(t=&gt;this.attributes[t.index])}append(e){let t=this.length,n=this.attributes.length;this.text+=e.text,this.attributes=this.attributes.concat(e.attributes),this.attribute_ranges=this.attribute_ranges.concat(e.attribute_ranges.map(o=&gt;({index:o.index+n,range:{location:o.range.location+t,length:o.range.length}})))}insert({string:e,location:t}){let n=this.substr({location:0,length:t}),o=this.substr({location:t,length:this.length-t});this.text=n.text,this.attributes=n.attributes,this.attribute_ranges=n.attribute_ranges,this.append(e),this.append(o)}replace({range:e,string:t}){this.remove(e),this.insert({string:t,location:e.location})}remove({location:e,length:t}){if(this.length&lt;=e)return;let n=e,o=Math.min(this.length,e+t);this.text=this.text.substring(0,n)+this.text.substr(o);let i=[];for(let l of this.attribute_ranges){let u=l.range.location,d=u+l.range.length;n&lt;=u&amp;&amp;d&lt;=o||(u&lt;n&amp;&amp;o&lt;=d?i.push({index:l.index,range:{location:u,length:d-u-(o-n)}}):n&lt;=u&amp;&amp;u&lt;o?i.push({index:l.index,range:{location:n,length:d-o}}):n&lt;d&amp;&amp;d&lt;=o?i.push({index:l.index,range:{location:u,length:n-u}}):o&lt;=u?i.push({index:l.index,range:{location:u-(o-n),length:d-u}}):i.push(l))}let{attributes:s,attribute_ranges:a}=p8({attributes:this.attributes,attribute_ranges:i});this.attributes=s,this.attribute_ranges=a}advance({location:e,byComposedCharacterOffset:t}){if(e&lt;0||this.text.length&lt;e)return;let n=[...yy(this.text)],o=0,i=n.length;for(let l=0;l&lt;n.length;l++){let u=n[l],d=o,c=o+u.length;if(d&lt;=e&amp;&amp;e&lt;c){i=l;break}o+=u.length}let s=it(i+t,0,n.length),a=0;for(let l=1;l&lt;=s;l++)a+=n[l-1].length;return a}removeAttribute({type:e,range:t}){t=ek(t);let n=[];for(let s=0;s&lt;this.attribute_ranges.length;s++){let a=this.attribute_ranges[s];if(this.attributes[a.index].type!==e){n.push(a);continue}let l=Zg(a.range,t);if(l===void 0){n.push(a);continue}let u={location:a.range.location,length:l.location-a.range.location};u.length&gt;0&amp;&amp;n.push({index:a.index,range:u});let d={location:l.location+l.length,length:a.range.location+a.range.length-(l.location+l.length)};d.length&gt;0&amp;&amp;n.push({index:a.index,range:d})}let{attributes:o,attribute_ranges:i}=p8({attributes:this.attributes,attribute_ranges:n});this.attributes=o,this.attribute_ranges=i}addAttribute({attribute:e,range:t}){let n=Zg(ek(t),{location:0,length:this.length});if(n===void 0||n.length===0)return;let{type:o}=e;this.removeAttribute({type:o,range:n});let i=this.attributes.findIndex(s=&gt;s.type!==o?!1:s.value===e.value);i&lt;0&amp;&amp;(i=this.attributes.length,this.attributes.push(e)),this.attribute_ranges.push({index:i,range:n})}clone(){let e=this.text,t=this.attributes.map(o=&gt;{let i=o.type;return i==="font"?{type:i,value:{...o.value}}:i==="foreground_color"?{type:i,value:o.value}:i==="language"?{type:i,value:o.value}:{type:i,value:{...o.value}}}),n=this.attribute_ranges.map(o=&gt;({index:o.index,range:{...o.range}}));return new fn({text:e,attributes:t,attribute_ranges:n})}equals(e){return this.text===e.text&amp;&amp;JSON.stringify(this.attributes)===JSON.stringify(e.attributes)&amp;&amp;JSON.stringify(this.attribute_ranges)===JSON.stringify(e.attribute_ranges)}pack(){let{attributes:e,attribute_ranges:t}=fPe({attributes:this.attributes,attribute_ranges:this.attribute_ranges});return{text:this.text,attributes:e,attribute_ranges:t}}attachFont(e){let t=this.attribute_ranges.filter(s=&gt;this.attributes[s.index].type==="font").sort((s,a)=&gt;s.range.location-a.range.location),n=0,o={type:"font",value:{size:e,bold:!1}},i=[];for(let s=0;s&lt;t.length;s++){let{range:a,index:l}=t[s],{location:u,length:d}=a;if(n&lt;u)i.push({attribute:o,range:{location:n,length:u-n}});else if(u+d&lt;n)continue;n=u+d,o=this.attributes[l]}n&lt;this.length&amp;&amp;i.push({attribute:o,range:{location:n,length:this.length-n}});for(let{attribute:s,range:a}of i)this.addAttribute({attribute:s,range:a})}};function Ps(r,e=[]){let t=e.map((n,o)=&gt;({index:o,range:{location:0,length:r.length}}));return new fn({text:r,attributes:e,attribute_ranges:t})}function xu({begin:r,end:e}){return{location:r,length:e-r}}function Zg(r,e){let t=r.location+r.length,n=e.location+e.length,o=t&lt;n?t:n;if(e.location&lt;=r.location&amp;&amp;r.location&lt;n)return{location:r.location,length:o-r.location};if(r.location&lt;=e.location&amp;&amp;e.location&lt;t)return{location:e.location,length:o-e.location}}function E2(r,e){let t=ek(r);return t.location&lt;=e&amp;&amp;e&lt;t.location+t.length}function ek(r){return r.length&gt;0?r:{location:r.location+r.length,length:-r.length}}function go(r){return Math.min(r.location,r.location+r.length)}function ci(r){return Math.max(r.location,r.location+r.length)}function Tc({text:r,location:e}){if(e&lt;0||r.length&lt;e)return;let t=r.indexOf(`
`,e);t&lt;0?t=r.length:t+=1;let n=r.substring(0,e).lastIndexOf(`
`);return n&lt;0?n=0:n+=1,{location:n,length:t-n}}function*yy(r){let e=r.split(`
`);if(e.length===0)return;for(let o=0;o&lt;e.length-1;o++){let i=e[o],s=u8(i);for(let a=0;a&lt;s.length;a++)yield s[a];yield`
`}let t=e[e.length-1],n=u8(t);for(let o=0;o&lt;n.length;o++)yield n[o];t.endsWith(`
`)&amp;&amp;(yield`
`)}function Up(r){let e=0;for(let t of yy(r))e++;return e}function p8({attributes:r,attribute_ranges:e}){let t=r.concat(),n=e.concat(),o=t.length-1;for(;o&gt;=0;)n.findIndex(i=&gt;i.index===o)&lt;0&amp;&amp;(t.splice(o,1),n=n.map(i=&gt;i.index&gt;o?{index:i.index-1,range:i.range}:i)),o-=1;return{attributes:t,attribute_ranges:n}}function fPe({attributes:r,attribute_ranges:e}){let t=r.map(i=&gt;JSON.stringify(i)),n=new Map,o=[];for(let i=0;i&lt;e.length;i++){let{index:s,range:a}=e[i],l=r[s],u=t[s];if(n.has(u)){let d=n.get(u);o.push({index:d.index,range:a})}else{let d={index:n.size,value:l};n.set(u,d),o.push({index:d.index,range:a})}}for(let i=0;i&lt;o.length-1;i++){let s=o[i];for(let a=i+1;a&lt;o.length;a++){let l=o[a];l.index===s.index&amp;&amp;(s.range.location+s.range.length===l.range.location?(o[i].range={location:s.range.location,length:s.range.length+l.range.length},o.splice(a,1),a--):l.range.location+l.range.length===s.range.location&amp;&amp;(o[i].range={location:l.range.location,length:s.range.length+l.range.length},o.splice(a,1),a--))}}return{attributes:[...n.values()].map(i=&gt;i.value),attribute_ranges:o}}function h8(r){if(!r)return"#000000ff";let{value:e}=r;return e.length===9?"#"+e.substr(3,6)+e.substr(1,2):"#000000ff"}var _oe=oe(Pre());var f8=1e3;function Are({run:r,ofLine:e,dx:t,ctx:n,vertical:o}){var i;if(n.save(),o&amp;&amp;r.rotate?(n.translate(0,e.origin.y),n.rotate(-Math.PI/2),n.translate(-r.advance/2+(e.ascender+e.descender)/2,e.origin.x+t+r.advance/2+(r.ascender-r.descender)/2+r.descender)):n.translate(e.origin.x+t,e.origin.y),o&amp;&amp;r.rotate&amp;&amp;r.shouldUseGlyph)for(let{glyphs:s,advance:a}of r.graphemes){if(s){let u=((i=s.sub)!=null?i:s.main).getPath(0,0,r.fontSize);u.fill=r.rgbaHex,u.draw(n)}n.translate(a,0)}else if(r.bitmap){let{a:s}=n.getTransform(),a=Math.min(r.fontSize*s,2e3),l=r.fontSize/a;n.scale(l,l),n.font=`${a}px '${r.fontFamily}'`,n.fillStyle=r.rgbaHex,n.fillText(r.text,r.kerning/l,0)}else{let s=it(Math.round(r.fontSize),40,f8),a=r.fontSize/s;n.save(),n.scale(a,a),n.font=`${s}px '${r.fontFamily}'`,n.fillStyle=r.rgbaHex,n.fillText(r.text,r.kerning/a,0),n.restore()}n.restore()}function _2({run:r,next:e,vertical:t,onlyLackingGlyphs:n}){if(!(t||n)&amp;&amp;!(r.rotate||r.shouldUseGlyph||r.bitmap||r.text==="	"||r.headIndent)&amp;&amp;!(e.rotate||e.shouldUseGlyph||e.bitmap||e.text==="	"||e.headIndent||e.kerning!==0)&amp;&amp;!(r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.bold!==e.bold)&amp;&amp;r.rgbaHex===e.rgbaHex)return{text:r.text+e.text,graphemes:[...r.graphemes,...e.graphemes],shouldUseGlyph:r.shouldUseGlyph,fontSize:r.fontSize,fontFamily:r.fontFamily,advance:r.advance+e.advance,kerning:r.kerning,rotate:!1,rgbaHex:r.rgbaHex,bold:r.bold,ascender:Math.max(r.ascender,e.ascender),descender:Math.min(r.descender,e.descender),bitmap:!1}}function m8(r){return r.graphemes.some(e=&gt;{var t;return((t=e.glyphs)==null?void 0:t.main)==null||e.glyphs.main.index===0})}function tx(r,e){let t=0,n=0;for(let s of r.runs)t=Math.max(t,s.ascender),n=Math.min(n,s.descender);let o=Math.round(t/e)*e,i=Math.round(-n/e)*e;return{ascender:o,descender:-i}}function rx(r){let e=0;for(let t of r.runs)e=e+t.kerning+t.advance;return e}function tk(r){let e=0;for(let t of r.runs)e+=t.text.length;return e}function Ire(r,e){if(Ee(e.length===1),r.runs.length===0)return!1;for(let t=r.runs.length-1;t&gt;=0;t--){let n=r.runs[t];if(n.text.length!==0)return n.text.endsWith(e)}return!1}function Ere(r,e){if(r.length===0)return $e(0,0);let t=r[0],{ascender:n,descender:o}=tx(t,e),i=t.origin.x,s=t.origin.x+rx(t),a=t.origin.y-n,l=t.origin.y-o+t.spacing;for(let u=1;u&lt;r.length;u++){let d=r[u],{ascender:c,descender:p}=tx(d,e);i=Math.min(i,d.origin.x),s=Math.max(s,d.origin.x+rx(d)),a=Math.min(a,d.origin.y-c),l=Math.max(l,d.origin.y-p+d.spacing)}return $e(s-i,l-a)}function g8({line:r,x:e}){if(r.runs.length===0)return 0;let t;r.runs[r.runs.length-1].text===`
`?t=r.runs.length-1:t=r.runs.length;let n=t,o=r.origin.x;for(let i=0;i&lt;r.runs.length;i++){let s=r.runs[i],a=o,l=o+s.advance+s.kerning,u=(a+l)/2;if(e&lt;=u){n=i;break}if(a&lt;=e&amp;&amp;e&lt;u){n=i;break}if(u&lt;=e&amp;&amp;e&lt;=l){n=Math.min(i+1,t);break}o=l}return n}function gPe(r,e){let t=r.width*r.height;return Math.sqrt(e/t)}function vPe(r,e){return Math.min(e.width/r.width,e.height/r.height)}var M2={top:20,left:20,bottom:20,right:20},nx={width:480,height:360};function v8(r,e,t){let n=gPe(r,nx.width*nx.height),o=r.height*n,i={width:r.width+e.left+e.right,height:r.height+e.top+e.bottom},s=vPe(i,t),l=r.height*s/o;return Cb(l)?l:void 0}var rk=class{constructor(e,t){this.titleJson=e;this.size=t}equals(e){return this.titleJson===e.titleJson&amp;&amp;Jc(this.size,e.size)}static New(e){let t=e.gadgets.title;if(t!==void 0)return new rk(JSON.stringify(t),e.size)}},F2=class{constructor(e){this.card=e;this.updateTextFrameIfNeeded()}get(){return this.frame}updateTextFrameIfNeeded(){let e=this.card.gadgets.title;if(!e)return;let t=rk.New(this.card);if(!t||this.frame&amp;&amp;this.state&amp;&amp;this.state.equals(t))return;let n=fn.fromTitleGadget(e),o=this.card.size,i=v8(this.card.contentSize,this.card.content.margins,o);if(!i)return;let s=Cy({text:n,size:o,vertical:e.vertical,fontSizeScale:i,hAlignment:e.h_alignment,vAlignment:e.v_alignment});if(!!s)return this.frame=s,this.state=t,s}};var _re=oe(vm());function ox(r,e){return e===0&amp;&amp;_re.default.notify(new Error("possible zero division")),r/e}var b8=class{constructor(e,t){this.range=e,this.string=t}apply(e,t){if(e.replace({range:this.range,string:this.string}),t.length==0)return go(t)&lt;=go(this.range)?t:ci(this.range)&lt;=go(t)?{location:go(t)-this.range.length+this.string.length,length:0}:{location:go(this.range)+this.string.length,length:0};if(ci(this.range)&lt;=go(t)){let n=go(t)-this.range.length+this.string.length,o=ci(t)-this.range.length+this.string.length;return xu({begin:n,end:o})}else{if(ci(t)&lt;=go(this.range))return t;if(go(t)&lt;=go(this.range)&amp;&amp;ci(this.range)&lt;=ci(t)){let n=go(t),o=ci(t)-this.range.length+this.string.length;return xu({begin:n,end:o})}else if(go(this.range)&lt;=go(t)&amp;&amp;go(t)&lt;ci(this.range)&amp;&amp;ci(this.range)&lt;=ci(t)){let n=go(this.range)+this.string.length,o=ci(t)-this.range.length+this.string.length;return xu({begin:n,end:o})}else{if(go(t)&lt;=go(this.range)&amp;&amp;go(this.range)&lt;ci(t)&amp;&amp;ci(t)&lt;=ci(this.range))return xu({begin:go(t),end:go(this.range)});{let n=go(this.range)+this.string.length,o=go(this.range)+this.string.length;return xu({begin:n,end:o})}}}}},y8=class{constructor(e,t){this.string=e,this.location=t}apply(e,t){return e.insert({string:this.string,location:this.location}),ci(t)&lt;this.location?t:this.location&lt;=go(t)?{location:go(t)+this.string.length,length:t.length}:{location:go(t),length:t.length+this.string.length}}},N2=class{constructor(){this.commands=[]}apply(e,t){let n=t;this.commands.reverse();for(let s of this.commands)n=s.apply(e,n);this.commands=[];let o=Math.min(Math.max(go(n),0),e.length),i=Math.min(Math.max(ci(n),0),e.length);return{string:e,selection:xu({begin:o,end:i})}}replaceCharacters({range:e,string:t}){this.commands.push(new b8(e,t))}insert({string:e,location:t}){this.commands.push(new y8(e,t))}};var sn=oe(ve()),Kre=oe(ve());var ni=oe(ve()),z2=oe(ve());var Fo=oe(ve()),Hp=oe(ve());var zp=oe(ve());function Sy(){return Sy=Object.assign?Object.assign.bind():function(r){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&amp;&amp;(r[n]=t[n])}return r},Sy.apply(this,arguments)}function xy(r,e){if(r==null)return{};var t={},n=Object.keys(r),o,i;for(i=0;i&lt;n.length;i++)o=n[i],!(e.indexOf(o)&gt;=0)&amp;&amp;(t[o]=r[o]);return t}function nk(r,e){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},nk(r,e)}function wy(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,nk(r,e)}function C8(r,e){return r.classList?!!e&amp;&amp;r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}function S8(r,e){r.classList?r.classList.add(e):C8(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&amp;&amp;r.className.baseVal||"")+" "+e))}function Fre(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function x8(r,e){r.classList?r.classList.remove(e):typeof r.className=="string"?r.className=Fre(r.className,e):r.setAttribute("class",Fre(r.className&amp;&amp;r.className.baseVal||"",e))}var k8=oe(ve());var ok=oe(ve()),ik=oe(eE());var w8={disabled:!1};var Mre=oe(ve()),ix=Mre.default.createContext(null);var B2=function(e){return e.scrollTop};var sk="unmounted",Ty="exited",Dy="entering",ax="entered",T8="exiting",Df=function(r){wy(e,r);function e(n,o){var i;i=r.call(this,n,o)||this;var s=o,a=s&amp;&amp;!s.isMounting?n.enter:n.appear,l;return i.appearStatus=null,n.in?a?(l=Ty,i.appearStatus=Dy):l=ax:n.unmountOnExit||n.mountOnEnter?l=sk:l=Ty,i.state={status:l},i.nextCallback=null,i}e.getDerivedStateFromProps=function(o,i){var s=o.in;return s&amp;&amp;i.status===sk?{status:Ty}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(o){var i=null;if(o!==this.props){var s=this.state.status;this.props.in?s!==Dy&amp;&amp;s!==ax&amp;&amp;(i=Dy):(s===Dy||s===ax)&amp;&amp;(i=T8)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var o=this.props.timeout,i,s,a;return i=s=a=o,o!=null&amp;&amp;typeof o!="number"&amp;&amp;(i=o.exit,s=o.enter,a=o.appear!==void 0?o.appear:s),{exit:i,enter:s,appear:a}},t.updateStatus=function(o,i){if(o===void 0&amp;&amp;(o=!1),i!==null)if(this.cancelNextCallback(),i===Dy){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:ik.default.findDOMNode(this);s&amp;&amp;B2(s)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&amp;&amp;this.state.status===Ty&amp;&amp;this.setState({status:sk})},t.performEnter=function(o){var i=this,s=this.props.enter,a=this.context?this.context.isMounting:o,l=this.props.nodeRef?[a]:[ik.default.findDOMNode(this),a],u=l[0],d=l[1],c=this.getTimeouts(),p=a?c.appear:c.enter;if(!o&amp;&amp;!s||w8.disabled){this.safeSetState({status:ax},function(){i.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Dy},function(){i.props.onEntering(u,d),i.onTransitionEnd(p,function(){i.safeSetState({status:ax},function(){i.props.onEntered(u,d)})})})},t.performExit=function(){var o=this,i=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:ik.default.findDOMNode(this);if(!i||w8.disabled){this.safeSetState({status:Ty},function(){o.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:T8},function(){o.props.onExiting(a),o.onTransitionEnd(s.exit,function(){o.safeSetState({status:Ty},function(){o.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&amp;&amp;(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},t.setNextCallback=function(o){var i=this,s=!0;return this.nextCallback=function(a){s&amp;&amp;(s=!1,i.nextCallback=null,o(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},t.onTransitionEnd=function(o,i){this.setNextCallback(i);var s=this.props.nodeRef?this.props.nodeRef.current:ik.default.findDOMNode(this),a=o==null&amp;&amp;!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=l[0],d=l[1];this.props.addEndListener(u,d)}o!=null&amp;&amp;setTimeout(this.nextCallback,o)},t.render=function(){var o=this.state.status;if(o===sk)return null;var i=this.props,s=i.children,a=i.in,l=i.mountOnEnter,u=i.unmountOnExit,d=i.appear,c=i.enter,p=i.exit,h=i.timeout,f=i.addEndListener,m=i.onEnter,g=i.onEntering,v=i.onEntered,b=i.onExit,C=i.onExiting,x=i.onExited,y=i.nodeRef,S=xy(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ok.default.createElement(ix.Provider,{value:null},typeof s=="function"?s(o,S):ok.default.cloneElement(ok.default.Children.only(s),S))},e}(ok.default.Component);Df.contextType=ix;Df.propTypes={};function sx(){}Df.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sx,onEntering:sx,onEntered:sx,onExit:sx,onExiting:sx,onExited:sx};Df.UNMOUNTED=sk;Df.EXITED=Ty;Df.ENTERING=Dy;Df.ENTERED=ax;Df.EXITING=T8;var ky=Df;var bPe=function(e,t){return e&amp;&amp;t&amp;&amp;t.split(" ").forEach(function(n){return S8(e,n)})},D8=function(e,t){return e&amp;&amp;t&amp;&amp;t.split(" ").forEach(function(n){return x8(e,n)})},P8=function(r){wy(e,r);function e(){for(var n,o=arguments.length,i=new Array(o),s=0;s&lt;o;s++)i[s]=arguments[s];return n=r.call.apply(r,[this].concat(i))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(a,l){var u=n.resolveArguments(a,l),d=u[0],c=u[1];n.removeClasses(d,"exit"),n.addClass(d,c?"appear":"enter","base"),n.props.onEnter&amp;&amp;n.props.onEnter(a,l)},n.onEntering=function(a,l){var u=n.resolveArguments(a,l),d=u[0],c=u[1],p=c?"appear":"enter";n.addClass(d,p,"active"),n.props.onEntering&amp;&amp;n.props.onEntering(a,l)},n.onEntered=function(a,l){var u=n.resolveArguments(a,l),d=u[0],c=u[1],p=c?"appear":"enter";n.removeClasses(d,p),n.addClass(d,p,"done"),n.props.onEntered&amp;&amp;n.props.onEntered(a,l)},n.onExit=function(a){var l=n.resolveArguments(a),u=l[0];n.removeClasses(u,"appear"),n.removeClasses(u,"enter"),n.addClass(u,"exit","base"),n.props.onExit&amp;&amp;n.props.onExit(a)},n.onExiting=function(a){var l=n.resolveArguments(a),u=l[0];n.addClass(u,"exit","active"),n.props.onExiting&amp;&amp;n.props.onExiting(a)},n.onExited=function(a){var l=n.resolveArguments(a),u=l[0];n.removeClasses(u,"exit"),n.addClass(u,"exit","done"),n.props.onExited&amp;&amp;n.props.onExited(a)},n.resolveArguments=function(a,l){return n.props.nodeRef?[n.props.nodeRef.current,a]:[a,l]},n.getClassNames=function(a){var l=n.props.classNames,u=typeof l=="string",d=u&amp;&amp;l?l+"-":"",c=u?""+d+a:l[a],p=u?c+"-active":l[a+"Active"],h=u?c+"-done":l[a+"Done"];return{baseClassName:c,activeClassName:p,doneClassName:h}},n}var t=e.prototype;return t.addClass=function(o,i,s){var a=this.getClassNames(i)[s+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;i==="appear"&amp;&amp;s==="done"&amp;&amp;u&amp;&amp;(a+=" "+u),s==="active"&amp;&amp;o&amp;&amp;B2(o),a&amp;&amp;(this.appliedClasses[i][s]=a,bPe(o,a))},t.removeClasses=function(o,i){var s=this.appliedClasses[i],a=s.base,l=s.active,u=s.done;this.appliedClasses[i]={},a&amp;&amp;D8(o,a),l&amp;&amp;D8(o,l),u&amp;&amp;D8(o,u)},t.render=function(){var o=this.props,i=o.classNames,s=xy(o,["classNames"]);return k8.default.createElement(ky,Sy({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(k8.default.Component);P8.defaultProps={classNames:""};P8.propTypes={};var Mn=P8;function A8(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var ak=oe(ve());var gd=oe(ve());function R2(r,e){var t=function(i){return e&amp;&amp;(0,gd.isValidElement)(i)?e(i):i},n=Object.create(null);return r&amp;&amp;gd.Children.map(r,function(o){return o}).forEach(function(o){n[o.key]=t(o)}),n}function yPe(r,e){r=r||{},e=e||{};function t(d){return d in e?e[d]:r[d]}var n=Object.create(null),o=[];for(var i in r)i in e?o.length&amp;&amp;(n[i]=o,o=[]):o.push(i);var s,a={};for(var l in e){if(n[l])for(s=0;s&lt;n[l].length;s++){var u=n[l][s];a[n[l][s]]=t(u)}a[l]=t(l)}for(s=0;s&lt;o.length;s++)a[o[s]]=t(o[s]);return a}function Py(r,e,t){return t[e]!=null?t[e]:r.props[e]}function Nre(r,e){return R2(r.children,function(t){return(0,gd.cloneElement)(t,{onExited:e.bind(null,t),in:!0,appear:Py(t,"appear",r),enter:Py(t,"enter",r),exit:Py(t,"exit",r)})})}function Bre(r,e,t){var n=R2(r.children),o=yPe(e,n);return Object.keys(o).forEach(function(i){var s=o[i];if(!!(0,gd.isValidElement)(s)){var a=i in e,l=i in n,u=e[i],d=(0,gd.isValidElement)(u)&amp;&amp;!u.props.in;l&amp;&amp;(!a||d)?o[i]=(0,gd.cloneElement)(s,{onExited:t.bind(null,s),in:!0,exit:Py(s,"exit",r),enter:Py(s,"enter",r)}):!l&amp;&amp;a&amp;&amp;!d?o[i]=(0,gd.cloneElement)(s,{in:!1}):l&amp;&amp;a&amp;&amp;(0,gd.isValidElement)(u)&amp;&amp;(o[i]=(0,gd.cloneElement)(s,{onExited:t.bind(null,s),in:u.props.in,exit:Py(s,"exit",r),enter:Py(s,"enter",r)}))}}),o}var CPe=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},SPe={component:"div",childFactory:function(e){return e}},I8=function(r){wy(e,r);function e(n,o){var i;i=r.call(this,n,o)||this;var s=i.handleExited.bind(A8(i));return i.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},i}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,i){var s=i.children,a=i.handleExited,l=i.firstRender;return{children:l?Nre(o,a):Bre(o,s,a),firstRender:!1}},t.handleExited=function(o,i){var s=R2(this.props.children);o.key in s||(o.props.onExited&amp;&amp;o.props.onExited(i),this.mounted&amp;&amp;this.setState(function(a){var l=Sy({},a.children);return delete l[o.key],{children:l}}))},t.render=function(){var o=this.props,i=o.component,s=o.childFactory,a=xy(o,["component","childFactory"]),l=this.state.contextValue,u=CPe(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,i===null?ak.default.createElement(ix.Provider,{value:l},u):ak.default.createElement(ix.Provider,{value:l},ak.default.createElement(i,a,u))},e}(ak.default.Component);I8.propTypes={};I8.defaultProps=SPe;var lk=I8;var tr=function({open:e,onClose:t,onExited:n,className:o="",transition:i="fade",children:s,overlay:a,textEditing:l,container:u="default",backDropStatic:d=!1}){let[c,p]=(0,zp.useState)(!1),h=x=&gt;{x.currentTarget===x.target?p(!0):p(!1)},f=()=&gt;{p(!1)},m=x=&gt;{if(x.target instanceof HTMLInputElement||x.target instanceof HTMLTextAreaElement){x.stopPropagation();return}x.preventDefault(),p(!1),x.currentTarget!==x.target&amp;&amp;x.stopPropagation()},[g,v]=(0,zp.useState)(!1),b=x=&gt;{x.currentTarget===x.target&amp;&amp;(v(!0),l&amp;&amp;x.preventDefault())},C=()=&gt;{e&amp;&amp;g&amp;&amp;!d&amp;&amp;t(),v(!1)};return zp.default.createElement(Rre,{container:u},zp.default.createElement(Mn,{in:e,appear:e,timeout:250,classNames:"fade",unmountOnExit:!0},zp.default.createElement("div",{className:"fadeModalBg fade","data-overlay":a&amp;&amp;!c,onMouseDown:b})),zp.default.createElement(Mn,{timeout:250,unmountOnExit:!0,in:e,appear:e,classNames:i,onMouseDown:b,onExited:n},zp.default.createElement("div",{onMouseDown:b,className:`fadeModal ${o} ${i}`,onClick:C,onDragOver:h,onDragLeave:f,onDrop:m},s)))},Ba=({children:r,in:e,unmountOnExit:t=!0})=&gt;zp.default.createElement(Mn,{in:e,timeout:250,unmountOnExit:t,classNames:"fade"},r);var Ore=oe(eE());var Lre=oe(ve());var lr=({src:r,srcSet:e,...t})=&gt;(r&amp;&amp;(r=ie.res.src(r)),e&amp;&amp;(e=ie.res.srcSet(e)),Lre.default.createElement("img",{src:r,srcSet:e,onContextMenu:n=&gt;n.preventDefault(),...t}));var E8=10,Ay=10,xt=r=&gt;{let e=(0,Hp.useRef)(null),t=rd();(0,Hp.useEffect)(()=&gt;{t()},[e.current]);let n=e.current;return Fo.default.createElement(Fo.default.Fragment,null,Fo.default.createElement("div",{ref:e}),Fo.default.createElement(tr,{open:r.open,onClose:r.onClose,container:r.container,textEditing:!!r.textEditing},n&amp;&amp;Fo.default.createElement(kf,{...r,getParentBounds:function(){var o;return(o=r.parentBounds)!=null?o:sa(n.parentElement.getBoundingClientRect())}})))},kf=({children:r,arrowColor:e="#fff",anchor:t="bottomCenter",roundEdge:n=!1,className:o,getParentBounds:i,triOffset:s})=&gt;{var m;let a=(0,Hp.useRef)(null),[l,u]=$r({pos:{left:-9999,top:-9999},triPos:{left:-9999},alignFlags:{}}),d=i(),c=(m=a.current)==null?void 0:m.getBoundingClientRect();(0,Hp.useEffect)(()=&gt;{var w,k;let g=a.current.getBoundingClientRect(),v=d.x+d.width/2,b=d.y+d.height/2,C=E8,x={},y={},S={},T=qe(0,0,g.width,g.height);t==="bottomCenter"?(T.x=x.left=v-g.width/2,T.y=x.top=d.y+d.height,y.left=g.width/2-C):t==="topCenter"?(T.x=x.left=v-g.width/2,x.bottom=window.innerHeight-d.y,T.y=d.y-g.height,y.left=g.width/2-C):t==="middleLeft"?(x.right=window.innerWidth-d.x,T.x=d.x-g.width,T.y=x.top=b-g.height/2,y.top=g.height/2-C):t==="middleRight"&amp;&amp;(T.x=x.left=d.x+d.width,T.y=x.top=b-g.height/2,y.top=g.height/2-C),T.x+T.width&gt;window.innerWidth-C?(y.right=window.innerWidth-v-(C+Ay),y.right&lt;=C&amp;&amp;(y.right=0,S.right=!0),x.right=C,delete x.left,delete y.left):T.x&lt;C&amp;&amp;(y.left=v-(C+Ay),y.left&lt;=C&amp;&amp;(y.left=0,S.left=!0),delete y.right,delete x.right,x.left=C),T.y+T.height&gt;window.innerHeight-C?(x.bottom=C,y.bottom=window.innerHeight-b-(C+Ay),y.bottom&lt;=C&amp;&amp;(y.bottom=0,S.bottom=!0),delete y.top,delete x.top):T.y&lt;C&amp;&amp;(x.top=C,y.top=0,S.top=!0,delete x.bottom,delete y.bottom),y.top!=null?y.top+=(w=s==null?void 0:s.top)!=null?w:0:y.top==null&amp;&amp;(y.top=(k=s==null?void 0:s.top)!=null?k:void 0),u({pos:x,triPos:y,alignFlags:S})},[a.current,c==null?void 0:c.width,c==null?void 0:c.height,d.x,d.y,d.width,d.height,window.innerWidth]);let p={};t==="bottomCenter"?p={borderBottom:`10px solid ${e}`}:t==="topCenter"?p={borderTop:`10px solid ${e}`}:t==="middleLeft"?p={borderLeft:`10px solid ${e}`}:t==="middleRight"&amp;&amp;(p={borderRight:`10px solid ${e}`});let h=Fo.default.createElement("div",{className:"uiPopoverTri","data-anchor":t},Fo.default.createElement("div",{className:"uiPopoverTriInner","data-anchor":t,style:{...p,...l.triPos}})),f=o?` ${o}`:"";return Fo.default.createElement("div",{className:`uiPopoverWrapper${f}`,"data-anchor":t,style:{position:"fixed",...l.pos}},(t==="bottomCenter"||t==="middleRight")&amp;&amp;h,Fo.default.createElement("div",{className:"uiPopover","data-anchor":t,"data-round-edge":n,"data-aligned-left":l.alignFlags.left,"data-aligned-right":l.alignFlags.right,"data-aligned-top":l.alignFlags.top,"data-aligned-bottom":l.alignFlags.bottom},Fo.default.createElement("div",{ref:a},r)),(t==="topCenter"||t==="middleLeft")&amp;&amp;h)},Ra=({className:r="",children:e})=&gt;Fo.default.createElement("div",{className:"uiPopoverItems "+r},e),Rr=(0,Fo.forwardRef)(({className:r="",disabled:e,children:t,...n},o)=&gt;Fo.default.createElement("div",{className:"uiPopoverItem "+r,role:"button","data-disabled":e,ref:o,...n},t)),Iy=({className:r="",iconSrc:e,text:t,onClick:n,showArrow:o,disabled:i})=&gt;Fo.default.createElement(Rr,{className:`uiPopoverIconItem ${r}`,role:"button",onClick:n,disabled:i},Fo.default.createElement("div",{className:"uiPopoverIconItemIcon"},Fo.default.createElement(lr,{src:e})),Fo.default.createElement("div",{className:"uiPopoverIconItemText"},t),o&amp;&amp;Fo.default.createElement("div",{className:"listViewArrowMark"})),L2=({children:r,className:e="",...t})=&gt;Fo.default.createElement("a",{role:"button",className:"uiPopoverItem "+e,...t},r),O2="popoverLayer",xPe=()=&gt;typeof document!="undefined"?document.getElementById(O2):null,Rre=({children:r,container:e})=&gt;{if(typeof window!="undefined"){let t;if(e==="none")return Fo.default.createElement(Fo.default.Fragment,null,r);if(e==="default"){let n=xPe();if(!n)return null;t=n}else t=e;return t?(0,Ore.createPortal)(Fo.default.createElement(Fo.default.Fragment,null,r),t):Fo.default.createElement(Fo.default.Fragment,null,r)}else return(0,Hp.useContext)(U2).push(r),null},U2=(0,Hp.createContext)([]);var rr=({className:r="",round:e=!1,children:t,...n})=&gt;ni.default.createElement("div",{className:"nav "+r,...n,"data-round":e},t),Et=({children:r,round:e=!1,inPopover:t=!1,className:n="",...o})=&gt;ni.default.createElement("div",{className:"navHeader "+n,"data-round":e,"data-in-popover":t,...o},r),nr=({className:r="",disablePopover:e,lineClamp:t,children:n,container:o,anchor:i,...s})=&gt;{let[a,l]=(0,z2.useState)(!1),u=typeof n=="string"?n:void 0,d={};!!t&amp;&amp;t&gt;1?d={display:"-webkit-box",overflow:"hidden",WebkitLineClamp:t,WebkitBoxOrient:"vertical"}:r="ellipsisText "+r;let c=e?void 0:()=&gt;l(!0);return(0,z2.useEffect)(()=&gt;{e&amp;&amp;l(!1)},[e]),ni.default.createElement(ni.default.Fragment,null,ni.default.createElement("div",{className:r,title:u,role:e?"":"button",style:d,onClick:c,...s},n),!e&amp;&amp;ni.default.createElement(xt,{open:a,onClose:()=&gt;l(!1),arrowColor:"#000",container:o,anchor:i},ni.default.createElement("div",{className:"ellipsisTextPopover",style:{maxWidth:Math.min(480*.9,1e3)}},n)))},Ft=({children:r})=&gt;ni.default.createElement("div",{className:"navHeaderGrid"},r),Vt=({className:r="",children:e})=&gt;ni.default.createElement("div",{className:"navHeaderGridCellCenter "+r},e),Ml=({enablePopover:r,children:e})=&gt;ni.default.createElement(nr,{className:"navHeaderDualTitleSub",disablePopover:!r},e),vd=({enablePopover:r,children:e})=&gt;ni.default.createElement(nr,{className:"navHeaderDualTitleMain",disablePopover:!r},e),bd=({children:r})=&gt;ni.default.createElement("div",{className:"ellipsisTextOuter navHeaderDualTitle"},r),jt=({className:r="",children:e})=&gt;ni.default.createElement("div",{className:"navHeaderGridCellRight "+r},e),Mt=({className:r="",children:e})=&gt;ni.default.createElement("div",{className:"navHeaderGridCellLeft "+r},e),ur=({round:r=!1,className:e="",children:t,...n})=&gt;ni.default.createElement("div",{className:"navBody "+e,"data-round":r,...n},t),Gp=({className:r="",children:e,...t})=&gt;ni.default.createElement("div",{className:"navFooter "+r,...t},e),lx=({onClick:r})=&gt;ni.default.createElement(Gt,{className:"navHeaderCloseIcon",onClick:r}),Ure=()=&gt;ni.default.createElement("div",{className:"navHeaderSpacer"}),gt=({className:r,children:e,...t})=&gt;ni.default.createElement(Gt,{className:"navHeaderButton "+(r||""),...t},e),H2=r=&gt;{let e=pe();return ni.default.createElement(gt,{...r},ni.default.createElement("div",{className:"navHeaderBackButtonIcon"}),ni.default.createElement("span",null,e.back))},ev=r=&gt;ni.default.createElement(Gt,{className:"navHeaderButton",...r},ni.default.createElement("div",{className:"navHeaderMoreIcon"}));var qre=oe(O8());var V2={error(...r){},groupCollapsed(...r){},groupEnd(){},log(...r){},setEnabled(r){},table(...r){},warn(...r){}};var VPe=1e3;function Pf(r){let e=(0,qre.default)(r,{protocols:["http","https"],require_protocol:!0});try{decodeURI(r)}catch(t){e=!1}return e}var j2=({store:r,invokeType:e,onDismiss:t,onCreate:n})=&gt;{let[o,i]=sn.default.useState(""),[s,a]=sn.default.useState(!1),[l,u]=sn.default.useState(""),[d,c]=sn.default.useState(void 0),[p,h]=sn.default.useState(void 0),[f,m]=sn.default.useState(!1),g=w=&gt;{let k=w.target;a(Pf(k.value)),i(k.value)},v=w=&gt;{if(s&amp;&amp;d){let k=sa(w.currentTarget.getBoundingClientRect()),A=tn(k);n(d,A),t()}};(0,Kre.useEffect)(()=&gt;{if(s){p&amp;&amp;clearTimeout(p);let w=setTimeout(()=&gt;{(async()=&gt;{m(!0);let k=await ie.apiClient.getOgpMetadata(o);b(k)})()},VPe);h(w)}},[o,s]);let b=async w=&gt;{let k=await fk({author:{id:r.userInfo.user_id,name:r.userInfo.username},decodedUrl:decodeURI(w.url),title:w.title,description:w.description}),A=URL.createObjectURL(k);u(A),c({url:w.url,title:w.title,thumbnailFile:k}),m(!1)},C=w=&gt;{w.currentTarget===w.target&amp;&amp;t()},x=K2(),y=async()=&gt;{if(x)try{let w=await navigator.clipboard.readText();a(Pf(w)),i(w)}catch(w){V2.error(w)}},S=pe(),T=window.screen.height&lt;=480;return sn.default.createElement("div",{className:"addWebCardDialog",onClick:C},!T&amp;&amp;sn.default.createElement(sn.default.Fragment,null,sn.default.createElement("div",{className:"addWebCardDialogHeader"},sn.default.createElement(Et,{round:!0,inPopover:!0},sn.default.createElement(Ft,null,sn.default.createElement(Mt,null,sn.default.createElement(gt,{onClick:t},S.cancel)),sn.default.createElement(jt,null)))),sn.default.createElement("div",{className:"addWebCardDialogMain"},sn.default.createElement("div",{className:"addUrlInputWrap"},sn.default.createElement("input",{type:"url",placeholder:"https://...",minLength:1,onChange:g,value:o}),sn.default.createElement("div",{className:"addUrlInvalidMessage"},o!=""&amp;&amp;!s&amp;&amp;sn.default.createElement("div",{className:"addUrlInvalidHelp"},S.invalidUrlHelp))),sn.default.createElement("div",{className:"webCardPreviewWrapper"},!f&amp;&amp;!d&amp;&amp;sn.default.createElement("div",{className:`urlPasteMessageBalloon ${x?"urlPasteMessageBalloonButton":""}`,onClick:y},S.pasteCopiedUrl),(f||d)&amp;&amp;sn.default.createElement("div",{className:"webCardPreviewContainer"},f&amp;&amp;sn.default.createElement(_t,null),!f&amp;&amp;sn.default.createElement("img",{id:"webCardPreviewThumbnail",src:l}))),sn.default.createElement("button",{className:"createWebCardButton",disabled:!s||!d,onClick:v,role:"button"},e==0?S.createWebCard:S.updateCard))),T&amp;&amp;sn.default.createElement("div",{className:"addWebCardDialogCompactUI"},sn.default.createElement("div",{className:"addWebCardDialogCompactHeader"},sn.default.createElement(gt,{onClick:t,className:"addUrlInlineCloseButton"},S.cancel),sn.default.createElement("div",{className:"addUrlInputWrap"},sn.default.createElement("input",{type:"url",placeholder:"https://...",minLength:1,onChange:g,value:o})),sn.default.createElement("button",{className:"createWebCardButton",disabled:!s||!d,onClick:v,role:"button"},e==0?S.createWebCard:S.updateCard)),sn.default.createElement("div",{className:"addUrlInvalidMessage"},o!=""&amp;&amp;!s&amp;&amp;sn.default.createElement("div",{className:"addUrlInvalidHelp"},S.invalidUrlHelp)),sn.default.createElement("div",{className:"addWebCardDialogMain"},sn.default.createElement("div",{className:"webCardPreviewWrapper"},!f&amp;&amp;!d&amp;&amp;sn.default.createElement("div",{className:`urlPasteMessageBalloon ${x?"urlPasteMessageBalloonButton":""}`,onClick:y},S.pasteCopiedUrl),(f||d)&amp;&amp;sn.default.createElement("div",{className:"webCardPreviewContainer"},f&amp;&amp;sn.default.createElement(_t,null),!f&amp;&amp;sn.default.createElement("img",{id:"webCardPreviewThumbnail",src:l}))))))};function Yre(r){let e=[];for(let t of r.familyIterator())t.next?e.push({from:t.id,to:t.next.id,as_different_group:!1}):t.nextGroup&amp;&amp;e.push({from:t.id,to:t.nextGroup.id,as_different_group:!0});return e}function q2(r){let e=[],t=new Map;for(let n of r.familyIterator())!n.isHead||!n.isFolded||n.groupMemberCount()&lt;2||t.set(n.id,n.isFolded);for(let[n,o]of t.entries())e.push({top_of_group:n,is_folded:o});return e}function Dc(r){var t,n,o,i,s,a,l;let e=new Set;for(let u of r){if(u.type==="pdf"||u.type==="picture"||u.type==="video"||u.type==="audio"||u.type==="web"||u.type==="map"){let h=(t=u.content.asset)==null?void 0:t.remote_id;h&amp;&amp;e.add(h)}let d=(o=(n=u.gadgets.drawn)==null?void 0:n.asset)==null?void 0:o.remote_id,c=(s=(i=u.gadgets.annotations)==null?void 0:i.asset)==null?void 0:s.remote_id;d&amp;&amp;e.add(d),c&amp;&amp;e.add(c);let p=(l=(a=u.gadgets.naration)==null?void 0:a.asset)==null?void 0:l.remote_id;p&amp;&amp;e.add(p)}return Array.from(e.values())}function mk(r){let e;for(let t of r)(!t.isFolded||t.isFolded&amp;&amp;t.isHead)&amp;&amp;(e||(e=qe(t.bounds)),e=Rs(e,t.bounds));return e}function jPe(r){return(e,t)=&gt;r(t,e)}function KPe(r,e){return r.id-e.id}function qPe(r,e){return r.updated_at&amp;&amp;e.updated_at?r.updated_at.localeCompare(e.updated_at):r.updated_at?1:e.updated_at?-1:r.id-e.id}function Y2(r){let e=r.key==="createdAt"?KPe:qPe;return r.direction==="ascending"?e:jPe(e)}var Xre=oe(vm());function Ey(r){return Af.create(r)}function Qre(r,e){return Af.createFromCards(r,e)}function yd(r,e){return Af.load(r,e)}var Af=class{constructor(e,t){this.cardMap=new Map;this._zOrders=[];this._cardsIntegrity=0;this._zOrderIntegrity=0;if(this.id=e,this._lastModified=new Date,!t)return;let n=o=&gt;{try{o()}catch(i){}};for(let o of t.data.frames)n(()=&gt;{this.addCard(ca(o))});for(let o of t.data.connections)n(()=&gt;{this.useCards([o.from,o.to],(i,s)=&gt;{i.connect(s,o.as_different_group)})});for(let o of t.data.fold_states)n(()=&gt;{this.useCard(o.id,i=&gt;{let s=i.head();i.position={x:s.position.x+o.relative_position.x,y:s.position.y+o.relative_position.y}})});for(let o of t.data.group_states)n(()=&gt;{this.useCard(o.top_of_group,i=&gt;{i.fold(o.is_folded)})});this.applyTreeStates(t.data.tree_states);for(let o of t.data.tree_states)this.bringCardTreeToFront(this.getCard(o.id));for(let{id:o}of t.data.favorite_items)this.getCard(o).favorite=!0;for(let{id:o}of t.data.pinned_items)this.getCard(o).pinned=!0}pinnedItems(){return[...this.iterator()].filter(e=&gt;e.pinned).map(e=&gt;({id:e.id}))}favoriteItems(){return[...this.iterator()].filter(e=&gt;e.favorite).map(e=&gt;({id:e.id}))}get lastModified(){return new Date(this._lastModified)}cardsIntegrity(){return this._cardsIntegrity}zOrderIntegrity(){return this._zOrderIntegrity}static load(e,t){return new Af(e,t)}static create(e){return new Af(e)}static createFromCards(e,t){let n=new Af(e),o=[];for(let i of t)Ee(i.parent===void 0,"parent of roots must be undefined."),o.push(...i.familyIterator());for(let i of o)n.addCard(i);return n}*renderingOrderIterator(){for(let e of this._zOrders)yield this.getCard(e)}*bubblingOrderIterator(){for(let e=this._zOrders.length-1;e&gt;=0;e--)yield this.getCard(this._zOrders[e])}bringCardTreeToFront(e,t=!1){let n=e.parent;n&amp;&amp;this.bringCardTreeToFront(n,!0);let o=t?Array.from(e.lastSelfIterator()):[e];for(let i of o){for(let s of i.familyIterator({breadthFirst:!0})){let a=this._zOrders.indexOf(s.id);this._zOrders.splice(a,1),this._zOrders.push(s.id)}i.parent&amp;&amp;i.parent.bringChildToFront(i,t)}this._zOrderIntegrity++}*iterator(){for(let e of this.cardMap.values())yield e}*rootChildrenIterator(){for(let e of this._zOrders){let t=this.getCard(e);t.parent||(yield t)}}getCard(e){c4(e);let t=this.cardMap.get(e);if(!t)throw new Error(`card[${e}] not exists.`);return t}getCardSafe(e){return this.cardMap.get(e)}getCards(...e){return e.map(t=&gt;this.getCard(t))}size(){return this.cardMap.size}hasCard(e){return this.cardMap.has(e)}addCard(e){this.cardMap.set(e.id,e),this._zOrders.push(e.id),this._cardsIntegrity++}deleteCardInternal(e){this.cardMap.delete(e);let t=this._zOrders.indexOf(e);this._zOrders.splice(t,1),this._cardsIntegrity++}deleteCard(e){let t=this.getCardSafe(e);if(!t)return[];let n=[e];return t.removeFromParent(),t.forEachDescendant(o=&gt;{this.deleteCardInternal(o.id),n.push(o.id)}),this.deleteCardInternal(t.id),n}useCard(e,t){let n=this.getCardSafe(e);if(n)return t(n)}findCard(e){for(let t of this.cardMap.values())if(e(t))return t}useCards(e,t){let n=[];for(let o of e){let i=this.getCardSafe(o);i&amp;&amp;n.push(i)}if(n.length&gt;0&amp;&amp;n.length===e.length)return t(...n)}handleCommand(e){let t=X2();if(e.type==="cardsInserted"||e.type==="cardsCopied")t=this.onCardsInserted(e);else if(e.type==="cardDeleted")t=this.onCardDeleted(e);else if(e.type==="cardMoved")this.onCardMoved(e);else if(e.type==="cardSizesChanged")this.onCardSizesChanged(e);else if(e.type==="cardMarginsChanged")this.onCardMarginsChanged(e);else if(e.type==="cardEdited")this.onCardEdited(e);else if(e.type==="connectorConnected")this.onConnectorConnected(e);else if(e.type==="connectorDisconnected")this.onConnectorDisconnected(e);else if(e.type==="connectorInserted")this.onConnectorInserted(e);else if(e.type==="groupStateChanged")this.onGroupStateChanged(e);else if(e.type==="groupMoved")this.onGroupMoved(e);else if(e.type==="groupDeleted")t=this.onGroupDeleted(e);else if(e.type==="treeStateChanged")this.onTreeStateChanged(e);else if(e.type==="connectorMoved")this.onConnectorMoved(e);else if(e.type==="connectorDismissed")this.onConnectorDismissed(e);else if(e.type==="pinStateChanged")this.onPinStateChanged(e);else if(e.type==="favoriteStateChanged")this.onFavoriteStateChanged(e);else return;return this._lastModified=new Date,t}applyTreeStates(e){let t,n=[...e];for(;t=n.pop();){n.push(...t.children);for(let{id:o}of t.children)this.useCards([t.id,o],(i,s)=&gt;{i.addChild(s)})}}onCardsInserted(e){let t=X2();for(let n of e.cards){let o=ca(n);this.hasCard(n.id)||(t.inserted.push(n.id),this.addCard(o))}if(e.treeStates&amp;&amp;this.applyTreeStates(e.treeStates),e.connections)for(let n of e.connections)this.useCards([n.from,n.to],(o,i)=&gt;{o.safeConnect(i,n.as_different_group)});if(e.groupStates)for(let n of e.groupStates)this.useCard(n.top_of_group,o=&gt;o.fold(n.is_folded));if(e.transitions)for(let n of e.transitions){if(!Rh(n.translation.to)){"process"in globalThis||Xre.default.notify(new Error("invalid point input at onCardsInserted"),o=&gt;{o.addMetadata("arguments",{invalidTranslation:JSON.stringify(n),cmd:JSON.stringify(e)})});continue}this.useCard(n.cardId,o=&gt;o.position=n.translation.to)}if(e.favoriteItems)for(let n of e.favoriteItems)this.useCard(n.id,o=&gt;o.favorite=!0);if(e.pinnedItems)for(let n of e.pinnedItems)this.useCard(n.id,o=&gt;o.pinned=!0);return t}onCardMoved(e){this.useCard(e.cardId,t=&gt;{let[n,o]=[e.position.x-t.position.x,e.position.y-t.position.y];t.position=De(e.position),t.forEachDescendant(i=&gt;{i.position=De(i.position.x+n,i.position.y+o)}),this.bringCardTreeToFront(t,!0)})}onCardMarginsChanged(e){this.useCard(e.cardId,t=&gt;{t.position={...e.position},t.size={...e.layoutSize},t.content.margins={...e.margins},t.markAsModified()})}onCardSizesChanged(e){for(let t of e.changes)this.useCard(t.cardId,n=&gt;{n.position={...t.position},n.size={...t.layoutSize},n.markAsModified()})}onCardDeleted(e){let t=X2();return this.useCard(e.cardId,n=&gt;{n.removeFromGroup(),n.removeFromParent(),t.deleted.push(...this.deleteCard(n.id))}),t}onCardEdited(e){this.hasCard(e.cardId)&amp;&amp;this.useCard(e.cardId,t=&gt;{t.replaceContent(e.replacement)})}onConnectorConnected(e){this.useCards([e.fromId,e.toId],(t,n)=&gt;{t.safeConnect(n,e.asDifferentGroup)})}onConnectorDisconnected(e){this.useCard(e.fromId,t=&gt;{t.purgeNext()})}onConnectorInserted(e){this.useCards([e.conn1.from,e.conn1.to,e.conn2.from,e.conn2.to],(t,n,o,i)=&gt;{n.canBeConnectedFrom(t)&amp;&amp;i.canBeConnectedFrom(o)&amp;&amp;(t.connect(n,e.conn1.as_different_group),o.connect(i,e.conn2.as_different_group))})}onConnectorMoved(e){this.useCard(e.fromId,t=&gt;{t.dashedConnectorPosition=De(e.position)})}onConnectorDismissed(e){this.useCard(e.fromId,t=&gt;{t.dashedConnectorPosition=void 0})}onGroupMoved(e){this.useCard(e.topOfGroup,t=&gt;{let n=e.topPosition.x-t.position.x,o=e.topPosition.y-t.position.y,i=Array.from(t.iterator()),s;for(;s=i.pop();)i.push(...s.children),s.position=De(s.position.x+n,s.position.y+o);this.bringCardTreeToFront(t,!0)})}onGroupDeleted(e){let t=X2();return this.useCard(e.topOfGroup,n=&gt;{n.removeFromGroupAsGroup();for(let o of n.iterator())t.deleted.push(...this.deleteCard(o.id))}),t}onGroupStateChanged(e){this.useCard(e.topOfGroup,t=&gt;{t.fold(e.isFolded)})}onTreeStateChanged(e){let t=e.cardId,n=e.parentId;n?this.useCards([t,n],(o,i)=&gt;{for(let s of[i,...i.parentsIterator()])if(e.grouped){for(let a of o.memberAndChildrenIterator())if(a.id===s.id)return}else if(t===s.id)return;e.resize&amp;&amp;(e.grouped?yp(function*(){for(let s of o.memberAndChildrenIterator())s.id!==i.id&amp;&amp;(yield s)},e.resize.scale,e.resize.pivot):yp(function*(){for(let s of o.familyIterator())s.id!==i.id&amp;&amp;(yield s)},e.resize.scale,e.resize.pivot)),e.grouped?i.addGroup(o):(o.removeFromGroup(),i.addChild(o)),this.bringCardTreeToFront(o,e.grouped)}):this.useCard(t,o=&gt;{e.resize&amp;&amp;yp(()=&gt;o.memberAndChildrenIterator(),e.resize.scale,e.resize.pivot),e.grouped?(o.removeFromGroupAsGroup(),o.forEach(i=&gt;{i.removeFromParent()})):(o.removeFromGroup(),o.removeFromParent()),this.bringCardTreeToFront(o,e.grouped)})}onPinStateChanged(e){this.useCard(e.cardId,t=&gt;{var o;let n=(o=t.prev)!=null?o:t.prevGroup;n==null||n.purgeNext(),t.purgeNext(),t.pinned=e.pinned})}onFavoriteStateChanged(e){this.useCard(e.cardId,t=&gt;{t.favorite=e.favorite})}onStrokeAssetUpdated(e){let t=!1;return this.useCard(e.cardId,n=&gt;{var a;let o={"gadgets.drawn.asset":{remote_id:e.asset.remote_id},"gadgets.drawn.thumbnailRect":e.thumbnailRect,"gadgets.drawn.canvas":e.canvas},i=n.extendedDrawn(),s=(a=i==null?void 0:i.commands)!=null?a:[];if(i&amp;&amp;s.length&gt;0){let l=e.revision,u=i==null?void 0:i.asset_revision;if(u&amp;&amp;El(l,u)&lt;=0)return;let d=0;for(;d&lt;s.length&amp;&amp;!(El(s[d].revision,l)&gt;0);d++);let c=s.slice(d);c.length&gt;0?o={...o,"gadgets.drawn.extended.asset_revision":l,"gadgets.drawn.extended.commands":c}:o={...o,"gadgets.drawn.extended":null}}n.replaceContent(o),t=!0}),t}onStrokeAddDel(e,t){this.useCard(e.cardId,n=&gt;{var a,l;let o=e.operation==="add"?{revision:t,payload:{operation:e.operation,content:e.content}}:{revision:t,payload:{operation:e.operation,id:e.strokeId}},i=(l=(a=n.extendedDrawn())==null?void 0:a.commands)!=null?l:[];i.push(o);let s={"gadgets.drawn.extended.commands":i};if(!n.gadgets.drawn){let{canvas:u}=n.createDrawnGeometry("drawn");s["gadgets.drawn.canvas"]=u}n.replaceContent(s)})}cards(){let e=[];for(let t of this.renderingOrderIterator())e.push(t.toJSON());return e}*familyIterator(){for(let e of this.iterator())yield e}connections(){return Yre(this)}groupStates(){return q2(this)}foldStates(){return[]}treeStates(){return Array.from(this.rootChildrenIterator()).map(gk)}toJSON(){let e=this.cards(),t=["sheet"];return e.some(n=&gt;n.type==="quiz")&amp;&amp;t.push("quiz"),e.some(n=&gt;n.type==="attendance")&amp;&amp;t.push("attendance"),{format:"note",version:SS,data:{metadata:{created_by:"web"},frames:this.cards(),connections:this.connections(),fold_states:this.foldStates(),group_states:this.groupStates(),tree_states:this.treeStates(),pinned_items:this.pinnedItems(),favorite_items:this.favoriteItems()},features:t}}};function X2(r={}){return{deleted:[],inserted:[],...r}}var kc=class{static currentAnimationTime(){return Date.now()/1e3}},ux=class{static calculate(e){let t=e*ux.scale;if(t&lt;1)t-=1-Math.exp(-t);else{let n=.36787944117;t=1-Math.exp(1-t),t=n+e*(1-n)}return t}constructor(){this.normalize=1/ux.calculate(1),this.offset=1-this.normalize*ux.calculate(1)}},_y=ux;_y.scale=8,_y.singleton=new ux;var U8=class{getInterpolation(e){let t=_y.singleton.normalize*_y.calculate(e);return t&gt;0?t+_y.singleton.offset:t}},Ef=class{constructor(){this.startPosition=0;this.currentPosition=0;this.finalPosition=0;this.startVelocity=0;this.currentVelocity=0;this.deceleration=0;this.startTime=0;this.duration=0;this.splineDuration=0;this.splineDistance=0;this.finished=!0;this.overDistance=0;this.flingFriction=.015;this.state=Cd.spline;this.physicalCoeff=Ef.computeDeceleration(.84)}static computeDeceleration(e){return this.gravityEarth*this.inchPerMeter*this.ppi*e}updateScroll(e){this.currentPosition=this.startPosition+Math.round(e*(this.finalPosition-this.startPosition))}static getDeceleration(e){return e&gt;0?-this.gravity:this.gravity}adjustDuration(e,t,n){let o=t-e,i=n-e,s=Math.abs(i/o),a=Nl.singleton.samples,l=Math.floor(a*s);if(l&lt;Nl.singleton.samples){let u=l/a,d=(l+1)/a,c=Nl.singleton.time[l],p=Nl.singleton.time[l+1],h=c+(s-u)/(d-u)*(p-c);this.duration*=h}}startScroll(e,t,n,o){this.finished=!1,this.currentPosition=e,this.startPosition=e,this.finalPosition=e+t,this.startTime=o,this.duration=n,this.deceleration=0,this.startVelocity=0}finish(){this.currentPosition=this.finalPosition,this.finished=!0}setFinalPosition(e){this.finalPosition=e,this.finished=!1}extendDuration(e){let t=kc.currentAnimationTime()-this.startTime;this.duration=t+e,this.finished=!1}springback(e,t,n,o){return this.finished=!0,this.currentPosition=e,this.startPosition=e,this.finalPosition=e,this.startVelocity=0,this.startTime=o,this.duration=0,e&lt;t?this.startSpringback(e,t,0):e&gt;n&amp;&amp;this.startSpringback(e,n,0),!this.finished}startSpringback(e,t,n){this.finished=!1,this.state=Cd.cubic,this.currentPosition=e,this.startPosition=e,this.finalPosition=t;let o=e-t;this.deceleration=Ef.getDeceleration(o),this.startVelocity=-o,this.overDistance=Math.abs(o),this.duration=Math.sqrt(-2*o/this.deceleration)}fling(e,t,n,o,i,s){if(this.overDistance=i,this.finished=!1,this.currentVelocity=t,this.startVelocity=t,this.duration=0,this.splineDuration=0,this.startTime=s,this.currentPosition=e,this.startPosition=e,e&gt;o||e&lt;n){this.startAfterEdge(e,n,o,t,s);return}this.state=Cd.spline;let a=0;t!=0&amp;&amp;(this.duration=this.getSplineFlingDuration(t),this.splineDuration=this.duration,a=this.getSplineFlingDistance(t)),this.splineDistance=a*Math.sign(t),this.finalPosition=e+this.splineDistance,this.finalPosition&lt;n&amp;&amp;(this.adjustDuration(this.startPosition,this.finalPosition,n),this.finalPosition=n),this.finalPosition&gt;o&amp;&amp;(this.adjustDuration(this.startPosition,this.finalPosition,o),this.finalPosition=o)}getSplineDeceleration(e){return Math.log(Nl.singleton.inflexion*Math.abs(e)/(this.flingFriction*this.physicalCoeff))}getSplineFlingDistance(e){let t=this.getSplineDeceleration(e),n=Ef.decelerationRate-1;return this.flingFriction*this.physicalCoeff*Math.exp(Ef.decelerationRate/n*t)}getSplineFlingDuration(e){let t=this.getSplineDeceleration(e),n=Ef.decelerationRate-1;return Math.exp(t/n)}fitOnBounceCurve(e,t,n){let o=-n/this.deceleration,s=n*n/2/Math.abs(this.deceleration),a=Math.abs(t-e),l=Math.sqrt(2*(s+a)/Math.abs(this.deceleration));this.startTime-=l-o,this.currentPosition=t,this.startPosition=t,this.startVelocity=-this.deceleration*l}startBounceAfterEdge(e,t,n){this.deceleration=Ef.getDeceleration(n===0?e-t:n),this.fitOnBounceCurve(e,t,n),this.onEdgeReached()}startAfterEdge(e,t,n,o,i){if(e&gt;t&amp;&amp;e&lt;n){this.finished=!0;return}let s=e&gt;n,a=s?n:t,l=e-a;l*o&gt;=0?this.startBounceAfterEdge(e,a,o):this.getSplineFlingDistance(o)&gt;Math.abs(l)?this.fling(e,o,s?t:e,s?e:n,l,i):this.startSpringback(e,a,o)}notifyEdgeReached(e,t,n,o){this.state===Cd.spline&amp;&amp;(this.overDistance=n,this.startTime=o,this.startAfterEdge(e,t,t,this.currentVelocity,o))}onEdgeReached(){let e=this.startVelocity*this.startVelocity,t=e/(2*Math.abs(this.deceleration)),n=Math.sign(this.startVelocity);t&gt;this.overDistance&amp;&amp;(this.deceleration=-n*e/(2*this.overDistance),t=this.overDistance),this.overDistance=t,this.state=Cd.ballistic,this.finalPosition=this.startPosition+(this.startVelocity&gt;0?t:-t),this.duration=-(this.startVelocity/this.deceleration)}continueWhenFinished(e){switch(this.state){case Cd.spline:if(this.duration&lt;this.splineDuration)this.currentPosition=this.finalPosition,this.startPosition=this.finalPosition,this.startVelocity=this.currentVelocity,this.deceleration=Ef.getDeceleration(this.startVelocity),this.startTime+=this.duration,this.onEdgeReached();else return!1;break;case Cd.ballistic:this.startTime+=this.duration,this.startSpringback(this.finalPosition,this.startPosition,0);break;case Cd.cubic:return!1}return this.update(e),!0}update(e){if(e=e-this.startTime,e===0)return this.duration&gt;0;if(e&gt;this.duration)return!1;let n=0;switch(this.state){case Cd.spline:{if(this.splineDuration===0)return!1;let o=e/this.splineDuration,i=Math.floor(Nl.singleton.samples*o),s=1,a=0;if(i&lt;Nl.singleton.samples){let l=i/Nl.singleton.samples,u=(i+1)/Nl.singleton.samples,d=Nl.singleton.position[i];a=(Nl.singleton.position[i+1]-d)/(u-l),s=d+(o-l)*a}n=s*this.splineDistance,this.currentVelocity=a*this.splineDistance/this.splineDuration;break}case Cd.ballistic:{let o=e;this.currentVelocity=this.startVelocity+this.deceleration*o,n=this.startVelocity*o+this.deceleration*o*o/2;break}case Cd.cubic:{if(this.duration===0)return!1;let o=e/this.duration,i=o*o,s=Math.sign(this.startVelocity);n=s*this.overDistance*(3*i-2*o*i),this.currentVelocity=s*this.overDistance*6*(-o+i);break}}return this.currentPosition=this.startPosition+n,!0}},If=Ef;If.gravityEarth=9.80665,If.inchPerMeter=39.37,If.ppi=160,If.gravity=2e3,If.decelerationRate=Math.log(.78)/Math.log(.9);var z8=class{constructor(){this.inflexion=.35;this.startTension=.5;this.endTension=1;this.samples=100;this.p1=this.startTension*this.inflexion,this.p2=1-this.endTension*(1-this.inflexion);let e=this.samples,t=Array.from({length:this.samples+1}).map(s=&gt;0),n=Array.from({length:this.samples+1}).map(s=&gt;0),o=0,i=0;for(let s=0;s&lt;this.samples;s++){let a=s/e,l=1,u=0,d=0,c=0;for(;u=o+(l-o)/2,c=3*u*(1-u),d=c*((1-u)*this.p1+u*this.p2)+u*u*u,!(Math.abs(d-a)&lt;1e-5);)d&gt;a?l=u:o=u;t[s]=c*((1-u)*this.startTension+u)+u*u*u;let p=1,h=0,f=0;for(;h=i+(p-i)/2,c=3*h*(1-h),f=c*((1-h)*this.startTension+h)+h*h*h,!(Math.abs(f-a)&lt;1e-5);)f&gt;a?p=h:i=h;n[s]=c*((1-h)*this.p1+h*this.p2)+h*h*h}t[this.samples]=1,n[this.samples]=1,this.position=t,this.time=n}},Nl=z8;Nl.singleton=new z8;var Cd=(n=&gt;(n[n.spline=0]="spline",n[n.cubic=1]="cubic",n[n.ballistic=2]="ballistic",n))(Cd||{});var H8=class{constructor(){this.mode=0;this.scrollerX=new If;this.scrollerY=new If;this.interpolator=new U8;this.flywheel=!0}get isFinished(){return this.scrollerX.finished&amp;&amp;this.scrollerY.finished}forceFinished(e){this.scrollerX.finished=e,this.scrollerY.finished=e}get startTime(){return Math.min(this.scrollerX.startTime,this.scrollerY.startTime)}get duration(){return Math.max(this.scrollerX.duration,this.scrollerY.duration)}get currX(){return this.scrollerX.currentPosition}get currY(){return this.scrollerY.currentPosition}get currVelocity(){return Math.hypot(this.scrollerX.currentVelocity,this.scrollerY.currentVelocity)}get startX(){return this.scrollerX.startPosition}get startY(){return this.scrollerY.startPosition}get finalX(){return this.scrollerX.finalPosition}get finalY(){return this.scrollerY.finalPosition}computeScrollOffset(e=kc.currentAnimationTime()){if(this.isFinished)return!1;switch(this.mode){case 0:let t=e-this.scrollerX.startTime,n=this.scrollerX.duration;if(t&lt;n){let o=this.interpolator.getInterpolation(t/n);this.scrollerX.updateScroll(o),this.scrollerY.updateScroll(o)}else this.abortAnimation();break;case 1:this.scrollerX.finished||this.scrollerX.update(e)||this.scrollerX.continueWhenFinished(e)||this.scrollerX.finish(),this.scrollerY.finished||this.scrollerY.update(e)||this.scrollerY.continueWhenFinished(e)||this.scrollerY.finish();break}return!0}startScroll(e,t,n,o,i=H8.defaultDuration){this.mode=0;let s=kc.currentAnimationTime();this.scrollerX.startScroll(e,n,i,s),this.scrollerY.startScroll(t,o,i,s)}springBackOrFling(e,t,n,o,i,s,a,l){this.mode=1;let u=kc.currentAnimationTime();if(!this.scrollerX.springback(e,i,s,u)){let d=n;if(this.flywheel&amp;&amp;!this.scrollerX.finished){let c=this.scrollerX.currentVelocity;Math.sign(d)===Math.sign(c)&amp;&amp;(d+=c)}this.scrollerX.fling(e,d,i,s,0,u)}if(!this.scrollerY.springback(t,a,l,u)){let d=o;if(this.flywheel&amp;&amp;!this.scrollerY.finished){let c=this.scrollerY.currentVelocity;Math.sign(d)===Math.sign(c)&amp;&amp;(d+=c)}this.scrollerY.fling(t,d,a,l,0,u)}}springBack(e,t,n,o,i,s){this.mode=1;let a=kc.currentAnimationTime(),l=this.scrollerX.springback(e,n,o,a),u=this.scrollerY.springback(t,i,s,a);return l||u}fling(e,t,n,o,i,s,a,l,u=0,d=0){let c=n,p=o;if(this.flywheel&amp;&amp;!this.isFinished){let f=this.scrollerX.currentVelocity,m=this.scrollerY.currentVelocity;Math.sign(c)===Math.sign(f)&amp;&amp;Math.sign(p)===Math.sign(m)&amp;&amp;(c+=f,p+=m)}this.mode=1;let h=kc.currentAnimationTime();this.scrollerX.fling(e,c,i,s,u,h),this.scrollerY.fling(t,p,a,l,d,h)}notifyHorizontalEdgeReached(e,t,n){let o=kc.currentAnimationTime();this.scrollerX.notifyEdgeReached(e,t,n,o)}notifyVerticalEdgeReached(e,t,n){let o=kc.currentAnimationTime();this.scrollerY.notifyEdgeReached(e,t,n,o)}get isOverScrolled(){return!this.scrollerX.finished&amp;&amp;this.scrollerX.state!=0||!this.scrollerY.finished&amp;&amp;this.scrollerY.state!=0}abortAnimation(){this.scrollerX.finish(),this.scrollerY.finish()}timePassed(){let e=kc.currentAnimationTime(),t=Math.min(this.scrollerX.startTime,this.scrollerY.startTime);return e-t}isScrollingInDirection(e,t){let n=this.scrollerX.finalPosition-this.scrollerX.startPosition,o=this.scrollerY.finalPosition-this.scrollerY.startPosition;return!this.isFinished&amp;&amp;Math.sign(e)===Math.sign(n)&amp;&amp;Math.sign(t)===Math.sign(o)}},Fy=H8;Fy.defaultDuration=250;function Jre(r,e,t,n){let o=0,i=e.x,s=e.y,a=r.x,l=r.y,u={x:i-a,y:s-l};function d(){return o&gt;=t}function c(h){return o+=h,d()?{x:i,y:s,alpha:n?0:1,visible:!n}:{x:a+u.x*(o/t),y:l+u.y*(o/t),alpha:n?1-o/t:o/t,visible:!0}}let p=c(0);return{get finished(){return d()},update:h=&gt;(p=c(h),p),current(){return p}}}var eM=(r,e,t,n)=&gt;n+t*(r/e);var ms=(r,e,t,n)=&gt;(r/=e,r=r-1,t*Math.sqrt(1-r*r)+n),Zre=(r,e,t,n)=&gt;(r/=e,n+t*(1-(1-r)*(1-r)));function Rl(r,e,t,n=eM){let o=0,[i,s]=[e.x-r.x,e.y-r.y],[a,l]=[r.x,r.y],u=De(a,l);function d(){return o&gt;=t}return{get finished(){return d()},update(c){return o+=c,d()?e:u={x:n(o,t,i,a),y:n(o,t,s,l)}},current(){return u}}}function As({from:r,to:e,duration:t,easing:n=eM}){let o=r,i=0;return{get finished(){return i&gt;=t},current(){return o},update(s){return i+=s,i&gt;=t?(o=e,e):o=n(i,t,e-r,r)}}}function tM(r){let{start:e,velocity:t,minX:n,minY:o,maxX:i,maxY:s}=r,a=new Fy;a.springBackOrFling(e.x,e.y,t.x,t.y,n,i,o,s);let l=De(e);return{get finished(){return a.isFinished},current(){return l},update(u){return a.computeScrollOffset(),l=De(a.currX,a.currY)}}}function ene({from:r,to:e,duration:t,easing:n}){let o=De(r.position),i=$e(r.size),s=0;return{get finished(){return s&gt;=t},current(){return[{...o},{...i}]},update(a){s+=a,s&gt;t&amp;&amp;(s=t);let l=n(s,t,e.position.x-r.position.x,r.position.x),u=n(s,t,e.position.y-r.position.y,r.position.y),d=n(s,t,e.size.width-r.size.width,r.size.width),c=n(s,t,e.size.height-r.size.height,r.size.height);return o={x:l,y:u},i={width:d,height:c},this.current()}}}var vk=class{constructor(e){let{insert:t,duration:n}=e;this.anim=Rl(t.from,t.to,n)}get finished(){return this.anim.finished}current(){return this.anim.current()}update(e){return this.anim.update(e)}},Q2=class{constructor(e){let{from:t,to:n,duration:o,pivot:i}=e;this.anim=As({from:t,to:n,duration:o}),this.to=n,this.pivot=i}get finished(){return!1}current(){return this.anim?this.anim.current():this.to}update(e){if(this.anim){let t=this.anim.update(e);return this.anim.finished&amp;&amp;(this.anim=void 0),t}else return this.to}},wu=class extends Q2{constructor(e){super({from:1,...e})}},Bl=class extends Q2{constructor(t){super(t);this.alpha=1}},_f=class{constructor(e){this.anim=As(e),this.pivot=e.pivot}get finished(){return this.anim.finished}current(){return this.anim.current()}update(e){return this.anim.update(e)}},dx=class{constructor(e){this.alpha=e}},Pc=class{constructor(e,t,n=void 0){this.animation=e;this.direction=t;this.toDocument=n}get finished(){return this.animation.finished}update(e){return this.animation.update(e)}current(){return this.animation.current()}},Ff=class{constructor(e){this.animation=e}get finished(){return this.animation.finished}update(e){return this.animation.update(e)}current(){return this.animation.current()}},J2=class{constructor({fromPos:e,toPos:t,fromScale:n,toScale:o,duration:i}){let s=Zre;this.scaleAnim=As({from:n,to:o,duration:i,easing:s}),this.posAnim=Rl(e,t,i,s),this.alphaAnim=As({from:0,to:1,duration:i,easing:s}),this.toPos=t,this.toScale=o}get finished(){return this.posAnim.finished&amp;&amp;this.scaleAnim.finished}current(){return this.posAnim.finished&amp;&amp;this.scaleAnim.finished?{pos:this.toPos,scale:this.toScale,alpha:1}:{pos:this.posAnim.current(),scale:this.scaleAnim.current(),alpha:this.alphaAnim.current()}}update(e){return this.posAnim.update(e),this.scaleAnim.update(e),this.alphaAnim.update(e),this.current()}},Z2=class{constructor({duration:e,fromScale:t,toScale:n,baseMtx:o,card:i}){let s=Zre;this.scaleAnim=As({from:t,to:n,duration:e,easing:s}),this.alphaAnim=As({from:1,to:0,duration:e,easing:s}),this.baseMtx=o,this.card=i}get finished(){return this.scaleAnim.finished&amp;&amp;this.alphaAnim.finished}current(){return{scale:this.scaleAnim.current(),alpha:this.alphaAnim.current()}}update(e){return this.scaleAnim.update(e),this.alphaAnim.update(e),this.current()}};var rM=class{constructor(e,t=0){this.id=e;this.generation=t}},cx=class extends rM{constructor({id:t,data:n}){super(t);this.data=n}visit(t){let n=My(this.data);Ee(n!=null),t.write(`${this.id} ${this.generation} obj`),t.write(n),t.write("endobj")}},nM=class{constructor(){this.offsets=[[0,65535,"f"]]}add(e,t,n){this.offsets.push([e,t,n])}size(){return this.offsets.length}visit(e){e.write("xref"),e.write(`0 ${this.offsets.length}`);for(let[t,n,o]of this.offsets){let i=`0000000000${t}`.slice(-10),s=`00000${n}`.slice(-5);e.write(`${i} ${s} ${o} `)}}};function mx(r){return typeof r=="string"?{encode:()=&gt;G8(r)}:r instanceof Uint8Array?{encode:()=&gt;r}:{encode:()=&gt;new Uint8Array(r)}}var px=class extends rM{constructor({id:t,data:n,content:o}){super(t);this.data=n,this.content=o}visit(t){var o;let n=this.content.encode();t.write(`${this.id} 0 obj`),t.write(bk({Length:n.byteLength,...(o=this.data)!=null?o:{}})),t.write("stream"),t.write(n),t.write("endstream"),t.write("endobj")}},Hn=class{constructor(e){this.name=e}toString(){return"/"+this.name}};function tne({glyphIdToCodePoints:r}){let e=[],t=[],n=s=&gt;{let a=`${s.toString(16)}`.toUpperCase();return a.length&lt;4&amp;&amp;(a=`0000${a}`.slice(-4)),a.length%2===1?"0"+a:a},o=function*(s){s&gt;65535&amp;&amp;(s-=65536,yield n(s&gt;&gt;&gt;10&amp;1023|55296),s=56320|s&amp;1023),yield n(s)},i=()=&gt;{e.length!==0&amp;&amp;(t.push([`${e.length} beginbfchar`,e.join(`
`),"endbfchar"].join(`
`)),e=[])};for(let[s,a]of r){let l=[];for(let c of a)l.push(...o(c));let u=`&lt;${n(s)}&gt;`,d=`&lt;${l.join(" ")}&gt;`;e.push(`${u} ${d}`),e.length===100&amp;&amp;i()}return i(),`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo &lt;&lt;
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
&gt;&gt; def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
&lt;0000&gt; &lt;FFFF&gt;
endcodespacerange
${t.join(`
`)}
endcmap
CMapName currentdict /CMap defineresource pop
end
end
`}var hx=class{constructor(e){this.prefix=e;this.ids=0}next(){return`${this.prefix}${this.ids++}`}},fx=class{constructor(e){this.hexString=e}};var oM=class{constructor(e){this.dest=e;this.offset=0}write(e){if(typeof e=="string"){let t=G8(e+`
`);this.dest.write(t),this.offset+=t.byteLength}else if(e instanceof ArrayBuffer){let t=new Uint8Array(e);this.dest.write(t),this.offset+=t.byteLength}else this.dest.write(e),this.offset+=e.byteLength}};function My(r){let e;if(typeof r=="boolean")e=`${r}`;else if(typeof r=="string")e=`${$8(r)}`;else if(r===null)e="null";else if(typeof r=="number")e=W8(r);else if(r instanceof Hn)e=`${r.toString()}`;else if(r instanceof cx||r instanceof px)e=`${r.id} ${r.generation} R`;else if(r instanceof Uint8Array)e=QPe(r);else if(r instanceof ArrayBuffer){let t=new DataView(r),n=[];for(let o=0;o&lt;r.byteLength;o++){let i=t.getUint8(o);n.push(i.toString(16))}e=`&lt;${n.join("")}&gt;`}else if(r instanceof fx)e=`&lt;${r.hexString}&gt;`;else if(r instanceof Date){let t=`0000${r.getUTCFullYear()}`.slice(-4),n=`00${r.getUTCMonth()+1}`.slice(-2),o=`00${r.getUTCDate()}`.slice(-2),i=`00${r.getUTCHours()}`.slice(-2),s=`00${r.getUTCMinutes()}`.slice(-2),a=`00${r.getUTCSeconds()}`.slice(-2);e=`(D:${t}${n}${o}${i}${s}${a}+00'00')`}else typeof r=="object"&amp;&amp;r.constructor===Object?e=bk(r):Array.isArray(r)&amp;&amp;(e=`[${r.map(My).join(" ")}]`);return e}function W8(r){if(r&gt;-1e21&amp;&amp;r&lt;1e21)return String(Math.round(r*1e6)/1e6);throw new Error(`unsupported number: ${r}`)}var YPe=/[\n\r\t\b\f()\\]/g,XPe=new Map([[`
`,"\\n"],["\r","\\r"],["	","\\t"],["\b","\\b"],["\f","\\f"],["\\","\\\\"],["(","\\("],[")","\\)"]]);function QPe(r){let e=[];for(let t=0;t&lt;r.byteLength;t++){let n=r[t];e.push(n.toString(16))}return`&lt;${e.join("")}&gt;`}function $8(r){return`(${r.replace(YPe,t=&gt;{var n;return(n=XPe.get(t))!=null?n:""})})`}function bk(r){let e="";e+=`&lt;&lt;
`;for(let t in r){if(!r.hasOwnProperty(t))continue;let n=My(new Hn(t)),o=My(r[t]);n!=null&amp;&amp;o!=null&amp;&amp;(e+=n,e+=" ",e+=o,e+=`
`)}return e+="&gt;&gt;",e}function G8(r){return new TextEncoder().encode(r)}var V8=2*Math.PI,rne=.5*Math.PI,j8=4*((Math.sqrt(2)-1)/3),gx=class{constructor(e){this.doc=e;this.commands=[];this.saveRestoreCount=0;this.opacity0=e.addGraphicState({ca:0}),this.opacity1=e.addGraphicState({ca:1})}save(){this.commands.push("q"),this.saveRestoreCount++}restore(){this.commands.push("Q"),this.saveRestoreCount--}translate(e,t){this.commands.push([1,0,0,1,e,t,"cm"])}scale(e,t){this.commands.push([e,0,0,t,0,0,"cm"])}rotate(e){let t=Math.cos(e),n=Math.sin(e);this.commands.push([t,n,-n,t,0,0,"cm"])}transform(e,t,n,o,i,s){this.commands.push([e,t,n,o,i,s,"cm"])}fillColor(e,t,n){e=Math.max(0,Math.min(1,e)),t=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,n)),this.commands.push([e,t,n,"rg"])}getGSForOpacity(e){return e===0?this.opacity0:e===1?this.opacity1:this.doc.addGraphicState({ca:e})}fillOpacity(e){this.commands.push([`/${this.getGSForOpacity(e)}`,"gs"])}strokeColor(e,t,n){e=Math.max(0,Math.min(1,e)),t=Math.max(0,Math.min(1,t)),n=Math.max(0,Math.min(1,n)),this.commands.push([e,t,n,"RG"])}strokeOpacity(e){this.commands.push([`/${this.getGSForOpacity(e)}`,"GS"])}setLineDash(e,t=0){var o;let n=(o=My(e))!=null?o:[];this.commands.push([n,t,"d"])}lineWidth(e){this.commands.push([e,"w"])}lineJoin(e){this.commands.push([e,"j"])}lineCap(e){this.commands.push([e,"J"])}moveTo(e,t){this.commands.push([e,t,"m"])}lineTo(e,t){this.commands.push([e,t,"l"])}arc(e,t,n,o,i,s=!1){let a=i-o;Math.abs(a)&gt;V8?a=V8:a!==0&amp;&amp;s!==a&lt;0&amp;&amp;(a=(s?-1:1)*V8+a);let l=Math.ceil(Math.abs(a)/rne),u=a/l,d=u/rne*j8*n,c=o,p=-Math.sin(c)*d,h=Math.cos(c)*d,f=e+Math.cos(c)*n,m=t+Math.sin(c)*n;this.moveTo(f,m);for(let g=0;g&lt;l;g++){let v=f+p,b=m+h;c+=u,f=e+Math.cos(c)*n,m=t+Math.sin(c)*n,p=-Math.sin(c)*d,h=Math.cos(c)*d;let C=f-p,x=m-h;this.bezierCurveTo(v,b,C,x,f,m)}}bezierCurveTo(e,t,n,o,i,s){this.commands.push([e,t,n,o,i,s,"c"])}quadraticCurveTo(e,t,n,o){this.commands.push([e,t,n,o,"v"])}closePath(){this.commands.push("h")}endPath(){this.commands.push("n")}ellipse(e,t,n,o=n){e-=n,t-=o;let i=n*j8,s=o*j8,a=e+n*2,l=t+o*2,u=e+n,d=t+o;this.moveTo(e,d),this.bezierCurveTo(e,d-s,u-i,t,u,t),this.bezierCurveTo(u+i,t,a,d-s,a,d),this.bezierCurveTo(a,d+s,u+i,l,u,l),this.bezierCurveTo(u-i,l,e,d+s,e,d),this.closePath()}rect(e,t,n,o){this.commands.push([e,t,n,o,"re"])}fillRect(e,t,n,o){this.rect(e,t,n,o),this.fill()}strokeRect(e,t,n,o){this.rect(e,t,n,o),this.stroke()}fill(e=!1){let t=e?"f*":"f";this.commands.push(t)}fillAndStroke(e=!1){let t=e?"B*":"B";this.commands.push(t)}stroke(){this.commands.push("S")}closeAndStroke(){this.commands.push("s")}clip(e=!1){let t=e?"W*":"W";this.commands.push(t)}do(e){let t=this.doc.xObjectNameMap.get(e);if(t==null)throw new Error(`'${e}' not found in XObjects`);this.commands.push([`/${t}`,"Do"])}doLiterally(e){this.commands.push([`/${e}`,"Do"])}font(e,t){let n=this.doc.fontNameMap.get(e);if(!n)throw new Error(`font '${e}' not defined`);this.commands.push([`/${n}`,t,"Tf"])}textCharSpace(e){this.commands.push([e,"Tc"])}textWordSpace(e){this.commands.push([e,"Tw"])}textScale(e){this.commands.push([e,"Th"])}textLeading(e){this.commands.push([e,"Tl"])}textRenderMode(e){this.commands.push([e,"Tr"])}textRise(e){this.commands.push([e,"Ts"])}textMove(e,t){this.commands.push([e,t,"Td"])}textNextLine(){this.commands.push("T*")}textTransform(e,t,n,o,i,s){this.commands.push([e,t,n,o,i,s,"Tm"])}text(e){if(typeof e=="string")this.commands.push(["BT",$8(e),"Tj","ET"]);else{let t=[];for(let n of e){let o=`0000${n.toString(16).toUpperCase()}`.slice(-4);t.push(o)}this.commands.push(["BT",`&lt;${t.join("")}&gt;`,"Tj","ET"])}}encode(){this.saveRestoreCount!==0&amp;&amp;console.warn("save/restore count mismatch: "+this.saveRestoreCount);let e=this.commands.map(nne).join(`
`);return new TextEncoder().encode(e)}};function nne(r){return typeof r=="number"?""+W8(r):typeof r=="string"?r:r.map(nne).join(" ")}function one(r){switch(r){case"miter":return 0;case"round":return 1;case"bevel":return 2}}function ine(r){switch(r){case"butt":return 0;case"round":return 1;case"square":return 2}}var iM=class{constructor(){this.commands=[];this._path=new Path2D}arc(e,t,n,o,i,s){this._path.arc(e,t,n,o,i),this.commands.push(["arc",[e,t,n,o,i,s]])}arcTo(e,t,n,o,i){this._path.arcTo(e,t,n,o,i),this.commands.push(["arcTo",[e,t,n,o,i]])}bezierCurveTo(e,t,n,o,i,s){this._path.bezierCurveTo(e,t,n,o,i,s),this.commands.push(["bezierCurveTo",[e,t,n,o,i,s]])}closePath(){this._path.closePath(),this.commands.push(["closePath",[]])}ellipse(e,t,n,o,i,s,a,l){this._path.ellipse(e,t,n,o,i,s,a,l),this.commands.push(["ellipse",[e,t,n,o,i,s,a,l]])}lineTo(e,t){this._path.lineTo(e,t),this.commands.push(["lineTo",[e,t]])}moveTo(e,t){this._path.moveTo(e,t),this.commands.push(["moveTo",[e,t]])}quadraticCurveTo(e,t,n,o){this._path.quadraticCurveTo(e,t,n,o),this.commands.push(["quadraticCurveTo",[e,t,n,o]])}rect(e,t,n,o){this._path.rect(e,t,n,o),this.commands.push(["rect",[e,t,n,o]])}toPath2D(){return new Path2D(this._path)}drawPdf(e){for(let[t,n]of this.commands)switch(t){case"arc":{let[o,i,s,a,l,u]=n;e.arc(o,i,s,a,l,u);break}case"arcTo":break;case"bezierCurveTo":{let[o,i,s,a,l,u]=n;e.bezierCurveTo(o,i,s,a,l,u);break}case"closePath":{e.closePath();break}case"ellipse":{let[o,i,s,a]=n;e.ellipse(o,i,s,a);break}case"lineTo":{let[o,i]=n;e.lineTo(o,i);break}case"moveTo":{let[o,i]=n;e.moveTo(o,i);break}case"quadraticCurveTo":{let[o,i,s,a]=n;e.quadraticCurveTo(o,i,s,a);break}case"rect":{let[o,i,s,a]=n;e.rect(o,i,s,a);break}}}};var Wp=class{constructor(){this._path=new iM;this.current=De(0,0);this.bounds=new ri}moveTo(e,t){this._path.moveTo(e,t),this.current=De(e,t)}lineTo(e,t){this._path.lineTo(e,t);let[n,o]=[Math.min(e,this.current.x),Math.max(e,this.current.x)],[i,s]=[Math.min(t,this.current.y),Math.max(t,this.current.y)];this.bounds.add(qe(n,i,o-n,s-i)),this.current=De(e,t)}bezierCurveTo(e,t,n,o,i,s){this._path.bezierCurveTo(e,t,n,o,i,s);let a=pf.boundingBox(0,this.current,De(e,t),De(n,o),De(i,s));this.bounds.add(a),this.current=De(i,s)}arc(e,t,n,o,i,s){this._path.arc(e,t,n,o,i,s),this.bounds.add(qe(e-n,t-n,2*n,2*n));let a=De(e+n*Math.cos(i),t+n*Math.sin(i));this.current=De(a.x,a.y)}get path(){return this._path}},vx=class{constructor(){this.orbit=[];this.lineCap=[];this.lineDash=[];this.lineJoin=[];this._bounds=new ri}addOrbit(e,t={}){let{lineCap:n,lineDash:o,lineJoin:i}=t;this.orbit.push(e.path),this.lineCap.push(n||"butt"),this.lineDash.push(o||[]),this.lineJoin.push(i||"round"),this._bounds.add(e.bounds)}stroke(e,t,n){e.save(),e.lineWidth=t,e.strokeStyle=n.toCSSRGBA();for(let o=0;o&lt;this.orbit.length;o++){e.beginPath();let i=this.orbit[o],s=this.lineCap[o],a=this.lineDash[o],l=this.lineJoin[o];e.setLineDash(a),e.lineCap=s,e.lineJoin=l,e.stroke(i.toPath2D())}e.restore()}strokePdf(e,t,n){e.save(),e.lineWidth(t);let{r:o,g:i,b:s}=n.normalized();e.strokeColor(o,i,s);for(let a=0;a&lt;this.orbit.length;a++){let l=this.orbit[a],u=this.lineCap[a],d=this.lineDash[a],c=this.lineJoin[a];e.setLineDash(d),e.lineCap(ine(u)),e.lineJoin(one(c)),l.drawPdf(e),e.stroke()}e.restore()}hitTest(e,t,n,o){e.save(),e.lineWidth=o;for(let i=0;i&lt;this.orbit.length;i++){e.beginPath();let s=this.orbit[i],a=this.lineCap[i],l=this.lineDash[i],u=this.lineJoin[i];if(e.setLineDash(l),e.lineCap=a,e.lineJoin=u,e.isPointInStroke(s.toPath2D(),t,n))return e.restore(),!0}return e.restore(),!1}getBounds(e){let t=this._bounds.rect;if(t===void 0)return;let n=e*.5;return qe(t.x-n,t.y-n,t.width+e,t.height+e)}};var sne=9.482,ane=2.462135903752836;var lne=16,rv=mt("#ffeb32ff"),bx=mt("#f3ba04ff"),$p=3.265,K8=.5;var q8;function JPe(){return q8||(q8=fr.create()),q8.getContext2dForce()}function cne({ev:r,from:e,to:t,mtx:n,asDifferentGroup:o,handleScale:i,toolVisible:s,scaleToParent:a,dpr:l}){e.isFolded&amp;&amp;(e=e.head()),gne({sourceItem:e,outletItem:t,keepOutletOut:!1,handleScale:i});let u=fne({from:{card:e},to:{card:t},handleScale:i,asDifferentGroup:o,isGroupGripHidden:!s}),d=n.inverted().cross(r.x,r.y),c;s&amp;&amp;o&amp;&amp;t.foldHandleVisible()?c=lM(t,i):c=t.bounds;let p=$p+K8*a,h=Math.max(lne*a/n.a*l,p),f=u.getBounds(h*2);if(!f)return!1;let m=ZPe(c,f,t.inPort);if(Pn(m,d))return!1;let g=JPe();return u.hitTest(g,d.x,d.y,h)}function ZPe(r,e,t){let n,o=new Sn(r),i=new Sn(e);return t==="left"?n=An({left:0,top:0,right:i.right-o.right,bottom:0}):t==="right"?n=An({left:o.x-i.x,top:0,right:0,bottom:0}):t==="top"?n=An({left:0,top:0,right:0,bottom:i.bottom-o.bottom}):n=An({left:0,top:o.y-i.y,right:0,bottom:0}),Vu(o,n)}function pne(r,e){let[t,n,o,i]=e,s=1-r,a=r*r,l=s*s,u=l*s,d=a*r,c={x:t.x*u,y:t.y*u};return c.x+=n.x*3*l*r,c.y+=n.y*3*l*r,c.x+=o.x*3*s*a,c.y+=o.y*3*s*a,c.x+=i.x*d,c.y+=i.y*d,c}function hne({from:r,to:e,asDifferentGroup:t,handleScale:n,visibleRect:o,toolVisible:i,isReadonly:s=!1}){var p,h,f,m;gne({sourceItem:r.card,outletItem:e.card,keepOutletOut:!1,handleScale:n});let a=fne({from:r,to:e,handleScale:n,asDifferentGroup:t,isGroupGripHidden:!i||s}),l=us(r.card)*Math.max((h=(p=r.mtx)==null?void 0:p.a)!=null?h:1,(m=(f=e.mtx)==null?void 0:f.a)!=null?m:1),u=$p*l,d=a.getBounds(u),c={orbits:a,lineScale:l};return o&amp;&amp;d&amp;&amp;!(Oi(o,d)||Oi(d,o))?[c,!1]:[c,!0]}function une(r){switch(r){case"left":return new Pr(-1,0);case"top":return new Pr(0,-1);case"right":return new Pr(1,0);case"bottom":return new Pr(0,1)}}function ov(r,e){return new Pr(e.x-r.x,e.y-r.y)}function Y8({unitNormal:r,start:e,end:t,aux:n}){let o=ov(e,t),s=o.magnitude()*.5,a=Math.min(s,Math.max(n,Math.abs(o.x)*.5)),l=Math.min(s,Math.max(n,Math.abs(o.y)*.5)),u=e.x+a*r.x,d=e.y+l*r.y;return De(u,d)}function eAe({start:r,control1:e,control2:t,end:n,division:o}){let i=1/o,s=0,a=r;for(let l=1;l&lt;o;l++){let u=i*l,d=pne(u,[r,e,t,n]);s+=ov(a,d).magnitude(),a=d}return s+=ov(a,n).magnitude(),s}function tAe({start:r,control1:e,control2:t,end:n,hint:o,distanceFromEnd:i}){let s=eAe({start:r,control1:e,control2:t,end:n,division:16});if(s===0)return new Pr(o.x*i,o.y*i);if(s&lt;i){let c=ov(n,r);if(c.magnitude()===0)return new Pr(o.x*i,o.y*i);{let h=c.normalized();return new Pr(h.x*i,h.y*i)}}let a=1-i/s,l=pne(a,[r,e,t,n]),u=ov(n,l);if(u.magnitude()===0)return new Pr(o.x*i,o.y*i);{let c=u.normalized();return new Pr(c.x*i,c.y*i)}}var sM=9.482,yk=2.462135903752836,rAe=16.797,nAe=10;function oAe({from:r,to:e,scale:t}){let n=30*t,o=De(r.location.x,r.location.y),i=De(e.location.x,e.location.y),s=une(r.type),a=une(e.type),l=Y8({unitNormal:s,start:o,end:i,aux:n}),u=Y8({unitNormal:a,start:i,end:o,aux:n}),d=ov(r.center,e.center),c=d.magnitude(),p=c===0?a:d.scaled(c),h=sM*t,f=yk*t,g=tAe({start:o,control1:l,control2:u,end:i,hint:p,distanceFromEnd:h}).normalized(),v=g.scaled(f),b=De(i.x+v.x,i.y+v.y),C=g.scaled(h),x=De(b.x+C.x,b.y+C.y),y=Y8({unitNormal:g,start:x,end:o,aux:n});return[o,l,y,x]}function iAe(r){var g,v,b,C;let{handleScale:e,from:t,to:n,asDifferentGroup:o,isGroupGripHidden:i}=r,s;o&amp;&amp;i?s="left":s=n.card.inPort;let a=vne(t.card,t.card.outPort),l=bne(n.card,s,o&amp;&amp;!i,e),u=dne(t.card,t.card.outPort),d=o&amp;&amp;!i?yne(n.card):dne(n.card,s);if(t.mtx){let x=new ft().translate(-t.card.position.x,-t.card.position.y).prependMatrix(t.mtx).translate(t.card.position.x,t.card.position.y);a=x.applied(a),u=x.applied(u)}if(n.mtx){let x=new ft().translate(-n.card.position.x,-n.card.position.y).prependMatrix(n.mtx).translate(n.card.position.x,n.card.position.y);l=x.applied(l),d=x.applied(d)}let c=us(n.card)*Math.max((v=(g=t.mtx)==null?void 0:g.a)!=null?v:1,(C=(b=n.mtx)==null?void 0:b.a)!=null?C:1),[p,h,f,m]=oAe({from:{location:a,type:t.card.outPort,center:u},to:{location:l,type:s,center:d},scale:c});return{p0:p,cp0:h,cp1:f,p1:m,fromPoint:a,toPoint:l}}function fne(r){let{p0:e,cp0:t,cp1:n,p1:o,toPoint:i}=iAe(r),{orbits:s,lineEnd:a}=aM({stemFrom:o,stemTo:i}),l=new Wp;return l.moveTo(e.x,e.y),l.bezierCurveTo(t.x,t.y,n.x,n.y,o.x,o.y),l.lineTo(a.x,a.y),s.addOrbit(l),s}function aM(r){let{stemFrom:e,stemTo:t}=r,n=new vx,o=ov(e,t),i=o.magnitude()/(sM+yk)*yk,s=new Pr(t).subbed(o.normalized().scaled(i)),a=o.magnitude()/(sM+yk)*rAe,l=o.normalized().rotate(90,"deg").scale(a*.5),u=De(e.x+l.x,e.y+l.y),d=De(e.x-l.x,e.y-l.y),c=new Wp;return c.moveTo(u.x,u.y),c.lineTo(s.x,s.y),c.lineTo(d.x,d.y),n.addOrbit(c,{lineCap:"round",lineJoin:"miter"}),{orbits:n,lineEnd:De(s.x,s.y)}}function mne(r,e,t){let o=ov(r,e).normalized().scale((sM+yk)*t),i=De(e.x-o.x,e.y-o.y),{orbits:s,lineEnd:a}=aM({stemFrom:i,stemTo:e}),l=new Wp;l.moveTo(r.x,r.y),l.lineTo(a.x,a.y);let u=nAe*t;return s.addOrbit(l,{lineCap:"round",lineDash:[u,u]}),s}function yx(r,e,t){let n=$p*t,o=n+K8*t/window.devicePixelRatio;r instanceof gx?(e.strokePdf(r,o,bx),e.strokePdf(r,n,rv)):(e.stroke(r,o,bx),e.stroke(r,n,rv))}function gne({sourceItem:r,outletItem:e,keepOutletOut:t,handleScale:n}){let o=ma.eval({sourceItem:r,outletItem:e,keepSourceIn:!0}),i=o.decideOutletPort({outletItem:e,keepOutletOut:t});e.inPort!==i&amp;&amp;(e.inPort=i);let s=o.decideSourcePort({sourceItem:r,outletItem:e,outletPort:i,handleScale:n});r.outPort!==s&amp;&amp;(r.outPort=s)}var nv=class{constructor(e,t){this.portIndex=e;this.score=t}get sourcePort(){return Ll.sourcePort[this.portIndex]}get outletPort(){return Ll.outletPort[this.portIndex]}},ma=class{constructor(e,t,n){this.best=e;this.second=t;this.third=n}getBestSourcePortEntry({sourceItem:e,keepSourceIn:t}){let n=ma.getSourceDisablePortIndex({clipItem:e,keepSourceIn:t});return this.best.portIndex==n?this.second:this.best}getSecondSourcePortEntry({sourceItem:e,keepSourceIn:t}){let n=ma.getSourceDisablePortIndex({clipItem:e,keepSourceIn:t});return this.best.portIndex==n?this.third:this.second.portIndex==n?this.third:this.second}getSecondOutletPortEntry({outletItem:e,keepOutletOut:t}){let n=ma.getOutletDisablePortIndex({clipItem:e,keepOutletOut:t});return this.best.portIndex==n?this.third:this.second.portIndex==n?this.third:this.second}getBestOutletPortEntry({outletItem:e,keepOutletOut:t}){let n=ma.getOutletDisablePortIndex({clipItem:e,keepOutletOut:t});return this.best.portIndex==n?this.second:this.best}decideOutletPort({outletItem:e,keepOutletOut:t}){if(e.isHead||t)return this.getBestOutletPortEntry({outletItem:e,keepOutletOut:t}).outletPort;let n=this.getBestOutletPortEntry({outletItem:e,keepOutletOut:!1}),o=e.visibleNextCard();if(o===void 0)return n.outletPort;let s=ma.eval({sourceItem:e,outletItem:o,keepSourceIn:!1}).getBestSourcePortEntry({sourceItem:o,keepSourceIn:!1});return n.outletPort==s.sourcePort&amp;&amp;n.score&gt;s.score?this.getSecondOutletPortEntry({outletItem:e,keepOutletOut:!1}).outletPort:n.outletPort}static getSourcePortScore({sourceItem:e,entry:t,outletPosition:n}){let o=vne(e,t.sourcePort),i=n.x-o.x,s=n.y-o.y;return new Pr(De(i,s)).sqrMagnitude()}decideSourcePort({sourceItem:e,outletItem:t,outletPort:n,handleScale:o}){let i=e.nextGroup===t,s=bne(t,n,i,o),a=this.getBestSourcePortEntry({sourceItem:e,keepSourceIn:!0}),l=this.getSecondSourcePortEntry({sourceItem:e,keepSourceIn:!0}),u=ma.getSourcePortScore({sourceItem:e,entry:a,outletPosition:s}),d=ma.getSourcePortScore({sourceItem:e,entry:l,outletPosition:s});return u&gt;d?l.sourcePort:a.sourcePort}static getSourceDisablePortIndex({clipItem:e,keepSourceIn:t}){return e.foldHandleVisible()?Ll.sourceIndex.get("left"):t?Ll.sourceIndex.get(e.inPort):-1}static getOutletDisablePortIndex({clipItem:e,keepOutletOut:t}){return e.foldHandleVisible()?Ll.outletIndex.get("right"):t&amp;&amp;e.visibleNextCard()!==void 0?Ll.outletIndex.get(e.outPort):-1}static rank({sourceFrame:e,sourceDisablePortIndex:t,outletFrame:n,outletDisablePortIndex:o}){let i=tn(n).x-tn(e).x,s=tn(n).y-tn(e).y,a=d4(Math.atan2(s,i)*d1+360,360),l=4,u=360/l,d=d4(a/u,l),c=Math.round(d),p=c%l,h=d-c,f=Math.abs(h),m=(p+Math.sign(h)*Math.ceil(Math.abs(h))+4)%l;p==m&amp;&amp;(m=(p+1)%l);let g=1-f,v=(c-(m-p)+4)%l,b=1,C=Ll.perpendicular[p],x=Math.min(new Pr(e.width*C.x,e.height*C.y).magnitude(),new Pr(n.width*C.x,n.height*C.y).magnitude())*.5,y=new Pr(i*C.x,s*C.y).magnitude();if(p==o&amp;&amp;y&lt;x||p==t&amp;&amp;y&lt;x){let S=new nv(m,g),T=new nv(v,b),w=new nv((p+2)%4,2);return new ma(S,T,w)}else{let S=new nv(p,f),T=new nv(m,g),w=new nv(v,b);return new ma(S,T,w)}}static eval({sourceItem:e,outletItem:t,keepSourceIn:n}){let o=ma.getSourceDisablePortIndex({clipItem:e,keepSourceIn:n}),i=ma.getOutletDisablePortIndex({clipItem:t,keepOutletOut:!1});if(t.foldHandleVisible()){let s=yne(t),a=us(t),l=wi*a,u=qe(s.x-l,s.y-l,l*2,l*2);return ma.rank({sourceFrame:e.bounds,sourceDisablePortIndex:o,outletFrame:u,outletDisablePortIndex:i})}else return ma.rank({sourceFrame:e.bounds,sourceDisablePortIndex:o,outletFrame:t.bounds,outletDisablePortIndex:i})}},Ll=class{};Ll.perpendicular=[new Pr(0,1),new Pr(-1,0),new Pr(0,-1),new Pr(1,0)],Ll.sourceIndex=new Map([["left",2],["top",3],["right",0],["bottom",1]]),Ll.outletIndex=new Map([["left",0],["top",1],["right",2],["bottom",3]]),Ll.sourcePort=["right","bottom","left","top"],Ll.outletPort=["left","top","right","bottom"];function vne(r,e){let t=r.bounds,{width:n,height:o}=t,i=r.position.x,s=r.position.y,a=us(r);return e==="right"?r.isFolded?i=t.x+n+ju*a:i=t.x+n:e==="left"?i=t.x:e==="top"?s=t.y:e==="bottom"&amp;&amp;(r.isFolded?s=t.y+o+ju*a:s=t.y+o),De(i,s)}function bne(r,e,t,n){let o=r.bounds,{width:i,height:s}=o,a=$p*n,l=(Aa+wi)*n,u=wi*n;if(t){let d=r.position.x-i/2-l,c=r.position.y;return e==="top"?De(d,c-(u+a*.5)):e==="bottom"?De(d,c+(u+a*.5)):De(d-(u+a*.5),c)}else{let d=r.position.x,c=r.position.y;return e==="top"?De(d,c-s/2):e==="left"?De(d-i/2,c):e==="bottom"?De(d,c+s/2):De(d+i/2,c)}}function yne(r){let e=r.bounds,t=us(r),n=(Aa+wi)*t,o=r.position.x-e.width/2-n,i=r.position.y;return De(o,i)}function dne(r,e){let t=r.isFolded?ju:0,n=r.position.x,o=r.position.y;return e==="top"||e==="left"?De(n,o):e==="right"?De(n+t,o):De(n,o+t)}function Cne(r){return"TouchEvent"in window&amp;&amp;r instanceof TouchEvent}function uM(r){return"Touch"in window&amp;&amp;r instanceof Touch}function iv(r){return"PointerEvent"in window&amp;&amp;r instanceof PointerEvent}function oi(r){if(!r.down)return!1;let e=r.timestamp-r.down.timestamp;return!cM(r)&amp;&amp;e&lt;p1}function dM(r){if(!r.down)return!1;let e=r.timestamp-r.down.timestamp;return!cM(r)&amp;&amp;e&gt;=p1}function cM(r){return Mf(r)&gt;=uE}function Sne(r,e){if(!r.down)return!1;let t=r.timestamp-r.down.timestamp,n=Math.abs(r.x-r.down.x),o=e?1:devicePixelRatio;return t&lt;500&amp;&amp;n&gt;2*o}var Gn=class{constructor(e,t){this.target=e;this.pointers=new Map;this.downEvents=new Map;this.prevEvents=new Map;this._handler=e=&gt;t=&gt;{Cne(t)?this.handleTouchEvent(e,t):iv(t)?this.handlePointerEvent(e,t):this.handleMouseEvent(e,t)};this.handleDown=this._handler("down");this.handleMove=this._handler("move");this.handleUp=this._handler("up");this.handleCancel=this._handler("cancel");this.onSingle=()=&gt;{};this.onDoubleMove=()=&gt;{};var n,o,i,s;this.ignoreDevicePixelRatio=(n=t==null?void 0:t.ignoreDevicePixelRatio)!=null?n:!1,this.onlyEventOnTarget=(o=t==null?void 0:t.onlyEventOnTarget)!=null?o:!0,this.preventOnTouch=(i=t==null?void 0:t.preventOnTouch)!=null?i:!0,this.invertTargetTransform=(s=t==null?void 0:t.invertTargetTransform)!=null?s:!0,e.addEventListener("contextmenu",a=&gt;{a.preventDefault(),a.stopPropagation()}),window.ontouchstart!==void 0?(e.addEventListener("touchstart",this.handleDown),e.addEventListener("touchmove",this.handleMove),e.addEventListener("touchend",this.handleUp),e.addEventListener("touchcancel",this.handleCancel)):window.onpointerdown!==void 0?(e.addEventListener("pointerdown",this.handleDown),window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleUp),window.addEventListener("pointercancel",this.handleCancel)):(e.addEventListener("mousedown",this.handleDown),window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))}unbind(){window.ontouchstart!==void 0?(this.target.removeEventListener("touchstart",this.handleDown),this.target.removeEventListener("touchmove",this.handleMove),this.target.removeEventListener("touchend",this.handleUp),this.target.removeEventListener("touchcancel",this.handleCancel)):window.onpointerdown!==void 0?(this.target.removeEventListener("pointerdown",this.handleDown),window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleUp),window.removeEventListener("pointercancel",this.handleCancel)):(this.target.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp))}handleMouseEvent(e,t){if(e!=="down"&amp;&amp;!this.pointers.has(0))return;this.pointers.set(0,t),t.preventDefault(),t.stopPropagation();let[n,o]=this.globalToLocal(t),i=this.createCanvasPointerEvent({id:0,original:t,position:{x:n,y:o}},t.timeStamp);e==="down"?(this.downEvents.set(0,i),this.onSingle("down",i)):e==="move"?this.onSingle("move",i):e==="up"&amp;&amp;this.onSingle("up",i),this.prevEvents.set(0,i),e==="up"&amp;&amp;(this.prevEvents.delete(0),this.downEvents.delete(0),this.pointers.delete(0))}globalToLocal(e){let{left:t,top:n}=this.target.getBoundingClientRect(),o=this.ignoreDevicePixelRatio?1:window.devicePixelRatio,i=this.invertTargetTransform?t:0,s=this.invertTargetTransform?n:0;return[(e.x-i)*o,(e.y-s)*o]}handlePointerEvent(e,t){if(e!=="down"&amp;&amp;!this.pointers.has(t.pointerId))return;e==="down"||e==="move"?this.pointers.set(t.pointerId,t):(e==="up"||e==="cancel")&amp;&amp;this.pointers.delete(t.pointerId),t.preventDefault(),t.stopPropagation();let n=[{id:t.pointerId,position:{x:t.x,y:t.y},original:t}],o=[...this.pointers.entries()].map(([s,a])=&gt;{let l=a;return{id:s,original:l,position:{x:l.x,y:l.y}}}),i;typeof t.getCoalescedEvents=="function"&amp;&amp;(i=t.getCoalescedEvents().map(s=&gt;{let[a,l]=this.globalToLocal({x:s.x,y:s.y});return{x:a,y:l}}),i.length===0&amp;&amp;(i=void 0)),this.handleMultiPointerEvent(e,{changedPointers:n,pointers:o,coalescedPoints:i})}handleTouchEvent(e,t){this.preventOnTouch&amp;&amp;t.preventDefault(),t.stopPropagation();let n=[];for(let s=0;s&lt;t.changedTouches.length;s++){let a=t.changedTouches[s];(!this.onlyEventOnTarget||a.target===this.target)&amp;&amp;(n.push({id:a.identifier,original:a,position:{x:a.pageX,y:a.pageY}}),e==="down"||e==="move"?this.pointers.set(a.identifier,a):(e==="up"||e==="cancel")&amp;&amp;this.pointers.delete(a.identifier))}let o=[],i=this.onlyEventOnTarget?t.targetTouches:t.touches;for(let s=0;s&lt;i.length;s++){let a=i[s];o.push({id:a.identifier,original:a,position:{x:a.pageX,y:a.pageY}})}this.handleMultiPointerEvent(e,{pointers:o,changedPointers:n})}handleMultiPointerEvent(e,t){var o;let n=performance.now();if(e==="down")for(let i of t.changedPointers){let s=this.createCanvasPointerEvent(i,n);this.downEvents.set(i.id,s),this.prevEvents.set(i.id,s)}if(t.pointers.length===0&amp;&amp;t.changedPointers.length&gt;0){let i=t.changedPointers[0],s=this.createCanvasPointerEvent(i,n);(o=this.onSingle)==null||o.call(this,"up",s)}else if(t.pointers.length===1){let i=t.pointers[0],s=this.createCanvasPointerEvent(i,n,t.coalescedPoints);e==="down"?this.onSingle("down",s):e==="move"&amp;&amp;this.onSingle("move",s),this.prevEvents.set(i.id,s)}else if(t.pointers.length===2&amp;&amp;e==="move"){let i=this.createCanvasPointerEvent(t.pointers[0],n,t.coalescedPoints),s=this.createCanvasPointerEvent(t.pointers[1],n,t.coalescedPoints);this.onDoubleMove(i,s)}for(let i of t.changedPointers)if(e==="down"||e==="move"){let s=this.createCanvasPointerEvent(i,n,t.coalescedPoints);this.prevEvents.set(i.id,s)}else(e==="up"||e==="cancel")&amp;&amp;(this.downEvents.delete(i.id),this.prevEvents.delete(i.id))}createCanvasPointerEvent(e,t,n){let o=this.downEvents.get(e.id),i=this.prevEvents.get(e.id),[s,a]=this.globalToLocal(e.position),[l,u]=[0,0],[d,c]=[0,0];i&amp;&amp;([l,u]=[s-i.x,a-i.y],[d,c]=[i.totalMovementX+Math.abs(l),i.totalMovementY+Math.abs(u)]);let p,h,f=(o==null?void 0:o.original)||e.original;return f instanceof MouseEvent&amp;&amp;(p=f.button,h=f.buttons),{x:s,y:a,dx:l,dy:u,totalMovementX:d,totalMovementY:c,original:e.original,down:o,prev:i,button:p,buttons:h,timestamp:t,coalescedPoints:n}}};function pM(r){let{ev1:e,ev2:t,zoom:n,minZoom:o,maxZoom:i}=r,[s,a]=[e.x,e.y],[l,u]=[t.x,t.y],[d,c]=[s+(l-s)/2,a+(u-a)/2],p=$u(e,t),[h,f]=[d,c],m=p;e.prev&amp;&amp;t.prev&amp;&amp;(m=$u(e.prev,t.prev),[h,f]=[e.prev.x+(t.prev.x-e.prev.x)/2,e.prev.y+(t.prev.y-e.prev.y)/2]);let[g,v]=[d-h,c-f],b=p/m,C=n*b;C&lt;=o?C=o:C&gt;=i&amp;&amp;(C=i);let x=C/n;return new ft().prepend(1,0,0,1,-d,-c).prepend(x,0,0,x,0,0).prepend(1,0,0,1,d,c).prepend(1,0,0,1,g,v)}function hM(r){let{ev:e,zoom:t,minZoom:n,maxZoom:o,invert:i,multiplier:s}=r,a=e.target,l=window.devicePixelRatio,u=a.getBoundingClientRect(),[d,c]=[(e.x-u.left)*l,(e.y-u.top)*l],p=e.deltaY*(i?1:-1),f=(e.ctrlKey===!0?3:.4)*p*s/200,m=t*(1+f*Math.pow(.925,t)),g=Math.min(Math.max(m,n),o);t&lt;1&amp;&amp;1&lt;g&amp;&amp;(g=1);let v=g/t;return new ft().prepend(1,0,0,1,-d,-c).prepend(v,0,0,v,0,0).prepend(1,0,0,1,d,c)}function fM(r){let{button:e,buttons:t}=r;return e==null||t==null?!0:e===1||(t&amp;1)===1}function Cx(r){let{button:e,buttons:t}=r;return e==null||t==null?!1:e===2||(t&amp;2)===2}function Sx(r,e){let t,n=r;for(;n;){if(n.x!==r.x||n.y!==r.y){t=n;break}n=n.prev}if(t===void 0)return new Pr(0,0);let o=(r.timestamp-t.timestamp)/1e3;return o&gt;e?new Pr(0,0):new Pr(r.x-t.x,r.y-t.y).scale(1/o)}function Mf(r){return Math.hypot(r.totalMovementX,r.totalMovementY)/window.devicePixelRatio}var X8=new WeakMap;function Kt(r,e){let t=X8.get(r);return t||(t=new Q8(r,e),X8.set(r,t)),t.callback=e,t}function xne(){X8=new WeakMap}function Vp(r){return r!=="loading"&amp;&amp;r!=="loaded"}var Q8=class{constructor(e,t=fo){this.card=e;this.active=!1;this.loadStateMap=new Map;this.marker=yg();this.prevTime=performance.now();this.emphasizeEffect=!1;this.callback=t,this.textFrameUpdater=new F2(e)}isActive(){return this.active}setActive(e,t){if(t)for(let n of this.card.iterator())Kt(n,this.callback).setActive(e,!1);else this.active=e}get isThumbnailLoading(){return[...this.loadStateMap.values()].some(e=&gt;e==="loading")}setLoadState(e,t){this.loadStateMap.set(e,t),this.marker.mark(),this.callback.onCardLoadingStateChanged(this.card,e,t)}get isMipmapLoading(){return mr.get(this.card).content.isLoading()}shouldDisplayLoading(e){return this.isMipmapLoading?!0:e&amp;&amp;this.player?this.player.isLoading||this.isThumbnailLoading:this.isThumbnailLoading}update(){let e=performance.now(),t=(e-this.prevTime)/1e3,n=this.hasAnimation()||this.isThumbnailLoading||this.marker.drain();this.player&amp;&amp;(this.player.video?(this.player.playing||this.player.isLoading)&amp;&amp;(n=!0):this.player.isLoading&amp;&amp;(n=!0)),this.updateAnimations(t);let o=this.textFrameUpdater.updateTextFrameIfNeeded();return!n&amp;&amp;this.card.gadgets.title&amp;&amp;o&amp;&amp;(n=!0),this.prevTime=e,n}updateAnimations(e){for(let[t,n]of this.animations())n.update(e),n.finished&amp;&amp;(n instanceof vk&amp;&amp;this.callback.onCardInsertionCompleted(this.card),delete this[t],this.marker.mark())}*animations(){this.foldAnimation&amp;&amp;(yield["foldAnimation",this.foldAnimation]),this.insertAnimation&amp;&amp;(yield["insertAnimation",this.insertAnimation]),this.highlightAnimation&amp;&amp;(yield["highlightAnimation",this.highlightAnimation]),this.resizeAnimation&amp;&amp;(yield["resizeAnimation",this.resizeAnimation]),(this.adoptionEffect instanceof wu||this.adoptionEffect instanceof Bl||this.adoptionEffect instanceof _f)&amp;&amp;(yield["adoptionEffect",this.adoptionEffect])}accessoryScale(e,t){return Ck({card:this.card,focused:e,zoom:t.a,dpr:window.devicePixelRatio})}foldHandleBounds(e,t){return lM(this.card,this.accessoryScale(e,t))}connectorHandleBounds(e,t){let{x:n,y:o,width:i}=this.card.bounds,s=this.accessoryScale(e,t),a=n+i,l=o,u=c1*s,d=u/(Math.sqrt(2)*2),c=a+d,p=l-d;return Qj(c,p,u)}authorNameBounds(){let{x:e,y:t,width:n,height:o}=this.card.bounds,i=us(this.card);return Lh(qe(e,t+o+24,n,12),i)}checkBoundingBoxControlHit(e,t,n,o){let{card:i}=this,s=i===o,a=Jg(n.a);for(let{x:l,y:u,type:d}of JD({card:i,mtx:n,isPreview:s}).values()){let c=qe(l+i.position.x-a,u+i.position.y-a,a*2,a*2);if(Pn(c,{x:e,y:t}))return d}}doInsert({insert:e,duration:t=.3}){this.insertAnimation=new vk({insert:e,duration:t})}highlightAlpha(){var e;return(e=this.highlightAnimation)==null?void 0:e.current()}setHighlightAnimation(e=1){this.highlightAnimation=As({from:1,to:0,duration:e})}removeHighlightAnimation(){this.highlightAnimation=void 0}setResizeAnimation(e){if(!e.transition)return;let{from:t,duration:n}=e.transition;this.resizeAnimation=ene({from:t,duration:n,easing:eM,to:{size:this.card.size,position:this.card.position}})}doFold(e,t){let{card:n}=this,o=.3,i,s,a,l,[u,d]=[e.position.x,e.position.y];t?(i=u,s=d,a=n.position.x,l=n.position.y):(a=u,l=d,i=n.position.x,s=n.position.y),e!==n&amp;&amp;n.rootParent()!==e&amp;&amp;(this.foldAnimation=Jre({x:a,y:l},{x:i,y:s},o,t))}hasScaleShrinkAnimation(){return this.adoptionEffect instanceof wu}setScaleShrinkAnimationByAdoption(e,t){this.adoptionEffect instanceof wu||(this.adoptionEffect=new wu({to:e,duration:.3,pivot:t}))}setAdoptionCancelAnimation(e){if(this.adoptionEffect instanceof wu||this.adoptionEffect instanceof Bl){let t=this.adoptionEffect.current();this.adoptionEffect=new _f({from:t,to:1,duration:.2,pivot:e})}else this.adoptionEffect instanceof dx&amp;&amp;(this.adoptionEffect=void 0)}hasScaleChangeAnimation(){return this.adoptionEffect instanceof Bl}setScaleChangeAnimation(e,t){if(this.adoptionEffect instanceof wu||this.adoptionEffect instanceof Bl){let n=this.adoptionEffect.current();this.adoptionEffect=new Bl({from:n,to:e,duration:.2,pivot:t})}}updatePivotForScaleChangeAnimation(e,t){this.adoptionEffect instanceof Bl&amp;&amp;(this.adoptionEffect.to!==e?this.setScaleChangeAnimation(e,t):this.adoptionEffect.pivot=t)}setTranslucentEffectByAdoption(){this.adoptionEffect instanceof wu||this.adoptionEffect instanceof _f||(this.adoptionEffect instanceof Bl?this.adoptionEffect.alpha=.75:this.adoptionEffect=new dx(.75))}unsetTranslucentEffect(){this.adoptionEffect instanceof wu||this.adoptionEffect instanceof _f||(this.adoptionEffect instanceof Bl?this.adoptionEffect.alpha=1:this.removeAdoptionEffect())}removeAdoptionEffect(){this.adoptionEffect=void 0}onConnectorUp({pt:e,from:t,root:n,ignoreFoldHandle:o,focused:i,mtx:s,isClick:a}){let{card:l}=this;if(!l.canBeConnectedFrom(t))return!1;let u=!1;if(this.card.foldHandleVisible()&amp;&amp;Pn(this.foldHandleBounds(i,s),e)){if(o)return!1;u=!0}else if(!this.card.isVisibleInCardTree(n)||!Pn(this.card.bounds,e))return!1;if(l.prev?this.callback.onConnectorDisconnected(l.prev):l.prevGroup&amp;&amp;this.callback.onConnectorDisconnected(l.prevGroup),a)return!1;let d=u||l.isFolded||t.isFolded;return this.callback.onConnectorConnected(t.tail(),this.card,d),!0}get resizeStartSize(){return this._resizeStartSize}startResize(e,t){this._resizeStartSize={bounds:e,contentWithMargins:t}}endResize(){this._resizeStartSize=void 0}applyResizeEffect({x:e,y:t,committed:n,corner:o,zoom:i}){if(!!this._resizeStartSize)if(wc(o)){let{bounds:s,contentWithMargins:a}=this._resizeStartSize;this.callback.onContentMarginsChanged(WY({card:this.card,point:{x:e,y:t},corner:o,committed:n,startBounds:s,startContentWithMargins:a,zoom:i}))}else this.callback.onCardSizesChanged(T_({card:this.card,point:{x:e,y:t},grouped:this.card.isFolded,committed:n,corner:o,startBounds:this._resizeStartSize.bounds,zoom:i}))}getObjectUnderPoint(e){let t=this.getObjectUnderPointInternal(e);if(!(this.card.pinned&amp;&amp;t!=="card"&amp;&amp;t!="bbLeftTop"))return t}getObjectUnderPointInternal({root:e,ev:t,mtx:n,focused:o,toolVisible:i,zoom:s}){let{card:a}=this,l=a.isVisibleInCardTree(e),u=a===e,d=xx(a,n.a/devicePixelRatio);if(l){let f=n.inverted().cross(t.x,t.y);if(d.resizable){let m=this.checkBoundingBoxControlHit(f.x,f.y,n,e);if(u){if(m&amp;&amp;s&amp;&amp;s&lt;1)return m}else if(o&amp;&amp;m)return m}if(d.movable&amp;&amp;Pn(a.bounds,f))return"card";if(a.foldHandleVisible()&amp;&amp;d.connectable&amp;&amp;Pn(this.foldHandleBounds(o,n),f))return"foldHandle";if(a.connectorHandleVisible()&amp;&amp;d.connectable&amp;&amp;Pn(this.connectorHandleBounds(o,n),f))return"connectorHandle"}let c=this.accessoryScale(o,n),p=a.next||a.nextGroup,h=!1;if(!u&amp;&amp;p&amp;&amp;(h=p.isVisibleInCardTree(e)),d.connectable&amp;&amp;p&amp;&amp;(l&amp;&amp;!a.isFolded||!l&amp;&amp;p===a.nextGroup)&amp;&amp;h&amp;&amp;cne({ev:t,mtx:n,from:a,to:p,asDifferentGroup:p===a.nextGroup,handleScale:c,toolVisible:i,scaleToParent:a.parent?Eo(a.parent.size):1,dpr:window.devicePixelRatio}))return"connection"}async invalidateMipmapWithLevel(e){var u;let t=this.card,n=t.document!=null,o=n||t.drawnAssetId("drawn")!=null,i=n||t.drawnAssetId("annotation")!=null,s=w2(t)||n,a=mr.get(t),l=[];if(s&amp;&amp;l.push(a.content.load(e,t)),n&amp;&amp;l.push(a.document.load(e,t)),o&amp;&amp;l.push(a.drawn.load(e,t)),i&amp;&amp;l.push(a.annotation.load(e,t)),l.length===0){this.setLoadState(e,"loaded");return}this.setLoadState(e,"loading"),await Promise.all(l),this.setLoadState(e,(u=a.errors(e))!=null?u:"loaded")}invalidateMipmap(e){let t=mo.getLevel(this.card.size,e);return this.invalidateMipmapWithLevel(t)}async invalidateFamilyMipmap(e){let t=[];for(let n of this.card.familyIterator()){let o=Kt(n,fo);t.push(o.invalidateMipmap(e))}await Promise.all(t)}get moveCardTarget(){return this._moveCardTarget}onDown({ev:e,mtx:t,focused:n,root:o,toolVisible:i,zoom:s}){var c;let a=this.getObjectUnderPoint({ev:e,mtx:t,focused:n,root:o,toolVisible:i,zoom:s}),{card:l,callback:u}=this,d=l===o;if(!(!a||!u.shouldHandleCardEvent({type:"down",target:a}))){if(this.handlingComponent=a,this.handlingComponent==="connection"){let h=t.inverted().cross(e.x,e.y);u.onConnectorDisconnected(l),u.onConnectorMoved(l,h,!0)}else if(this.handlingComponent==="card"||this.handlingComponent==="foldHandle"||this.handlingComponent==="bbLeftTop"){let p=wne(l,o);p&amp;&amp;(this._moveCardTarget={card:p,originState:{position:De(p.position),parentId:(c=p.parent)==null?void 0:c.id}})}else if(ex(this.handlingComponent)){this.startResize(l.bounds,l.contentSizeWithMargins);let h=JD({card:l,mtx:t,isPreview:d}).get(this.handlingComponent);if(h){let m=t.inverted().cross(e.x,e.y),g=Jg(t.a),v=Math.sign(h.x)*g,b=Math.sign(h.y)*g;this.downEventBBCornerOffset=new Pr(l.position.x+h.x-m.x-v,l.position.y+h.y-m.y-b)}else this.downEventBBCornerOffset=new Pr(0,0)}return this.handlingComponent}}onMove(e,t){if(!this.handlingComponent||!this.callback.shouldHandleCardEvent({type:"move",target:this.handlingComponent})||!cM(e)||!e.down)return;this.setActive(!0,this.handlingComponent==="foldHandle");let n=t.inverted(),o=e.dx/t.a,i=e.dy/t.a,s=$u(e,e.down)/window.devicePixelRatio;if(this.handlingComponent==="card"||this.handlingComponent==="bbLeftTop")if(this._moveCardTarget&amp;&amp;!this._moveCardTarget.card.pinned){let a=this._moveCardTarget.card.position.x+e.dx/t.a,l=this._moveCardTarget.card.position.y+e.dy/t.a;this._moveCardTarget.card.isFolded?(this.callback.onGroupMoved(this._moveCardTarget.card,{pos:{x:a,y:l},delta:De(o,i)},!1),this.callback.onCardHeld(this._moveCardTarget.card,!0)):(this.callback.onCardMoved(this._moveCardTarget.card,{x:a,y:l},!1),this.callback.onCardHeld(this._moveCardTarget.card,!1))}else this.handlingComponent=void 0;else if(this.handlingComponent==="foldHandle"){if(s&gt;2){let a=this.card.position.x+e.dx/t.a,l=this.card.position.y+e.dy/t.a;this.callback.onGroupMoved(this.card,{pos:{x:a,y:l},delta:De(o,i)},!1),this.callback.onCardHeld(this.card,!0)}}else if(this.handlingComponent==="connectorHandle"||this.handlingComponent==="connection"){let a=n.cross(e.x,e.y);this.callback.onConnectorMoved(this.card,a,!1)}else{if(this.card.pinned)return;if(ex(this.handlingComponent)&amp;&amp;this.downEventBBCornerOffset){let a=n.cross(e.x,e.y);this.applyResizeEffect({x:a.x+this.downEventBBCornerOffset.x,y:a.y+this.downEventBBCornerOffset.y,committed:!1,corner:this.handlingComponent,zoom:t.a/devicePixelRatio})}}return this.handlingComponent}moveCardOnUp(e,t){if(this.handlingComponent&amp;&amp;!this.callback.shouldHandleCardEvent({type:"move",target:this.handlingComponent})||oi(e)||dM(e)||!this._moveCardTarget||this._moveCardTarget.card.pinned)return;let n=e.dx/t.a,o=e.dy/t.a,i=this._moveCardTarget.card.position.x+e.dx/t.a,s=this._moveCardTarget.card.position.y+e.dy/t.a;this._moveCardTarget.card.isFolded?this.callback.onGroupMoved(this._moveCardTarget.card,{pos:{x:i,y:s},delta:De(n,o)},!0):this.callback.onCardMoved(this._moveCardTarget.card,{x:i,y:s},!0)}onUp(e){var l,u;let{ev:t,mtx:n,root:o}=e,i=this.handlingComponent,s=t.dx/n.a,a=t.dy/n.a;if(this.handlingComponent&amp;&amp;this.callback.shouldHandleCardEvent({type:"up",target:this.handlingComponent})){let d=oi(t);if(this.handlingComponent==="card"){if(this.moveCardOnUp(t,n),d){let c;o?c=this.card:c=(u=(l=this._moveCardTarget)==null?void 0:l.card)!=null?u:this.card,this.callback.onCardClicked(c,t)}this.callback.onCardHeld(void 0,!1)}else if(this.handlingComponent==="foldHandle"){if(d)this.card.groupMemberCount()&gt;1&amp;&amp;this.callback.onGroupStateChanged(this.card,!this.card.isFolded);else{let[c,p]=[this.card.position.x+t.dx/n.a,this.card.position.y+t.dy/n.a];this.callback.onGroupMoved(this.card,{pos:{x:c,y:p},delta:De(s,a)},!0)}this.callback.onCardHeld(void 0,!1)}else if(this.handlingComponent==="bbLeftTop")this.moveCardOnUp(t,n),d&amp;&amp;this.callback.onCardFullscreenButtonClicked(this.card),this.callback.onCardHeld(void 0,!1);else if(ex(this.handlingComponent)&amp;&amp;this.downEventBBCornerOffset){if(this.card.pinned)return;{let p=n.inverted().cross(t.x,t.y);this.applyResizeEffect({x:p.x+this.downEventBBCornerOffset.x,y:p.y+this.downEventBBCornerOffset.y,committed:!0,corner:this.handlingComponent,zoom:n.a/devicePixelRatio}),this.downEventBBCornerOffset=void 0,this.endResize()}}}return this.setActive(!1,this.handlingComponent==="foldHandle"),this.handlingComponent=void 0,this._moveCardTarget=void 0,i}predictPointerEventResponse({ev:e,mtx:t,root:n,toolVisible:o,zoom:i}){if(this.handlingComponent&amp;&amp;this.handlingComponent!=="card")return 0;if(!this.callback.shouldHandleCardEvent({type:"down",target:"card"}))return 2;let s=this.getObjectUnderPoint({ev:e,mtx:t,focused:!1,root:n,toolVisible:o,zoom:i});return s===void 0?2:s==="card"?1:0}isFolding(){var e;return!!((e=this.foldAnimation)!=null&amp;&amp;e.current().visible)}isMoving(){return!!(this.foldAnimation||this.insertAnimation||this.resizeAnimation)}hasAnimation(){return!!(this.foldAnimation||this.insertAnimation||this.highlightAnimation||this.resizeAnimation||this.adoptionEffect)}shouldAnimate(e){return e!==this.card}isMovingInCardTree(e){let t=this.card;for(;t&amp;&amp;t!==e;){if(Kt(t,this.callback).isMoving())return!0;t=t.parent}return!1}translationInAnimation(){let[e,t]=[0,0],{x:n,y:o}=this.card.position;if(this.foldAnimation){let i=this.foldAnimation.current();e=i.x-n,t=i.y-o}else if(this.insertAnimation){let i=this.insertAnimation.current();e=i.x-n,t=i.y-o}else if(this.resizeAnimation){let[i]=this.resizeAnimation.current();e=i.x-n,t=i.y-o}else if(this.adoptionEffect instanceof wu||this.adoptionEffect instanceof Bl||this.adoptionEffect instanceof _f){let i=this.adoptionEffect.pivot,s=this.adoptionEffect.current(),l=new ft().translate(-i.x,-i.y).scale(s).translate(i.x,i.y).transformPoint(De(),this.card.position);e=l.x-n,t=l.y-o}return[e,t]}scaleInAnimation(){if(this.resizeAnimation){let[e,t]=this.resizeAnimation.current();return[t.width/this.card.size.width,t.height/this.card.size.height]}else if(this.adoptionEffect instanceof wu||this.adoptionEffect instanceof Bl||this.adoptionEffect instanceof _f){let e=this.adoptionEffect.current();return[e,e]}return[1,1]}localTransform(){let[e,t]=this.translationInAnimation(),[n,o]=this.scaleInAnimation();return new ft(n,0,0,o,e,t)}globalAlphaMultiplier(){return this.foldAnimation?this.foldAnimation.current().alpha:this.adoptionEffect instanceof Bl?this.adoptionEffect.alpha:this.adoptionEffect instanceof dx?this.adoptionEffect.alpha:1}get textFrame(){return this.textFrameUpdater.get()}updateTextFrameIfNeeded(){this.textFrameUpdater.updateTextFrameIfNeeded()}get textSelectedRange(){return this._textSelectedRange}setTextSelectedRange(e){this._textSelectedRange=e,this.marker.mark()}get textCompositionRange(){return this._textCompositionRange}setTextCompositionRange(e){this._textCompositionRange=e,this.marker.mark()}isInFoldAnimation(e){if(this.isFolding())return!0;for(let t of this.card.parentsIterator()){if(e===t)break;if(Kt(t,this.callback).isFolding())return this.card.isVisibleInGroup()}return!1}shouldRenderInCardTree({root:e,ignoreTransition:t}){let n=this.card.isVisibleInCardTree(e),o=!t&amp;&amp;this.isInFoldAnimation(e);return!(!n&amp;&amp;!o)}getViewRect({userId:e}={}){let{card:t}=this,n=new ri;n.add(t.bounds);let o=us(t);if(t.foldHandleVisible()){let d=t.bounds.x-Aa-2*wi-$p*.5,c=t.bounds.y+t.bounds.height*.5-wi-$p*.5,p=2*wi+Aa+$p,h=2*wi+$p;n.add(qe(d*o,c*o,p*o,h*o))}if(t.connectorHandleVisible()){let c=c1*o*Math.SQRT1_2,p=t.bounds.x+t.bounds.width,h=t.bounds.y-c;n.add(qe(p,h,c,c))}if(t.isFolded&amp;&amp;t.isHead){let d=ju*o;n.add(qe(t.bounds.x+d,t.bounds.y+d,t.bounds.width,t.bounds.height))}e!==t.author.id&amp;&amp;n.add(this.authorNameBounds());let i=n.rect;Ee(i!=null);let s=this.localTransform();if(s.isIdentity)return i;let a=tn(t.bounds),l=i.x,u=i.y;return qe((l-a.x)*s.a+a.x+s.tx,(u-a.y)*s.d+a.y+s.ty,i.width*s.a,i.height*s.d)}setEmphasizeEffect(e){this.emphasizeEffect=e}hasCardEmphasizeEffect(){return this.emphasizeEffect}borderColor(){var t;let e=this.card.content.backcolor;return((t=this.borderColorCache)==null?void 0:t.baseColor)===e?this.borderColorCache.color:(this.borderColorCache={baseColor:e,color:Tne(this.card)},this.borderColorCache.color)}};var Z8=oe(bS());async function Is(r){var o;let n=await((o=(await new Z8.default().loadAsync(r)).file("body"))==null?void 0:o.async("text"));return Ee(n!=null,"body must be stored"),JSON.parse(n)}function Es({id:r,snapshotId:e,file:t,overrideAuthor:n,remapIds:o,srcIdMap:i,idMapper:s,author:a}){let l=sAe(t,a);if(n)for(let c of l.data.frames)c.metadata.author=a;let d=yd(0,l).findCard(c=&gt;!c.parent).headGroup();return o&amp;&amp;(d=d.copyGroup({srcIdMap:i,overGroup:!0,idMapper:s})),Array.from(d.iteratorOverGroup()).forEach((c,p)=&gt;{c.document={id:r,index:p,commentSnapshotId:e}}),d}async function Dne(r){let e=new Z8.default;return e.file("body",JSON.stringify(r)),await e.generateAsync({type:"arraybuffer",compression:"DEFLATE"})}function sAe(r,e){let{entire_body:t,fold_states:n,...o}=r;return r.entire_body?Q1(r.entire_body,e):n?Q1({version:"2.1.0.0",format:"note",data:{metadata:{created_by:"ipad"},fold_states:n,...o}},e):Q1({version:"2.0.0.0",format:"note",data:{metadata:{created_by:"ipad"},...o}},e)}function e6(r){Ee(r.document!=null,"document must be set");let e=t6(r,ou,!0),t=cs(e,br(r.contentSizeWithMargins,Ku)),n=mr.get(r);return n.document.set("medium",e),n.document.set("small",t),{small:t,medium:e}}function t6(r,e,t){let n=br(r.contentSizeWithMargins,e),o=fr.create(n),i=o.getContext2dForce();return Sk(i,r,(s,a)=&gt;{Nf({ctx:s,mtx:a,canvas:s.canvas,viewport:Tl(),root:r,card:r,toolVisible:!1,narrationRecording:!1,rootMipmapType:"content",ignoreAnnotations:t,dpr:1,cardStrokeStates:jp([...r.renderingOrderIterator()])})}),o}async function aAe(r){Ee(r.document!=null,"document must be set");let e=Xn.get("annotation",r);if(!e.getLayerLoadState().loadedAtLeastOnce()){let o=await e.updateData(r);if((o==null?void 0:o.type)==="error")throw o.error}let t=await e.updateDocumentLayer();if(t.type==="error")throw t.error;let n=mr.get(r);if(t.type==="success"&amp;&amp;t.value!=="notFound"){let{small:o,medium:i}=n.annotation.redrawThumbnails({geometry:r.drawnGeometry("annotation"),contents:e.packContents()});return{small:o,medium:i}}else return null}function Sk(r,e,t){let n=r.canvas,[o,i]=[n.width/2,n.height/2],s=Xr(n,e.size),a=new ft(s,0,0,s,o,i);r.save(),r.clearRect(0,0,n.width,n.height),r.transform(a.a,0,0,a.d,a.e,a.f),t(r,a),r.restore()}async function gM(r){Ee(r.document!=null,"card must have document");let{small:e,medium:t}=e6(r),n=await io(e,"image/png",`thumb_${r.document.index}.png`),o=await io(t,"image/png",`thumb_${r.document.index}.png`);return{small:n,medium:o}}async function vM(r){Ee(r.document!=null,"card must have document");let e=await aAe(r);if(!e)return null;let t=await io(e.small,"image/png",`annotation_thumb_${r.document.index}.png`),n=await io(e.medium,"image/png",`annotation_thumb_${r.document.index}.png`);return{small:t,medium:n}}async function kne(r,e){let t=r.copyGroup({}),n=await bM(t,e),o=[],i=[],s=[],{medium:a,annoMedium:l}=await _ne(r);return o=a,i=l,s=[...r.iteratorOverGroup()].map(u=&gt;{if(u.drawnAssetId("annotation")){let c=u.drawnGeometry("annotation");return{version:"1.1.0.0",canvas:c.canvas}}else return null}),{data:n,annotationThumbnails:i,annotations:s,thumbnails:o,pageCount:r.memberCountOverGroup(),assetUUIDs:Dc([...r.memberAndChildrenIteratorOverGroup()].map(u=&gt;u.toJSON()))}}async function Pne(r,e){let t=r.headGroup();if(t.parent){t=t.copyGroup({idMapper:o=&gt;o});for(let o of t.iteratorOverGroup())dn(o.content.backcolor).isTransparent()&amp;&amp;(o.content.backcolor=DE.toARGBHex())}return{data:await bM(t,e),annotationThumbnails:[],annotations:[],thumbnails:[],pageCount:t.memberCountOverGroup(),assetUUIDs:Dc([...t.memberAndChildrenIteratorOverGroup()].map(o=&gt;o.toJSON()))}}async function Ane(r){let{card:e,user:t,courseId:n,submission_number:o}=r,i=e.copyGroup({}),s=await bM(i,t),{thumbnails:a,annotation_thumbnails:l}=await Ene(e);return{courseId:n,submission_number:o,data:s,thumbnails:a,annotation_thumbnails:l}}async function Ine(r){let{card:e,user:t,send_to:n,courseId:o}=r,i=e.copyGroup({}),s=await bM(i,t),{thumbnails:a,annotation_thumbnails:l}=await Ene(e);return{courseId:o,data:s,send_to:n,thumbnails:a,annotation_thumbnails:l}}var Ene=async r=&gt;{let{small:e,medium:t,annoSmall:n,annoMedium:o}=await _ne(r,!0);Ee(e!=null,"small thumbs must be defined"),Ee(n!==void 0,"annotation small thumbs must be defined");let i=[],s=[];for(let a=0;a&lt;t.length;a++){let l=[],u=e[a],d=t[a];l.push(mM({index:a,smallThumb:u,mediumThumb:d}));let c=n==null?void 0:n[a],p=o[a];c&amp;&amp;p&amp;&amp;l.push(mM({index:a,smallThumb:c,mediumThumb:p}));let[h,f]=await Promise.all(l);i.push(h),f&amp;&amp;s.push(f)}return{thumbnails:i,annotation_thumbnails:s}},mM=async r=&gt;{let{index:e,smallThumb:t,mediumThumb:n}=r,o=[ie.lnsClient.uploadGenericFile({file:t,extWithDot:".png"}),ie.lnsClient.uploadGenericFile({file:n,extWithDot:".png"})],[i,s]=await Promise.all(o);return{index:e,small:i.id,medium:s.id}};async function bM(r,e){let t=[...r.iteratorOverGroup()],n=xb(t.map(h=&gt;h.groupStates())),o=t.map(h=&gt;h.treeState()),i=xb(t.map(h=&gt;h.connections({withoutSelf:!1}))),s=[],a=[...r.memberAndChildrenIteratorOverGroup()].map(h=&gt;h.toJSON()).map(h=&gt;(h.metadata.author.id!==e.id&amp;&amp;(h.metadata.author.id=e.id,h.metadata.author.name=e.name),h)),l=[...r.memberAndChildrenIteratorOverGroup()].map(h=&gt;h.toV210JSON()).map(h=&gt;(h.metadata.author.id!==e.id&amp;&amp;(h.metadata.author.id=e.id,h.metadata.author.name=e.name),h)),u=[],d=[];for(let h of r.memberAndChildrenIteratorOverGroup())h.favorite&amp;&amp;u.push({id:h.id}),h.pinned&amp;&amp;d.push({id:h.id});let c=["sheet"];a.some(h=&gt;h.type==="quiz")&amp;&amp;c.push("quiz"),a.some(h=&gt;h.type==="attendance")&amp;&amp;c.push("attendance");let p={frames:l,connections:i,group_states:n,fold_states:s,entire_body:{data:{connections:i,favorite_items:u,fold_states:s,frames:a,group_states:n,metadata:{created_by:"web"},pinned_items:d,tree_states:o},features:c,format:"note",version:SS}};return new File([await Dne(p)],"document.lnfragment",{type:"application/octet-stream"})}async function _ne(r,e){let t=[],n=[],o,i;e&amp;&amp;(o=[],i=[]);let s=[];for(let d of r.memberAndChildrenIteratorOverGroup()){let c=mr.get(d);s.push(c.content.load("medium",d),c.document.load("medium",d),c.drawn.load("medium",d),c.annotation.load("medium",d))}await Promise.all(s);let a=fr.create(0,0),l=a.getContext2dForce(),u=0;for(let d of r.iteratorOverGroup()){let c=br(d.contentSizeWithMargins,ou);a.width=c.width,a.height=c.height,Sk(l,d,(m,g)=&gt;{Nf({ctx:m,mtx:g,canvas:m.canvas,viewport:Tl(),root:d,card:d,toolVisible:!1,narrationRecording:!1,ignoreAnnotations:!0,dpr:1,cardStrokeStates:jp([...d.renderingOrderIterator()])})});let p=await io(a,"image/png",`thumb${u}_medium.png`);if(t.push(p),o){let m=cs(a,br(d.contentSizeWithMargins,Ku)),g=await io(m,"image/png",`thumb${u}_small.png`);o.push(g)}let h=mr.get(d);if(d.drawnAssetId("annotation")){let m=h.annotation.get("medium");Ee(m!=null,"annotation thumbnail must be generated"),Sk(l,d,v=&gt;{let b=d.drawnThumbLocalBounds("annotation");v.save(),v.drawImage(m,b.x,b.y,b.width,b.height),v.restore()});let g=await io(a,"image/png",`annotation${u}_medium.png`);if(n.push(g),i){let v=cs(a,br(d.contentSizeWithMargins,Ku)),b=await io(v,"image/png",`annotation${u}_small.png`);i.push(b)}}else n.push(null),i==null||i.push(null);u++}return{small:o,annoSmall:i,medium:t,annoMedium:n}}var lAe="app.loilonote.";function r6(r){return lAe+r}var Fne=()=&gt;!!localStorage,yM=class{put(e,t){localStorage==null||localStorage.setItem(r6(e),t)}get(e){var t;return(t=localStorage==null?void 0:localStorage.getItem(r6(e)))!=null?t:null}removeItem(e){localStorage==null||localStorage.removeItem(r6(e))}};var wx=class extends Error{constructor(e="operation timeout"){super(e)}};async function sv(r,e,t){let n=0,o=0,i=!1;for(;!i&amp;&amp;!(t!=null&amp;&amp;t.aborted);){let s=Date.now();try{return await r()}catch(a){o+=Date.now()-s;let l=await e({error:a,retryCount:n++,totalConsumedTimeMs:o});l?(await Sp(l),o+=l.delay*l.unit):i=!0}}throw new wx}var Hne=oe(n6());function La(r,e,{replacement:t="_",max:n=255}={}){let o=(0,Hne.default)(r,{replacement:t}).slice(0,n-e.length);if(o.length+e.length&gt;n)throw new Error("ext too long");return o+e}function Gne(r,{replacement:e="_",max:t=244}={}){return La(r,"",{replacement:e,max:t})}function Ol(r,e){let t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e,n.click(),URL.revokeObjectURL(t)}function Wne(r){return Promise.all(Array.from(r).map(e=&gt;e instanceof Promise?e.then(t=&gt;({status:"fulfilled",value:t})).catch(t=&gt;({status:"rejected",reason:t})):Promise.resolve({status:"fulfilled",value:e})))}function Bf(r=10){let e=0,t=[];return{execute:async o=&gt;{if(e&gt;=r){let s=ss();t.push(s),await s}e++;let i;try{i=await o()}finally{e--;let s=t.shift();s==null||s.resolve()}return i},getExecutingCount:()=&gt;e,getPendingCount:()=&gt;t.length}}function*CM(r,e,t){Ee(r.length&gt;0,"metadata length should be &gt; 0");for(let n=0;n&lt;r.length;n+=t)yield{metadata:r.slice(n,n+t),thumbnails:e.slice(n,n+t)}}var SAe=5*6e4,o6=30,xAe=r=&gt;(e,t)=&gt;{let n=t==="all"?r:[r[t]];for(let o of n){let i=mr.forCard(o).content,s=e?"uploading":"done";i.setUploadingStates(["small","medium","high"],s)}},wAe=Bf();function xk({file:r,extWithDot:e,description:t,signal:n}){return sv(()=&gt;wAe.execute(()=&gt;ie.lnsClient.uploadGenericFile({file:r,extWithDot:e,signal:n})),u6(t),n)}var TAe=Bf();function i6(r){return sv(()=&gt;TAe.execute(()=&gt;ie.lnsClient.createAsset(r)),u6("create asset"))}var DAe=Bf();function kAe(r,e){return sv(()=&gt;DAe.execute(()=&gt;ie.lnsClient.sendPdfAttachments({uuid:r,attachments:e})),u6("add attachments"))}function $ne({store:r,file:e,extension:t,signal:n}){return r.reduce(sU(1)),xk({file:e,extWithDot:t,description:"asset upload",signal:n}).finally(()=&gt;{r.reduce(sU(-1))})}async function PAe({store:r,cardIdList:e,thumbsParam:t,signal:n}){let o=xAe(e);o(!0,"all");let i=[],s=t.generator();for(let a=0;a&lt;e.length;a++){r.reduce(aU(1));let l=s.next().then(async({value:u})=&gt;{t.setMipmap&amp;&amp;mr.forCard(e[a]).content.setThumbs(u);let d=Zo.get(u.contentType),{id:c}=await xk({file:await io(u.small,u.contentType,`small${d}`),extWithDot:d,description:"thumbnail upload",signal:n}),{id:p}=await xk({file:await io(u.medium,u.contentType,`medium${d}`),extWithDot:d,description:"thumbnail upload",signal:n});return{index:a,small:c,medium:p}}).finally(()=&gt;{r.reduce(aU(-1)),o(!1,a)});i.push(l)}return await Promise.all(i)}async function Vne(r){let e=xk({file:r.small,extWithDot:".jpg",description:"small thumbnail upload"}),t=xk({file:r.medium,extWithDot:".jpg",description:"medium thumbnail upload"}),[{id:n},{id:o}]=await Promise.all([e,t]);return{small:n,medium:o}}async function jne(r){let e=new AbortController,t=$ne({...r,signal:e.signal}),n=r.thumbsParam?PAe({...r,thumbsParam:r.thumbsParam,signal:e.signal}):[],[o,i]=await Promise.all([t,n]).catch(s=&gt;{throw e.abort(),s});return{asset:o,thumbs:i}}async function s6({store:r,p:e,func:t,error:n,errorTitle:o}){if(Je.catchError(n))return{cancelled:{reason:n}};let i=31,s=he.get().strings,a=ss(),l=[],{message:u,unknownError:d}=ot(n);return l.push(u),e.downloadOnCancel&amp;&amp;l.push(s.downloadAndUploadLater),r.reduce(me(i,{message:l,unknownError:d,title:o!=null?o:s.couldntUploadDocument,okMessage:s.retry,cancelMessage:e.downloadOnCancel?s.download:s.close,onOk:async()=&gt;{r.reduce(me(i,void 0)),a.resolve(await t(r,e))},onCancel:()=&gt;{r.reduce(me(i,void 0)),e.downloadOnCancel&amp;&amp;Ol(e.file,La(e.file.name,e.extension)),a.resolve({cancelled:{reason:n}})}})),a}async function qi(r,e,t={needsBrokenThumb:!0}){let{file:n,metadata:o,description:i,extension:s,cardIdList:a,thumbnailsGenerator:l}=e,u=!Za(s);r.reduce(da({cardIdList:a,state:"saving",type:"content"}));try{let d=u?{generator:l,setMipmap:!0}:void 0,{asset:c,thumbs:p}=await jne({store:r,file:n,extension:s,cardIdList:a,thumbsParam:d}),h=CM(o,p,o6),f=await i6({pageCount:a.length,assetGenericFileId:c.id,attachments:h.next().value});for(let m of h)await kAe(f,m);for(let m of a)We(On(m,{"content.asset":{description:i!=null?i:n.name,extension:s,remote_id:f}}));return r.reduce(fp(a,"content")),{cancelled:void 0}}catch(d){let c=await s6({store:r,p:e,func:qi,error:d,errorTitle:t.errorTitle});return c.cancelled&amp;&amp;(t.needsBrokenThumb?r.reduce(da({cardIdList:a,type:"content",state:"failed"}),ho()):r.reduce(fp(a,"content"))),c}}async function a6(r,e){let{cardId:t,file:n,extension:o,duration:i,cardDuration:s,volume:a,start:l}=e;r.reduce(da({cardIdList:[t],state:"saving",type:"narration"}));try{let u=await $ne({store:r,file:n,extension:o}),d=await i6({pageCount:1,assetGenericFileId:u.id,attachments:{metadata:[{duration:i}],thumbnails:[]}}),c={"gadgets.naration":{start_point:Math.max(0,l),start_point_adjustment:Math.min(l,0),source_volume:a,asset:{remote_id:d,extension:o}}};return s!==void 0&amp;&amp;(c["metadata.duration"]=s),We(On(t,c)),r.reduce(fp([t],"narration")),{cancelled:void 0}}catch(u){let d=await s6({store:r,p:e,func:a6,error:u});return d.cancelled&amp;&amp;r.reduce(da({cardIdList:[t],state:"failed",type:"narration"})),d}}async function l6(r,e){var u,d;let{cardId:t,file:n,extension:o,thumb:i,geometry:s,revision:a,drawnType:l}=e;r.reduce(da({cardIdList:[t],state:"saving",type:"drawn"}));try{let{asset:c,thumbs:p}=await jne({store:r,file:n,extension:o,cardIdList:[t],thumbsParam:{generator:async function*(){yield i},setMipmap:!1}}),h=await i6({pageCount:1,assetGenericFileId:c.id,attachments:{metadata:[],thumbnails:p}});return We(QY({cardId:t,revision:a,canvas:s.canvas,asset:{remote_id:h,extension:o},thumbnailRect:s.thumbnailRect,type:l})),((u=r.assetUploadStates[t])==null?void 0:u.drawn)!=="unsaved"&amp;&amp;r.reduce(fp([t],"drawn")),{cancelled:void 0}}catch(c){if(((d=r.desktop)==null?void 0:d.isShared)&amp;&amp;!Je.shouldHandle(c))return r.reduce(da({cardIdList:[t],state:"failed",type:"drawn"})),{cancelled:void 0};{let p=await s6({store:r,p:e,func:l6,error:c});return p.cancelled&amp;&amp;r.reduce(da({cardIdList:[t],state:"failed",type:"drawn"})),p}}}function u6(r){return e=&gt;{let t=e.error;if(t instanceof sr&amp;&amp;t.status&gt;=500&amp;&amp;e.totalConsumedTimeMs&lt;SAe){let n=$b*Math.pow(2,e.retryCount);return fe.warn(`${r} failed with status=${t.status}, retry after ${n}s (retryCount=${e.retryCount})`),{delay:n,unit:1e3}}throw e.error}}var AAe=["content","narration","drawn"];function Rf(r,e){try{if(!d6(e)(r))return"saving"}catch(t){return"failed"}}async function Kne(r,e){await r.waitUntil(d6(e))}function d6(r){return({assetUploadStates:e,desktop:t})=&gt;{var o,i;let n=he.get().strings;for(let s of r){for(let l of AAe){let u=(o=e[s])==null?void 0:o[l];if(u==="failed")throw new co(n.cardHasUploadFailedAttachments);if(u)return!1}let a=(i=t==null?void 0:t.rotatingStates)==null?void 0:i[s];if(a==="failed")throw new co(n.failedToRotate);if(a)return!1}return!0}}async function Kp(r,e,t){let n=he.get().strings,o=[],i=[];for(let s of e.memberAndChildrenIteratorOverGroup()){let a=r.assetUploadStates[s.id];if((a==null?void 0:a.content)==null&amp;&amp;wk(s))throw new co(n.cardHasUploadFailedAttachments);if((a==null?void 0:a.drawn)&amp;&amp;a.drawn!=="saving"){let l=s.createDrawnGeometry("drawn");o.push({card:s,geometry:l})}i.push(s.id)}r.reduce(R1(o)),Rf(r,i)&amp;&amp;(t&amp;&amp;r.reduce(we(t,n.uploadingAsset)),await r.waitUntil(d6(i)))}async function SM(r,e,t){try{if(t){let n=await ie.lnsClient.getAssetInfo(e),o=await Promise.all(Array.from({length:n.number_of_pages}).map((i,s)=&gt;ie.lnsClient.getAssetMetadata(e,s)));return r.reduce(lU(e,n),oS(e,o)),o}else{let n=await ie.lnsClient.getAssetMetadata(e,0);return r.reduce(oS(e,[n]),lU(e,{number_of_pages:1})),[n]}}catch(n){return fe.error(n),r.reduce(oS(e,null)),null}}async function qne(r,e){var U,B,z;Ee(e instanceof ga,"must be picture card");let t=e.contentAssetId();Ee(t!=null,"must have asset");let n=he.get().strings;r.reduce(YE(e.id,"rotating"));let o=e.content,i=String((U=o.image_rotation)!=null?U:0),s=IAe(o),a=$e(o.size),l=$e(o.size.height,o.size.width),u=e.id,d=An(o.margins),c=Yne(e),p=$e(e.size),h=[["content.image_rotation",s],["content.size",l],["content.margins",c]],f=(B=o.rotated_image_archive)==null?void 0:B[i],m=(z=o.rotated_image_archive)==null?void 0:z[s];f||h.push([`content.rotated_image_archive.${i}`,{...o.asset}]);let g=$e(l.width+c.left+c.right,l.height+c.top+c.bottom),v=e.size.width/e.contentSizeWithMargins.width,b=e.size.height/e.contentSizeWithMargins.height,C=$e(g.width*v,g.height*b),x={type:"cardSizesChanged",firedCardId:e.id,committed:!0,changes:[{cardId:u,position:e.position,layoutSize:C}]};We(x),We(On(u,rn(h)));let y=mr.forCard(u).content;if(y.rotate(),m!=null&amp;&amp;m.remote_id){We(On(u,{"content.asset.remote_id":m.remote_id})),r.reduce(E1(e.id));return}let S=()=&gt;{let N={type:"cardSizesChanged",firedCardId:e.id,committed:!0,changes:[{cardId:u,position:e.position,layoutSize:p}]};We(N),We(On(u,{"content.size":a,"content.image_rotation":Oj(i),"content.asset.remote_id":t,"content.margins":d})),y.resetRotated()},T=await ie.lnsClient.downloadAsset(t).catch(N=&gt;{Je.catchError(N),S();let{message:V}=ot(N);r.reduce(me(77,{title:n.failedToRotate,message:V,okMessage:n.back,onOk:()=&gt;r.reduce(me(77,void 0))}),YE(e.id,"failed")),r.reduce(E1(e.id))});if(!T)return;let w=await ZS(T),k=S2(w,"left"),{contentType:A,extension:I}=EAe(o),E=cs(k,br(k,f1)),O=cs(k,br(k,ou)),Q=await io(k,A,`image${I}`),{cancelled:j}=await qi(r,{file:Q,metadata:[$e(k)],cardIdList:[u],thumbnailsGenerator:async function*(){yield{high:k,medium:O,small:E,contentType:A}},extension:I},{needsBrokenThumb:!1,errorTitle:n.failedToRotate});if(j){S(),r.reduce(YE(e.id,"failed")),r.reduce(E1(e.id));return}y.setThumbs({small:E,medium:O,high:k}),r.reduce(E1(e.id))}function IAe(r){if(r.image_rotation==null)return 270;switch(r.image_rotation){case 0:return 270;case 90:return 0;case 180:return 90;case 270:return 180}}function EAe(r){var t;let e=(t=r.asset)==null?void 0:t.extension;return e&amp;&amp;AE.get(e)==="image/jpeg"?{contentType:"image/jpeg",extension:".jpg"}:{contentType:"image/png",extension:".png"}}var Tx="loilo-card",Xne="data-meta",K2=()=&gt;{var r,e;return typeof((r=navigator.clipboard)==null?void 0:r.read)=="function"&amp;&amp;typeof((e=navigator.clipboard)==null?void 0:e.readText)=="function"},_Ae=()=&gt;{var r,e;return typeof((r=navigator.clipboard)==null?void 0:r.write)=="function"&amp;&amp;typeof((e=navigator.clipboard)==null?void 0:e.writeText)=="function"},av=()=&gt;{let r=_Ae();return fD()&amp;&amp;(r=r&amp;&amp;Fne()),r},xM=async(r,e)=&gt;{let t=Array.from(e.isFolded?e.memberAndChildrenIterator():e.familyIterator()).map(o=&gt;o.id);await Kne(r,t);let n=Nr(r,r.userInfo.user_id);await Tk(e,e.isFolded,n)},Tk=async(r,e,t)=&gt;{try{let n=async l=&gt;{let u=FAe(l);return new Blob([u],{type:Jm})},o=async()=&gt;{try{let l=Xr(ou,r.size);await Kt(r,fo).invalidateFamilyMipmap(l);let d=t6(r,ou,!1),c=await C2(d,S1);return new Blob([c],{type:S1})}catch(l){return fe.error(l),new Blob([],{type:S1})}},i=[];e?i=[...r.copyGroup({overGroup:!1}).iterator()]:i=[r.copy()];let s=await MAe(i,t),a=new ClipboardItem({[Jm]:n(s),[S1]:o()});if(await navigator.clipboard.write([a]),fD()){let l=he.get().strings;if(s.length&gt;5e5)throw new co(l.tooManyCards);ie.localStorage.put(Tx,s)}}catch(n){throw fe.error(n),n}},FAe=r=&gt;{let e=document.createElement("span");return e.setAttribute("id",Tx),e.setAttribute(Xne,r),e.outerHTML},MAe=async(r,e)=&gt;{let t=Qre(0,r).toJSON(),n={format:"note",format_version:t.version,updater:e};return await CX({note:t,header:n,version:1})},Qne=r=&gt;{let e=async t=&gt;{let n=await navigator.clipboard.read();if((n==null?void 0:n.length)===0)return;let o=await navigator.clipboard.readText(),i=n[0];if(i.types.includes(Jm)){let a=await i.getType(Jm),l=await dte(a),u=await Zne(l,t);if(u)return u}let s=i.types.find(a=&gt;tq(a));if(s){let a=await i.getType(s);if(!a)return;let l=Zo.get(s);return new File([a],`pasted_file${l}`)}if(i.types.includes(EE))return o};return new Us(()=&gt;e(r).then(t=&gt;(fD()&amp;&amp;ie.localStorage.removeItem(Tx),t)).catch(async t=&gt;{if(t.name==="DataError"){if(fD()){let n=ie.localStorage.get(Tx);if(!n)return;let o=await eoe(n,r);if(o)return o;ie.localStorage.removeItem(Tx)}return}throw t}))},Jne=(r,e)=&gt;{let t=he.get().strings;return mf()?Promise.resolve({text:t.paste,disabled:!1}):r.fetch(void 0).then(n=&gt;{if(!e.aborted){if(n.type==="success"){let o=!n.value,i=o?t.nothingToPaste:t.paste;return typeof n.value=="string"?i=Pf(n.value)?t.createWebCard:t.pasteText:n.value instanceof File?i=t.pasteImage:n.value instanceof Go&amp;&amp;(i=t.pasteCards),{text:i,disabled:o}}else if(n.type==="error")return{text:t.paste,disabled:!1}}})},Zne=async(r,e)=&gt;{var i;let o=(i=new DOMParser().parseFromString(r,Jm).getElementById(Tx))==null?void 0:i.getAttribute(Xne);if(o)return eoe(o,e)},eoe=async(r,e)=&gt;{try{let t=await Cp(r,e,{base64:!0});return[...yd(0,t.note).rootChildrenIterator()].filter(i=&gt;!i.hasPrevCardOrGroup)[0]}catch(t){return}},Dx=async(r,e)=&gt;{if(r.types.includes(Jm)){let t=r.getData(Jm),n=await Zne(t,e);if(n)return n}if(r.types.includes("Files")&amp;&amp;r.files.length&gt;0){let t=[];for(let n of r.files)t.push(n);return t}if(r.types.includes(EE))return r.getData(EE)},lv=async r=&gt;{var l;let{store:e,data:t,position:n}=r,o=he.get().strings,i=(l=e.editor)==null?void 0:l[e.editor.length-1].cardId,s=u=&gt;Array.isArray(u)&amp;&amp;u[0]instanceof File;if(t instanceof File||s(t)){let u=s(t)?t:[t];if(i)At(new Xm(u,n));else{let d=n?new op(u,n):new Uh(u,De());At(d)}return}if(t instanceof Go){if(i)At(new E0(i,t,n));else{let u=n?new I0(t,n):new kb(t,De());At(u)}return}if(Pf(t)){let u=59;e.reduce(we(u,o.creatingWebCard));let d={id:e.userInfo.user_id,name:e.userInfo.username},c=await kx(t,d);if(e.reduce(we(u,null)),i)At(new ip(i,n,c.url,c.title,c.thumbnailFile));else{let p=n?new Ym(n,c):new Yu(De(),c);At(p)}return}let a=Ny(t);if(i)At(new oc({cardId:i,color:To(),backcolor:cn(),position:n,text:a}));else{let u=n?At(new nc({color:To(),backcolor:cn(),position:n,text:a})):new Dl({backcolor:cn(),color:To(),startPosition:De(),text:a});At(u);return}},toe=(r,e)=&gt;{let t=he.get().strings,n=t.errorOccurred,{message:o}=ot(e);if(e.name==="NotAllowedError"&amp;&amp;(n=t.accessNotPermitted,o=t.giveClipboardAccess),!mf()||e.name!=="NotAllowedError"){let i=34;r.reduce(me(i,{title:n,message:o,okMessage:t.okay,onOk:()=&gt;{r.reduce(me(i,void 0))}}))}};function Ny(r){return r.replace(/\r/g,"")}function NAe(r,e){return r.color.equals(e.color)&amp;&amp;r.fontSize===e.fontSize&amp;&amp;r.bold===e.bold&amp;&amp;r.lineSpacing===e.lineSpacing&amp;&amp;r.lineHeightMultiple===e.lineHeightMultiple&amp;&amp;r.list===e.list}function BAe(){return{color:To(),bold:!1,fontSize:Sb,lineSpacing:0,lineHeightMultiple:1,list:void 0}}function RAe(){return{vertical:!1,hAlignment:"left",vAlignment:"top",foreColor:To().toARGBHex(),fontSize:Sb}}function LAe(r){return{vertical:r.vertical,hAlignment:r.h_alignment,vAlignment:r.v_alignment,foreColor:r.forecolor,fontSize:r.font_size}}var dv=2e4,TM=class{constructor(){this._text=Ps("");this.gadgetTypingAttribute=RAe();this.selectionBegin=an(0);this.selectionEnd=an(0);this._cursorTypingAttributes=BAe();this.isComposing=!1}get text(){return this._text}updateText(e){this._text=fn.fromTitleGadget(e);let t=LAe(e);this.gadgetTypingAttribute=t;let n;e.text.length&lt;1?n={fontSize:t.fontSize,color:dn(t.foreColor),bold:!1,lineSpacing:0,lineHeightMultiple:1}:n=this.pickupCursorTypingAttributes(),this.updateCursorTypingAttributes(n)}handleCompositionStart(e){this.lastCompositionText=void 0,this.isComposing=!0,this.compositionOffset=e;let{begin:t}=this.selectedRange;this.updateCompositionText({text:"",range:{location:t,length:0}})}handleCompositionEnd(e){this.isComposing=!1,this.updateSelectedRange({begin:this.selectionEnd});let t=new fn(this._text);if(!(this._compositingText&amp;&amp;wM(this._compositingText)&amp;&amp;this.convertKatakanaMiddleDotToBulletedList(this.selectionBegin.location,t)))if(e.data.endsWith(`
`)){let n=this.makeTypingText(e.data.substring(0,e.data.length-1)),{begin:o,end:i}=this.selectedRange;t.remove({location:o,length:i-o}),t.insert({string:n,location:this.selectionEnd.location}),this.selectionBegin=an(o+n.length),this.selectionEnd=an(o+n.length),this.consumeEnter(t),this.updateCompositionText(void 0)}else this.updateCompositionText(void 0),this.notifyTextChanged({string:t,selection:{begin:this.selectionEnd}})}updateCompositionText(e){var t,n;this._compositingText=e==null?void 0:e.text,this._compositionRange=e==null?void 0:e.range,(t=this.onCompositionTextChanged)==null||t.call(this,this._compositingText),(n=this.onSelectionChanged)==null||n.call(this,{needsDismissPopover:!0})}get compositingText(){return this._compositingText}get compositionRange(){return this._compositionRange}consumeInput(e){var c;let t;if(e.data)t=e.data;else if(e.isComposing)t="";else if(e.inputType!=="insertText"&amp;&amp;e.target instanceof HTMLTextAreaElement)t=e.target.value;else return!1;let n=this.makeTypingText(t),o=e.inputType,{begin:i,end:s}=this.selectedRange,{selectionStart:a,selectionEnd:l}=e.target,u={location:((c=this.compositionOffset)!=null?c:0)+a,length:l-a},d=new fn(this._text);switch(o){case"insertText":{if(i!==s&amp;&amp;d.remove({location:i,length:s-i}),/^\s$/.test(t)&amp;&amp;this.consumeInputSpace(d))return!0;d.insert({string:n,location:i});let p=an(i+n.length,"backward");return wM(t)&amp;&amp;this.convertKatakanaMiddleDotToBulletedList(p.location,d)||(this.notifyTextChanged({string:d,selection:{begin:p},committed:!this.isComposing}),this.isComposing?this.updateCompositionText({text:t,range:u}):this._compositingText=void 0),!0}case"insertCompositionText":{let p=i;return e.isComposing===!1?(e.data===""&amp;&amp;this.lastCompositionText!==void 0&amp;&amp;(d.remove({location:s-this.lastCompositionText.length,length:this.lastCompositionText.length}),this.notifyTextChanged({string:d,selection:{begin:an(s-this.lastCompositionText.length)}})),!0):(this.compositingText?(p=Math.max(i,s-this.compositingText.length),d.remove({location:p,length:s-p})):d.remove({location:i,length:s-i}),d.insert({string:n,location:p}),this.lastCompositionText=t,this.notifyTextChanged({string:d,selection:{begin:an(p,"forward"),end:an(p+n.length,"backward")},committed:!this.isComposing}),this.updateCompositionText({text:t,range:u}),!0)}case"insertFromComposition":{let p=i;this.compositingText&amp;&amp;(p=Math.max(i,s-this.compositingText.length),d.remove({location:p,length:s-p})),d.insert({string:n,location:p});let h=an(p+n.length,"backward");return wM(t)&amp;&amp;this.convertKatakanaMiddleDotToBulletedList(h.location,d)||(this.notifyTextChanged({string:d,selection:{begin:h}}),this.updateCompositionText(void 0)),!0}case"deleteCompositionText":return this.compositingText&amp;&amp;d.remove({location:i,length:s-i}),this.notifyTextChanged({string:d,selection:{begin:an(i,"backward")}}),this.updateCompositionText(void 0),!0;case"insertReplacementText":{let p=i;return this.compositingText&amp;&amp;(p=Math.max(i,s-this.compositingText.length),d.remove({location:p,length:s-p})),d.insert({string:n,location:p}),this.notifyTextChanged({string:d,selection:{begin:an(p+n.length,"backward")},committed:!1}),this.updateCompositionText({text:t,range:u}),!0}case"deleteContentBackward":{let p=d.advance({location:s,byComposedCharacterOffset:-1});if(p===void 0&amp;&amp;(p=Math.max(s-1,0)),d.remove({location:p,length:s-p}),this.compositingText){let h=this.compositingText.substring(0,this.compositingText.length-(s-p)),f=h.length===0;f?this.updateCompositionText(void 0):this.updateCompositionText({text:h,range:u}),this.notifyTextChanged({string:d,selection:{begin:an(p,"backward")},committed:f})}else this.notifyTextChanged({string:d,selection:{begin:an(p,"backward")}});return!0}default:return!1}}consumeInputSpace(e){let{begin:t,end:n}=this.selectedRange,o=Vs({string:e.text,location:n});if(o===void 0){let i=Tc({text:e.text,location:n});if(i===void 0)return!1;if(i.location===t-1&amp;&amp;["*","-"].includes(e.text.substr(t-1,1))){e.remove({location:t-1,length:1});let s=uv("bulleted"),a=this.makeTypingText(s);return e.insert({string:a,location:t-1}),this.notifyTextChanged({string:e,selection:{begin:an(t-1+s.length)}}),!0}else if(i.location===t-2&amp;&amp;e.text.substr(t-2,2)==="1."){e.remove({location:t-2,length:2});let s=uv("numbered"),a=this.makeTypingText(s);e.insert({string:a,location:t-2}),this.selectionBegin=an(t-2+s.length),this.selectionEnd=an(t-2+s.length);let l=this.makeFormatter(e);return this.applyFormatted(l),!0}else{if(i.location!==t)return!1;let s=Tc({text:e.text,location:i.location-1});if(s===void 0)return!1;let a=Vs({string:e.text,location:s.location});if(a===void 0)return!1;let l=this.makeFormatter(e);return l.toggle({style:a.style,typingAttributes:this.cursorTypingAttributesArray}),l.indent({delta:a.indentRange.length,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(l),!0}}else if(go(o.markerRange)&lt;=t&amp;&amp;n&lt;=ci(o.markerRange)){let i=this.makeFormatter(e);return i.indent({delta:1,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(i),!0}else return!1}consumeKeyDown(e){let{begin:t,end:n}=this.selectedRange,o=xu({begin:t,end:n}),i=new fn(this._text);if(e.key==="Backspace"&amp;&amp;this.compositingText===void 0)if(t===n){if(t===0)return!1;let s=Vs({string:i.text,location:t});if(s!==void 0&amp;&amp;go(s.markerRange)&lt;t&amp;&amp;t&lt;=ci(s.markerRange)){let a=this.makeFormatter(i);return s.indentRange.length===0?a.deleteListMarker(s):a.indent({delta:-1,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(a),!0}else{let a=i.advance({location:t,byComposedCharacterOffset:-1});return a===void 0&amp;&amp;(a=t-1),i.remove({location:a,length:t-a}),this.notifyTextChanged({string:i,selection:{begin:an(a)}}),!0}}else return this.removeSelectedText(),!0;else if(e.key==="Delete")if(t===n){let s=Vs({string:i.text,location:t});if(s!==void 0&amp;&amp;E2(s.markerRange,t)){let a=this.makeFormatter(i);return a.deleteListMarker(s),this.applyFormatted(a),!0}else{let a=i.advance({location:t,byComposedCharacterOffset:1});return a===void 0||a&lt;=t?!1:(i.remove({location:t,length:a-t}),this.notifyTextChanged({string:i}),!0)}}else return this.removeSelectedText(),!0;else if(e.key==="Tab"){if(e.preventDefault(),Vs({string:i.text,location:this.selectionEnd.location})===void 0&amp;&amp;!e.shiftKey){let a=this.makeTypingText("	");i.remove(o),i.insert({string:a,location:o.location}),this.notifyTextChanged({string:i,selection:{begin:an(o.location+1,"backward")}})}else{let a=new Px({string:i,selectedRange:o});if(!a.indent({delta:e.shiftKey?-1:1,typingAttributes:this.cursorTypingAttributesArray}))return!1;this.applyFormatted(a)}return!0}return!1}consumeKeyPress(e){if(e.key==="Enter"){let t=new fn(this._text);return this.consumeEnter(t),!0}else return!1}consumeEnter(e){if(Vs({string:e.text,location:this.selectionBegin.location})===void 0){let n=this.makeTypingText(`
`);e.insert({string:n,location:this.selectionBegin.location});let o=an(this.selectionBegin.location+n.length);this.notifyTextChanged({string:e,selection:{begin:o}})}else{let{begin:n,end:o}=this.selectedRange,i=xu({begin:n,end:o}),s=this.makeFormatter(e);s.replaceWithNewLine({range:i,typingAttributes:this.cursorTypingAttributesArray}),this.applyFormatted(s)}}makeFormatter(e){let{begin:t,end:n}=this.selectedRange;return new Px({string:e,selectedRange:xu({begin:t,end:n})})}applyFormatted(e){let t=e.retrieveSelectedRange(),n=e.retrieveString();this.notifyTextChanged({string:n,selection:{begin:an(t.location),end:an(t.location+t.length,"backward")}})}convertKatakanaMiddleDotToBulletedList(e,t){let n=Tc({text:t.text,location:e});if(!n||n.location!==e-1)return!1;let o=t.substr({location:e-1,length:1});if(!wM(o.text))return!1;t.remove({location:e-1,length:1});let i=uv("bulleted"),s=this.makeTypingText(i);return t.insert({string:s,location:e-1}),this.updateCompositionText(void 0),this.notifyTextChanged({string:t,selection:{begin:an(e-1+i.length)}}),!0}updateSelectedRange({begin:e,end:t=void 0,needsDismissPopover:n=!0}){var i;if(t||(t=an(e.location,e.affinity)),h6(e,this.selectionBegin)&amp;&amp;h6(t,this.selectionEnd))return;this.selectionBegin=e,this.selectionEnd=t,(i=this.onSelectionChanged)==null||i.call(this,{needsDismissPopover:n});let o=this.pickupCursorTypingAttributes();this.updateCursorTypingAttributes(o)}pickupCursorTypingAttributes(){let e={},{begin:t,end:n}=this.selectedRange,o;if(t===n){let d=Math.max(this.selectionBegin.location-1,0);this._text.text.substr(d,1)===`
`?o=d+1:o=d}else o=t;let i=this._text.attributeAt({location:o,type:"font"});i&amp;&amp;(e.fontSize=i.value.size,e.bold=i.value.bold);let s=this._text.attributeAt({location:o,type:"foreground_color"});s&amp;&amp;(e.color=dn(s.value));let a=this._text.attributeAt({location:o,type:"paragraph_style"}),l;if(a){let d=Tc({text:this._text.text,location:o}),c=Ot.boldFont.get(),p=Ot.regularFont.get();if(d&amp;&amp;c&amp;&amp;p){let h=this._text.substr(d),f=p6({line:h,boldFont:c,regularFont:p});f&amp;&amp;(l=ox(a.value.line_spacing+f,f)),e.lineSpacing=a.value.line_spacing}}e.lineHeightMultiple=l;let u=c6({string:this._text.text,range:{location:t,length:n-t}});return e.list=u==null?void 0:u.style,e}get selectedRange(){let e=Math.min(this.selectionBegin.location,this.selectionEnd.location),t=Math.max(this.selectionBegin.location,this.selectionEnd.location);return{begin:e,end:t}}get editRange(){let{begin:e,end:t}=this.selectedRange;if(e===t)return{begin:0,end:this._text.length};{let n=this._text.text;return t&lt;n.length&amp;&amp;n.substr(t,1)===`
`&amp;&amp;(t+=1),{begin:e,end:t}}}get cursorTypingAttributes(){return this._cursorTypingAttributes}get cursorTypingAttributesArray(){let{bold:e,fontSize:t,lineSpacing:n,color:o}=this._cursorTypingAttributes;return[{type:"font",value:{bold:e,size:t}},{type:"paragraph_style",value:{line_spacing:n}},{type:"foreground_color",value:o.toARGBHex()}]}updateCursorTypingAttributes(e){var n;let t=Object.assign({},this._cursorTypingAttributes,e);NAe(this._cursorTypingAttributes,t)||(this._cursorTypingAttributes=t,(n=this.onCursorTypingAttributesChanged)==null||n.call(this,this._cursorTypingAttributes))}makeTypingText(e){let t=Ny(e),n=this.cursorTypingAttributesArray,o={location:0,length:t.length},i=n.map((s,a)=&gt;({index:a,range:o}));return new fn({text:t,attributes:n,attribute_ranges:i})}removeSelectedText(){let{begin:e,end:t}=this.selectedRange;if(e===t)return;let n=new fn(this._text);n.remove({location:e,length:t-e}),this.notifyTextChanged({string:n,selection:{begin:an(e)}})}insert(e){let{begin:t,end:n}=this.selectedRange,o=new fn(this._text);t!==n&amp;&amp;o.remove({location:t,length:n-t}),o.insert({string:e,location:t}),this.notifyTextChanged({string:o,selection:{begin:an(t+e.length)}})}toggleBoldface(){let{begin:e,end:t}=this.editRange,n={location:e,length:t-e},o=new fn(this._text),i=!1;for(let a=e;a&lt;t;a++){let l=o.attributeAt({location:a,type:"font"});if(!!l&amp;&amp;l.value.bold){i=!0;break}}let s=o.substr(n);s.attributes=s.attributes.map(a=&gt;a.type==="font"?{type:"font",value:{bold:!i,size:a.value.size}}:a),o.remove(n),o.insert({string:s,location:n.location}),this.notifyTextChanged({string:new fn(o.pack())}),this.updateCursorTypingAttributes({bold:!i})}changeTextSize(e,t){let{begin:n,end:o}=this.editRange,i={location:n,length:o-n},s=new fn(this._text),a=s.substr(i);a.attributes=a.attributes.map(l=&gt;l.type==="font"?{type:"font",value:{bold:l.value.bold,size:e}}:l),s.remove(i),s.insert({string:a,location:i.location}),n===0&amp;&amp;o===s.length&amp;&amp;(this.gadgetTypingAttribute.fontSize=e),this.notifyTextChanged({string:new fn(s.pack()),committed:t,needsDismissPopover:t}),this.updateCursorTypingAttributes({fontSize:e})}changeLineSpacing(e,t){let{begin:n,end:o}=this.editRange,i=new fn(this._text),s=n;for(;;){let a=Tc({text:i.text,location:s});if(!a)break;let l=i.substr(a),u=p6({line:l,regularFont:t.regular,boldFont:t.bold}),d=0;if(u&amp;&amp;(d=Math.max(0,u*(e-1))),i.addAttribute({attribute:{type:"paragraph_style",value:{line_spacing:d}},range:a}),s=a.location+l.length+1,o&lt;s)break}this.notifyTextChanged({string:new fn(i.pack()),needsDismissPopover:!1}),this.updateCursorTypingAttributes({lineHeightMultiple:e})}changeColor(e){let{begin:t,end:n}=this.editRange,o=new fn(this._text);o.addAttribute({attribute:{type:"foreground_color",value:e.toARGBHex()},range:{location:t,length:n-t}}),t===0&amp;&amp;n===o.length&amp;&amp;(this.gadgetTypingAttribute.foreColor=e.toARGBHex()),this.notifyTextChanged({string:o}),this.updateCursorTypingAttributes({color:e})}changeListStyle(){let{begin:e,end:t}=this.selectedRange,n=new fn(this._text),o=c6({string:n.text,range:{location:e,length:t-e}}),i=Up(n.text),s=Ax(o==null?void 0:o.style,i),a=new Px({string:n,selectedRange:{location:e,length:t-e}});a.setTextList({style:s,typingAttributes:this.cursorTypingAttributesArray});let l=a.retrieveSelectedRange();this.notifyTextChanged({string:a.retrieveString(),selection:{begin:an(l.location),end:an(l.location+l.length,"backward")},needsDismissPopover:!1})}notifyTextChanged({string:e,selection:t=void 0,committed:n=!0,needsDismissPopover:o=!0}){var l;let i=this._text,s=Up(e.text),a=Up(i.text);if(a&gt;dv){if(s&gt;a)return!1}else if(s&gt;dv)return!1;return this._text=e,(l=this.onTextChanged)==null||l.call(this,{committed:n&amp;&amp;!this.isComposing,needsDismissPopover:o}),t&amp;&amp;this.updateSelectedRange({begin:t.begin,end:t.end,needsDismissPopover:o}),!0}};function wM(r){return r==="\u30FB"||r===f6}var f6="\u2022";function uv(r){switch(r){case"bulleted":return`${f6}	`;case"numbered":return"1.	"}}function Ax(r,e,t=dv){if(!(e&gt;=t))switch(r){case void 0:return e+2&lt;=t?"bulleted":void 0;case"bulleted":return e&lt;t?"numbered":"bulleted";case"numbered":return}}function OAe({string:r,style:e,range:t}){let n=!1;for(let{location:o,length:i}of ZD(r,t)){let s=r.substring(o,o+i),a=Vs({string:s,location:0});if(a!==void 0&amp;&amp;a.style===e){n=!0;break}}return n}function roe(r){let{style:e,actualMarker:t,font:n,tabInterval:o}=r;Ee(t.endsWith("	"));let i=t.substring(0,t.length-1),s;switch(e){case"numbered":s=n.measureTextWidth(i+" ");break;case"bulleted":s=n.measureTextWidth(i+". ");break}let a=Math.max(0,o-s),l=Math.max(0,s-o);return{leading:a,trailing:l}}function Vs({string:r,location:e}){let t=Tc({text:r,location:e});if(t===void 0)return;let n=r.substring(t.location,t.location+t.length),o;if(o=n.match(/^(\t*)([0-9]*[.]\t).*(\n|$)/)){let i={location:t.location+o.index,length:o[1].length},s={location:i.location+i.length,length:o[2].length};return{style:"numbered",indentRange:i,markerRange:s}}else if(o=n.match(/^(\t*)(\t).*(\n|$)/)){let i={location:t.location+o.index,length:o[1].length},s={location:i.location+i.length,length:o[2].length};return{style:"bulleted",indentRange:i,markerRange:s}}}function c6({string:r,range:e}){for(let{location:t,length:n}of ZD(r,e)){let o=r.substring(t,t+n),i=Vs({string:o,location:0});if(i)return i}}function By({string:r,location:e}){let t=Tc({text:r,location:e});if(t===void 0)return 0;let o=r.substring(t.location,t.location+t.length).match(/^(\t+).*(\n|$)/);return o==null?0:o[1].length}function m6(r,e){let t="";for(let n=0;n&lt;e;n++)t+=r;return t}var Px=class{constructor({string:e,selectedRange:t}){this.dirty=!0;this.editor=new N2;this._string=e,this._selectedRange=t}retrieveString(){return this.clearDirty(),this._string}retrieveSelectedRange(){return this.clearDirty(),this._selectedRange}clearDirty(){!this.dirty||(this.renumberList(),this.dirty=!1)}retrieveEditorResult(){let{string:e,selection:t}=this.editor.apply(this._string,this._selectedRange);this._string=e,this._selectedRange=t}toggle({style:e,typingAttributes:t}){OAe({string:this._string.text,style:e,range:this._selectedRange})?this.removeList(this._selectedRange):this.addList({style:e,range:this._selectedRange,typingAttributes:t}),this.dirty=!0}setTextList({style:e,typingAttributes:t}){this.removeList(this._selectedRange),e&amp;&amp;this.addList({style:e,range:this._selectedRange,typingAttributes:t}),this.dirty=!0}addList({style:e,range:t,typingAttributes:n}){if(this._string.length==0)this.editor.insert({string:Ps(uv(e),n),location:0});else for(let{range:o}of this._string.lines(t)){let i=Vs({string:this._string.text,location:o.location});if(i===void 0){let s=By({string:this._string.text,location:o.location}),a=o.location+s,l=this._string.attributesAt(a),u=this.compensateAttributes({existing:l,typingAttributes:n}),d=Ps(uv(e),u);this.editor.insert({string:d,location:a})}else if(i.style!==e){let s=this._string.attributesAt(i.markerRange.location),a=this.compensateAttributes({existing:s,typingAttributes:n}),l=Ps(uv(e),a);this.editor.replaceCharacters({range:i.markerRange,string:l})}}this.retrieveEditorResult()}removeList(e){for(let{range:t}of this._string.lines(e)){let n=Vs({string:this._string.text,location:t.location});n!==void 0&amp;&amp;this.editor.replaceCharacters({range:n.markerRange,string:Ps("")})}this.retrieveEditorResult()}renumberList(){let e=new Map;for(let{range:t}of this._string.lines()){let n=By({string:this._string.text,location:t.location});Array.from(e.keys()).filter(i=&gt;i&gt;n).forEach(i=&gt;{e.delete(i)});let o=Vs({string:this._string.text,location:t.location});if(o!==void 0&amp;&amp;o.style==="numbered"){let i=e.get(n),s;i===void 0?s=1:s=i+1;let a=this._string.attributesAt(o.markerRange.location),l=Ps(`${s}.	`,a);this.editor.replaceCharacters({range:o.markerRange,string:l}),e.set(n,s)}}this.retrieveEditorResult()}indent({delta:e,typingAttributes:t}){let n=!1;if(this._string.length===0&amp;&amp;e&gt;0)n=!0,this.editor.insert({string:Ps(m6("	",e),t),location:0});else for(let{range:o}of this._string.lines(this._selectedRange)){let i=By({string:this._string.text,location:o.location}),a=Math.max(0,i+e)-i;if(a&gt;0){n=!0;let l=this._string.attributesAt(o.location+i),u=this.compensateAttributes({existing:l,typingAttributes:t}),d=Ps(m6("	",a),u);this.editor.insert({string:d,location:o.location+i})}else a&lt;0&amp;&amp;(n=!0,this.editor.replaceCharacters({range:{location:o.location,length:-a},string:Ps("")}))}return this.retrieveEditorResult(),this.dirty=this.dirty||n,n}deleteListMarker(e){this.editor.replaceCharacters({range:e.markerRange,string:Ps("")}),this.retrieveEditorResult(),this.dirty=!0}replace({text:e,range:t}){this._string.replace({range:t,string:e}),this._selectedRange={location:t.location+e.length,length:0},this.dirty=!0}replaceWithNewLine({range:e,typingAttributes:t}){let n=Vs({string:this._string.text,location:e.location});if(n===void 0)return;let o=xu({begin:ci(e),end:this._string.length}),i=this._string.substr(o),s=Vs({string:i.text,location:0})!==void 0,a=Math.min(Math.max(e.location-1,0),this._string.length-1),l=this._string.attributesAt(a),u=this.compensateAttributes({existing:l,typingAttributes:t});this.editor.replaceCharacters({range:e,string:Ps("")});let d=m6("	",n.indentRange.length);s?this.editor.insert({string:Ps(`
`+d,u),location:ci(e)}):this.editor.insert({string:Ps(`
`+d+uv(n.style),u),location:ci(e)}),this.retrieveEditorResult(),this.dirty=!0}compensateAttributes({existing:e,typingAttributes:t}){let n=e;for(let o of t)n.findIndex((s,a)=&gt;s.type===o.type)&gt;=0||n.push(o);return n}};var Ry=class{constructor({defaultTabInterval:e,firstLineHeadIndent:t,headIndent:n,lineSpacing:o,tabStops:i}){this.firstLineHeadIndent=0;this.defaultTabInterval=e,this.firstLineHeadIndent=t,this.headIndent=n,this.lineSpacing=o,this.tabStops=i}static get default(){let e=noe(1,12).map(t=&gt;t*Ry.kDefaultTabWidth);return new Ry({defaultTabInterval:0,firstLineHeadIndent:0,headIndent:0,lineSpacing:0,tabStops:e})}static defaultTabInterval(e){return e?e.measureTextWidth(" ")*6:this.kDefaultTabWidth}static ofLine({line:e,regularFont:t,boldFont:n}){if(e.length===0)return this.default;let o=e.attributeAt({location:0,type:"font"});if(!o)return this.default;let i=(o.value.bold?n:t).withSize(o.value.size),s=0,a=e.attributeAt({location:0,type:"paragraph_style"});a&amp;&amp;(s=a.value.line_spacing);let l=Vs({string:e.text,location:0});if(l){let u=e.substr(l.markerRange).text,d=this.defaultTabInterval(i),c=roe({style:l.style,actualMarker:u,tabInterval:d,font:i}),p=l.indentRange.length,h=d*(p+1)+c.trailing,f=noe(1,p+1).map(m=&gt;c.leading+d*m);return f.push(h),f.sort((m,g)=&gt;m-g),new Ry({defaultTabInterval:d,firstLineHeadIndent:c.leading,headIndent:h,lineSpacing:s,tabStops:f})}else{let u=By({string:e.text,location:0}),d=this.defaultTabInterval(i);return new Ry({defaultTabInterval:d,firstLineHeadIndent:0,headIndent:d*u,lineSpacing:s,tabStops:[]})}}tabAdvanceAt({x:e,fontSizeScale:t}){let n=0;for(let a=0;a&lt;this.tabStops.length;a++){let l=this.tabStops[a]*t;if(l1(e,n)&amp;&amp;Uj(l,e))return l-e;n=l}let i=(this.defaultTabInterval&gt;0?this.defaultTabInterval:Ry.kDefaultTabWidth)*t,s=Math.ceil(ox(e-n,i));return l1(e-n,s*i)&amp;&amp;s++,s*i-(e-n)}},Dk=Ry;Dk.kDefaultTabWidth=28;function noe(r,e){let t=[];for(let n=r;n&lt;e;n++)t.push(n);return t}function p6(r){let{line:e,regularFont:t,boldFont:n}=r,o={location:0,length:e.length},i;for(let s of e.attribute_ranges){if(!Zg(o,s.range))continue;let a=e.attributes[s.index];if(!a||a.type!=="font")continue;let{bold:l,size:u}=a.value,d=l?n:t,c=1/(d.font.unitsPerEm||1e3)*u,p=(d.font.ascender||1e3)*c,h=(d.font.descender||0)*c,f=p-h;i===void 0?i=f:i=Math.max(i,f)}return i}var ooe=()=&gt;/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var Oy=oe(koe());var AM=class{constructor(e){let t=Vs({string:e,location:0}),n=By({string:e,location:0});if(t||n&gt;0){let o=t?t.markerRange.location+t.markerRange.length:n,i=e.substring(o),s=[...yy(i)],a;s.length&gt;0?(a=o,this.graphemeLocations=[o],this.graphemeLocations.push(...s.map(l=&gt;a+=l.length)),this.breaker=new D6([new Oy.Break(o,o,!1)],i,o)):(this.breaker=new Oy.LineBreaker(e),this.graphemeLocations=[o])}else{this.breaker=new Oy.LineBreaker(e);let o=0;this.graphemeLocations=[...yy(e)].map(i=&gt;o+=i.length)}this.graphemeLocations.length&gt;0?this.nextLocation=this.graphemeLocations[0]:this.nextLocation=e.length}nextBreak(){let e;for(;;){let t=this.breaker.nextBreak();if(!t)return e;if(e=t,e.position&gt;=this.nextLocation){for(let n of this.graphemeLocations)if(n&gt;e.position){this.nextLocation=n;break}return e}}}},D6=class{constructor(e,t,n){this.leadingBreaks=e,this.breaker=new Oy.LineBreaker(t),this.offset=n}nextBreak(){if(this.leadingBreaks.length&gt;0)return this.leadingBreaks.shift();let e=this.breaker.nextBreak();if(e){let t=e.position+this.offset,n=e.spacePos+this.offset;return new Oy.Break(t,n,e.required)}else return}};var Ek=class{constructor(e,t){this.scale=e;this.lines=t}},Ex=class{constructor(e){this.scale=e}},_k=class{constructor({size:e,vertical:t,edgeInsets:n}){this.size=e,this.vertical=t,this.edgeInsets=n}get maxScale(){let e=1,t=this.edgeInsets.left+this.edgeInsets.right;t&gt;0&amp;&amp;(e=Math.min(e,this.size.width/t));let n=this.edgeInsets.top+this.edgeInsets.bottom;return n&gt;0&amp;&amp;(e=Math.min(e,this.size.height/n)),e}layout(e){let t,n=this.measure(e,this.maxScale);if(n instanceof Ek)return{lines:n.lines,scale:n.scale};t=n;let o=this.measure(e,Number.EPSILON);if(o instanceof Ex)return{lines:[],scale:1};let i=o;for(;;){let s=this.measure(e,(i.scale+t.scale)*.5);if(s instanceof Ek?i=s:t=s,Math.abs(t.scale-i.scale)/i.scale&lt;=_k.kTargetRelativeDifference)break}return{scale:i.scale,lines:i.lines}}measure(e,t){var m;let{text:n,regularFont:o,boldFont:i,fontSizeScale:s}=e,a=_k.epsilon*s,{size:l,edgeInsets:u,vertical:d}=this,c=l.width/t-(u.left+u.right),p=l.height/t-(u.top+u.bottom);d&amp;&amp;([p,c]=[c,p]);let h=[],f=0;for(let{line:g}of n.lines()){let v=Dk.ofLine({line:g,regularFont:o,boldFont:i}),b=v.lineSpacing*s,C=0,x={runs:[],spacing:b},y=0,S={...e,text:g},T=IM({location:y,amount:v.firstLineHeadIndent,framesetter:S});T&amp;&amp;(x.runs.push(T),C=T.advance);let w=!0,k=new AM(g.text),A=k.nextBreak(),I;for(;A&amp;&amp;y&lt;g.length;){let{spacePos:E,position:O}=A,Q=y,j=E-y,U=Aoe({framesetter:S,startLocation:Q,length:j,startX:C,style:v,prevGlyph:I});if(U.length===0){y=O,A=k.nextBreak();continue}w&amp;&amp;(U[0].kerning=0);let B=Ioe(U);if(!w&amp;&amp;C+B&gt;c+a){let z=Ik({line:x,y:f,vertical:d,constraintWidth:c,framesetter:S});h.push(z),f+=z.ascender-z.descender+z.spacing,x={runs:[],spacing:b};let N=IM({location:y,amount:v.headIndent,framesetter:S});N?(x.runs.push(N),C=N.advance):C=0,w=!0,U[0].kerning=0,B=Ioe(U)}if(w&amp;&amp;C+B&gt;c+a){if(y===0&amp;&amp;g.text.startsWith("	"))return new Ex(t);for(let z of U){if(C+z.kerning+z.advance&gt;c+a){if(tk(x)===0)return new Ex(t);let N=Ik({line:x,y:f,vertical:d,constraintWidth:c,framesetter:S});h.push(N),f+=N.ascender-N.descender+N.spacing,x={runs:[],spacing:b};let V=IM({location:y,amount:v.headIndent,framesetter:S});V?(x.runs.push(V),C=V.advance):C=0,w=!1,z.kerning=0}x.runs.push(z),C+=z.kerning+z.advance,y+=z.text.length}}else{for(let V of U)x.runs.push(V),C+=V.kerning+V.advance,y+=V.text.length;let z=U[U.length-1],N=z.graphemes[z.graphemes.length-1];I=(m=N==null?void 0:N.glyphs)==null?void 0:m.main,w=!1}if(E&lt;O){let z=Aoe({startLocation:E,length:O-E,startX:C,framesetter:S,style:v,prevGlyph:I});for(let N of z){if(C&gt;c+a){let V=Ik({line:x,y:f,vertical:d,constraintWidth:c,framesetter:S});h.push(V),f+=V.ascender-V.descender+V.spacing,x={runs:[],spacing:b};let re=IM({location:y,amount:v.headIndent,framesetter:S});re?(x.runs.push(re),C=re.advance):C=0}x.runs.push(N),C+=N.kerning+N.advance,y+=N.text.length}}A=k.nextBreak()}if(tk(x)&gt;0){let E=Ik({line:x,y:f,vertical:d,constraintWidth:c,framesetter:S});f+=E.ascender-E.descender+E.spacing,h.push(E)}}if(n.text.endsWith(`
`)){let g=n.substr({location:n.length-1,length:1}),v=h8(g.attributeAt({location:0,type:"foreground_color"})),b=g.attributeAt({location:0,type:"font"});if(b){let{bold:C,size:x}=b.value,y=x*s,S=(C?i:o).withSize(y),{ascender:T,descender:w,family:k}=S,E=Ik({line:{runs:[{text:"",graphemes:[{grapheme:"",advance:0}],shouldUseGlyph:!1,rotate:!1,ascender:T,descender:w,fontSize:y,fontFamily:k,advance:0,kerning:0,rgbaHex:v,bold:C,bitmap:!1}],spacing:0},y:f,vertical:d,constraintWidth:c,framesetter:e});h.push(E),f+=E.ascender-E.descender+E.spacing}}if(h.length&gt;0){let g=h[h.length-1];f-=g.spacing,g.spacing=0}return f&lt;=p+a?new Ek(t,h):new Ex(t)}},Uy=_k;Uy.kSignificantDigits=3,Uy.kTargetRelativeDifference=Math.pow(10,-_k.kSignificantDigits),Uy.epsilon=1e-10;function IM(r){let{location:e,amount:t,framesetter:n}=r,{text:o,regularFont:i,boldFont:s,fontSizeScale:a}=n;if(t&lt;=0)return;let l=o.attributeAt({location:e,type:"font"});if(!l)return;let{bold:u,size:d}=l.value,c=d*a,p=(u?s:i).withSize(c),{ascender:h,descender:f,family:m}=p,g=t*a;return{text:"",graphemes:[{grapheme:"",advance:g}],shouldUseGlyph:!1,advance:g,kerning:0,rotate:!1,rgbaHex:"#000000ff",fontSize:c,fontFamily:m,bold:u,ascender:h,descender:f,bitmap:!1,headIndent:!0}}function aIe(r){let{prevGlyph:e,glyph:t,font:n}=r;return e?n.font.getKerningValue(e,t)/n.font.unitsPerEm*n.fontSize:0}var EM;function Poe(r){let{char:e,fontSize:t,font:n}=r;EM===void 0&amp;&amp;(EM=fr.create().getContext2dForce());let o=it(Math.round(t),40,f8),i=ox(t,o);return EM.font=`${o}px '${n.family}'`,EM.measureText(e).width*i}function Aoe(r){var f,m;let{framesetter:e,startLocation:t,length:n,style:o,startX:i,prevGlyph:s}=r,{text:a}=e,l=a.text.substring(t,t+n),u=yy(l),d=[],c=t,p=i,h=s;for(let g of u){let v=lIe({framesetter:e,location:c,char:g,x:p,style:o,prevGlyph:h});v?(d.push(v),p+=v.kerning+v.advance,h=(m=(f=v.graphemes[v.graphemes.length-1])==null?void 0:f.glyphs)==null?void 0:m.main):h=void 0,c+=g.length}return d}function lIe(r){let{framesetter:e,location:t,char:n,style:o,x:i,prevGlyph:s}=r,{text:a,fontSizeScale:l,regularFont:u,boldFont:d,lookupGlyph:c}=e,p=a.attributeAt({location:t,type:"font"});if(!p)return;let{bold:h,size:f}=p.value,m=f*l,g=(h?d:u).withSize(m),{ascender:v,descender:b,family:C}=g,x=h8(a.attributeAt({location:t,type:"foreground_color"})),y=ooe();if(n==="	"){let S=o.tabAdvanceAt({x:i,fontSizeScale:l});return{text:n,graphemes:[{grapheme:n,advance:S}],shouldUseGlyph:!1,advance:S,kerning:0,rotate:!1,rgbaHex:x,fontSize:m,fontFamily:C,bold:!1,ascender:v,descender:b,bitmap:!1}}else{if(n===`
`)return{text:`
`,graphemes:[{grapheme:`
`,advance:0}],shouldUseGlyph:!1,advance:0,kerning:0,rotate:!1,rgbaHex:x,fontSize:m,fontFamily:C,bold:!1,ascender:v,descender:b,bitmap:!1};if(y.test(n)){let S=Poe({char:n,font:g,fontSize:m});return{text:n,graphemes:[{grapheme:n,advance:S}],shouldUseGlyph:!1,advance:S,kerning:0,rotate:!0,rgbaHex:"#000000ff",fontSize:m,fontFamily:C,bold:!1,ascender:v,descender:b,bitmap:!0}}else{let{glyph:S,rotate:T,substituted:w}=c(n,g),k=g.advanceWidth(S),A,I;return S.name==="gid0"||k===void 0?(A=Poe({char:n,font:g,fontSize:m}),I=0):(A=k,I=aIe({prevGlyph:s,glyph:S,font:g})),{text:n,graphemes:[{grapheme:n,glyphs:{main:S,sub:w},advance:A}],shouldUseGlyph:w!=null,advance:A,kerning:I,rotate:T,rgbaHex:x,fontSize:m,fontFamily:g.family,bold:h,ascender:v,descender:b,bitmap:!1}}}}function uIe({hAlignment:r,vAlignment:e,vertical:t}){if(t)switch(e){case"top":return"negative";case"bottom":return"positive";default:return"center"}else switch(r){case"left":return"negative";case"right":return"positive";default:return"center"}}function Ik(r){let{line:e,y:t,vertical:n,constraintWidth:o,framesetter:i}=r,{hAlignment:s,vAlignment:a,fontSizeScale:l}=i,u=uIe({hAlignment:s,vAlignment:a,vertical:n}),d,c=rx(e);switch(u){case"negative":d=0;break;case"positive":d=o-c;break;case"center":d=o*.5-c*.5;break}let{ascender:p,descender:h}=tx(e,l);return{...e,ascender:p,descender:h,origin:{x:d,y:t+p}}}function Ioe(r){if(r.length===0)return 0;let e=0;for(let t=0;t&lt;r.length;t++){let n=r[t];e+=n.kerning+n.advance}return e}var dIe=(r,e)=&gt;{let t=e.font.charToGlyph(r);return t?{glyph:t,rotate:!1}:{glyph:e.font.charToGlyph("\u25A1"),rotate:!1}},cIe="\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3046\u3091\u3092\u3093\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30A6\u30F1\u30F2\u30F3\u3094\u304C\u304E\u3050\u3052\u3054\u3056\u3058\u305A\u305C\u305E\u3060\u3062\u3065\u3067\u3069\u3070\u3073\u3076\u3079\u307C\u30F4\u30AC\u30AE\u30B0\u30B2\u30B4\u30B6\u30B8\u30BA\u30BC\u30BE\u30C0\u30C2\u30C5\u30C7\u30C9\u30D0\u30D3\u30D6\u30D9\u30DC\u30F7\u30F8\u30F9\u30FA\u3071\u3074\u3077\u307A\u307D\u30D1\u30D4\u30D7\u30DA\u30DD",pIe=(r,e)=&gt;{let t=e.font.charToGlyphIndex(r),n=e.font.glyphs.get(t);if(!n)return{glyph:e.font.charToGlyph("\u25A1"),rotate:!1};let o=mIe(r);if(e.family.startsWith("loilo-NotoSans")&amp;&amp;cIe.includes(r))return{glyph:n,rotate:o};let i=e.vertGsubMap[t];if(i!==void 0){let s=e.font.glyphs.get(i);return{glyph:n,substituted:s,rotate:o}}else return{glyph:n,rotate:o}};function hIe(r){return r.selectedRange===void 0&amp;&amp;r.onlyLackingGlyphs===void 0&amp;&amp;r.compositionRange===void 0}var k6=class{constructor({text:e,size:t,vertical:n,regularFont:o,boldFont:i,fontSizeScale:s,hAlignment:a,vAlignment:l,edgeInsets:u}){this.lines=[];this.text=e,this.size=t,this.vertical=n,this.hAlignment=a,this.vAlignment=l,this.edgeInsets=u;let d=new Uy({size:t,edgeInsets:u,vertical:n}),c={text:e,lookupGlyph:n?pIe:dIe,regularFont:o,boldFont:i,fontSizeScale:s,hAlignment:a,vAlignment:l};this.fontSizeScale=s;let p=d.layout(c),{lines:h,scale:f}=p;this.lines=h,this.shrinkScale=f;let{width:m,height:g}=Ere(this.lines,s),v=$e(m*f,g*f);this.boundingBoxSize=this.vertical?Gj(v):v,this.textIndexLut=[];let b=0;for(let C=0;C&lt;this.lines.length;C++){let x=this.lines[C];this.textIndexLut.push(b);for(let y of x.runs)b+=y.text.length}this.textIndexLut.push(b)}get modelToViewTransform(){let e=new ft,t=this.shrinkScale,n=Nt(this.size,xl(1,t,0)),o=Nt(this.boundingBoxSize,xl(1,t,0)),i=this.edgeInsets,s,a;return this.vertical?(s=i.top,this.hAlignment==="right"?a=i.right:this.hAlignment==="center"?a=n.width/2-o.width/2:a=n.width-o.width-i.left):(s=i.left,this.vAlignment==="top"?a=i.top:this.vAlignment==="middle"?a=n.height/2-o.height/2:a=n.height-o.height-i.bottom),e.translate(s,a),e.scale(t,t),this.vertical&amp;&amp;(e.translate(-this.size.height*.5,-this.size.width*.5),e.rotate(Math.PI/2,"rad"),e.translate(this.size.width*.5,this.size.height*.5)),e}draw(e,t={}){let{a:n}=e.getTransform(),o=Nt(this.size,n/devicePixelRatio),i=Ku;if(i&gt;=kr(o)&amp;&amp;hIe(t)){if(this.thumbnail===void 0){let s=od(this.size,i);if(s!==void 0){let a=Nt(this.size,s),l=fr.create({width:Math.ceil(a.width),height:Math.ceil(a.height)}),u=l.getContext2dForce();u.scale(s,s),this.drawInternal(u,t),this.thumbnail={image:l,size:a}}}this.thumbnail?e.drawImage(this.thumbnail.image,0,0,this.thumbnail.size.width,this.thumbnail.size.height,0,0,this.size.width,this.size.height):this.drawInternal(e,t)}else this.drawInternal(e,t)}drawInternal(e,t={}){let{selectedRange:n,compositionRange:o,onlyLackingGlyphs:i}=t;e.save(),e.beginPath(),e.textAlign="start",e.textBaseline="alphabetic";let s=this.modelToViewTransform;e.transform(s.a,s.b,s.c,s.d,s.e,s.f);for(let a=0;a&lt;this.lines.length;a++){let l=this.lines[a],u=this.textIndexLut[a];fIe({ctx:e,line:l,vertical:this.vertical,onlyLackingGlyphs:i===!0}),n&amp;&amp;Eoe({ctx:e,line:l,location:u,range:n}),o&amp;&amp;Eoe({ctx:e,line:l,location:u,range:o})}e.restore()}hasLackingGlyphs(){for(let e of this.lines)for(let t of e.runs)if(m8(t))return!0;return!1}cursorAt(e){let t=-1;if(e.location&lt;0?t=0:this.text.length&lt;=e.location?t=this.lines.length-1:t=this.textIndexLut.findIndex(l=&gt;l&gt;e.location)-1,t&lt;0||this.lines.length&lt;=t)return;e.affinity==="backward"&amp;&amp;t&gt;0&amp;&amp;this.textIndexLut[t]===e.location&amp;&amp;!Ire(this.lines[t-1],`
`)&amp;&amp;t--;let n=this.lines[t];if(n.runs.length===0)return;let o=this.textIndexLut[t],i=n.runs[0],s=n.origin.x;for(let l of n.runs){let u=o+l.text.length;if(o&lt;=e.location&amp;&amp;e.location&lt;u)break;i=l,o=u,s+=l.advance+l.kerning}if(!i)return;let a=this.modelToViewTransform;if(this.vertical){let l=n.origin.y,u=a.applied(De(s,l));return qe(u.x+n.descender*this.shrinkScale,u.y,(n.ascender-n.descender)*this.shrinkScale,0)}else{let l=n.origin.y-n.ascender,u=a.applied(De(s,l));return qe(u.x,u.y,0,(n.ascender-n.descender)*this.shrinkScale)}}position({from:e,direction:t,offset:n}){let o=0,i=0;if(this.vertical?t==="left"?i=n:t==="right"?i=-n:t==="up"?o=-n:o=n:t==="left"?o=-n:t==="right"?o=n:t==="up"?i=-n:i=n,o!=0){let s=this.text.advance({location:e,byComposedCharacterOffset:o});return s===void 0&amp;&amp;(s=e+o),an(s,o&gt;0?"backward":"forward")}else{let s=-1;e&lt;0?s=0:this.text.length&lt;=e?s=this.lines.length-1:s=this.textIndexLut.findIndex(f=&gt;f&gt;e)-1,s=Math.min(Math.max(s,0),this.lines.length-1);let a=this.lines[s],l=s+i;if(l&lt;0)return an(0);if(this.lines.length&lt;=l)return an(this.text.length);let u=this.lines[l],d=this.textIndexLut[s],c=a.origin.x;for(let f=0;f&lt;a.runs.length;f++){let m=a.runs[f];if(d&lt;=e&amp;&amp;e&lt;d+m.text.length)break;c+=m.advance+m.kerning,d+=m.text.length}let p=g8({line:u,x:c}),h=this.textIndexLut[l];for(let f=0;f&lt;p;f++)h+=u.runs[f].text.length;return an(h,p===u.runs.length?"backward":"forward")}}closestPosition(e){if(this.lines.length===0)return{location:0,affinity:"forward"};let n=this.modelToViewTransform.inverted().applied(e),o=this.lines.length-1;for(let l=0;l&lt;this.lines.length;l++){let u=this.lines[l],d=u.origin.y-u.ascender,c=u.origin.y-u.descender+u.spacing;if(n.y&lt;d){o=Math.max(l-1,0);break}else if(n.y&lt;c){o=l;break}}let i=this.lines[o],s=this.textIndexLut[o];if(i.runs.length===0)return{location:s,affinity:"forward"};let a=g8({line:i,x:n.x});for(let l=0;l&lt;a;l++)s+=i.runs[l].text.length;return{location:s,affinity:a===i.runs.length?"backward":"forward"}}hitTest(e){let n=this.modelToViewTransform.inverted().applied(e);for(let o of this.lines){let{ascender:i,descender:s}=tx(o,this.fontSizeScale),a=0,l=0;o.runs.length&gt;0&amp;&amp;(a=o.runs[0].fontSize/2,l=o.runs[o.runs.length-1].fontSize/2);let u=rx(o),d=qe(o.origin.x-a,o.origin.y-i,u+a+l,i-s+o.spacing);if(Pn(d,n))return!0}return!1}textRects(e){let t=[];for(let n=0;n&lt;this.lines.length;n++){let o=this.textIndexLut[n],i;n+1&lt;this.lines.length?i=this.textIndexLut[n+1]-1:this.text.text.endsWith(`
`)?i=this.text.length-1:i=this.text.length;let s=Zg(e,{location:o,length:i-o});if(!s||s.length&lt;1)continue;let a=this.cursorAt({location:s.location,affinity:"forward"}),l=this.cursorAt({location:s.location+s.length,affinity:"forward"});if(!a||!l)continue;let u=Math.min(a.x,l.x),d=Math.max(a.x+a.width,l.x+l.width),c=Math.min(a.y,l.y),p=Math.max(a.y+a.height,l.y+l.height);t.push(qe(u,c,d-u,p-c))}return t}};function Cy({text:r,size:e,vertical:t,fontSizeScale:n,hAlignment:o,vAlignment:i,baseEdgeInsets:s=M2}){let a=Ot.regularFont.get(),l=Ot.boldFont.get();if(!(!a||!l))return new k6({text:r,size:e,vertical:t,regularFont:a,boldFont:l,hAlignment:o,vAlignment:i,fontSizeScale:n,edgeInsets:I_(s,n)})}function*Foe(r){let e=0,t=0;for(let n of r.runs)yield{run:n,dx:t,location:e},t+=n.advance+n.kerning,e+=n.text.length}function fIe({ctx:r,line:e,vertical:t,onlyLackingGlyphs:n}){let o,i=s=&gt;{let a=!0;n&amp;&amp;(a=m8(s.run)),a&amp;&amp;Are({run:s.run,ofLine:e,ctx:r,vertical:t,dx:s.dx})};for(let{run:s,dx:a}of Foe(e))if(o){let l=_2({run:o.run,next:s,vertical:t,onlyLackingGlyphs:n});l?o={run:l,dx:o.dx}:(i(o),o={run:s,dx:a})}else o={run:s,dx:a};o&amp;&amp;i(o)}function Eoe({ctx:r,line:e,location:t,range:n,fillStyle:o="rgba(2, 112, 234, 0.2)"}){let i,s,a={location:t,length:tk(e)},l=Zg(ek(n),a);if(l&amp;&amp;l.length&gt;0)i=l.location-a.location,s=i+l.length;else return;let u=e.origin,d=e.ascender-e.descender,c,p;for(let{run:h,dx:f,location:m}of Foe(e))i===m?c=u.x+f:s===m&amp;&amp;(p=u.x+f),f+=h.advance+h.kerning,m+=h.text.length,i===m?c=u.x+f:s===m&amp;&amp;(p=u.x+f);c===void 0||p===void 0||(r.save(),r.fillStyle=o,r.fillRect(c,u.y-e.ascender,p-c,d),r.restore())}function an(r,e="forward"){return{location:r,affinity:e}}function h6(r,e){return r.location===e.location&amp;&amp;r.affinity===e.affinity}function mIe(r){return gIe.has((0,_oe.obtainUnicode)(r)[0])}var gIe=function(){let r=[],e=[];r.push(...Lr(4352,256)),r.push(...Lr(9312,160)),r.push(...Lr(9728,256)),r.push(...Lr(9984,192)),r.push(...Lr(11904,128)),r.push(...Lr(12032,224)),r.push(...Lr(12272,16)),r.push(...Lr(12288,64)),e.push(...Lr(12296,10)),e.push(...Lr(12308,8)),e.push(...Lr(12317,3)),r.push(...Lr(12352,96)),r.push(...Lr(12448,96)),r.push(...Lr(12544,48)),r.push(...Lr(12592,96)),r.push(...Lr(12688,16)),r.push(...Lr(12704,32)),r.push(...Lr(12736,48)),r.push(...Lr(12784,16)),r.push(...Lr(12800,256)),r.push(...Lr(13056,256)),r.push(...Lr(13312,2582)),r.push(...Lr(19968,20941)),r.push(...Lr(44032,11172)),r.push(...Lr(55216,80)),r.push("\uF8FF".charCodeAt(0)),r.push(...Lr(63744,512)),r.push(...Lr(65040,16)),r.push(...Lr(65280,240)),e.push(...Lr(65377,127)),r.push(...Lr(127488,256)),r.push(...Lr(127744,768)),r.push(...Lr(128512,80)),r.push(...Lr(128640,128)),r.push(...Lr(12540,1)),r.push(...Lr(65392,1));let t=new Set(r);return e.forEach(n=&gt;{t.delete(n)}),t}();var cv=$e(612,792),Moe=144/72,_M=class{constructor({dest:e,size:t=cv,creationDate:n=new Date}){this.version="1.5";this.refId=1;this.refs=[];this.fontNameMap=new Map;this.xObjectNameMap=new Map;this.fontIds=new hx("C");this.imageIds=new hx("I");this.gsIds=new hx("gs");this.dest=e,this.fileId=new fx(vIe()),this.writer=new oM(e),this.writer.write("%PDF-"+this.version),this.writer.write("%\xFF\xFF\xFF\xFF"),this.info=this.ref({Creator:"LoiLo Inc",Producer:"LoiLo Note School (Web)",CreationDate:n}),this.pages=this.ref({Type:new Hn("Pages"),Kids:[],Count:0}),this.root=this.ref({Type:new Hn("Catalog"),Pages:this.pages}),this.resources=this.ref({ProcSet:[new Hn("PDF"),new Hn("Text"),new Hn("ImageB"),new Hn("ImageC"),new Hn("ImageI")],Font:{},XObject:{},ExtGState:{}}),this.currentPage=this.addPage({size:t})}end(){let e=new nM;for(let n of this.refs)e.add(this.writer.offset,n.generation,"n"),n.visit(this.writer);let t=this.writer.offset;e.visit(this.writer),this.writer.write("trailer"),this.writer.write(bk({Root:this.root,Info:this.info,Size:e.size(),ID:[this.fileId,this.fileId]})),this.writer.write("startxref"),this.writer.write(`${t}`),this.writer.write("%%EOF")}ref(e){let t=new cx({id:this.refId++,data:e});return this.refs.push(t),t}stream(e,t){let n=new px({id:this.refId++,content:e,data:t});return this.refs.push(n),n}registerFont(e){this.fontNameMap.set(e,this.fontIds.next())}addFont({font:e,fontName:t}){var o;let n=(o=this.fontNameMap.get(t))!=null?o:this.fontIds.next();this.resources.data.Font[n]=e,this.fontNameMap.set(t,n)}addCIDFont({fontName:e,fontData:t,info:n,isCFF:o,glyphIdToCodePoints:i}){let s=this.stream(mx(t),{Subtype:o?new Hn("CIDFontType0C"):void 0}),a=o?this.ref({...n,FontFile3:s}):this.ref({...n,FontFile2:s}),l=this.ref({Supplement:0,Registry:"Adobe",Ordering:"Identity"}),u=tne({glyphIdToCodePoints:i}),d=this.stream(mx(u),{Type:new Hn("CMap"),CMapName:new Hn("Adobe-Identity-0"),CIDSystemInfo:l,WMode:0}),c=this.ref({Type:new Hn("Font"),BaseFont:new Hn(e),Subtype:new Hn(o?"CIDFontType0":"CIDFontType2"),FontDescriptor:a,CIDSystemInfo:l,CIDToGIDMap:o?void 0:new Hn("Identity")}),p=this.ref({Type:new Hn("Font"),Subtype:new Hn("Type0"),Encoding:new Hn("Identity-H"),BaseFont:new Hn(e),DescendantFonts:[c],ToUnicode:d});this.addFont({font:p,fontName:e})}addXObject({data:e,obj:t,name:n}){let o=this.imageIds.next();this.resources.data.XObject[o]=this.stream(mx(e),t),this.xObjectNameMap.set(n,o)}currentPageSize(){return{width:this.currentPage.data.MediaBox[2],height:this.currentPage.data.MediaBox[3]}}setCurrentPageSize(e){this.currentPage.data.MediaBox[2]=e.width,this.currentPage.data.MediaBox[3]=e.height}addPage({size:e=cv}={}){let t=this.ref({Type:new Hn("Page"),MediaBox:[0,0,e.width,e.height],Resources:this.resources,Contents:[],Parent:this.pages});return this.pages.data.Count+=1,this.pages.data.Kids.push(t),this.currentPage=t,t}addContent(){let e=new gx(this),t=this.stream(e);return this.currentPage.data.Contents.push(t),e}addGraphicState(e){let t=this.ref(e),n=this.gsIds.next();return this.resources.data.ExtGState[n]=t,n}};function vIe(){return Sr().replace(/-/g,"")}function Noe(r){switch(r){case 3:return"quizButtonAnswer";case 0:return"quizButtonAnswerTogether";case 1:return"quizButtonEdit";case 2:return"quizButtonResult";case 4:return"quizButtonHelp"}}function Boe(r){var s;let{card:e,store:t}=r;if(!(e instanceof jr))return;let n=Xt(t);if(n===void 0||Vr.getEndpoint("loilonote-quiz")===void 0)return;let o=[{state:{interaction:"none"},role:4}],i=e.content;if(((s=i.quiz_author)==null?void 0:s.id)===`${t.userInfo.user_id}`)if(n==="self-study")o.push({state:{interaction:"none"},role:1},{state:{interaction:"none"},role:2});else{let a=t.screenSharingActionNotification[n];(t.userInfo.is_teacher||a&amp;&amp;as(a)&amp;&amp;a.presenter===t.userInfo.user_id)&amp;&amp;o.push({state:{interaction:"none"},role:0}),o.push({state:{interaction:"none"},role:1},{state:{interaction:"none"},role:3},{state:{interaction:"none"},role:2})}else o.push({state:{interaction:"none"},role:3}),i.is_result_opened&amp;&amp;o.push({state:{interaction:"none"},role:2});return o}function Roe(r){let{ctx:e,styles:t,layout:n}=r,{data:o,buttons:i}=t,s=he.get();FM({data:o,ctx:e,stringProvider:s}),i&amp;&amp;NM({ctx:e,layout:n,buttons:i,stringProvider:s})}async function Loe(r){let{data:e,ctx:t}=r;await MM(t,e)}function Ooe(r){switch(r){case 1:return"attendanceButtonAnswer";case 0:return"attendanceButtonOpen";case 2:return"attendanceButtonHelp"}}function Uoe(r){let{card:e,store:t}=r;if(!(e instanceof wn)||!Vr.getEndpoint("loilonote-attendance"))return;let n=[];return n.push({state:{interaction:"none"},role:2}),t.userInfo.is_teacher?(n.push({state:{interaction:"none"},role:0}),n.push({state:{interaction:"none"},role:1})):n.push({state:{interaction:"none"},role:1}),n}function zoe(r){let{ctx:e,layout:t,styles:n}=r,o=he.get();FM({data:n.data,ctx:e,stringProvider:o}),n.buttons&amp;&amp;NM({ctx:e,layout:t,buttons:n.buttons,stringProvider:o})}async function Hoe(r){let{ctx:e,data:t}=r;await MM(e,t)}var BM=30,RM=class{constructor({doc:e,boldFont:t,regularFont:n,adapter:o}){this.doc=e,this.regularFont=n,this.boldFont=t,this.adapter=o,this.doc.registerFont(n.family),this.doc.registerFont(t.family)}async renderCard(e){let t=async function*(){yield{card:e}};await this.renderCardsAsync({cards:t()})}async renderCardsAsync({cards:e,needsFooter:t=!1,onProgress:n}){let o=0,i=0;for await(let{card:s,authorName:a}of e){let l=0,u=s.memberCountOverGroup();for(let d of s.headGroup().iteratorOverGroup()){i&gt;0&amp;&amp;this.doc.addPage();let c=this.doc.addContent();if(t){let p={pageSize:_6(cv,d.size),ctx:c};await this.renderBody({...p,card:d}),await this.renderFooter({...p,memberIndex:l,memberCount:u,authorName:a})}else await this.renderCardTreeInternal(c,d);i++,l++}n==null||n(++o)}}async renderBody(e){let{ctx:t,pageSize:n,card:o}=e;t.save();let i=Xr({width:n.width,height:n.height-BM},n);t.transform(i,0,0,i,(1-i)*n.width/2,BM),await this.renderCardTreeInternal(t,o),t.restore()}async renderFooter(e){let{ctx:t,pageSize:n,memberIndex:o,memberCount:i,authorName:s}=e;if(t.save(),t.transform(1,0,0,-1,0,BM),s){let l=this.footerTextFrames({pageSize:n,align:"center",text:s});await _x({ctx:t,frame:l})}let a=this.footerTextFrames({pageSize:n,align:"right",text:`${o+1}/${i}`});await _x({ctx:t,frame:a}),t.restore()}footerTextFrames({align:e,pageSize:t,text:n}){let i=$e(t.width,BM),s=new fn({text:n}),a={location:0,length:s.length};s.addAttribute({attribute:{type:"font",value:{bold:!1,size:22}},range:a}),s.addAttribute({attribute:{type:"foreground_color",value:To().toARGBHex()},range:a});let l=Cy({text:s,size:i,fontSizeScale:1,vertical:!1,hAlignment:e,vAlignment:"middle"});if(!l)throw new ep;return l}async renderCardTreeInternal(e,t){let{doc:n}=this,o=_6(cv,t.size);n.setCurrentPageSize(o);let i=Xr(o,t.size),[s,a]=[o.width/2,o.height/2],l=new ft(i,0,0,-i,s,a);for(let h of t.renderingOrderIterator()){let f=h.extendedDrawn();if(f&amp;&amp;f.commands.length&gt;0){let m=Xn.get("drawn",h),g=await m.updateData(h);if((g==null?void 0:g.type)==="error")throw g.error;m.mergeExtended(h);let v=t.createDrawnGeometry("drawn");mr.get(h).drawn.redrawThumbnails({geometry:v,contents:m.packContents()})}}let u=Fx({canvas:o,viewport:Tl(),root:t,toolVisible:!1,narrationRecording:!1,dpr:1}),d=zy({cards:[t],callback:fo,state:u,mtx:l});e.save(),e.transform(l.a,l.b,l.c,l.d,l.e,l.f);let c=t.localPosition;l.translate(-c.x,-c.y),e.translate(-c.x,-c.y),await new I6(this.adapter,this.doc,t).paint(e,d),e.restore()}},I6=class{constructor(e,t,n){this.adapter=e;this.doc=t;this.card=n;this.measure=new E6}getCard(e){let t=this.card.getCard(e);return Ee(t!=null,"card not found: "+e),t}async paint(e,t){!t.visible||(t.type==="card"?await this.paintCard(e,t):t.type==="connector"?this.paintConnector(e,t):t.type==="container"&amp;&amp;await this.paintContainer(e,t))}paintConnector(e,t){fe.log("exporter renderConnectors:begin",this.measure.diff());let n=t.localMtx;e.save(),e.transform(n.a,n.b,n.c,n.d,n.e,n.f),yx(e,t.layout.orbits,t.layout.lineScale),e.restore(),fe.log("exporter renderConnectors:end",this.measure.diff())}async paintCard(e,t){var b,C;let{localMtx:n,styles:o,layout:i,props:s}=t,{measure:a,doc:l,adapter:u}=this,d=this.getCard(s.id);fe.log("exporter renderCardBackground:begin",a.diff());let{width:c,height:p}=i.bounds,[h,f]=[i.localBounds.x,i.localBounds.y],{scaleToParent:m}=i;if(e.save(),e.transform(n.a,n.b,n.c,n.d,n.e,n.f),o.shade){fe.log("exporter foldShade:begin",a.diff()),e.save();let{r:x,g:y,b:S}=nn(o.shade).normalized();e.fillColor(x,y,S),e.rect(h+ju*m,f+ju*m,c,p),e.fill(),e.restore(),fe.log("exporter foldShade:end",a.diff())}if(o.background){fe.log("exporter bg:begin",a.diff()),e.save();let{r:x,b:y,g:S,a:T}=nn(o.background).normalized();e.fillColor(x,S,y),T&lt;1&amp;&amp;e.fillOpacity(T),e.rect(h,f,c,p),e.fill(),e.restore(),fe.log("exporter bg:end",a.diff())}if(o.contentThumb){fe.log("exporter thumb:begin",a.diff()),e.save(),e.rect(h,f,c,p),e.clip(),e.endPath(),fe.log("exporter loadThumb:begin",a.diff());let x;if(fe.log("exporter pdf:begin",a.diff()),d instanceof Yi?x=await u.loadPdfThumb(d,A6({base:cv,root:this.card.size,card:d.size,thumb:d.contentSize,thumbWithMargins:d.contentSizeWithMargins})):x=await u.loadThumb(d,A6({base:cv,root:this.card.size,card:d.size,thumb:d.contentSize,thumbWithMargins:d.contentSizeWithMargins})),fe.log("exporter loadThumb:done",a.diff()),x){fe.log("exporter embedImage:begin",a.diff()),P6(l,x);let y=(b=o.contentThumb.width)!=null?b:x.width,S=(C=o.contentThumb.height)!=null?C:x.height;e.translate(o.contentThumb.x,o.contentThumb.y+S),e.scale(1,-1),e.scale(y,S),e.do(x.name),fe.log("exporter embedImage:end",a.diff())}e.restore(),fe.log("exporter thumb:end",a.diff())}if(o.text.frame){let{frame:x}=o.text;if(fe.log("exporter title:begin",a.diff()),e.save(),e.translate(-c/2,-p/2),await _x({ctx:e,frame:x}),e.restore(),fe.log("exporter title:end",a.diff()),o.text.frame.hasLackingGlyphs()){fe.log("exporter generateLackingGlyph:begin");let y=Math.sqrt(kr(this.doc.currentPageSize())/kr(this.card.size)),S=Nt(d.size,y),T=await u.generateLackingGlyphTexture(d,S,o.text.frame),{name:w}=T;P6(l,T),e.save(),e.scale(1,-1),e.translate(h,f),e.scale(c,p),e.do(w),e.restore(),fe.log("exporter generateLackingGlyph:end")}}o.quiz&amp;&amp;await Loe({data:o.quiz.data,ctx:e}),o.attendance&amp;&amp;await Hoe({data:o.attendance.data,ctx:e});for(let x of t.children)await this.paint(e,x);let{drawn:g,annotation:v}=o.strokes;g&amp;&amp;await this.paintStrokeThumb({ctx:e,card:d,stroke:g,type:"drawn"}),v&amp;&amp;await this.paintStrokeThumb({ctx:e,card:d,stroke:v,type:"annotation"}),e.restore(),fe.log("exporter renderCardBackground:end",a.diff())}async paintContainer(e,t){let{localMtx:n}=t;e.save(),e.transform(n.a,n.b,n.c,n.d,n.e,n.f);for(let o of t.children)await this.paint(e,o);e.restore()}async paintStrokeThumb({ctx:e,stroke:t,card:n,type:o}){var c;if(!t.thumb)return;fe.log("exporter paintStrokeThumb:begin",this.measure.diff()),e.save(),t.clip&amp;&amp;(e.rect(t.clip.x,t.clip.y,t.clip.width,t.clip.height),e.clip(),e.endPath()),fe.log("exporter loadDrawnThumb:begin",this.measure.diff());let i,{x:s,y:a,width:l,height:u}=t.thumb;if(l&amp;&amp;u){let p=$e(l,u);i=A6({base:cv,root:this.card.size,card:n.size,thumb:p,thumbWithMargins:(c=t.clip)!=null?c:p})}let d=await this.adapter.loadDrawnThumb(n,o,i);if(fe.log("exporter loadDrawnThumb:end",this.measure.diff()),d){let p=l!=null?l:d.width,h=u!=null?u:d.height;P6(this.doc,d),e.translate(s,a+h),e.scale(1,-1),e.scale(p,h),e.do(d.name)}e.restore(),fe.log("exporter paintStrokeThumb:end",this.measure.diff())}},E6=class{diff(){var n;let e=performance.now(),t=e-((n=this.prev)!=null?n:e);return this.prev=e,t}};function _6(r,e){let t=br(e,r);return $e(Math.round(t.width),Math.round(t.height))}function P6(r,e){let t={Type:new Hn("XObject"),Subtype:new Hn("Image"),BitsPerComponent:8,Width:e.width,Height:e.height,ColorSpace:new Hn("DeviceRGB"),Filter:new Hn("FlateDecode")};e.alphaChannel&amp;&amp;(t.SMask=r.stream(mx(e.alphaChannel),{Type:new Hn("XObject"),Subtype:new Hn("Image"),Width:e.width,Height:e.height,BitsPerComponent:8,Filter:new Hn("FlateDecode"),ColorSpace:new Hn("DeviceGray"),Decode:[0,1]})),r.addXObject({data:e.image,obj:t,name:e.name})}function bIe(r,e){for(let t=0;t&lt;e.commands.length;t+=1){let n=e.commands[t];n.type==="M"?r.moveTo(n.x,n.y):n.type==="L"?r.lineTo(n.x,n.y):n.type==="C"?r.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?r.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&amp;&amp;r.closePath()}}async function _x(r){let{ctx:e,frame:t}=r,n=t.modelToViewTransform;e.save(),e.transform(n.a,n.b,n.c,n.d,n.e,n.f);for(let o of t.lines)await yIe({ctx:e,line:o,vertical:t.vertical});e.restore()}async function yIe({ctx:r,line:e,vertical:t}){let n=0,o,i=0;for(let s of e.runs){if(o){let a=_2({run:o.run,next:s,vertical:t});a?o={run:a,dx:o.dx}:(await Goe({run:o.run,ofLine:e,ctx:r,vertical:t,dx:o.dx}),o={run:s,dx:i})}else o={run:s,dx:i};i+=s.advance+s.kerning,n+=s.text.length}o&amp;&amp;await Goe({run:o.run,ofLine:e,ctx:r,vertical:t,dx:o.dx})}async function Goe(r){let{run:e,ofLine:t,dx:n,ctx:o,vertical:i}=r;if(o.save(),i&amp;&amp;e.rotate?(o.translate(0,t.origin.y),o.rotate(-Math.PI/2),o.translate(-e.advance/2+(t.ascender+t.descender)/2,t.origin.x+n+e.advance/2+(e.ascender-e.descender)/2+e.descender)):o.translate(t.origin.x+n,t.origin.y),!e.bitmap){o.save();for(let s of e.graphemes){let{glyphs:a,advance:l}=s;if(a){let u=a.main;e.rotate&amp;&amp;e.shouldUseGlyph&amp;&amp;a.sub&amp;&amp;(u=a.sub),o.save();let{r:d,g:c,b:p,a:h}=mt(e.rgbaHex).normalized();o.fillColor(d,c,p),h&lt;1&amp;&amp;o.fillOpacity(h);let f=u.getPath(0,0,e.fontSize);bIe(o,f),o.fill(),o.restore()}o.translate(l,0)}o.restore()}o.restore()}function A6({base:r,root:e,card:t,thumb:n,thumbWithMargins:o}){let i=Xr(_6(r,e),e),s=Xr(t,o),a=Nt(n,s),l=Nt(a,i),u=Nt(l,Moe);return $e(Math.round(u.width),Math.round(u.height))}var Mx=class{constructor(){this.cache=new Map}measure(e){let{ctx:t,text:n,fontSize:o,fontName:i}=e;if(n.length===0||o&lt;0||i.length===0)return{width:0,height:0};let s=`${o}px '${i}'`,a=`${n} ${s}`;if(this.cache.has(a))return this.cache.get(a);let l=0,u=0,d=n.split(`
`);t.save(),t.fillStyle="transparent",t.font=s;for(let p of d){let h=t.measureText(n);l=Math.max(l,h.width),u+=o}t.restore();let c={width:l,height:u};return this.cache.set(a,c),c}};function Nx(r){let{theme:e}=r;return{none:{background:e,border:e,title:cn()},pushed:{background:cn(),border:e,title:mt("#D3D3D3FF")}}}var CIe={top:8,left:16,bottom:8,right:16};function Woe(r){let{ctx:e,title:t,bounds:n,state:o,style:i}=r,s=i.colors[o.interaction],a=Math.min(n.width,n.height)*.45,l=new Path2D,{width:u,height:d}=n;l.moveTo(0,a),l.arc(a,a,a,Math.PI,Math.PI*1.5),l.lineTo(u-a,0),l.arc(u-a,a,a,Math.PI*1.5,Math.PI*2),l.lineTo(u,d-a),l.arc(u-a,d-a,a,0,Math.PI*.5),l.lineTo(a,d),l.arc(a,d-a,a,Math.PI*.5,Math.PI),l.closePath(),e.save(),e.translate(n.x,n.y),s.background&amp;&amp;s.background.a&gt;0&amp;&amp;(e.fillStyle=s.background.toCSSRGBA(),e.fill(l)),i.borderWidth&gt;0&amp;&amp;s.border&amp;&amp;s.border.a&gt;0&amp;&amp;(e.strokeStyle=s.border.toCSSRGBA(),e.stroke(l)),SIe({bounds:{x:0,y:0,width:n.width,height:n.height},ctx:e,fontName:i.fontName,fontSize:i.fontSize,text:t,colorSet:s}),e.restore()}var $oe=new Mx;function Voe(r){var p;let{text:e,style:t,ctx:n,max:o,min:i}=r,{fontSize:s,fontName:a}=t,l=(p=t.edgeInsets)!=null?p:CIe,u=$oe.measure({ctx:n,text:e,fontName:a,fontSize:s}),d=it(l.left+u.width+l.right,i.width,o.width),c=it(l.top+u.height+l.bottom,i.height,o.height);return{width:d,height:c}}function SIe(r){let{ctx:e,bounds:t,text:n,fontName:o,fontSize:i,colorSet:s}=r,a=n.split(`
`);if(a.length===0)return;e.font=`${i}px '${o}'`,e.textBaseline="ideographic";let l=i,u=l*a.length,d=t.x+t.width*.5,c=t.y+t.height*.5-u*.5;for(let p=0;p&lt;a.length;p++){let h=a[p],{width:f}=$oe.measure({ctx:e,text:h,fontSize:i,fontName:o}),m=Math.max(d-f*.5,t.x),g=c+l*(p+1);e.fillStyle=s.title.toCSSRGBA(),e.fillText(h,m,g,t.width),s.underline&amp;&amp;(e.beginPath(),e.moveTo(m,g),e.lineTo(m+Math.min(f,t.width),g),e.strokeStyle=s.underline.toCSSRGBA(),e.lineWidth=1,e.stroke())}}function LM(r){let[e,t]=[joe(r.width),joe(r.height)];return{width:e,height:t}}function joe(r){return r&lt;=480?"compact":"regular"}var Lf={width:480,height:360};function F6(){let r=-Lf.width/2,e=-Lf.height/2,t=Lf.width,n=Lf.height,o=r+t*.1,i=e+n*.4;return{x:o,y:i,width:t*.5,height:n*.2}}function Koe(r){let{title:e,color:t}=r,n=F6(),o=24,i={location:0,length:e.length},s=new fn({text:e,attributes:[],attribute_ranges:[]});return s.addAttribute({attribute:{type:"font",value:{bold:!1,size:o}},range:i}),s.addAttribute({attribute:{type:"foreground_color",value:t.toARGBHex()},range:i}),Cy({text:s,size:n,fontSizeScale:1,hAlignment:"left",vAlignment:"bottom",vertical:!1,baseEdgeInsets:An()})}function xIe(r){let{text:e,color:t,fontSize:n,size:o}=r,i={location:0,length:e.length},s=new fn({text:e,attributes:[],attribute_ranges:[]});return s.addAttribute({attribute:{type:"font",value:{bold:!1,size:n}},range:i}),s.addAttribute({attribute:{type:"foreground_color",value:t.toARGBHex()},range:i}),Cy({text:s,size:o,fontSizeScale:1,hAlignment:"left",vAlignment:"bottom",vertical:!1,baseEdgeInsets:An()})}function FM(r){let{ctx:e,data:t,stringProvider:n}=r,{strings:o}=n,{title:i,labels:s,bounds:a,bgColorArgbHex:l}=t,u=ds(Lf,a),d=Lf.height,c=dn(l),p=P4(c)?cn():To(),h=o.regularWtFontName,f=11,m=5,g=F6(),v=Koe({title:i,color:p});if(v===void 0)return;let b=g.x,C=g.y;e.save(),e.scale(u,u),C+=m;let x={x:b,y:C,width:g.width,height:.5};e.fillRect(x.x,x.y,x.width,x.height),e.lineWidth=1,e.strokeStyle=p.toCSSRGBA(),e.strokeRect(x.x,x.y,x.width,x.height),e.fillStyle=p.toCSSRGBA(),C+=d*.47;for(let y of s)e.font=`${f}px '${h}'`,e.fillText(y,b,C),C+=d*.05;e.translate(g.x,g.y-g.height),v.draw(e),e.restore()}async function MM(r,e){let{title:t,labels:n,bounds:o,bgColorArgbHex:i}=e,s=ds(Lf,o),a=Lf.height,l=dn(i),u=P4(l)?cn():To(),d=11,c=5,p=F6(),h=Koe({title:t,color:u});if(h===void 0)return;let f=p.x,m=p.y;r.save(),r.scale(s,s),m+=c;let g={x:f,y:m,width:p.width,height:.5};r.fillRect(g.x,g.y,g.width,g.height),r.lineWidth(1),r.strokeColor(u.r,u.g,u.b),r.strokeRect(g.x,g.y,g.width,g.height),r.save(),r.translate(p.x,p.y-p.height),await _x({ctx:r,frame:h}),r.restore(),m+=a*.47;for(let v of n){let b={width:Lf.width*10,height:d},C=xIe({text:v,color:u,fontSize:d,size:b});!C||(r.save(),r.translate(p.x,m-d),await _x({ctx:r,frame:C}),r.restore(),m+=a*.05)}r.restore()}function Fk(r,e){let t=window.devicePixelRatio,n=Nt(r,1/t);return Xr(n,e)}function Bx(r,e){let t=Fk(r,e.size),n=Nt(e.size,t);return LM(n)}function NM(r){let{ctx:e,layout:t,buttons:n}=r,o=t.canvasScale,i=wIe({cardSize:t.bounds,scale:o,ctx:e,buttons:n});e.save(),e.scale(1/o,1/o);for(let a of i){let{button:l,bounds:u}=a,{style:d,state:c,title:p}=l;Woe({ctx:e,style:d,bounds:u,state:c,title:p})}e.restore();let s=i.map(a=&gt;{let l=t.bounds.x+t.bounds.width*.5+a.bounds.x/o,u=t.bounds.y+t.bounds.height*.5+a.bounds.y/o,d=a.bounds.width/o,c=a.bounds.height/o;return{x:l,y:u,width:d,height:c}});for(let a=0;a&lt;Math.min(s.length,n.length);a++)n[a].state.bounds=s[a]}function wIe(r){let{ctx:e,cardSize:t,scale:n,buttons:o}=r,i=Nt(t,n),s=LM(i),a=TIe(s),l=DIe(i,o.length),d=o.map(v=&gt;{let{style:b,title:C}=v;return Voe({ctx:e,text:C,style:b,min:a,max:l})}).reduce((v,b)=&gt;({width:Math.max(v.width,b.width),height:Math.max(v.height,b.height)}),{width:0,height:0}),c=kIe(i,d,o.length),p=d.width,h=d.height*o.length+c*(o.length-1),f=-i.width/2+i.width*.85-p*.5,m=-i.height/2+i.height*.5-h*.5,g=d.height+c;return o.map((v,b)=&gt;{let C={x:f,y:m+g*b,width:p,height:d.height};return{button:v,bounds:C}})}function TIe(r){let{width:e,height:t}=r,n;e==="regular"&amp;&amp;t==="regular"?n=25:n=15;let o;return e==="compact"&amp;&amp;t==="compact"?o=130:e==="regular"&amp;&amp;t==="compact"?o=150:e==="compact"&amp;&amp;t==="regular"?o=75:o=180,{width:o,height:n}}var qoe=.9;function DIe(r,e){let t=r.width*.3*.8,n=r.height*qoe/e;return{width:t,height:n}}function OM(r){let{width:e,height:t}=r;return e==="compact"&amp;&amp;t==="compact"?13:e==="regular"&amp;&amp;t==="compact"?22:e==="compact"&amp;&amp;t==="regular"?9:25}function kIe(r,e,t){let n=LM(r),o;n.height==="compact"?o=40:o=50;let i=(r.height*qoe-e.height*t)/(t-1);return Math.min(o,i)}var Yoe={none:{title:mt("#0075f6ff"),underline:mt("#0075f6ff")},pushed:{title:mt("#FFFFFFFF"),underline:mt("#FFFFFFFF")}};function Xoe({card:r,canvas:e,buttons:t}){let n=he.get(),i={data:PIe(r,n),buttons:void 0};if(t){let s=Bx(e,r);i.buttons=IIe({buttons:t,strings:n.strings,sizeClass:s})}return i}function PIe(r,e){let t=e.strings,n=r.content.title;n.length===0&amp;&amp;(n=t.attendanceReport);let o=[];if(r.content.attendance_author){let i=`${t.attendanceCardCreator} ${r.content.attendance_author.name}`;o.push(i)}return{title:n,labels:o,bounds:r.bounds,bgColorArgbHex:r.content.backcolor}}var AIe=Nx({theme:mt("#5AC361FF")});function IIe(r){let{buttons:e,strings:t,sizeClass:n}=r,o=t.regularWtFontName,i=OM(n),a={colors:AIe,fontSize:i,fontName:o,borderWidth:1};return e.map(l=&gt;{switch(l.role){case 0:return{title:t.attendanceCardEditAndResult,state:l.state,style:a};case 1:return{title:t.answerQuestionnaire,state:l.state,style:a};case 2:let u=`? ${t.clickHereForHelp}`,d={colors:Yoe,fontSize:i,fontName:o,borderWidth:0};return{title:u,state:l.state,style:d}}})}var Qoe=oe(Wr());function Joe({card:r,canvas:e,buttons:t}){let n=he.get(),o=Bx(e,r),i=EIe(r,n),s;return t&amp;&amp;(s=_Ie({card:r,strings:n.strings,buttons:t,sizeClass:o})),{buttons:s,data:i}}function EIe(r,e){let t=e.strings,n=r.content.title;if(n.length===0)switch(r.content.preset){case"test":n=t.quizPresetTest;break;case"survey":n=t.quizPresetSurvey;break}let{question_count:o,quiz_author:i,backcolor:s}=r.content,a=[];if(i){let{name:l}=i,u=`${t.author} ${l}`,d=(0,Qoe.sprintf)(t.questionCount,o,e.pluralSafeSuffix(o));a.push(u),a.push(d)}return{title:n,labels:a,bounds:r.bounds,bgColorArgbHex:s}}function _Ie(r){let{card:e,buttons:t,strings:n,sizeClass:o}=r,i=n.regularWtFontName,s=OM(o),a=1,l={colors:RIe(e),fontSize:s,fontName:i,borderWidth:a},u={colors:NIe,fontSize:s,fontName:i,borderWidth:a},d={colors:BIe,fontSize:s,fontName:i,borderWidth:0};return t.map(c=&gt;{let{state:p,role:h}=c;switch(h){case 0:return{title:LIe(n,e),state:p,style:l};case 3:if(e.content.isAnswered)switch(e.content.preset){case"test":return{title:n.viewTestAnswers,state:p,style:l};case"survey":return{title:n.viewQuestionnaireAnswers,state:p,style:l}}else switch(e.content.preset){case"test":return{title:n.answerTest,state:p,style:l};case"survey":return{title:n.answerQuestionnaire,state:p,style:l}}case 2:return{title:n.result,state:p,style:u};case 1:return{title:n.edit,state:p,style:l};case 4:return{title:`? ${n.clickHereForHelp}`,state:p,style:d}}})}var FIe=Nx({theme:mt("#3D5AFDFF")}),MIe=Nx({theme:mt("#FF8F00FF")}),NIe=Nx({theme:mt("#00C853FF")}),BIe={none:{title:mt("#0075f6ff"),underline:mt("#0075f6ff")},pushed:{title:mt("#FFFFFFFF"),underline:mt("#FFFFFFFF")}};function RIe(r){switch(r.content.preset){case"test":return FIe;case"survey":return MIe}}function LIe(r,e){switch(e.content.preset){case"test":return r.answerTestTogether;case"survey":return r.answerQuestionnaireTogether}}function B6(r){var s;let{state:e,card:t}=r,n={};e.root!==t&amp;&amp;(n.clip=qe(t.localBounds));let o=OIe(r),i=(s=e.cards[t.id])==null?void 0:s.fineStroke;return o&amp;&amp;(!i||UIe(r))&amp;&amp;(n.thumb=zIe({...r,thumb:o})),i&amp;&amp;(n.fineRenderParams=HIe({...r,fineStroke:i})),n}function OIe(r){var i;let{card:e,type:t,mtx:n}=r;return(i=mr.get(e)[t].getForZoom(e.size,n.a))==null?void 0:i.src}function UIe(r){let{card:e,type:t}=r,n=Xn.get(t,e);return Zoe(r)?!n.getLayerLoadState().loadedAtLeastOnce():e.drawnAssetId(t)!==void 0&amp;&amp;!n.assetLoadedAtLeastOnce}function zIe(r){var i;let{card:e,type:t,thumb:n}=r,o;if(Zoe(r))o=e.localBounds;else{let s=mr.get(e)[t],{thumbnailRect:a}=(i=s.geometry)!=null?i:e.drawnGeometry(t);o=e.drawnThumbLocalBounds(t,a)}return{...o,image:n}}function Zoe({card:r,type:e}){return r.document!=null&amp;&amp;e==="annotation"}function HIe({card:r,type:e,state:t,mtx:n,fineStroke:o}){let i=r.drawnGeometry(e),s={contents:Xn.get(e,r).packContents(),contentLocalBounds:r.contentLocalBounds,drawnLocalBounds:r.drawnLocalBounds(e),geometry:i},a=o.strategies.get(e),l={strategy:a,renderer:o.renderer,mtx:n.clone()};if(t.root===r)return a==="redraw"?{...l,redrawParams:{...s,type:e,canvasSize:t.canvas}}:l;{let u=mo.getHighCanvasSize(i),d=mo.getLevel(r.size,n.a),c=mo.getThumbnailSize(d,u),p=r.drawnThumbLocalBounds(e),h=Xr(c,p),f=new ft().translate(-p.x,-p.y).scale(h,h);return a==="redraw"?{...l,mtx:f,redrawParams:{...s,type:e,canvasSize:c}}:{...l,mtx:f}}}var tie="-",GIe=/^xn--/,WIe=/[^\0-\x7F]/,$Ie=/[\x2E\u3002\uFF0E\uFF61]/g,VIe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input &gt;= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R6=36-1,Xp=Math.floor,L6=String.fromCharCode;function pv(r){throw new RangeError(VIe[r])}function jIe(r,e){let t=[],n=r.length;for(;n--;)t[n]=e(r[n]);return t}function rie(r,e){let t=r.split("@"),n="";t.length&gt;1&amp;&amp;(n=t[0]+"@",r=t[1]),r=r.replace($Ie,".");let o=r.split("."),i=jIe(o,e).join(".");return n+i}function nie(r){let e=[],t=0,n=r.length;for(;t&lt;n;){let o=r.charCodeAt(t++);if(o&gt;=55296&amp;&amp;o&lt;=56319&amp;&amp;t&lt;n){let i=r.charCodeAt(t++);(i&amp;64512)==56320?e.push(((o&amp;1023)&lt;&lt;10)+(i&amp;1023)+65536):(e.push(o),t--)}else e.push(o)}return e}var KIe=r=&gt;String.fromCodePoint(...r),qIe=function(r){return r&gt;=48&amp;&amp;r&lt;58?26+(r-48):r&gt;=65&amp;&amp;r&lt;91?r-65:r&gt;=97&amp;&amp;r&lt;123?r-97:36},eie=function(r,e){return r+22+75*(r&lt;26)-((e!=0)&lt;&lt;5)},oie=function(r,e,t){let n=0;for(r=t?Xp(r/700):r&gt;&gt;1,r+=Xp(r/e);r&gt;R6*26&gt;&gt;1;n+=36)r=Xp(r/R6);return Xp(n+(R6+1)*r/(r+38))},iie=function(r){let e=[],t=r.length,n=0,o=128,i=72,s=r.lastIndexOf(tie);s&lt;0&amp;&amp;(s=0);for(let a=0;a&lt;s;++a)r.charCodeAt(a)&gt;=128&amp;&amp;pv("not-basic"),e.push(r.charCodeAt(a));for(let a=s&gt;0?s+1:0;a&lt;t;){let l=n;for(let d=1,c=36;;c+=36){a&gt;=t&amp;&amp;pv("invalid-input");let p=qIe(r.charCodeAt(a++));p&gt;=36&amp;&amp;pv("invalid-input"),p&gt;Xp((2147483647-n)/d)&amp;&amp;pv("overflow"),n+=p*d;let h=c&lt;=i?1:c&gt;=i+26?26:c-i;if(p&lt;h)break;let f=36-h;d&gt;Xp(2147483647/f)&amp;&amp;pv("overflow"),d*=f}let u=e.length+1;i=oie(n-l,u,l==0),Xp(n/u)&gt;2147483647-o&amp;&amp;pv("overflow"),o+=Xp(n/u),n%=u,e.splice(n++,0,o)}return String.fromCodePoint(...e)},sie=function(r){let e=[];r=nie(r);let t=r.length,n=128,o=0,i=72;for(let l of r)l&lt;128&amp;&amp;e.push(L6(l));let s=e.length,a=s;for(s&amp;&amp;e.push(tie);a&lt;t;){let l=2147483647;for(let d of r)d&gt;=n&amp;&amp;d&lt;l&amp;&amp;(l=d);let u=a+1;l-n&gt;Xp((2147483647-o)/u)&amp;&amp;pv("overflow"),o+=(l-n)*u,n=l;for(let d of r)if(d&lt;n&amp;&amp;++o&gt;2147483647&amp;&amp;pv("overflow"),d===n){let c=o;for(let p=36;;p+=36){let h=p&lt;=i?1:p&gt;=i+26?26:p-i;if(c&lt;h)break;let f=c-h,m=36-h;e.push(L6(eie(h+f%m,0))),c=Xp(f/m)}e.push(L6(eie(c,0))),i=oie(o,u,a===s),o=0,++a}++o,++n}return e.join("")},YIe=function(r){return rie(r,function(e){return GIe.test(e)?iie(e.slice(4).toLowerCase()):e})},XIe=function(r){return rie(r,function(e){return WIe.test(e)?"xn--"+sie(e):e})},QIe={version:"2.1.0",ucs2:{decode:nie,encode:KIe},decode:iie,encode:sie,toASCII:XIe,toUnicode:YIe};var aie=QIe;function lie(r){let e=r.content;if(e.uri===void 0||!e.needs_display_url_domain)return;let t;try{let{hostname:i}=new URL(e.uri);i.length&gt;0?t=aie.toUnicode(i):t=e.uri}catch(i){t=e.uri}let{strings:n}=he.get();return{urlDomainLabel:`${n.citationNotePrefix} : ${t}`}}function uie({card:r,rend:e,mtx:t,state:n}){var Q,j,U;let{userId:o,toolVisible:i,narrationRecording:s,ignoreAnnotations:a,ignoreDisplayName:l,ignoreFavorites:u,root:d,cards:c,dpr:p,isReadonly:h}=n,f=(Q=c[r.id])!=null?Q:{},m=d===r,g=e.shouldDisplayLoading(m),v=xx(r,t.a/p),b=r.type==="video"||r.type==="audio",C={alphaMultiplier:e.globalAlphaMultiplier(),shade:void 0,broken:!1,boundingBox:void 0,connectorHandle:r.connectorHandleVisible()&amp;&amp;!r.pinned,displayName:void 0,contentThumb:void 0,documentThumb:void 0,border:void 0,background:void 0,favorite:r.favorite,groupHandle:void 0,highlight:e.highlightAlpha(),emphasize:!!f.hover||e.hasCardEmphasizeEffect(),loading:g,pinned:r.pinned,playable:b,duration:b?r.duration:void 0,strokes:{drawn:void 0,annotation:void 0},text:{frame:e.textFrame,selectedRange:e.textSelectedRange,compositionRange:e.textCompositionRange},pdf:f.pdfRenderer,attendance:void 0,quiz:void 0,webCard:void 0},x=Fk(n.canvas,r.size),y=t.a/p/x;r.isFolded&amp;&amp;r.isHead&amp;&amp;(C.shade=OK.toRGBA()),f.focused&amp;&amp;(!v.resizable||h?C.boundingBox={resizable:!1,corners:[]}:C.boundingBox={resizable:!r.pinned,corners:Array.from(JD({card:r,mtx:t,isPreview:m}).values())}),r.foldHandleVisible()&amp;&amp;(C.groupHandle={open:!r.isFolded});let S=r.content.backcolor?dn(r.content.backcolor):cn();(r.type==="map"||r.type==="web")&amp;&amp;r.contentAssetId()===void 0&amp;&amp;(S=LK),S.isTransparent()&amp;&amp;(m&amp;&amp;r.parent!=null?S=DE:g&amp;&amp;(S=BK)),C.background=S.toRGBA();let T=die(r,g),w=e.borderColor();i&amp;&amp;w.a&gt;0&amp;&amp;(C.border={color:w.toRGBA(),belowContent:T});let k=JIe({card:r,rend:e,state:n,zoom:t.a});if((k==null?void 0:k.type)==="content"){let B=vp(k.image,r.contentLocalBounds);C.contentThumb={image:k.image,...B}}else(k==null?void 0:k.type)==="document"&amp;&amp;(C.documentThumb={image:k.image,...r.localBounds});!!(r.gadgets.drawn||r.document)&amp;&amp;(C.strokes.drawn=B6({card:r,state:n,mtx:t,type:"drawn"}));let I=!!(r.gadgets.annotations||r.document);!a&amp;&amp;I&amp;&amp;(C.strokes.annotation=B6({card:r,state:n,mtx:t,type:"annotation"})),r instanceof jr?C.quiz=Joe({card:r,canvas:n.canvas,buttons:f.quizButtons}):r instanceof wn?C.attendance=Xoe({card:r,canvas:n.canvas,buttons:f.attendanceButtons}):r instanceof Vo&amp;&amp;(C.webCard=lie(r)),f.textEditing&amp;&amp;(C.playable=!1);let E=((j=f.assetUploadState)==null?void 0:j.content)==="failed",O=wk(r);return((U=f.assetUploadState)==null?void 0:U.content)!=null&amp;&amp;(O=!1),(E||O)&amp;&amp;(C.broken=!0,C.background=A4.toRGBA(),C.border={color:O6(A4).toRGBA(),belowContent:!1},C.contentThumb=void 0,C.documentThumb=void 0,C.pdf=void 0,C.loading=!1,C.playable=!1),m&amp;&amp;(C.shade=void 0,C.playable=!1,C.favorite=!1,C.pinned=r.pinned&amp;&amp;y&lt;1),(m||!i)&amp;&amp;(C.connectorHandle=!1,C.groupHandle=void 0,C.emphasize=!1),(!i||s)&amp;&amp;(C.pinned=!1,C.playable=!1),u&amp;&amp;(C.favorite=!1),!l&amp;&amp;r.parent==null&amp;&amp;o!=null&amp;&amp;o!==r.author.id&amp;&amp;(C.displayName=r.author.name),v.connectable||(C.border=void 0,C.connectorHandle=!1,C.groupHandle=void 0,C.pinned=!1),h&amp;&amp;(C.groupHandle=void 0,C.connectorHandle=!1,C.emphasize=!1),C}function JIe({card:r,rend:e,zoom:t,state:n}){var b,C,x,y,S;let{cards:o,root:i}=n,s=(b=o[r.id])!=null?b:{},{thumbType:a,pdfRenderer:l,fineStroke:u}=s,d=r===i,c=(C=e.player)==null?void 0:C.video,p=mr.get(r),h=r.contentLocalBounds,f=p.content.getForZoom(h,t),m=p.document.getForZoom(r.size,t),g=p.drawn.getForZoom(r.size,t),v;if(r instanceof zn&amp;&amp;c&amp;&amp;c.buffered.length&gt;0&amp;&amp;c.buffered.end(0)&gt;0&amp;&amp;(c.played.length&gt;0||c.currentTime!==0))c.width=c.videoWidth,c.height=c.videoHeight,v=c;else if(a==="content")v=f==null?void 0:f.src;else if(a==="document")v=m==null?void 0:m.src;else if(!r.document)v=f==null?void 0:f.src;else if(!d)v=(x=m==null?void 0:m.src)!=null?x:f==null?void 0:f.src;else{let T=Xn.get("drawn",r),k=T.getLayerLoadState().get(),A=w2(r),I=T.hasAssetAndLoaded||(k==null?void 0:k.value)!=="notFound",E=(y=u==null?void 0:u.strategies)==null?void 0:y.get("drawn"),O=g!=null;if(!T.assetLoadedAtLeastOnce||!k)v=m==null?void 0:m.src;else if(A)if(f&amp;&amp;m)if(r instanceof Yi&amp;&amp;l&amp;&amp;(!I||!!(u!=null&amp;&amp;u.renderer)))v=f.src;else if(I){let j=g==null?void 0:g.level,U=f.level;j&amp;&amp;mo.mipmapLevelHigherThan(j,"small")&amp;&amp;mo.mipmapLevelHigherThan(U,"small")?v=f.src:v=m.src}else mo.mipmapLevelHigherThan(m.level,f.level)?v=m.src:v=f.src;else v=(S=f==null?void 0:f.src)!=null?S:m==null?void 0:m.src;else I&amp;&amp;(!O||!E)&amp;&amp;(v=m==null?void 0:m.src)}if(!!v)return{image:v,type:v===(m==null?void 0:m.src)?"document":"content"}}var UM=()=&gt;new Fn(()=&gt;"redraw");function zy({cards:r,callback:e,state:t,mtx:n}){let o=[],i=[],{root:s,remotePointers:a}=t;for(let l of r)o=o.concat(Array.from(cie({card:l,callback:e,state:t,mtx:n}))),!s&amp;&amp;a&amp;&amp;(i=i.concat(Array.from(pie({card:l,remotePointers:a,mtx:n}))));return o=o.concat(i),{type:"container",globalMtx:n,localMtx:new ft,styles:{},layout:{},props:{},children:o,visible:!0,layer:"static"}}function*cie({card:r,callback:e,state:t,mtx:n}){var j;let{root:o,userId:i,visibleRect:s,cards:a}=t,u=!!((j=a[r.id])!=null?j:{}).focused,d=o===r,c=Kt(r,e),p=c.shouldRenderInCardTree({root:o,ignoreTransition:d}),h=new ri;for(let U of r.familyIterator()){let B=Kt(U,e);h.add(B.getViewRect({userId:i}))}let f=h.rect,m=!0;s&amp;&amp;(m=Oi(f,s));let g=p&amp;&amp;(!s||m),{x:v,y:b}=r.localPosition,C;c.shouldAnimate(o)?C=c.localTransform().translate(v,b):C=new ft(1,0,0,1,v,b);let x=us(r),y=n.clone().prependMatrix(C),S=Ck({card:r,zoom:y.a,focused:u,dpr:window.devicePixelRatio}),T=u1(t.viewport),w=jte(r.size,y.a,T),k={position:r.position,localPosition:r.localPosition,bounds:r.bounds,localBounds:r.localBounds,localContentBounds:r.contentLocalBounds,scaleToParent:x,accessoryScale:S,borderScale:w,coverSizeClass:Bx(t.canvas,r),canvasScale:Fk(t.canvas,r.size),pinScaleOverride:o===r?1.5:void 0},A=U6(r,e,t),I=uie({card:r,rend:c,mtx:y,state:t}),E=[],O={id:r.id};for(let U of r.children)for(let B of cie({card:U,callback:e,state:t,mtx:y}))E.push(B);yield{type:"card",localMtx:C,globalMtx:y,styles:I,layout:k,props:O,children:E,visible:g,layer:A};let{remotePointers:Q}=t;Q&amp;&amp;(d?yield*pie({card:r,remotePointers:Q,editorRoot:r,mtx:n}):yield*ZIe({cardId:r.id,localMtx:C,globalMtx:y,displayName:I.displayName,layer:A,visible:g,cardRect:r.localBounds,remotePointers:Q})),yield*tEe({card:r,callback:e,state:t,mtx:n}),yield*rEe(r,y,x,t)}function*pie({card:r,remotePointers:e,editorRoot:t,mtx:n}){for(let o of e){let{pointerType:i,cardId:s}=o,a=r.getCard(s),l=a==null?void 0:a.dashedConnectorVisible(t),u=i==="connector"&amp;&amp;l&amp;&amp;(!t||t.id!==s),d=(t==null?void 0:t.id)===r.id&amp;&amp;(t==null?void 0:t.id)===s&amp;&amp;(i==="draw"||i==="text");if(u||d){let c=new ft;t&amp;&amp;c.translate(t.localPosition.x-t.position.x,t.localPosition.y-t.position.y),yield{type:"pointer",globalMtx:n,localMtx:c,styles:{},layout:{},props:{pointer:o},layer:"hud",children:[],visible:!0}}}}function*ZIe({cardId:r,localMtx:e,globalMtx:t,displayName:n,layer:o,visible:i,cardRect:s,remotePointers:a}){let l=a.filter(u=&gt;u.pointerType!=="connector"&amp;&amp;u.cardId===r);l.length&gt;0&amp;&amp;(yield{type:"cardPointer",localMtx:e,globalMtx:t,styles:{needsMarginTop:!!n},props:{pointers:l},children:[],layer:o,visible:i,layout:{cardRect:s}})}function U6(r,e,t){var i;let n=(i=t.cards[r.id])!=null?i:{},o=Kt(r,e);return r===t.root?"static":n.active||n.focused||n.hover||o.hasAnimation()||o.isActive()?"dynamic":"inherit"}function eEe(r,e,t,n){let o=U6(r,t,n),i=U6(e,t,n);return o==="dynamic"||i==="dynamic"?"dynamic":"inherit"}function*tEe({card:r,callback:e,state:t,mtx:n}){var T;let{visibleRect:o,toolVisible:i,root:s}=t,a=s===r,l=r,u=r.next||r.nextGroup;if(a||!u)return;let d=n.clone(),c=new ft,p=Kt(l,e),h=Kt(u,e);l.isFolded&amp;&amp;(l=r.head(),p=Kt(l,e)),c.translate(l.localPosition.x-l.position.x,l.localPosition.y-l.position.y);let f=((T=t.cards[u.id])==null?void 0:T.focused)===!0,m=Ck({card:u,zoom:n.a,focused:f,dpr:window.devicePixelRatio}),g=p.localTransform(),v=h.localTransform(),[b,C]=hne({from:{card:l,mtx:g},to:{card:u,mtx:v},asDifferentGroup:u===r.nextGroup,handleScale:m,visibleRect:o,toolVisible:i,isReadonly:t.isReadonly}),x=eEe(l,u,e,t),S=u.isVisibleInCardTree(s)&amp;&amp;!p.isMovingInCardTree(s)&amp;&amp;!h.isMovingInCardTree(s)&amp;&amp;C;yield{type:"connector",localMtx:c,globalMtx:d,layout:b,visible:S,layer:x,props:{},styles:{color:rv.toCSSRGBA(),borderColor:bx.toCSSRGBA()},children:[]}}function*rEe(r,e,t,n){let{root:o,toolVisible:i,remotePointers:s,isReadonly:a}=n,l=o===r,u=r.dashedConnectorVisible(o);if(!(l||!u||!s&amp;&amp;!i||a)&amp;&amp;r.dashedConnectorPosition){let d=r.isFolded?r.head():r,{x:c,y:p,width:h}=d.bounds,f=De(c+h,p),m=mne(f,r.dashedConnectorPosition,t),g=new ft;g.translate(d.localPosition.x-d.position.x,d.localPosition.y-d.position.y),yield{type:"connector",localMtx:g,globalMtx:e,layout:{orbits:m,lineScale:t},props:{},layer:"hud",styles:{color:rv.toCSSRGBA(),borderColor:bx.toCSSRGBA()},visible:!0,children:[]}}}function hie(r){let{ctx:e,bounds:t}=r,n=.4,o=Date.now()/1e3,{x:i,y:s,width:a,height:l}=t,u=a/56,d=a/224,c=i+a/2-u,p=s+l/2,h=o%n,f=n/3;e.save();for(let m=0;m&lt;3;m++){let g="#aaa";f*m&lt;=h&amp;&amp;h&lt;f*(m+1)&amp;&amp;(g="#fff"),e.beginPath(),e.fillStyle=g,e.arc(c+m*u,p,d,0,Math.PI*2,!0),e.fill()}e.restore()}function Rx(r,e){!e.visible||(e.type==="card"?nEe(r,e):e.type==="connector"?oEe(r,e):e.type==="pointer"?iEe(r,e):e.type==="cardPointer"?aEe(r,e):lEe(r,e))}function nEe(r,e){var y,S;let{styles:t,globalMtx:n,localMtx:o,layout:i}=e,{scaleToParent:s,accessoryScale:a,borderScale:l,localBounds:u,pinScaleOverride:d}=i,{x:c,y:p,width:h,height:f}=u,m=c+h,g=n.a/devicePixelRatio,{strings:v}=he.get();if(r.save(),r.transform(o.a,o.b,o.c,o.d,o.e,o.f),r.globalAlpha*=t.alphaMultiplier,t.shade&amp;&amp;(r.save(),r.beginPath(),r.fillStyle=nn(t.shade).toCSSRGBA(),r.fillRect(c+ju*s,p+ju*s,h,f),r.restore()),t.background){r.save(),r.beginPath(),r.fillStyle=nn(t.background).toCSSRGBA();let T=1/n.a;r.fillRect(c+T,p+T,h-2*T,f-2*T),r.restore()}if(r.save(),r.beginPath(),r.rect(c,p,h,f),r.clip(),((y=t.border)==null?void 0:y.belowContent)===!0){r.save(),r.strokeStyle=nn(t.border.color).toCSSRGBA();let T=1/n.a,w=Math.min(1/g,1);r.lineWidth=w,r.strokeRect(c+w/2+T,p+w/2+T,h-w-2*T,f-w-2*T),r.restore()}let b=t.pdf&amp;&amp;t.pdf.ready($e(r.canvas),n);if(t.contentThumb&amp;&amp;!b&amp;&amp;z6(r,t.contentThumb),t.webCard&amp;&amp;cEe(r,t.webCard,u),t.pdf&amp;&amp;t.pdf.render(r,n),t.text.frame){let{frame:T,selectedRange:w,compositionRange:k}=t.text;r.save(),r.translate(-h/2,-f/2),T.draw(r,{selectedRange:w,compositionRange:k}),r.restore()}if(t.quiz&amp;&amp;(r.save(),Roe({ctx:r,layout:i,styles:t.quiz}),r.restore()),t.attendance&amp;&amp;(r.save(),zoe({ctx:r,styles:t.attendance,layout:i}),r.restore()),t.documentThumb&amp;&amp;z6(r,t.documentThumb),r.restore(),((S=t.border)==null?void 0:S.belowContent)===!1){r.save(),r.strokeStyle=nn(t.border.color).toCSSRGBA();let T=Math.min(1/g,1);r.lineWidth=T,r.strokeRect(c+T/2,p+T/2,h-T,f-T),r.restore()}if(t.playable&amp;&amp;t.duration&amp;&amp;uEe(r,u,jh(t.duration)),t.loading&amp;&amp;hie({ctx:r,bounds:u}),t.broken){let T=Ot.brokenCardIcon.getOrLoad();T&amp;&amp;dEe(r,u,T)}for(let T of e.children)Rx(r,T);let C=["drawn","annotation"];for(let T of C){let w=t.strokes[T];if(!!w){if(r.save(),w.clip&amp;&amp;(r.beginPath(),r.rect(w.clip.x,w.clip.y,w.clip.width,w.clip.height),r.clip()),w.thumb&amp;&amp;z6(r,w.thumb),w.fineRenderParams){let k=w.fineRenderParams;k.redrawParams&amp;&amp;k.renderer.redrawFineThumbnail(k.mtx,k.redrawParams),k.renderer.bitbltFineCanvas({ctx:r,mtx:k.mtx,type:T})}r.restore()}}if(t.favorite){let T=2*l;r.save(),r.beginPath(),r.strokeStyle=UK.toRGBAHex(),r.lineWidth=T,r.strokeRect(c+T/2,p+T/2,h-T,f-T),r.restore()}if(t.emphasize){let T=3/g;r.save(),r.globalAlpha=1,r.beginPath(),r.strokeStyle=zK.toRGBAHex(),r.lineWidth=T,r.strokeRect(c,p,h,f),r.restore()}if(t.groupHandle){let T=wi*a,w=Aa*a,k=oK*a,A=c-w-T,I=new vx,E=new Wp;E.moveTo(c,0),E.lineTo(c-w,0),E.arc(A,0,T,0,Math.PI*2,!0),I.addOrbit(E);let O=new Wp;O.moveTo(A-k,0),O.lineTo(A+k,0),t.groupHandle.open||(O.moveTo(A,-k),O.lineTo(A,k)),I.addOrbit(O,{lineCap:"round"}),r.save(),yx(r,I,a),r.restore()}if(t.connectorHandle){let T=c1*a,w=new Pr(1,-1).normalize(),k=De(m+w.x*T,p+w.y*T),A=(sne+ane)*a,I=De(k.x-w.x*A,k.y-w.y*A),{orbits:E,lineEnd:O}=aM({stemFrom:I,stemTo:k}),Q=new Wp;Q.moveTo(m,p),Q.lineTo(O.x,O.y),E.addOrbit(Q,{lineCap:"round"}),r.save(),yx(r,E,a),r.restore()}if(t.boundingBox){let{corners:T,resizable:w}=t.boundingBox,k=2*l,A=5*l;r.save(),r.beginPath(),r.strokeStyle="#ddd",r.lineWidth=k,r.setLineDash([A,k]),r.strokeRect(c-k/2,p-k/2,h+k,f+k),r.setLineDash([]),fEe(r,g,T,w),r.restore()}if(t.highlight!==void 0){let T=4/g;r.save(),r.beginPath(),r.strokeStyle=`rgba(255,255,255,${t.highlight})`,r.lineCap="round",r.lineJoin="round",r.lineWidth=T,r.strokeRect(c-T,p-T,h+T*2,f+T*2),r.restore()}let x=Ot.pinIcon.getOrLoad();if(t.pinned&amp;&amp;x){r.save();let T=d?d/g:s,w=20*T,k=20*T,A=c+h/2+w*.1,I=p-k+k*.3;r.drawImage(x,A-w/2,I,w,k),r.restore()}t.displayName&amp;&amp;(r.save(),r.fillStyle="white",r.textAlign="start",r.textBaseline="alphabetic",r.font=`12px "${v.uiFontName}"`,r.fillText(t.displayName,c,p+f+24),r.restore()),r.restore()}function oEe(r,e){let{localMtx:t,layout:n}=e;r.save(),r.transform(t.a,t.b,t.c,t.d,t.e,t.f),yx(r,n.orbits,n.lineScale),r.restore()}function iEe(r,e){let{localMtx:t,globalMtx:n,props:o}=e,{pointer:i}=o;Ee(i.pointerType!=="card");let s=n.a/devicePixelRatio,a=y4/s,l=S4/s,d=C4/s/2,{x:c,y:p,width:h,height:f}=mEe(i),{name:m}=i.user,{strings:g}=he.get();r.save(),r.transform(t.a,t.b,t.c,t.d,t.e,t.f),r.textBaseline="middle",r.font=`${a}px "${g.uiFontName}"`;let{width:v}=r.measureText(m);i.pointerType==="text"&amp;&amp;(r.lineWidth=3/s,r.strokeStyle=I4.toRGBAHex(),r.strokeRect(c,p,h,f)),r.translate(c+h,p),r.beginPath(),r.moveTo(0,0),r.lineTo(d,-d),r.lineTo(d+l*2+v,-d),r.arc(d+l+v,0,d,-Math.PI/2,Math.PI/2),r.lineTo(d,d),r.lineTo(0,0),r.closePath(),r.fillStyle=E4.toRGBAHex(),r.fill(),r.fillStyle=cn().toRGBAHex(),r.fillText(m,d+l,0),r.restore()}function sEe(r,e,t){let n=S4/t,o=C4/t,i=o/2,{strings:s}=he.get(),a=y4/t;r.save(),r.textBaseline="middle",r.font=`${a}px "${s.uiFontName}"`,e.forEach((l,u)=&gt;{let{name:d}=l.user;r.translate(0,o*u+10/t);let{width:c}=r.measureText(d);r.beginPath(),r.moveTo(i,0),r.lineTo(i*2+n+c,0),r.arc(i*2+n+c,i,i,-Math.PI/2,Math.PI/2),r.lineTo(i,o),r.arc(i,i,i,Math.PI/2,Math.PI*3/2),r.closePath(),r.fillStyle=E4.toRGBAHex(),r.fill();let p;l.pointerType==="draw"?p=Ot.penPointer.getOrLoad():l.pointerType==="text"?p=Ot.textPointerIcon.getOrLoad():p=Ot.fingerPointerIcon.getOrLoad(),p&amp;&amp;r.drawImage(p,0,0,o,o),r.fillStyle=cn().toRGBAHex(),r.fillText(d,i*2+n,i)}),r.restore()}function aEe(r,e){let{localMtx:t,globalMtx:n,styles:o,props:i,layout:s}=e,a=n.a/devicePixelRatio,{x:l,y:u,width:d,height:c}=s.cardRect;r.save(),r.transform(t.a,t.b,t.c,t.d,t.e,t.f),r.lineWidth=3/a,r.strokeStyle=I4.toRGBAHex(),r.strokeRect(l,u,d,c),r.translate(l,u+c+(o.needsMarginTop?24:0)),sEe(r,i.pointers,a),r.restore()}function lEe(r,e){let{localMtx:t}=e;r.save(),r.transform(t.a,t.b,t.c,t.d,t.e,t.f);for(let n of e.children)Rx(r,n);r.restore()}function uEe(r,e,t){let n={width:14,height:14},o=kr(n)/kr(kt),i=kr(e)*o,s=ds(n,i),a=n.width/2,l=1,{strings:u}=he.get();r.save(),r.translate(e.width/2,e.height/2),r.scale(s,s),r.translate(-a-l-4,-a-l-3),r.beginPath(),r.fillStyle="#2E647D4D",r.arc(0,0,a,0,Math.PI*2,!0),r.fill();{let d=a*.5;r.save(),r.lineJoin="round",r.beginPath(),r.rotate(Math.PI/6),r.moveTo(Math.cos(Math.PI/2)*d,Math.sin(Math.PI/2)*d),r.lineTo(Math.cos(Math.PI*7/6)*d,Math.sin(Math.PI*7/6)*d),r.lineTo(Math.cos(-Math.PI/6)*d,Math.sin(-Math.PI/6)*d),r.closePath(),r.strokeStyle="#aaa",r.stroke(),r.fillStyle="#fff",r.fill(),r.restore()}r.beginPath(),r.strokeStyle="#aaa",r.lineWidth=l*1.5,r.arc(0,0,a,0,Math.PI*2,!0),r.stroke(),r.beginPath(),r.strokeStyle="#fff",r.lineWidth=l,r.arc(0,0,a,0,Math.PI*2,!0),r.stroke(),r.translate(-a-l-4,0),r.textBaseline="middle",r.textAlign="right",r.font=`8px "${u.uiFontName}"`,r.strokeStyle="#aaa",r.strokeText(t,0,0),r.font=`8px "${u.uiFontName}"`,r.fillStyle="#fff",r.fillText(t,0,0),r.restore()}function dEe(r,e,t){let n={width:42,height:42},o=kr(n)/kr(kt),i=kr(e)*o,s=ds(n,i),a=n.width/2*s;r.save(),r.drawImage(t,-a,-a,a*2,a*2),r.restore()}function z6(r,e){let{image:t,x:n,y:o,width:i,height:s}=e;if(r.save(),i!=null&amp;&amp;s!=null)if(t instanceof SVGElement||t instanceof HTMLVideoElement)r.drawImage(t,n,o,i,s);else{let a=Xr({width:i,height:s},t),l=new ft().translate(-n,-o).scale(a,a).translate(n,o);r.transform(l.a,l.b,l.c,l.d,l.e,l.f),r.drawImage(t,n,o)}else r.drawImage(t,n,o);r.restore()}function cEe(r,e,t){let{urlDomainLabel:n}=e;r.save();let o=t.width,i=t.height*.1,s=Eo({width:o,height:i}),a=20*s,l=t.x+a,u=t.y+t.height-a,{strings:d}=he.get();r.font=`${a}px '${d.uiFontName}'`,r.strokeStyle="rgba(255, 255, 255, 0.5)",r.lineWidth=a/20,r.strokeText(n,l,u),r.fillStyle="#555555FF",r.fillText(n,l,u),r.restore()}function zM(r,e,t,n,o,i){let s=hEe(e,n,o,i);r.save(),r.lineWidth=t*2,r.strokeStyle="#ccc",r.stroke(s),r.fillStyle="#fff",r.fill(s),r.restore()}function pEe(r,e,t,n,o){r.save(),r.beginPath(),r.arc(n,o,e,0,Math.PI*2,!0),r.closePath(),r.lineWidth=t*2,r.strokeStyle="#ccc",r.stroke(),r.fillStyle="#fff",r.fill(),r.restore()}function hEe(r,e,t,n){let o=new Pr(r,0),i=De(o.rotate(e,"deg")),s=De(o.rotate(120,"deg")),a=De(o.rotate(120,"deg")),l=new Path2D;return l.moveTo(i.x+t,i.y+n),l.lineTo(s.x+t,s.y+n),l.lineTo(a.x+t,a.y+n),l.closePath(),l}function fEe(r,e,t,n){let o=3.5/e,i=1/e,s=o*2/3*2,a=s-o;for(let{x:l,y:u,type:d}of t){if(d==="bbLeftTop"){let c=Ot.fullScreenIcon.getOrLoad();if(c){let p=o*5*2,h=p/2-o/2;r.drawImage(c,l-h,u-h,p,p)}continue}if(!!n)switch(d){case"bbRightTop":case"bbLeftBottom":case"bbRightBottom":pEe(r,o,i,l,u);break;case"bbLeftMiddle":zM(r,s,i,0,l-a,u);break;case"bbCenterTop":zM(r,s,i,90,l,u-a);break;case"bbRightMiddle":zM(r,s,i,180,l+a,u);break;case"bbCenterBottom":zM(r,s,i,270,l,u+a);break}}}function mEe(r){let{pointerType:e}=r;return e==="text"?r.caretRect:qe(r.point.x,r.point.y)}function fie(r){let{card:e,root:t,editorStore:n,mtx:o,rough:i,isAnimating:s,isScreenSharing:a,enableCardEditTool:l}=r,u=r.focusingCardId;t.id===e.id&amp;&amp;!u&amp;&amp;(u=e.id);let{narrationRecording:d,toolVisible:c,selectedTool:p,activeFingerTool:h}=n;return(d||!c||!l||a)&amp;&amp;(u=void 0),u===t.id?(s||o.a&gt;=1||p===0&amp;&amp;h==="laser"||i)&amp;&amp;(u=void 0):p===1&amp;&amp;(u=void 0),u}function mie(r,e,t){let n=r.toolVisible,{selectedTool:o,activeFingerTool:i,narrationRecording:s}=r;return(!t||e||s||o===1||o===0&amp;&amp;i==="laser")&amp;&amp;(n=!1),n}function Fx({canvas:r,viewport:e,root:t,userId:n,fineStroke:o,finePdfRenderer:i,rootMipmapType:s,ignoreAnnotations:a,visibleRect:l,heldCardIds:u=[],hoverCardIds:d=[],assetUplaodStates:c={},focusingCardId:p,textEditingCardId:h,toolVisible:f,narrationRecording:m,ignoreDisplayName:g,ignoreFavorites:v,quizButtons:b,attendanceButtons:C,dpr:x,remotePointers:y,cardStrokeStates:S,isReadonly:T}){var A;let w=new Fn(()=&gt;({}));for(let I of u)w.get(I).active=!0;p&amp;&amp;(w.get(p).focused=!0),h&amp;&amp;(w.get(h).textEditing=!0);for(let I of d)w.get(I).hover=!0;for(let[I,E]of Object.entries(c))w.get(I).assetUploadState=E;for(let[I,E]of(A=S==null?void 0:S.entries())!=null?A:[])w.get(I).fineStroke=E;if(t){let I=w.get(t.id);s&amp;&amp;(I.thumbType=s),b&amp;&amp;(I.quizButtons=b),C&amp;&amp;(I.attendanceButtons=C),i&amp;&amp;(I.pdfRenderer=i),o&amp;&amp;(I.fineStroke=o)}return{canvas:r,viewport:e,userId:n,root:t,toolVisible:f,narrationRecording:m,ignoreAnnotations:a,ignoreDisplayName:g,ignoreFavorites:v,visibleRect:l,dpr:x,remotePointers:y,cards:rn(w.entries()),isReadonly:T}}function Nf(r){let{ctx:e,mtx:t,card:n,cardRendererCallback:o,root:i}=r,s=o||fo,a=Fx(r),l=t.clone();if(e.save(),i){let d=n.localPosition;l.translate(-d.x,-d.y),e.translate(-d.x,-d.y)}let u=zy({cards:[n],callback:s,mtx:l,state:a});Rx(e,u),e.restore()}var jo=class{constructor(e){this.data=e}stringify(){return JSON.stringify(this.data)}};var gEe=r=&gt;r.match(/password|token/i)!=null,HM=class{constructor(e,t=gEe){this.konsole=e;this.redactor=t}logEntries(e,t){let n=[];for(let o of t){let[i,s]=o;this.redactor(i)&amp;&amp;(s="[REDACTED]"),n.push({name:i,value:gie(s)})}this.konsole.groupCollapsed(e),this.konsole.table(n),this.konsole.groupEnd()}logHttpBody(e){e instanceof jo?this.logEntries("Body",Object.entries(e.data)):e instanceof URLSearchParams?this.logEntries("Body",e):e instanceof FormData?this.logEntries("Body",e):(this.konsole.groupCollapsed("Body"),this.konsole.log(gie(e)),this.konsole.groupEnd())}};function gie(r){if(r instanceof File){let{lastModified:e,name:t,size:n,type:o}=r;return{objectType:"File",lastModified:e,name:t,size:n,type:o}}else if(r instanceof Blob){let{size:e,type:t}=r;return{objectType:"Blob",size:e,type:t}}return r}var zl=class{constructor({method:e,url:t,body:n,signal:o}){this.headers=new Headers;var i;this.method=e.toUpperCase(),t.match(/^https?:\/\//)?this.url=new URL(t):this.url=new URL(t,(i=globalThis.origin)!=null?i:"http://dummy"),this.body=n,this.signal=o,n instanceof jo&amp;&amp;this.setContentType("application/json;charset=UTF-8")}setContentType(e){this.headers.set("content-type",e)}addParam(e,t){this.body instanceof jo?this.body.data[e]=t:this.body instanceof FormData?this.body.set(e,t):this.body instanceof URLSearchParams?this.body.set(e,t):this.url.searchParams.set(e,t)}serializeBody(){return this.body instanceof jo?this.body.stringify():this.body}fetch(e={}){return fetch(this.url.toString(),{method:this.method,headers:this.headers,body:this.serializeBody(),...e})}},Mk=new HM(fe);async function Ac(r,{enableLog:e,noCache:t,responseType:n,keepalive:o}){e&amp;&amp;(fe.groupCollapsed(`${r.method} ${r.url.origin}${r.url.pathname}`),Mk.logEntries("Queries",r.url.searchParams),Mk.logEntries("Headers",r.headers),r.body&amp;&amp;Mk.logHttpBody(r.body),fe.groupEnd());let i,s=!1;try{let u;if(r.signal)u=r.signal;else if(r.timeout){let d=new AbortController;u=d.signal,setTimeout(()=&gt;{s=!0,d.abort()},r.timeout.delay*r.timeout.unit)}i=await r.fetch({cache:t?"no-cache":"default",signal:u,keepalive:o})}catch(u){if(s)throw new wx;let c=iu(u).message;throw new tp(c)}let a=i.status,l;try{if(a===200||a===201){if(n==="raw")l=i;else if(n==="json")l=await i.json();else if(n==="arrayBuffer")l=await i.arrayBuffer();else if(n==="blob")l=await i.blob();else if(n==="text")l=await i.text();else if(n==="headers")l=i.headers;else throw new Error("invalid responseType: "+n);return l}else{let u="";try{u=await i.text(),l=u}catch(d){}throw new sr(a,u)}}finally{if(e){let u=`%c${a} %c${r.method} ${r.url.origin}${r.url.pathname}`,d=a&lt;300?"lime":"red";fe.groupCollapsed(u,`color: ${d}; font-weight:bold;`,"color: font-weight:bold;"),Mk.logEntries("Headers",i.headers),Mk.logHttpBody(l),fe.groupEnd()}}}var hv=class{constructor(e){this.options=e}async create(e){return this.send({method:"POST",url:"/api/attendance/new",responseType:"json",appToken:e})}async getCoverData(e,t){return this.send({method:"GET",url:`/api/attendance/${e}/cover`,responseType:"json",appToken:t})}async fork(e,t){return(await this.send({method:"POST",url:`/api/attendance/${e}/fork`,responseType:"json",appToken:t})).attendanceId}async send(e){let{method:t,body:n,appToken:o,responseType:i}=e,s=`${this.options.lnaEndpoint}${e.url}`,a=new zl({method:t,url:s,body:n});return a.headers.append("content-type","application/json; charset=UTF-8"),a.headers.append("x-loilo-app-token",o),a.headers.append("x-loilo-lns-endpoint",this.options.lnsEndpoint),a.headers.append("x-loilo-language-type",Hm(this.options.locale)),Ac(a,{enableLog:this.options.logEnabled,responseType:i})}};var vie=oe(vm());var Qp=class{constructor(e){this.options=e;this.tokenManager=e.appTokenManager}async send(e){let{method:t,body:n}=e,i=`${this.options.lnqEndpoint}${e.url}`,s=new zl({method:t,url:i,body:n}),a=await this.getToken();s.headers.set("x-loilo-app-token",a.app_token),s.headers.set("x-loilo-lns-endpoint",this.options.lnsEndpoint),s.headers.append("x-loilo-language-type",Hm(this.options.locale));let l={enableLog:this.options.logEnabled,noCache:e.noCache,responseType:e.responseType};return Ac(s,l).catch(async u=&gt;{if(u.status===401){H6(u,{attribute:"Failed to authorize with given appToken",token:a});let d=await this.tokenManager.forceIssue("loilonote-quiz").catch(c=&gt;{throw H6(c,{attribute:"Failed to reissue appToken",token:a}),new sr(c.status,c.message)});return s.headers.set("x-loilo-app-token",d.app_token),Ac(s,{...l}).catch(async c=&gt;{throw H6(c,{attribute:c.status===401?"Reissued appToken but authentication failed":"Reissued appToken but got another error",token:d}),new sr(c.status,c.message)})}})}async getToken(){var e;return(e=await this.tokenManager.issue("loilonote-quiz"))!=null?e:await this.tokenManager.mustIssue("loilonote-quiz")}async fork(e){return(await this.send({method:"POST",url:`/api/quiz/${e}/fork`,responseType:"json"})).quizId}async getCoverData(e){return this.send({method:"GET",url:`/api/quiz/${e}/cover`,responseType:"json"})}async createQuiz(e){return this.send({method:"POST",url:"/api/quiz",responseType:"json",body:new jo({preset:e})})}};function H6(r,e){vie.default.notify(r,t=&gt;{t.addMetadata("metaData",e)})}var G6=["test","survey"];function bie(r){return Pa(r,{quiz_id:wl,preset:rE(...G6),quiz_author:e=&gt;Pa(e,{id:wl,name:wl}),title:wl,question_count:Or,isAnswered:d0,is_result_opened:d0})}function GM(r){var e;return((e=r.state)==null?void 0:e.answeredCount)===r.questionCount}var Nk=class{constructor(){this.fineCanvasMap=new Fn(()=&gt;fr.create());this.localCurrentFineCanvasMap=new Fn(()=&gt;({canvas:fr.create(),isEraser:!1}));this.remoteCurrentFineCanvasMaps=new Fn(()=&gt;new Fn(()=&gt;({canvas:fr.create(),isEraser:!1})));this.tmpCanvas=new Sg(()=&gt;fr.create())}static forEditorRoot(){return this.editorRoot=new Nk,this.editorRoot}static forEditorFooterThumbRoot(e){return this.editorFooterThumbInstances.get(e)}static forCardThumb(e){return this.cardThumbInstances.get(e)}static onEditorClose(){this.editorRoot=void 0}static onEditorFooterThumbClose(e){for(let t of e.iteratorOverGroup())this.editorFooterThumbInstances.delete(t)}static onAssetUpdate(e){this.cardThumbInstances.delete(e)}useFineCanvas(e){return this.fineCanvasMap.get(e)}useCurrentFineCanvas(e,t){return t?this.remoteCurrentFineCanvasMaps.get(e).get(`${t}/${e}`):this.localCurrentFineCanvasMap.get(e)}clear(e){let t=this.useFineCanvas(e),n=t.getContext("2d");n==null||n.clearRect(0,0,t.width,t.height)}clearCurrent(e,t){let{canvas:n}=this.useCurrentFineCanvas(e,t),o=n.getContext("2d");o==null||o.clearRect(0,0,n.width,n.height)}clearCurrentAll(e){let t=this.localCurrentFineCanvasMap.get(e),n=this.remoteCurrentFineCanvasMaps.get(e).values();for(let{canvas:o}of[t,...n]){let i=o.getContext("2d");i==null||i.clearRect(0,0,o.width,o.height)}}appendStroke({stroke:e,mtx:t,card:n,canvasSize:o,isEraser:i,type:s,rectUpdated:a,sessionId:l}){let u=this.useCurrentFineCanvas(s,l),d=u.canvas.getContext("2d");if(!d)throw new uo;let c=Math.ceil(o.width),p=Math.ceil(o.height);(u.canvas.width!==c||u.canvas.height!==p)&amp;&amp;(a=void 0,u.canvas.width=c,u.canvas.height=p),a===void 0&amp;&amp;d.clearRect(0,0,u.canvas.width,u.canvas.height),d.save(),d.transform(t.a,t.b,t.c,t.d,t.e,t.f);let h=n.drawnLocalBounds(s),{canvas:f}=n.drawnGeometry(s),m=1/$i(f.width,f.height,n.contentLocalBounds.width,n.contentLocalBounds.height);d.translate(h.x,h.y),d.scale(m,m);let g=Xr(o,n.contentLocalBounds),v=t.a/g;if(a){let b=An(1),C=qe(a),x=Vu(C,b);a=Vu(x,b),d.clearRect(C.x,C.y,C.width,C.height),d.beginPath(),d.rect(x.x,x.y,x.width,x.height),d.clip()}e.draw({ctx:d,resolutionScale:v,rectUpdated:a}),d.restore(),u.isEraser=i}bitbltFineCanvas({ctx:e,mtx:t,type:n}){let o=t.inverted();e.save(),e.transform(o.a,o.b,o.c,o.d,o.e,o.f);let i=this.useFineCanvas(n);this.tmpCanvas.current.width=i.width,this.tmpCanvas.current.height=i.height;let s=this.tmpCanvas.current.getContext2dForce();s.drawImage(i,0,0);let a=this.localCurrentFineCanvasMap.get(n),l=this.remoteCurrentFineCanvasMaps.get(n).values();a.isEraser?(s.save(),s.globalCompositeOperation="destination-out",s.drawImage(a.canvas,0,0),s.restore()):s.drawImage(a.canvas,0,0);for(let{isEraser:u,canvas:d}of l)u||s.drawImage(d,0,0);e.drawImage(this.tmpCanvas.current,0,0),e.restore()}commitCurrent(e,t){let n=this.useFineCanvas(e),o=this.useCurrentFineCanvas(e,t),i=n.getContext2dForce(),s=o.canvas.getContext2dForce();i.save(),o.isEraser&amp;&amp;(i.globalCompositeOperation="destination-out"),i.drawImage(o.canvas,0,0),i.restore(),s.clearRect(0,0,o.canvas.width,o.canvas.height)}redrawFineThumbnail(e,{canvasSize:t,contents:n,type:o,geometry:i,drawnLocalBounds:s,contentLocalBounds:a}){let l=this.useFineCanvas(o);l.width=Math.ceil(t.width),l.height=Math.ceil(t.height);let u=l.getContext2dForce();u.save(),u.transform(e.a,e.b,e.c,e.d,e.e,e.f);let d=s,c=1/$i(i.canvas.width,i.canvas.height,a.width,a.height);u.translate(d.x,d.y),u.scale(c,c);let p=Xr(u.canvas,a),h=e.a/p;U_(u,{canvas:i.canvas,contents:n},h,{drawEraserAsStroke:!1}),u.restore()}},Oa=Nk;Oa.editorFooterThumbInstances=new w1(()=&gt;new Nk),Oa.cardThumbInstances=new w1(()=&gt;new Nk);function gk(r){let e=[];for(let t of r.children)e.push(gk(t));return{id:r.id,children:e}}function us(r){return r.parent?Eo(r.parent.size):1}function Eo(r){let e;r.width&gt;=r.height?e=$e(xi):e=$e(xi.height,xi.width);let t=$i(e.width,e.height,r.width,r.height);return xl(r.height,r.height*t,1)}function yie(r,e){for(let t of r.bubblingOrderIterator())if(t.id!==e.id&amp;&amp;nu(t.bounds,e.bounds)&amp;&amp;t.isVisibleInCardTree(void 0))return t}function $M({cardHolder:r,card:e,desktopScale:t,forHitTest:n,pivot:o,rootCard:i,withGroup:s}){for(let a of r.bubblingOrderIterator()){if(a.id===e.id||!a.isVisibleInCardTree(i)||a.isDescendantOf(e.id)||s&amp;&amp;a.isIncludedInGroup(e))continue;let l=xEe(a,[e],t,n),d=new ft().translate(-o.x,-o.y).scale(l).translate(o.x,o.y).transformRect(qe(),e.bounds);if(a===e.parent){if(Oi(a.bounds,d))return{card:a,scale:l}}else if(nu(a.bounds,d))return{card:a,scale:l}}}function fv(r){return!!(r.type==="audio"||r.type==="video"||r.gadgets.bgm&amp;&amp;r.gadgets.bgm.asset||r.gadgets.naration&amp;&amp;r.gadgets.naration.asset)}function Xi(r){return r instanceof Qn||r instanceof zn?{startSeconds:r.content.in_point,endSeconds:r.content.out_point,duration:Math.max(r.content.out_point-r.content.in_point,0)}:{startSeconds:0,endSeconds:r.duration,duration:r.duration}}function VM(r){return r instanceof Qn||r instanceof zn?!1:r.unlimitedRecordingTime}function ZF(r){return r instanceof Qn?r.content.source_volume:r instanceof zn?r.content.is_source_muted?0:r.content.source_volume:1}function vEe(r){let e=qe(r.content.margins.left,r.content.margins.top,r.contentSize.width,r.contentSize.height),t=r.contentSizeWithMargins;return eK({rect:e,inSize:t})}function Cie(r){let e=qe(0,0,r.bounds.width,r.bounds.height),t=Zj({rect:e,withNormalizedRect:vEe(r)});return Math.sqrt(kr(t)/kr(kt))}function of({card:r,clipLocalFontSize:e}){let t=Cie(r);return e*t}function jM({card:r,universalFontSize:e}){let t=Cie(r);return e/t}var Ic=5;function zb({author:r,url:e,position:t=De(),contentSize:n,scaleToParent:o=1,asset:i}){let s=n?br(n,kt):kt;return s=Nt(s,o),{id:Sr(),type:"web",metadata:{position:{left:t.x,top:t.y},layout_size:s,author:r,duration:Ic,unlimited_recording_time:!0},content:{uri:e,size:$e(n!=null?n:os),backcolor:cn().toARGBHex(),margins:An(),needs_display_url_domain:!0,asset:i},gadgets:{}}}function kU(r){let{author:e,quizContentBase:t,position:n,layoutSize:o,cardId:i,backcolor:s=cn().toARGBHex(),metadata:a={duration:Ic,unlimited_recording_time:!0},gadgets:l={}}=r;return{id:i!=null?i:Sr(),type:"quiz",metadata:{...a,position:{left:n.x,top:n.y},layout_size:o!=null?o:$e(kt),author:e},content:{size:$e(os),backcolor:s,margins:An(),quiz_id:t.quiz_id,quiz_author:t.quiz_author,preset:t.preset,title:t.title,question_count:t.question_count,isAnswered:!1,is_result_opened:!0},gadgets:l}}async function kx(r,e,t=fk){let n=await ie.apiClient.getOgpMetadata(r),o=await t({author:e,decodedUrl:decodeURI(r),title:n.title,description:n.description});return{url:r,thumbnailFile:o,title:n.title}}var fk=async({author:r,decodedUrl:e,title:t,description:n})=&gt;{let o={x:0,y:0},i="#FF000000",s="#00FFFFFF",a=pu({position:o,color:i,backcolor:s,size:$e(kt),author:r}),l=a.metadata.layout_size.height,d=a.metadata.layout_size.width*.8,c=9,p=32,h=24,f=10,m=70;e.length&gt;m&amp;&amp;(e=e.substr(0,m)+"...");let g=pu({position:o,backcolor:s,color:h1.url,author:r,size:{width:d,height:c},text:e,font_size:c*14});g.metadata.position={left:0,top:-(l/2)+8.4};let v=[];v.push(pu({position:o,backcolor:s,color:h1.title,author:r,size:{width:d,height:p},text:t,font_size:p*4})),n&amp;&amp;v.push(pu({position:o,backcolor:h1.descriptionBackground,color:h1.description,author:r,size:{width:d,height:h},text:n,font_size:h*2})),v=bEe(v,f,l,o.y),v.push(g);let b=ca(a);v.forEach(x=&gt;{b.addChild(ca(x))});let C=yEe(b);return io(C,"image/png","webcard_thumb.png")};function bEe(r,e,t,n){let o=n-t/2,i=0;r.forEach(a=&gt;{i+=a.metadata.layout_size.height}),i+=e*(r.length-1);let s=(t-i)/2;return r.forEach(a=&gt;{a.metadata.position.top=o+a.metadata.layout_size.height/2+s,s+=a.metadata.layout_size.height,s+=e}),r}function yEe(r){let e=Ot.webCardThumbnailPlaceholder.getOrLoad(),t=br(r.contentSizeWithMargins,rK),n=fr.create(t),o=n.getContext2dForce();o.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height);let[i,s]=[n.width/2,n.height/2],a=Xr(n,r.size),l=new ft(a,0,0,a,i,s);return o.transform(l.a,0,0,l.d,l.e,l.f),Nf({ctx:o,mtx:l,canvas:o.canvas,viewport:Tl(),root:r,card:r,toolVisible:!1,narrationRecording:!1,rootMipmapType:"content",dpr:1}),n}function PU(r){let{author:e,contentBase:t,position:n,layoutSize:o,cardId:i,backcolor:s=cn().toARGBHex(),metadata:a={duration:Ic,unlimited_recording_time:!0},gadgets:l={}}=r;return{id:i!=null?i:Sr(),type:"attendance",metadata:{...a,position:{left:n.x,top:n.y},layout_size:o!=null?o:$e(kt),author:e},content:{size:$e(os),backcolor:s,margins:An(),attendance_id:t.attendanceId,title:t.title,attendance_author:{...t.author}},gadgets:l}}function KM({type:r,...e}){var n,o,i,s,a,l,u,d;let t={text:(n=e.text)!=null?n:"",forecolor:(o=e.forecolor)!=null?o:To().toARGBHex(),vertical:(i=e.vertical)!=null?i:!1,h_alignment:((s=e.h_alignment)!=null?s:r==="audio")?"center":"left",v_alignment:(a=e.v_alignment)!=null?a:"middle",font_size:(l=e.font_size)!=null?l:Sb,attributes:(u=e.attributes)!=null?u:[],attribute_ranges:(d=e.attribute_ranges)!=null?d:[]};if(t.text!==""){let c=Ps(t.text,[{type:"font",value:{bold:!1,size:t.font_size}},{type:"foreground_color",value:t.forecolor},{type:"paragraph_style",value:{line_spacing:0}}]),{attributes:p,attribute_ranges:h}=c;t.attributes=p,t.attribute_ranges=h}return t}function pu({id:r,backcolor:e=cn().toARGBHex(),author:t,color:n=To().toARGBHex(),position:o=De(),size:i=$e(kt),text:s,font_size:a}){return{id:r!=null?r:Sr(),type:"title",metadata:{position:{left:o.x,top:o.y},layout_size:$e(i),author:t,duration:Ic,unlimited_recording_time:!0},content:{backcolor:e,size:$e(os),margins:An()},gadgets:{title:KM({type:"text",forecolor:n,text:s,font_size:a})}}}function AU(r){return r===void 0?cn().toARGBHex():r instanceof Of||r instanceof Qn||r instanceof Yi&amp;&amp;r.content.usage==="thinking_tool"?CEe(r):To().toARGBHex()}function CEe(r){let e=dn(r.content.backcolor);if(e.isTransparent()){let o=[...r.parentsIterator()].find(i=&gt;!dn(i.content.backcolor).isTransparent());if(!o)return cn().toARGBHex();e=dn(o.content.backcolor)}let t,n;for(let{backgroundColor:o,textColor:i}of dE){let s=FK(e,mt(o));(n===void 0||n&gt;s)&amp;&amp;(n=s,t=mt(i).toARGBHex())}return t!=null?t:To().toARGBHex()}function sf({scaleToParent:r=1,asset:e,contentSize:t,author:n,position:o=De()}){let i={backcolor:is.toARGBHex(),size:$e(t),margins:An(),asset:e},s=Sr(),a=Nt(br(t,kt),r);return{id:s,type:"picture",metadata:{position:{left:o.x,top:o.y},layout_size:a,author:n,duration:Ic,unlimited_recording_time:!0},content:i,gadgets:{}}}function Sie(r){let e=r.width&gt;r.height?os:{width:os.height,height:os.width},t=$i(e.width,e.height,r.width,r.height);return{width:r.width*t,height:r.height*t}}function SEe({contentSize:r,margins:e,canvasSize:t}){let n=vp(r,{x:0,y:0,width:t.width,height:t.height}),o=n.width/r.width,i=n.height/r.height,s=n.x-e.left*o,a=n.y-e.top*i;return new ft(o,0,0,i,s,a)}function xie({contentSize:r,margins:e,canvasSize:t}){let{width:n,height:o}=$e(r.width+e.left+e.right,r.height+e.top+e.bottom),i=qe(0,0,n,o),s=sE(i,SEe({contentSize:r,margins:e,canvasSize:t}));return{x:s.x/t.width,y:s.y/t.height,width:s.width/t.width,height:s.height/t.height}}function cc({author:r,asset:e,pageIndex:t,pageSize:n,layoutSize:o,margins:i=An(),position:s,usage:a}){let l={page_size:n,page_index:t,margins:{...i},asset:e,backcolor:a==="thinking_tool"?RK.toARGBHex():is.toARGBHex(),usage:a};return{id:Sr(),type:"pdf",metadata:{position:{left:s.x,top:s.y},layout_size:$e(o),author:r,duration:Ic,unlimited_recording_time:!0},content:l,gadgets:{}}}var W6=To();function Hb({position:r,author:e,duration:t,asset:n,contentSize:o,scaleToParent:i=1}){var l,u;let s=KM({type:"audio",forecolor:W6.toARGBHex()}),a=o?br(o,kt):kt;return a=Nt(a,i),{id:Sr(),type:"audio",metadata:{position:{left:(l=r==null?void 0:r.x)!=null?l:0,top:(u=r==null?void 0:r.y)!=null?u:0},layout_size:a,author:e,duration:t,unlimited_recording_time:!0},content:{size:$e(o!=null?o:os),backcolor:cn().toARGBHex(),asset:n,in_point:0,out_point:t,source_volume:1,is_source_muted:!1,margins:An()},gadgets:{title:s}}}function af({scaleToParent:r=1,asset:e,duration:t,author:n,position:o,contentSize:i}){var a,l;let s=i?br(i,kt):kt;return s=Nt(s,r),{id:Sr(),type:"video",metadata:{position:{left:(a=o==null?void 0:o.x)!=null?a:0,top:(l=o==null?void 0:o.y)!=null?l:0},layout_size:s,author:n,duration:t,unlimited_recording_time:!0},content:{size:$e(i!=null?i:os),backcolor:is.toARGBHex(),asset:e,in_point:0,out_point:t,source_volume:1,is_source_muted:!1,margins:An()},gadgets:{}}}function Yne(r){let e=r.content,t=e.size,n=An(e.margins),o=r.contentSizeWithMargins,i=new Sn(0,0,o.width,o.height),s=new Sn(n.left,n.top,t.width,t.height),a=Jj(s,i);if(!a)throw console.error(i,s),new Error("no intersection");let l=new ft().translate(-a.cx,-a.cy).rotate(-Math.PI/2,"rad").translate(a.cx,a.cy),u=sE(s,l),d=sE(a,l),c=u.x-d.x,p=d.right-u.right;(Fh(n.left,0)||Fh(n.right,0))&amp;&amp;(c=Math.max(c,u.x-i.x),p=Math.max(p,i.right-u.right));let h=u.y-d.y,f=d.bottom-u.bottom;return(Fh(n.top,0)||Fh(n.bottom,0))&amp;&amp;(h=Math.max(h,u.y-i.y),f=Math.max(f,i.bottom-u.bottom)),An({left:c,top:h,right:p,bottom:f})}function xEe(r,e,t,n=!1){let o=c0/t,i=o*o*4,s=1;for(let l of e)if(!(!n&amp;&amp;l.parent===r)&amp;&amp;!wEe(r,l,t)&amp;&amp;!(isNaN(l.bounds.width)||!isFinite(l.bounds.width)||isNaN(l.bounds.height)||!isFinite(l.bounds.height)))if(l.parent===r){if(!n)continue;let u=$e(Math.max(0,l.bounds.width-o),Math.max(0,l.bounds.height-o)),d=ds(l.bounds,Math.max(i,kr(u)));s=Math.min(s,d)}else{let u=ds($e(l.bounds.width,l.bounds.height),Math.max(i,kr(r.bounds)/9));s=Math.min(s,u)}let a=Eo(r.bounds);for(let l of e){let u=Nt(br(l.contentSizeWithMargins,aE),a);if(l.bounds.width&lt;u.width||l.bounds.height&lt;u.height){let d=u.height/l.bounds.height;s=Math.max(s,d)}}return s}function wEe(r,e,t){let n=c0/t;return r.bounds.width-n&gt;=e.bounds.width&amp;&amp;r.bounds.height-n&gt;=e.bounds.height}function yp(r,e,t){if(e===1||e&lt;=0||isNaN(e)||!isFinite(e))return;let n=new ft().translate(-t.x,-t.y).scale(e).translate(t.x,t.y);for(let o of r()){let i=n.transformRect(qe(),o.bounds);o.position=tn(i),o.size=$e(i)}}function JY({card:r,startBounds:e,scaleToParent:t,zoom:n}){let o=br(r.size,aE),i=kr(Nt(o,t)),s=kr(TEe(r.size,n)),a=Math.min(Math.max(i,s),kr(e));return br(r.size,a)}function $6(){return{landscape:$e(lE),portrait:$e(lE.height,lE.width)}}function TEe(r,e){let t=$6(),n=Math.max(t.portrait.width/r.width,t.portrait.height/r.height),o=Math.max(t.landscape.width/r.width,t.landscape.height/r.height),i=Math.min(o,n);return Nt(r,i/e)}function ZY({card:r,corner:e,startBounds:t,scaleToParent:n,zoom:o}){let i=Nt(aE,n),s=DEe({startBounds:t,zoom:o,corner:e}),a=p4(s,i),l=PEe(r);return l&amp;&amp;(a=kEe({minSize:a,start:new Sn(t),children:l,corner:e})),Hj(a,t)}function DEe(r){let{startBounds:e,zoom:t,corner:n}=r,o=$6();return n.includes("Middle")?Fh(e.height*t,o.landscape.height)?Nt(o.landscape,1/t):Nt(o.portrait,1/t):Fh(e.width*t,o.portrait.width)?Nt(o.portrait,1/t):Nt(o.landscape,1/t)}function eX({card:r,corner:e,startBounds:t}){let n=br(r.size,v4);r.parent&amp;&amp;(n=wie({maxSize:n,start:new Sn(t),parent:new Sn(r.parent.bounds),corner:e}));let o=Math.max(kr(n),kr(t));return br(r.size,o)}function tX({card:r,corner:e,startBounds:t}){let n=v4;return r.parent&amp;&amp;(n=wie({maxSize:n,start:new Sn(t),parent:new Sn(r.parent.bounds),corner:e})),n=p4(n,t),n}function wie(r){let{maxSize:e,start:t,parent:n,corner:o}=r;if(o==="bbLeftTop"){let i={x:n.x,y:n.y,width:Math.min(e.width,t.right-n.x),height:Math.min(e.height,t.bottom-n.y)};return vp(t,i)}else if(o==="bbRightTop"){let i={x:t.x,y:n.y,width:Math.min(e.width,n.right-t.x),height:Math.min(e.height,t.bottom-n.y)};return vp(t,i)}else if(o==="bbLeftBottom"){let i={x:n.x,y:t.y,width:Math.min(e.width,t.right-n.x),height:Math.min(e.height,n.bottom-t.y)};return vp(t,i)}else if(o==="bbRightBottom"){let i={x:t.x,y:t.y,width:Math.min(e.width,n.right-t.x),height:Math.min(e.height,n.bottom-t.y)};return vp(t,i)}else return o==="bbCenterTop"?$e(e.width,Math.min(e.height,t.bottom-n.y)):o==="bbLeftMiddle"?$e(Math.min(e.width,t.right-n.x),e.height):o==="bbRightMiddle"?$e(Math.min(e.width,n.right-t.x),e.height):$e(e.width,Math.min(e.height,n.bottom-t.y))}function kEe(r){let{minSize:e,start:t,children:n,corner:o}=r;return o==="bbCenterTop"?$e(e.width,Math.max(e.height,t.bottom-n.y)):o==="bbLeftMiddle"?$e(Math.max(e.width,t.right-n.x),e.height):o==="bbRightMiddle"?$e(Math.max(e.width,n.right-t.x),e.height):$e(e.width,Math.max(e.height,n.bottom-t.y))}function PEe(r){let e;for(let t of r.familyIterator({withoutSelf:!0}))!t.isVisibleInGroup()||(e=e?Rs(e,t.bounds):t.bounds);if(e)return new Sn(e)}function al(r){var e,t;return!!(r instanceof Of||r instanceof Qn||((t=(e=r.gadgets.title)==null?void 0:e.text.length)!=null?t:0&gt;0))}function rX(r,e=!0){let t=new ri,n=r.parent;for(let o of e?r.iteratorOverGroup():r.iterator())for(let i of o.familyIterator())!i.isVisibleInCardTree(n)||t.add(i.bounds);return t}var WM=class extends Error{constructor(e="Could not copy card"){super(e)}};async function nX(r){let{card:e,store:t,srcIdMap:n,idMapper:o}=r,i=e.copy(n,o),s=Vr.getEndpoint("loilonote-quiz");if(!s)throw new WM;let{lnsEndpoint:a,logEnabled:l,locale:u}=t,d=new Qp({lnsEndpoint:a,lnqEndpoint:s,logEnabled:l,locale:u,appTokenManager:Vr}),{quiz_id:c}=e.content,p=await d.fork(c),h=await d.getCoverData(p),f={quiz_id:p,preset:e.content.preset,quiz_author:h.author,title:h.title,question_count:h.questionCount,isAnswered:GM(h),is_result_opened:!0},m=o?o(e.id):Sr(),g=Nr(t,t.userInfo.user_id),v=kU({cardId:m,author:g,quizContentBase:f,layoutSize:e.size,backcolor:e.content.backcolor,position:De(e.position),metadata:e.metadata,gadgets:e.gadgets});n==null||n.set(e.id,m);let b=new jr(v);for(let C of i.children)b.addChild(C);return b}async function oX(r){let{card:e,store:t,srcIdMap:n,idMapper:o}=r,i=e.copy(n,o),s=await Vr.issue("loilonote-attendance"),a=Vr.getEndpoint("loilonote-attendance");if(!s||!a)throw new WM;let{lnsEndpoint:l,logEnabled:u,locale:d}=t,c=new hv({lnsEndpoint:l,lnaEndpoint:a,logEnabled:u,locale:d}),p=await c.fork(e.content.attendance_id,s.app_token),f={...await c.getCoverData(p,s.app_token),attendanceId:p},m=o?o(e.id):Sr(),g=Nr(t,t.userInfo.user_id),v=PU({cardId:m,author:g,contentBase:f,layoutSize:e.size,backcolor:e.content.backcolor,position:De(e.position),metadata:e.metadata,gadgets:e.gadgets});n==null||n.set(e.id,m);let b=new wn(v);for(let C of i.children)b.addChild(C);return b}function Ck({card:r,zoom:e,focused:t,dpr:n}){let o=us(r);return t&amp;&amp;(o=AEe({cardSize:r.bounds,zoom:e,scale:o,dpr:n})),o}function AEe({cardSize:r,zoom:e,scale:t,dpr:n}){let i=Math.min(r.height,r.width)/wi*2,s=Math.min(1/(e/n),i)*.7;return Math.max(t,s)}function lM(r,e){let t=wi*e,n=Aa*e;return qe(r.position.x-r.size.width*.5-n-t*2,r.position.y-t,t*2,t*2)}function wne(r,e){let t=r;for(;t&amp;&amp;!(t===e||!t.pinned);)if(t.parent)t=t.parent;else{t=void 0;break}if(!(e&amp;&amp;t===e))return t}function Lx(r){var t,n;let e=(o,i)=&gt;{if(!!o)return o.length&gt;i?o.substr(0,i):o};if(r instanceof Of)return e((t=r.gadgets.title)==null?void 0:t.text,20);if(r instanceof ga||r instanceof zn||r instanceof Vo||r instanceof Yi||r instanceof Qn)return e((n=r.content.asset)==null?void 0:n.description,255);if(r instanceof jr||r instanceof wn)return e(r.content.title,255)}function mv(r,e){let t=r.parent;if(!(r.id===e.id||!t||t.id===e.id))for(;t;){for(let n of e.children)if(t.id===n.id)return t;t=t.parent}}var IEe=new Map([["bbLeftTop","pointer"],["bbCenterTop","n-resize"],["bbRightTop","ne-resize"],["bbLeftMiddle","w-resize"],["bbRightMiddle","e-resize"],["bbLeftBottom","sw-resize"],["bbCenterBottom","s-resize"],["bbRightBottom","se-resize"]]),EEe=["foldHandle","connectorHandle","connection","bbLeftTop","bbCenterTop","bbRightTop","bbLeftMiddle","bbRightMiddle","bbLeftBottom","bbCenterBottom","bbRightBottom"];function Bk(r,e,t){return r&amp;&amp;t!=="bbLeftTop"&amp;&amp;t!=="card"?"default":e&amp;&amp;EEe.some(n=&gt;n===t)?"grab":IEe.get(t)||"pointer"}function Tne(r){let e=dn(r.content.backcolor);return O6(e)}var _Ee=wb(v0).v;function O6(r){if(r.a===0)return NK;let e=wb(r);return e.v&gt;_Ee?e.v-=.1:e.v+=.1,nn(MK(e))}function die(r,e){return r instanceof ga?!0:r instanceof zn||r instanceof Qn?e||!wk(r):r instanceof md||r instanceof Vo?r.content.asset!==void 0:!1}function wk(r){return r.contentAssetId()==null&amp;&amp;(r.type==="picture"||r.type==="video"||r.type==="audio"||r.type==="pdf")}function FEe(r,e){if(r.parent){let t=Nt(r.parent.size,e);return kr(t)&gt;=kr(nK)}else return!0}function Tie(r,e){let t=Nt(r.size,e);t.width+=.1,t.height+=.1;let{portrait:n,landscape:o}=$6();return t.width&gt;=o.width&amp;&amp;t.height&gt;=o.height||t.width&gt;=n.width&amp;&amp;t.height&gt;=n.height}function MEe(r,e){return r.parent?Tie(r,e):!0}function NEe(r,e){return Tie(r,e)}function xx(r,e){let t={connectable:!1,movable:!1,resizable:!1};return!FEe(r,e)||(t.connectable=!0,!MEe(r,e))||(t.movable=!0,!NEe(r,e))||(t.resizable=!0),t}function Hy(r){let e=BEe(r),t=r.bounds;for(let n of r.iteratorOverGroup())t=Rs(t,n.bounds);return yp(()=&gt;r.memberAndChildrenIteratorOverGroup(),e,tn(t)),r}function BEe(r){let e;if(r.size.width&gt;r.size.height){let n=it(r.size.width,kt.width,xi.width);e=xl(n,r.size.width,1)}else{let n=it(r.size.height,kt.height,xi.height);e=xl(n,r.size.height,1)}return e}function Die(r){let e=od(r.size,kt);Ee(e!==void 0);let t=r.bounds;for(let n of r.iteratorOverGroup())t=Rs(t,n.bounds);return yp(()=&gt;r.memberAndChildrenIteratorOverGroup(),e,tn(t)),r}function jp(r){if(r.length===0)return;let e=new Map;for(let t of r){let n=t.extendedDrawn();n&amp;&amp;n.commands.length&gt;0&amp;&amp;e.set(t.id,{strategies:UM(),renderer:Oa.forCardThumb(t)})}return e.size&gt;0?e:void 0}var Go=class{constructor(e,t){this._isFolded=!1;this._children=[];this._lastModified=new Date;this._pinned=!1;this._favorite=!1;this.inPort="left";this.outPort="right";this.id=t.id,this._position=De(t.metadata.position.left,t.metadata.position.top),this._size=$e(t.metadata.layout_size),this.author={id:t.metadata.author.id,name:t.metadata.author.name},this.metadata=t.metadata,this.type=e,this.content=t.content,this.content.margins||(this.content.margins={left:0,top:0,right:0,bottom:0}),this.content.backcolor||(this.content.backcolor="#00000000"),this.gadgets=t.gadgets||{},this.migrate()}get next(){return this._next}get prev(){return this._prev}get nextGroup(){return this._nextGroup}get prevGroup(){return this._prevGroup}get nextCardOrGruop(){return this._next||this._nextGroup}get prevCardOrGroup(){return this._prev||this._prevGroup}get hasNextCardOrGroup(){return!!(this.next||this.nextGroup)}get hasPrevCardOrGroup(){return!!(this.prev||this.prevGroup)}get hasConnectedCardOrGroup(){return this.hasPrevCardOrGroup||this.hasNextCardOrGroup}get isFolded(){return this._isFolded}get parent(){return this._parent}rootParent(){let e=this;for(;e;){if(!e.parent)return e;e=e.parent}return this}parentsCount(){let e=0,t=this;for(;t.parent;)t=t.parent,e++;return e}groupMemberCount(){let e=0;return this.forEach(t=&gt;e++),e}memberCountOverGroup(){let e=0;return this.forEachOverGroup(t=&gt;e++),e}descendantsCount(){let e=0;return this.forEachDescendant(t=&gt;e++),e}*renderingOrderIterator(e={includeSelf:!0}){let t=e.includeSelf?[this]:[...this.children],n;for(;n=t.shift();)yield n,t.push(...n.children)}*bubblingOrderIterator(){let e=[...this.renderingOrderIterator()];for(let t=e.length-1;t&gt;=0;t--)yield e[t]}*rflatTree(e={includeSelf:!0}){for(let t of[...this._children].reverse())for(let n of t.rflatTree())yield n;e.includeSelf&amp;&amp;(yield this)}bringChildToFront(e,t){let n=t?Array.from(e.lastSelfIterator()):[e];for(let o of n){let i=this._children.indexOf(o);i&gt;-1&amp;&amp;(this._children.splice(i,1),this._children.push(o))}}get children(){return[...this._children]}get lastModified(){return this._lastModified}get pinned(){return this._pinned}set pinned(e){this._pinned=e,this.markAsModified()}pinnedItems(e){let t=[];for(let n of this.familyIterator(e))n.pinned&amp;&amp;t.push({id:n.id});return t}get favorite(){return this._favorite}set favorite(e){this._favorite=e,this.markAsModified()}favoriteItems(){let e=[];for(let t of this.familyIterator())t.favorite&amp;&amp;e.push({id:t.id});return e}canPin(){return!this.isFolded}canAlign(){return!!(this.prev||this.prevGroup||this.next||this.nextGroup)}canRotate(){return this.type==="picture"}get position(){return De(this._position)}set position(e){this._position=De(e),this.markAsModified()}get localPosition(){let e=De(this._position);return this.parent&amp;&amp;(e=Jo(e,this.parent._position)),e}get size(){return $e(this._size)}set size(e){this._size=$e(SY(e)),this.markAsModified()}get contentSizeWithMargins(){let{width:e,height:t}=this.contentSize,{left:n,top:o,bottom:i,right:s}=this.content.margins;return $e(e+n+s,t+o+i)}get bounds(){let{width:e,height:t}=this.size;return qe(this.position.x-e/2,this.position.y-t/2,e,t)}get localBounds(){let{width:e,height:t}=this.size;return{x:-e/2,y:-t/2,width:e,height:t}}get contentLocalBounds(){let e=this.content.margins,t=this.size.width/(e.left+e.right+this.contentSize.width),n=this.size.height/(e.top+e.bottom+this.contentSize.height),[o,i]=[-this.size.width/2,-this.size.height/2];return qe(o+e.left*t,i+e.top*n,this.contentSize.width*t,this.contentSize.height*n)}get duration(){return this.metadata.duration}get unlimitedRecordingTime(){return this.metadata.unlimited_recording_time}get playbackRate(){var e;return(e=this.metadata.playback_rate)!=null?e:1}createDrawnGeometry(e){let t;e==="drawn"&amp;&amp;this.gadgets.drawn?t=this.gadgets.drawn.canvas:e==="annotation"&amp;&amp;this.gadgets.annotations?t=this.gadgets.annotations.canvas:t=Sie(this.contentSize);let n=xie({canvasSize:t,margins:this.content.margins,contentSize:this.contentSize});return{canvas:t,thumbnailRect:n}}drawnGeometry(e){if(e==="drawn"){if(this.gadgets.drawn){let{canvas:t,thumbnailRect:n}=this.gadgets.drawn;return{canvas:t,thumbnailRect:n!=null?n:g4}}}else if(e==="annotation"&amp;&amp;this.gadgets.annotations){let{canvas:t,thumbnailRect:n}=this.gadgets.annotations;return{canvas:t,thumbnailRect:n!=null?n:g4}}return this.createDrawnGeometry(e)}drawnLocalBounds(e){let{canvas:t}=this.drawnGeometry(e),{width:n,height:o}=this.size,i=1/$i(t.width,t.height,this.contentSize.width,this.contentSize.height),s=this.content.margins,a={w:n/(s.left+s.right+this.contentSize.width),h:o/(s.top+s.bottom+this.contentSize.height)},l={width:t.width*i*a.w,height:t.height*i*a.h},u={w:this.contentSize.width*a.w-l.width,h:this.contentSize.height*a.h-l.height},d={x:-n*.5+s.left*a.w+u.w*.5,y:-o*.5+s.top*a.h+u.h*.5};return qe(d.x,d.y,l.width,l.height)}drawnThumbLocalBounds(e,t=void 0){let n=this.drawnLocalBounds(e),o=t!=null?t:this.drawnGeometry(e).thumbnailRect,i=n.x+n.width*o.x,s=n.y+n.height*o.y,a=n.width*o.width,l=n.height*o.height;return{x:i,y:s,width:a,height:l}}drawnAssetId(e){var t,n,o,i;switch(e){case"drawn":return(n=(t=this.gadgets.drawn)==null?void 0:t.asset)==null?void 0:n.remote_id;case"annotation":return(i=(o=this.gadgets.annotations)==null?void 0:o.asset)==null?void 0:i.remote_id}}extendedDrawn(){var e;return(e=this.gadgets.drawn)==null?void 0:e.extended}migrate(){if(this.type==="audio"&amp;&amp;this.gadgets.title===void 0&amp;&amp;(this.gadgets.title=KM({type:"audio",forecolor:W6.toARGBHex()})),this.gadgets.title&amp;&amp;(this.gadgets.title=this.removeInvalidLineFeed(this.gadgets.title)),!Cb(this._size.width)||!Cb(this._size.height)){let e=br(this.contentSizeWithMargins,kt);Cb(e.width)&amp;&amp;Cb(e.height)?this._size=e:this._size=$e(kt)}}removeInvalidLineFeed(e){let t=new fn(e),n=-1;for(;(n=t.text.indexOf(`\r
`))&gt;=0;)t.remove({location:n,length:1});for(;(n=t.text.indexOf("\r"))&gt;=0;){let l=t.attributesAt(n),u=Ps(`
`,l);t.replace({range:{location:n,length:1},string:u})}let{text:o,attributes:i,attribute_ranges:s,...a}=e;return{text:t.text,attributes:t.attributes,attribute_ranges:t.attribute_ranges,...a}}copy(e=new Map,t=()=&gt;Sr()){let n=this.toJSON(),{id:o,...i}=n,s=t(o),a=ca({id:s,...i});a.favorite=this.favorite,a.pinned=this.pinned,e.set(o,s);for(let l of this.children){let u=l.copy(e,t);e.set(l.id,u.id),a.addChild(u)}for(let l of this.children){let u=l.next||l.nextGroup;if(u){let d=e.get(l.id),c=e.get(u.id),p=a.getCard(d),h=a.getCard(c);p.connect(h,u===l.nextGroup)}}for(let l of this.children)l.isFolded&amp;&amp;l.isHead&amp;&amp;a.getCard(e.get(l.id)).fold(l.isFolded);return a}copyGroup({srcIdMap:e=new Map,overGroup:t=!0,idMapper:n=()=&gt;Sr()}){var s;let o=new Map,i=[];for(let a of t?this.iteratorOverGroup():this.iterator()){let l=a.copy(e,n);o.set(l.id,l),i.push(l),a.isFolded&amp;&amp;l.fold(!0)}for(let a of t?this.iteratorOverGroup():this.iterator()){let l=t?(s=a.next)!=null?s:a.nextGroup:a.next;if(l){let u=o.get(e.get(a.id)),d=o.get(e.get(l.id));u.connect(d,l===l.head())}}return i[0]}get isHead(){return!this.prev}get isTail(){return!this.next}head(){let e=this;for(;e.prev;)e=e.prev;return e}tail(){let e=this;for(;e.next;)e=e.next;return e}connection(){if(this.next)return{from:this.id,to:this.next.id,as_different_group:!1};if(this.nextGroup)return{from:this.id,to:this.nextGroup.id,as_different_group:!0}}indexOverGroup(){let e=0;for(let t of this.iteratorOverGroup()){if(t===this)return e;e++}return-1}memberAt(e){let t=0;for(let n of this.iteratorOverGroup())if(t++===e)return n}headGroup(){var t;let e=this;for(;e.hasPrevCardOrGroup;)e=(t=e.prev)!=null?t:e.prevGroup;return e}tailGroup(){var t;let e=this;for(;e.hasNextCardOrGroup;)e=(t=e.next)!=null?t:e._nextGroup;return e}forEach(e){let t=0;for(let n of this.iterator())e(n,t),t++}forEachOverGroup(e){let t=0;for(let n of this.iteratorOverGroup())e(n,t),t++}forEachDescendant(e){let t=[...this.children],n;for(;n=t.shift();)t.push(...n.children),e(n)}containsInGroup(e){for(let t of this.memberAndChildrenIterator())if(t.id===e.id)return!0;return!1}*iterator(){let e=this.head();for(yield e;e.next&amp;&amp;(e=e.next);)yield e}*lastSelfIterator(){for(let e of this.iterator())e!==this&amp;&amp;(yield e);yield this}*iteratorOverGroup(){var t;let e=this.headGroup();for(yield e;e.hasNextCardOrGroup&amp;&amp;(e=(t=e.next)!=null?t:e.nextGroup);)yield e}*toTailIterator(){let e=this;for(yield e;e=e.next;)yield e}*toTailIteratorOverGroup(){var t;let e=this;for(yield e;e=(t=e.next)!=null?t:e.nextGroup;)yield e}*fromTailIterator(){let e=this.tail();for(yield e;e.prev&amp;&amp;(e=e.prev);)yield e}*parentsIterator(){let e=this;for(;e=e.parent;)yield e}isDescendantOf(e){for(let t of this.parentsIterator())if(t.id===e)return!0;return!1}markAsModified(){this._lastModified=new Date}canBeConnectedFrom(e){if(e.pinned||this.pinned||e.parent!==this.parent)return!1;let t=e.tailGroup();for(;;){if(t.id===this.id)return!1;if(t.prev)t=t.prev;else if(t.prevGroup)t=t.prevGroup;else break}return!0}connect(e,t=!1){Ee(e.canBeConnectedFrom(this)),this.unsafeConnect(e,t)}safeConnect(e,t=!1){return e.canBeConnectedFrom(this)?(this.unsafeConnect(e,t),!0):!1}unsafeConnect(e,t=!1){var n,o;if((n=e.prev)==null||n.purgeNext(),(o=e.prevGroup)==null||o.purgeNext(),this.purgeNext(),t)this._nextGroup=e,e._prevGroup=this;else{this._next=e,e._prev=this;let i=this;for(;i.next&amp;&amp;(i=i.next);)i._isFolded=this.isFolded,i.markAsModified()}this.markAsModified()}purgeNext(){this.next?(this.next._prev=void 0,this._next=void 0):this._nextGroup&amp;&amp;(this._nextGroup._prevGroup=void 0,this._nextGroup=void 0),this.markAsModified()}fold(e){this.forEach(t=&gt;{t._isFolded=e,t.markAsModified()})}removeFromGroup(){let e=this,t=(n,o,i)=&gt;{n.unsafeConnect(o,i)};if(e.prev&amp;&amp;!e.next)e.nextGroup?t(e.prev,e.nextGroup,!0):e.prev.purgeNext();else if(!e.prev&amp;&amp;e.next)e.prevGroup?t(e.prevGroup,e.next,!0):e.purgeNext();else if(e.prev&amp;&amp;e.next)t(e.prev,e.next,!1);else if(!e.prevGroup&amp;&amp;e.nextGroup)e.purgeNext();else if(e.prevGroup&amp;&amp;!e.nextGroup)e.prevGroup.purgeNext();else if(e.prevGroup&amp;&amp;e.nextGroup){let{nextGroup:n,prevGroup:o}=e;e.purgeNext(),o.purgeNext(),t(o,n,!0)}}removeFromGroupAsGroup(){if(this.prevGroup&amp;&amp;this.tail().nextGroup){let e=this.prevGroup,t=this.tail().nextGroup;this.prevGroup.purgeNext(),this.tail().purgeNext(),e.connect(t,!0)}else this.prevGroup&amp;&amp;!this.tail().nextGroup?this.prevGroup.purgeNext():!this.prevGroup&amp;&amp;this.tail().nextGroup&amp;&amp;this.tail().purgeNext()}replaceContent(e){for(let t in e){let n=e[t];if(n===null)IK(this,t);else if(n!==void 0)k4(this,t,n);else throw new Error(`replacement value for "${t} is undefined."`)}if(Object.keys(e).some(t=&gt;t.startsWith("gadgets.title."))&amp;&amp;this.gadgets.title!==void 0&amp;&amp;this.gadgets.title.text.indexOf(`\r
`)&gt;=0){let t=this.removeInvalidLineFeed(this.gadgets.title);k4(this,"gadgets.title",t)}this.markAsModified()}addChild(e,t=-1){e.parent!==this&amp;&amp;(e.parent&amp;&amp;e.removeFromParent(),t&lt;0&amp;&amp;(t=this.children.length+t+1),e._parent=this,this._children.splice(t,0,e),this.markAsModified(),e.markAsModified())}addGroup(e){e.parent!==this&amp;&amp;(e.removeFromGroupAsGroup(),e.forEach(t=&gt;{t.removeFromParent(),t._parent=this,this._children.push(t),t.markAsModified()}),this.markAsModified())}removeChild(e){for(let t=0;t&lt;this._children.length;t++)if(this._children[t]===e){let n=this._children[t];n._parent=void 0,this._children.splice(t,1),this.markAsModified(),n.markAsModified();break}}removeFromParent(){this.parent&amp;&amp;this.parent.removeChild(this)}toJSON(){return TE({id:this.id,type:this.type,content:this.content,metadata:{position:{left:this.position.x,top:this.position.y},author:this.author,duration:this.duration,layout_size:this.size,unlimited_recording_time:this.unlimitedRecordingTime,playback_rate:this.metadata.playback_rate},gadgets:this.gadgets})}toV210JSON(){let{id:e,type:t,content:n,gadgets:o,duration:i}=this,s={id:this.author.id,name:this.author.name},a={left:this.position.x,top:this.position.y};return this instanceof jr||this instanceof wn?TE({id:e,metadata:{position:a,author:s,duration:i},type:"title",gadgets:{...o,title:{text:this.content.title,font_size:12,forecolor:"#FF000000",h_alignment:"left",v_alignment:"middle"}},content:{size:{...os},backcolor:"#FFFFFFFF"}}):TE({id:e,metadata:{position:a,author:s,duration:i},type:t,gadgets:{...o},content:{...n}})}*familyIterator(e={withoutSelf:!1,breadthFirst:!1}){let t=e.withoutSelf?[...this.children]:[this],n;for(;n=e.breadthFirst?t.shift():t.pop();)t.push(...n.children),yield n}*memberAndChildrenIterator(){for(let e of this.iterator())for(let t of e.familyIterator())yield t}*memberAndChildrenIteratorOverGroup(){for(let e of this.iteratorOverGroup())for(let t of e.familyIterator())yield t}isVisibleInCardTree(e){if(this===e)return!0;if(e&amp;&amp;!this.isDescendantOf(e.id))throw new Error("is not descendant of root");let t=o=&gt;{let i=o.parent;for(;i&amp;&amp;i!==e;){if(i.isFolded&amp;&amp;!i.isHead)return i;i=i.parent}},n=this;for(;n&amp;&amp;n!==e;){if(n.isFolded)return n.isHead?t(n)===void 0:!1;n=n.parent}return!0}isVisibleInGroup(){return!this.isFolded||this.isHead}foldHandleVisible(){return this.next&amp;&amp;!this.prev||!!this.prevGroup}dashedConnectorVisible(e){return this.isVisibleInCardTree(e)||this.isFolded&amp;&amp;this.isTail}connectorHandleVisible(){if(this.isFolded){let e=this.tail();return this.isHead&amp;&amp;!e.nextGroup&amp;&amp;!this.dashedConnectorPosition&amp;&amp;!e.dashedConnectorPosition}else return!this.dashedConnectorPosition&amp;&amp;!this.nextGroup&amp;&amp;!this.next}connections({withoutSelf:e}){let t=[];for(let n of this.familyIterator({withoutSelf:e})){let o=n.next||n.nextGroup;o&amp;&amp;t.push({from:n.id,to:o.id,as_different_group:o===n.nextGroup})}return t}groupStates(){return q2(this)}treeState(){return gk(this)}getCard(e){return Array.from(this.familyIterator()).find(t=&gt;t.id===e)}visibleNextCard(){return this.isFolded?this.nextGroup:this.next}*connectedGroupHeadCards(){let e=this.headGroup();for(yield e;e=e==null?void 0:e.tail().nextGroup;)yield e}isIncludedInGroup(e){for(let t of e.head().iterator())if(t===this||this.isDescendantOf(t.id))return!0;return!1}},ga=class extends Go{constructor(e){super("picture",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Yi=class extends Go{constructor(e){super("pdf",e)}get contentSize(){return this.content.page_size}get isThinkingTool(){return this.content.usage==="thinking_tool"}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},zn=class extends Go{constructor(e){super("video",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Rk=class extends Go{constructor(e){super("drawn",e)}get contentSize(){return this.content.size}contentAssetId(){}},Vo=class extends Go{constructor(e){super("web",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Qn=class extends Go{constructor(e){super("audio",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},md=class extends Go{constructor(e){super("map",e)}get contentSize(){return this.content.size}contentAssetId(){var e;return(e=this.content.asset)==null?void 0:e.remote_id}},Of=class extends Go{constructor(e){super("title",e)}get contentSize(){return this.content.size}contentAssetId(){}},jr=class extends Go{constructor(e){super("quiz",e)}get contentSize(){return this.content.size}contentAssetId(){}},wn=class extends Go{constructor(e){super("attendance",e)}get contentSize(){return this.content.size}contentAssetId(){}};function ca(r){switch(r.type){case"picture":return new ga(r);case"drawn":return new Rk(r);case"pdf":return new Yi(r);case"web":return new Vo(r);case"title":return new Of(r);case"video":return new zn(r);case"map":return new md(r);case"audio":return new Qn(r);case"quiz":return new jr(r);case"attendance":return new wn(r)}throw new Error("unexpected type")}async function V6({store:r,state:e,courseId:t,card:n,presenter:o,authorId:i,anonymous:s,presentedQuizId:a,presentedQuizPreset:l,presentedQuizSharingMode:u,presentedAttendanceId:d}){let c=33,p=he.get().strings;try{await Kp(r,n,c)}catch(h){r.reduce(we(c,null),me(c,{title:p.couldntShareScreen,...ot(h),okMessage:p.okay,onOk(){r.reduce(me(c,void 0))}}));return}try{let h,f=n.rootParent();f.document?h=f.document.id:h=await REe(r,t,n);let m=Ec({store:r,presenter:o,publisher:r.userInfo.user_id,clientId:r.deviceId,anonymous:s,fullscreen:{authorId:i,document:h,...e,presentedQuizId:a,presentedQuizPreset:l,presentedAttendanceId:d,presentedQuizSharingMode:u}});await YM({store:r,courseId:t,command:m,presenter:o})}catch(h){r.reduce(me(c,{title:p.couldntShareScreen,...ot(h),okMessage:"OK",onOk:()=&gt;r.reduce(me(c,void 0))}))}}async function qM({store:r,anonymous:e,answerTable:t}){let n=Xt(r);Ee(typeof n=="number");let o=zk(r,t),i=o.items.map(a=&gt;a.document),s=Uk({store:r,anonymous:e,documentDependency:i,body:o});await YM({store:r,courseId:n,command:s}).then(()=&gt;{r.reduce(mp(i))}).catch(a=&gt;{let l=he.get().strings;r.reduce(me(33,{title:l.couldntShareScreen,...ot(a),okMessage:"OK",onOk:()=&gt;r.reduce(me(33,void 0))}))})}async function REe(r,e,t){let n=he.get().strings;r.reduce(we(33,n.uploadingDocument));let o={id:r.userInfo.user_id,name:zt(r.userInfo)},i=await Pne(t,o),s={courseId:e,...i};try{return(await ie.lnsClient.uploadDocumentForScreenSharing(s)).id}catch(a){throw Je.catchError(a),a}finally{r.reduce(we(33,null))}}function YM({store:r,courseId:e,command:t,presenter:n}){let o=he.get().strings;return r.reduce(we(33,n?o.preparingStudentPresentation:o.preparingScreenSharing)),ie.lnsClient.startScreenSharing({courseId:e,command:t}).then(i=&gt;{let s={sessionId:i.id,courseId:e,publisher:r.userInfo.user_id,presenter:n,type:t.type,clientId:t.clientId,anonymous:t.anonymous===!0};if(j6(t)){let{document:l,authorId:u,presentedWebURL:d,presentedQuizId:c,presentedAttendanceId:p}=t.fullscreen;s.fullscreen={document:l,authorId:u,presentedWebURL:d,presentedQuizId:c,presentedAttendanceId:p}}let a=n?Z0(!0):JE(!0);r.reduce(Os(s),a,ho())}).catch(Je.handleError).finally(()=&gt;{r.reduce(we(33,null))})}async function Uf({store:r,sessionId:e,courseId:t,showDialog:n,forStudent:o}){let i=he.get().strings,s=o?i.stoppingStudentPresentation:i.stoppingScreenSharing;r.reduce(we(33,n?s:null));try{if(!e){let a=await ie.lnsClient.getScreenSharingState(t);(a==null?void 0:a.publisher)===r.userInfo.user_id&amp;&amp;(e=a.id)}e&amp;&amp;(await ie.lnsClient.stopScreenSharing(t,e),r.reduce(pp(t,void 0),Os(void 0),ho()))}catch(a){Ok(r)(a)}finally{r.reduce(we(33,null))}}async function kie(r,e,t){let n=he.get().strings;r.reduce(we(33,n.stoppingScreenSharing)),await ie.lnsClient.stopScreenSharing(e,t).then(()=&gt;Lk(r,e)).catch(Ok(r)).finally(()=&gt;{r.reduce(we(33,null))})}function zf({store:r,command:e,dialogMessage:t}){let n=r.screenSharingState;Ee(n!=null,"store.screenSharing must be set");let{courseId:o,sessionId:i}=n,{presenter:s}=e;return t&amp;&amp;r.reduce(we(33,t)),ie.lnsClient.updateScreenSharing(o,i,e).then(()=&gt;{let a=[we(33,null),Os(Wy(i,o,e))];e.publisher===r.userInfo.user_id&amp;&amp;a.push(Z0(s!=null)),r.reduce(...a)}).catch(async a=&gt;{throw r.reduce(we(33,null)),a}).catch(Je.handleError).catch(async a=&gt;{if(a instanceof sr&amp;&amp;a.status===404){let l=await ie.lnsClient.getScreenSharingState(o);(l==null?void 0:l.publisher)===r.userInfo.user_id?await YM({store:r,courseId:o,command:e,presenter:s}):r.reduce(Os(void 0),ho())}else throw a}).catch(Ok(r))}async function Pie(r,e,t){let n=he.get().strings,o={...t,fullscreen:{...t.fullscreen,presentedAttendanceId:void 0,presentedQuizId:void 0,presentedWebURL:void 0},presenter:void 0,device_id:r.deviceId};try{await YM({store:r,courseId:e,command:o,presenter:void 0}),r.reduce(Z0(!1))}catch(i){r.reduce(me(33,{title:n.couldntShareScreen,...ot(i),okMessage:"OK",onOk:()=&gt;r.reduce(me(33,void 0))}))}}function Lk(r,e,t){return ie.lnsClient.getScreenSharingState(e).then(n=&gt;{var l,u;if(!n){let d=(l=r.screenSharingActionNotification[e])==null?void 0:l.id,c={id:d!=null?d:"",action:"screen_sharing",type:"end"};r.reduce(pp(e,c));return}let o={action:"screen_sharing",...n};if(r.reduce(pp(e,o)),o.publisher!==r.userInfo.user_id)return;let i=Wy(o.id,e,o),s=as(o)&amp;&amp;(r.editor||((u=r.submissionAnswer)==null?void 0:u.id)===o.fullscreen.document),a=D1(o)&amp;&amp;r.submissionNumber!=null;t||!s&amp;&amp;!a?Uf({store:r,sessionId:o.id,courseId:e}):s?r.reduce(Os(i),JE(!0),Z0(o.presenter!=null)):a&amp;&amp;r.reduce(Os(i),JE(!0),Z0(!1),mp(o.comparison.items.sort((d,c)=&gt;d.order-c.order).map(d=&gt;d.document)))}).catch(Je.handleError).catch(n=&gt;{n instanceof sr||fe.error(n)})}function Aie(r,e,t,n){return ie.lnsClient.updateScreenSharingReadyStatus(e,t,n).catch(Ok(r))}function Ok(r){let e=he.get().strings;return t=&gt;{Je.catchError(t)||r.reduce(me(33,{title:e.screenSharingErrorOccurred,...ot(t),okMessage:e.reload,onOk:()=&gt;location.assign(location.href)}))}}async function Iie(r,e,t){await ie.lnsClient.keepScreenSharingAlive(e,t,15*60).catch(Ok(r))}async function Ox(r,e,t){var n;if(((n=r.screenSharingState)==null?void 0:n.fullscreen)&amp;&amp;e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=r.screenSharingState,u=Object.assign(e,{presentedWebURL:t!=null?t:null}),d=Object.assign(l,u),c=Ec({store:r,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await zf({store:r,command:c})}}async function Ux(r,e,t){var n;if(((n=r.screenSharingState)==null?void 0:n.fullscreen)&amp;&amp;e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=r.screenSharingState,u=Object.assign(e,{presentedQuizId:t!=null?t:null}),d=Object.assign(l,u),c=Ec({store:r,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await zf({store:r,command:c})}}async function gv(r,e,t){var n;if(((n=r.screenSharingState)==null?void 0:n.fullscreen)&amp;&amp;e){let{publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:l}=r.screenSharingState,u=Object.assign(e,{presentedAttendanceId:t!=null?t:null}),d=Object.assign(l,u),c=Ec({store:r,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:d});await zf({store:r,command:c})}}async function Gy(r){var d;let{store:e,editorRendererState:t,authorId:n,card:o,anonymous:i,presenter:s,presentedQuizSharingMode:a}=r,l=Xt(e);if(typeof l!="number"||!t)return;let u;if(o instanceof jr?u={presentedQuizId:o.content.quiz_id,presentedQuizPreset:o.content.preset,presentedQuizSharingMode:a||"normal"}:u={presentedAttendanceId:o.content.attendance_id},(d=e.screenSharingState)!=null&amp;&amp;d.fullscreen){let{publisher:c,presenter:p,clientId:h,anonymous:f,fullscreen:m}=e.screenSharingState,g=Object.assign(t,u),v=Object.assign(m,g),b=Ec({store:e,publisher:c,presenter:p,clientId:h,anonymous:f,fullscreen:v});await zf({store:e,command:b})}else await V6({store:e,state:t,courseId:l,authorId:n,presenter:s,card:o,anonymous:i,...u})}async function XM(r,e,t){let n=Promise.all([ie.lnsClient.getCourseTeacherStatues(e),ie.lnsClient.getCourseUserStatues(e),ie.lnsClient.getScreenSharingReadyStatus(e,t)]);await Ln(r,{fetchingId:nt.receiverStatus(e),promise:n,doneReducer:o=&gt;{var d,c,p,h;let i=xb([o[0],o[1]]),s=(c=(d=o[2])==null?void 0:d.ready)!=null?c:[],a=(h=(p=o[2])==null?void 0:p.notReady)!=null?h:[],l=[t_(e,i)],u=i.map(f=&gt;s.includes(f.id)?tS(f.id,!0):a.includes(f.id)?tS(f.id,!1):tS(f.id,void 0));return l.push(...u),l}})}var K6=class{constructor(){this.columns=0;this.rows=0}evaluate(e,t,n){return this.score===void 0||this.score&lt;n?(this.columns=e,this.rows=t,this.score=n,!0):!1}gridSize(){return{cols:this.columns,rows:this.rows}}};function LEe(r,e){return r.width&lt;r.height?Math.max(1,Math.floor(Math.sqrt(e))):Math.max(1,Math.ceil(Math.sqrt(e)))}function*OEe(r,e){let t=LEe(r,e);if(r.width&lt;r.height){let n=t;for(;;){let o=n;if(o&lt;1)break;n-=1,yield o}}else{let n=t;for(;;){let o=n;if(o&gt;e)break;n+=1,yield o}}}function UEe(r,e,t){let n=Math.max(1,r.width/e),o=Math.max(1,r.height/t),i=Math.min(n,o),s=i*i,a=r.height/n,l=r.width/o;return s-(Math.abs(t-a)+Math.abs(e-l))}function zEe(r){return Math.abs(r.width)&lt;Number.EPSILON||Math.abs(r.height)&lt;Number.EPSILON?1:r.width/r.height}function QM(r,e,t){if(t&lt;=0)return{cols:1,rows:1};let n=zEe(e),o=$e(r.width,r.height*n),i=new K6;for(let s of OEe(o,t)){let a=Math.max(1,Math.ceil(t/s)),l=UEe(o,s,a);i.evaluate(s,a,l)}return i.gridSize()}function q6(r,e){return QM(r,kt,e)}function Eie(r,e){let{cols:t,rows:n}=QM(r,kt,e.length),o=Array.from({length:n*t-e.length}).map(()=&gt;null);return[...e,...o]}function j6(r){return(r==null?void 0:r.type)==="fullscreen"}var JM=class{constructor(e,t){this.storeProvider=t;this.buffer=[];this.scheduler=new uy;this.body=e}pushPoint(e){this.buffer.push(...e),this.publish()}update(e){this.body={...this.body,...e},this.publish()}publish(){let e=this.body;this.scheduler.cancelAllPendingTasks(),this.scheduler.queue(()=&gt;{let t=this.storeProvider(),{screenSharingState:n}=t;if(!n)return fe.warn("FullScreenSharingDistributor.distribute called without screenSharingState"),Promise.resolve();let{publisher:o,presenter:i,clientId:s,anonymous:a}=n,l=Ec({store:t,publisher:o,presenter:i,clientId:s,anonymous:a,fullscreen:e}),u=this.buffer;return this.buffer=[],u.length&gt;0&amp;&amp;(l.pointer=u),zf({store:t,command:l}).catch(fe.error)})}},ZM=class{constructor(e){this.storeProvider=e;this.scheduler=new uy;this.answerTable=[];this.buffer=[]}pushPoint(e){this.buffer.push(...e),this.publish()}update(e,t=[]){this.answerTable=e,this.buffer.push(...t),this.publish()}publish(){this.scheduler.cancelAllPendingTasks(),this.scheduler.queue(()=&gt;{let e=this.storeProvider(),{screenSharingState:t}=e;if(!t)return fe.warn("ComparisonSharingDistributor.distribute called without screenSharingState"),Promise.resolve();let n=this.buffer;this.buffer=[];let o=zk(e,this.answerTable),{anonymous:i}=t,s=o.items.map(l=&gt;l.document),a=Uk({store:e,anonymous:i,body:o,documentDependency:s});return n.length&gt;0&amp;&amp;(a.pointer=n),zf({store:e,command:a}).catch(fe.error)})}};function _ie({store:r,type:e,presenter:t,publisher:n,clientId:o,anonymous:i}){return{type:e,clientId:o,publisher:n,presenter:t,ready:!0,device_id:r.deviceId,anonymous:i,screenWidth:r.screen.width,screenHeight:r.screen.height}}function Ec({store:r,presenter:e,publisher:t,clientId:n,anonymous:o,fullscreen:i}){return{..._ie({store:r,type:"fullscreen",presenter:e,publisher:t,clientId:n,anonymous:o}),fullscreen:i,documentDependency:[]}}function Uk({store:r,anonymous:e,body:t,documentDependency:n}){let o=r.userInfo.user_id,i=r.deviceId;return{..._ie({store:r,type:"comparison",presenter:void 0,publisher:o,clientId:i,anonymous:e}),comparison:t,documentDependency:n}}function Wy(r,e,t){let{presenter:n,publisher:o,clientId:i,anonymous:s}=t;if(j6(t)){let{fullscreen:a}=t,{document:l,authorId:u,presentedWebURL:d,presentedQuizId:c,presentedAttendanceId:p}=a;return{sessionId:r,courseId:e,type:"fullscreen",presenter:n,publisher:o,clientId:i,anonymous:s===!0,fullscreen:{document:l,authorId:u,presentedWebURL:d,presentedQuizId:c,presentedAttendanceId:p}}}else return{sessionId:r,courseId:e,type:"comparison",presenter:n,publisher:o,clientId:i,anonymous:s===!0}}function zk(r,e){let t=HEe(r,e),{cols:n,rows:o}=QM(r.screen,kt,e.length);return{columnCount:n,rowCount:o,height:r.screen.height,scrollOffset:0,items:t}}function Fie(r,e,t,n){let o,i=()=&gt;{document.hasFocus()&amp;&amp;ie.lnsClient.keepScreenSharingAlive(e,t,n).catch(s=&gt;{Je.catchError(s)&amp;&amp;Y6(o)})};return o=window.setInterval(i,15*1e3),i(),o}function Y6(r){window.clearInterval(r)}var Hk=class{constructor(e,t){this.targetCardId=e;this.totalNumber=t;this.loadedCardIds=new Set}isTargetCard(e){return this.targetCardId===e.id}get count(){return this.loadedCardIds.size}addLoadedList(e){return e.id===this.targetCardId||e.isDescendantOf(this.targetCardId)?(this.loadedCardIds.add(e.id),!0):!1}isReady(){return this.count===this.totalNumber}},X6=(r,e,t)=&gt;{let n=!1,o=!1,i=new Gk(r,e,t);return{notify:()=&gt;{i.notifyReadyState(n&amp;&amp;o)},setCardLoaded:u=&gt;{n=u},setAvLoaded:u=&gt;{o=u}}},Gk=class{constructor(e,t,n){this.store=e;this.sessionId=t;this.courseId=n;this.nextReadyState=!1;this.updating=!1}notifyReadyState(e){this.nextReadyState=e,!(this.updating||this.prevReadyState===e)&amp;&amp;(this.updating=!0,Aie(this.store,this.courseId,this.sessionId,e).then(()=&gt;{this.updating=!1,this.prevReadyState=e,this.nextReadyState!==e&amp;&amp;this.notifyReadyState(this.nextReadyState)}))}};function HEe(r,e){var n;let t=[];for(let o=0;o&lt;e.length;o++){let i=e[o];if(i==null)continue;let s=i.id;t.push({document:s,page:(n=r.submissionAnswerPageIndexStates[s])!=null?n:0,authorId:i.author_id,order:o})}return t}var eN=r=&gt;{let{canvasSize:e,cardSize:t,scale:n,center:o}=r,i=Xr(e,t),s=Nt(t,i),{x:a,y:l}=o,u=e.width*.5,d=e.height*.5;return 1&lt;n&amp;&amp;(u-=(a-.5)*s.width*n,d-=(l-.5)*s.height*n),new ft(n,0,0,n,u,d)};var Q6=oe(Wr());function _c(r,e=!1){let t=he.get().strings;if(e){let n=r.groupMemberCount();return(0,Q6.sprintf)(t.confirmMultiCardGroupDelete,n)}else{let n=r.descendantsCount();return n&gt;0?(0,Q6.sprintf)(t.confirmMultiChildCardDelete,n):t.confirmCardDelete}}var vv=class{constructor(){this.prevFps=0;this._fps=0;this._fis=0;this._et=0;this.elapsedTime=0,this.prev=this.startTime=new Date().getTime()/1e3,this.frameCount=0,this.deltaTime=0}get fps(){return this.prevFps}update(){let e=new Date().getTime()/1e3;return this.frameCount++,this.deltaTime=e-this.prev,this.elapsedTime+=this.deltaTime,this._et+=this.deltaTime,this._fps++,this.prev=e,this._et&gt;=1&amp;&amp;(this.prevFps=this._fps,this._fps=this._fis,this._fps=0,this._et=0),{elapsedTime:this.elapsedTime,deltaTime:this.deltaTime}}};var Mie=60,rN=class{constructor(){this.rows=[];this.idCellIndexMap=new Map;this.needReturn=(e,t)=&gt;!!(e.column===tN-1||t.next||t.nextGroup||t.isFolded)}getLastCell(){for(let e=this.rows.length-1;e&gt;=0;e--){let t=this.rows[e].getLastCell();if(t)return t}}add(e,t,n){let o=this.getLastCell();if(!o){this.rows.length===0&amp;&amp;(this.startPosition={x:t.x,y:t.y},this.rows.push(new nN),this.rows[0].add(0,e,t),this.idCellIndexMap.set(e,{row:0,column:0}));return}let i=this.idCellIndexMap.get(o.id);if(!i)return;let s=n.getCardSafe(o.id);if(!!s)if(this.needReturn(i,s)){if(!this.rows[i.row].getHighestCell())return;this.rows.push(new nN),this.rows[i.row+1].add(0,e,t),this.idCellIndexMap.set(e,{row:i.row+1,column:0})}else this.rows[i.row].add(i.column+1,e,t),this.idCellIndexMap.set(e,{row:i.row,column:i.column+1})}getNextCardPosition(e,t){if(!this.startPosition)return;let n=this.getLastCell();if(!n)return;let o=this.idCellIndexMap.get(n.id);if(!o)return;let i=t.getCardSafe(n.id);if(!i)return;let s={x:n.bounds.x,y:n.bounds.y};if(this.needReturn(o,i)){let a=this.rows[o.row].getHighestCell();if(!a)return;s.x=this.startPosition.x+e.width/2,s.y+=a.bounds.height+Mie+e.height/2}else s.x+=n.bounds.width+Mie+e.width/2,s.y=n.bounds.y+e.height/2;return s}remove(e){let t=this.idCellIndexMap.get(e);if(!t)return;let n=this.rows[t.row];!n||(n.remove(e),this.idCellIndexMap.delete(e),n.isEmpty()&amp;&amp;t.row===this.rows.length-1&amp;&amp;this.rows.splice(t.row,1))}clear(){this.rows=[],this.idCellIndexMap=new Map}clearIfInvisible(e,t){this.rows.some(n=&gt;n.isCardsVisible(e,t))||this.clear()}},Jn=new rN,tN=4,nN=class{constructor(){this.cells=new Array(tN);this.cells.fill(null)}isEmpty(){return!this.cells.some(e=&gt;e!==null)}getLastCell(){for(let e=tN-1;e&gt;=0;e--){let t=this.cells[e];if(t)return t}}getHighestCell(){let e=0,t;for(let n of this.cells)n&amp;&amp;n.bounds.height&gt;e&amp;&amp;(e=n.bounds.height,t=n);return t}add(e,t,n){e&gt;=0&amp;&amp;e&lt;tN&amp;&amp;!this.cells[e]&amp;&amp;(this.cells[e]={id:t,bounds:n})}remove(e){let t=this.cells.findIndex(n=&gt;(n==null?void 0:n.id)===e);t&lt;0||(this.cells[t]=null)}isCardsVisible(e,t){for(let n of this.cells){if(!n)continue;let o=t.getCardSafe(n.id);if(!!o&amp;&amp;!(o.isFolded&amp;&amp;o.id!==o.headGroup().id)&amp;&amp;Oi(e,n.bounds))return!0}return!1}},GEe=()=&gt;{let r=new Fn(()=&gt;new rN);return{getNextCardPosition:(o,i)=&gt;{let s=mk(i.renderingOrderIterator());if(!s)return De(0,0);let a=r.get(i.id).getNextCardPosition(o,i);if(!a){let l=s.x+s.width,u=s.y+o.height/2;return De(l+o.width/2+uc.x,u)}return a},addCardPosition:(o,i)=&gt;{var s;for(let a of o.connectedGroupHeadCards()){let l=(s=i.getCardSafe(a.id))==null?void 0:s.bounds;l&amp;&amp;r.get(i.id).add(a.id,l,i)}},clearLayout:o=&gt;{r.delete(o)}}},$y=GEe();function oN({fineCanvas:r,roughCanvas:e}){let t=qe(),n=qe(),o=new ft,i=new ft,s=!1,a=!1,l=1;function u(h){l=h}function d(){s=!0}function c(){a=!0}function p({ctx:h,mtx:f,delegate:m,roughScaleTransform:g,clip:v}){let b=h.canvas;if(b.width&lt;=0||b.height&lt;=0)return;h.save();let C=!1;if(l&gt;0&amp;&amp;(l-=1,l&lt;1&amp;&amp;(a=!0,C=!0)),!a){h.restore();return}a=!1;let x=f.inverted(),y=r.getContext("2d"),S=e.getContext("2d");if(!y||!S)throw new uo;let T=qe(0,0,b.width,b.height),w=x.applied(T),k;if(C)r.width=b.width,r.height=b.height,m({ctx:y,mtx:f,rough:!1}),n=qe(w),o=f.clone();else{let I=f.a/o.a,E=f.e-o.e*I,O=f.f-o.f*I;k=new ft(I,0,0,I,E,O)}h.clearRect(0,0,b.width,b.height);let A=o.a&lt;f.a/g.a;if(A||w.x&lt;n.x||w.y&lt;n.y||n.x+n.width&lt;w.x+w.width||n.y+n.height&lt;w.y+w.height){let I=!s&amp;&amp;nu(t,w);s=!1;let E;if(I){let O=f.a/i.a;if(O&lt;=g.a){let Q=f.e-i.e*O,j=f.f-i.f*O;E=g.clone().prepend(O,0,0,O,Q,j)}else I=!1}if(!I){let O=f.clone().prependMatrix(g.inverted());e.width=b.width,e.height=b.height,m({ctx:S,mtx:O,rough:!0,clip:v}),t=O.inverted().applied(T),i=f.clone(),E=g.clone()}if(E){if(h.save(),h.transform(E.a,0,0,E.d,E.e,E.f),h.drawImage(e,0,0),h.restore(),A){h.restore();return}let O=qe(n.x*f.a+f.e,n.y*f.d+f.f,n.width*f.a,n.height*f.d);h.clearRect(O.x,O.y,O.width,O.height)}}k&amp;&amp;h.transform(k.a,0,0,k.d,k.e,k.f),h.drawImage(r,0,0),h.restore()}return{render:p,setFineRedrawCountDown:u,needsRoughRedraw(){d()},needsDisplay(){c()}}}var iN=class{constructor(e,t){this.layers=new Fn(()=&gt;fr.create());this.zOrder=[];this._width=0;this._height=0;for(let n of e)this.layers.get(n);this.zOrder=e,t&amp;&amp;(this.width=t.width,this.height=t.height)}get width(){return this._width}set width(e){this._width!==e&amp;&amp;(this._width=e,this.forEach(t=&gt;{t.width=e}))}get height(){return this._height}set height(e){this._height!==e&amp;&amp;(this._height=e,this.forEach(t=&gt;{t.height=e}))}forEach(e){for(let t of this.zOrder)e(this.layers.get(t))}getLayer(e){return this.layers.get(e)}composite(e,t,n){e.save();for(let o of this.layerIterator())e.drawImage(o,t,n);e.restore()}*layerIterator(){for(let e of this.zOrder)yield this.layers.get(e)}};function Nie(r,e){return new Wk(r).toRenderNode(e)}var Wk=class{constructor(e,t){this.node=e;this.parent=t}get layer(){return this.node.layer==="inherit"?(Ee(this.parent!=null,"root node must not be inherit layer"),this.parent.layer):this.node.layer}toRenderNode(e){let{children:t,layer:n,...o}=this.node,i=t.map(s=&gt;new Wk(s,this).toRenderNode(e));return this.layer===e?{...o,layer:e,children:i}:{type:"container",children:i,globalMtx:o.globalMtx,layer:e,layout:{},localMtx:o.localMtx,styles:{},props:{},visible:!0}}};var sN=class{constructor(){this.layeredCanvas=new iN(["static","dynamic","hud"])}paint({mtx:e,state:t,node:n}){let o=["static","dynamic","hud"],{width:i,height:s}=t.canvas;this.layeredCanvas.width=i,this.layeredCanvas.height=s;for(let a of o){let u=this.layeredCanvas.getLayer(a).getContext2dForce();u.save(),u.clearRect(0,0,i,s),u.transform(e.a,e.b,e.c,e.d,e.e,e.f);let d=Nie(n,a);Rx(u,d),u.restore()}}composite(e){this.layeredCanvas.composite(e,0,0)}};function aN(r){let{nextHover:e,root:t,pivot:n,shrinkManager:o,longHoverDetector:i,desktopScale:s,onHoverChanged:a}=r;!e||e.card===t||e.scale&gt;=1?(i.clear(),o.emphasize(!!e&amp;&amp;e.card!==t),a(e==null?void 0:e.card),o.cancelShrink(n)):o.scale===e.scale?(o.unsetTranslucentEffect(),o.updateShrinkPivot(n)):o.scale&gt;e.scale?(o.emphasize(!0),o.setTranslucentEffect(),i.hover({card:e.card,location:n,touchSlop:5*window.devicePixelRatio/s,onHoverCommitted:l=&gt;{a(e.card),o.shrink({scale:e.scale,pivot:l})}}),o.updateShrinkPivot(n)):(a(e.card),o.relieveShrink({scale:e.scale,pivot:n}))}var zx=class{constructor(){this.currentScale=1;this.getCardRenderer=e=&gt;Kt(e,fo)}get scale(){return this.currentScale}heldUp(e){let{card:t,grouped:n}=e;this.held={card:t,grouped:n},this.currentScale=1}emphasize(e){if(!!this.held)if(this.held.grouped)for(let t of this.held.card.iterator())this.getCardRenderer(t).setEmphasizeEffect(e);else this.getCardRenderer(this.held.card).setEmphasizeEffect(e)}release(){this.removeAdoptionEffect(),this.emphasize(!1),this.held=void 0,this.currentScale=1}cancelShrink(e){this.held&amp;&amp;this.cancelAnimation({...this.held,pivot:e}),this.currentScale=1}shrink(e){if(!this.held)return;let{scale:t,pivot:n}=e;this.scale&gt;=1?this.setScaleShrinkAnimation({...this.held,scale:t,pivot:n}):this.updateScaleChangeAnimation({...this.held,scale:t,pivot:n}),this.currentScale=t}updateShrinkPivot(e){!this.held||this.updateScaleChangeAnimation({...this.held,scale:this.scale,pivot:e})}relieveShrink(e){let{scale:t,pivot:n}=e;!this.held||this.scale&gt;=1||this.scale&gt;=t||(this.updateScaleChangeAnimation({...this.held,scale:t,pivot:n}),this.currentScale=t)}setTranslucentEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).setTranslucentEffectByAdoption();else this.getCardRenderer(this.held.card).setTranslucentEffectByAdoption()}unsetTranslucentEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).unsetTranslucentEffect();else this.getCardRenderer(this.held.card).unsetTranslucentEffect()}cancelAnimation(e){let{card:t,grouped:n,pivot:o}=e;if(n)for(let i of t.iterator())this.getCardRenderer(i).setAdoptionCancelAnimation(o);else this.getCardRenderer(t).setAdoptionCancelAnimation(o)}removeAdoptionEffect(){if(!!this.held)if(this.held.grouped)for(let e of this.held.card.iterator())this.getCardRenderer(e).removeAdoptionEffect();else this.getCardRenderer(this.held.card).removeAdoptionEffect()}setScaleShrinkAnimation(e){let{card:t,grouped:n,scale:o,pivot:i}=e;if(n)for(let s of t.iterator())this.getCardRenderer(s).setScaleShrinkAnimationByAdoption(o,i);else this.getCardRenderer(t).setScaleShrinkAnimationByAdoption(o,i)}updateScaleChangeAnimation(e){let{card:t,grouped:n,pivot:o,scale:i}=e;if(n)for(let s of t.iterator()){let a=this.getCardRenderer(s);a.hasScaleShrinkAnimation()?a.setScaleChangeAnimation(i,o):a.hasScaleChangeAnimation()&amp;&amp;a.updatePivotForScaleChangeAnimation(i,o)}else{let s=this.getCardRenderer(t);s.hasScaleShrinkAnimation()?s.setScaleChangeAnimation(i,o):s.hasScaleChangeAnimation()&amp;&amp;s.updatePivotForScaleChangeAnimation(i,o)}}};var Hx=class{constructor(e){this.durationMs=e;this.hoverTimeout=Do()}clear(){this.timerLocation=void 0,this.lastLocation=void 0,this.hoverCard=void 0,this.hoverTimeout(()=&gt;{},0)}startTimer(e,t,n){this.timerLocation=t,this.hoverCard=e,this.lastLocation=t,this.hoverTimeout(()=&gt;this.lastLocation&amp;&amp;n(this.lastLocation),this.durationMs)}hover(e){var s;let{card:t,location:n,touchSlop:o,onHoverCommitted:i}=e;if(((s=this.hoverCard)==null?void 0:s.id)===t.id){let a=qe(n.x-o,n.y-o,o*2,o*2);if(this.timerLocation&amp;&amp;Pn(a,this.timerLocation)){this.lastLocation=n;return}}this.clear(),this.startTimer(t,n,i)}};function lN(r,e){var o;let t=r,n;(o=e(r[0].cardId))!=null&amp;&amp;o.isFolded&amp;&amp;(t=[r[0]]);for(let{cardId:i,translation:s}of t){let a=e(i);if(!a||!Rh(s.to))continue;let l=s.to,u={x:l.x-a.size.width/2,y:l.y-a.size.height/2,width:a.size.width,height:a.size.height};n?Rs(n,u):n=u}return n}function uN(r){let{viewport:e,inflate:t}=r,n=new Sn(Rs(t,e)),o=n.width/e.width,i=n.height/e.height;return o&gt;i?(n.height=e.height*o,n.y-=(n.bottom-t.bottom)/2):(n.width=e.width*i,n.x-=(n.right-t.right)/2),n}function dN(r,e,t){let n=e.height-r.height,o=e.width-r.width;if(!ru(n,0)&amp;&amp;!ru(o,0))return De(t.width*(r.x-e.x)/o,t.height*(r.y-e.y)/n)}var Bie=r=&gt;{let e=[],t,n=0,o=d=&gt;{e.push(d)},i=d=&gt;{d.forEach(c=&gt;{r(c).removeHighlightAnimation()})},s=d=&gt;{i(d);let c=d.map(p=&gt;p.id);e=e.filter(p=&gt;!c.includes(p.id)),t&amp;&amp;e.length===0&amp;&amp;window.clearInterval(t)},a=()=&gt;{i(e),e=[],t!==void 0&amp;&amp;window.clearInterval(t)},l=(d,c)=&gt;{n++,d.forEach(p=&gt;{r(p).setHighlightAnimation(c)})};return{add:o,remove:s,clear:a,startInterval:(d,c,p)=&gt;{l(e,d),t=window.setInterval(()=&gt;{if(n&gt;=p){a();return}l(e,d)},c*1e3)}}};var $k=oe(vm()),Gx=1,cN=30,J6={small:{width:240,height:180},medium:{width:480,height:360},high:{width:1024,height:768}},Vk=class{constructor(e){this._scrollX=0;this._scrollY=0;this._zoom=1;this.mtx=new ft;this.scroller=new Fy;this.sentCardHighlighter=Bie(e=&gt;this.getCardRenderer(e));this.zoomCommitter=Do();this.zoomCommitted=()=&gt;{let e=this.viewportRect();for(let t of this.callback.renderingOrderIterator())Oi(e,t.bounds)&amp;&amp;this.getCardRenderer(t).invalidateMipmap(this.zoom)};this.handleWheel=e=&gt;{e.stopPropagation(),e.preventDefault(),this.sar.setFineRedrawCountDown(cN),this.sar.needsDisplay(),this.zoomingAnimation&amp;&amp;(this.zoomingAnimation=void 0),this.scroller.abortAnimation(),this.applyTransform();let t=e.ctrlKey?this.store.userPreference.trackpadPinchZoomMultiplier:this.store.userPreference.mouseWheelMultiplier,{a:n,e:o,f:i}=this.mtx.prependMatrix(hM({ev:e,zoom:this.zoom,minZoom:this.minZoom(),maxZoom:this.maxZoom(),invert:this.store.userPreference.invertMouseWheel,multiplier:t}));this.zoom=n,this.scrollX=o,this.scrollY=i,this.prevZoomPivot={x:e.x*window.devicePixelRatio,y:e.y*window.devicePixelRatio},this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(Ar(!1),hn(void 0))};this.handleDoubleMove=(e,t)=&gt;{var l;if(this.zoomingAnimation)return;this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(cN);let{a:n,e:o,f:i}=this.mtx.prependMatrix(pM({ev1:e,ev2:t,minZoom:.01,maxZoom:this.maxZoom(),zoom:this.zoom})),s=De(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2),a=Jo(s,(l=this.prevZoomPivot)!=null?l:s);this.prevZoomPivot=s,this.zoom=n,this.setScroll({x:o,y:i,allowOver:!0,velX:a.x,velY:a.y}),this.zoomCommitter(this.zoomCommitted,250),this.store.reduce(Ar(!1),hn(void 0))};this.handleFreeMove=(e,t)=&gt;{var o,i;let n=t?"grabbing":"grab";for(let s of this.callback.bubblingOrderIterator()){let a=this.getCardRenderer(s),l=t?a.handlingComponent:a.getObjectUnderPoint({ev:e,mtx:this.applyTransform(),focused:s.id===((i=(o=this.store.desktop)==null?void 0:o.focusingCard)==null?void 0:i.id),root:void 0,toolVisible:!0,zoom:void 0});if(l){t&amp;&amp;(l==="bbLeftTop"||!ex(l))?n="grabbing":n=Bk(s.pinned,on(this.store),l);break}}this.canvas.style.cursor=n};this.singleHandler=(e,t)=&gt;{Cx(t)?this.handleRightSingle(e,t):this.handleLeftSingle(e,t)};this.handleLongPress=e=&gt;{let t=this.applyTransform();for(let i of this.callback.bubblingOrderIterator())if(this.getCardRenderer(i).predictPointerEventResponse({ev:e,mtx:t,root:void 0,toolVisible:!0,zoom:void 0})===1)return this.store.reduce(Hi({id:i.id,pinned:i.pinned,favorite:i.favorite,canPin:i.canPin(),canRotate:i.canRotate(),canAlign:i.canAlign(),bounds:this.boundingBoxRectToScreen(i.bounds)}),hn(void 0),Ar(!0)),!0;let n=window.devicePixelRatio,o=De(e.x/n,e.y/n);return this.store.reduce(Ar(!1),hn(o)),!1};this.updater=new vv;this.closed=!1;this.notified=!1;var t;this.callback=e.callback,this.store=e.store,this.cardRendererCallback=e.cardRendererCallback,this.shrinkManager=new zx,this.longHoverDetector=new Hx(500),this.canvas=e.canvas,this.roughCanvas=fr.create(e.canvas),this.fineCanvas=fr.create(e.canvas),this.sar=oN({fineCanvas:this.fineCanvas,roughCanvas:this.roughCanvas}),this.layeredRenderer=new sN,this._bounds=qe(),this.resetNoteBoundsAndViewPoint();for(let n of this.callback.renderingOrderIterator())this.getCardRenderer(n).invalidateMipmap(this.zoom);this.startSentCardsHighlight(),this.canvas.addEventListener("wheel",this.handleWheel),KK(),this.remotePointerManager=e.remotePointerManager,this.pointerSubscription=(t=this.remotePointerManager)==null?void 0:t.subscribe(()=&gt;{this.store.editor||this.sar.setFineRedrawCountDown(1)})}get scrollX(){return this._scrollX}set scrollX(e){!Li(e)&amp;&amp;Li(this._scrollX)&amp;&amp;$k.default.notify(new Error("NR: invalid scrollX input"),t=&gt;{t.addMetadata("arguments",{before:`${this._scrollX}`,after:`${e}`})}),this._scrollX=e}get scrollY(){return this._scrollY}set scrollY(e){!Li(e)&amp;&amp;Li(this._scrollY)&amp;&amp;$k.default.notify(new Error("NR: invalid scrollY input"),t=&gt;{t.addMetadata("arguments",{before:`${this._scrollY}`,after:`${e}`})}),this._scrollY=e}get zoom(){return this._zoom}set zoom(e){!Li(e)&amp;&amp;Li(this._zoom)&amp;&amp;$k.default.notify(new Error("NR: invalid zoom input"),t=&gt;{t.addMetadata("arguments",{before:`${this._zoom}`,after:`${e}`})}),this._zoom=e}getZoom(){return this._zoom}getTransform(){return this.mtx.clone()}setBounds(e){let{x:t,y:n,width:o,height:i}=e;o&lt;this.canvas.width&amp;&amp;(t-=(this.canvas.width-o)/2,o=this.canvas.width),i&lt;this.canvas.height&amp;&amp;(n-=(this.canvas.height-i)/2,i=this.canvas.height),this._bounds={x:t,y:n,width:o,height:i}}get bounds(){return this._bounds}resetNoteBoundsAndViewPoint(){let e=mk(this.callback.renderingOrderIterator())||qe(0,0,this.canvas.width,this.canvas.height);this.setBounds(e),this.mtx=yU({bounds:e,canvas:this.canvas,margins:An(50)}),this.zoom=this.mtx.a,this.scrollX=this.mtx.e,this.scrollY=this.mtx.f;for(let t of this.callback.renderingOrderIterator())this.getCardRenderer(t).invalidateMipmap(this.zoom)}getCardRenderer(e){return Kt(e,this.cardRendererCallback)}async startSentCardsHighlight(){let e=this.store.userInfo.user_id,t=this.store.desktop.noteId,n=await ie.idb.sentCards.load(e,t).catch(o=&gt;(fe.log(o),[]));n.length!==0&amp;&amp;(n.forEach(o=&gt;{let i=this.callback.hasCard(o)&amp;&amp;this.callback.getCard(o);i&amp;&amp;this.sentCardHighlighter.add(i)}),ie.idb.sentCards.deleteEntry(e,t).catch(fe.error),this.sentCardHighlighter.startInterval(1,3,5))}screenToNote(e,t=!1){let n=this.applyTransform().inverted(),o=t?1:window.devicePixelRatio;return n.cross(e.x*o,e.y*o)}maxZoom(){return Um(Nt(this.canvas,window.devicePixelRatio))/Um(kt)}minZoom(){return Um(this.canvas)/Um(this.bounds)/2}handleLeftSingle(e,t){var o,i,s,a,l;if(this.sar.needsDisplay(),e==="down"?this.scroller.forceFinished(!0):e==="up"&amp;&amp;this.sar.setFineRedrawCountDown(cN),(o=this.store.desktop)!=null&amp;&amp;o.positionPopoverOpen){let u=Mf(t),d=oi(t);(e==="move"&amp;&amp;u&gt;5||e==="up"&amp;&amp;d)&amp;&amp;this.store.reduce(hn(void 0))}let n=this.applyTransform();for(let u of this.callback.bubblingOrderIterator()){let d=this.getCardRenderer(u);if(e==="down"){let c=d.onDown({ev:t,mtx:n,focused:u.id===((s=(i=this.store.desktop)==null?void 0:i.focusingCard)==null?void 0:s.id),root:void 0,toolVisible:!0,zoom:void 0});if(c){if(this.sar.setFineRedrawCountDown(1),c==="card"||c==="foldHandle"||c==="bbLeftTop"){let p=(a=d.moveCardTarget)==null?void 0:a.card;p&amp;&amp;(this.cardRendererCallback.onHoverCard(p.parent),this.shrinkManager.heldUp({card:p,grouped:c==="foldHandle"||u.isFolded}))}return}}else if(e==="move"){let c=d.moveCardTarget,p=d.onMove(t,n);if(p){let h=B4(t);(p==="card"||p==="foldHandle"||p==="bbLeftTop")&amp;&amp;c&amp;&amp;(this.publishFixedUIHitIfNeeded({card:c.card,up:!1,grouped:p==="foldHandle"||u.isFolded,originState:c.originState,hit:h}),Jn.remove(u.id)),this.sar.setFineRedrawCountDown(Gx),this.sar.needsRoughRedraw();let{heldCard:f}=this.store.desktop,m=f&amp;&amp;this.callback.getCard(f.head);if(m){let g=this.screenToNote(t,!0),v=n.a,b;h||(b=$M({cardHolder:this.callback,card:m,desktopScale:v,forHitTest:!0,pivot:g,withGroup:p==="foldHandle"})),aN({nextHover:b,pivot:g,desktopScale:v,shrinkManager:this.shrinkManager,longHoverDetector:this.longHoverDetector,onHoverChanged:this.cardRendererCallback.onHoverCard}),this.sentCardHighlighter.remove([...m.iterator()])}return}}else if(e==="up"){let c=d.moveCardTarget,p=(l=this.store.desktop)==null?void 0:l.hoverCardId,h=d.onUp({ev:t,mtx:n});this.sar.setFineRedrawCountDown(Gx);let f=oi(t);if(h){if((h==="card"||h==="foldHandle"||h==="bbLeftTop")&amp;&amp;this.bringCardTreeToFront(u,u.isFolded||h==="foldHandle"),c&amp;&amp;!f){let m=B4(t);if(h==="card"||h==="bbLeftTop"){let g=n.inverted().cross(t.x,t.y);m||this.insertConnectionIfNeeded({ev:t,mtx:n,card:c.card}),this.publishFixedUIHitIfNeeded({card:c.card,up:!0,grouped:u.isFolded,originState:c.originState,hit:m}),m||this.rebuildTreeStateIfNeeded({card:c.card,hoverCardId:p,pointer:g,grouped:c.card.isFolded}),this.longHoverDetector.clear(),this.shrinkManager.release()}else if(h==="foldHandle"){let g=n.inverted().cross(t.x,t.y);this.publishFixedUIHitIfNeeded({card:c.card,up:!0,grouped:!0,originState:c.originState,hit:m}),m||this.rebuildTreeStateIfNeeded({card:c.card,hoverCardId:p,pointer:g,grouped:!0}),this.longHoverDetector.clear(),this.shrinkManager.release()}}else h==="connectorHandle"?this.onConnectorUp({from:u,ev:t,ignoreFoldHandle:!1,isClick:f}):h==="connection"&amp;&amp;this.onConnectorUp({from:u,ev:t,ignoreFoldHandle:f,isClick:f});c&amp;&amp;this.sentCardHighlighter.remove([...c.card.iterator()]);return}}}if(e==="move")oi(t)||(this.setScroll({x:this.scrollX+t.dx,y:this.scrollY+t.dy,allowOver:!0,velX:t.dx,velY:t.dy}),Mf(t)&gt;uE&amp;&amp;this.store.reduce(Ar(!1)),this.sar.setFineRedrawCountDown(cN));else if(e==="up"){let{minX:u,minY:d,maxX:c,maxY:p}=this.maxScroll();this.zoom&lt;this.minZoom()&amp;&amp;(this.zoomingAnimation=As({from:this.zoom,to:this.minZoom(),duration:.25,easing:ms}));let h=Sx(t,.5);this.scroller.springBackOrFling(this.scrollX,this.scrollY,h.x,h.y,u,c,d,p),oi(t)&amp;&amp;this.store.reduce(ti())}}handleRightSingle(e,t){if(e==="up"&amp;&amp;oi(t)){let n=this.applyTransform(),o=!1;for(let i of this.callback.bubblingOrderIterator())if(this.getCardRenderer(i).getObjectUnderPoint({root:void 0,ev:t,mtx:n,focused:!1,toolVisible:!0,zoom:void 0})==="card"){this.store.reduce(Hi({id:i.id,pinned:i.pinned,favorite:i.favorite,canPin:i.canPin(),canRotate:i.canRotate(),canAlign:i.canAlign(),bounds:this.boundingBoxRectToScreen(i.bounds)}),hn(void 0),Ar(!0)),this.bringCardTreeToFront(i,!1),o=!0;break}if(!o){let i=window.devicePixelRatio,s=De(t.x/i,t.y/i);this.store.reduce(Ar(!1),hn(s))}}}bringCardTreeToFront(e,t){for(let n of[e,...e.parentsIterator()])this.callback.bringCardTreeToFront(n,n===e||t)}maxScroll(){let e=Lh(this.bounds,this.zoom),t=tn(e),n=this.canvas.width/2-t.x,o=this.canvas.height/2-t.y,[i,s]=[e.width/2,e.height/2];return{minX:n-i,maxX:n+i,minY:o-s,maxY:o+s}}setScroll({x:e,y:t,velX:n,velY:o,allowOver:i}){let{minX:s,minY:a,maxX:l,maxY:u}=this.maxScroll();e&gt;l&amp;&amp;n&gt;0?i?this.scrollX+=(e-this.scrollX)*.1:this.scrollX=l:e&lt;s&amp;&amp;n&lt;0?i?this.scrollX+=(e-this.scrollX)*.1:this.scrollX=s:this.scrollX=e,u&lt;t&amp;&amp;o&gt;0?i?this.scrollY+=(t-this.scrollY)*.1:this.scrollY=u:t&lt;a&amp;&amp;o&lt;0?i?this.scrollY+=(t-this.scrollY)*.1:this.scrollY=a:this.scrollY=t}boundingBoxRectToScreen(e){let t=window.devicePixelRatio,n=this.applyTransform().scale(1/t,1/t),o=Jg(n.a)/t,i=Vu(e,An(o));return n.transformRect(qe(),i)}publishFixedUIHitIfNeeded(e){if(this.store.editor||on(this.store))return;let{up:t,grouped:n,card:o,originState:i,hit:s}=e;if(t){let a=[];if(s)if(s==="desktopTrashBox"){let l=_c(o,n);confirm(l)?n?We(bp(o.id)):We(du(o.id)):Wx({card:o,grouped:n,originState:i})}else if(s==="submitButton")if(this.store.submitting){let l=he.get().strings;a.push(me(30,{title:l.submittingDocument,message:l.couldntSubmitWhileSubmittingOthers,okMessage:l.back,onOk:()=&gt;{Wx({card:o,grouped:n,originState:i}),this.store.reduce(me(30,void 0))}}))}else a.push(Ub({card:o,grouped:n,originState:i}));else s==="sendButton"?a.push(fg({card:o,grouped:n,originState:i})):s==="materialBox"&amp;&amp;a.push(pg({card:o,grouped:n,originState:i}));this.store.reduce(...a,_1(void 0))}else s!==this.store.fixedUIHit&amp;&amp;this.store.reduce(_1(s))}onNextStore(e){var n,o;let{store:t}=this;if(t.screen!==e.screen?this.sar.setFineRedrawCountDown(Gx):((n=t.desktop)==null?void 0:n.focusingCard)!==((o=e.desktop)==null?void 0:o.focusingCard)&amp;&amp;(this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(Gx)),e.highlightedCardId&amp;&amp;t.highlightedCardId!==e.highlightedCardId){let i=this.callback.getCard(e.highlightedCardId);i.isFolded&amp;&amp;(i=i.head()),this.getCardRenderer(i).setHighlightAnimation()}e.desktopRedrawTrigger&gt;t.desktopRedrawTrigger&amp;&amp;this.sar.setFineRedrawCountDown(Gx),this.store=e}onConnectorUp(e){var c;let{from:t,ev:n,ignoreFoldHandle:o,isClick:i}=e,{parent:s}=t,a=[...this.callback.renderingOrderIterator()].filter(p=&gt;{let h=p.parent;return s&amp;&amp;h?s.id===h.id:s===h}),l=this.mtx.inverted().cross(n.x,n.y),u=(c=this.store.desktop)==null?void 0:c.focusingCard,d=this.mtx;for(let p=a.length-1;p&gt;=0;p--){let h=a[p];if(this.getCardRenderer(h).onConnectorUp({pt:l,from:t,root:void 0,ignoreFoldHandle:o,focused:(u==null?void 0:u.id)===h.id,mtx:d,isClick:i}))break}We(x_(t.id))}insertConnectionIfNeeded({ev:e,mtx:t,card:n}){var i;let o=n.parent?n.parent.children:this.callback.rootChildrenIterator();for(let s of o){if(s===n)continue;if(this.getCardRenderer(s).getObjectUnderPoint({root:void 0,ev:e,mtx:t,focused:!1,toolVisible:!0,zoom:void 0})==="connection"){let u=s.isFolded?s.tail():s,d=(i=u.next)!=null?i:u.nextGroup;if(Ee(d!=null),n.canBeConnectedFrom(u)&amp;&amp;d.canBeConnectedFrom(n)){We(w_(u,n,d));break}}}}rebuildTreeStateIfNeeded(e){var s;let{card:t,hoverCardId:n,pointer:o,grouped:i=!1}=e;if(n!==((s=t.parent)==null?void 0:s.id)){let a=this.shrinkManager.scale;We(K1({cardId:t.id,parentId:n!=null?n:null,grouped:i,resize:{scale:a,pivot:o}}))}}applyTransform(){return this.mtx.set(this.zoom,0,0,this.zoom,this.scrollX,this.scrollY)}schedule(){this.scheduleRender()}scheduleRender(){let e=this.canvas.getContext("2d");if(!e)throw new uo;let t=()=&gt;{if(this.closed)return;this.updater.update();let{editor:n,submissionAnswer:o}=this.store;n||o||(this.update(this.updater.deltaTime),e.save(),this.render(e),e.restore(),this.store.logEnabled&amp;&amp;(e.save(),e.clearRect(20,this.canvas.height-40,40,20),e.fillStyle="red",e.font="20px Arial",e.textAlign="start",e.fillText(`${this.updater.fps}`,20,this.canvas.height-20),e.restore())),requestAnimationFrame(t)};requestAnimationFrame(t)}update(e){let t;if(this.scroller.computeScrollOffset()&amp;&amp;(this.sar.needsDisplay(),this.setScroll({x:this.scroller.currX,y:this.scroller.currY,velX:0,velY:0,allowOver:!1})),this.zoomingAnimation){this.sar.needsDisplay();let o=this.zoomingAnimation.update(e),i=this.prevZoomPivot?this.prevZoomPivot.x:0,s=this.prevZoomPivot?this.prevZoomPivot.y:0,a=(this.scrollX-i)*(o/this.zoom)+i,l=(this.scrollY-s)*(o/this.zoom)+s;this.scrollX=a,this.scrollY=l,this.zoom=o,this.zoomingAnimation.finished&amp;&amp;(this.zoomingAnimation=void 0)}let n=!1;for(let o of this.callback.renderingOrderIterator())if(this.getCardRenderer(o).update()&amp;&amp;(n=!0),t)Rs(t,o.bounds);else{let{x:s,y:a,width:l,height:u}=o.bounds;t={x:s,y:a,width:l,height:u}}this.setBounds(t||qe()),n&amp;&amp;(this.sar.setFineRedrawCountDown(Gx),this.sar.needsRoughRedraw())}adjustViewport(e){if(!e.transitions||e.transitions.length===0)return;let t=lN(e.transitions,u=&gt;this.callback.getCard(u));if(!t)return;let n=new Sn(this.viewportRect()),o=uN({viewport:n,inflate:new Sn(t)}),i=dN(n,o,this.canvas);if(!i)return;let s=100,a=Math.max(n.height/(o.height+s),n.width/(o.width+s)),l=Math.max(a*this.zoom,this.minZoom());this.prevZoomPivot=i,this.zoomingAnimation=As({from:this.zoom,to:l,duration:.3});for(let u of this.callback.renderingOrderIterator())u.parent||this.getCardRenderer(u).invalidateMipmap(this.zoom)}viewportRect(){let e=this.mtx.inverted(),{x:t,y:n}=e.cross(0,0),{x:o,y:i}=e.cross(this.canvas.width,this.canvas.height);return!this.notified&amp;&amp;(!Li(t)||!Li(n)||!Li(o)||!Li(i))&amp;&amp;(fe.error(`invalid viewportRect: left=${t},top=${n},right=${o},bottom=${i}`),$k.default.notify(new Error("invalid viewportRect"),s=&gt;{s.addMetadata("arguments",{left:`${t}`,top:`${n}`,right:`${o}`,bottom:`${i}`,canvasWidth:`${this.canvas.width}`,canvasHeight:`${this.canvas.height}`,invA:`${e.a}`,invD:`${e.d}`,invE:`${e.e}`,invF:`${e.f}`})}),this.notified=!0),qe(t,n,o-t,i-n)}render(e){e.save();let t=this.applyTransform();this.sar.render({ctx:e,mtx:t,roughScaleTransform:new ft(2,0,0,2,-this.canvas.width/2,-this.canvas.height/2),delegate:({ctx:n,mtx:o,rough:i})=&gt;{this.renderInternal({ctx:n,mtx:o,rough:i})}}),e.restore()}renderInternal({ctx:e,mtx:t,rough:n}){var l,u,d,c,p;let o=[];(l=this.store.desktop)!=null&amp;&amp;l.heldCard&amp;&amp;o.push(...this.store.desktop.heldCard.all);let i=[];(u=this.store.desktop)!=null&amp;&amp;u.hoverCardId&amp;&amp;i.push(this.store.desktop.hoverCardId);let s=Fx({canvas:e.canvas,viewport:Tl(),userId:this.store.userInfo.user_id,focusingCardId:(c=(d=this.store.desktop)==null?void 0:d.focusingCard)==null?void 0:c.id,assetUplaodStates:this.store.assetUploadStates,hoverCardIds:i,heldCardIds:o,visibleRect:n?void 0:this.viewportRect(),toolVisible:!0,narrationRecording:!1,dpr:devicePixelRatio,remotePointers:(p=this.remotePointerManager)==null?void 0:p.getPointers(),cardStrokeStates:jp([...this.callback.renderingOrderIterator()]),isReadonly:on(this.store)}),a=zy({cards:this.callback.rootChildrenIterator(),callback:this.cardRendererCallback,state:s,mtx:t});this.layeredRenderer.paint({mtx:t,state:s,node:a}),e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.layeredRenderer.composite(e),e.restore()}close(){var e;this.sentCardHighlighter.clear(),xne(),this.canvas.removeEventListener("wheel",this.handleWheel),(e=this.pointerSubscription)==null||e.close(),this.closed=!0,fe.log("close")}async createNoteThumbnail(){let e=await this.createNoteThumbnailImage(J6.high),t=cs(e,J6.small),n=cs(e,J6.medium),[o,i]=await Promise.all([io(t,"image/jpeg","thumbnail_small.jpg"),io(n,"image/jpeg","thumbnail_medium.jpg")]);return{small:o,medium:i}}async createNoteThumbnailImage(e){let t=fr.create(e),n=t.getContext2dForce(),o=this.objectFitContainMtx(e);return this.renderForThumbnail({ctx:n,mtx:o,rough:!1}),n.globalCompositeOperation="destination-over",n.beginPath(),n.fillStyle="#12264d",n.fillRect(0,0,t.width,t.height),t}objectFitContainMtx(e){let t=mk(this.callback.renderingOrderIterator())||qe(0,0,e.width,e.height),n=Math.max(t.width,t.height)*.0416;return yU({bounds:t,canvas:e,margins:An(n)})}renderForThumbnail({ctx:e,mtx:t,rough:n}){let o=Fx({canvas:e.canvas,viewport:Tl(),userId:this.store.userInfo.user_id,visibleRect:n?void 0:this.viewportRect(),toolVisible:!1,narrationRecording:!1,ignoreDisplayName:!0,dpr:devicePixelRatio,cardStrokeStates:jp([...this.callback.renderingOrderIterator()])}),i=zy({cards:this.callback.rootChildrenIterator(),callback:this.cardRendererCallback,state:o,mtx:t});this.layeredRenderer.paint({mtx:t,state:o,node:i}),e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.layeredRenderer.composite(e),e.restore()}};function Wx(r){let{card:e,grouped:t}=r,{position:n,parentId:o}=r.originState,[i,s]=[n.x,n.y],[a,l]=[n.x-e.position.x,n.y-e.position.y];t?We(pS({topOfGroup:e.head().id,topX:i,topY:s,deltaX:a,deltaY:l})):We(tf({cardId:e.id,x:i,y:s})),o&amp;&amp;We(K1({cardId:e.id,parentId:o,grouped:e.hasConnectedCardOrGroup}))}var Rie=oe(Wr());function jk(r){let e=nt.courses(),t=he.get().strings;r.reduce(ei(e,"fetching")),Ln(r,{fetchingId:nt.courses(),promise:ie.lnsClient.getCourses(r.userInfo.is_teacher),doneReducer:n=&gt;()=&gt;({courses:{byId:{$merge:rn(n.map(o=&gt;[o.course_id,o]))},joinedCourseIds:{$set:n.map(o=&gt;o.course_id)}}}),errorReducer:Pl({store:r,id:44,title:t.couldntGetCourses})})}function Lie(r){let e=nt.closedYears(),t=ie.lnsClient.getClosedYears({school:r.userInfo.is_teacher,user:!0}),n=he.get().strings;Ln(r,{fetchingId:e,promise:t,doneReducer:o=&gt;()=&gt;{let{user:i,school:s}=o;return i==null||i.sort((a,l)=&gt;l-a),s==null||s.sort((a,l)=&gt;l-a),{closedYears:{$set:{user:i,school:s}}}},errorReducer:Pl({store:r,id:49,title:n.couldntGetPreviousYearsCourses})})}function Oie(r,e){let t=nt.closedCoursesByYear(e),n;r.userInfo.is_teacher?n=ie.lnsClient.getClosedCourses({year:e,target:{school:!0,user:!0}}):n=ie.lnsClient.getClosedCourses({year:e,target:{school:!1,user:!0}});let o=he.get().strings;Ln(r,{fetchingId:t,promise:n,doneReducer:i=&gt;{let s=Array(),a=Array(),l=Array(),u=Array(),d=r.userInfo.is_teacher?i.school.concat(i.user):i.user,c=i.user.map(h=&gt;h.course.id),p=r.userInfo.is_teacher?i.school.map(h=&gt;h.course.id):[];return d.forEach(h=&gt;{u.push(h.course.id),l.push([h.course.id,{course_id:h.course.id,subject_id:h.subject.id,user_group_id:h.user_group.id,subject_name:h.course.name,user_group_name:h.user_group.name}]),s.push([h.user_group.id,{id:h.user_group.id,name:h.user_group.name}]),a.push([h.subject.id,{id:h.subject.id,name:h.course.name}])}),()=&gt;({courses:{byId:{$merge:rn(l)},byYear:{[e]:{$set:{user:c,school:p}}}},subjects:{byId:{$merge:rn(a)}},userGroups:{byId:{$merge:rn(s)}}})},errorReducer:Pl({store:r,id:44,title:o.couldntGetCourses})})}function Uie(r){let e=he.get().strings;Ln(r,{fetchingId:nt.otherTeacherCourses(),promise:ie.lnsClient.getAllCourses(),doneReducer:t=&gt;n=&gt;{let o=t.filter(i=&gt;!n.courses.joinedCourseIds.includes(i.course_id)).map(i=&gt;i.course_id);return{courses:{byId:{$merge:rn(t.map(i=&gt;[i.course_id,i]))},otherTeacherCourseIds:{$set:o}}}},errorReducer:Pl({store:r,id:46,title:e.couldntGetOtherTeachersCourses})})}function zie(r,e){let t=he.get().strings,n=1,o=()=&gt;{r.reduce(s=&gt;{let a=s.courses.joinedCourseIds.indexOf(e.course_id);return{courses:{byId:{$unset:[e.course_id]},joinedCourseIds:{$splice:[[a,a&gt;-1?1:0]]}}}},we(n,null))},i=()=&gt;{r.reduce(we(n,null)),$Ee(r,e.course_id)};r.reduce(we(n,(0,Rie.sprintf)(t.willDeleteGroupFromSubject,e.user_group_name,e.subject_name))),ie.lnsClient.deleteCourse(e.course_id).then(o).catch(Je.handleError).catch(s=&gt;{let{message:a,unknownError:l}=ot(s,{403:t.courseAccessDenied,404:t.courseDoesntExist});if(s instanceof sr&amp;&amp;s.status===400){let u=JSON.parse(s.message);if(u){if(u.error.code===0){i();return}else if(u.error.code===1)a=t.couldntDeleteAsMaterialsExist;else if(u.error.code===2)a=t.couldntDeleteAsNotesExist;else if(u.error.code===3){o();return}}}fe.error(s),r.reduce(we(n,null),me(n,{title:t.couldntDeleteCourse,message:a,unknownError:l,okMessage:t.back,onOk:()=&gt;r.reduce(me(n,void 0))}))})}function Ua(r,e){let t=he.get().strings;r.reduce(ei(nt.courseAttributes(e),"fetching"),ei(nt.courseTemporaryTeachers(e),"fetching")),Promise.all([ie.lnsClient.getCourse(e),ie.lnsClient.getCourseTemporaryTeachers(e)]).then(n=&gt;{let[o,i]=n;r.reduce(KE(e,o),Kq(e,i),ei(nt.courseAttributes(e),"done"),ei(nt.courseTemporaryTeachers(e),"done"))}).catch(Je.handleError).catch(n=&gt;{r.reduce(ei(nt.courseAttributes(e),n),ei(nt.courseTemporaryTeachers(e),n),Pl({store:r,id:45,title:t.couldntGetCoursesAttributes,okMessage:t.okay})(n))})}function Hie(r,e){if(r.reduce(()=&gt;({pageVisible:{$set:e}})),!e)ie.lnsClient.notifyEnterBackground().catch(fe.error);else{let t=dp(r);t?ie.lnsClient.attendCourse(t).catch(fe.error):ie.lnsClient.leaveCourse().catch(fe.error)}}function WEe(r){let{store:e,courseId:t,onOk:n,onCancel:o}=r,i=he.get().strings;ie.lnsClient.getCourses(!0).then(s=&gt;{let a=s.find(d=&gt;d.course_id===t),l=[i.couldntDeleteAsOtherInCharge],u=s.filter(d=&gt;d.subject_id===a.subject_id&amp;&amp;d.course_id!==t);if(u.length&gt;0){let d=[i.relatedSubjectsMsg,...u.map(c=&gt;`\u3000\u3000\u2022${c.user_group_name} ${c.subject_name}`)];l.push("","",...d)}e.reduce(Co(3,{title:a.subject_name,message:l,okMessage:i.stopBeginInCharge,cancelMessage:i.cancel,onOk:()=&gt;n(a),onCancel:o,color:"info",buttonColor:"inverse"}))}).catch(s=&gt;{e.reduce(Pl({store:e,id:3,title:i.couldntGetCourses})(s))})}function $Ee(r,e){let t=he.get().strings;WEe({store:r,courseId:e,onOk:i=&gt;{r.reduce(me(3,void 0),we(3,null)),ie.lnsClient.leaveSubject(i.subject_id).then(()=&gt;{r.reduce(s=&gt;{let a=s.courses.joinedCourseIds.indexOf(e);return{courses:{joinedCourseIds:{$splice:[[a,a&gt;-1?1:0]]}}}})}).catch(s=&gt;{r.reduce(Pl({store:r,id:3,title:t.errorOccurred})(s))})},onCancel:()=&gt;{r.reduce(me(3,void 0),we(3,null))}})}var Kk=oe(Wr());async function Gie(r,{courseId:e,submissionNumber:t}){let n=[],o;do{let i=await r.getSubmissionAnswersV3({courseId:e,submissionNumber:t,nextPageKey:o});n.push(...i.documents),o=i.next_page_key}while(o);return n}async function Wie(r,e){let{courseId:t,submissionNumber:n,authorId:o,generation:i,authorKey:s}=e,a=50,l=[],u,d=!1;do{let c=u!==void 0?Math.min(a,u-i):a,p=await r.getSubmissionHistory({courseId:t,submissionNumber:n,authorId:o,limit:c,authorKey:s,before_generation:u});d=p.has_more,l.push(...p.history),u=Math.min(...l.map(h=&gt;h.generation))}while(d&amp;&amp;u&gt;i);return{has_more:d,history:l}}function $ie(r,e){var s;let t=Date.now(),o=((s=r.submissions.byCourseId[e])!=null?s:[]).map(a=&gt;r.submissions.byKey[a]),i=Object.values(o).filter(a=&gt;a.expiry?new Date(a.expiry).getTime()&gt;t:!1);if(i.length===0)r.reduce(()=&gt;({submissions:{byActiveInCourse:{[e]:{$set:void 0}}}}));else{i.sort((l,u)=&gt;l.expiry.localeCompare(u.expiry));let a=i.map(l=&gt;pn(e,l.submission_number));r.reduce(()=&gt;({submissions:{byActiveInCourse:{[e]:{$set:a}}}}))}}var pN=class extends Error{constructor(t,n){super(n);this.threshold=t}};async function Vy({store:r,courseId:e,beforeSubmissionID:t,enableFetchError:n}){return Ln(r,{fetchingId:nt.submissions(e),promise:ie.lnsClient.getSubmissions(e,30,t),doneReducer:i=&gt;{if(n&amp;&amp;i.error&amp;&amp;i.error.error_code===1){let s=i.error;throw new pN(s.threshold,s.message)}return uY(e,i,30)},errorReducer:i=&gt;{let s=11,a=he.get().strings;if(i instanceof pN){let l={title:(0,Kk.sprintf)(a.tasksFeatureIsUnavailable,i.threshold),color:"error",okMessage:a.back,onOk:()=&gt;r.reduce(me(s,void 0))};return()=&gt;({alerts:{[s]:{$set:l}},submissionsOldest:{byCourseId:{[e]:{$set:!0}}}})}return Jp({store:r,upid:s,e:i,errTitle:a.couldntGetSubmissions})}})}function hN({store:r,courseId:e,submissionNumber:t}){return Ln(r,{fetchingId:nt.submission(e,t),promise:ie.lnsClient.getSubmissionInfo(e,t),doneReducer:n=&gt;rS(e,t,n),errorReducer:n=&gt;{let o=11,i=he.get().strings;return n instanceof sr&amp;&amp;n.status===404&amp;&amp;r.reduce(B1(e,t)),Jp({store:r,upid:o,e:n,errTitle:i.couldntGetSubmissions})}})}async function $x(r,{courseId:e,submissionNumber:t,opts:n}){let o=he.get().strings,i=13;return r.reduce(we(i,o.updatingSubmission)),await ie.lnsClient.updateSubmission(e,t,n).then(()=&gt;{let s={};return n.submission_message!==void 0&amp;&amp;(s.message=n.submission_message),n.expiry!==void 0&amp;&amp;(s.expiry=n.expiry),n.hide_author!==void 0&amp;&amp;(s.hide_author=n.hide_author),n.reveal_answer!==void 0&amp;&amp;(s.reveal_answer=n.reveal_answer),n.preparation!==void 0&amp;&amp;(s.preparation=n.preparation),r.reduce(N1(e,t,s),we(i,null)),!0}).catch(s=&gt;(Je.handleError(s),!1)).catch(s=&gt;{fe.error(s);let a=Jp({store:r,upid:i,e:s,errTitle:o.couldntUpdateSubmission});return r.reduce(we(i,null),a),!1})}async function fN(r,{courseId:e,submissionNumber:t,revealAnswer:n}){return Ln(r,{fetchingId:nt.submissionAnswers(e,t),promise:Gie(ie.lnsClient,{courseId:e,submissionNumber:t}),doneReducer:o=&gt;{let i=o;return n||(i=i.filter(s=&gt;s.author_id===r.userInfo.user_id)),dY(e,t,i)},errorReducer:o=&gt;{let i=he.get().strings;return Jp({store:r,upid:17,e:o,errTitle:i.couldNotGetSubmissionAnswers})}})}async function Vie(r,e){let{courseId:t,submissionNumber:n,answer:o}=e,i=nt.submissionAnswers(t,n);await r.waitUntil(({fetchStates:s})=&gt;s[i]!=="fetching"),r.reduce(cY(t,n,o))}async function Z6(r,e){var l;let{title:t,courseId:n,preparation:o}=e,i=he.get().strings,s=14;r.reduce(we(s,i.creatingTask));let a=(l=e.expiry)==null?void 0:l.toISOString();await ie.lnsClient.createSubmission(n,{expiry:a,submission_message:t,preparation:o}).then(u=&gt;{let d=[we(s,null),rS(n,u.submission_number,{message:t,submission_number:u.submission_number,timestamp:new Date().toISOString(),hide_author:!1,reveal_answer:0,submitted:!1,submit_date:null,expiry:a!=null?a:null,preparation:o})];o||d.push(Jh(u.submission_number,t)),r.reduce(...d)}).catch(Je.handleError).catch(u=&gt;{fe.error(u);let d=Jp({store:r,upid:s,e:u,errTitle:i.couldntCreateTask});r.reduce(we(s,null),d)})}async function jie(r,e,t){let n=he.get().strings,o=12,i=pn(e,t),s=r.submissions.byKey[i];r.reduce(we(o,(0,Kk.sprintf)(n.deletingTask,s.message))),await ie.lnsClient.deleteSubmission(e,t).then(()=&gt;{r.reduce(B1(e,t),F1(t),we(o,null))}).catch(Je.handleError).catch(a=&gt;{fe.error(a);let l=he.get().strings,u=Jp({store:r,upid:o,e:a,errTitle:l.couldntDeleteTask});r.reduce(F1(t),we(o,null),u)})}async function Kie(r,e){Ee(r.submittingDocument!=null,"submittingDocument must be set");let{card:t}=r.submittingDocument;r.reduce(Ub(void 0),o_(!0));let n=Gr(Xt(r)),o,i=he.get().strings,s=30;try{await Kp(r,t);let a={id:r.userInfo.user_id,name:zt(r.userInfo)};o=await Ane({card:t,courseId:n,submission_number:e,user:a})}catch(a){if(r.reduce(o_(!1)),Je.catchError(a))return;r.reduce(me(s,{title:i.couldntSubmitCards,...ot(a),okMessage:i.okay,onOk(){r.reduce(me(s,void 0))}}));return}return ie.lnsClient.submitDocumentV2(o).then(()=&gt;{r.reduce(Jt({type:"normal",text:i.didSubmitCards}),iY(n,e))}).catch(Je.handleError).catch(a=&gt;{fe.error(a);let l=Jp({store:r,upid:s,e:a,errTitle:i.couldntSubmitCards});r.reduce(l)}).finally(()=&gt;{r.reduce(o_(!1))})}var VEe=Bf();async function qie(r){let{documentId:e,onFallback:t,fallback:n}=r,o=async()=&gt;{let i=await ie.lnsClient.replyToDocumentV2({documentId:e});if(i==="ok")return;t();let s=async(c,p)=&gt;{let h=[];for(let f of c){let m=await n(f,p);if(m){let g=await mM({index:f,smallThumb:m.small,mediumThumb:m.medium});h.push(g)}}return h},{document_thumbnails:a,annotation_thumbnails:l}=i.info,u=await s(a!=null?a:[],"document"),d=await s(l!=null?l:[],"annotation");await ie.lnsClient.replyToDocumentV2({documentId:e,thumbnails:u,annotation_thumbnails:d})};return await VEe.execute(o)}async function Yie(r,{documentId:e,fallback:t}){let n=he.get().strings,o=51,i=a=&gt;{fe.error(a),r.reduce(we(o,null),me(o,{title:n.couldntSendBackDocument,...ot(a),okMessage:n.back,onOk:()=&gt;r.reduce(me(o,void 0))}))},s=()=&gt;{r.reduce(we(o,null),eS(e,{done:!0,annotation_layer_updated:!1}),Jt({type:"normal",text:n.didSendBackDocument}))};r.reduce(we(o,n.sendingBackDocument)),await qie({documentId:e,onFallback:()=&gt;{r.reduce(we(o,n.sendingThumbnails))},fallback:t}).then(s).catch(Je.handleError).catch(i)}async function Xie(r,{list:e}){let t=he.get().strings,n=51;r.reduce(we(n,`${t.sendingBackDocument}(0/${e.length})`));let o=[],i=0,s=(d,c)=&gt;(i++,r.reduce(we(n,`(${i}/${e.length}) ${t.sendingBackDocument}`)),[d,c]);for(let{documentId:d,fallback:c}of e)o.push(qie({documentId:d,fallback:c,onFallback:()=&gt;{r.reduce(we(n,`(${i}/${e.length}) ${t.sendingThumbnails}`))}}).then(()=&gt;s(d)).catch(p=&gt;s(d,p)));let a=await Promise.all(o),l=a.filter(d=&gt;d[1]==null).map(d=&gt;eS(d[0],{annotation_layer_updated:!1,done:!0})),u=a.filter(d=&gt;d[1]!=null);if(u.length&gt;0){let d=he.get().pluralSafeSuffix(e.length),c=(0,Kk.sprintf)(t.sendBackIncomplete,e.length,u.length,d);r.reduce(...l,we(n,null),me(n,{title:t.sendBackErrorOccurred,message:c,okMessage:t.back,onOk:()=&gt;r.reduce(me(n,void 0))}))}else r.reduce(...l,we(n,null),Jt({type:"normal",text:t.didCompleteSendBack}))}async function Qie(r,e){await ie.lnsClient.getSubmissionMessage(e).then(t=&gt;{r.reduce(()=&gt;({submissionMessages:{byCourseId:{$set:rn(t.map(n=&gt;[n.course_id,n]))}}}))}).catch(Je.handleError).catch(t=&gt;{let n=he.get().strings,o=Jp({store:r,upid:16,e:t,errTitle:n.couldntGetSubmissionMessage});r.reduce(o)})}function Vx(r){r.reduce(J0(!1),cp(!r.desktop))}function Jp({store:r,upid:e,e:t,errTitle:n}){let o=he.get().strings,i=n,{message:s,unknownError:a}=ot(t,{[400]:o.requestContainsInvalidID,[403]:o.accessDenied,[404]:o.subjectOrTaskDoesntExist}),l=s;if(t instanceof sr&amp;&amp;t.status===403){try{let u=JSON.parse(t.message);u.error_code===1&amp;&amp;(i=(0,Kk.sprintf)(o.tasksFeatureIsUnavailable,u.threshold),l=void 0)}catch(u){}try{JSON.parse(t.message).error_code===8&amp;&amp;(l=o.actionCannotBeCarriedOutOnClosedCourse)}catch(u){}}return me(e,{title:i,message:l,unknownError:a,okMessage:o.back,onOk:()=&gt;r.reduce(me(e,void 0))})}async function mN(r,e){return ie.lnsClient.getSubmissionHistoryAttributes(e).then(t=&gt;{r.reduce(c_({...e,attributes:t}))}).catch(Je.handleError).catch(t=&gt;{})}async function eH(r,e){return Ln(r,{fetchingId:nt.submissionHistory(e),promise:ie.lnsClient.getSubmissionHistory(e),doneReducer:t=&gt;gU({...e,data:t}),errorReducer:t=&gt;{let n=he.get().strings;return Jp({store:r,upid:18,e:t,errTitle:n.couldntGetSubmissionHistory})}})}async function Jie(r,e){return Ln(r,{fetchingId:nt.submissionHistory(e),promise:Wie(ie.lnsClient,e),doneReducer:t=&gt;gU({...e,data:t}),errorReducer:t=&gt;{let n=he.get().strings;return Jp({store:r,upid:18,e:t,errTitle:n.couldntGetSubmissionHistory})}})}function Zp(r,e,t){if(r.fetchStates[nt.mobilePushes()]!=="fetching")return Ln(r,{fetchingId:nt.mobilePushes(),promise:ie.lnsClient.getUnreadMobilePushes(e),doneReducer:n=&gt;{let o=[],i=[];for(let s of n)(s.type==="submit"||s.type==="share"||s.type==="comment_on_submission_answer"||s.type==="reveal_submission_answers")&amp;&amp;!(t!=null&amp;&amp;t.includes(s.type))?o.push(s):i.push(s.id);return i.length&gt;0&amp;&amp;bv(i),jEe({unreadDataList:o,courseId:e})}})}function Zie({store:r,courseId:e}){var o;let t=["share","comment_on_submission_answer"],n=(o=r.mobilePushes.byCourseId[e])==null?void 0:o.filter(i=&gt;{let s=r.mobilePushes.byId[i];return!!s&amp;&amp;t.includes(s.data.type)});if(!(!n||n.length&lt;1))return bv(n,()=&gt;{r.reduce(tH(e,n))})}function jy({store:r,courseId:e,submissionNumber:t,authors:n}){var l;if(t===void 0&amp;&amp;n)return;let o=(l=r.mobilePushes.byCourseId[e])==null?void 0:l.filter(u=&gt;{var c,p;let d=r.mobilePushes.byId[u];return(d==null?void 0:d.type)==="submit"&amp;&amp;(t===void 0||((c=d==null?void 0:d.data)==null?void 0:c.submission_number)===t)&amp;&amp;(n===void 0||n.includes((p=d==null?void 0:d.data)==null?void 0:p.author_id))});if(!o||o.length&lt;1)return;let i=he.get().strings;return bv(o,()=&gt;{let u=[tH(e,o)];t===void 0&amp;&amp;u.push(Jt({type:"normal",text:i.markedAllSubmitsAsRead})),r.reduce(...u)},u=&gt;{t===void 0&amp;&amp;ese(r,u)})}function ese(r,e){let t=he.get().strings,{message:n,unknownError:o}=ot(e,{[400]:t.invalidRequest,[403]:s=&gt;{let a=s.asJson();return(a==null?void 0:a.error_code)===0?t.ipAddressRestricted:t.unexpectedErrorOccurred},[500]:t.unknownApiErrorMsg}),i=66;r.reduce(me(i,{title:t.failedToMarkAllAsRead,message:n,okMessage:t.close,onOk:()=&gt;r.reduce(me(i,void 0)),unknownError:o}))}function gN({store:r,courseId:e,submissionNumber:t}){var a;let n=(a=r.mobilePushes.byCourseId[e])==null?void 0:a.filter(l=&gt;{var d;let u=r.mobilePushes.byId[l];return(u==null?void 0:u.type)==="reveal_submission_answers"&amp;&amp;(t===void 0||((d=u==null?void 0:u.data)==null?void 0:d.submission_number)===t)});if(!n||n.length&lt;1)return;let o=he.get().strings;return bv(n,()=&gt;{let l=[tH(e,n)];t===void 0&amp;&amp;l.push(Jt({type:"normal",text:o.markedAllRevealAnswersAsRead})),r.reduce(...l)},l=&gt;{t===void 0&amp;&amp;ese(r,l)})}function bv(r,e,t){return ie.lnsClient.readMobilePushes(r).then(e).catch(Je.handleError).catch(n=&gt;{t==null||t(n)})}function jEe(r){let{courseId:e,unreadDataList:t}=r;if(e)return()=&gt;{let n=t.filter(o=&gt;o.data.course_id===e);if(!(n.length&lt;1))return{mobilePushes:{byId:{$merge:rn(n.map(o=&gt;[o.id,o]))},byCourseId:{[e]:{$set:n.map(o=&gt;o.id)}}}}};{let n=Array.from(new Set(t.map(i=&gt;i.data.course_id))),o=Object.create({});for(let i of n)o[i]=t.filter(s=&gt;s.data.course_id===i).map(s=&gt;s.id);return()=&gt;({mobilePushes:{byId:{$set:rn(t.map(i=&gt;[i.id,i]))},byCourseId:{$set:o}}})}}function tH(r,e){return t=&gt;{let n=t.mobilePushes.byCourseId[r];if(!n)return;let o=n.filter(i=&gt;!e.includes(i));return{mobilePushes:{byId:{$unset:e},byCourseId:o.length===0?{$unset:[r]}:{[r]:{$set:o}}}}}}function vN(r){return e=&gt;{var o;let t=r.data.course_id,n=[...(o=e.mobilePushes.byCourseId[t])!=null?o:[]];return n.push(r.id),n=[...new Set(n)],{mobilePushes:{byId:{$merge:{[r.id]:r}},byCourseId:{$merge:{[t]:n}}}}}}function tse(r){return e=&gt;{let t=e.mobilePushMessages;return t.push(r),{mobilePushMessages:{$set:t}}}}function rse(){return()=&gt;({mobilePushMessages:{$set:[]}})}var ose=function(r){let e=[],t=0;for(let n=0;n&lt;r.length;n++){let o=r.charCodeAt(n);o&lt;128?e[t++]=o:o&lt;2048?(e[t++]=o&gt;&gt;6|192,e[t++]=o&amp;63|128):(o&amp;64512)===55296&amp;&amp;n+1&lt;r.length&amp;&amp;(r.charCodeAt(n+1)&amp;64512)===56320?(o=65536+((o&amp;1023)&lt;&lt;10)+(r.charCodeAt(++n)&amp;1023),e[t++]=o&gt;&gt;18|240,e[t++]=o&gt;&gt;12&amp;63|128,e[t++]=o&gt;&gt;6&amp;63|128,e[t++]=o&amp;63|128):(e[t++]=o&gt;&gt;12|224,e[t++]=o&gt;&gt;6&amp;63|128,e[t++]=o&amp;63|128)}return e},KEe=function(r){let e=[],t=0,n=0;for(;t&lt;r.length;){let o=r[t++];if(o&lt;128)e[n++]=String.fromCharCode(o);else if(o&gt;191&amp;&amp;o&lt;224){let i=r[t++];e[n++]=String.fromCharCode((o&amp;31)&lt;&lt;6|i&amp;63)}else if(o&gt;239&amp;&amp;o&lt;365){let i=r[t++],s=r[t++],a=r[t++],l=((o&amp;7)&lt;&lt;18|(i&amp;63)&lt;&lt;12|(s&amp;63)&lt;&lt;6|a&amp;63)-65536;e[n++]=String.fromCharCode(55296+(l&gt;&gt;10)),e[n++]=String.fromCharCode(56320+(l&amp;1023))}else{let i=r[t++],s=r[t++];e[n++]=String.fromCharCode((o&amp;15)&lt;&lt;12|(i&amp;63)&lt;&lt;6|s&amp;63)}}return e.join("")},ise={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o&lt;r.length;o+=3){let i=r[o],s=o+1&lt;r.length,a=s?r[o+1]:0,l=o+2&lt;r.length,u=l?r[o+2]:0,d=i&gt;&gt;2,c=(i&amp;3)&lt;&lt;4|a&gt;&gt;4,p=(a&amp;15)&lt;&lt;2|u&gt;&gt;6,h=u&amp;63;l||(h=64,s||(p=64)),n.push(t[d],t[c],t[p],t[h])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&amp;&amp;!e?btoa(r):this.encodeByteArray(ose(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&amp;&amp;!e?atob(r):KEe(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o&lt;r.length;){let i=t[r.charAt(o++)],a=o&lt;r.length?t[r.charAt(o)]:0;++o;let u=o&lt;r.length?t[r.charAt(o)]:64;++o;let c=o&lt;r.length?t[r.charAt(o)]:64;if(++o,i==null||a==null||u==null||c==null)throw new rH;let p=i&lt;&lt;2|a&gt;&gt;4;if(n.push(p),u!==64){let h=a&lt;&lt;4&amp;240|u&gt;&gt;2;if(n.push(h),c!==64){let f=u&lt;&lt;6&amp;192|c;n.push(f)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r&lt;this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r&gt;=this.ENCODED_VALS_BASE.length&amp;&amp;(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},rH=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},qEe=function(r){let e=ose(r);return ise.encodeByteArray(e,!0)},nH=function(r){return qEe(r).replace(/\./g,"")},YEe=function(r){try{return ise.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XEe(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof globalThis!="undefined")return globalThis;throw new Error("Unable to locate global object.")}var QEe=()=&gt;XEe().__FIREBASE_DEFAULTS__,JEe=()=&gt;{if(typeof process=="undefined"||typeof process.env=="undefined")return;let r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ZEe=()=&gt;{if(typeof document=="undefined")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}let e=r&amp;&amp;YEe(r[1]);return e&amp;&amp;JSON.parse(e)},e_e=()=&gt;{try{return QEe()||JEe()||ZEe()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}};var sse=()=&gt;{var r;return(r=e_e())===null||r===void 0?void 0:r.config};var bN=class{constructor(){this.reject=()=&gt;{},this.resolve=()=&gt;{},this.promise=new Promise((e,t)=&gt;{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=&gt;{t?this.reject(t):this.resolve(n),typeof e=="function"&amp;&amp;(this.promise.catch(()=&gt;{}),e.length===1?e(t):e(t,n))}}};function yN(){try{return typeof indexedDB=="object"}catch(r){return!1}}function CN(){return new Promise((r,e)=&gt;{try{let t=!0,n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=&gt;{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=&gt;{t=!1},o.onerror=()=&gt;{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function ase(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}var t_e="FirebaseError",Fc=class extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=t_e,Object.setPrototypeOf(this,Fc.prototype),Error.captureStackTrace&amp;&amp;Error.captureStackTrace(this,Hf.prototype.create)}},Hf=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?r_e(i,n):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new Fc(o,a,n)}};function r_e(r,e){return r.replace(n_e,(t,n)=&gt;{let o=e[n];return o!=null?String(o):`&lt;${n}?&gt;`})}var n_e=/\{\$([^}]+)}/g;function SN(r,e){if(r===e)return!0;let t=Object.keys(r),n=Object.keys(e);for(let o of t){if(!n.includes(o))return!1;let i=r[o],s=e[o];if(nse(i)&amp;&amp;nse(s)){if(!SN(i,s))return!1}else if(i!==s)return!1}for(let o of n)if(!t.includes(o))return!1;return!0}function nse(r){return r!==null&amp;&amp;typeof r=="object"}var wat=4*60*60*1e3;function xN(r){return r&amp;&amp;r._delegate?r._delegate:r}var Tu=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ky="[DEFAULT]";var oH=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let n=new bN;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:t});o&amp;&amp;n.resolve(o)}catch(o){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&amp;&amp;t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i_e(e))try{this.getOrInitializeService({instanceIdentifier:Ky})}catch(t){}for(let[t,n]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(t);try{let i=this.getOrInitializeService({instanceIdentifier:o});n.resolve(i)}catch(i){}}}}clearInstance(e=Ky){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=&gt;"INTERNAL"in t).map(t=&gt;t.INTERNAL.delete()),...e.filter(t=&gt;"_delete"in t).map(t=&gt;t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ky){return this.instances.has(e)}getOptions(e=Ky){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[i,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(i);n===a&amp;&amp;s.resolve(o)}return o}onInit(e,t){var n;let o=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(o))!==null&amp;&amp;n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(o,i);let s=this.instances.get(o);return s&amp;&amp;e(s,o),()=&gt;{i.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(!!n)for(let o of n)try{o(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&amp;&amp;this.component&amp;&amp;(n=this.component.instanceFactory(this.container,{instanceIdentifier:o_e(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(o){}return n||null}normalizeInstanceIdentifier(e=Ky){return this.component?this.component.multipleInstances?e:Ky:e}shouldAutoInitialize(){return!!this.component&amp;&amp;this.component.instantiationMode!=="EXPLICIT"}};function o_e(r){return r===Ky?void 0:r}function i_e(r){return r.instantiationMode==="EAGER"}var wN=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&amp;&amp;this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new oH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var s_e=[],ii;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ii||(ii={}));var a_e={debug:ii.DEBUG,verbose:ii.VERBOSE,info:ii.INFO,warn:ii.WARN,error:ii.ERROR,silent:ii.SILENT},l_e=ii.INFO,u_e={[ii.DEBUG]:"log",[ii.VERBOSE]:"log",[ii.INFO]:"info",[ii.WARN]:"warn",[ii.ERROR]:"error"},d_e=(r,e,...t)=&gt;{if(e&lt;r.logLevel)return;let n=new Date().toISOString(),o=u_e[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},TN=class{constructor(e){this.name=e,this._logLevel=l_e,this._logHandler=d_e,this._userLogHandler=null,s_e.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ii))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a_e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&amp;&amp;this._userLogHandler(this,ii.DEBUG,...e),this._logHandler(this,ii.DEBUG,...e)}log(...e){this._userLogHandler&amp;&amp;this._userLogHandler(this,ii.VERBOSE,...e),this._logHandler(this,ii.VERBOSE,...e)}info(...e){this._userLogHandler&amp;&amp;this._userLogHandler(this,ii.INFO,...e),this._logHandler(this,ii.INFO,...e)}warn(...e){this._userLogHandler&amp;&amp;this._userLogHandler(this,ii.WARN,...e),this._logHandler(this,ii.WARN,...e)}error(...e){this._userLogHandler&amp;&amp;this._userLogHandler(this,ii.ERROR,...e),this._logHandler(this,ii.ERROR,...e)}};var c_e=(r,e)=&gt;e.some(t=&gt;r instanceof t),lse,use;function p_e(){return lse||(lse=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h_e(){return use||(use=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var dse=new WeakMap,sH=new WeakMap,cse=new WeakMap,iH=new WeakMap,lH=new WeakMap;function f_e(r){let e=new Promise((t,n)=&gt;{let o=()=&gt;{r.removeEventListener("success",i),r.removeEventListener("error",s)},i=()=&gt;{t(Mc(r.result)),o()},s=()=&gt;{n(r.error),o()};r.addEventListener("success",i),r.addEventListener("error",s)});return e.then(t=&gt;{t instanceof IDBCursor&amp;&amp;dse.set(t,r)}).catch(()=&gt;{}),lH.set(e,r),e}function m_e(r){if(sH.has(r))return;let e=new Promise((t,n)=&gt;{let o=()=&gt;{r.removeEventListener("complete",i),r.removeEventListener("error",s),r.removeEventListener("abort",s)},i=()=&gt;{t(),o()},s=()=&gt;{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",i),r.addEventListener("error",s),r.addEventListener("abort",s)});sH.set(r,e)}var aH={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return sH.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cse.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&amp;&amp;(e==="done"||e==="store")?!0:e in r}};function pse(r){aH=r(aH)}function g_e(r){return r===IDBDatabase.prototype.transaction&amp;&amp;!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let n=r.call(DN(this),e,...t);return cse.set(n,e.sort?e.sort():[e]),Mc(n)}:h_e().includes(r)?function(...e){return r.apply(DN(this),e),Mc(dse.get(this))}:function(...e){return Mc(r.apply(DN(this),e))}}function v_e(r){return typeof r=="function"?g_e(r):(r instanceof IDBTransaction&amp;&amp;m_e(r),c_e(r,p_e())?new Proxy(r,aH):r)}function Mc(r){if(r instanceof IDBRequest)return f_e(r);if(iH.has(r))return iH.get(r);let e=v_e(r);return e!==r&amp;&amp;(iH.set(r,e),lH.set(e,r)),e}var DN=r=&gt;lH.get(r);function qy(r,e,{blocked:t,upgrade:n,blocking:o,terminated:i}={}){let s=indexedDB.open(r,e),a=Mc(s);return n&amp;&amp;s.addEventListener("upgradeneeded",l=&gt;{n(Mc(s.result),l.oldVersion,l.newVersion,Mc(s.transaction))}),t&amp;&amp;s.addEventListener("blocked",()=&gt;t()),a.then(l=&gt;{i&amp;&amp;l.addEventListener("close",()=&gt;i()),o&amp;&amp;l.addEventListener("versionchange",()=&gt;o())}).catch(()=&gt;{}),a}function kN(r,{blocked:e}={}){let t=indexedDB.deleteDatabase(r);return e&amp;&amp;t.addEventListener("blocked",()=&gt;e()),Mc(t).then(()=&gt;{})}var b_e=["get","getKey","getAll","getAllKeys","count"],y_e=["put","add","delete","clear"],uH=new Map;function hse(r,e){if(!(r instanceof IDBDatabase&amp;&amp;!(e in r)&amp;&amp;typeof e=="string"))return;if(uH.get(e))return uH.get(e);let t=e.replace(/FromIndex$/,""),n=e!==t,o=y_e.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||b_e.includes(t)))return;let i=async function(s,...a){let l=this.transaction(s,o?"readwrite":"readonly"),u=l.store;return n&amp;&amp;(u=u.index(a.shift())),(await Promise.all([u[t](...a),o&amp;&amp;l.done]))[0]};return uH.set(e,i),i}pse(r=&gt;({...r,get:(e,t,n)=&gt;hse(e,t)||r.get(e,t,n),has:(e,t)=&gt;!!hse(e,t)||r.has(e,t)}));var cH=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=&gt;{if(C_e(t)){let n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=&gt;t).join(" ")}};function C_e(r){let e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}var pH="@firebase/app",fse="0.9.4";var Yy=new TN("@firebase/app"),S_e="@firebase/app-compat",x_e="@firebase/analytics-compat",w_e="@firebase/analytics",T_e="@firebase/app-check-compat",D_e="@firebase/app-check",k_e="@firebase/auth",P_e="@firebase/auth-compat",A_e="@firebase/database",I_e="@firebase/database-compat",E_e="@firebase/functions",F_e="@firebase/functions-compat",M_e="@firebase/installations",N_e="@firebase/installations-compat",B_e="@firebase/messaging",R_e="@firebase/messaging-compat",L_e="@firebase/performance",O_e="@firebase/performance-compat",U_e="@firebase/remote-config",z_e="@firebase/remote-config-compat",H_e="@firebase/storage",G_e="@firebase/storage-compat",W_e="@firebase/firestore",$_e="@firebase/firestore-compat",V_e="firebase";var hH="[DEFAULT]",j_e={[pH]:"fire-core",[S_e]:"fire-core-compat",[w_e]:"fire-analytics",[x_e]:"fire-analytics-compat",[D_e]:"fire-app-check",[T_e]:"fire-app-check-compat",[k_e]:"fire-auth",[P_e]:"fire-auth-compat",[A_e]:"fire-rtdb",[I_e]:"fire-rtdb-compat",[E_e]:"fire-fn",[F_e]:"fire-fn-compat",[M_e]:"fire-iid",[N_e]:"fire-iid-compat",[B_e]:"fire-fcm",[R_e]:"fire-fcm-compat",[L_e]:"fire-perf",[O_e]:"fire-perf-compat",[U_e]:"fire-rc",[z_e]:"fire-rc-compat",[H_e]:"fire-gcs",[G_e]:"fire-gcs-compat",[W_e]:"fire-fst",[$_e]:"fire-fst-compat","fire-js":"fire-js",[V_e]:"fire-js-all"};var qk=new Map,fH=new Map;function K_e(r,e){try{r.container.addComponent(e)}catch(t){Yy.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Gf(r){let e=r.name;if(fH.has(e))return Yy.debug(`There were multiple attempts to register component ${e}.`),!1;fH.set(e,r);for(let t of qk.values())K_e(t,r);return!0}function Xk(r,e){let t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&amp;&amp;t.triggerHeartbeat(),r.container.getProvider(e)}var q_e={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},yv=new Hf("app","Firebase",q_e);var mH=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tu("app",()=&gt;this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yv.create("app-deleted",{appName:this._name})}};function bH(r,e={}){let t=r;typeof e!="object"&amp;&amp;(e={name:e});let n=Object.assign({name:hH,automaticDataCollectionEnabled:!1},e),o=n.name;if(typeof o!="string"||!o)throw yv.create("bad-app-name",{appName:String(o)});if(t||(t=sse()),!t)throw yv.create("no-options");let i=qk.get(o);if(i){if(SN(t,i.options)&amp;&amp;SN(n,i.config))return i;throw yv.create("duplicate-app",{appName:o})}let s=new wN(o);for(let l of fH.values())s.addComponent(l);let a=new mH(t,n,s);return qk.set(o,a),a}function yH(r=hH){let e=qk.get(r);if(!e&amp;&amp;r===hH)return bH();if(!e)throw yv.create("no-app",{appName:r});return e}function bse(){return Array.from(qk.values())}function Nc(r,e,t){var n;let o=(n=j_e[r])!==null&amp;&amp;n!==void 0?n:r;t&amp;&amp;(o+=`-${t}`);let i=o.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let a=[`Unable to register library "${o}" with version "${e}":`];i&amp;&amp;a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&amp;&amp;s&amp;&amp;a.push("and"),s&amp;&amp;a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yy.warn(a.join(" "));return}Gf(new Tu(`${o}-version`,()=&gt;({library:o,version:e}),"VERSION"))}var Y_e="firebase-heartbeat-database",X_e=1,Yk="firebase-heartbeat-store",dH=null;function yse(){return dH||(dH=qy(Y_e,X_e,{upgrade:(r,e)=&gt;{switch(e){case 0:r.createObjectStore(Yk)}}}).catch(r=&gt;{throw yv.create("idb-open",{originalErrorMessage:r.message})})),dH}async function Q_e(r){try{return(await yse()).transaction(Yk).objectStore(Yk).get(Cse(r))}catch(e){if(e instanceof Fc)Yy.warn(e.message);else{let t=yv.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yy.warn(t.message)}}}async function mse(r,e){try{let n=(await yse()).transaction(Yk,"readwrite");return await n.objectStore(Yk).put(e,Cse(r)),n.done}catch(t){if(t instanceof Fc)Yy.warn(t.message);else{let n=yv.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Yy.warn(n.message)}}}function Cse(r){return`${r.name}!${r.options.appId}`}var J_e=1024,Z_e=30*24*60*60*1e3,gH=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new vH(t),this._heartbeatsCachePromise=this._storage.read().then(n=&gt;(this._heartbeatsCache=n,n))}async triggerHeartbeat(){let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=gse();if(this._heartbeatsCache===null&amp;&amp;(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=&gt;o.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=&gt;{let i=new Date(o.date).valueOf();return Date.now()-i&lt;=Z_e}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&amp;&amp;await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";let e=gse(),{heartbeatsToSend:t,unsentEntries:n}=eFe(this._heartbeatsCache.heartbeats),o=nH(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length&gt;0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}};function gse(){return new Date().toISOString().substring(0,10)}function eFe(r,e=J_e){let t=[],n=r.slice();for(let o of r){let i=t.find(s=&gt;s.agent===o.agent);if(i){if(i.dates.push(o.date),vse(t)&gt;e){i.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),vse(t)&gt;e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}var vH=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yN()?CN().then(()=&gt;!0).catch(()=&gt;!1):!1}async read(){return await this._canUseIndexedDBPromise?await Q_e(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return mse(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&amp;&amp;t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return mse(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&amp;&amp;t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}};function vse(r){return nH(JSON.stringify({version:2,heartbeats:r})).length}function tFe(r){Gf(new Tu("platform-logger",e=&gt;new cH(e),"PRIVATE")),Gf(new Tu("heartbeat",e=&gt;new gH(e),"PRIVATE")),Nc(pH,fse,r),Nc(pH,fse,"esm2017"),Nc("fire-js","")}tFe("");var rFe="firebase",nFe="9.17.2";Nc(rFe,nFe,"app");var wse="@firebase/installations",wH="0.6.4";var Tse=1e4,Dse=`w:${wH}`,kse="FIS_v2",oFe="https://firebaseinstallations.googleapis.com/v1",iFe=60*60*1e3,sFe="installations",aFe="Installations";var lFe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},Qy=new Hf(sFe,aFe,lFe);function Pse(r){return r instanceof Fc&amp;&amp;r.code.includes("request-failed")}function Ase({projectId:r}){return`${oFe}/projects/${r}/installations`}function Ise(r){return{token:r.token,requestStatus:2,expiresIn:dFe(r.expiresIn),creationTime:Date.now()}}async function Ese(r,e){let n=(await e.json()).error;return Qy.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _se({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function uFe(r,{refreshToken:e}){let t=_se(r);return t.append("Authorization",cFe(e)),t}async function Fse(r){let e=await r();return e.status&gt;=500&amp;&amp;e.status&lt;600?r():e}function dFe(r){return Number(r.replace("s","000"))}function cFe(r){return`${kse} ${r}`}async function pFe({appConfig:r,heartbeatServiceProvider:e},{fid:t}){let n=Ase(r),o=_se(r),i=e.getImmediate({optional:!0});if(i){let u=await i.getHeartbeatsHeader();u&amp;&amp;o.append("x-firebase-client",u)}let s={fid:t,authVersion:kse,appId:r.appId,sdkVersion:Dse},a={method:"POST",headers:o,body:JSON.stringify(s)},l=await Fse(()=&gt;fetch(n,a));if(l.ok){let u=await l.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Ise(u.authToken)}}else throw await Ese("Create Installation",l)}function Mse(r){return new Promise(e=&gt;{setTimeout(e,r)})}function hFe(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}var fFe=/^[cdef][\w-]{21}$/,xH="";function mFe(){try{let r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;let t=gFe(r);return fFe.test(t)?t:xH}catch(r){return xH}}function gFe(r){return hFe(r).substr(0,22)}function AN(r){return`${r.appName}!${r.appId}`}var Nse=new Map;function Bse(r,e){let t=AN(r);Rse(t,e),vFe(t,e)}function Rse(r,e){let t=Nse.get(r);if(!!t)for(let n of t)n(e)}function vFe(r,e){let t=bFe();t&amp;&amp;t.postMessage({key:r,fid:e}),yFe()}var Xy=null;function bFe(){return!Xy&amp;&amp;"BroadcastChannel"in self&amp;&amp;(Xy=new BroadcastChannel("[Firebase] FID Change"),Xy.onmessage=r=&gt;{Rse(r.data.key,r.data.fid)}),Xy}function yFe(){Nse.size===0&amp;&amp;Xy&amp;&amp;(Xy.close(),Xy=null)}var CFe="firebase-installations-database",SFe=1,Jy="firebase-installations-store",CH=null;function TH(){return CH||(CH=qy(CFe,SFe,{upgrade:(r,e)=&gt;{switch(e){case 0:r.createObjectStore(Jy)}}})),CH}async function PN(r,e){let t=AN(r),o=(await TH()).transaction(Jy,"readwrite"),i=o.objectStore(Jy),s=await i.get(t);return await i.put(e,t),await o.done,(!s||s.fid!==e.fid)&amp;&amp;Bse(r,e.fid),e}async function Lse(r){let e=AN(r),n=(await TH()).transaction(Jy,"readwrite");await n.objectStore(Jy).delete(e),await n.done}async function IN(r,e){let t=AN(r),o=(await TH()).transaction(Jy,"readwrite"),i=o.objectStore(Jy),s=await i.get(t),a=e(s);return a===void 0?await i.delete(t):await i.put(a,t),await o.done,a&amp;&amp;(!s||s.fid!==a.fid)&amp;&amp;Bse(r,a.fid),a}async function DH(r){let e,t=await IN(r.appConfig,n=&gt;{let o=xFe(n),i=wFe(r,o);return e=i.registrationPromise,i.installationEntry});return t.fid===xH?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function xFe(r){let e=r||{fid:mFe(),registrationStatus:0};return Ose(e)}function wFe(r,e){if(e.registrationStatus===0){if(!navigator.onLine){let o=Promise.reject(Qy.create("app-offline"));return{installationEntry:e,registrationPromise:o}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=TFe(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DFe(r)}:{installationEntry:e}}async function TFe(r,e){try{let t=await pFe(r,e);return PN(r.appConfig,t)}catch(t){throw Pse(t)&amp;&amp;t.customData.serverCode===409?await Lse(r.appConfig):await PN(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function DFe(r){let e=await Sse(r.appConfig);for(;e.registrationStatus===1;)await Mse(100),e=await Sse(r.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:n}=await DH(r);return n||t}return e}function Sse(r){return IN(r,e=&gt;{if(!e)throw Qy.create("installation-not-found");return Ose(e)})}function Ose(r){return kFe(r)?{fid:r.fid,registrationStatus:0}:r}function kFe(r){return r.registrationStatus===1&amp;&amp;r.registrationTime+Tse&lt;Date.now()}async function PFe({appConfig:r,heartbeatServiceProvider:e},t){let n=AFe(r,t),o=uFe(r,t),i=e.getImmediate({optional:!0});if(i){let u=await i.getHeartbeatsHeader();u&amp;&amp;o.append("x-firebase-client",u)}let s={installation:{sdkVersion:Dse,appId:r.appId}},a={method:"POST",headers:o,body:JSON.stringify(s)},l=await Fse(()=&gt;fetch(n,a));if(l.ok){let u=await l.json();return Ise(u)}else throw await Ese("Generate Auth Token",l)}function AFe(r,{fid:e}){return`${Ase(r)}/${e}/authTokens:generate`}async function kH(r,e=!1){let t,n=await IN(r.appConfig,i=&gt;{if(!Use(i))throw Qy.create("not-registered");let s=i.authToken;if(!e&amp;&amp;_Fe(s))return i;if(s.requestStatus===1)return t=IFe(r,e),i;{if(!navigator.onLine)throw Qy.create("app-offline");let a=MFe(i);return t=EFe(r,a),a}});return t?await t:n.authToken}async function IFe(r,e){let t=await xse(r.appConfig);for(;t.authToken.requestStatus===1;)await Mse(100),t=await xse(r.appConfig);let n=t.authToken;return n.requestStatus===0?kH(r,e):n}function xse(r){return IN(r,e=&gt;{if(!Use(e))throw Qy.create("not-registered");let t=e.authToken;return NFe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EFe(r,e){try{let t=await PFe(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await PN(r.appConfig,n),t}catch(t){if(Pse(t)&amp;&amp;(t.customData.serverCode===401||t.customData.serverCode===404))await Lse(r.appConfig);else{let n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await PN(r.appConfig,n)}throw t}}function Use(r){return r!==void 0&amp;&amp;r.registrationStatus===2}function _Fe(r){return r.requestStatus===2&amp;&amp;!FFe(r)}function FFe(r){let e=Date.now();return e&lt;r.creationTime||r.creationTime+r.expiresIn&lt;e+iFe}function MFe(r){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function NFe(r){return r.requestStatus===1&amp;&amp;r.requestTime+Tse&lt;Date.now()}async function BFe(r){let e=r,{installationEntry:t,registrationPromise:n}=await DH(e);return n?n.catch(console.error):kH(e).catch(console.error),t.fid}async function RFe(r,e=!1){let t=r;return await LFe(t),(await kH(t,e)).token}async function LFe(r){let{registrationPromise:e}=await DH(r);e&amp;&amp;await e}function OFe(r){if(!r||!r.options)throw SH("App Configuration");if(!r.name)throw SH("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!r.options[t])throw SH(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function SH(r){return Qy.create("missing-app-config-values",{valueName:r})}var zse="installations",UFe="installations-internal",zFe=r=&gt;{let e=r.getProvider("app").getImmediate(),t=OFe(e),n=Xk(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=&gt;Promise.resolve()}},HFe=r=&gt;{let e=r.getProvider("app").getImmediate(),t=Xk(e,zse).getImmediate();return{getId:()=&gt;BFe(t),getToken:o=&gt;RFe(t,o)}};function GFe(){Gf(new Tu(zse,zFe,"PUBLIC")),Gf(new Tu(UFe,HFe,"PRIVATE"))}GFe();Nc(wse,wH);Nc(wse,wH,"esm2017");var WFe="/firebase-messaging-sw.js",$Fe="/firebase-cloud-messaging-push-scope",Kse="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",VFe="https://fcmregistrations.googleapis.com/v1",qse="google.c.a.c_id",jFe="google.c.a.c_l",KFe="google.c.a.ts",qFe="google.c.a.e",Hse;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Hse||(Hse={}));var Qk;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Qk||(Qk={}));function Wf(r){let e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function YFe(r){let e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),o=new Uint8Array(n.length);for(let i=0;i&lt;n.length;++i)o[i]=n.charCodeAt(i);return o}var PH="fcm_token_details_db",XFe=5,Gse="fcm_token_object_Store";async function QFe(r){if("databases"in indexedDB&amp;&amp;!(await indexedDB.databases()).map(i=&gt;i.name).includes(PH))return null;let e=null;return(await qy(PH,XFe,{upgrade:async(n,o,i,s)=&gt;{var a;if(o&lt;2||!n.objectStoreNames.contains(Gse))return;let l=s.objectStore(Gse),u=await l.index("fcmSenderId").get(r);if(await l.clear(),!!u){if(o===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&amp;&amp;a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Wf(d.vapidKey)}}}else if(o===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wf(d.auth),p256dh:Wf(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wf(d.vapidKey)}}}else if(o===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wf(d.auth),p256dh:Wf(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wf(d.vapidKey)}}}}}})).close(),await kN(PH),await kN("fcm_vapid_details_db"),await kN("undefined"),JFe(e)?e:null}function JFe(r){if(!r||!r.subscriptionOptions)return!1;let{subscriptionOptions:e}=r;return typeof r.createTime=="number"&amp;&amp;r.createTime&gt;0&amp;&amp;typeof r.token=="string"&amp;&amp;r.token.length&gt;0&amp;&amp;typeof e.auth=="string"&amp;&amp;e.auth.length&gt;0&amp;&amp;typeof e.p256dh=="string"&amp;&amp;e.p256dh.length&gt;0&amp;&amp;typeof e.endpoint=="string"&amp;&amp;e.endpoint.length&gt;0&amp;&amp;typeof e.swScope=="string"&amp;&amp;e.swScope.length&gt;0&amp;&amp;typeof e.vapidKey=="string"&amp;&amp;e.vapidKey.length&gt;0}var ZFe="firebase-messaging-database",e2e=1,Zy="firebase-messaging-store",AH=null;function _H(){return AH||(AH=qy(ZFe,e2e,{upgrade:(r,e)=&gt;{switch(e){case 0:r.createObjectStore(Zy)}}})),AH}async function Yse(r){let e=MH(r),n=await(await _H()).transaction(Zy).objectStore(Zy).get(e);if(n)return n;{let o=await QFe(r.appConfig.senderId);if(o)return await FH(r,o),o}}async function FH(r,e){let t=MH(r),o=(await _H()).transaction(Zy,"readwrite");return await o.objectStore(Zy).put(e,t),await o.done,e}async function t2e(r){let e=MH(r),n=(await _H()).transaction(Zy,"readwrite");await n.objectStore(Zy).delete(e),await n.done}function MH({appConfig:r}){return r.appId}var r2e={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},za=new Hf("messaging","Messaging",r2e);async function n2e(r,e){let t=await BH(r),n=Qse(e),o={method:"POST",headers:t,body:JSON.stringify(n)},i;try{i=await(await fetch(NH(r.appConfig),o)).json()}catch(s){throw za.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(i.error){let s=i.error.message;throw za.create("token-subscribe-failed",{errorInfo:s})}if(!i.token)throw za.create("token-subscribe-no-token");return i.token}async function o2e(r,e){let t=await BH(r),n=Qse(e.subscriptionOptions),o={method:"PATCH",headers:t,body:JSON.stringify(n)},i;try{i=await(await fetch(`${NH(r.appConfig)}/${e.token}`,o)).json()}catch(s){throw za.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(i.error){let s=i.error.message;throw za.create("token-update-failed",{errorInfo:s})}if(!i.token)throw za.create("token-update-no-token");return i.token}async function Xse(r,e){let t=await BH(r),n={method:"DELETE",headers:t};try{let i=await(await fetch(`${NH(r.appConfig)}/${e}`,n)).json();if(i.error){let s=i.error.message;throw za.create("token-unsubscribe-failed",{errorInfo:s})}}catch(o){throw za.create("token-unsubscribe-failed",{errorInfo:o==null?void 0:o.toString()})}}function NH({projectId:r}){return`${VFe}/projects/${r}/registrations`}async function BH({appConfig:r,installations:e}){let t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Qse({p256dh:r,auth:e,endpoint:t,vapidKey:n}){let o={web:{endpoint:t,auth:e,p256dh:r}};return n!==Kse&amp;&amp;(o.web.applicationPubKey=n),o}var i2e=7*24*60*60*1e3;async function s2e(r){let e=await u2e(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:Wf(e.getKey("auth")),p256dh:Wf(e.getKey("p256dh"))},n=await Yse(r.firebaseDependencies);if(n){if(d2e(n.subscriptionOptions,t))return Date.now()&gt;=n.createTime+i2e?l2e(r,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await Xse(r.firebaseDependencies,n.token)}catch(o){console.warn(o)}return Wse(r.firebaseDependencies,t)}else return Wse(r.firebaseDependencies,t)}async function a2e(r){let e=await Yse(r.firebaseDependencies);e&amp;&amp;(await Xse(r.firebaseDependencies,e.token),await t2e(r.firebaseDependencies));let t=await r.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function l2e(r,e){try{let t=await o2e(r.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await FH(r.firebaseDependencies,n),t}catch(t){throw await a2e(r),t}}async function Wse(r,e){let n={token:await n2e(r,e),createTime:Date.now(),subscriptionOptions:e};return await FH(r,n),n.token}async function u2e(r,e){let t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:YFe(e)})}function d2e(r,e){let t=e.vapidKey===r.vapidKey,n=e.endpoint===r.endpoint,o=e.auth===r.auth,i=e.p256dh===r.p256dh;return t&amp;&amp;n&amp;&amp;o&amp;&amp;i}function $se(r){let e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return c2e(e,r),p2e(e,r),h2e(e,r),e}function c2e(r,e){if(!e.notification)return;r.notification={};let t=e.notification.title;t&amp;&amp;(r.notification.title=t);let n=e.notification.body;n&amp;&amp;(r.notification.body=n);let o=e.notification.image;o&amp;&amp;(r.notification.image=o);let i=e.notification.icon;i&amp;&amp;(r.notification.icon=i)}function p2e(r,e){!e.data||(r.data=e.data)}function h2e(r,e){var t,n,o,i,s;if(!e.fcmOptions&amp;&amp;!(!((t=e.notification)===null||t===void 0)&amp;&amp;t.click_action))return;r.fcmOptions={};let a=(o=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&amp;&amp;o!==void 0?o:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&amp;&amp;(r.fcmOptions.link=a);let l=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&amp;&amp;(r.fcmOptions.analyticsLabel=l)}function f2e(r){return typeof r=="object"&amp;&amp;!!r&amp;&amp;qse in r}Jse("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Jse("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Jse(r,e){let t=[];for(let n=0;n&lt;r.length;n++)t.push(r.charAt(n)),n&lt;e.length&amp;&amp;t.push(e.charAt(n));return t.join("")}function m2e(r){if(!r||!r.options)throw IH("App Configuration Object");if(!r.name)throw IH("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(let n of e)if(!t[n])throw IH(n);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function IH(r){return za.create("missing-app-config-values",{valueName:r})}var EH=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let o=m2e(e);this.firebaseDependencies={app:e,appConfig:o,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};async function g2e(r){try{r.swRegistration=await navigator.serviceWorker.register(WFe,{scope:$Fe}),r.swRegistration.update().catch(()=&gt;{})}catch(e){throw za.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function v2e(r,e){if(!e&amp;&amp;!r.swRegistration&amp;&amp;await g2e(r),!(!e&amp;&amp;!!r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw za.create("invalid-sw-registration");r.swRegistration=e}}async function b2e(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=Kse)}async function Zse(r,e){if(!navigator)throw za.create("only-available-in-window");if(Notification.permission==="default"&amp;&amp;await Notification.requestPermission(),Notification.permission!=="granted")throw za.create("permission-blocked");return await b2e(r,e==null?void 0:e.vapidKey),await v2e(r,e==null?void 0:e.serviceWorkerRegistration),s2e(r)}async function y2e(r,e,t){let n=C2e(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[qse],message_name:t[jFe],message_time:t[KFe],message_device_time:Math.floor(Date.now()/1e3)})}function C2e(r){switch(r){case Qk.NOTIFICATION_CLICKED:return"notification_open";case Qk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function S2e(r,e){let t=e.data;if(!t.isFirebaseMessaging)return;r.onMessageHandler&amp;&amp;t.messageType===Qk.PUSH_RECEIVED&amp;&amp;(typeof r.onMessageHandler=="function"?r.onMessageHandler($se(t)):r.onMessageHandler.next($se(t)));let n=t.data;f2e(n)&amp;&amp;n[qFe]==="1"&amp;&amp;await y2e(r,t.messageType,n)}var Vse="@firebase/messaging",jse="0.12.4";var x2e=r=&gt;{let e=new EH(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=&gt;S2e(e,t)),e},w2e=r=&gt;{let e=r.getProvider("messaging").getImmediate();return{getToken:n=&gt;Zse(e,n)}};function T2e(){Gf(new Tu("messaging",x2e,"PUBLIC")),Gf(new Tu("messaging-internal",w2e,"PRIVATE")),Nc(Vse,jse),Nc(Vse,jse,"esm2017")}async function RH(){try{await CN()}catch(r){return!1}return typeof window!="undefined"&amp;&amp;yN()&amp;&amp;ase()&amp;&amp;"serviceWorker"in navigator&amp;&amp;"PushManager"in window&amp;&amp;"Notification"in window&amp;&amp;"fetch"in window&amp;&amp;ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&amp;&amp;PushSubscription.prototype.hasOwnProperty("getKey")}function D2e(r,e){if(!navigator)throw za.create("only-available-in-window");return r.onMessageHandler=e,()=&gt;{r.onMessageHandler=null}}function eae(r=yH()){return RH().then(e=&gt;{if(!e)throw za.create("unsupported-browser")},e=&gt;{throw za.create("indexed-db-unsupported")}),Xk(xN(r),"messaging").getImmediate()}async function LH(r,e){return r=xN(r),Zse(r,e)}function tae(r,e){return r=xN(r),D2e(r,e)}T2e();var k2e="push_message",rae="LNS_FIREBASE";async function OH(){return await RH()}var jx=class{constructor(e,t,n){this.messaging=e;this.pushToken=t;this.options=n;this.handleForegroundMessageHandler=()=&gt;e=&gt;{var n,o,i;let t=P2e(e);if(!!t)if(oae(t))(n=this.loginAlertHandler)==null||n.call(this,t);else if(iae(t))(o=this.sharedNoteInvitationHandler)==null||o.call(this,t,!1);else{let s=t.data.body,a=nae(t);(i=this.foregroundHandler)==null||i.call(this,s,a)}};this.handleBackgroundMessageHandler=()=&gt;e=&gt;{var n,o,i;if(e.origin!==location.origin||e.data.type!==k2e)return;let t=e.data.payload;if(oae(t))(n=this.loginAlertHandler)==null||n.call(this,t);else if(iae(t))(o=this.sharedNoteInvitationHandler)==null||o.call(this,t,!0,e.data.link);else{let s=nae(t);e.data.link&amp;&amp;((i=this.backgroundHandler)==null||i.call(this,e.data.link,s))}};this.kAppLoadedKey="app-loaded"}static async create(e){try{let{config:t,vapidKey:n,releaseStage:o,lang:i}=e;if(!await OH()||await Notification.requestPermission()!=="granted")return;let a=bse().find(h=&gt;h.name===rae);a||(a=bH(t,rae));let l=eae(a),u=await navigator.serviceWorker.register("/js/sw/fcm-sw.js",{scope:"/js/sw/fcm-scope"});await u.update();let d=await LH(l,{vapidKey:n,serviceWorkerRegistration:u});await ie.apiClient.setMobilePushToken(d),await ie.lnsClient.registerMobilePush({token:d,releaseStage:o,lang:i});let c={...e,serviceWorkerRegistration:u},p=new jx(l,d,c);return tae(l,p.handleForegroundMessageHandler()),navigator.serviceWorker.addEventListener("message",p.handleBackgroundMessageHandler()),p}catch(t){throw Je.catchError(t),fe.log("FcmPushClient initialization failed: ",t),t}}async updateValidPushToken(){try{let e=await LH(this.messaging,this.options);if(this.pushToken!==e){let{releaseStage:t,lang:n}=this.options;await ie.apiClient.setMobilePushToken(e),await ie.lnsClient.registerMobilePush({token:e,releaseStage:t,lang:n}),this.pushToken=e}}catch(e){throw Je.catchError(e),fe.warn("could not get a push token",e),e}}set backgroundMobilePushHandler(e){this.backgroundHandler=e}set foregroundMobilePushHandler(e){this.foregroundHandler=e}set loginAlertMessageHandler(e){this.loginAlertHandler=e}set sharedNoteInviteMessageHandler(e){this.sharedNoteInvitationHandler=e}notifyAppLoaded(){var e;(e=this.options.serviceWorkerRegistration.active)==null||e.postMessage(this.kAppLoadedKey)}};function nae(r){let e=r.data,{id:t,type:n}=e;return{id:t,type:n,data:e}}var P2e=r=&gt;{if(!r.data)return;let e={data:{}};for(let t of Object.keys(r.data))Object.assign(e.data,{[t]:Number(r.data[t])||r.data[t]});return e};var oae=r=&gt;r.data.type==="signed_in_alert",iae=r=&gt;r.data.type==="invited_to_shared_note";var A2e=Do();function sae(r){return async e=&gt;{let t=r.current,n=dp(t);if(typeof n=="number"){if(e.action==="screen_lock"){if(t.reduce(dg(n,e.value)),e.expired_at){let o=new Date(e.expired_at),i=new Date;if(o.getTime()&lt;=i.getTime())t.reduce(dg(n,!1));else{let s=o.getTime()-i.getTime();A2e(()=&gt;{t.reduce(dg(n,!1))},s)}}}else if(Aq(e))t.reduce(pp(n,e));else if(Iq(e))t.reduce(tS(e.user,e.state));else if(e.action==="enable_tunnel")t.reduce(M1(n,e.enabled));else if(e.action==="user_status_change")t.reduce(Zq(n,e));else if(e.action==="submission")uae(t,n,e);else if(e.action==="update_submission")dae(t,n,e);else if(e.action==="submit"){t.userInfo.is_teacher&amp;&amp;t.pushTokenState!=="registered"&amp;&amp;Zp(t,n),I2e(t,n,e);let o=pn(n,e.submission_number),i=t.submissions.byKey[o];if(i&amp;&amp;i.submission_number===t.submissionNumber){let s=await E2e(t,e,!t.userInfo.is_teacher&amp;&amp;e.publisher!==t.userInfo.user_id&amp;&amp;i.hide_author);if(!s||!t.userInfo.is_teacher&amp;&amp;!i.reveal_answer&amp;&amp;s.author_id!==t.userInfo.user_id)return;Vie(t,{courseId:n,submissionNumber:i.submission_number,answer:s})}}else if(e.action==="document_annotation_layer_update"||e.action==="document_extension_layer_update"){let{action:o}=e,i=o==="document_annotation_layer_update"?"annotation":"drawn",s=$h(e.document,e.index);i==="annotation"?t.reduce(ZE(s,e),eS(e.document,{annotation_layer_updated:!0})):i==="drawn"&amp;&amp;t.reduce(e_(s,e),eS(e.document,{extension_layer_updated:!0}))}else if(e.action==="update_document_thumbnail"){let o=H0(e.document,e.index);t.reduce(()=&gt;({thumbUpdateNotifications:{document:{[o]:{$set:e}}}}))}else if(e.action==="update_annotation_layer_thumbnail"){let o=H0(e.document,e.index);t.reduce(()=&gt;({thumbUpdateNotifications:{annotation:{[o]:{$set:e}}}}))}else if(e.action==="share"){let o=t.userInfo.user_id,i=t.desktop;if(o!==e.publisher&amp;&amp;e.share_user_ids.includes(t.userInfo.user_id)&amp;&amp;t.pageVisible&amp;&amp;!!(i!=null&amp;&amp;i.noteId)&amp;&amp;(t.reduce(hU({id:e.file})),t.pushTokenState!=="registered")){let s=i.isShared?void 0:["share"];Zp(t,n,s)}}else if(e.action==="reply"){let o=t.userInfo.user_id,i=t.desktop;if(o!==e.publisher&amp;&amp;e.to===o&amp;&amp;t.pageVisible&amp;&amp;!!(i!=null&amp;&amp;i.noteId)&amp;&amp;(t.reduce(hU({id:e.file,snapshotId:e.snapshot_id})),t.pushTokenState!=="registered")){let s=i.isShared?void 0:["comment_on_submission_answer"];Zp(t,n,s)}}}}}function aae(r){return e=&gt;{var i;let t=r.current,n=(i=t.newSubmissionDialog)==null?void 0:i.courseId,o=dp(t);!n||n===o||(e.action==="submission"?uae(t,n,e):e.action==="update_submission"&amp;&amp;dae(t,n,e))}}function lae(r){return e=&gt;{let t=r.current,n=dp(t);if(typeof n=="number"&amp;&amp;!!t.userInfo.is_teacher){if(e.action==="submission_in_preparation"){let o={submission_number:e.submission_number,expiry:null,hide_author:e.hide_author,reveal_answer:e.reveal_answer,message:e.message,submit_date:null,submitted:!1,timestamp:new Date().toISOString(),preparation:e.preparation};t.reduce(rS(n,e.submission_number,o))}else if(e.action==="update_submission_in_preparation"){let o={};e.reveal_answer!==void 0&amp;&amp;(o.reveal_answer=e.reveal_answer),e.hide_author!==void 0&amp;&amp;(o.hide_author=e.hide_author),e.message!==void 0&amp;&amp;(o.message=e.message),e.preparation!==void 0&amp;&amp;(o.preparation=e.preparation),t.reduce(N1(n,e.submission_number,o))}}}}function uae(r,e,t){if(t.submission_action==="new"){let n={submission_number:t.current_submission_number,expiry:t.expiry||null,hide_author:t.hide_author,reveal_answer:t.reveal_answer,message:t.submission_message||"",submit_date:null,submitted:!1,timestamp:new Date().toISOString(),preparation:!1};r.reduce(rS(e,t.current_submission_number,n))}else t.submission_action==="delete"&amp;&amp;r.reduce(B1(e,t.submission_number),F1(t.submission_number))}function dae(r,e,t){let n={preparation:!1};t.expiry!==void 0&amp;&amp;(n.expiry=t.expiry),r.userInfo.is_graduated?n.reveal_answer=0:t.reveal_answer!==void 0&amp;&amp;(n.reveal_answer=t.reveal_answer),t.hide_author!==void 0&amp;&amp;(n.hide_author=t.hide_author),t.message!==void 0&amp;&amp;(n.message=t.message);let o=t.submission_number,i=pn(e,o);r.submissions.byKey[i]?r.reduce(N1(e,o,n)):hN({store:r,courseId:e,submissionNumber:o})}function I2e(r,e,t){let n=t.submission_number,o=t.publisher;if(!r.userInfo.is_teacher&amp;&amp;o!==r.userInfo.user_id)return;let i=rg(e,n,o),s=r.submissionHistoryAttributes[i];if(s){r.reduce(c_({courseId:e,submissionNumber:n,authorId:o,attributes:{count:s.count+1,latest_generation:t.generation}}));return}let a=r.submissionAnswer?r.submissionAnswers.byId[r.submissionAnswer.id]:void 0;(a==null?void 0:a.author_id)===o&amp;&amp;mN(r,{courseId:e,submissionNumber:n,authorId:o})}async function E2e(r,e,t){let n=e.publisher,o=await Mq(r,n);return o?{author_id:t?void 0:n,author_name:t?void 0:zt(o),author_is_teacher:t?void 0:o.is_teacher,author_key:e.publisher_key,id:e.file,extension:e.extension,submission_number:e.submission_number,page_count:e.page_count,timestamp:e.timestamp,reply_status:{annotation_layer_updated:!1,done:!1,extension_layer_updated:!1},document_thumbnail:e.document_thumbnail,annotation_thumbnail:e.annotation_thumbnail,generation:e.generation}:void 0}var cae=()=&gt;{var b,C,x;let r=Me(),e=dp(r);(0,Zn.useEffect)(()=&gt;{Or(e)&amp;&amp;Ua(r,e)},[e]);let t=k1(r),n=up(r),o=Q4(r);(0,Zn.useEffect)(()=&gt;{t||n||o||r.batchDownloadState!=="idle"?f_(r):h_(r)},[t,n,o,r.batchDownloadState]),(0,Zn.useEffect)(()=&gt;{r.materialBoxOpen?f_(r,()=&gt;{r.reduce(Zh(!1))}):h_(r)},[r.materialBoxOpen]),(0,Zn.useEffect)(()=&gt;{r.cameraDialogOpen?f_(r,()=&gt;{r.reduce(cg(!1))}):h_(r)},[r.cameraDialogOpen]),(0,Zn.useEffect)(()=&gt;{typeof e=="number"&amp;&amp;$ie(r,e)},[e,r.submissions.updatedAt]),(0,Zn.useEffect)(()=&gt;{Or(e)&amp;&amp;Vy({store:r,courseId:e})},[e]);let i=(0,Zn.useRef)();(0,Zn.useEffect)(()=&gt;{var y;Y6(i.current),(y=r.screenSharingState)!=null&amp;&amp;y.sessionId&amp;&amp;(i.current=Fie(r,r.screenSharingState.courseId,r.screenSharingState.sessionId,30))},[(b=r.screenSharingState)==null?void 0:b.sessionId]),(0,Zn.useEffect)(()=&gt;{var y;if(!r.pageFocused&amp;&amp;((y=r.screenSharingState)==null?void 0:y.sessionId)){let{courseId:S,sessionId:T}=r.screenSharingState;Iie(r,S,T)}},[r.pageFocused]);let{screenSharingState:s}=r,a=s!=null&amp;&amp;s.courseId?r.screenSharingActionNotification[s.courseId]:void 0;(0,Zn.useEffect)(()=&gt;{if(!s||!a)return;let{sessionId:y,courseId:S}=s;Mb(a)&amp;&amp;a.id===y&amp;&amp;r.reduce(Os(void 0),we(33,null),pp(S,void 0),ho())},[s,a]),(0,Zn.useEffect)(()=&gt;{if(!r.screenSharingState)return;let{sessionId:y,courseId:S}=r.screenSharingState;return r.fetchStates[nt.receiverStatus(S)]!=="fetching"&amp;&amp;XM(r,S,y),()=&gt;{r.reduce(Jq())}},[(C=r.screenSharingState)==null?void 0:C.sessionId]);let l=(0,Zn.useRef)(r);(0,Zn.useEffect)(()=&gt;{l.current=r},[r]),(0,Zn.useEffect)(()=&gt;{if(typeof e!="number")return;fe.log(`push: subscribe courses/${e}`);let y=sae(l),S=ie.pushClient.subscribeCourse(e,y);return()=&gt;{fe.log(`push: unsubscribe courses/${e}`),ie.pushClient.unsubscribeCourse(e,S)}},[e]),(0,Zn.useEffect)(()=&gt;{if(typeof e!="number"||!r.userInfo.is_teacher)return;fe.log(`push: subscribe courses_only_teachers/${e}`);let y=lae(l),S=ie.pushClient.subscribeCourseOnlyTeachers(e,y);return()=&gt;{fe.log(`push: unsubscribe courses_only_teachers/${e}`),ie.pushClient.unsubscribeCourseOnlyTeachers(e,S)}},[e]),(0,Zn.useEffect)(()=&gt;{var w;let y=(w=r.newSubmissionDialog)==null?void 0:w.courseId;if(!y||e===y)return;fe.log(`push: subscribe courses/${y}`);let S=aae(l),T=ie.pushClient.subscribeCourse(y,S);return()=&gt;{fe.log(`push: unsubscribe courses/${y}`),ie.pushClient.unsubscribeCourse(y,T)}},[(x=r.newSubmissionDialog)==null?void 0:x.courseId]);let{uploadingDocument:u,sendingDocument:d,submittingDocument:c}=r;(0,Zn.useEffect)(()=&gt;()=&gt;{u&amp;&amp;Wx(u)},[u]),(0,Zn.useEffect)(()=&gt;()=&gt;{c&amp;&amp;Wx(c)},[c]),(0,Zn.useEffect)(()=&gt;()=&gt;{d&amp;&amp;Wx(d)},[d]);let{userPreference:p}=r;(0,Zn.useEffect)(()=&gt;{bq(r.userInfo.user_id,p)},[p]),(0,Zn.useEffect)(()=&gt;{if(typeof e!="number")return;if(!r.userInfo.is_teacher){Lk(r,e);return}let S=window.performance.getEntriesByType("navigation").find(T=&gt;T instanceof PerformanceNavigationTiming&amp;&amp;T.type==="reload")!==void 0;Lk(r,e,!S)},[]),Al(()=&gt;{typeof e=="number"&amp;&amp;Lk(r,e)},[e]),(0,Zn.useEffect)(()=&gt;{(async y=&gt;{y?await ie.lnsClient.attendCourse(y):await ie.lnsClient.leaveCourse()})(e).catch(y=&gt;{Je.catchError(y)||fe.error(y)})},[e]),(0,Zn.useEffect)(()=&gt;{async function y(){var T,w,k;if(!r.drawnAssetUploadTrigger)return;let S=r.drawnAssetUploadTrigger;for(let A of S){let{geometry:I,card:E}=A,{canvas:O}=I,Q,j=Xn.forCard("drawn",E.id),U,B;if(((T=r.desktop)==null?void 0:T.isShared)&amp;&amp;j.receivedStrokeRevision){if(!j.assetLoadedAtLeastOnce)return;U=j.receivedStrokeRevision,B=j.packReceivedContents()}else U=(w=j.extRevision)!=null?w:`${Date.now()}-0`,B=j.packContents();try{let V=await E_({canvas:O,contents:B,revision:U});Q=new File([V],"stroke.lnstroke",{type:"application/zip"})}catch(V){let re=56,ce=he.get().strings;r.reduce(me(re,{title:ce.couldntEncodeDrawnData,...ot(V),okMessage:ce.back,onOk:()=&gt;r.reduce(me(re,void 0))}));return}let z=mr.forCard(E.id),N;(k=r.desktop)!=null&amp;&amp;k.isShared?N=l8({geometry:I,contents:B}):N=z.drawn.redrawThumbnails({geometry:I,contents:B}),await l6(r,{cardId:E.id,file:Q,thumb:N,geometry:I,extension:".lnstroke",revision:U,drawnType:"drawn"})}}y()},[r.drawnAssetUploadTrigger]),(0,Zn.useEffect)(()=&gt;{if(r.pushState){let{url:y,title:S,type:T}=r.pushState,w={...r};(T==="note-list"||T==="course-list")&amp;&amp;delete w.desktop;let k=G0(w);location.pathname!==y&amp;&amp;(fe.log("pushState",r.pushState,k),window.history.pushState(k,S,y))}},[r.pushState]),(0,Zn.useEffect)(()=&gt;{!r.pushState||(document.title=r.pushState.title)},[r.pushState]),(0,Zn.useEffect)(()=&gt;{if(!r.pageVisible)return;let y=l.current.pushTokenState;y==="registered"||y==="update failed"?ie.fcmPushClient.updateValidPushToken().catch(S=&gt;{l.current.reduce(H1("update failed"))}):(!y||y==="register failed")&amp;&amp;jx.create({config:r.firebaseConfig,vapidKey:r.fcmVapidKey,releaseStage:r.fcmReleaseStage,enableLog:r.logEnabled,lang:mK(l.current.locale)}).then(S=&gt;{if(!S){l.current.reduce(H1("unregistered"));return}S.foregroundMobilePushHandler=h,S.backgroundMobilePushHandler=f,S.loginAlertMessageHandler=m(),S.sharedNoteInviteMessageHandler=g(),ie.fcmPushClient=S,l.current.reduce(H1("registered")),S.notifyAppLoaded()}).catch(S=&gt;{l.current.reduce(H1("register failed"))})},[r.pageVisible]);let h=(y,S)=&gt;{var T;if(((T=l.current.desktop)==null?void 0:T.courseId)===S.data.course_id){S.type==="reveal_submission_answers"&amp;&amp;!l.current.editor&amp;&amp;!l.current.cameraDialogOpen&amp;&amp;r.reduce(Jt({type:"normal",text:y}));let w=S.type==="submit"||S.type==="reveal_submission_answers",k=l.current.desktop.isShared&amp;&amp;(S.type==="share"||S.type==="comment_on_submission_answer");w||k?r.reduce(vN(S)):bv([S.id])}else S.type!=="submit"&amp;&amp;r.reduce(tse(y)),S.type==="share"||S.type==="comment_on_submission_answer"||S.type==="submit"||S.type==="reveal_submission_answers"?r.reduce(vN(S)):bv([S.id])},f=async(y,S)=&gt;{var I,E;let T=l.current,w=he.get().strings,k=S.data.course_id,A=[];if(S.type==="notify_submission")A.push(mY({courseId:k,submissionNumber:S.data.submission_number}));else if(S.type==="reveal_submission_answers"||S.type==="submit")if(k===((I=T.desktop)==null?void 0:I.courseId))A.push(lS(),W1(),Qq(k,S.data.submission_number));else{let O=w.confirmCloseNoteForOtherSubmissionBox;if(!T.desktop||confirm(O)){location.href=y;return}}else if(S.type==="share"||S.type==="comment_on_submission_answer")if(k===((E=T.desktop)==null?void 0:E.courseId)){let O=S.data.timeline_entry_id;A.push(lS(),W1()),O?A.push(oY(k,O)):A.push(iS(!0))}else{let O=w.confirmCloseNoteForOtherTimeline;if(!T.desktop||confirm(O)){location.href=y;return}}S.type==="notify_submission"?bv([S.id]):A.push(vN(S)),T.reduce(...A)},m=()=&gt;{let y=[];return S=&gt;{let T=73,w=he.get().strings;if(l.current.alerts[T]){y.push(S.data);return}let k=()=&gt;{r.reduce(Co(T,void 0));let E=y.pop();!E||setTimeout(()=&gt;{r.reduce(Co(T,{title:E.title,message:E.body,okMessage:w.okay,onOk:k,color:"info"}))},500)},{title:A,body:I}=S.data;r.reduce(Co(T,{title:A,message:I,okMessage:w.okay,onOk:k,color:"info"}))}},g=()=&gt;{let y=he.get().strings;return(S,T,w)=&gt;{var I;let k=S.data.course_id,A=S.data.note_id;if(l.current.reduce(Wi({experimentalFeatures:{enableSharedNote:{$set:!0}}}),ei(nt.notes(k),null)),T){if(l.current.desktop&amp;&amp;((I=l.current.desktop)==null?void 0:I.noteId)!==A){let E=y.confirmCloseNoteForOtherCourse;if(!confirm(E))return}w&amp;&amp;location.href!==w&amp;&amp;(location.href=w)}}};(0,Zn.useEffect)(()=&gt;{r.reduce(ho())},[r.assetUploadStates]);let v=on(r);return(0,Zn.useEffect)(()=&gt;{v&amp;&amp;r.reduce(hn(void 0)),r.reduce(ho())},[v]),Zn.default.createElement("div",{className:"storeObserver"})};var Mi=oe(ve());var EN=oe(ve()),UH=EN.default.createContext({popoverOpen:!1,courseId:0,noteId:0,isShared:!1});function Sd(){return(0,EN.useContext)(UH)}var Jk=oe(ve());var _N=oe(ve());var FN=({store:r})=&gt;{if(!r.desktop)return null;let e=sg(r,r.desktop.courseId),t=r.notes.byId[r.desktop.noteId],n=t==null?void 0:t.name;return _N.default.createElement("div",{className:"userProfileCourse"},e&amp;&amp;_N.default.createElement("div",{className:"userProfileText"},e),n&amp;&amp;_N.default.createElement("div",{className:"userProfileText"},n))};var eh=oe(ve()),MN=oe(ve());var zH=oe(Wr());var pae=({store:r})=&gt;{var u,d;let e=pe(),{courseId:t}=Sd();if(typeof t!="number")return null;let o=((u=r.submissions.byActiveInCourse[t])!=null?u:[]).map(c=&gt;r.submissions.byKey[c]).filter(c=&gt;!!c),i=(d=o.find(c=&gt;!c.submitted))!=null?d:o.find(c=&gt;c.submitted);if(!i)return null;let s=_2e({submissions:o.filter(c=&gt;i.submitted===c.submitted),fallbackName:i.submitted?e.statusSubmitted:e.openTask,t:e});return eh.default.createElement(F2e,{sub:i,msg:s,onCountDown0:()=&gt;{r.reduce(n_())},onClick:()=&gt;{r.reduce(J0(!0),Jh(i.submission_number))}})},_2e=r=&gt;{let{submissions:e,fallbackName:t,t:n}=r,o=e[0],i=o.message?o.message:t,s=e.length;if(s&gt;10)i+=(0,zH.sprintf)(n.others,s-1);else if(s&gt;1){let a=he.get().pluralSafeSuffix(s-1);i+=(0,zH.sprintf)(n.openTaskCount,s-1,a)}return i},F2e=({sub:r,msg:e,onCountDown0:t,onClick:n})=&gt;{let[o,i]=(0,MN.useState)();return(0,MN.useEffect)(()=&gt;{Ee(r.expiry!=null);let s=new su(new Date(r.expiry).getTime()-Date.now());if(s.isPast()){t();return}r.submitted||i(s.toRelativeString());let a=dS.subscribe(()=&gt;{Ee(r.expiry!=null);let l=new su(new Date(r.expiry).getTime()-Date.now());if(l.isPast()){t();return}r.submitted||i(l.toRelativeString())});return()=&gt;a.close()},[r]),eh.default.createElement("div",{className:"submissionBoard",role:"button",onClick:n},!r.submitted&amp;&amp;!!o&amp;&amp;eh.default.createElement(eh.default.Fragment,null,eh.default.createElement("div",{className:"submissionBoardTime"},o),eh.default.createElement("div",{style:{height:5,width:10,flexShrink:0}})),eh.default.createElement("div",{className:"submissionBoardTitle"},r.submitted&amp;&amp;eh.default.createElement(lr,{src:"/svg/check_green.svg",alt:"submissionBoardStatusMark",className:"submissionBoardStatusMark"}),eh.default.createElement("span",{className:"submissionBoardTitleInner"},e)))};var hae=({store:r})=&gt;Jk.default.createElement("div",{className:"desktopHeader"},Jk.default.createElement("div",{className:"desktopHeaderCenter"},r.screen.isMobile&amp;&amp;r.screen.width&lt;480&amp;&amp;Jk.default.createElement(FN,{store:r}),Jk.default.createElement(pae,{store:r})));var En=oe(ve());var aG=oe(Wr());var M2e=1e9;function Kx(r,e,t=M2e){for(let n of e)if(n.size&gt;t){let o=31,i=he.get().strings;return r.reduce(me(o,{title:i.fileTooBigTitle,message:i.fileTooBigMessage,onOk:()=&gt;r.reduce(me(o,void 0)),okMessage:i.back})),!1}return!0}var Xx=oe(Wr());var Cv=oe(Wr());function NN({store:r,targetId:e,courseId:t,onOk:n}){return o=&gt;{r.reduce(me(28,xd({error:o,isDocument:!0,targetId:e,courseId:t,okMessage:he.get().strings.closeThisScreen,onOk:n})))}}function xd({error:r,courseId:e,targetId:t,okMessage:n,title:o,onOk:i,isDocument:s}){let a=he.get().strings,l=s?a.material:a.note;if(o=o!=null?o:(0,Cv.sprintf)(a.couldntOpenItem,l),r instanceof tp)return{title:o,message:a.couldntGet_CheckInternetConnection,okMessage:n,onOk:i};if(r instanceof uf)return{title:o,message:(0,Cv.sprintf)(a.brokenNoteErrorMsg,l,r.type,e,t),okMessage:n,onOk:i};if(r instanceof CS)return{title:o,message:(0,Cv.sprintf)(a.unsupportedNoteVerErrorMsg,l,r.version),okMessage:n,onOk:i};if(r instanceof q1)return{title:o,message:(0,Cv.sprintf)(a.unsupportedNoteFeatErrorMsg,l,r.version,r.features.toString()),okMessage:n,onOk:i};if(r instanceof og)return{title:o,message:a.sharedNoteProtocolVersionErrorMsg,okMessage:n,onOk:i};if(r instanceof sr)switch(r.status){case 202:return{title:o,message:(0,Cv.sprintf)(a.api202ErrorMsg,l),okMessage:n,onOk:i};case 403:return{title:o,message:(0,Cv.sprintf)(a.api403ErrorMsg,l),okMessage:n,onOk:i};case 404:return{title:o,message:(0,Cv.sprintf)(a.api404ErrorMsg,l),okMessage:n,onOk:i};default:return{title:o,message:`${r.status}: ${a.unknownApiErrorMsg}`,okMessage:n,onOk:i}}else return{title:o,okMessage:n,onOk:i,...ot(r)}}async function HH(r){let e=0;for(let t of r.head.iteratorOverGroup()){let n=await N2e({...r,pageIndex:e++});for(let[o,[i,s]]of n.entries()){let a=t.drawnGeometry(o),l={card:t,type:o,layer:i,drawn:s};await B2e(l).then(u=&gt;R2e(i,u)).then(u=&gt;L2e({...l,drawn:u,geometry:a})).then(u=&gt;{let d=o==="annotation"?"annotations":o;t.gadgets[d]={...a,asset:{remote_id:u}}})}}}async function N2e({documentId:r,pageIndex:e,snapshotId:t}){let n,o;Or(t)?[n,o]=await Promise.all([ie.lnsClient.getDocumentLayerSnapshot({documentId:r,index:e,type:"annotation",snapshotId:t}),ie.lnsClient.getDocumentLayerSnapshot({documentId:r,index:e,type:"drawn",snapshotId:t})]):[n,o]=await Promise.all([ie.lnsClient.getDocumentLayer({documentId:r,index:e,type:"annotation",afterGeneration:0}),ie.lnsClient.getDocumentLayer({documentId:r,index:e,type:"drawn",afterGeneration:0})]);let i=new Map;return n&amp;&amp;i.set("annotation",n),o&amp;&amp;i.set("drawn",o),i}async function B2e(r){let{card:e,type:t,layer:n,drawn:o,signal:i}=r,s=e.drawnAssetId(t);return s&amp;&amp;!n.ignore_base?await ie.lnsClient.downloadAsset(s,i).then(__).then(({contents:a})=&gt;a.concat(o)):o}function R2e(r,e){let t=new Set(r.garbage);return e.filter(n=&gt;!t.has(n.id))}async function L2e(r){let{card:e,type:t,layer:n,drawn:o,geometry:i}=r,s=mr.get(e),{small:a,medium:l}=s[t].redrawThumbnails({geometry:i,contents:o});Ee(a&amp;&amp;l,`thumbs for ${t} must be generated!`);let u=await E_({canvas:n.canvas,contents:o}),{id:d}=await ie.lnsClient.uploadGenericFile({file:new File([u],`${t}.lnstroke`,{type:"application/zip"}),extWithDot:".lnstroke"}),{id:c}=await ie.lnsClient.uploadGenericFile({file:await io(a,"image/png","small.png"),extWithDot:".png"}),{id:p}=await ie.lnsClient.uploadGenericFile({file:await io(l,"image/png","medium.png"),extWithDot:".png"});return await ie.lnsClient.createAsset({pageCount:1,assetGenericFileId:d,attachments:{metadata:[{}],thumbnails:[{index:0,small:c,medium:p}]}})}var fae=["ThinkingToolSheet","ThinkingToolVennDiagram2","ThinkingToolVennDiagram3","ThinkingToolYChart","ThinkingToolXChart","ThinkingToolWChart","ThinkingToolButterflyChart","ThinkingToolPyramidChart","ThinkingToolPMI","ThinkingToolFishBone","ThinkingToolPlotDiagramLeft","ThinkingToolPlotDiagramRight","ThinkingToolCandy","ThinkingToolWebbing","ThinkingToolFork","ThinkingToolDataChart3","ThinkingToolDataChart6","ThinkingToolJellyfish","ThinkingToolCoordinate1Axis","ThinkingToolCoordinate2Axes","ThinkingToolConcentricCircles","ThinkingToolAnalysisChart","ThinkingToolDiamondRanking"],O2e={["ThinkingToolSheet"]:"ttSheet",["ThinkingToolVennDiagram2"]:"ttVenn2",["ThinkingToolVennDiagram3"]:"ttVenn3",["ThinkingToolYChart"]:"ttYChart",["ThinkingToolXChart"]:"ttXChart",["ThinkingToolWChart"]:"ttWChart",["ThinkingToolButterflyChart"]:"ttButterfly",["ThinkingToolPyramidChart"]:"ttPyramid",["ThinkingToolPMI"]:"ttPMI",["ThinkingToolFishBone"]:"ttFishbone",["ThinkingToolPlotDiagramLeft"]:"ttPlotLeft",["ThinkingToolPlotDiagramRight"]:"ttPlotRight",["ThinkingToolCandy"]:"ttCandy",["ThinkingToolWebbing"]:"ttWebbing",["ThinkingToolFork"]:"ttRake",["ThinkingToolDataChart3"]:"ttDataChart3",["ThinkingToolDataChart6"]:"ttDataChart6",["ThinkingToolJellyfish"]:"ttJellyfish",["ThinkingToolCoordinate1Axis"]:"ttOneAxis",["ThinkingToolCoordinate2Axes"]:"ttTwoAxes",["ThinkingToolConcentricCircles"]:"ttCircles",["ThinkingToolAnalysisChart"]:"ttAnalysis",["ThinkingToolDiamondRanking"]:"ttDiamond"};function mae(r){return O2e[r]}function qx(r){return`/img/${r.toString()}.png`}function Zk(r){return`/img/${r.toString()}.pdf`}var U2e=5,z2e=30*1024*1024;function Yx(r,e,t=U2e,n=z2e){let o=r.size*8/e.duration/1048576;return fe.log(`uploading-video mbps: ${o}`),o&gt;t&amp;&amp;r.size&gt;n}var BN=class{constructor(e){this.manager=e}get store(){return this.manager.store}get note(){return this.manager.note}get renderer(){return this.manager.renderer}onNextStore(e){if(this.manager.store.arrivedDocument!==e.arrivedDocument&amp;&amp;e.arrivedDocument)if(this.manager.context.isShared())this.store.reduce(lY());else{let{id:n,snapshotId:o}=e.arrivedDocument;this.insertSharedCard(n,o)}}onEvent(e){e instanceof Yu||e instanceof Ym?this.emitWebCardInserted(e):e instanceof y0?this.emitPictureCardInserted(e):e instanceof C0?this.emitQuizCardInserted(e):e instanceof S0?this.emitAttendanceCardInserted(e):e instanceof Db||e instanceof qm?this.emitSheetInserted(e):e instanceof I0||e instanceof kb?this.emitCardPasted(e):e instanceof Xu?this.emitCardsCopied(e):e instanceof sp?this.emitCardReused(e):e instanceof F0?this.emitTextCardCopied(e):e instanceof M0?this.emitSheetChanged(e):e instanceof op||e instanceof Uh?this.emitLocalFileInserted(e):e instanceof x0?this.emitCapturedPhotoInserted(e):e instanceof w0?this.emitCapturedVideoInserted(e):e instanceof nc||e instanceof Dl?this.emitTextCardInserted(e):e instanceof np?this.handleTextCardIsDragging(e):e instanceof Pb||e instanceof Ab?this.emitFileDocumentInserted(e):e instanceof _0&amp;&amp;this.emitSubmissionsDocumentInserted(e)}emitCapturedPhotoInserted(e){let t=he.get().strings;this.store.reduce(we(29,t.insertingPhoto)),this.emitCapturedPhotoInsertedInternal(e).then(()=&gt;{this.store.reduce(we(29,null),Jt({type:"normal",text:t.didInsertPhoto}))}).catch(n=&gt;{this.store.reduce(we(29,null),me(29,{title:t.couldntInsertPhoto,...ot(n),okMessage:t.back,onOk:()=&gt;this.store.reduce(me(29,void 0))}))}).finally(()=&gt;{URL.revokeObjectURL(e.url)})}async emitCapturedPhotoInsertedInternal(e){let{url:t,type:n,startPosition:o}=e;if(n!==Gh)throw new Error(`cannot yet handle files of type "${n}"`);let i=await ki.fromObjectURL(t,n),[s]=i.getLayoutSize(),a=this.createNextCardInsertedPosition(s),l=this.manager.renderer.screenToNote(o),u=i.getMetadata(),d=i.insert({position:a,startPosition:l,user:this.store.userInfo}),[c]=d.cards,p=d.cards.map(S=&gt;S.id),h=c.metadata.layout_size,{left:f,top:m}=c.metadata.position,g=qe(f-h.width/2,m-h.height/2,h.width,h.height),{contentType:v,image:b,name:C}=i;if(v!==Gh)throw new Error(`cannot yet handle files of type "${n}"`);let x=await io(b,v,C),y=Zo.get(ha(x));Jn.add(c.id,g,this.note),qi(this.store,{file:x,metadata:u,extension:y,cardIdList:p,thumbnailsGenerator:()=&gt;i.generateThumbnails(),downloadOnCancel:!0}),We(d)}emitCapturedVideoInserted(e){let t=he.get().strings;this.store.reduce(we(29,t.insertingVideo)),this.emitCapturedVideoInsertedInternal(e).then(()=&gt;{this.store.reduce(we(29,null),Jt({type:"normal",text:t.didInsertVideo}))}).catch(n=&gt;{fe.error(n),this.store.reduce(we(29,null),me(29,{title:t.couldntInsertVideo,...ot(n),okMessage:t.back,onOk:()=&gt;this.store.reduce(me(29,void 0))}))}).finally(()=&gt;{URL.revokeObjectURL(e.url)})}async emitCapturedVideoInsertedInternal(e){let{url:t,type:n,startPosition:o}=e;if(!Qu(n))throw new Error(`cannot yet handle files of type "${n}"`);let i=await ji.fromObjectUrl(t,n),[s]=i.getLayoutSize(),a=this.createNextCardInsertedPosition(s),l=this.renderer.screenToNote(o),u=i.getMetadata(),d=i.insert({position:a,startPosition:l,user:this.store.userInfo}),[c]=d.cards,p=[c.id],h=c.metadata.layout_size,{left:f,top:m}=c.metadata.position,g=qe(f-h.width/2,m-h.height/2,h.width,h.height);if(!Qu(i.contentType))throw new Error(`cannot yet handle files of type "${i.contentType}"`);let v=await VS(t,i.name,i.contentType),b=IE.get(v.type);Jn.add(c.id,g,this.note),ie.fileManager.setContentLocalFileAsset(p,v),qi(this.store,{file:v,metadata:u,extension:b,cardIdList:p,thumbnailsGenerator:()=&gt;i.generateThumbnails(),downloadOnCancel:!0}),We(d)}emitLocalFileInserted(e){if(!Kx(this.store,e.files))return;let t=he.get().strings;this.store.reduce(we(29,t.insertingFile)),this.emitLocalFileInsertedInternal(e).then(()=&gt;{this.store.reduce(we(29,null),Jt({type:"normal",text:t.didInsertFile}))}).catch(n=&gt;{if(n instanceof Oh)return this.store.reduce(we(29,null));let o=t.couldntInsertFile,{message:i,unknownError:s}=ot(n),a="error";n instanceof Np?(i=(0,Xx.sprintf)(t.unsupportedFileErrorMsg,n.type,n.extension),a="info"):n instanceof Sc&amp;&amp;(i=t.unsupportedFileErrorWithoutOptMsg,a="info"),this.store.reduce(we(29,null),Co(29,{title:o,message:i,okMessage:t.back,color:a,unknownError:a==="error"?s:void 0,onOk:()=&gt;this.store.reduce(Co(29,void 0))}))})}async emitLocalFileInsertedInternal(e){let t;e instanceof Uh&amp;&amp;(t=this.renderer.screenToNote(e.startPosition));let n=await WS(e.files),o=await Promise.all(n.map(Vg));if(o.some((a,l)=&gt;{if(a instanceof ji){let u=e.files[l];return Yx(u,a)}})){let a=he.get().strings;if(!confirm(a.exceedVideoQuality))throw new Oh("abort video-file uploading.")}let s=this.store.userInfo;for(let a=0;a&lt;n.length;a++){let l=o[a],u;if(e instanceof op&amp;&amp;a===0)u=this.renderer.screenToNote(e.position);else{let[b]=l.getLayoutSize();u=this.createNextCardInsertedPosition(b)}let d=l.getMetadata(),c=l.insert({position:u,startPosition:t,user:s}),[p]=c.cards,h=c.cards.map(b=&gt;b.id),f=p.metadata.layout_size,{left:m,top:g}=p.metadata.position,v=qe(m-f.width/2,g-f.height/2,f.width,f.height);e instanceof op&amp;&amp;a===0&amp;&amp;Jn.clear(),Jn.add(p.id,v,this.note),(l instanceof ji||l instanceof yc)&amp;&amp;ie.fileManager.setContentLocalFileAsset(h,n[a]),qi(this.store,{file:n[a],metadata:d,extension:l.extension,cardIdList:h,thumbnailsGenerator:()=&gt;l.generateThumbnails()}),We(c)}}async emitFileDocumentInserted(e){var s;let t=he.get().strings,n=29,o=e.documentInfo,i={docInfo:o};e instanceof Pb?i.startPosition=e.startPosition:i.position=e.position;try{this.store.reduce(we(n,t.insertingMaterials));let a=o.extension.toLowerCase();e instanceof Ab&amp;&amp;Jn.clear();let l;if(o.asset_proxy){l=await this.insertDocumentFile(i),We(l);let[u]=l.cards,{left:d,top:c}=u.metadata.position,{width:p,height:h}=u.metadata.layout_size,f=qe(d-p/2,c-h/2,p,h);Jn.add(u.id,f,this.note)}else if(_b(a)){l=await this.insertDocument(i),We(l);let[u]=l.cards,d=this.note.getCardSafe(u.id);if(d)for(let c of d.connectedGroupHeadCards())Jn.add(c.id,c.bounds,this.note)}else{fe.error(`This extension ${a} is invalid format.`),this.store.reduce(we(n,null));return}this.store.reduce(we(n,null),Jt({type:"normal",text:t.didInsertMaterials}))}catch(a){if(Je.catchError(a))return;fe.error(a);let l=this.manager.courseId,u="documents/"+i.docInfo.id,d=xd({error:a,isDocument:!0,targetId:u,courseId:l,title:(0,Xx.sprintf)(t.couldntInsertItemTitle,(s=i.docInfo.name)!=null?s:t.material),okMessage:t.goBackToDesktop,onOk:()=&gt;this.store.reduce(me(n,void 0))});this.store.reduce(we(n,null),me(n,d));return}}async emitSubmissionsDocumentInserted(e){let t=he.get().strings,n=29,o=e.documentInfoList,i=0,s=()=&gt;{i++,this.store.reduce(we(n,`${t.insertingMaterials}(${i}/${o.length})`))},a=async c=&gt;{var p;try{return await this.downloadBuildDocument(c)}catch(h){if(Je.catchError(h))return;fe.error(h);let f=this.manager.courseId,m="documents/"+c.id;return xd({error:h,isDocument:!0,targetId:m,courseId:f,title:(0,Xx.sprintf)(t.couldntInsertItemTitle,(p=c.name)!=null?p:t.material),okMessage:t.goBackToDesktop,onOk:()=&gt;this.store.reduce(me(n,void 0))})}finally{s()}};s();let l=[],u=[];if((await Promise.all(o.map(a))).forEach(c=&gt;{c instanceof Go?l.push(c):c&amp;&amp;u.push(c)}),u.length&gt;0){let c=()=&gt;{let p=u.shift();!p||(u.length&gt;0&amp;&amp;(p.cancelMessage=t.close,p.okMessage=t.seeNextError,p.onCancel=()=&gt;this.store.reduce(me(n,void 0)),p.onOk=c),this.store.reduce(me(n,p)))};c(),this.store.reduce(we(n,null))}else l.forEach(c=&gt;{let p=this.createDocumentInsertion({head:c,startPosition:e.startPosition});We(p);let h=this.note.getCardSafe(c.id);if(h)for(let f of h.connectedGroupHeadCards())Jn.add(f.id,f.bounds,this.note)}),this.store.reduce(we(n,null),Jt({type:"normal",text:t.didInsertMaterials}))}async insertDocumentFile({docInfo:e,position:t,startPosition:n}){let o=nE(e.asset_proxy),i=this.store.assetMetadata[o];if(i||(i=await SM(this.store,o,e.extension.toLowerCase()===".pdf")),!i)throw new Error(`unsupported file: ${e.extension}`);let s,a;if(t)s=this.renderer.screenToNote(t);else if(n){let u=Ja(i[0])?br(i[0],kt):kt;s=this.createNextCardInsertedPosition(u),a=this.renderer.screenToNote(n)}else throw new Error("invalid state");let l={id:this.store.userInfo.user_id,name:zt(this.store.userInfo)};if(e.author_id){let u=this.store.users.byId[e.author_id];u&amp;&amp;(l={id:e.author_id,name:zt(u)})}return lte({doc:e,author:l,metadata:i,position:s,startPosition:a})}async downloadBuildDocument(e){let{lnsClient:t}=ie,n=await t.downloadDocument(e.id).then(Is).then(o=&gt;{let i;return e.author_id?i=Nr(this.store,e.author_id):i=Nr(this.store,this.store.userInfo.user_id),Es({id:e.id,snapshotId:e.comment_snapshot_id,file:o,remapIds:!0,overrideAuthor:!e.author_id,author:i})}).then(Hy);return await HH({documentId:e.id,snapshotId:e.comment_snapshot_id,head:n}),n}createDocumentInsertion({head:e,position:t,startPosition:n}){let o,i;if(t)o=this.renderer.screenToNote(t);else if(n)o=this.createNextCardInsertedPosition(e.size),i=this.renderer.screenToNote(n);else throw new Error("invalid state");return nf({head:e,destPosition:o,startPosition:i})}async insertDocument({docInfo:e,position:t,startPosition:n}){let o=await this.downloadBuildDocument(e);return this.createDocumentInsertion({head:o,position:t,startPosition:n})}insertSharedCard(e,t){sv(()=&gt;ie.lnsClient.downloadDocument(e),async({error:n,retryCount:o})=&gt;{if(n instanceof sr&amp;&amp;n.status===202){if(o&gt;3)throw n;return{unit:1e3,delay:$b}}throw n}).then(Is).then(n=&gt;Es({id:e,snapshotId:t,file:n,remapIds:!0,author:Nr(this.store,this.store.userInfo.user_id)})).then(Hy).then(async n=&gt;{var d;let o=(d=C1("sendButton"))!=null?d:qe(),i=tn(o),s=this.renderer.screenToNote(i);t&amp;&amp;await HH({documentId:e,snapshotId:t,head:n});let a=this.createNextCardInsertedPosition(n.size),l=nf({head:n,destPosition:a,startPosition:s});We(l);let u=this.note.getCardSafe(l.cards[0].id);if(u)for(let c of u.connectedGroupHeadCards())Jn.add(c.id,c.bounds,this.note);this.store.reduce(fU(e))}).catch(Je.handleError).catch(n=&gt;{fe.error(n);let o=he.get().strings;this.store.reduce(Jt({type:"error",text:(0,Xx.sprintf)(o.couldntInsertItemTitle,o.material)}),fU(e))})}emitTextCardInserted(e){let t=kt,{userInfo:n}=this.store,o=zt(n),i,s,a,l=e.params.text;e instanceof Dl?(i=this.createNextCardInsertedPosition(t),s=this.renderer.screenToNote(e.params.startPosition)):(i=this.renderer.screenToNote(e.params.position),a=this.store.desktop.hoverCardId);let u=NY({position:i,author:{id:n.user_id,name:o},textColor:e.params.color.toARGBHex(),backColor:e.params.backcolor.toARGBHex(),size:t,startPosition:s,hoverId:a,text:l}),d=u.cards[0],c={x:d.metadata.position.left-d.metadata.layout_size.width/2,y:d.metadata.position.top-d.metadata.layout_size.height/2,...d.metadata.layout_size};e instanceof Dl?Jn.add(d.id,c,this.note):(Jn.clear(),Jn.add(d.id,c,this.note),this.store.reduce(Hi({id:d.id,favorite:!1,pinned:!1,canPin:!0,canAlign:!1,canRotate:!1,bounds:this.renderer.boundingBoxRectToScreen(c)}),Ar(!1),hn(void 0),Lb(void 0))),We(u)}async emitWebCardInserted(e){let t=this.store.userInfo,n,o;e instanceof Yu?(n=this.renderer.screenToNote(e.startPosition),o=this.createNextCardInsertedPosition(kt)):o=this.renderer.screenToNote(e.position);let i=e.webCardContentBase,s,a;i!=null&amp;&amp;i.thumbnailFile&amp;&amp;(s=await ki.fromFile(i.thumbnailFile),[a]=s.getLayoutSize());let l=AY({author:{id:t.user_id,name:zt(t)},position:o,startPosition:n,url:i==null?void 0:i.url,contentSize:a}),u=l.cards[0],d={x:u.metadata.position.left-u.metadata.layout_size.width/2,y:u.metadata.position.top-u.metadata.layout_size.height/2,...u.metadata.layout_size};if(Jn.add(u.id,d,this.note),(i==null?void 0:i.thumbnailFile)&amp;&amp;s){let c=Zo.get(ha(i.thumbnailFile));qi(this.store,{file:i.thumbnailFile,metadata:s.getMetadata(),description:i==null?void 0:i.title,extension:c,cardIdList:[u.id],thumbnailsGenerator:()=&gt;s.generateThumbnails()})}We(l)}async emitPictureCardInserted(e){let t=this.store.userInfo,n=this.renderer.screenToNote(e.startPosition),o=this.createNextCardInsertedPosition(kt),i=await ki.fromFile(e.file),[s]=i.getLayoutSize(),a=Zo.get(ha(e.file)),l=mS({author:{id:t.user_id,name:zt(t)},position:o,startPosition:n,contentSize:s,asset:{description:i.name,extension:a}}),u=l.cards[0],d={x:u.metadata.position.left-u.metadata.layout_size.width/2,y:u.metadata.position.top-u.metadata.layout_size.height/2,...u.metadata.layout_size};Jn.add(u.id,d,this.note),qi(this.store,{file:e.file,metadata:i.getMetadata(),extension:a,cardIdList:[u.id],thumbnailsGenerator:()=&gt;i.generateThumbnails()}),We(l)}emitQuizCardInserted(e){let t=this.store.userInfo,n=this.renderer.screenToNote(e.startPosition),o=this.createNextCardInsertedPosition(kt),i=e.quizContentBase,s=IY({user:t,position:o,startPosition:n,quizContentBase:i}),a=s.cards[0],l={x:a.metadata.position.left-a.metadata.layout_size.width/2,y:a.metadata.position.top-a.metadata.layout_size.height/2,...a.metadata.layout_size};Jn.add(a.id,l,this.note),We(s)}emitAttendanceCardInserted(e){let t=this.store.userInfo,n=this.renderer.screenToNote(e.startPosition),o=this.createNextCardInsertedPosition(kt),i=e.contentBase,s=EY({user:t,position:o,startPosition:n,contentBase:i}),a=s.cards[0],l={x:a.metadata.position.left-a.metadata.layout_size.width/2,y:a.metadata.position.top-a.metadata.layout_size.height/2,...a.metadata.layout_size};Jn.add(a.id,l,this.note),We(s)}async emitSheetChanged(e){let t=he.get().strings,n=m=&gt;{let g=9;this.store.reduce(me(g,{title:t.couldntChangeTool,...ot(m),onOk:()=&gt;{this.store.reduce(me(g,void 0))},okMessage:t.back}))},o=Zk(e.type),i=o.split("/").slice(-1)[0],s={description:i,extension:".pdf"},a=this.note.getCard(e.srcId);a.pinned&amp;&amp;We(cu(a.id,!1));let l=RY(a,s),[u]=l.cards;this.store.reduce(da({type:"content",cardIdList:[u.id],state:"saving"})),We(l);let d=await fetch(o);if(d.status!==200)throw new co(t.couldntFetchData);let c=await d.arrayBuffer(),p=new File([c],i,{type:"application/pdf"}),h=rl.fromThinkingTool(p),{cancelled:f}=await qi(this.store,{file:p,metadata:[xi],extension:".pdf",cardIdList:[u.id],thumbnailsGenerator:()=&gt;h.generateThumbnails()});f&amp;&amp;n(f.reason)}async emitSheetInserted(e){let t=xi,n=this.store.userInfo,o=".pdf",i;e instanceof Db&amp;&amp;(i=this.renderer.screenToNote(e.startPosition));let s;e instanceof qm?s=this.renderer.screenToNote(e.position):s=this.createNextCardInsertedPosition(t);let a={description:e.toolType,extension:".pdf"},l=gS({author:{id:n.user_id,name:zt(n)},asset:a,position:s,pageSizeList:[t],cardArea:kr(t),startPosition:i,usage:"thinking_tool"}),u,d=()=&gt;{let g=he.get().strings,v=50;this.store.reduce(me(v,{title:(0,Xx.sprintf)(g.couldntInsertItemTitle,g.thinkingTool),message:g.couldntFetchData,okMessage:g.back,onOk:()=&gt;{this.store.reduce(me(v,void 0))}}))};try{let g=await fetch(Zk(e.toolType));g.status!==200?d():u=await g.arrayBuffer()}catch(g){d()}if(!u)return;let c=l.cards[0],p=new File([u],`${e.toolType}.pdf`,{type:"application/pdf"}),h=rl.fromThinkingTool(p);qi(this.store,{file:p,metadata:[{...ou}],extension:o,cardIdList:[c.id],thumbnailsGenerator:()=&gt;h.generateThumbnails()});let f=c.metadata.layout_size,m={x:c.metadata.position.left-f.width/2,y:c.metadata.position.top-f.height/2,...f};e instanceof qm&amp;&amp;Jn.clear(),Jn.add(c.id,m,this.note),We(l)}async emitCardPasted(e){let t=Hy(e.head.copyGroup({}));t.pinned=!1;let n,o;if(e instanceof kb){let u=t.size;n=this.createNextCardInsertedPosition(u),o=this.renderer.screenToNote(e.startPosition)}else n=this.renderer.screenToNote(e.position),Jn.clear();let i=nf({head:t.headGroup(),destPosition:n,startPosition:o});We(i);let s=i.cards[0],a={x:s.metadata.position.left-s.metadata.layout_size.width/2,y:s.metadata.position.top-s.metadata.layout_size.height/2,...s.metadata.layout_size};Jn.add(s.id,a,this.note);let l=this.note.getCardSafe(i.cards[0].id);l&amp;&amp;this.store.reduce(Hi({id:l.id,favorite:l.favorite,pinned:l.pinned,canPin:l.canPin(),canAlign:l.canAlign(),canRotate:l.canRotate(),bounds:this.renderer.boundingBoxRectToScreen(l.bounds)}))}emitCardsCopied(e){let t=this.note.getCardSafe(e.cardId);if(t===void 0)return;e.isRootCard&amp;&amp;e.target==="single"&amp;&amp;t.pinned&amp;&amp;We(cu(t.id,!1));let n=BY({card:t,target:e.target,isRootCard:e.isRootCard});We(n);let o=this.note.getCardSafe(n.cards[0].id);o&amp;&amp;!e.isRootCard&amp;&amp;this.store.reduce(Hi({id:o.id,favorite:o.favorite,pinned:o.pinned,canPin:o.canPin(),canAlign:o.canAlign(),canRotate:o.canRotate(),bounds:this.renderer.boundingBoxRectToScreen(o.bounds)}))}emitCardReused(e){let t=this.note.getCardSafe(e.cardId);!t||!(t instanceof jr)&amp;&amp;!(t instanceof wn)||(this.store.reduce(we(69,"")),e.isRootCard&amp;&amp;t.pinned&amp;&amp;We(cu(t.id,!1)),OY({store:this.store,card:t,isRootCard:e.isRootCard}).then(n=&gt;{We(n);let o=this.note.getCardSafe(n.cards[0].id);o&amp;&amp;!e.isRootCard&amp;&amp;this.store.reduce(Hi({id:o.id,favorite:o.favorite,pinned:o.pinned,canPin:o.canPin(),canAlign:o.canAlign(),canRotate:o.canRotate(),bounds:this.renderer.boundingBoxRectToScreen(o.bounds)}))}).catch(n=&gt;{let o=he.get().strings;this.store.reduce(me(69,{title:o.couldntReuseCard,okMessage:o.back,onOk:()=&gt;this.store.reduce(me(69,void 0))}))}).finally(()=&gt;{this.store.reduce(we(69,null))}))}createNextCardInsertedPosition(e){Jn.clearIfInvisible(this.renderer.viewportRect(),this.note);let t=Jn.getNextCardPosition(e,this.note);return t||(t=this.getInitialInsertedCardPosition(e)),t}getInitialInsertedCardPosition(e){let t,n=Mh(this.store.screen);return this.store.screen.width&lt;=480&amp;&amp;n==="portrait"?t=this.renderer.screenToNote({x:this.store.screen.width/2,y:this.store.screen.height*.8}):t=this.renderer.screenToNote({x:e.width/2*this.renderer.getZoom()+400,y:e.height/2*this.renderer.getZoom()+200}),t}handleTextCardIsDragging(e){if(e.finished)this.store.reduce(Lb(void 0));else{let{hoverCardId:t}=this.store.desktop,{width:n,height:o}=kt,{x:i,y:s}=this.renderer.screenToNote(e.position),a={x:i,y:s,width:n,height:o},l=yie(this.note,{id:"dummy",bounds:a}),u=l&amp;&amp;l.id;u!==t&amp;&amp;this.store.reduce(Lb(u))}this.renderer.sar.setFineRedrawCountDown(1)}emitTextCardCopied(e){let t=this.manager.note.getCard(e.cardId),n={id:this.store.userInfo.user_id,name:zt(this.store.userInfo)};e.isRootCard&amp;&amp;t.pinned&amp;&amp;We(cu(t.id,!1)),We(LY(n,t,e.isRootCard))}};var GH=class{constructor(e,t){this.longPress=e;this.doubleClick=t}start(e){this.stop(),this.timer=setTimeout(()=&gt;{e(this)},p1)}stop(){clearTimeout(this.timer)}},Qx=class{constructor(e){this.dispatcher=e;this.upCount=0;this.pendingEvents=[];this.handleSingle=(e,t)=&gt;{e==="move"?this.move(t):e==="down"?this.down(t):this.up(t)};this.handleDoubleMove=(e,t)=&gt;{this.abandonLongPress(),this.onDoubleMove&amp;&amp;this.onDoubleMove(e,t)};this.onLongPressTimer=e=&gt;t=&gt;{var n;this.longPressTimer=void 0,this.upCount===0&amp;&amp;t.longPress&amp;&amp;((n=this.onLongPress)==null?void 0:n.call(this,e))?this.pendingEvents=[]:this.sendPendingEvents()}}abandonLongPress(){this.stopTimer(),this.sendPendingEvents()}down(e){if(this.longPressTimer)this.pendingEvents.push({type:"down",ev:e});else{this.upCount=0;let t=this.dispatcher.shouldHandleLongPress(e),n=this.dispatcher.shouldHandleDoubleClick(e);(t||n)&amp;&amp;(this.longPressTimer=new GH(t,n),this.longPressTimer.start(this.onLongPressTimer(e))),this.sendPendingEvents(),this.send({type:"down",ev:e})}}move(e){this.longPressTimer?Mf(e)&gt;5?(this.stopTimer(),this.sendPendingEvents(),this.send({type:"move",ev:e})):this.pendingEvents.push({type:"move",ev:e}):(this.sendPendingEvents(),this.send({type:"move",ev:e}))}up(e){let t={type:"up",ev:e};this.longPressTimer?(this.upCount++,this.longPressTimer.doubleClick&amp;&amp;this.onDoubleClick?this.upCount===1?this.pendingEvents.push(t):this.upCount===2&amp;&amp;(this.stopTimer(),this.onDoubleClick(e)?this.pendingEvents=[]:(this.sendPendingEvents(),this.send(t)),this.upCount=0):(this.stopTimer(),this.send(t),this.pendingEvents=[],this.upCount=0)):(this.stopTimer(),this.sendPendingEvents(),this.send({type:"up",ev:e}),this.upCount=0)}stopTimer(){this.longPressTimer&amp;&amp;(this.longPressTimer.stop(),this.longPressTimer=void 0)}send(e){var t;(t=this.onSingle)==null||t.call(this,e.type,e.ev)}sendPendingEvents(){this.pendingEvents.forEach(e=&gt;{this.send(e)}),this.pendingEvents=[]}};var Ha=class{constructor(e,t={ignoreDevicePixelRatio:!1,invertTargetTransform:!0,enableDragEventPropagation:!1}){this.target=e;this.opts=t;this.onFreeMove=()=&gt;{};this.downEvents=new Map;this.handleDown=e=&gt;{let t=iv(e)?e.pointerId:0;this.downEvents.set(t,!0)};this.dragging=!1;this.handleMove=e=&gt;{let t=iv(e)?e.pointerId:0;if(this.dragging=this.downEvents.has(t),!this.opts.enableDragEventPropagation&amp;&amp;this.dragging)return;let n=this.opts.ignoreDevicePixelRatio?1:window.devicePixelRatio,o=Bs(this.invertTargetTransform(e),n);this.onFreeMove(o,this.dragging)};this.handleUp=e=&gt;{let t=iv(e)?e.pointerId:0;if(this.downEvents.delete(t),this.opts.enableDragEventPropagation&amp;&amp;this.dragging){let n=this.opts.ignoreDevicePixelRatio?1:window.devicePixelRatio,o=Bs(this.invertTargetTransform(e),n);this.onFreeMove(o,!1)}this.dragging=!1};window.onpointerdown!==void 0?(e.addEventListener("pointerdown",this.handleDown),window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleUp)):(e.addEventListener("mousedown",this.handleDown),window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))}unbind(){window.onpointerdown!==void 0?(this.target.removeEventListener("pointerdown",this.handleDown),window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleUp)):(this.target.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp))}invertTargetTransform(e){let t=this.target.getBoundingClientRect(),n=this.opts.invertTargetTransform?t.left:0,o=this.opts.invertTargetTransform?t.top:0;return{x:e.x-n,y:e.y-o}}};var RN=class{constructor(e){this.lnsClient=e}async upload(e){try{let t=await Vne(e);e.type==="shared"?await this.lnsClient.uploadSharedNoteThumbnail(e.noteId,e.revision,t):await this.lnsClient.uploadNoteThumbnail(e.noteId,e.version,t),fe.log("note-thumbnail uploaded.")}catch(t){if(t instanceof sr&amp;&amp;t.status===409){fe.log("this note-thumbnail already exists.");return}throw t}}};var LN=r=&gt;r.releaseStage==="local"||r.releaseStage==="development";var Jx=class{constructor(e,t){this.context=e;this.canvas=t;this.handleDoubleClick=e=&gt;{if(on(this.store))return!1;let t=window.devicePixelRatio,n={x:e.x/t,y:e.y/t};return this.emitter.emitTextCardInserted(new nc({color:To(),backcolor:cn(),position:n})),!0};let n=e.getStore(),o=n.desktop;if(!o)throw new Error("store.desktop must be defined!");this.courseId=o.courseId,this.noteId=o.noteId,this.storeSubscription=ap(i=&gt;{let s=Qh(this.store);if(!!s&amp;&amp;!(i instanceof zh)){let a=he.get().strings,l=80;this.store.reduce(me(l,{title:a.couldntEditNote,message:s==="readPermission"?a.noteIsReadonly:a.notConnectedToSharedNote,okMessage:a.close,onOk:()=&gt;this.store.reduce(me(l,void 0))}));return}i instanceof Km?this.context.onEmitCardCommand(i.command):this.emitter.onEvent(i)}),this.context=e,this.emitter=new BN(this),this.cardRendererCallback=sX(this.context),this._renderer=new Vk({callback:this.note,cardRendererCallback:this.cardRendererCallback,store:n,canvas:t,remotePointerManager:this.context.getRemotePointerManager()}),this.processor=new Gn(t),this.pointerEventRouter=new Qx(this),this.pointerEventRouter.onSingle=this.renderer.singleHandler,this.pointerEventRouter.onLongPress=this.renderer.handleLongPress,this.pointerEventRouter.onDoubleMove=this.renderer.handleDoubleMove,this.pointerEventRouter.onDoubleClick=this.handleDoubleClick,this.processor.onSingle=this.pointerEventRouter.handleSingle,this.processor.onDoubleMove=this.pointerEventRouter.handleDoubleMove,this.freeMoveProcessor=new Ha(t,{enableDragEventPropagation:!0}),this.freeMoveProcessor.onFreeMove=this.renderer.handleFreeMove,this.noteThumbnailUploader=new RN(ie.lnsClient)}get note(){return this.context.getNote()}get renderer(){return this._renderer}set renderer(e){this._renderer=e}reloadNote(e){this.renderer.close(),this.renderer=new Vk({callback:e,cardRendererCallback:this.cardRendererCallback,store:this.store,canvas:this.canvas,remotePointerManager:this.context.getRemotePointerManager()}),this.pointerEventRouter.onSingle=this.renderer.singleHandler,this.pointerEventRouter.onLongPress=this.renderer.handleLongPress,this.pointerEventRouter.onDoubleMove=this.renderer.handleDoubleMove,this.freeMoveProcessor.onFreeMove=this.renderer.handleFreeMove}get store(){return this.context.getStore()}shouldHandleLongPress(e){let t=this.renderer.applyTransform();for(let n of this.note.bubblingOrderIterator()){let i=Kt(n,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:t,root:void 0,toolVisible:!0,zoom:void 0});if(i===0)return!1;if(i===1)return!0;if(i===2)return!0}return!1}shouldHandleDoubleClick(e){let t=this.renderer.applyTransform();for(let n of this.note.bubblingOrderIterator())if(Kt(n,this.cardRendererCallback).predictPointerEventResponse({ev:e,mtx:t,toolVisible:!1,zoom:void 0})!==2)return!1;return!0}onNextStore(e){this.emitter.onNextStore(e),this.renderer.onNextStore(e)}onCardCommand({cmd:e,serverCmdParams:t}){var s,a,l,u;let n=!t,{note:o}=this,i=o.handleCommand(e);if(t!=null&amp;&amp;t.sender&amp;&amp;this.setPointerIfNeeded(e,t.sender),e.type==="groupStateChanged"){let d=this.note.getCardSafe(e.topOfGroup);if(d){this.setFoldAnimation(d,e.isFolded);let c=d.next;for(;c;)Jn.remove(c.id),c=c.next}}else if(e.type==="cardsInserted"||e.type==="cardsCopied"){for(let d of e.cards)this.renderer.getCardRenderer(this.note.getCard(d.id)).invalidateMipmap(this.renderer.getZoom());if(e.transitions&amp;&amp;e.transitions.length&gt;0)for(let{cardId:d,translation:c}of e.transitions){let p=this.note.getCard(d),h=this.renderer.getCardRenderer(p),{from:f,to:m,duration:g}=c;!Rh(f)||!Rh(m)||h.doInsert({insert:{from:f,to:m},duration:g})}n&amp;&amp;this.renderer.adjustViewport(e),this.mergeExtendedDrawn(e.cards.map(d=&gt;d.id))}else if(e.type==="cardMoved"||e.type==="groupMoved"){if(e.transition){let d=e.type==="cardMoved"?e.cardId:e.topOfGroup,c=this.note.getCardSafe(d);if(c){this.renderer.getCardRenderer(c).invalidateMipmap(this.renderer.getZoom());for(let{translation:h}of e.transition){let f=this.renderer.getCardRenderer(c),{from:m,to:g,duration:v}=h;f.doInsert({insert:{from:m,to:g},duration:v})}}}}else if(e.type==="cardDeleted")Jn.remove(e.cardId);else if(e.type==="groupDeleted")Jn.remove(e.topOfGroup);else if(e.type==="cardSizesChanged"){for(let d of e.changes)if(Jn.remove(d.cardId),d.transition&amp;&amp;e.firedCardId===d.cardId){let c=this.note.getCard(d.cardId);this.renderer.getCardRenderer(c).setResizeAnimation(d)}}else if(e.type==="cardMarginsChanged")Jn.remove(e.cardId);else if(!n&amp;&amp;e.type==="cardEdited"&amp;&amp;"content.asset"in e.replacement)this.note.useCard(e.cardId,d=&gt;{Kt(d,this.cardRendererCallback).invalidateMipmap(this.renderer.getZoom())});else if(!n&amp;&amp;e.type==="stroke"){let d=t.sender;(s=this.context.getRemoteStrokeBus())==null||s.publish({cmd:e,sender:d});let c=Xn.forCard("drawn",e.cardId);e.operation==="assetUpdated"?!!((a=this.store.assetUploadStates[e.cardId])!=null&amp;&amp;a.drawn)&amp;&amp;c.strokesSynced()&amp;&amp;(!c.receivedStrokeRevision||El(c.receivedStrokeRevision,e.revision)&lt;=0)&amp;&amp;this.store.reduce(fp([e.cardId],"drawn")):(e.operation==="add"||e.operation==="delete")&amp;&amp;(this.store.reduce(da({state:"unsaved",cardIdList:[e.cardId],type:"drawn"}),ho()),this.context.unsetDrawnSaveTimer(e.cardId))}return this.closePopoverIfNeeded(e,n,i),this.renderer.sar.setFineRedrawCountDown(1),i&amp;&amp;At(new zh(e,i,(u=(l=t==null?void 0:t.sender)==null?void 0:l.user)==null?void 0:u.id)),i!=null}closePopoverIfNeeded(e,t,n){var u,d,c,p,h;let o=(u=this.store.desktop)==null?void 0:u.focusingCard;if(!o)return;let i=o.id,s=o.canAlign,a=this.note.getCardSafe(i),l=(d=this.store.desktop)==null?void 0:d.popoverOpen;if(!(!a||!l)){if(e.type==="groupStateChanged"){let f=this.note.getCardSafe(e.topOfGroup);if(!f)return;let m=this.getEditorCard();if([...f.iterator()].some(g=&gt;g.id===(m==null?void 0:m.id)||(m==null?void 0:m.isDescendantOf(g.id))))return;f.getCard(a.id)||t&amp;&amp;!f.containsInGroup(a)?this.store.reduce(Ar(!1)):f.containsInGroup(a)&amp;&amp;this.store.reduce(ti())}else if(e.type==="cardsInserted"||e.type==="cardsCopied"){let f;if(e.type==="cardsInserted"?f=(p=(c=e.connections)==null?void 0:c[0])==null?void 0:p.from:f=e.isRootCard&amp;&amp;!e.grouped?e.srcCardId:void 0,!f)return;[...a.iteratorOverGroup()].some(m=&gt;m.id===f)&amp;&amp;this.store.reduce(Ar(!1))}else if(e.type==="cardMoved"||e.type==="groupMoved"){let f=e.type==="cardMoved"?e.cardId:e.topOfGroup,m=this.note.getCardSafe(f);if(!m)return;let g=this.getEditorCard();if((e.type==="cardMoved"?[m]:[...m.iterator()]).some(C=&gt;C.id===(g==null?void 0:g.id)||(g==null?void 0:g.isDescendantOf(C.id))))return;let b=t;b||(b=(e.type!=="groupMoved"?[...m.familyIterator()]:[...m.memberAndChildrenIterator()]).some(x=&gt;x.id===i)),b&amp;&amp;this.store.reduce(Ar(!1))}else if(e.type==="connectorConnected"||e.type==="connectorDisconnected"||e.type==="pinStateChanged")s!==a.canAlign()&amp;&amp;this.store.reduce(Ar(!1));else if(e.type==="cardDeleted"||e.type==="groupDeleted"){let f=(h=n==null?void 0:n.deleted)!=null?h:[];if(f.length===0)return;f.includes(i)&amp;&amp;this.store.reduce(ti()),a.canAlign()!==s&amp;&amp;this.store.reduce(Ar(!1))}else if(e.type==="cardSizesChanged"){let f=e.firedCardId,m=this.note.getCardSafe(f);if(!m)return;let g=this.getEditorCard();if((g==null?void 0:g.id)===m.id||(g==null?void 0:g.isDescendantOf(m.id)))return;m.getCard(i)&amp;&amp;this.store.reduce(Ar(!1))}else if(e.type==="cardMarginsChanged"){let f=e.cardId,m=this.note.getCardSafe(f);if(!m)return;let g=this.getEditorCard();(m.id===i||(g==null?void 0:g.id)===m.id&amp;&amp;(m==null?void 0:m.getCard(i)))&amp;&amp;this.store.reduce(Ar(!1))}}}getEditorCard(){let e=this.store.editor;if(!e)return;let t=e.length-1,n=e[t].cardId;return this.note.getCardSafe(n)}setPointerIfNeeded(e,{user:t}){var o;let n;e.type==="connectorMoved"?n=jY(e.fromId,t,e.position):e.type==="stroke"&amp;&amp;e.operation==="write"?this.note.useCard(e.cardId,i=&gt;{n=DY(e,t,i)}):e.type==="cardMoved"||e.type==="cardMarginsChanged"?n=D_(e.cardId,t):e.type==="cardSizesChanged"?n=D_(e.firedCardId,t):e.type==="groupMoved"||e.type==="groupStateChanged"?n=D_(e.topOfGroup,t):e.type==="pointerMoved"&amp;&amp;(n=e),n&amp;&amp;((o=this.context.getRemotePointerManager())==null||o.setPointer(n))}setFoldAnimation(e,t){let n=this.store.editor,o=n==null?void 0:n[n.length-1].cardId;if(o?[...e.iterator()].find(a=&gt;a.id===o):!1)return;let s=o?this.note.getCardSafe(o):void 0;if(!(s&amp;&amp;!s.getCard(e.id)||!e.isVisibleInCardTree(s)))for(let a of e.fromTailIterator())this.note.bringCardTreeToFront(a),this.renderer.getCardRenderer(a).doFold(e,t)}async mergeExtendedDrawn(e){let t=[],n;e?n=e==null?void 0:e.map(o=&gt;this.note.getCardSafe(o)).filter(o=&gt;o):n=[...this.note.renderingOrderIterator()],await Promise.all(n.map(async o=&gt;{let i=this.renderer.getCardRenderer(o);i.setLoadState("high","loading");let s=Xn.forCard("drawn",o.id);await s.updateData(o),s.mergeExtended(o)&amp;&amp;t.push(o.id),i.setLoadState("high","loaded")})),t.length&gt;0&amp;&amp;this.store.reduce(da({state:"unsaved",cardIdList:t,type:"drawn"}),ho())}schedule(){this.renderer.schedule()}async saveNoteThumbnail(e){if(!!LN(this.store))try{let{small:t,medium:n}=await this.renderer.createNoteThumbnail();await this.noteThumbnailUploader.upload({...e,small:t,medium:n}),["small","medium"].forEach(i=&gt;{let s;e.type==="shared"?s=ie.res.sharedNoteThumbnailUrl({noteId:e.noteId,level:i}):s=ie.res.noteThumbnailUrl({noteId:e.noteId,level:i}),Su.get(s).invalidate()})}catch(t){fe.error(t)}}close(){this.storeSubscription.close(),this.renderer.close(),this.processor.unbind(),this.freeMoveProcessor.unbind(),Jn.clear(),$y.clearLayout(this.noteId),mr.reset(),Xn.reset(),ie.fileManager.clearContentLocalFileAsset()}};var tG=oe(Wr());var Bc=Object.create(null);Bc.open="0";Bc.close="1";Bc.ping="2";Bc.pong="3";Bc.message="4";Bc.upgrade="5";Bc.noop="6";var eP=Object.create(null);Object.keys(Bc).forEach(r=&gt;{eP[Bc[r]]=r});var gae={type:"error",data:"parser error"};var H2e=typeof Blob=="function"||typeof Blob!="undefined"&amp;&amp;Object.prototype.toString.call(Blob)==="[object BlobConstructor]",G2e=typeof ArrayBuffer=="function",W2e=r=&gt;typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&amp;&amp;r.buffer instanceof ArrayBuffer,$2e=({type:r,data:e},t,n)=&gt;H2e&amp;&amp;e instanceof Blob?t?n(e):vae(e,n):G2e&amp;&amp;(e instanceof ArrayBuffer||W2e(e))?t?n(e):vae(new Blob([e]),n):n(Bc[r]+(e||"")),vae=(r,e)=&gt;{let t=new FileReader;return t.onload=function(){let n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)},ON=$2e;var bae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tP=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let r=0;r&lt;bae.length;r++)tP[bae.charCodeAt(r)]=r;var yae=r=&gt;{let e=r.length*.75,t=r.length,n,o=0,i,s,a,l;r[r.length-1]==="="&amp;&amp;(e--,r[r.length-2]==="="&amp;&amp;e--);let u=new ArrayBuffer(e),d=new Uint8Array(u);for(n=0;n&lt;t;n+=4)i=tP[r.charCodeAt(n)],s=tP[r.charCodeAt(n+1)],a=tP[r.charCodeAt(n+2)],l=tP[r.charCodeAt(n+3)],d[o++]=i&lt;&lt;2|s&gt;&gt;4,d[o++]=(s&amp;15)&lt;&lt;4|a&gt;&gt;2,d[o++]=(a&amp;3)&lt;&lt;6|l&amp;63;return u};var V2e=typeof ArrayBuffer=="function",j2e=(r,e)=&gt;{if(typeof r!="string")return{type:"message",data:Cae(r,e)};let t=r.charAt(0);return t==="b"?{type:"message",data:K2e(r.substring(1),e)}:eP[t]?r.length&gt;1?{type:eP[t],data:r.substring(1)}:{type:eP[t]}:gae},K2e=(r,e)=&gt;{if(V2e){let t=yae(r);return Cae(t,e)}else return{base64:!0,data:r}},Cae=(r,e)=&gt;{switch(e){case"blob":return r instanceof ArrayBuffer?new Blob([r]):r;case"arraybuffer":default:return r}},UN=j2e;var Sae=String.fromCharCode(30),xae=(r,e)=&gt;{let t=r.length,n=new Array(t),o=0;r.forEach((i,s)=&gt;{ON(i,!1,a=&gt;{n[s]=a,++o===t&amp;&amp;e(n.join(Sae))})})},wae=(r,e)=&gt;{let t=r.split(Sae),n=[];for(let o=0;o&lt;t.length;o++){let i=UN(t[o],e);if(n.push(i),i.type==="error")break}return n},WH=4;function Ko(r){if(r)return q2e(r)}function q2e(r){for(var e in Ko.prototype)r[e]=Ko.prototype[e];return r}Ko.prototype.on=Ko.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};Ko.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};Ko.prototype.off=Ko.prototype.removeListener=Ko.prototype.removeAllListeners=Ko.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,o=0;o&lt;t.length;o++)if(n=t[o],n===e||n.fn===e){t.splice(o,1);break}return t.length===0&amp;&amp;delete this._callbacks["$"+r],this};Ko.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n&lt;arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,o=t.length;n&lt;o;++n)t[n].apply(this,e)}return this};Ko.prototype.emitReserved=Ko.prototype.emit;Ko.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Ko.prototype.hasListeners=function(r){return!!this.listeners(r).length};var Ga=(()=&gt;typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function zN(r,...e){return e.reduce((t,n)=&gt;(r.hasOwnProperty(n)&amp;&amp;(t[n]=r[n]),t),{})}var Y2e=Ga.setTimeout,X2e=Ga.clearTimeout;function $f(r,e){e.useNativeTimers?(r.setTimeoutFn=Y2e.bind(Ga),r.clearTimeoutFn=X2e.bind(Ga)):(r.setTimeoutFn=Ga.setTimeout.bind(Ga),r.clearTimeoutFn=Ga.clearTimeout.bind(Ga))}var Q2e=1.33;function Tae(r){return typeof r=="string"?J2e(r):Math.ceil((r.byteLength||r.size)*Q2e)}function J2e(r){let e=0,t=0;for(let n=0,o=r.length;n&lt;o;n++)e=r.charCodeAt(n),e&lt;128?t+=1:e&lt;2048?t+=2:e&lt;55296||e&gt;=57344?t+=3:(n++,t+=4);return t}var $H=class extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}},eC=class extends Ko{constructor(e){super(),this.writable=!1,$f(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new $H(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&amp;&amp;(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&amp;&amp;this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=UN(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}};var Aae="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),VH=64,Z2e={},Dae=0,HN=0,kae;function Pae(r){let e="";do e=Aae[r%VH]+e,r=Math.floor(r/VH);while(r&gt;0);return e}function GN(){let r=Pae(+new Date);return r!==kae?(Dae=0,kae=r):r+"."+Pae(Dae++)}for(;HN&lt;VH;HN++)Z2e[Aae[HN]]=HN;function WN(r){let e="";for(let t in r)r.hasOwnProperty(t)&amp;&amp;(e.length&amp;&amp;(e+="&amp;"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Iae(r){let e={},t=r.split("&amp;");for(let n=0,o=t.length;n&lt;o;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}var Eae=!1;try{Eae=typeof XMLHttpRequest!="undefined"&amp;&amp;"withCredentials"in new XMLHttpRequest}catch(r){}var _ae=Eae;function jH(r){let e=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&amp;&amp;(!e||_ae))return new XMLHttpRequest}catch(t){}if(!e)try{return new Ga[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}}function eMe(){}var tMe=function(){return new jH({xdomain:!1}).responseType!=null}(),$N=class extends eC{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){let n=location.protocol==="https:",o=location.port;o||(o=n?"443":"80"),this.xd=typeof location!="undefined"&amp;&amp;e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==n}let t=e&amp;&amp;e.forceBase64;this.supportsBinary=tMe&amp;&amp;!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let t=()=&gt;{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&amp;&amp;(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=n=&gt;{if(this.readyState==="opening"&amp;&amp;n.type==="open"&amp;&amp;this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};wae(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&amp;&amp;(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&amp;&amp;this.poll())}doClose(){let e=()=&gt;{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,xae(e,t=&gt;{this.doWrite(t,()=&gt;{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{},t=this.opts.secure?"https":"http",n="";this.opts.timestampRequests!==!1&amp;&amp;(e[this.opts.timestampParam]=GN()),!this.supportsBinary&amp;&amp;!e.sid&amp;&amp;(e.b64=1),this.opts.port&amp;&amp;(t==="https"&amp;&amp;Number(this.opts.port)!==443||t==="http"&amp;&amp;Number(this.opts.port)!==80)&amp;&amp;(n=":"+this.opts.port);let o=WN(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(o.length?"?"+o:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new wd(this.uri(),e)}doWrite(e,t){let n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(o,i)=&gt;{this.onError("xhr post error",o,i)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=&gt;{this.onError("xhr poll error",t,n)}),this.pollXhr=e}},wd=class extends Ko{constructor(e,t){super(),$f(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){let e=zN(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let t=this.xhr=new jH(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&amp;&amp;t.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&amp;&amp;t.setRequestHeader(n,this.opts.extraHeaders[n])}}catch(n){}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{t.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in t&amp;&amp;(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&amp;&amp;(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=&gt;{t.readyState===4&amp;&amp;(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=&gt;{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(n){this.setTimeoutFn(()=&gt;{this.onError(n)},0);return}typeof document!="undefined"&amp;&amp;(this.index=wd.requestsCount++,wd.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=eMe,e)try{this.xhr.abort()}catch(t){}typeof document!="undefined"&amp;&amp;delete wd.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&amp;&amp;(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};wd.requestsCount=0;wd.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Fae);else if(typeof addEventListener=="function"){let r="onpagehide"in Ga?"pagehide":"unload";addEventListener(r,Fae,!1)}}function Fae(){for(let r in wd.requests)wd.requests.hasOwnProperty(r)&amp;&amp;wd.requests[r].abort()}var rP=(()=&gt;typeof Promise=="function"&amp;&amp;typeof Promise.resolve=="function"?e=&gt;Promise.resolve().then(e):(e,t)=&gt;t(e,0))(),nP=Ga.WebSocket||Ga.MozWebSocket,VN=!0,Mae="arraybuffer";var Nae=typeof navigator!="undefined"&amp;&amp;typeof navigator.product=="string"&amp;&amp;navigator.product.toLowerCase()==="reactnative",jN=class extends eC{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),t=this.opts.protocols,n=Nae?{}:zN(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&amp;&amp;(n.headers=this.opts.extraHeaders);try{this.ws=VN&amp;&amp;!Nae?t?new nP(e,t):new nP(e):new nP(e,t,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||Mae,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=&gt;{this.opts.autoUnref&amp;&amp;this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=&gt;this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=&gt;this.onData(e.data),this.ws.onerror=e=&gt;this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t&lt;e.length;t++){let n=e[t],o=t===e.length-1;ON(n,this.supportsBinary,i=&gt;{let s={};VN||(n.options&amp;&amp;(s.compress=n.options.compress),this.opts.perMessageDeflate&amp;&amp;(typeof i=="string"?Buffer.byteLength(i):i.length)&lt;this.opts.perMessageDeflate.threshold&amp;&amp;(s.compress=!1));try{VN?this.ws.send(i):this.ws.send(i,s)}catch(a){}o&amp;&amp;rP(()=&gt;{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&amp;&amp;(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&amp;&amp;(t==="wss"&amp;&amp;Number(this.opts.port)!==443||t==="ws"&amp;&amp;Number(this.opts.port)!==80)&amp;&amp;(n=":"+this.opts.port),this.opts.timestampRequests&amp;&amp;(e[this.opts.timestampParam]=GN()),this.supportsBinary||(e.b64=1);let o=WN(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(o.length?"?"+o:"")}check(){return!!nP}};var KH={websocket:jN,polling:$N};var rMe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nMe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zx(r){let e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&amp;&amp;n!=-1&amp;&amp;(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let o=rMe.exec(r||""),i={},s=14;for(;s--;)i[nMe[s]]=o[s]||"";return t!=-1&amp;&amp;n!=-1&amp;&amp;(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=oMe(i,i.path),i.queryKey=iMe(i,i.query),i}function oMe(r,e){let t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&amp;&amp;n.splice(0,1),e.slice(-1)=="/"&amp;&amp;n.splice(n.length-1,1),n}function iMe(r,e){let t={};return e.replace(/(?:^|&amp;)([^&amp;=]*)=?([^&amp;]*)/g,function(n,o,i){o&amp;&amp;(t[o]=i)}),t}var Du=class extends Ko{constructor(e,t={}){super(),this.writeBuffer=[],e&amp;&amp;typeof e=="object"&amp;&amp;(t=e,e=null),e?(e=Zx(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&amp;&amp;(t.query=e.query)):t.host&amp;&amp;(t.hostname=Zx(t.host).host),$f(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&amp;&amp;location.protocol==="https:",t.hostname&amp;&amp;!t.port&amp;&amp;(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&amp;&amp;location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&amp;&amp;(this.opts.query=Iae(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&amp;&amp;(this.opts.closeOnBeforeunload&amp;&amp;(this.beforeunloadEventListener=()=&gt;{this.transport&amp;&amp;(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&amp;&amp;(this.offlineEventListener=()=&gt;{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=WH,t.transport=e,this.id&amp;&amp;(t.sid=this.id);let n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new KH[e](n)}open(){let e;if(this.opts.rememberUpgrade&amp;&amp;Du.priorWebsocketSuccess&amp;&amp;this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=&gt;{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(t){this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&amp;&amp;this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=&gt;this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),n=!1;Du.priorWebsocketSuccess=!1;let o=()=&gt;{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",c=&gt;{if(!n)if(c.type==="pong"&amp;&amp;c.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Du.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=&gt;{n||this.readyState!=="closed"&amp;&amp;(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{let p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function i(){n||(n=!0,d(),t.close(),t=null)}let s=c=&gt;{let p=new Error("probe error: "+c);p.transport=t.name,i(),this.emitReserved("upgradeError",p)};function a(){s("transport closed")}function l(){s("socket closed")}function u(c){t&amp;&amp;c.name!==t.name&amp;&amp;i()}let d=()=&gt;{t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};t.once("open",o),t.once("error",s),t.once("close",a),this.once("close",l),this.once("upgrading",u),t.open()}onOpen(){if(this.readyState="open",Du.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&amp;&amp;this.opts.upgrade){let e=0,t=this.upgrades.length;for(;e&lt;t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&amp;&amp;this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=&gt;{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&amp;&amp;this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&amp;&amp;this.transport.writable&amp;&amp;!this.upgrading&amp;&amp;this.writeBuffer.length){let e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&amp;&amp;this.transport.name==="polling"&amp;&amp;this.writeBuffer.length&gt;1))return this.writeBuffer;let t=1;for(let n=0;n&lt;this.writeBuffer.length;n++){let o=this.writeBuffer[n].data;if(o&amp;&amp;(t+=Tae(o)),n&gt;0&amp;&amp;t&gt;this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,o){if(typeof t=="function"&amp;&amp;(o=t,t=void 0),typeof n=="function"&amp;&amp;(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&amp;&amp;this.once("flush",o),this.flush()}close(){let e=()=&gt;{this.onClose("forced close"),this.transport.close()},t=()=&gt;{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=&gt;{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&amp;&amp;(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=&gt;{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Du.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&amp;&amp;(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&amp;&amp;(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let t=[],n=0,o=e.length;for(;n&lt;o;n++)~this.transports.indexOf(e[n])&amp;&amp;t.push(e[n]);return t}};Du.protocol=WH;var Cpt=Du.protocol;function Bae(r,e="",t){let n=r;t=t||typeof location!="undefined"&amp;&amp;location,r==null&amp;&amp;(r=t.protocol+"//"+t.host),typeof r=="string"&amp;&amp;(r.charAt(0)==="/"&amp;&amp;(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t!="undefined"?r=t.protocol+"//"+r:r="https://"+r),n=Zx(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&amp;&amp;(n.port="443")),n.path=n.path||"/";let i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&amp;&amp;t.port===n.port?"":":"+n.port),n}var JH={};$fe(JH,{Decoder:()=&gt;sP,Encoder:()=&gt;XH,PacketType:()=&gt;In,protocol:()=&gt;Uae});var sMe=typeof ArrayBuffer=="function",aMe=r=&gt;typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Rae=Object.prototype.toString,lMe=typeof Blob=="function"||typeof Blob!="undefined"&amp;&amp;Rae.call(Blob)==="[object BlobConstructor]",uMe=typeof File=="function"||typeof File!="undefined"&amp;&amp;Rae.call(File)==="[object FileConstructor]";function iP(r){return sMe&amp;&amp;(r instanceof ArrayBuffer||aMe(r))||lMe&amp;&amp;r instanceof Blob||uMe&amp;&amp;r instanceof File}function oP(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t&lt;n;t++)if(oP(r[t]))return!0;return!1}if(iP(r))return!0;if(r.toJSON&amp;&amp;typeof r.toJSON=="function"&amp;&amp;arguments.length===1)return oP(r.toJSON(),!0);for(let t in r)if(Object.prototype.hasOwnProperty.call(r,t)&amp;&amp;oP(r[t]))return!0;return!1}function Lae(r){let e=[],t=r.data,n=r;return n.data=qH(t,e),n.attachments=e.length,{packet:n,buffers:e}}function qH(r,e){if(!r)return r;if(iP(r)){let t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){let t=new Array(r.length);for(let n=0;n&lt;r.length;n++)t[n]=qH(r[n],e);return t}else if(typeof r=="object"&amp;&amp;!(r instanceof Date)){let t={};for(let n in r)Object.prototype.hasOwnProperty.call(r,n)&amp;&amp;(t[n]=qH(r[n],e));return t}return r}function Oae(r,e){return r.data=YH(r.data,e),delete r.attachments,r}function YH(r,e){if(!r)return r;if(r&amp;&amp;r._placeholder===!0){if(typeof r.num=="number"&amp;&amp;r.num&gt;=0&amp;&amp;r.num&lt;e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t&lt;r.length;t++)r[t]=YH(r[t],e);else if(typeof r=="object")for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&amp;&amp;(r[t]=YH(r[t],e));return r}var Uae=5,In;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(In||(In={}));var XH=class{constructor(e){this.replacer=e}encode(e){return(e.type===In.EVENT||e.type===In.ACK)&amp;&amp;oP(e)?this.encodeAsBinary({type:e.type===In.EVENT?In.BINARY_EVENT:In.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===In.BINARY_EVENT||e.type===In.BINARY_ACK)&amp;&amp;(t+=e.attachments+"-"),e.nsp&amp;&amp;e.nsp!=="/"&amp;&amp;(t+=e.nsp+","),e.id!=null&amp;&amp;(t+=e.id),e.data!=null&amp;&amp;(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=Lae(e),n=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(n),o}},sP=class extends Ko{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let n=t.type===In.BINARY_EVENT;n||t.type===In.BINARY_ACK?(t.type=n?In.EVENT:In.ACK,this.reconstructor=new QH(t),t.attachments===0&amp;&amp;super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(iP(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&amp;&amp;(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0,n={type:Number(e.charAt(0))};if(In[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===In.BINARY_EVENT||n.type===In.BINARY_ACK){let i=t+1;for(;e.charAt(++t)!=="-"&amp;&amp;t!=e.length;);let s=e.substring(i,t);if(s!=Number(s)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(s)}if(e.charAt(t+1)==="/"){let i=t+1;for(;++t&amp;&amp;!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";let o=e.charAt(t+1);if(o!==""&amp;&amp;Number(o)==o){let i=t+1;for(;++t;){let s=e.charAt(t);if(s==null||Number(s)!=s){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){let i=this.tryParse(e.substr(t));if(sP.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case In.CONNECT:return typeof t=="object";case In.DISCONNECT:return t===void 0;case In.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case In.EVENT:case In.BINARY_EVENT:return Array.isArray(t)&amp;&amp;t.length&gt;0;case In.ACK:case In.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&amp;&amp;(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},QH=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let t=Oae(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function ku(r,e,t){return r.on(e,t),function(){r.off(e,t)}}var dMe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),ew=class extends Ko{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&amp;&amp;n.auth&amp;&amp;(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&amp;&amp;this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[ku(e,"open",this.onopen.bind(this)),ku(e,"packet",this.onpacket.bind(this)),ku(e,"error",this.onerror.bind(this)),ku(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&amp;&amp;this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(dMe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&amp;&amp;!this.flags.fromQueue&amp;&amp;!this.flags.volatile)return this._addToQueue(t),this;let n={type:In.EVENT,data:t};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){let s=this.ids++,a=t.pop();this._registerAckCallback(s,a),n.id=s}let o=this.io.engine&amp;&amp;this.io.engine.transport&amp;&amp;this.io.engine.transport.writable;return this.flags.volatile&amp;&amp;(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var n;let o=(n=this.flags.timeout)!==null&amp;&amp;n!==void 0?n:this._opts.ackTimeout;if(o===void 0){this.acks[e]=t;return}let i=this.io.setTimeoutFn(()=&gt;{delete this.acks[e];for(let s=0;s&lt;this.sendBuffer.length;s++)this.sendBuffer[s].id===e&amp;&amp;this.sendBuffer.splice(s,1);t.call(this,new Error("operation has timed out"))},o);this.acks[e]=(...s)=&gt;{this.io.clearTimeoutFn(i),t.apply(this,[null,...s])}}emitWithAck(e,...t){let n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,i)=&gt;{t.push((s,a)=&gt;n?s?i(s):o(a):o(s)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&amp;&amp;(t=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...i)=&gt;n!==this._queue[0]?void 0:(o!==null?n.tryCount&gt;this._opts.retries&amp;&amp;(this._queue.shift(),t&amp;&amp;t(o)):(this._queue.shift(),t&amp;&amp;t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let t=this._queue[0];t.pending&amp;&amp;!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=&gt;{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:In.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case In.CONNECT:e.data&amp;&amp;e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case In.EVENT:case In.BINARY_EVENT:this.onevent(e);break;case In.ACK:case In.BINARY_ACK:this.onack(e);break;case In.DISCONNECT:this.ondisconnect();break;case In.CONNECT_ERROR:this.destroy();let n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){let t=e.data||[];e.id!=null&amp;&amp;t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&amp;&amp;this._anyListeners.length){let t=this._anyListeners.slice();for(let n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&amp;&amp;e.length&amp;&amp;typeof e[e.length-1]=="string"&amp;&amp;(this._lastOffset=e[e.length-1])}ack(e){let t=this,n=!1;return function(...o){n||(n=!0,t.packet({type:In.ACK,id:e,data:o}))}}onack(e){let t=this.acks[e.id];typeof t=="function"&amp;&amp;(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&amp;&amp;this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=&gt;this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=&gt;{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&amp;&amp;(this.subs.forEach(e=&gt;e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&amp;&amp;this.packet({type:In.DISCONNECT}),this.destroy(),this.connected&amp;&amp;this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let n=0;n&lt;t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let n=0;n&lt;t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&amp;&amp;this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let n of t)n.apply(this,e.data)}}};function tC(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter&gt;0&amp;&amp;r.jitter&lt;=1?r.jitter:0,this.attempts=0}tC.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&amp;1)==0?r-t:r+t}return Math.min(r,this.max)|0};tC.prototype.reset=function(){this.attempts=0};tC.prototype.setMin=function(r){this.ms=r};tC.prototype.setMax=function(r){this.max=r};tC.prototype.setJitter=function(r){this.jitter=r};var tw=class extends Ko{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&amp;&amp;typeof e=="object"&amp;&amp;(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,$f(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&amp;&amp;n!==void 0?n:.5),this.backoff=new tC({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;let o=t.parser||JH;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&amp;&amp;this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&amp;&amp;this._reconnection&amp;&amp;this.backoff.attempts===0&amp;&amp;this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Du(this.uri,this.opts);let t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let o=ku(t,"open",function(){n.onopen(),e&amp;&amp;e()}),i=ku(t,"error",s=&gt;{n.cleanup(),n._readyState="closed",this.emitReserved("error",s),e?e(s):n.maybeReconnectOnOpen()});if(this._timeout!==!1){let s=this._timeout;s===0&amp;&amp;o();let a=this.setTimeoutFn(()=&gt;{o(),t.close(),t.emit("error",new Error("timeout"))},s);this.opts.autoUnref&amp;&amp;a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(o),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(ku(e,"ping",this.onping.bind(this)),ku(e,"data",this.ondata.bind(this)),ku(e,"error",this.onerror.bind(this)),ku(e,"close",this.onclose.bind(this)),ku(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){rP(()=&gt;{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&amp;&amp;!n.active&amp;&amp;n.connect():(n=new ew(this,e,t),this.nsps[e]=n),n}_destroy(e){let t=Object.keys(this.nsps);for(let n of t)if(this.nsps[n].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let n=0;n&lt;t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=&gt;e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&amp;&amp;this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&amp;&amp;!this.skipReconnect&amp;&amp;this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts&gt;=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=&gt;{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&amp;&amp;e.open(o=&gt;{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},t);this.opts.autoUnref&amp;&amp;n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var aP={};function lP(r,e){typeof r=="object"&amp;&amp;(e=r,r=void 0),e=e||{};let t=Bae(r,e.path||"/socket.io"),n=t.source,o=t.id,i=t.path,s=aP[o]&amp;&amp;i in aP[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s,l;return a?l=new tw(n,e):(aP[o]||(aP[o]=new tw(n,e)),l=aP[o]),t.query&amp;&amp;!e.query&amp;&amp;(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(lP,{Manager:tw,Socket:ew,io:lP,connect:lP});var jf="0-0",Vf=class{constructor({url:e,issuer:t,noteId:n}){this._connectionState="connecting";this.messageBuffer=[];t.mustIssue("loilonote-share").then(o=&gt;{this.sock=lP(e,{transports:["websocket"],query:{noteId:String(n),appToken:o.app_token},reconnectionAttempts:5}),this.sock.on("message",i=&gt;this.onMessage(i)),this.sock.on("connect",()=&gt;{this.setConnectionState("connected")}),this.sock.on("connect_error",()=&gt;{this.setConnectionState("error")}),this.sock.on("disconnect",()=&gt;{this.setConnectionState("disconnected")}),this.sock.io.on("reconnect_attempt",()=&gt;{this.setConnectionState("reconnecting")}),this.sock.io.on("reconnect_failed",()=&gt;{this.setConnectionState("reconnect_failed")})}).catch(fe.error)}get id(){var e;return(e=this.sock)==null?void 0:e.id}get connected(){return this._connectionState==="connected"}connectionState(){return this._connectionState}static async forNote({issuer:e,noteId:t}){let n=e.mustGetEndpoint("loilonote-share"),o=new Vf({url:n+"/note",issuer:e,noteId:t}),i=ss();return o.setConnectionStateListener(s=&gt;{if(s==="connected")i.resolve();else if(s==="error"){let a=he.get().strings;i.reject(new co(a.couldNotConnectSharedNote))}else i.reject(new Error("unexpected state"))}),await i,o}reconnect(){var e,t;(e=this.sock)==null||e.disconnect(),this.setConnectionState("reconnecting"),(t=this.sock)==null||t.connect()}emit(e,t){this.sock&amp;&amp;this.sock.emit("message",e,n=&gt;{n.type==="ack"?t==null||t():(t==null||t(n.payload),this.reconnect())})}createClientMessage(e,t,n){let o={protocolVersion:n,localId:Sr(),localTimestamp:new Date().toISOString()},i={shouldSave:PY(e),baseRevision:t};return{...o,type:"command",payload:{...i,payload:e}}}close(){var e;this._connListener=void 0,(e=this.sock)==null||e.disconnect()}onMessage(e){this.messageBuffer.push(e),this.flushServerMessage()}setMessageHandler(e){this._handler=e,this.flushServerMessage()}setConnectionStateListener(e){this._connListener=e}setConnectionState(e){var t;this._connectionState=e,(t=this._connListener)==null||t.call(this,e)}flushServerMessage(){if(this._handler){let e=this.messageBuffer;this.messageBuffer=[];for(let t of e)this._handler(t)}}};async function ZH(r){let e=await Vf.forNote({noteId:r.noteId,issuer:Vr}),{commands:t,snapshot:n}=await eG(r);return{commands:t,file:n,socketClient:e}}async function zae(r){let{commands:e,snapshot:t}=await eG(r);return{commands:e,reloadedSnapshot:t}}async function eG({store:r,noteId:e,author:t,snapshot:n,startRevToListCommands:o,snapshotRevWhenCommandsMissing:i}){var l;let s=n!=null?n:await ie.lnsClient.downloadSnapshot({noteId:e,protocolVersion:aa}).then(u=&gt;Cp(u,t)),a=await pMe({noteId:e,snapshot:s,startRev:o,snapshotRevWhenCommandsMissing:i});return a.type==="commandsMissing"?eG({store:r,noteId:e,author:t,snapshotRevWhenCommandsMissing:(l=s.share_metadata)==null?void 0:l.revision}):(s.share_metadata||(s.share_metadata={revision:jf,protocol_version:aa}),{commands:a.commands,snapshot:s!==n?s:void 0})}async function pMe(r){var c,p;let{noteId:e,snapshot:t,startRev:n,snapshotRevWhenCommandsMissing:o}=r,{shareClient:i}=ie,s=(c=t.share_metadata)==null?void 0:c.revision,a=n!=null?n:s,l="+",u=!0,d=[];for(;u;){let f=await i.listNoteCommands(e,{end:l,start:a,count:100});if(u=f.length===100,hMe(s,o)){if(((p=f[0])==null?void 0:p.revision)!==a)return{type:"commandsMissing"};f.shift()}f.length&gt;0&amp;&amp;(a=f[f.length-1].revision),d=d.concat(f)}return{type:"success",commands:d}}var hMe=(r,e)=&gt;!(!r||r===e||El(aK,r)&gt;0);async function Hae({store:r,courseId:e,name:t,permissions:n,teacherPermission:o,studentPermission:i,openAfterCreated:s=!0}){let a=4,l=he.get().strings,u=Ey(0).toJSON(),{user_id:d}=r.userInfo,c=iG(d,r.deviceId),p=[],h=[],f=[],m,g;r.reduce(we(a,""));try{let{id:C}=await ie.lnsClient.createNote({courseId:e,name:t,note:u,version:1,header:c});m=C;let x=n.slice(0,100);await ie.lnsClient.makeNoteShared({noteId:m,protocolVersion:aa,permissions:x,teacherPermission:o,studentPermission:i}),p.push(...x),g=Qae({noteId:m,name:t,userId:d}),h.push(hp(e,[g]))}catch(C){Je.catchError(C)||r.reduce(we(a,null),me(a,{...ot(C,XN(l)),title:l.couldntCreateNote,okMessage:l.back,onOk:()=&gt;r.reduce(me(a,void 0))}));return}let{success:v,fail:b}=await rG(m,n.slice(100));if(p.push(...v),b){if(Je.catchError(b.error))return;f.push(me(a,{title:l.couldntEditMember,okMessage:l.back,onOk:()=&gt;r.reduce(me(a,void 0)),...rC({t:l,title:l.couldntAdd,numOfAll:n.length,...b})}))}if(h.push(q0(m,p)),s)try{let C=await Vf.forNote({noteId:m,issuer:Vr});h.push(...nG({courseId:e,noteId:m,name:t,pushState:!0,file:Xae(u,c),commands:[],socketClient:C}))}catch(C){f.length===0&amp;&amp;f.push(me(a,{title:(0,tG.sprintf)(l.couldntOpenItem,l.note),...ot(C),okMessage:l.back,onOk:()=&gt;r.reduce(me(a,void 0))}))}return r.reduce(...h,...f,we(a,null)),g}async function KN(r,e){var u;let t=4,n=he.get().strings;r.reduce(we(t,""));let{courseId:o,name:i}=e,s=(u=e.openAfterCreated)!=null?u:!0,a=Ey(0).toJSON(),{user_id:l}=r.userInfo;try{let d=iG(l,r.deviceId),p=(await ie.lnsClient.createNote({courseId:o,name:i,note:a,version:1,header:d})).id;await ie.lnsClient.makeNoteShared({noteId:p,protocolVersion:aa});let h=Qae({noteId:p,name:i,userId:l}),f=[hp(e.courseId,[h]),we(t,null)];if(s){let m=await Vf.forNote({noteId:p,issuer:Vr});f.push(...nG({courseId:o,noteId:p,name:i,pushState:!0,file:Xae(a,d),commands:[],socketClient:m}))}return r.reduce(...f),h}catch(d){if(Je.catchError(d))return;let c=n.errorOccurred;d instanceof sr&amp;&amp;(c=`${d.status}: ${c}`),r.reduce(we(t,null),me(t,{title:c,okMessage:n.back,onOk:()=&gt;r.reduce(me(t,void 0))}))}}async function Gae({store:r,noteId:e,permissions:t}){Ee(t.length&gt;0,"userIds.length should be &gt; 0");let n=he.get().strings,o=60,i=[];r.reduce(we(o,""));let{success:s,fail:a}=await rG(e,t);if(a){if(Je.catchError(a.error))return!1;i.push(me(o,{title:n.couldntEditMember,okMessage:n.back,onOk:()=&gt;r.reduce(me(o,void 0)),...rC({t:n,title:n.couldntAdd,numOfAll:t.length,...a})}))}return r.reduce(...i,q0(e,s),we(o,null)),!(a!=null&amp;&amp;a.error)}async function Wae(r,e,t){Ee(t.length&gt;0,"userIds.length should be &gt; 0");let n=he.get().strings,o=60,i=[];r.reduce(we(o,""));let{success:s,fail:a}=await $ae(e,t);if(a){if(Je.catchError(a.error))return!1;i.push(me(o,{title:n.couldntEditMember,okMessage:n.back,onOk:()=&gt;r.reduce(me(o,void 0)),...rC({t:n,title:n.couldntDel,numOfAll:t.length,...a})}))}return r.reduce(...i,I1(e,s),we(o,null)),a===void 0}async function fMe(r,e){let t=[],n=0,o;for(let i=0;i&lt;e.length;i+=100){let s=e.slice(i,i+100);try{let{added:a,not_found:l,unauthorized:u}=await ie.lnsClient.addNoteMembersOld(r,s);t.push(...a),l&amp;&amp;(n+=l.length),u&amp;&amp;(n+=u.length)}catch(a){fe.error(a),n+=s.length,o=a}}return{success:t,fail:n&gt;0?{numOfFail:n,error:o}:void 0}}async function rG(r,e){let t=[],n=0,o;for(let i=0;i&lt;e.length;i+=100){let s=e.slice(i,i+100);try{let{not_found:a,unauthorized:l}=await ie.lnsClient.addSharedNotePermissions(r,s),u=[...a!=null?a:[],...l!=null?l:[]];u.length===0?t.push(...s):(t.push(...s.filter(({userId:d})=&gt;!u.includes(d))),n+=u.length)}catch(a){n+=s.length,o=a}}return{success:t,fail:n&gt;0?{numOfFail:n,error:o}:void 0}}async function $ae(r,e){let t=[],n=0,o;for(let i=0;i&lt;e.length;i+=100){let s=e.slice(i,i+100);try{let{deleted:a,not_found:l}=await ie.lnsClient.deleteSharedNotePermissions(r,s);t.push(...a,...l!=null?l:[])}catch(a){fe.error(a),n+=s.length,o=a}}return{success:t,fail:n&gt;0?{numOfFail:n,error:o}:void 0}}async function Vae({store:r,noteId:e,permission:t}){Ee(t.studentPermission||t.teacherPermission,"permission should not be null");let n=81,o=[];r.reduce(we(n,""));try{let i=await ie.lnsClient.updateNoteInfo({noteId:e,...t});o.push(lu(e,i))}catch(i){if(!Je.catchError(i)){let s=he.get().strings,{message:a,unknownError:l}=ot(i,XN(s));o.push(me(n,{title:s.couldNotChangeSharedNoteSettings,message:a,unknownError:l,okMessage:s.back,onOk:()=&gt;r.reduce(me(n,void 0))}))}}r.reduce(...o,we(n,null))}async function jae({store:r,noteId:e,permissions:t}){var d,c;Ee(t.length&gt;0,"permissions should have more than one element");let n=82,o=he.get().strings,i=[],s=[],a=[],l;r.reduce(we(n,""));for(let p=0;p&lt;t.length;p+=100){let h=t.slice(p,p+100);try{let f=await ie.lnsClient.updateSharedNotePermissions(e,h);a.push(...(d=f.notFound)!=null?d:[]),s.push(...(c=f.notFound)!=null?c:[])}catch(f){s.push(...h.map(({userId:m})=&gt;m)),l=f}}if(Je.catchError(l))return!1;s.length&gt;0&amp;&amp;i.push(me(n,{title:o.couldNotChangeSharedNoteSettings,okMessage:o.back,onOk:()=&gt;r.reduce(me(n,void 0)),...rC({t:o,error:l,title:o.couldntEditMemberWithCount,numOfAll:t.length,numOfFail:s.length})}));let u=t;return s.length&gt;0&amp;&amp;(u=t.filter(({userId:p})=&gt;!s.includes(p))),r.reduce(...i,VE(e,u),I1(e,a),we(n,null)),!l}async function Kae(r,e){let t=70,n=he.get().strings;r.reduce(we(t,""));try{await ie.lnsClient.makeNoteShared({noteId:e,protocolVersion:aa})}catch(o){if(Je.catchError(o))return{type:"error",error:o};let{message:i,unknownError:s}=ot(o);return r.reduce(we(t,null),me(t,{title:i,unknownError:s,okMessage:n.back,onOk:()=&gt;r.reduce(me(t,void 0))})),{type:"error",error:o}}return r.reduce(we(t,null),lu(e,{is_shared:!0})),{type:"success",value:void 0}}async function qae({store:r,noteId:e,permissions:t,...n}){let o=70,i=he.get().strings,s=[],a=[];r.reduce(we(o,""));let l=t.slice(0,100);try{await ie.lnsClient.makeNoteShared({noteId:e,protocolVersion:aa,permissions:l,...n}),s.push(...l),a.push(lu(e,{is_shared:!0}))}catch(c){if(Je.catchError(c))return{type:"error",error:c};let{message:p,unknownError:h}=ot(c,XN(i));return r.reduce(we(o,null),me(o,{title:i.couldntCreateNote,message:p,unknownError:h,okMessage:i.back,onOk:()=&gt;r.reduce(me(o,void 0))})),{type:"error",error:c}}let{success:u,fail:d}=await rG(e,t.slice(100));if(s.push(...u),d){if(Je.catchError(d.error))return{type:"error",error:d.error};a.push(me(o,{title:i.couldntEditMember,okMessage:i.back,onOk:()=&gt;r.reduce(me(o,void 0)),...rC({t:i,title:i.couldntAdd,numOfAll:t.length,...d})}))}return r.reduce(...a,we(o,null),q0(e,s)),{type:"success",value:void 0}}async function qN(r){var u;let{store:e,note:t,revision:n}=r,{lnsClient:o}=ie;fe.log(`saving: revision=${n}`);let i=t.toJSON();Qc(i,yS);let s=e.notes.byId[t.id],a=(u=s==null?void 0:s.version)!=null?u:1,l=await X1({note:i,version:a,header:iG(e.userInfo.user_id,e.deviceId),share_metadata:{revision:n,protocol_version:aa}});await o.createNoteSnapshot({noteId:t.id,commandRevision:n,protocolVersion:aa,noteFile:new File([l],"note.lnnote",{type:"application/zip"})}),e.reduce(lu(t.id,{updated_at:new Date().toISOString()}))}async function rw(r,{courseId:e,noteId:t,pushState:n}){let o=he.get().strings,i=21;r.reduce(we(i,o.openingNote));try{let[s,a,l]=await Promise.all([ZH({store:r,noteId:t,author:Nr(r,r.userInfo.user_id)}),ie.lnsClient.getSharedNoteIndividualMembers(t),ie.lnsClient.getNoteInfo(t)]);r.reduce(we(i,null),tU(t,a.map(u=&gt;({...u,hasIndividualPermission:!0}))),lu(t,l),...nG({...s,courseId:e,noteId:t,pushState:n}))}catch(s){if(Je.catchError(s))return;fe.error(s);let a=()=&gt;{r.reduce(ei(nt.notes(e),null),cp(!0),ed(),me(i,void 0))},l=xd({error:s,courseId:e,targetId:`notes/${t}`,okMessage:o.goBackToNoteList,isDocument:!1,onOk:a});r.reduce(we(i,null),me(i,l))}}function nG({file:r,commands:e,socketClient:t,courseId:n,noteId:o,pushState:i,name:s}){return[nS({courseId:n,noteId:o,isShared:!0}),eU(o,{file:r,commands:e,socketClient:t}),X0({courseId:n,noteId:o,pushState:i,name:s}),Y0("connected")]}async function Yae(r,e){let{file:t,commands:n,socketClient:o}=await ZH({store:r,noteId:e,author:Nr(r,r.userInfo.user_id)});return r.reduce(eU(e,{file:t,commands:n,socketClient:o}),Rb(e,{saveState:"done",lastSavedDate:new Date,version:t.version})),{file:t,commands:n,socketClient:o}}async function YN(r,{noteId:e}){let t=he.get().strings;return Ln(r,{fetchingId:nt.sharedNoteIndividualMembers(e),promise:ie.lnsClient.getSharedNoteIndividualMembers(e),doneReducer:n=&gt;tU(e,n.map(o=&gt;({...o,hasIndividualPermission:!0}))),errorReducer:Pl({store:r,id:61,title:t.couldntFetchSharedNoteMembers})})}async function oG(r,{adds:e=[],dels:t=[],noteId:n}){let o=he.get().strings,i=60,s=[],a=[],l=[],u;r.reduce(we(i,""));let{success:d,fail:c}=await fMe(n,e);if(s.push(...d),c){if(Je.catchError(c.error))return;let{message:m,unknownError:g}=rC({t:o,title:o.couldntAdd,numOfAll:e.length,...c});l.push(...m),u=g}let{success:p,fail:h}=await $ae(n,t);if(a.push(...p),h){if(Je.catchError(h.error))return;let{message:m,unknownError:g}=rC({t:o,title:o.couldntDel,numOfAll:t.length,...h});l.push(...m),u=g}let f=[we(i,null),Gq({noteId:n,adds:s,dels:a})];l.length&gt;0&amp;&amp;f.push(me(i,{title:o.couldntEditMember,message:l,unknownError:u,okMessage:o.back,onOk:()=&gt;r.reduce(me(i,void 0))})),r.reduce(...f)}function XN(r){return{[400]:r.invalidRequest,[403]:e=&gt;{let t=e.asJson();return(t==null?void 0:t.error_code)===0?r.ipAddressRestricted:r.insufficientPermission},[404]:r.status404ItemNotFound}}function iG(r,e){return{format:"note",format_version:SS,updater:{id:r,device_id:e}}}function Xae(r,e){return{note:r,header:e,version:1,share_metadata:{protocol_version:aa,revision:jf}}}function Qae(r){let{noteId:e,name:t,userId:n}=r;return{id:e,is_deleted:!1,is_shared:!0,name:t,user_id:n,version:1,updated_at:new Date().toISOString(),viewer_permission:"manage"}}function rC(r){let{t:e,error:t,title:n,numOfAll:o,numOfFail:i}=r,s=[(0,tG.sprintf)(n,o,i)],a;if(t){let{message:l,unknownError:u}=ot(t,XN(e));s.push(l),a=u}return{message:s,unknownError:a}}function sG(r,e){let t=he.get().strings;r.reduce(me(78,{title:t.couldNotConnectSharedNote,message:e==="disconnected"?t.unexpectedErrorOccurred:t.checkInternetConnection,okMessage:t.reload,onOk:()=&gt;location.reload(),cancelMessage:t.closeNote,onCancel:()=&gt;r.reduce(ed(),me(78,void 0))}))}var QN=class{constructor(){this.bus=ic();this.pointers=new Map;this.pointerTimers=new Map}getPointers(){return Array.from(this.pointers.values())}getPointer(e){return this.pointers.get(e)}setPointer(e){let{id:t}=e.user,n=this.pointerTimers.get(t);n&amp;&amp;clearTimeout(n),this.pointers.set(t,e),this.pointerTimers.set(t,setTimeout(()=&gt;{this.pointers.delete(t),this.pointerTimers.delete(t),this.bus.publish(e)},2*1e3)),this.bus.publish(e)}subscribe(e){return this.bus.subscribe(e)}};function uP(r,e){let t=Math.floor(Math.random()*r);return t===e?uP(r,e):t}function Jae(r){Ee(r&gt;1,"argument must be greater than 1");let e=uP(r),t=uP(r,e);return[e,t]}function Zae(r){return{card:r,geometry:r.createDrawnGeometry("drawn")}}function ele({assetUploadStates:r},e,t){let n=[];if(t){let s=r[t];s!=null&amp;&amp;s.drawn&amp;&amp;(n=[[t,s.drawn]])}else n=Object.entries(r).filter(([,s])=&gt;s.drawn).map(([s,a])=&gt;[s,a.drawn]);let o=[],i=[];for(let[s,a]of n){let l=e.getCardSafe(s);l?a!=="saving"&amp;&amp;i.push(l):o.push(s)}return{deletedCardIds:o,unsavedCards:i}}function Sv({store:r,note:e,cardId:t}){let{deletedCardIds:n,unsavedCards:o}=ele(r,e,t);r.reduce(R1(o.map(Zae)),fp(n,"drawn"))}function tle({store:r,note:e}){let t=Date.now(),{deletedCardIds:n,unsavedCards:o}=ele(r,e),i=o.filter(a=&gt;{var d;let l=(d=a.extendedDrawn())==null?void 0:d.commands;return!l||l.length===0?!1:t-z_(l[l.length-1].revision)[0]&gt;fE*2}),s;if(i.length&lt;3)s=i;else{let a=Jae(i.length);s=[i[a[0]],i[a[1]]]}r.reduce(R1(s.map(a=&gt;Zae(a))),fp(n,"drawn"))}var nw=class{constructor({store:e,canvas:t,note:n,revision:o,lastSavedRevision:i,socketClient:s,commands:a}){this.remotePointerManager=new QN;this.remoteStrokeBus=ic();this.drawnSaveTimers=new Map;this.saving=!1;this.onMessage=e=&gt;{if(e.type==="command"){let t=e.sender,n=e.payload,{revision:o}=n;if(o)if(El(this.revision,o)&lt;0)this.revision=o;else{fe.warn(`"previous revision: curr=${this.revision}, recv=${n.revision}"`);return}let i=t.id!==this.socketClient.id;if(n.payload.type==="stroke"){this.handleStrokeCommand(n);let{payload:s,revision:a}=n,{operation:l,cardId:u}=s;l==="assetUpdated"?this.note.useCard(u,d=&gt;{Oa.onAssetUpdate(d);let c=d.createDrawnGeometry("drawn");mr.get(d).drawn.redrawThumbnails({geometry:c,contents:Xn.forCard("drawn",d.id).packContents()})}):(l==="add"||l==="delete")&amp;&amp;Xn.forCard("drawn",u).onServerCommand(s,a,i)}i&amp;&amp;this.manager.onCardCommand({cmd:e.payload.payload,serverCmdParams:{sender:t,revision:o}})}else e.type==="connected"?(fe.log(e),this.getStore().reduce(Wq(this.note.id,e.payload.sessions))):e.type==="userLeft"?(fe.log(e),this.getStore().reduce(Vq(this.note.id,e.payload.id)),this.remoteStrokeBus.publish({cmd:e,sender:e.payload})):e.type==="userJoined"?(fe.log(e),this.getStore().reduce($q(this.note.id,e.payload))):e.type==="error"&amp;&amp;fe.error(e.type,e.payload)};this.onConnectionStateChange=e=&gt;{fe.log("onConnectionStateChange",e),this.getStore().reduce(Y0(e))};this.store=e,this.note=n,this.revision=o,this.lastSavedRevision=i,this.noteChannelCloser=ie.pushClient.subscribeNote(n.id,{onNoteSnapshotCreated:l=&gt;this.lastSavedRevision=l.revision}),a.filter(l=&gt;l.payload.type==="stroke").map(l=&gt;this.handleStrokeCommand(l)),this.manager=new Jx(this,t),this.manager.mergeExtendedDrawn(),this.socketClient=s,this.socketClient.setMessageHandler(this.onMessage),this.socketClient.setConnectionStateListener(this.onConnectionStateChange),this.socketClient.connectionState()==="disconnected"&amp;&amp;sG(e,"disconnected"),this.manager.schedule(),this.scheduleSave()}getStore(){return this.store}static create({store:e,canvas:t,noteId:n,file:o,commands:i,socketClient:s}){var d,c;let a=yd(n,o.note),l=(c=(d=o.share_metadata)==null?void 0:d.revision)!=null?c:jf,u=l;for(let p of i)a.handleCommand(p.payload),u=p.revision;return new nw({store:e,canvas:t,note:a,revision:u,lastSavedRevision:l,socketClient:s,commands:i})}isShared(){return!0}noteId(){return this.note.id}getNote(){return this.note}getManager(){return this.manager}getRenderer(){return this.manager.renderer}getRemotePointerManager(){return this.remotePointerManager}getRemoteStrokeBus(){return this.remoteStrokeBus}setDrawnSaveTimer(e){clearTimeout(this.drawnSaveTimers.get(e)),this.drawnSaveTimers.set(e,setTimeout(()=&gt;{Sv({store:this.store,note:this.note,cardId:e})},fE))}hasDrawnSaveTimer(e){return this.drawnSaveTimers.has(e)}unsetDrawnSaveTimer(e){clearTimeout(this.drawnSaveTimers.get(e)),this.drawnSaveTimers.delete(e)}clearDrawnSaveTimers(){for(let e of this.drawnSaveTimers.values())clearTimeout(e);this.drawnSaveTimers.clear()}scheduleSave(){var s;if(Qh(this.getStore())==="readPermission")return;let e=this.getStore().sharedNoteSessions.byNoteId[this.noteId()],t=(s=this.socketClient)==null?void 0:s.id;if(!e||!t){fe.log("scheduleSave: not prepared");return}let n=Array.from(e).sort().indexOf(t),o=20*1e3;clearTimeout(this.saveSnapshotTimer);let i=()=&gt;{let a=Date.now(),l=kX({now:a,intervalMs:o,index:n,total:e.length,jitterMs:uP(o)});this.saveSnapshotTimer=setTimeout(()=&gt;{tle({store:this.store,note:this.note}),this.saveNote(),i()},l-a)};i()}async saveNote(){try{let e=this.revision;!this.saving&amp;&amp;e!==this.lastSavedRevision&amp;&amp;(this.saving=!0,await qN({store:this.getStore(),note:this.note,revision:e}),this.lastSavedRevision=e,await this.manager.saveNoteThumbnail({type:"shared",noteId:this.note.id,revision:e}))}catch(e){if(Je.catchError(e))return;let t=he.get().strings,{message:n,unknownError:o}=ot(e),i=t.back,s=!1;if(e instanceof ng)i=t.closeNote,s=!0;else if(e instanceof sr){let a=e.asJson();e.status===403?(s=!0,(a==null?void 0:a.error_code)===0?n=t.ipAddressRestricted:(a==null?void 0:a.error_code)===5&amp;&amp;(n=(0,aG.sprintf)(t.api403ErrorMsg,t.note))):e.status===404&amp;&amp;(s=!0,n=(0,aG.sprintf)(t.xIsDeleted,t.note)),i=t.closeNote}this.getStore().reduce(me(22,{title:t.couldntSaveNote,message:n,unknownError:o,okMessage:i,onOk:()=&gt;{let a=[me(22,void 0)];s&amp;&amp;a.push(ed()),this.getStore().reduce(...a)}})),fe.error(e)}finally{this.saving=!1}}handleStrokeCommand({payload:e,revision:t}){let{operation:n}=e;n==="assetUpdated"?this.note.onStrokeAssetUpdated(e):(n==="add"||n==="delete")&amp;&amp;this.note.onStrokeAddDel(e,t)}onNextStore(e){this.manager.onNextStore(e),this.store.sharedNoteSessions.byNoteId[this.noteId()]!==e.sharedNoteSessions.byNoteId[this.noteId()]&amp;&amp;queueMicrotask(()=&gt;this.scheduleSave()),on(e)&amp;&amp;!on(this.store)&amp;&amp;(clearTimeout(this.saveSnapshotTimer),this.clearDrawnSaveTimers()),Oq(this.note.id,this.store,e)&amp;&amp;this.socketClient.reconnect(),Uq(this.store,e)&amp;&amp;this.reload(),zq(this.getStore(),e)&amp;&amp;sG(this.getStore(),"reconnect_failed"),this.store=e}async reload(){var u,d,c;let e=this.getStore(),t=this.noteId(),n=he.get().strings,o=21,i=(u=this.getStore().sharedNoteFiles[this.note.id])==null?void 0:u.file;Ee(i,"Note file is needed to reload");let s=Date.now()+1*1e3;e.reduce(we(o,n.reconnectingToSharedNote)),clearTimeout(this.saveSnapshotTimer),this.clearDrawnSaveTimers();let{reloadedSnapshot:a,commands:l}=await zae({store:e,noteId:t,author:Nr(e,e.userInfo.user_id),startRevToListCommands:this.revision,snapshot:i});a&amp;&amp;(this.lastSavedRevision=this.revision=(c=(d=a.share_metadata)==null?void 0:d.revision)!=null?c:jf,this.note=yd(t,a.note),this.manager.reloadNote(this.note),this.manager.schedule());for(let p of l)this.note.handleCommand(p.payload),this.revision=p.revision;l.filter(p=&gt;p.payload.type==="stroke").map(p=&gt;this.handleStrokeCommand(p)),this.manager.mergeExtendedDrawn(),this.scheduleSave(),setTimeout(()=&gt;{e.reduce(we(o,null))},Math.max(0,s-Date.now()))}onEmitCardCommand(e){this.manager.onCardCommand({cmd:e});let t=this.socketClient.createClientMessage(e,this.lastSavedRevision,aa);this.socketClient.emit(t)}close(){var e;(e=this.socketClient)==null||e.close(),this.manager.close(),clearTimeout(this.saveSnapshotTimer),this.clearDrawnSaveTimers(),ie.pushClient.unsubscribeNote(this.noteId(),this.noteChannelCloser)}};var ow=oe(Wr());function mMe(r){return`app.loilonote:${r}`}var rle=mMe("backedUpNotes");function nle(r){if(localStorage){let e=localStorage.getItem(rle),t=[];return e&amp;&amp;(t=JSON.parse(e)),t.push(r),localStorage.setItem(rle,JSON.stringify(t)),t.length}return 0}function dP(r,e){let t=he.get().strings;return e==="self-study"?Ln(r,{fetchingId:nt.notes(e),promise:ie.lnsClient.getSelfStudyNotes(),doneReducer:n=&gt;mU(e,n),errorReducer:Pl({store:r,id:47,title:t.couldntGetNote})}):Ln(r,{fetchingId:nt.notes(e),promise:ie.lnsClient.getMixedNotes(e),doneReducer:n=&gt;mU(e,n),errorReducer:Pl({store:r,id:47,title:t.couldntGetNote})})}function ole(r,e){let t=he.get().strings;return Ln(r,{fetchingId:nt.noteInfo(e),promise:ie.lnsClient.getNoteInfo(e),doneReducer:n=&gt;()=&gt;({notes:{byId:{[n.id]:{$set:n}}}}),errorReducer:Pl({store:r,id:48,title:t.couldntGetNote})})}async function JN(r,{courseId:e,note:t,version:n}){let o=t.id;r.reduce(ag(o,{saveState:"saving"})),fe.log("saving...");let i=t.toJSON();Qc(i,yS);let s=Dc([...t.iterator()].map(l=&gt;l.toJSON())),a={format:"note",format_version:i.version,updater:{id:r.userInfo.user_id,device_id:r.deviceId}};await ie.lnsClient.uploadNote({courseId:e,noteId:o,version:n,note:i,header:a,assets:s}).then(()=&gt;{let l=new Date;r.reduce(ag(o,{saveState:"done",lastSavedDate:l,version:n}),lu(o,{updated_at:l.toISOString()})),fe.log("saved")}).catch(l=&gt;{fe.error(l);let u={saveState:"unsaved"};throw l instanceof Ju&amp;&amp;(u.saveState=l),r.reduce(ag(o,u)),l})}async function ile(r,{courseId:e,note:t,name:n,baseNoteId:o}){let i=he.get().strings;r.reduce(we(22,i.savingNoteWithOtherName));let s={format:"note",format_version:t.version,updater:{id:r.userInfo.user_id,device_id:r.deviceId}};await ie.lnsClient.createNote({courseId:e,name:n,note:t,header:s,version:1}).then(a=&gt;{r.reduce(hp(e,[{id:a.id,user_id:r.userInfo.user_id,name:n,version:1,is_shared:!1,is_deleted:!1,updated_at:new Date().toISOString()}]),ag(o,{saveState:"done"}),Rb(a.id,{saveState:"done",version:1,lastSavedDate:new Date}),we(22,null),nS({courseId:e,noteId:a.id,popoverOpen:!1,isShared:!1}),X0({courseId:e,noteId:a.id,pushState:!0,name:n}),A1(a.id,{version:1,note:t,header:s}))}).catch(cle(r,{courseId:e,note:t,name:n}))}function sle(r,e){let t=he.get().strings;r.reduce(we(22,t.overwritingNote));let n={format:"note",format_version:e.note.version,updater:{id:r.userInfo.user_id,device_id:r.deviceId}};ie.lnsClient.uploadNote({header:n,...e}).then(()=&gt;{r.reduce(ag(e.noteId,{version:e.version,saveState:"done"}),we(22,null))}).catch(cle(r,e))}async function ZN(r,{name:e,courseId:t,note:n,openAfterCreated:o=!0}){let i=he.get().strings,s=4,a=(0,ow.sprintf)(i.creatingNote,e);r.reduce(we(s,a));try{let u={format:"note",format_version:n.version,updater:{id:r.userInfo.user_id,device_id:r.deviceId}},d=await ie.lnsClient.createNote({courseId:t,name:e,note:n,version:1,header:u}),c={id:d.id,user_id:r.userInfo.user_id,version:1,name:e,is_shared:!1,is_deleted:!1,updated_at:new Date().toISOString()},p=[hp(t,[c]),we(s,null),Rb(d.id,{saveState:"done",lastSavedDate:new Date,version:1})];return o&amp;&amp;p.push(...gMe({courseId:t,header:u,noteInfo:c,note:n})),r.reduce(...p),c}catch(l){if(Je.catchError(l))return;fe.error(l),r.reduce(we(s,null),me(s,{title:i.couldntCreateNote,...ot(l),okMessage:i.back,onOk:()=&gt;{r.reduce(me(s,void 0))}}))}}function gMe(r){let{courseId:e,header:t,note:n,noteInfo:o}=r,i=o.name;return[A1(o.id,{note:n,version:1,header:t}),nS({courseId:e,noteId:o.id,popoverOpen:!1,isShared:!1}),X0({courseId:e,noteId:o.id,pushState:!0,name:i})]}async function ale(r,{noteId:e,prevName:t,nextName:n}){let o=he.get().strings,i=5,s=(0,ow.sprintf)(o.renamingNote,t,n);r.reduce(we(i,s));try{await ie.lnsClient.renameNote({noteId:e,noteName:n}),r.reduce(()=&gt;({notes:{byId:{[e]:{name:{$set:n}}}}}),we(i,null))}catch(a){fe.error(a),r.reduce(we(i,null),me(i,{title:o.couldntRenameNote,...ot(a),okMessage:o.back,onOk:()=&gt;{r.reduce(me(i,void 0))}}))}}async function lle(r,{noteId:e,courseId:t,title:n}){var l;let o=he.get().strings,i=6,s=(0,ow.sprintf)(o.deletingNote,n);r.reduce(we(i,s));let a=((l=r.desktop)==null?void 0:l.noteId)===e;try{await ie.lnsClient.deleteNote(e);let u=[QE(t,e),we(i,null)];a&amp;&amp;u.push(ed()),r.reduce(...u)}catch(u){r.reduce(we(i,null),me(i,{title:(0,ow.sprintf)(o.couldntDeleteNote,n),...ot(u),okMessage:o.back,onOk:()=&gt;r.reduce(me(i,void 0))}))}}async function iw(r,{noteId:e,courseId:t,pushState:n}){let o=he.get().strings;r.reduce(we(21,o.openingNote));try{let i=await ie.lnsClient.downloadNote(e),s=await Cp(i,Nr(r,r.userInfo.user_id)),a=[nS({courseId:t,noteId:e,popoverOpen:!1,isShared:!1}),A1(e,s),X0({courseId:t,noteId:e,pushState:n}),we(21,null)];a.push(Rb(Gr(e),{saveState:"done",lastSavedDate:new Date,version:s.version})),r.reduce(...a)}catch(i){if(Je.catchError(i))return;fe.error(i);let s=()=&gt;{r.reduce(ei(nt.notes(t),null),cp(!0),me(21,void 0))},a=xd({error:i,courseId:t,targetId:`notes/${e}`,okMessage:o.goBackToNoteList,isDocument:!1,onOk:s});r.reduce(we(21,null),me(21,a))}}async function ule(r,e){let t=await ie.lnsClient.downloadNote(e),n=await Cp(t,Nr(r,r.userInfo.user_id));return r.reduce(A1(e,n),Rb(e,{saveState:"done",lastSavedDate:new Date,version:n.version})),n}async function dle(r,{noteIds:e,destCourseId:t,suffix:n}){let o=he.get().strings;r.reduce(we(7,o.copyingNote));try{await ie.lnsClient.copyNotes({noteIds:e,destCourseId:t,suffix:n}),r.reduce(we(7,null),Jt({type:"normal",text:o.copied}))}catch(i){r.reduce(we(7,null),me(7,{title:o.couldntCopyNote,...ot(i),okMessage:o.back,onOk:()=&gt;r.reduce(me(7,void 0))}))}}function cle(r,e){let t=he.get().strings;return n=&gt;{if(Je.catchError(n))return;let o=nle(e),i=t.couldntSaveNote,s=he.get().pluralSafeSuffix(o);fe.error(n),r.reduce(we(22,null),me(22,{title:i,...ot(n,{default:(0,ow.sprintf)(t.didBackupUnsavedChanges,o,s)}),okMessage:t.closeNote,onOk:()=&gt;{r.reduce(ed(),me(22,void 0))}}))}}async function ple(r){let{store:e,noteId:t,showDialog:n}=r,o=e.noteStates[t];n&amp;&amp;e.reduce(iU(!0));let i=await ie.lnsClient.getNoteHeader(t).catch(Je.handleError).catch(fe.error).finally(()=&gt;e.reduce(iU(!1)));!i||o.version&lt;i.version&amp;&amp;e.reduce(jE(t,!0))}var eB=class{constructor({store:e,canvas:t,note:n}){this.note=n,this.store=e,this.manager=new Jx(this,t),this.manager.mergeExtendedDrawn(),this.manager.schedule(),this.scheduleSave(),this.scheduleCheckNote()}getStore(){return this.store}getManager(){return this.manager}getRemotePointerManager(){}getRemoteStrokeBus(){}hasDrawnSaveTimer(e){return!1}setDrawnSaveTimer(e){}unsetDrawnSaveTimer(e){}isShared(){return!1}noteId(){return this.note.id}getRenderer(){return this.manager.renderer}getNote(){return this.note}scheduleSave(){this.saveNoteTimer=setInterval(()=&gt;{document.hasFocus()&amp;&amp;(this.saveNote(),Sv({store:this.store,note:this.note}))},20*1e3)}scheduleCheckNote(){this.checkNoteVersionTimer=setInterval(()=&gt;{document.hasFocus()&amp;&amp;this.checkIfNoteVersionOld()},10*1e3)}onNextStore(e){let t=this.store;this.manager.onNextStore(e),t.saveNoteTrigger!==e.saveNoteTrigger&amp;&amp;this.saveNote();let n=Ig();t.pageFocused!==e.pageFocused&amp;&amp;n&amp;&amp;this.onVisibilityChanged(e.pageFocused),t.pageVisible!==e.pageVisible&amp;&amp;(n||this.onVisibilityChanged(e.pageVisible)),this.store=e}onVisibilityChanged(e){e?this.checkIfNoteVersionOld(!0):(Sv({store:this.store,note:this.note}),this.saveNote())}onEmitCardCommand(e){let t=this.manager.onCardCommand({cmd:e});if(e.type==="stroke"&amp;&amp;e.operation==="assetUpdated"&amp;&amp;(t=this.note.onStrokeAssetUpdated(e),this.note.useCard(e.cardId,n=&gt;{Oa.onAssetUpdate(n)})),t){let n=this.note.id;this.getStore().noteStates[n].saveState==="done"&amp;&amp;this.getStore().reduce(ag(n,{saveState:"unsaved"}))}}checkIfNoteVersionOld(e){let t=Gr(this.manager.noteId),n=this.getStore();n.noteStates[t].saveState==="done"&amp;&amp;ple({store:n,noteId:t,showDialog:e})}saveNote(){let{courseId:e}=this.manager,t=Gr(this.manager.noteId),n=this.getStore(),o=n.noteStates[t];if(o.saveState==="saving"){fe.log("still saving. skip");return}if(o.saveState instanceof Error){fe.log("error occurred while saving. skip");return}let i=n.noteNeedsReload[t];if(o.saveState==="done"||i){fe.log("not modified. skip saving");return}let s=o.version+1,a=this.manager.note;JN(n,{courseId:e,note:a,version:s}).then(()=&gt;this.manager.saveNoteThumbnail({type:"standard",noteId:t,version:s})).catch(l=&gt;{if(Je.catchError(l)||l instanceof Ju)return;let u=he.get().strings;n.reduce(me(22,{title:u.couldntUploadNotes,...ot(l),okMessage:u.back,onOk:()=&gt;n.reduce(me(22,void 0))}))})}close(){this.saveNote(),this.manager.close(),clearInterval(this.saveNoteTimer),clearInterval(this.checkNoteVersionTimer)}};var Rc=oe(ve());var xv=oe(ve()),mle=oe(ve());var hle=oe(ve()),Kr=({children:r,disable:e,style:t,onClick:n,...o})=&gt;{let i;return e?i={...t,cursor:"not-allowed",opacity:.5}:i={...t},hle.default.createElement("div",{onMouseDown:s=&gt;{s.preventDefault()},onClick:e?void 0:n,style:i,...o},r)};var lG=class{constructor(e,t){this.config=e;this.bounds=t;this.page=0}},vMe=new Mx,bMe=fr.create();function fle(r,e){let{menuItems:t,isMobile:n}=r;if(t.length&lt;1)return{menuItems:[],numPages:0};let o=n?4:15,i=n?10:13,s=38,a=n?44:38,l=55,u=30,d=1,c=bMe.getContext2dForce(),p=t.map(x=&gt;{let y=0,S=0;x.title&amp;&amp;x.title.length&gt;0&amp;&amp;(S=vMe.measure({ctx:c,fontName:e.regularWtFontName,fontSize:i,text:x.title}).width);let T=x.icon?s:0;return n?(y+=T&gt;=S?T:S,y=Math.max(y,l)):y+=S+T,y+=o*2+d,{width:y,height:a}}),h=[],f=0;for(let x=0;x&lt;t.length;x++){let y=t[x],S=p[x];h.push(new lG(y,{x:f,y:0,...S})),f+=S.width}let m=window.innerWidth-2*Ay;if(h.reduce((x,y)=&gt;x+y.bounds.width,0)&lt;=m)return{menuItems:h,numPages:1};let v=0,b=0,C=[];for(let x=0;x&lt;h.length;x++){let y=h[x];v+y.bounds.width+u&gt;m&amp;&amp;(b++,v=u),y.bounds={x:v,y:0,width:y.bounds.width,height:y.bounds.height},y.page=b,C.push(y),v+=y.bounds.width}return{menuItems:C,numPages:b+1}}var tB=r=&gt;{let e=pe(),[t,n]=$r({...fle(r,e),currentPage:0});(0,mle.useEffect)(()=&gt;{let i=fle(r,e),s=it(t.currentPage,0,i.numPages-1);n({currentPage:s,...i})},[r.menuItems]);let o=i=&gt;{let s=it(t.currentPage+i,0,t.numPages-1);n({currentPage:s})};return xv.default.createElement("div",{className:`${r.menuClassName} popoverMenu`},t.numPages&gt;1&amp;&amp;t.currentPage-1&gt;=0&amp;&amp;xv.default.createElement(Kr,{role:"button",className:`${r.itemClassName} popoverMenuItemPager popoverMenuPagerContainer`,onClick:()=&gt;o(-1)},xv.default.createElement("div",{className:"popoverMenuPagerLeft"})),t.menuItems.filter(i=&gt;i.page===t.currentPage).map((i,s)=&gt;xv.default.createElement(Kr,{key:s,role:"button",className:`${r.itemClassName} popoverMenuItem`,onClick:i.config.onClick,disable:i.config.disable,"data-disabled":i.config.disable===!0},i.config.icon,xv.default.createElement("span",{className:i.config.titleClassName},i.config.title))),t.numPages&gt;1&amp;&amp;t.currentPage+1&lt;t.numPages&amp;&amp;xv.default.createElement(Kr,{role:"button",className:`${r.itemClassName} popoverMenuItemPager popoverMenuPagerContainer`,onClick:()=&gt;o(1)},xv.default.createElement("div",{className:"popoverMenuPagerRight"})))};function uG(r,e){let t=e.userInfo.is_teacher;return!r.isFolded&amp;&amp;(r instanceof jr||r instanceof wn&amp;&amp;t)}var gle=({store:r,noteContext:e})=&gt;{var z,N,V;let t=pe(),n=()=&gt;r.reduce(Ar(!1)),o=Sd();if(Al(()=&gt;{var re;(re=r.desktop)!=null&amp;&amp;re.popoverOpen&amp;&amp;n()},[r.screen]),((z=r.desktop)==null?void 0:z.popoverOpen)!==!0)return null;let i=(N=r.desktop)==null?void 0:N.focusingCard;if(!i||!e.getNote().hasCard(i.id))return null;let s=e.getNote().getCard(i.id),a=i.favorite,l=i.pinned,u=!i.pinned,d=i.canPin,c=i.canAlign,p=e.getNote().hasCard(i.id),h=i.canRotate&amp;&amp;s instanceof ga,f=av(),m=mr.forCard(s.id),g=((V=o.rotatingStates)==null?void 0:V[s.id])!=="rotating"&amp;&amp;s.contentAssetId()!==void 0&amp;&amp;!m.content.isLoading(),v=Array.from(s.isFolded?s.memberAndChildrenIterator():s.familyIterator()).map(re=&gt;re.id),b=Rf(r,v)===void 0,C=uG(s,r),x=b,y=()=&gt;{We($Y(i.id,!a)),r.reduce(Ar(!1))},S=()=&gt;{let re=_c(s,s.isFolded);!confirm(re)||(s.isFolded?We(bp(s.id)):We(du(s.id)),r.reduce(ti()))},T=()=&gt;{if(!!b){if(C)At(new sp(s.id,!1));else{let re=s.isFolded?"group":"single";At(new Xu(s.id,re,!1))}r.reduce(Ar(!1))}},w=()=&gt;{We(cu(i.id,!i.pinned)),r.reduce(Ar(!1))},k=re=&gt;{let ce=us(re),ge=kr(kt)*ce**2,ae=kr(re.bounds),Y=1e-10,W=ae&lt;ge+Y,G=W?t.expand:t.shrink,ee;if(Math.abs(ae-ge)&lt;Y){let P;re.parent?P=kr(re.parent.bounds)/9:P=kr(xi),ee=ds(re.bounds,P)}else ee=ds(re.bounds,ge);let F=Nt(re.bounds,ee),L=.6;return(re.parent||W)&amp;&amp;(L=.4),[G,()=&gt;{We(HY({card:re,size:F,duration:L,grouped:re.isFolded})),r.reduce(Ar(!1))}]},A=()=&gt;{Ee(s!=null,"card must be defined"),qne(r,s)},I=()=&gt;{let re=e.getRenderer().viewportRect();g_({card:s,visibleRect:re}),r.reduce(ti())},E=async()=&gt;{if(!!x)try{let re=Nr(r,r.userInfo.user_id);await Tk(s,s.isFolded,re),r.reduce(Ar(!1),Jt({type:"normal",text:t.copiedToClipboard}))}catch(re){let ce=ot(re,{default:t.failedToCopyCards}).message;r.reduce(Ar(!1),Jt({type:"error",text:ce}))}},O=i.bounds,Q=qe(O.x,O.y-10,O.width,O.height),[j,U]=s?k(s):[],B=(()=&gt;{let re={title:t.copy,onClick:E,disable:!x,icon:Rc.default.createElement("div",{className:"cardPopoverCopyIcon cardPopoverIcon"})};if(on(r))return f?[re]:[];let ce=[];return ce.push({title:a?t.release:"",onClick:y,icon:Rc.default.createElement("div",{className:"cardPopoverStarIcon cardPopoverIcon"})}),d&amp;&amp;ce.push({title:l?t.release:"",onClick:w,icon:Rc.default.createElement("div",{className:"cardPopoverPinIcon cardPopoverIcon"})}),c&amp;&amp;ce.push({title:t.arrange,onClick:I,icon:Rc.default.createElement("div",{className:"cardPopoverArrangeIcon cardPopoverIcon"})}),u&amp;&amp;j&amp;&amp;U&amp;&amp;ce.push({title:j,onClick:U,icon:Rc.default.createElement("div",{className:"cardPopoverResizeIcon cardPopoverIcon","data-expand":j===t.expand})}),h&amp;&amp;ce.push({title:t.rotate,onClick:g?A:()=&gt;{},disable:!g,icon:Rc.default.createElement("div",{className:"cardPopoverRotateIcon cardPopoverIcon"})}),ce.push({title:C?t.reuse:t.duplicate,onClick:T,disable:!b,icon:Rc.default.createElement("div",{className:`${C?"cardPopoverReuseIcon":"cardPopoverDuplicateIcon"} cardPopoverIcon`})}),f&amp;&amp;ce.push(re),p&amp;&amp;ce.push({title:t.delete,onClick:S,icon:Rc.default.createElement("div",{className:"cardPopoverDeleteRedIcon cardPopoverIcon"}),titleClassName:"cardPopoverDeleteRedText"}),ce})();return Rc.default.createElement(kf,{className:"fade",anchor:"topCenter",arrowColor:is.toRGBAHex(),roundEdge:!0,getParentBounds:()=&gt;Q},Rc.default.createElement(tB,{menuItems:B,screen:r.screen,onDismiss:n,menuClassName:"popoverMenuCard",itemClassName:"popoverMenuCardItem",isMobile:r.screen.isMobile}))};var oh=oe(ve()),kP=oe(ve());var dG=oe(ve());var eo=function({children:e,...t}){return dG.default.createElement(tr,{className:"centerModal",overlay:!0,...t},dG.default.createElement("div",{className:"centerDialogInner"},e))};var cG=oe(ve()),pG=({status:r})=&gt;cG.default.createElement("div",{className:"uiStatusBadge","data-state":r}),sw=({status:r})=&gt;{let e="gray";return r==="reconnecting"?e="yellow":r==="error"?e="red":r==="connected"&amp;&amp;(e="green"),cG.default.createElement(pG,{status:e})};var vn=oe(ve()),vle=oe(Wr());var Mo=oe(ve());var mn=({children:r})=&gt;Mo.default.createElement("div",{className:"listViewCellBody"},r),cP=({children:r})=&gt;Mo.default.createElement("div",{className:"listCellDualBody"},r),aw=({children:r})=&gt;Mo.default.createElement("div",{className:"listCellDualTitle ellipsisText"},r),th=({children:r})=&gt;Mo.default.createElement("div",{className:"listCellDualDesc ellipsisText"},r);var xr=({className:r,onClick:e,onDragStart:t,showArrow:n,expandable:o,border:i,checked:s,highlight:a,selectOpts:l,deleteOpts:u,role:d="button",disabled:c=!1,draggable:p=!1,children:h})=&gt;{let f=()=&gt;{c||(l?l.onSelect(!l.selected):u?u.deleting?u.onDeleting(!1):u.onDeleting(!0):e&amp;&amp;e())},m={};if(i){let v="1px solid #e0e0e0";i.top&amp;&amp;(m.borderTop=v),i.left&amp;&amp;(m.borderLeft=v),i.right&amp;&amp;(m.borderRight=v)}let g=pe();return Mo.default.createElement("div",{onClick:f,"data-disabled":c,"data-highlight":a,style:m,role:d,className:"listViewCell "+(r||""),draggable:p,onDragStart:t},Mo.default.createElement("div",{className:"listViewCellInner","data-deleting":u==null?void 0:u.deleting},l&amp;&amp;Mo.default.createElement(Ur,null,Mo.default.createElement("div",{className:"listViewSelectable","data-select-type":l.selectionType||"normal","data-checked":l.selected})),o&amp;&amp;Mo.default.createElement(Ur,null,Mo.default.createElement("div",{className:"listViewExpandableArrowMark","data-expanded":o.expanded})),u&amp;&amp;Mo.default.createElement(Ur,null,Mo.default.createElement("div",{className:"listViewDeleteMark"})),h,s&amp;&amp;Mo.default.createElement(Ur,null,Mo.default.createElement("div",{className:"listViewCheckMark"})),n&amp;&amp;Mo.default.createElement(Ur,null,Mo.default.createElement("div",{className:"listViewArrowMark"}))),u&amp;&amp;Mo.default.createElement(Mn,{timeout:250,in:u.deleting,unmountOnExit:!0,classNames:"listViewDeleteButton"},Mo.default.createElement("div",{className:"listViewDeleteButton",onClick:()=&gt;u.onDelete()},g.delete)))},Ur=({className:r,children:e})=&gt;Mo.default.createElement("div",{className:`listCellItem ${r!=null?r:""}`},e),gn=({title:r,titleColor:e,children:t,className:n})=&gt;Mo.default.createElement("div",{className:`listViewSection ${n!=null?n:""}`},r!=null&amp;&amp;Mo.default.createElement(hG,{style:{color:e}},r),t),hG=({children:r,className:e,...t})=&gt;Mo.default.createElement("div",{className:"listViewSectionTitle "+(e||""),...t},r),lw=({children:r})=&gt;Mo.default.createElement("div",{className:"uiListRow"},r),js=({children:r,...e})=&gt;Mo.default.createElement("div",{className:"uiListDesc",...e},r),nC=({children:r,...e})=&gt;Mo.default.createElement(Gt,{className:"listViewRoundButton",...e},Mo.default.createElement("div",{className:"listViewRoundButtonInner"},r));var va=oe(ve());var wv=({message:r,onClickUser:e,selectedIds:t,statusForUser:n,sections:o,selectable:i=!0,isDisabledForUser:s})=&gt;va.default.createElement("div",{className:"userPickerBody"},r&amp;&amp;va.default.createElement("div",{className:"userPickerDesc"},r),o.filter(a=&gt;a[1].length&gt;0).map(([a,l],u,d)=&gt;va.default.createElement(yMe,{key:a,title:a,list:l,onClick:e,statusForUser:n,selectedIds:t,selectable:i,isDisabledForUser:s,needsHr:u!==d.length-1}))),uw=({disableReleaseAll:r,disableSelectAll:e,onClickReleaseAll:t,onClickSelectAll:n})=&gt;{let o=pe();return va.default.createElement("div",{className:"userPickerButtons"},va.default.createElement(Gt,{style:{width:"50%",justifyContent:"center"},onClick:n,disabled:e,className:"primaryTextButton"},o.selectAll),va.default.createElement(Gt,{style:{width:"50%",justifyContent:"center"},onClick:t,disabled:r,className:"primaryTextButton"},o.releaseAll))},yMe=({title:r,list:e,statusForUser:t,selectedIds:n,onClick:o,selectable:i,needsHr:s,isDisabledForUser:a})=&gt;{let d=Me(),c=d.screen.isMobile?d.screen.width-40:410,p=Math.max(1,Math.floor(c/64)),h=18,f=g=&gt;{if(g&lt;=1)return[1,18];let v=(c-g*64)/(g-1);return v&lt;18?f(g-1):[g,v]};[p,h]=f(p);let m=kK(e,p);return va.default.createElement("div",{className:"userPickerSection","data-hr":s},va.default.createElement("div",{className:"userPickerSectionTitle"},r),va.default.createElement("div",null,m.map((g,v)=&gt;va.default.createElement("div",{key:`row-${v}`,className:"userPickerContentRow",style:{marginBottom:v===m.length-1?0:h}},g.map((b,C)=&gt;{var w;if(!b)return va.default.createElement("div",{key:`empty-${C}`,className:"userPickerEmptyCell"});let x=zt(b),y=t==null?void 0:t(b.id),S=(w=a==null?void 0:a(b.id))!=null?w:!1,T=!S&amp;&amp;i;return va.default.createElement("div",{className:"userPickerCell relative",key:"user-"+b.id,role:T?"button":void 0,onClick:()=&gt;o(b.id),"data-teacher":b.is_teacher,"data-selected":n.includes(b.id),"data-selectable":T,"data-disabled":S},va.default.createElement("span",{className:"userPickerCellName",title:x},Array.from(CMe(x))),y&amp;&amp;va.default.createElement("div",{style:{position:"absolute",left:2,bottom:2}},va.default.createElement(sw,{status:y})))})))))};function*CMe(r){let e=r.split(/[\s]/);for(let t=0;t&lt;e.length;t++)yield e[t],t&lt;e.length-1&amp;&amp;(yield va.default.createElement("br",{key:"br"+t}))}var rB=vn.default.createContext({state:{selectedIds:[],saving:!1},dispatch:()=&gt;{},diffs:{adds:[],dels:[],changed:!1},noteId:0,onClose(){},async onSave(){},saveButtonTitle:"",fetchState:null,isOwner:!1,memberIds:[],participants:{teachers:[],students:[],allIds:[]},forNew:!1}),ble=({courseId:r,noteId:e,onClose:t})=&gt;{let n=pe(),o=Me(),i=o.notes.byId[e],s=[o.userInfo.user_id],a=o.fetchStates[nt.courseAttributes(r)],l=o.fetchStates[nt.courseTemporaryTeachers(r)],u=Cle([a,l]);(0,vn.useEffect)(()=&gt;{(!a||!l)&amp;&amp;Ua(o,r)},[a,l]);let d=(0,vn.useMemo)(()=&gt;qh({store:o,courseId:r,includeSelf:!0}),[r,o.users]),c=async p=&gt;{!confirm(n.confirmShareNote)||(await Kae(o,e)).type!=="success"||(await oG(o,{adds:p.members.adds,noteId:e}),t("done"))};return vn.default.createElement(yle,{memberIds:s,courseId:r,noteId:e,title:(0,vle.sprintf)(n.shareXXX,i.name),fetchState:u,participants:d,saveButtonTitle:n.convertToSharedNote,onSave:c,onClose:()=&gt;t("cancel"),forNew:!0})},nB=({courseId:r,noteId:e,onClose:t})=&gt;{var p;let n=pe(),o=Me(),i=o.notes.byId[e];(0,vn.useEffect)(()=&gt;{YN(o,{noteId:e})},[]);let s=(p=o.sharedNotePermissions[e])!=null?p:[],a=o.fetchStates[nt.courseAttributes(r)],l=o.fetchStates[nt.courseTemporaryTeachers(r)],u=o.fetchStates[nt.sharedNoteIndividualMembers(e)];(0,vn.useEffect)(()=&gt;{(!a||!l)&amp;&amp;Ua(o,r)},[a,l]);let d=(0,vn.useMemo)(()=&gt;qh({store:o,courseId:r,includeSelf:!0}),[r,o.users]),c=Cle([a,l,u]);return vn.default.createElement(yle,{memberIds:Object.keys(s).map(Number),courseId:r,noteId:e,title:i.name,participants:d,saveButtonTitle:n.save,onSave:async h=&gt;{oG(o,{adds:h.members.adds,dels:h.members.dels,noteId:e})},fetchState:c,onClose:t,forNew:!1})},yle=({fetchState:r,participants:e,noteId:t,title:n,memberIds:o,saveButtonTitle:i,onSave:s,onClose:a,forNew:l})=&gt;{let u=Me(),d=pe(),c=!u.screen.isMobile,p=u.notes.byId[t],[h,f]=$r({selectedIds:o,saving:!1});(0,vn.useEffect)(()=&gt;{f({selectedIds:[...o]})},[o.join(",")]);let m=u.userInfo.user_id===p.user_id,g=()=&gt;{Ee(p!=null);let C=e.allIds.filter(x=&gt;x===p.user_id);f({selectedIds:C})},v=()=&gt;{let C=[...e.allIds];f({selectedIds:C})},b=(0,vn.useMemo)(()=&gt;{let C=new Set(h.selectedIds);o.forEach(y=&gt;C.delete(y));let x=new Set(o);return h.selectedIds.forEach(y=&gt;x.delete(y)),{adds:[...C],dels:[...x],changed:C.size&gt;0||x.size&gt;0}},[h.selectedIds,o]);return vn.default.createElement(rB.Provider,{value:{state:h,dispatch:f,isOwner:m,memberIds:o,noteId:p.id,onSave:s,saveButtonTitle:i,participants:e,diffs:b,fetchState:r,onClose:a,forNew:l}},vn.default.createElement(rr,{className:"sharedNoteMemberDialog",round:c},vn.default.createElement(Et,null,vn.default.createElement(Ft,null,vn.default.createElement(Mt,null,vn.default.createElement(SMe,null)),vn.default.createElement(Vt,null,vn.default.createElement(nr,null,n)),vn.default.createElement(jt,null,vn.default.createElement(xMe,null))),r==="fetching"&amp;&amp;vn.default.createElement(_t,{absolute:"bottom"})),vn.default.createElement(ur,{className:"sharedNoteMemberBody"},r instanceof Error&amp;&amp;vn.default.createElement(js,null,d.errorOccurred),o.length&gt;0&amp;&amp;vn.default.createElement(wMe,null)),m&amp;&amp;vn.default.createElement(Gp,null,vn.default.createElement(uw,{disableSelectAll:h.selectedIds.length===e.allIds.length,disableReleaseAll:h.selectedIds.length&lt;=1,onClickSelectAll:v,onClickReleaseAll:g}))))},Cle=r=&gt;{if(r.some(t=&gt;t==="fetching"))return"fetching";if(r.every(t=&gt;t==="done"))return"done";let e=r.find(t=&gt;t instanceof Error);return e||null},SMe=()=&gt;{let r=pe(),{onClose:e,forNew:t,dispatch:n,memberIds:o,diffs:i}=(0,vn.useContext)(rB),s=()=&gt;{n({selectedIds:[...o]})};return!t&amp;&amp;i.changed?vn.default.createElement(gt,{onClick:s},r.cancel):vn.default.createElement(gt,{onClick:e},r.close)},xMe=()=&gt;{let{state:r,dispatch:e,forNew:t,saveButtonTitle:n,onSave:o,isOwner:i,diffs:s,fetchState:a}=(0,vn.useContext)(rB),{changed:l}=s;return i?vn.default.createElement(gt,{disabled:a!=="done"||r.saving||!t&amp;&amp;!l,onClick:()=&gt;{e({saving:!0}),o({members:s}).finally(()=&gt;e({saving:!1}))}},n):null},wMe=()=&gt;{var h;let{noteId:r,participants:e,state:t,dispatch:n,isOwner:o}=(0,vn.useContext)(rB),i=pe(),s=Me(),l=((h=s.sharedNoteSessions.byNoteId[r])!=null?h:[]).map(f=&gt;s.sharedNoteSessions.byId[f]),u=new Set(l.map(f=&gt;f.user.id)),d=f=&gt;u.has(f)?"connected":"disconnected",c=(0,vn.useMemo)(()=&gt;{let f=s.notes.byId[r],m=[],g=[],v=[],b=[...e.teachers,...e.students];for(let C of b)C.id===f.user_id?m.push(C):C.is_teacher?g.push(C):v.push(C);return{owners:m,teachers:g,students:v}},[s.notes,e]);return vn.default.createElement(wv,{onClickUser:f=&gt;{!o||c.owners.some(m=&gt;m.id===f)||(t.selectedIds.includes(f)?n({selectedIds:t.selectedIds.filter(m=&gt;m!==f)}):n({selectedIds:t.selectedIds.concat([f])}))},statusForUser:d,message:s.userInfo.is_teacher?i.chooseUsersToBeShared:void 0,selectedIds:t.selectedIds,sections:[[i.administrator,c.owners],[i.teacher,c.teachers],[i.student,c.students]]})};var Ei=oe(ve());var oB=class{constructor(e,t){this.noteId=e;this.storeRef=t;this.subCount=0}static get(e,t){let n=this.instances.get(e);if(n)return n;{let o=new oB(e,t);return this.instances.set(e,o),o}}subscribe(){return this.subCount++,this.noteChannelCloser||(this.noteChannelCloser=ie.pushClient.subscribeNote(this.noteId,this)),{close:()=&gt;this.close()}}close(){--this.subCount&gt;0||(ie.pushClient.unsubscribeNote(this.noteId,this.noteChannelCloser),this.noteChannelCloser=void 0,oB.instances.delete(this.noteId))}onNoteUpdated(e){var a;if(e.by_user_id===this.storeRef.current.userInfo.user_id)return;let t=[],n=e.teacher_permission,o=e.student_permission,i={...e.name?{name:e.name}:{},...n?{teacher_permission:n}:{},...o?{student_permission:o}:{}};if(!this.storeRef.current.sharedNotePermissions[e.note_id][this.storeRef.current.userInfo.user_id]){let{is_teacher:l}=this.storeRef.current.userInfo,u;l&amp;&amp;n?u=n==="none"?null:n:!l&amp;&amp;o&amp;&amp;(u=o==="none"?null:o),u?i.viewer_permission=u:u===null&amp;&amp;(i.viewer_permission=void 0,((a=this.storeRef.current.desktop)==null?void 0:a.noteId)===e.note_id&amp;&amp;t.push(...Sle(this.storeRef.current)))}this.storeRef.current.reduce(lu(e.note_id,i),...t)}onSomeNoteMembersAdded(e){var i;if(e.by_user_id===this.storeRef.current.userInfo.user_id)return;let t=e.permissions.filter(({permission:s})=&gt;s!=="none").map(({user_id:s,permission:a})=&gt;({userId:s,permission:a})),n=[q0(e.note_id,t)],o=(i=t.find(({userId:s})=&gt;s===this.storeRef.current.userInfo.user_id))==null?void 0:i.permission;o&amp;&amp;n.push(lu(e.note_id,{viewer_permission:o})),this.storeRef.current.reduce(...n)}onSomeNoteMembersDeleted(e){var n;if(e.by_user_id===this.storeRef.current.userInfo.user_id)return;let t=[I1(e.note_id,e.user_ids)];if(e.user_ids.some(o=&gt;o===this.storeRef.current.userInfo.user_id)){let o=this.storeRef.current.notes.byId[e.note_id],i=this.storeRef.current.userInfo.is_teacher?o==null?void 0:o.teacher_permission:o==null?void 0:o.student_permission,s=i==="none"?void 0:i;t.push(lu(e.note_id,{viewer_permission:s})),((n=this.storeRef.current.desktop)==null?void 0:n.noteId)===e.note_id&amp;&amp;!s&amp;&amp;t.push(...Sle(this.storeRef.current))}this.storeRef.current.reduce(...t)}onSomeNoteMembersUpdated(e){var i;if(e.by_user_id===this.storeRef.current.userInfo.user_id)return;let t=e.permissions.map(({user_id:s,permission:a})=&gt;({userId:s,permission:a})),n=[VE(e.note_id,t)],o=(i=t.find(({userId:s})=&gt;s===this.storeRef.current.userInfo.user_id))==null?void 0:i.permission;o&amp;&amp;n.push(lu(e.note_id,{viewer_permission:o})),this.storeRef.current.reduce(...n)}},oC=oB;oC.instances=new Map;function Sle(r){Ee(r.desktop);let e=he.get().strings,{courseId:t,noteId:n}=r.desktop;return[ed(),QE(t,n),Co(64,{title:e.removedFromSharedNoteMembers,color:"info",okMessage:e.okay,onOk:()=&gt;r.reduce(Co(64,void 0))})]}var Lc=oe(ve()),xle=(0,Lc.createContext)({hasPrev:()=&gt;!1,onPrev:()=&gt;{},onNext:()=&gt;{}}),dw=()=&gt;(0,Lc.useContext)(xle),iB=({onClose:r,round:e=!1,children:t})=&gt;{let[n,o]=(0,Lc.useState)(0),i=Lc.default.Children.count(t),s=()=&gt;n&gt;0,a=()=&gt;{n===0?r():o(n-1)},l=()=&gt;{n&lt;i-1&amp;&amp;o(n+1)};return Lc.default.createElement("div",{className:"horizontalPager","data-round":e},Lc.default.createElement("div",{className:"horizontalPagerGrid",style:{gridTemplateColumns:`repeat(${i}, 100%)`,transform:`translate(${n*-100}%, 0)`}},Lc.default.createElement(xle.Provider,{value:{hasPrev:s,onPrev:a,onNext:l}},t)))};var pP={teacher:"manage",student:"write"},wle=new Map([["manage","sharedInManageable"],["write","sharedInWritable"],["read","sharedInViewOnly"]]);var ul=oe(ve());function Tle(r,e,t){var o,i,s;if(e==="none"||t.type==="individual"&amp;&amp;((o=t.member)==null?void 0:o.id)===r.user_id)return!1;let n=e==="owner";return r.is_teacher?!!(n||e==="schoolAdmin"||e==="manage"&amp;&amp;t.type!=="teachers"):!!(n&amp;&amp;(t.type==="students"||t.type==="individual"&amp;&amp;!((i=t.member)!=null&amp;&amp;i.is_teacher))||e==="manage"&amp;&amp;t.type==="individual"&amp;&amp;!((s=t.member)!=null&amp;&amp;s.is_teacher))}var Dle=oe(Wr());function sB(r,e,t=new Date){let n=/^(.+?) \((\d+)\)/,o=!1,i=(0,Dle.sprintf)(e.newNoteDefaultNameFmt,t.getFullYear(),t.getMonth()+1,t.getDate()),[s]=r.map(a=&gt;(a===i&amp;&amp;(o=!0),a.match(n))).filter(a=&gt;a!=null&amp;&amp;a[1]==i).map(a=&gt;parseInt(a[2])).sort((a,l)=&gt;l-a);return s!=null?`${i} (${Math.max(s,1)+1})`:o?`${i} (2)`:i}var TMe=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,DMe=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,kMe=/[^-+\dA-Z]/g;function Ks(r,e,t,n){if(arguments.length===1&amp;&amp;typeof r=="string"&amp;&amp;!/\d/.test(r)&amp;&amp;(e=r,r=void 0),r=r||r===0?r:new Date,r instanceof Date||(r=new Date(r)),isNaN(r))throw TypeError("Invalid date");e=String(kle[e]||e||kle.default);var o=e.slice(0,4);(o==="UTC:"||o==="GMT:")&amp;&amp;(e=e.slice(4),t=!0,o==="GMT:"&amp;&amp;(n=!0));var i=function(){return t?"getUTC":"get"},s=function(){return r[i()+"Date"]()},a=function(){return r[i()+"Day"]()},l=function(){return r[i()+"Month"]()},u=function(){return r[i()+"FullYear"]()},d=function(){return r[i()+"Hours"]()},c=function(){return r[i()+"Minutes"]()},p=function(){return r[i()+"Seconds"]()},h=function(){return r[i()+"Milliseconds"]()},f=function(){return t?0:r.getTimezoneOffset()},m=function(){return PMe(r)},g=function(){return AMe(r)},v={d:function(){return s()},dd:function(){return Pu(s())},ddd:function(){return Hl.dayNames[a()]},DDD:function(){return Ple({y:u(),m:l(),d:s(),_:i(),dayName:Hl.dayNames[a()],short:!0})},dddd:function(){return Hl.dayNames[a()+7]},DDDD:function(){return Ple({y:u(),m:l(),d:s(),_:i(),dayName:Hl.dayNames[a()+7]})},m:function(){return l()+1},mm:function(){return Pu(l()+1)},mmm:function(){return Hl.monthNames[l()]},mmmm:function(){return Hl.monthNames[l()+12]},yy:function(){return String(u()).slice(2)},yyyy:function(){return Pu(u(),4)},h:function(){return d()%12||12},hh:function(){return Pu(d()%12||12)},H:function(){return d()},HH:function(){return Pu(d())},M:function(){return c()},MM:function(){return Pu(c())},s:function(){return p()},ss:function(){return Pu(p())},l:function(){return Pu(h(),3)},L:function(){return Pu(Math.floor(h()/10))},t:function(){return d()&lt;12?Hl.timeNames[0]:Hl.timeNames[1]},tt:function(){return d()&lt;12?Hl.timeNames[2]:Hl.timeNames[3]},T:function(){return d()&lt;12?Hl.timeNames[4]:Hl.timeNames[5]},TT:function(){return d()&lt;12?Hl.timeNames[6]:Hl.timeNames[7]},Z:function(){return n?"GMT":t?"UTC":IMe(r)},o:function(){return(f()&gt;0?"-":"+")+Pu(Math.floor(Math.abs(f())/60)*100+Math.abs(f())%60,4)},p:function(){return(f()&gt;0?"-":"+")+Pu(Math.floor(Math.abs(f())/60),2)+":"+Pu(Math.floor(Math.abs(f())%60),2)},S:function(){return["th","st","nd","rd"][s()%10&gt;3?0:(s()%100-s()%10!=10)*s()%10]},W:function(){return m()},WW:function(){return Pu(m())},N:function(){return g()}};return e.replace(TMe,function(b){return b in v?v[b]():b.slice(1,b.length-1)})}var kle={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},Hl={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},Pu=function(e){var t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")},Ple=function(e){var t=e.y,n=e.m,o=e.d,i=e._,s=e.dayName,a=e.short,l=a===void 0?!1:a,u=new Date,d=new Date;d.setDate(d[i+"Date"]()-1);var c=new Date;c.setDate(c[i+"Date"]()+1);var p=function(){return u[i+"Date"]()},h=function(){return u[i+"Month"]()},f=function(){return u[i+"FullYear"]()},m=function(){return d[i+"Date"]()},g=function(){return d[i+"Month"]()},v=function(){return d[i+"FullYear"]()},b=function(){return c[i+"Date"]()},C=function(){return c[i+"Month"]()},x=function(){return c[i+"FullYear"]()};return f()===t&amp;&amp;h()===n&amp;&amp;p()===o?l?"Tdy":"Today":v()===t&amp;&amp;g()===n&amp;&amp;m()===o?l?"Ysd":"Yesterday":x()===t&amp;&amp;C()===n&amp;&amp;b()===o?l?"Tmw":"Tomorrow":s},PMe=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var o=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-o);var i=(t-n)/(864e5*7);return 1+Math.floor(i)},AMe=function(e){var t=e.getDay();return t===0&amp;&amp;(t=7),t},IMe=function(e){return(String(e).match(DMe)||[""]).pop().replace(kMe,"").replace(/GMT\+0000/g,"UTC")};var st=oe(ve()),Qs=oe(ve());var Ale=oe(Wr()),fG=/^[\s\t]*$/;function ba(r,e){let t=window.prompt(r,e.defaultValue);if(t===null)return null;let n=aB(t,e);return n!==null?(window.alert(n),null):t}function aB(r,e){let t=he.get().strings;return r.match(fG)?t.inputCannotContainSpacesWarning:r.length&gt;(e==null?void 0:e.maxLength)?(0,Ale.sprintf)(t.inputTooLongWarning,e.maxLength):null}var mG=oe(ve()),cw=({children:r,className:e="",...t})=&gt;mG.default.createElement("div",{className:["flex",e].join(" "),...t},r),No=()=&gt;mG.default.createElement("div",{className:"flexSpacer"});var Gl=oe(ve()),pw=oe(ve());function lB(){return({disabled:r,sortKeys:e,sortKey:t,sortDirection:n,onChange:o,titleForKey:i})=&gt;{let[s,a]=(0,pw.useState)(!1),l=p=&gt;()=&gt;{o(p,n),a(!1)},u=(0,pw.useCallback)(()=&gt;{let p=n=="ascending"?"descending":"ascending";o(t,p)},[e]),d=(0,pw.useRef)(null),c=d.current?sa(d.current.getBoundingClientRect()):void 0;return Gl.default.createElement("div",{className:"uiSortPanel"},Gl.default.createElement(Gt,{className:"uiSortButton",disabled:r,onClick:()=&gt;a(!0)},Gl.default.createElement("div",{className:"uiSortButtonPopoverAnchor",ref:d},Gl.default.createElement("div",{className:"uiSortButtonTitle"},i(t)),Gl.default.createElement("div",{className:"uiSortButtonDropdownArrow"}))),Gl.default.createElement(xt,{open:s,onClose:()=&gt;a(!1),parentBounds:c},e.map(p=&gt;Gl.default.createElement(Rr,{key:p,className:"uiSortMenuItem",onClick:l(p),role:"button"},Gl.default.createElement("div",{className:"uiSortMenuItemCheckMark","data-selected":p===t}),Gl.default.createElement("div",{className:"uiSortMenuItemTitle"},i(p))))),Gl.default.createElement(Gt,{className:"uiSortButton",disabled:r,onClick:u},Gl.default.createElement(EMe,{direction:n})))}}var EMe=({direction:r})=&gt;Gl.default.createElement("div",{className:"uiSortPanelSortDirectionButton"},Gl.default.createElement("div",{className:"uiSortPanelSortDirectionIcon","data-direction":r}));var dt=oe(ve()),xP=oe(ve());var pr=oe(ve()),Tv=oe(ve());var gG=oe(Wr());var iC=oe(Wr());async function Ile(r){let e=Promise.all([ie.lnsClient.getUserGroups(),ie.lnsClient.getSubjects(),ie.lnsClient.getAllCourses()]);await Ln(r,{fetchingId:nt.prepareForAddCourse(),promise:e,doneReducer:([t,n,o])=&gt;()=&gt;({userGroups:{byId:{$set:rn(t.map(i=&gt;[i.id,i]))}},subjects:{byId:{$set:rn(n.map(i=&gt;[i.id,i]))}},courses:{byId:{$set:rn(o.map(i=&gt;[i.course_id,i]))}}}),errorReducer:t=&gt;{let n=he.get().strings,o=72;return me(o,{title:n.groupFetchErrorOccurred,...ot(t),okMessage:n.close,onOk:()=&gt;r.reduce(me(o,void 0))})}})}async function Ele(r,e){let t=he.get().strings,n=8,o=(0,iC.sprintf)(t.creatingGroup,e);r.reduce(we(n,o)),await ie.lnsClient.createUserGroup(e).then(({id:i,code:s})=&gt;{r.reduce(()=&gt;({userGroups:{byId:{[i]:{$set:{id:i,name:e}}},recentlyCreated:{$set:{id:i,code:s}}}}),we(n,null),Co(n,{title:t.createCourseAfterUserGroupCreation,message:t.createCourseAfterUserGroupCreationDesc,okMessage:t.close,onOk:()=&gt;{r.reduce(Co(n,void 0))},color:"info"}))}).catch(Je.handleError).catch(i=&gt;{fe.error(i),r.reduce(we(n,null),me(n,{title:t.couldntCreateGroup,...ot(i),okMessage:t.back,onOk:()=&gt;r.reduce(me(n,void 0))}))})}async function _le(r,e){let t=he.get().strings,n=10,o=(0,iC.sprintf)(t.deletingGroup,e.name);r.reduce(we(n,o));try{await ie.lnsClient.deleteUserGroup(e.id),r.reduce(()=&gt;({userGroups:{byId:{$unset:[e.id]}}}),we(n,null))}catch(i){fe.error(i);let s=ot(i,{400:a=&gt;{let l=a.asJson(),u={0:t.couldntDeleteAsUsersExist,1:t.groupAlreadyDeleted,2:t.couldntDeleteArchivedGroup,3:t.groupUnavailable,4:t.couldntDeleteAsSubjectsExist,5:t.couldntDeleteClosedGroup};return(l==null?void 0:l.error)&amp;&amp;u[l.error.code]?u[l.error.code]:t.invalidRequest},403:t.groupDeletionDenied,404:t.groupDoesntExist});r.reduce(we(n,null),me(n,{title:t.couldntDeleteGroup,...s,okMessage:t.back,onOk:()=&gt;r.reduce(me(n,void 0))}))}}async function Fle(r,e,t){let n,o;typeof e=="string"?(o=e,n=ie.lnsClient.createCourse({subject_name:e,user_group_id:t.id})):(o=e.name,n=ie.lnsClient.linkCourse({subject_id:e.id,user_group_id:t.id}));let i=he.get().strings,s=0,a=(0,iC.sprintf)(i.creatingSubjectForGroup,o,t.name);r.reduce(we(s,a));try{let l=await n;r.reduce(()=&gt;{let u={course_id:l.course_id,subject_id:l.subject_id,subject_name:o,user_group_id:t.id,user_group_name:t.name},d;return typeof e=="string"?d={id:l.subject_id,name:e}:d=e,{courses:{byId:{[u.course_id]:{$set:u}},joinedCourseIds:{$push:[u.course_id]}},subjects:{byId:{[d.id]:{$set:d}}}}},we(s,null))}catch(l){r.reduce(we(s,null),me(s,{title:i.couldntCreateSubject,...ot(l),okMessage:i.back,onOk:()=&gt;r.reduce(me(s,void 0))}))}}async function Mle(r,e){let t=he.get().strings,n=2,o=(0,iC.sprintf)(t.joiningSubject,e.name);r.reduce(we(n,o));try{let i=await ie.lnsClient.joinSubject(e.id);r.reduce(()=&gt;({courses:{joinedCourseIds:{$push:i.courses.map(s=&gt;s.id)}}}),we(n,null))}catch(i){fe.error(i),r.reduce(we(n,null),me(n,{title:t.couldntJoinSubject,...ot(i),okMessage:t.back,onOk:()=&gt;r.reduce(me(n,void 0))}))}}function uB(r,e){let t=nt.userGroupCode(e.id);Ln(r,{fetchingId:t,promise:ie.lnsClient.getUserGroupCode(e.id),doneReducer:n=&gt;()=&gt;({userGroupJoinCode:{$set:{code:n,userGroup:e}}})})}function dB(r,e){let t=nt.userGroupAttendances(e);Ln(r,{fetchingId:t,promise:ie.lnsClient.getUserGroupAttendances(e),doneReducer:n=&gt;()=&gt;({userGroups:{attendancesById:{[e]:{$set:n}}}})})}async function Nle(r){let e=he.get().strings,t=44,n=prompt(e.enterGroupCode);if(n!=null){if(n=Dre(n),!n.match(/^\d+?$/)){alert(e.invalidGroupCode);return}r.reduce(we(t,e.joiningGroup)),await ie.lnsClient.getUserGroupInfoByCode(n).then(async o=&gt;{let i=(0,iC.sprintf)(e.confirmGroupJoin,o.name);confirm(i)?(Ee(n!=null),await ie.lnsClient.joinUserGroup(o.id,n),r.reduce(Jt({type:"normal",text:(0,iC.sprintf)(e.didJoinGroup,o.name)}),we(t,null)),jk(r)):r.reduce(we(t,null))}).catch(Je.handleError).catch(o=&gt;{fe.log(o);let{message:i,unknownError:s}=ot(o,{400:a=&gt;{var u;let l=a.asJson();return(u=l==null?void 0:l.error)!=null&amp;&amp;u.includes("already")?e.alreadyJoinedGroup:e.invalidRequest},403:a=&gt;{let l=a.asJson();return(l==null?void 0:l.error_code)===0?e.ipAddressRestricted:(l==null?void 0:l.error_code)===5?e.insufficientPermissionToJoin:(l==null?void 0:l.error_code)===8?e.classHasEnded:(l==null?void 0:l.error_code)===9?e.onlyStudentsAllowedToJoin:(l==null?void 0:l.error_code)===10?e.graduatesNotAllowedToJoinClass:e.ipAddressRestricted},404:e.groupNoLongerExists});r.reduce(we(t,null),me(t,{title:e.couldntJoinGroup,message:i,unknownError:s,onOk:()=&gt;r.reduce(me(t,void 0)),okMessage:e.back}))})}}function hP(r,e){return r.subject_name.localeCompare(e.subject_name)}function _Me(r,e){return e.some(t=&gt;t.name===r)}function FMe(r,e){return e.some(t=&gt;t.subject_name===r)}var Ble=({store:r,onClose:e})=&gt;{let t=pe(),[n,o]=$r({editing:!1}),{editing:i,selectedUserGroup:s,deletingUserGroupId:a}=n,l=Object.values(r.userGroups.byId).sort((y,S)=&gt;y.name.localeCompare(S.name)),u=[],d=r.fetchStates[nt.prepareForAddCourse()];jn(()=&gt;{Ile(r)}),(0,Tv.useEffect)(()=&gt;{i||d!=="done"||l.map(y=&gt;{dB(r,y.id)})},[r.userGroups.byId,d]),(0,Tv.useEffect)(()=&gt;{var S;let y=(S=r.userGroups.recentlyCreated)==null?void 0:S.id;y!==void 0&amp;&amp;(o({selectedUserGroup:r.userGroups.byId[y]}),r.reduce(()=&gt;({userGroups:{recentlyCreated:{$set:void 0}}})))},[r.userGroups.byId,r.userGroups.recentlyCreated]),(0,Tv.useEffect)(()=&gt;{l.length===0&amp;&amp;o({editing:!1})},[r.userGroups.byId]);let c=(y,S)=&gt;()=&gt;{s&amp;&amp;s.id===y?o({selectedUserGroup:void 0}):o({selectedUserGroup:{id:y,name:S}})},p=()=&gt;{o({editing:!i,selectedUserGroup:void 0,deletingUserGroupId:void 0})},h=()=&gt;{let y=ba(t.enterNewGroupName,{maxLength:255,defaultValue:t.userGroupNamePlaceholder});if(y!==null){if(_Me(y,l))return alert(t.duplicatedUserGroup);Ele(r,y)}},f=()=&gt;{e(),r.reduce(ei(nt.prepareForAddCourse(),null))},m=y=&gt;{if(!!i)return{deleting:a===y.id,onDeleting:S=&gt;o({deletingUserGroupId:S?y.id:void 0}),onDelete:()=&gt;{confirm((0,gG.sprintf)(t.confirmDeleteTarget,y.name))&amp;&amp;_le(r,y)}}},g=(y,S)=&gt;{if(y.userGroups.attendancesById[S.id].length===0){let T=71;y.reduce(Co(T,{title:t.noMembersInGroup,message:t.showCodeToInviteStudents,okMessage:t.groupCode,cancelMessage:t.close,onOk:()=&gt;{C(S),y.reduce(Co(T,void 0))},onCancel:()=&gt;{y.reduce(Co(T,void 0))},color:"info"}))}},v=async y=&gt;{await Fle(r,y.subject_name,y.userGroup),g(r,y.userGroup)},b=async y=&gt;{await Mle(r,y.subject),g(r,y.userGroup)},C=y=&gt;{uB(r,y)},x;if(s&amp;&amp;d==="done"){let y=Object.values(r.courses.byId).filter(w=&gt;w.user_group_id===s.id).sort(hP);for(let w of y)u.push({course_id:w.course_id,subject_name:w.subject_name,subject_id:w.subject_id,user_group_id:s.id,user_group_name:s.name});let S=[],T=r.courses.joinedCourseIds.map(w=&gt;r.courses.byId[w]).filter(w=&gt;w.user_group_id===s.id);for(let w of T)S.push({course_id:w.course_id,subject_id:w.subject_id,subject_name:w.subject_name,user_group_id:s.id,user_group_name:s.name});x=pr.default.createElement(MMe,{userGroup:s,userGroupCourses:u,joinedUserGroupCourses:S,onAddCourse:v,onJoinSubject:b})}return pr.default.createElement(rr,{round:!r.screen.isMobile},pr.default.createElement(Et,null,pr.default.createElement(Ft,null,pr.default.createElement(Mt,null,pr.default.createElement(gt,{onClick:f},t.close)),pr.default.createElement(Vt,null,t.addCourseLabel),pr.default.createElement(jt,null,pr.default.createElement(gt,{onClick:p},i?t.complete:t.delete))),d==="fetching"&amp;&amp;pr.default.createElement(_t,{absolute:"bottom"})),pr.default.createElement(ur,null,d instanceof Error&amp;&amp;pr.default.createElement("div",{className:"addCourseModalDesc"},t.groupFetchErrorOccurred),d==="done"&amp;&amp;pr.default.createElement(pr.default.Fragment,null,pr.default.createElement(BMe,{editing:i,numOfUserGroups:l.length}),pr.default.createElement(gn,null,l&amp;&amp;l.map(y=&gt;{var S,T;return pr.default.createElement("div",{key:y.id,ref:w=&gt;{(s==null?void 0:s.id)===y.id&amp;&amp;(w==null||w.scrollIntoView({behavior:"smooth"}))}},pr.default.createElement(xr,{expandable:i?void 0:{expanded:!!s&amp;&amp;s.id===y.id},onClick:c(y.id,y.name),deleteOpts:m(y)},pr.default.createElement(mn,null,pr.default.createElement(nr,{disablePopover:!0},y.name)),pr.default.createElement(Ur,null,pr.default.createElement("p",{className:"addCourseGroupMembers"},(T=(S=r.userGroups.attendancesById[y.id])==null?void 0:S.length)!=null?T:"-",t.members)),pr.default.createElement(Ur,null,pr.default.createElement(gt,{disabled:n.editing,onClick:w=&gt;{C(y),w.stopPropagation()}},t.groupCode))),s&amp;&amp;s.id===y.id&amp;&amp;x)})))),pr.default.createElement(Gp,null,pr.default.createElement(Gt,{className:"addCourseAddUserGroupButton",onClick:h,disabled:n.editing||d!=="done"},t.createNewGroupBtnLabel)))},MMe=({userGroup:r,onAddCourse:e,onJoinSubject:t,userGroupCourses:n,joinedUserGroupCourses:o})=&gt;{let i=pe(),s=a=&gt;{if(FMe(a,n))return alert(i.duplicatedSubjectError);e({subject_name:a,userGroup:r})};return pr.default.createElement("div",{className:"addCourseSelectSubjectView"},pr.default.createElement("div",{className:"addCourseSelectSectionTitle"},i.createNewSubjectBtnLabel),pr.default.createElement(NMe,{onSubmit:s}),pr.default.createElement("div",{className:"addCourseSelectSectionTitle"},i.createdSubjectsListTitle),pr.default.createElement("div",null,n.length===0&amp;&amp;pr.default.createElement("div",{className:"addCourseSelectSubjectNoCourse"},i.thisGroupHasNoSubjects),n.map(a=&gt;{let l=()=&gt;{let d={id:a.subject_id,name:a.subject_name};t({subject:d,userGroup:r})},u=o.findIndex(d=&gt;d.course_id===a.course_id)&gt;-1;return pr.default.createElement(xr,{key:a.course_id,border:{left:!0,right:!0}},pr.default.createElement(mn,null,pr.default.createElement(nr,{disablePopover:!0},a.subject_name)),pr.default.createElement(Ur,null,u?pr.default.createElement("span",{className:"addCourseJoinCourseMark"},i.courseJoinedMark):pr.default.createElement("div",{className:"addCourseJoinCourseButton",role:"button",onClick:l},i.addCourseDialogJoinCourseBtnLabel)))})))},NMe=({onSubmit:r})=&gt;{let[e,t]=(0,Tv.useState)(""),n=(0,Tv.useRef)(null),o=pe(),i=()=&gt;{setTimeout(()=&gt;{window.confirm((0,gG.sprintf)(o.confirmCreateSubject,e))&amp;&amp;(r(e),t(""),n.current.value="")},0)};return pr.default.createElement("div",{className:"addCourseCreateSubject"},pr.default.createElement("input",{ref:n,onChange:a=&gt;{t(a.target.value)},type:"text",placeholder:o.subjectNameInputPlaceholder}),pr.default.createElement("button",{className:"addCourseCreateSubjectButton",disabled:e.length===0,role:"button",onClick:i},o.create))},BMe=({editing:r,numOfUserGroups:e})=&gt;{let t=pe();return pr.default.createElement("div",{className:"addCourseModalDesc"},r?t.chooseGroupToDelete:pr.default.createElement(pr.default.Fragment,null,e&gt;0?pr.default.createElement(pr.default.Fragment,null,pr.default.createElement("p",null,t.chooseGroupToAddTo),pr.default.createElement("p",{className:"guideText"},t.groupDesc)):pr.default.createElement(pr.default.Fragment,null,pr.default.createElement("p",null,t.noGroups),pr.default.createElement("p",{className:"guideText"},t.groupDesc),pr.default.createElement("p",{className:"guideText bold"},t.createNewGroupDesc))))};var Xe=oe(ve());var mue=oe(Wr());var sC=(r,e)=&gt;{let t=new Date(r.timestamp);return Ks(t,e)};var Dv=oe(ve());var fP=({children:r,className:e,disable:t,onLoadMore:n})=&gt;{let o=(0,Dv.useRef)(Do()),i=(0,Dv.useRef)(null);(0,Dv.useEffect)(()=&gt;()=&gt;{o.current(()=&gt;{},0)},[]),(0,Dv.useEffect)(()=&gt;{if(t){o.current(()=&gt;{},0);return}let l=i.current;!l||l.clientHeight&gt;=l.scrollHeight&amp;&amp;o.current(()=&gt;{n()},500)},[t]);let s=()=&gt;{let l=i.current;if(!!l)return l.scrollTop+l.offsetHeight};return Dv.default.createElement("div",{ref:i,className:e,onScroll:t?void 0:()=&gt;{o.current(()=&gt;{let l=s();!i.current||!l||Math.abs(l-i.current.scrollHeight)&lt;=2&amp;&amp;n()},500)}},r)};var ko=oe(ve());var hw=oe(ve()),fw=({className:r="",children:e,...t})=&gt;hw.default.createElement("div",{className:`uiInputGroup ${r}`,...t},e),cB=({children:r})=&gt;hw.default.createElement("div",{className:"uiInputTitle"},r),mw=({className:r="",children:e,...t})=&gt;hw.default.createElement("input",{className:`uiInputText ${r}`,...t}),Rle=({className:r="",children:e,...t})=&gt;hw.default.createElement("div",{className:"uiInputSubmitWrapper"},hw.default.createElement("input",{className:`uiInputSubmit ${r}`,type:"submit",...t}));var Qe=oe(ve());var qs=oe(ve()),mP=oe(ve());var ya=oe(ve()),kv=oe(ve());function pB(r,e){let t=Promise.all([ie.lnsClient.getCourseTeacherStatues(e),ie.lnsClient.getCourseUserStatues(e)]);Ln(r,{fetchingId:nt.courseUserStatus(e),promise:t,doneReducer:n=&gt;{let o=xb(n);return t_(e,o)}})}function Lle(r,e){Ln(r,{fetchingId:nt.courseAttributes(e),promise:ie.lnsClient.getCourse(e),beforeReducers:[Q0("fetching")],doneReducer:t=&gt;[KE(e,t),Q0("done")],errorReducer:t=&gt;Q0(iu(t))})}function Ole(r,{courseId:e,before:t,locked:n}){let o=he.get().strings,i=19,s=n?o.lockingScreens:o.unlockingScreens;r.reduce(dg(e,n),we(i,s)),(n?ie.lnsClient.lockScreen(e):ie.lnsClient.unlockScreen(e)).then(()=&gt;{r.reduce(we(i,null),dg(e,n))}).catch(Je.handleError).catch(l=&gt;{fe.error(l),r.reduce(dg(e,t),we(i,null),me(i,{title:o.couldntChangeScreenLock,...ot(l),okMessage:o.back,onOk:()=&gt;r.reduce(me(i,void 0))}))})}function Ule(r,e,t,n){let o=he.get().strings,i=20,s=n?o.unlockingStudentSharing:o.lockingStudentSharing;r.reduce(M1(e,n),we(i,s)),ie.lnsClient.enableTunnel(e,n).then(()=&gt;{r.reduce(we(i,null))}).catch(Je.handleError).catch(a=&gt;{fe.error(a),r.reduce(M1(e,t),we(i,null),me(i,{title:o.couldntChangeStudentSharingLock,...ot(a),okMessage:o.back,onOk:()=&gt;r.reduce(me(i,void 0))}))})}var zle=()=&gt;{let r=Me(),[e,t]=(0,kv.useState)([]),[n,o]=(0,kv.useState)(!0),[i,s]=(0,kv.useState)([]),a=Gr(Xt(r)),l=r.fetchStates[nt.courseUserStatus(a)],u=l instanceof Error,c=l==="fetching"&amp;&amp;n,p=e.length,h=e.filter(v=&gt;v.status==="good").length,f=()=&gt;{o(!0)};(0,kv.useEffect)(()=&gt;{let v=()=&gt;{pB(r,a),Ua(r,a)},b;return n?v():b=window.setInterval(v,10*1e3),()=&gt;{b&amp;&amp;clearTimeout(b)}},[n]);let m=r.courseAttributes.byId[a];(0,kv.useEffect)(()=&gt;{let v=r.userStatuses.byCourseId[a];if(!v)return;let b=v.map(w=&gt;r.userStatuses.byKey[w]).filter(w=&gt;w.id!==r.userInfo.user_id).map(w=&gt;[w.id,w]),C=new Map(b),x=[],y=[];for(let[w]of C){let k=r.users.byId[w];k?y.push(k):x.push(w)}let T=cq(y).map(w=&gt;{let k=C.get(w.id);return Ee(k!=null,"status must exist in statusMap"),{...k,displayName:zt(w)}});t([...T]),o(!1),s(x)},[r.userStatuses,r.users]),(0,kv.useEffect)(()=&gt;{i.map(v=&gt;{lp(r,v)})},[i.join(",")]);let g=pe();return ya.default.createElement("div",{className:"userStatusList"},ya.default.createElement(rr,{round:!0},ya.default.createElement(Et,{inPopover:!0},ya.default.createElement(Ft,null,ya.default.createElement(Mt,null,ya.default.createElement("div",{className:"userStatusListHeaderTitle"},(e==null?void 0:e.length)&gt;0&amp;&amp;`${h} / ${p}`)),ya.default.createElement(Vt,null,ya.default.createElement(gt,{disabled:!m||nt.userGroupAttendances(m==null?void 0:m.user_group_id)==="fetching",onClick:()=&gt;{Ee(m!=null),uB(r,{id:m.user_group_id,name:m.user_group_name})}},g.groupCode)),ya.default.createElement(jt,null,ya.default.createElement(gt,{onClick:f},g.update))),c&amp;&amp;ya.default.createElement(_t,{absolute:"bottom"})),ya.default.createElement(ur,null,u&amp;&amp;g.statusFetchErrorOccurred,e.length&gt;0&amp;&amp;!u&amp;&amp;e.map(v=&gt;ya.default.createElement(RMe,{key:v.id,status:v})))))},RMe=({status:r})=&gt;{var o,i;let e=pe(),t="",n="";if(r.status==="logged_out"||r.status==="is_client_background")t=e.notAttending,n="userStatusRed";else if(r.status==="no_course")t=e.choosingCourse,n="userStatusYellow";else if(r.status==="invalid_course")t=e.attendingOtherCourse,n="userStatusRed";else if(r.status==="good"){let s=(i=(o=r.browsing_web_page)==null?void 0:o.trim())!=null?i:"";r.is_web_browsing&amp;&amp;s.length&gt;0?t=e.browsingWeb+s:t=e.attending,n="userStatusWhite"}return ya.default.createElement("div",{className:"userStatusListCell "+n},ya.default.createElement("div",{className:"ellipsisText"},r.displayName),ya.default.createElement("div",{className:"ellipsisText"},t))};var Hle=()=&gt;{let r=Me(),e=Xt(r),t=pe();if((0,mP.useEffect)(()=&gt;{r.teacherToolOpen&amp;&amp;typeof e!="number"&amp;&amp;r.reduce(lg(!1))},[e,r.teacherToolOpen]),!r.userInfo.is_teacher||typeof e!="number")return null;let n=r.screenLockStates[e],o=r.tunnelStates[e],i=()=&gt;{r.reduce(lg(!r.teacherToolOpen))},s=()=&gt;{Ule(r,e,o,!o)},a=()=&gt;{Ole(r,{courseId:e,before:n,locked:!n})},l=()=&gt;{r.reduce(rU(!r.userStatusListOpen))};return qs.default.createElement(Mn,{timeout:250,classNames:"teacherTool",in:r.teacherToolOpen,unmountOnExit:!1},qs.default.createElement("div",{className:"teacherTool","data-visible":r.teacherToolVisible},qs.default.createElement("div",{className:"teacherToolContainer"},qs.default.createElement("div",{className:"teacherToolHandleWrapper"},qs.default.createElement("div",{className:"teacherToolBorder"}),qs.default.createElement(Gt,{className:"teacherToolHandle",onClick:i}),qs.default.createElement("div",{className:"teacherToolBorder"})),qs.default.createElement("div",{className:"teacherToolInner"},qs.default.createElement(vG,{classes:"teacherToolTunnelButton firstTeacherToolButton",title:t.studentSharing,locked:!o,onClick:s}),qs.default.createElement(vG,{classes:"teacherToolLockScreenButton",locked:n,title:t.screenLock,onClick:a}),qs.default.createElement("div",{className:"relative"},qs.default.createElement(vG,{classes:"teacherToolAttendancesButton",title:t.checkAttendance,locked:!1,onClick:l}),qs.default.createElement(xt,{open:r.userStatusListOpen,container:"none",arrowColor:"#efeef3",onClose:()=&gt;r.reduce(rU(!1)),anchor:"middleLeft"},qs.default.createElement(zle,null)))))))},vG=({title:r,locked:e,onClick:t,classes:n})=&gt;qs.default.createElement("div",{className:"teacherToolButtonWrapper"},qs.default.createElement(Gt,{"data-locked":e,onClick:t,className:"teacherToolButton "+n}),qs.default.createElement("div",{className:"teacherToolButtonDesc"},r));function gs(r){let{store:e,initialState:t,closedState:n=t,onPopoverOpened:o}=r,[i,s]=(0,mP.useState)(t);return(0,mP.useEffect)(()=&gt;{let l=i&amp;&amp;e.teacherToolOpen?n:i;s(l)},[e.teacherToolOpen]),[i,l=&gt;{l&amp;&amp;(e.teacherToolOpen&amp;&amp;e.reduce(lg(!1)),o==null||o()),s(l)}]}var SP=oe(Wr());var Ai=oe(ve()),Kf=oe(ve());var hB=class{constructor(e){this.res=e;this.chunks=[];this.workerFetcher=Wb(async()=&gt;{let t=await Ot.zlibWorkerScript.fetch();if(t.type!=="success")throw new Error("Failed to fetch worker script");return new Worker(t.value,{name:"zlib.worker"})})}async deflate(e){let t=await this.workerFetcher.fetch();if(!t)throw new Error("unsupported");return new Promise((n,o)=&gt;{t.onmessage=i=&gt;n(i.data),t.onerror=()=&gt;o(new Error("Failed to deflate")),t.postMessage(e,[e.buffer])})}inflate(e){throw new Error("unsupported")}write(e){this.chunks.push(e)}loadDrawnData(e,t){let n=Xn.get(t,e).packContents();return Promise.resolve(n)}loadBitmapGlyph(e){let t=fr.create(100,100),n=t.getContext2dForce();return n.beginPath(),n.font="50px Arial",n.textAlign="start",n.textBaseline="alphabetic",n.fillText(e,50,50),this.createThumbData(t)}async loadDrawnThumb(e,t,n){let o=mr.get(e)[t],i=o.get("high");if(i||(await o.load("high",e),i=o.getUnderLevel("high")),!!i)return this.createThumbData(i,n)}async loadThumb(e,t){let n=mr.get(e),o=mo.getMaxLevelForCard(e),i=n.content.get(o);if(i||(await n.content.load(o,e),i=n.content.getUnderLevel(o)),!!i)return this.createThumbData(i,t)}async loadPdfThumb(e,t){let n=this.res.assetUrl(e.contentAssetId());if(!n)return;let o=await dF({urlOrData:n,pageIndexList:[e.content.page_index],pageSize:t,background:e.isThinkingTool?is.toCSSRGBA():void 0});return this.createThumbData(o[0])}async generateLackingGlyphTexture(e,t,n){let i=Nt(t,3.3333333333333335),s=fr.create(i),a=s.getContext2dForce();return Sk(a,e,l=&gt;{l.save(),l.beginPath(),l.translate(-e.size.width/2,-e.size.height/2),n.draw(l,{onlyLackingGlyphs:!0}),l.restore()}),this.createThumbData(s)}toBlob(){let e=this.chunks.reduce((o,i)=&gt;o+i.byteLength,0),t=new Uint8Array(e),n=0;for(let o of this.chunks)t.set(o,n),n+=o.byteLength;return new Blob([t],{type:"application/pdf"})}close(){var e;(e=this.workerFetcher.get())==null||e.terminate()}async createThumbData(e,t){let n=!1,o=1,i=$e(e);t&amp;&amp;(e.width&gt;=t.width||e.height&gt;=t.height)&amp;&amp;(o=Xr(t,e),i=t);let{width:s,height:a}=i,u=fr.create(s,a).getContext2dForce();u.scale(o,o),u.drawImage(e,0,0);let d=u.getImageData(0,0,s,a),c=s*a,p=new Uint8Array(c*3),h=new Uint8Array(c);for(let g=0;g&lt;c;g=g+1|0){let v=d.data[g*4],b=d.data[g*4+1],C=d.data[g*4+2],x=d.data[g*4+3];p[g*3]=v,p[g*3+1]=b,p[g*3+2]=C,h[g]=x,!n&amp;&amp;x&lt;255&amp;&amp;(n=!0)}let m={image:await this.deflate(p),width:s,height:a,name:Sr()};return n&amp;&amp;(m.alphaChannel=await this.deflate(h)),m}};var Pv=class{constructor(e){this.ctx=e.ctx,this.regularFont=e.regularFont,this.boldFont=e.boldFont}prepare(){let{regularFont:e,boldFont:t}=this,n=new hB(this.ctx.res),o=new _M({dest:n}),i=new RM({doc:o,adapter:n,regularFont:e,boldFont:t});return{adapter:n,doc:o,renderer:i}}async exportCardAsPdf(e){let{adapter:t,doc:n,renderer:o}=this.prepare();await o.renderCard(e),n.end();try{return t.toBlob()}finally{t.close()}}async exportDocumentsAsPdf({documents:e,selfAuthor:t,needsFooter:n,onProgress:o}){let{adapter:i,doc:s,renderer:a}=this.prepare(),{lnsClient:l}=this.ctx;async function*u(){for(let{id:d,authorName:c}of e)yield await l.downloadDocument(d).then(Is).then(h=&gt;Es({id:d,file:h,author:t})).then(async h=&gt;{for(let f of h.memberAndChildrenIteratorOverGroup()){let m=mr.get(f),g=mo.getMaxLevelForCard(f);await Promise.all([m.content.load(g,f),m.drawn.load("high",f),m.annotation.load("high",f)])}return{card:h,authorName:c}})}try{return await a.renderCardsAsync({cards:u(),needsFooter:n,onProgress:o}),s.end(),i.toBlob()}finally{i.close()}}};var Xs=oe(ve());var vo=oe(ve()),aC=oe(ve());var Td=oe(ve());var gP=oe(ve());var Gle=oe(ve()),Oc=oe(ve());var fB=({src:r,actualSrc:e,fallbackSrc:t,debug:n,maxRetryCount:o,skipForKnown404Url:i=!1,children:s,onLoadStart:a,onLoadEnd:l,onDragStart:u,...d})=&gt;{var y;let{ref:c,inView:p}=bY(),[h,f]=(0,Oc.useState)(),[m,g]=(0,Oc.useState)(!1),v=Su.get(r),b=(0,Oc.useRef)(new AbortController);(0,Oc.useEffect)(()=&gt;(b.current=new AbortController,()=&gt;b.current.abort()),[r]),(0,Oc.useEffect)(()=&gt;{!m&amp;&amp;p&amp;&amp;g(!0)},[p]),(0,Oc.useEffect)(()=&gt;{let S=v.cachedUrl();if(S){a==null||a(),f(S),l==null||l(!0);return}if(!m)return;let{signal:T}=b.current,w=e!=null?e:r;a==null||a(),v.toUrl({url:w,maxRetryCount:o,skipForKnown404Url:i,signal:T}).then(k=&gt;{T.aborted||(l==null||l(k!=null),f(k!=null?k:t))}).catch(()=&gt;{T.aborted||(l==null||l(!1),f(t))})},[r,e,v,m]);let C=(0,Oc.useMemo)(()=&gt;{let S={};return n&amp;&amp;(S["data-original-src"]=r,S["data-actual-src"]=e),S},[n,r,e]),x=(y=h!=null?h:t)!=null?y:Hte;return Gle.default.createElement("img",{src:x,ref:c,...C,alt:"image",...d})};var Wle=["small","medium","high"],$le=({className:r,srcs:e,actualSrcs:t,invalidationToken:n,style:o={},debug:i,showLoadingBar:s,fallbackSrc:a,skipForKnown404Url:l,onLoadLevel:u,onLoadStart:d,onDragStart:c,thumbDraggable:p})=&gt;{let[h,f]=$r({index:0,src:void 0,loaded:!1}),{index:m,loaded:g,src:v,actualSrc:b}=h,C=Wle[Math.min(m,Wle.length-1)],x=T=&gt;{u==null||u(C,T);let w=Math.min(m+1,e.length-1);f({loaded:!0,index:w,src:e[w],actualSrc:t==null?void 0:t[w]})};Al(()=&gt;{f({index:0,src:e[0],actualSrc:t==null?void 0:t[0],loaded:!1})},[e.join(","),t==null?void 0:t.join(","),n]);let y=v!=null?v:e[0],S=b!=null?b:t==null?void 0:t[0];return gP.default.createElement(gP.default.Fragment,null,s&amp;&amp;!g&amp;&amp;gP.default.createElement(_t,null),gP.default.createElement(fB,{className:`mipmapImage ${r!=null?r:""}`,skipForKnown404Url:l,fallbackSrc:a,src:y,actualSrc:S,debug:i,style:o,draggable:p,onLoadStart:()=&gt;d==null?void 0:d(C),onLoadEnd:x,onDragStart:c,"data-loaded":g}))};var Wl=({documentClassName:r="documentThumbnailImage",annotationClassName:e="documentThumbnailImage",id:t,index:n,thumbnails:o,comment_snapshot_id:i,onDragStart:s,skipForKnown404Url:a,fallbackSrc:l,updatable:u,onLoadChanged:d})=&gt;{let[c,p]=$r({loadingDocThumb:!1,loadingAnnoThumb:!1});return(0,Td.useEffect)(()=&gt;{d==null||d(c.loadingDocThumb||c.loadingAnnoThumb)},[c.loadingDocThumb,c.loadingAnnoThumb]),Td.default.createElement("div",{className:"documentThumbnail",draggable:s!=null,onDragStart:s},(c.loadingDocThumb||c.loadingAnnoThumb)&amp;&amp;Td.default.createElement(_t,{absolute:"top"}),Td.default.createElement(Vle,{className:r,type:"document",docId:t,index:n,snapshotId:i,fallbackSrc:l,updatable:u,preSignedUrls:o,skipForKnown404Url:a,onLoadChange:h=&gt;p({loadingDocThumb:h})}),Td.default.createElement("div",{className:"annotation"},Td.default.createElement(Vle,{className:e,type:"annotation",docId:t,index:n,snapshotId:i,updatable:u,preSignedUrls:o,skipForKnown404Url:a,onLoadChange:h=&gt;p({loadingAnnoThumb:h})})))},Vle=({className:r,type:e,docId:t,index:n,snapshotId:o,preSignedUrls:i,updatable:s,fallbackSrc:a,skipForKnown404Url:l,onLoadChange:u})=&gt;{var y;let d=Me(),[{invalidationToken:c},p]=$r({}),h=()=&gt;["small","medium"].map(T=&gt;ie.res.docOrAnnoThumbUrl({type:e,docId:t,index:n,size:T,snapshotId:o})),f,m=i==null?void 0:i[e];m&amp;&amp;(f=LMe(m));let g=(0,Td.useMemo)(()=&gt;{let S=h(),T=i==null?void 0:i[e];if(c==null&amp;&amp;T&amp;&amp;n===0){if(!T.small||!T.medium)return;let w=T.small.url,k=T.medium.url;return{srcs:S,actualSrcs:[w,k]}}return{srcs:S}},[t,n,o,f,c]),v=H0(t,n),b=d.thumbUpdateNotifications[e][v],C=(y=d.thumbKnownGenerations[e][v])!=null?y:-1;if((0,Td.useEffect)(()=&gt;{if(!b||!s||b.generation&lt;=C)return;for(let T of h())Su.get(T).invalidate();p({invalidationToken:Date.now()});let S=H0(b.document,b.index);d.reduce(()=&gt;({thumbKnownGenerations:{[e]:{[S]:{$set:b.generation}}}}))},[b,s,C]),!g)return null;let x=S=&gt;T=&gt;{T==="small"&amp;&amp;u(S)};return Td.default.createElement($le,{className:r,srcs:g.srcs,actualSrcs:g.actualSrcs,fallbackSrc:a,onLoadStart:x(!0),onLoadLevel:x(!1),invalidationToken:c,debug:d.logEnabled,skipForKnown404Url:l,style:{pointerEvents:"none"}})},LMe=r=&gt;{var n,o;let e=(n=r.small)==null?void 0:n.url,t=(o=r.medium)==null?void 0:o.url;if(e&amp;&amp;t){let i=new URL(e).pathname,s=new URL(t).pathname;return i+s}};var jle=()=&gt;{var p,h;let r=Me(),{state:e,dispatch:t,sortedAnswers:n,answersRevealed:o,submission:i,courseId:s}=(0,aC.useContext)(Wa),{answersVisible:a}=r.submissionListDisplaySetting,l=(0,aC.useRef)(null);(0,aC.useEffect)(()=&gt;{r.userInfo.is_teacher||gN({store:r,courseId:s,submissionNumber:i.submission_number})},[r.mobilePushes,i.submission_number]);let u=f=&gt;()=&gt;{var m;if(e.mode==="comparison"||e.mode==="selection"){let g=e.selectedAnswers.indexOf(f);if(g&gt;-1){let v=[...e.selectedAnswers];v.splice(g,1),t({selectedAnswers:v})}else t({selectedAnswers:[...e.selectedAnswers,f]})}else{let g=r.submissionAnswers.byId[f];if(!g||!vP(r,!1))return;let v=n.map(C=&gt;C.submissionAnswer).filter(C=&gt;!!C).map(C=&gt;C.author_key),b=(m=r.submissionAnswerPageIndexStates[f])!=null?m:0;r.reduce(Gi({authorKey:g.author_key,generation:g.generation,id:f,pageIndex:b,orderedAuthors:v}))}},d=((h=(p=l.current)==null?void 0:p.clientWidth)!=null?h:0)/e.listColumnSize,c={gridTemplateColumns:`repeat(${e.listColumnSize}, ${d}px)`,gridAutoRows:`${d*.75}px`};return vo.default.createElement(ur,null,vo.default.createElement("div",{className:"submissionListBody relative",style:c,ref:l},n.map((f,m)=&gt;{var v,b,C,x,y,S,T;if(!f.submissionAnswer)return vo.default.createElement(OMe,{key:`unSubmitted-${m}`,authorName:f.user?zt(f.user):void 0,isMine:((v=f.user)==null?void 0:v.id)===r.userInfo.user_id,isTeacher:r.userInfo.is_teacher,authorIsTeacher:(C=(b=f.user)==null?void 0:b.is_teacher)!=null?C:!1,attended:f.attendantStatus==="good",visible:a,reveal:o});let g=(x=r.submissionAnswerPageIndexStates[f.submissionAnswer.id])!=null?x:0;return vo.default.createElement(UMe,{key:`answer-${m}`,pageIndex:g,visible:a,onClick:u(f.submissionAnswer.id),authorName:f.user?zt(f.user):void 0,expiry:(y=i.expiry)!=null?y:void 0,selected:e.selectedAnswers.indexOf(f.submissionAnswer.id)&gt;-1,data:f.submissionAnswer,unreadDataList:(T=(S=r.mobilePushes.byCourseId[s])==null?void 0:S.map(w=&gt;r.mobilePushes.byId[w]))!=null?T:[]})})))},OMe=({authorName:r,isMine:e,isTeacher:t,authorIsTeacher:n,attended:o,visible:i,reveal:s})=&gt;{let a=()=&gt;{let l="#dcdddd",u="#aaaaaa",d="#76ceff",c="#0b8ef9";return e?i?u:c:o?t&amp;&amp;!i?c:!t&amp;&amp;!s?d:u:l};return vo.default.createElement("div",{className:"submissionListCell",role:"button","data-owner-type":Kle({authorName:r,isMine:e,authorIsTeacher:n}),"data-disabled":!0},vo.default.createElement("div",{className:"submissionListCellContent"},vo.default.createElement("div",{className:"submissionListCellNotAnswered",style:{backgroundColor:a()}})),vo.default.createElement("div",{className:"submissionListCellHeader","data-invisible":r===void 0},vo.default.createElement(nr,{className:"submissionListCellUserName"},r)))},UMe=({authorName:r,visible:e,selected:t,pageIndex:n,onClick:o,data:i,disabled:s,expiry:a,unreadDataList:l})=&gt;{var m;let{courseId:u,submissionNumber:d}=(0,aC.useContext)(Wa),{userInfo:c}=Me(),p=(m=i.author_is_teacher)!=null?m:!1,h=i.author_id===c.user_id,f=!!l.find(g=&gt;g.data.type==="submit"&amp;&amp;g.data.course_id===u&amp;&amp;g.data.submission_number===d&amp;&amp;g.data.author_id===i.author_id);return vo.default.createElement("div",{className:"submissionListCell","data-owner-type":Kle({authorName:r,isMine:h,authorIsTeacher:p})},vo.default.createElement("div",{className:"submissionListCellContent",role:"button","data-disabled":s,onClick:o},vo.default.createElement(Wl,{id:i.id,thumbnails:{document:i.document_thumbnail,annotation:i.annotation_thumbnail},index:n,updatable:!0,skipForKnown404Url:!1}),vo.default.createElement(Ba,{in:!e},vo.default.createElement("div",{className:"submissionListCellHiddenContent","data-blue":!0,"data-image":!0}))),vo.default.createElement("div",{className:"submissionListCellFooter"},vo.default.createElement(bG,{answerTimestamp:i.timestamp,expiry:a,className:"submissionListCellSubmittedDate"}),i.page_count&gt;1&amp;&amp;vo.default.createElement("div",{className:"submissionListCellFooterPageIndex"},`${n+1}/${i.page_count}`)),t&amp;&amp;vo.default.createElement("div",{className:"submissionListCellSelectedMark"},vo.default.createElement(lr,{src:"/img/Check@2x.png"})),vo.default.createElement("div",{className:"submissionListCellHeader","data-invisible":r===void 0},vo.default.createElement("div",{className:"submissionListCellReplyBase"}),vo.default.createElement(nr,{className:"submissionListCellUserName",disablePopover:!r},r),vo.default.createElement(zMe,{replyStatus:i.reply_status,isMine:h,isTeacher:c.is_teacher,isUpdated:f})))},zMe=({replyStatus:r,isMine:e,isTeacher:t,isUpdated:n})=&gt;{let{done:o,annotation_layer_updated:i,extension_layer_updated:s}=r,l=(()=&gt;{if(t){if(e)return;if(n)return"dot";if(o&amp;&amp;!i&amp;&amp;!s)return"check";if(i)return"pencil"}else{if(!e)return;if(o&amp;&amp;!i&amp;&amp;!s||i)return"dot"}})();return vo.default.createElement("div",{className:"submissionListCellReplyBase"},l==="dot"&amp;&amp;vo.default.createElement("div",{className:"redDotIcon"},vo.default.createElement("div",{className:"redDotIconInner"})),l==="pencil"&amp;&amp;vo.default.createElement("div",{className:"submissionListCellIconBase redPencilIcon"}),l==="check"&amp;&amp;vo.default.createElement("div",{className:"submissionListCellIconBase redCheckIcon"}))},bG=({answerTimestamp:r,expiry:e,className:t="",submittedLateColor:n=Ca.submittedLate})=&gt;{let o=pe(),i=new Date(r),s=new Date().getUTCFullYear()===i.getUTCFullYear()?o.submissionListDateShortFmt:o.submissionListDateFullFmt,a=e&amp;&amp;new Date(e).getTime()-i.getTime()&gt;0?Ca.submitted:n;return vo.default.createElement("div",{className:`${t}`,style:{color:a}},Ks(r,s))};function Kle(r){let{authorName:e,isMine:t,authorIsTeacher:n}=r;return e===void 0?"":t?"self":n?"teacher":void 0}var Ys=oe(ve()),Jle=oe(ve());var ll=oe(ve());var gw=oe(ve());var Au=({store:r,courseId:e,sessionId:t,publisher:n,forStudent:o})=&gt;{let i=r.userInfo.is_teacher,s=pe();if(!i)return null;let a=()=&gt;{var h;Uf({store:r,courseId:e,sessionId:(h=r.screenSharingState)==null?void 0:h.sessionId,showDialog:!0,forStudent:o})},l=()=&gt;{let h=r.screenSharingState;Ee(h!=null);let f=r.screenSharingActionNotification[e];if(f.type!=="fullscreen")return;let{id:m,action:g,assetDependency:v,...b}=f;Pie(r,h.courseId,b)},u=()=&gt;{kie(r,e,t)},d;n===r.userInfo.user_id?r.screenSharingForSelf&amp;&amp;r.screenSharingForPresenter?d=l:d=a:d=u;let c=!o&amp;&amp;n===r.userInfo.user_id,p=o&amp;&amp;n===r.userInfo.user_id?[s.endPresentationLine1,s.endPresentationLine2]:[s.endSharingLine1,s.endSharingLine2];return gw.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem","data-active":c},gw.default.createElement("div",{className:"screenSharingStopButton editorButton editorTextButton","data-active":c,onClick:d},gw.default.createElement(lC,{lines:p})))},lC=({lines:r})=&gt;gw.default.createElement("div",{className:"multiLineButtonText"},r.map((e,t)=&gt;gw.default.createElement("div",{key:t},e)));var yG=oe(ve()),qle=oe(ve());var Yle=({store:r,editorStore:e,editorRendererState:t,card:n,authorId:o,anonymous:i,presenter:s,playManager:a})=&gt;{let[l,u]=gs({store:r,initialState:!1});(0,qle.useEffect)(()=&gt;{e.moveMode&amp;&amp;u(!1)},[e.moveMode]);let d=()=&gt;{r.reduce(ti(),hn(void 0),ho()),r.submissionAnswer&amp;&amp;a.pause(e),r.screenSharingForPresenter||u(!0)},c=()=&gt;{u(!1),a.pause(e);let{startSeconds:m,endSeconds:g}=Xi(n),v=it(e.avSeekTime,m,g);a.beginSeek(e),a.seek(e,v),a.endSeek(e,n),e.hideAnnotation&amp;&amp;(e.setHideAnnotation(!1),r.reduce(ho()));let b=Xt(r);if(typeof b!="number"||!t)return;let C=t();if(!C)return;let x=()=&gt;V6({store:r,state:C,courseId:b,authorId:o,presenter:s,card:n,anonymous:i}),y=()=&gt;{Ee((r==null?void 0:r.screenSharingState)!=null);let S={...r.screenSharingState,presenter:s};Ee(S.fullscreen!=null);let T=Ec({store:r,publisher:S.publisher,presenter:S.presenter,anonymous:S.anonymous,clientId:S.clientId,fullscreen:{...S.fullscreen,...C}});zf({store:r,command:T})};!r.screenSharingForSelf&amp;&amp;!r.screenSharingForPresenter?x():r.screenSharingForSelf&amp;&amp;!r.screenSharingForPresenter&amp;&amp;y()},p=pe(),h=s?[p.requestPresentationLine1,p.requestPresentationLine2]:[p.startSharingLine1,p.startSharingLine2],f=!!s&amp;&amp;o===r.userInfo.user_id||!e.avReady;return yG.default.createElement(mB,{disabled:f,confirmMessage:s?p.confirmStartPresentation:p.confirmStartScreenSharing,onClick:d,onClickStart:c,popoverOpen:l,setPopoverOpen:u},yG.default.createElement(lC,{lines:h}))};var CG=oe(ve());var Xle=({store:r,answerTable:e,onPopoverOpened:t})=&gt;{let[n,o]=gs({store:r,initialState:!1}),i=r.screenSharingState,s=()=&gt;{i||(t(),o(!0))},a=()=&gt;{o(!1);let{submissionNumber:u}=r,d=Xt(r);Ee(typeof d=="number"),Ee(typeof u=="number");let c=pn(d,u),p=r.submissions.byKey[c];Ee(p!=null);let h=e.filter(f=&gt;f===null||ua(f,r.userInfo,p.hide_author));qM({store:r,anonymous:p.hide_author,answerTable:h})},l=pe();return CG.default.createElement(mB,{disabled:!1,onClick:s,onClickStart:a,confirmMessage:l.confirmStartScreenSharing,popoverOpen:n,setPopoverOpen:o},CG.default.createElement(lC,{lines:[l.startSharingLine1,l.startSharingLine2]}))};var mB=({disabled:r,popoverOpen:e,confirmMessage:t,onClick:n,onClickStart:o,setPopoverOpen:i,children:s})=&gt;ll.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},ll.default.createElement("div",{className:"editorButton editorTextButton","data-disabled":r,onClick:n},s),ll.default.createElement(SG,{onStart:o,confirmMessage:t,open:e,onClose:()=&gt;i(!1)})),SG=({onStart:r,open:e,onClose:t,confirmMessage:n})=&gt;{let o=pe();return ll.default.createElement(xt,{open:e,onClose:t},ll.default.createElement("div",{className:"popoverDialog"},ll.default.createElement("div",{className:"popoverDialogInner"},ll.default.createElement("div",{className:"popoverDialogConfirmMessage"},n),ll.default.createElement("div",{className:"popoverDialogButtonGroup"},ll.default.createElement("div",{role:"button",className:"popoverDialogButton popoverDialogCancelButton",onClick:t},o.cancel),ll.default.createElement("div",{role:"button",className:"popoverDialogButton popoverDialogOkButton",onClick:r},o.start)))))},bP=({store:r,editorStore:e,card:t,authorId:n,anonymous:o,presenter:i,editorRendererState:s,playManager:a})=&gt;{var u;if(!r.userInfo.is_teacher||typeof Xt(r)!="number")return null;if(!r.screenSharingState||!((u=r.screenSharingState)!=null&amp;&amp;u.presenter)&amp;&amp;i)return ll.default.createElement(Yle,{store:r,editorStore:e,card:t,authorId:n,anonymous:o,presenter:i,editorRendererState:s,playManager:a});{let{courseId:d,publisher:c,sessionId:p}=r.screenSharingState;return ll.default.createElement(Au,{store:r,courseId:d,sessionId:p,publisher:c,forStudent:!!i})}},Qle=({store:r,answerTable:e,onPopoverOpened:t})=&gt;{if(!r.userInfo.is_teacher)return null;if(r.screenSharingState){let{courseId:o,publisher:i,sessionId:s}=r.screenSharingState;return ll.default.createElement(Au,{store:r,courseId:o,sessionId:s,publisher:i,forStudent:!1})}else return ll.default.createElement(Xle,{store:r,answerTable:e,onPopoverOpened:t})};var Zle=()=&gt;{let r=Me(),e=pe(),{userInfo:t}=r,{state:n,submission:o,courseId:i,submissionNumber:s,dispatch:a,onBack:l,sortedAnswers:u}=(0,Jle.useContext)(Wa),[d,c]=gs({store:r,initialState:!1}),p=()=&gt;{let b=ba(e.enterTaskName,{defaultValue:o.message,maxLength:255});b&amp;&amp;$x(r,{courseId:i,submissionNumber:s,opts:{submission_message:b}})},h=u.map(b=&gt;b.submissionAnswer).filter(b=&gt;!!b),f=()=&gt;{if(!vP(r))return;let b=h.filter(C=&gt;ua(C,r.userInfo,o.hide_author));qM({store:r,anonymous:o.hide_author,answerTable:b}),c(!1)},m=()=&gt;{a({mode:"default",selectedAnswers:[]})},g=o.message;return g||(g=e.describeTask),Ys.default.createElement(Et,null,Ys.default.createElement(Ft,null,Ys.default.createElement(Mt,null,(b=&gt;b!=="default")(n.mode)?Ys.default.createElement(gt,{onClick:m},e.cancel):Ys.default.createElement(lx,{onClick:l})),n.mode==="comparison"&amp;&amp;Ys.default.createElement(Vt,null,e.selectAnswersCompare),n.mode==="selection"&amp;&amp;Ys.default.createElement(Vt,null,e.selectAnswers),n.mode==="default"&amp;&amp;Ys.default.createElement(Vt,null,t.is_teacher?Ys.default.createElement("div",{className:"submissionListTitle",role:"button",onClick:p},Ys.default.createElement(nr,{disablePopover:!0},g),Ys.default.createElement("div",{className:"submissionListTitlePencilIcon"})):Ys.default.createElement(nr,null,o.message)),Ys.default.createElement(jt,null,r.userInfo.is_teacher&amp;&amp;Ys.default.createElement(Ys.default.Fragment,null,n.mode==="default"&amp;&amp;Ys.default.createElement(gt,{className:"submissionListNavHeaderButton",onClick:()=&gt;c(!0),disabled:h.length===0},e.shareScreen),Ys.default.createElement(SG,{onStart:f,onClose:()=&gt;c(!1),open:d,confirmMessage:e.confirmStartScreenSharing})))))};var Wa=Xs.default.createContext({dispatch(){},onBack(){},answers:[],sortedAnswers:[],courseId:0,submissionNumber:0,answersRevealed:!1,submission:{expiry:"",hide_author:!1,message:"",reveal_answer:0,submission_number:0,submit_date:"",submitted:!1,timestamp:"",preparation:!1},state:{mode:"default",selectedAnswers:[],listColumnSize:0}}),eue=({submission:r,onBack:e})=&gt;{var y;let t=Me(),[n,o]=(0,Xs.useState)(!1),i=Gr(Xt(t)),s=Gr(t.submissionNumber),a=pn(i,s),l=t.userPreference.submissonListColumnSize?t.userPreference.submissonListColumnSize:xG(window.screen),[u,d]=$r({mode:"default",selectedAnswers:[],listColumnSize:l}),c=pe(),h=((y=t.submissionAnswers.bySubmissionKey[a])!=null?y:[]).map(S=&gt;t.submissionAnswers.byId[S]).filter(S=&gt;!!S),f=HMe({courseId:i,submission:r,store:t,answers:h});(0,Xs.useEffect)(()=&gt;{n&amp;&amp;(fN(t,{courseId:i,submissionNumber:s,revealAnswer:ig({submission:r,userInfo:t.userInfo})}),o(!1))},[n]),(0,Xs.useEffect)(()=&gt;{if(u.mode==="default"||u.selectedAnswers.length&lt;=0)return;let S=zE({targetIds:[...u.selectedAnswers],currentIds:h.map(T=&gt;T.id),getSubmissionAnswer:T=&gt;t.submissionAnswers.byId[T]});d({selectedAnswers:[...S.filter(T=&gt;!!T)]})},[h.map(S=&gt;S.id).toString()]),(0,Xs.useEffect)(()=&gt;{d({mode:"default",selectedAnswers:[]}),o(!0),pB(t,i)},[s]);let[m,g]=(0,Xs.useState)(!1),v=()=&gt;{d({mode:"default",selectedAnswers:[]})},b=r.hide_author,C=Kh(r);(0,Xs.useEffect)(()=&gt;{var S;if(!t.userInfo.is_teacher)if(C)o(!0);else{let T=(S=t.submissionAnswer)==null?void 0:S.id,w=T?t.submissionAnswers.byId[T]:void 0,k=[pY(i,s)];w!==void 0&amp;&amp;!UE(w,r,t.userInfo)&amp;&amp;(k.push(Gi(void 0)),g(!0)),t.submissionComparisonIds&amp;&amp;(k.push(mp(void 0)),g(!0)),t.reduce(...k),v()}},[C]),(0,Xs.useEffect)(()=&gt;{t.userInfo.is_teacher||(b?t.reduce(hY(i,s)):o(!0))},[b]);let x=ig({submission:r,userInfo:t.userInfo});return Xs.default.createElement(Wa.Provider,{value:{state:u,dispatch:d,sortedAnswers:f,submission:r,answersRevealed:x,onBack:e,answers:h,submissionNumber:s,courseId:i}},Xs.default.createElement("div",{className:"submissionList"},Xs.default.createElement(rr,null,Xs.default.createElement(Zle,null),Xs.default.createElement(tue,null),Xs.default.createElement(jle,null),m&amp;&amp;Xs.default.createElement(Wm,{title:c.answersNotVisibleWarnTitle,message:c.answersNotVisibleWarnMsg,okMessage:c.backToAnswerList,color:"error",onOk:()=&gt;g(!1)}))))};function xG(r){return r.width&lt;=480&amp;&amp;Mh(r)=="portrait"?2:r.width&lt;=1024?5:7}function HMe({courseId:r,submission:e,answers:t,store:n}){let o=n.userInfo.is_teacher,i=e.hide_author,s=kq({store:n,courseId:r,answers:t,hideAuthor:i}),a=Pq({store:n,courseId:r,answers:t,hideAuthor:i}),l=[...s,...a],u=!o&amp;&amp;e.reveal_answer===0&amp;&amp;!i;return pq({cells:l,orderType:n.submissionListDisplaySetting.orderType,hideAuthor:e.hide_author,topSelectedId:u?n.userInfo.user_id:void 0})}var yP=oe(ve()),PG=oe(ve());var rue=oe(Wr());var si=oe(ve()),gB=oe(ve());var vw=({store:r,courseId:e,message:t,onClose:n,onReady:o,onReadyBefore:i})=&gt;{var a;return Al(()=&gt;{var l;r.noteManagerReady&amp;&amp;((l=r.desktop)==null?void 0:l.noteId)&amp;&amp;o()},[r.noteManagerReady,(a=r.desktop)==null?void 0:a.noteId]),si.default.createElement(wG,{store:r,courseId:e,message:t,onClose:n,onSelect:l=&gt;{i==null||i(),l.is_shared&amp;&amp;typeof e=="number"?rw(r,{courseId:e,noteId:l.id,pushState:!0}):iw(r,{courseId:e,noteId:l.id,pushState:!0})}})},wG=({store:r,courseId:e,message:t,onClose:n,onSelect:o})=&gt;{let i=r.fetchStates[nt.notes(e)];(0,gB.useEffect)(()=&gt;{i!=="done"&amp;&amp;dP(r,e)},[]);let s=r.userPreference.noteListSortOrder,a=(0,gB.useMemo)(()=&gt;{var g,v,b,C;let m;return typeof e=="number"?m=(v=(g=r.notes.byCourseId[e])==null?void 0:g.filter(x=&gt;{var y;return x!==((y=r.desktop)==null?void 0:y.noteId)}).map(x=&gt;r.notes.byId[x]))!=null?v:[]:m=(C=(b=r.notes.selfStudyIds)==null?void 0:b.filter(x=&gt;{var y;return x!==((y=r.desktop)==null?void 0:y.noteId)}).map(x=&gt;r.notes.byId[x]))!=null?C:[],Array.from(m).sort(Y2(s))},[r.notes,s.key,s.direction]),l=async m=&gt;{let g=Ey(0).toJSON(),b=await ZN(r,{name:m,courseId:e,note:g,openAfterCreated:!1});b&amp;&amp;o(b)},u=o,d=async m=&gt;{Ee(typeof e=="number");let v=await KN(r,{name:m,courseId:e,openAfterCreated:!1});v&amp;&amp;o(v)},c=m=&gt;o(m),p=pe(),h=au(r,e),f=ls(r,e);return si.default.createElement(rr,{round:!r.screen.isMobile},si.default.createElement(Et,null,si.default.createElement(Ft,null,si.default.createElement(Mt,null,si.default.createElement(gt,{onClick:n},p.back)),si.default.createElement(Vt,null,si.default.createElement(bd,null,si.default.createElement(Ml,{enablePopover:!0},h!=null?h:""),si.default.createElement(vd,{enablePopover:!0},f!=null?f:"")))),i==="fetching"&amp;&amp;si.default.createElement(_t,{absolute:"bottom"})),si.default.createElement(ur,null,t&amp;&amp;si.default.createElement("div",{className:"noteSelectionDialogMessage"},t),si.default.createElement(si.default.Fragment,null,si.default.createElement(DG,{notes:a,onCreateStandard:l,onCreateShared:u,onCreateSharedOld:d,courseId:e,openAfterCreated:!1,disabled:!1}),si.default.createElement(lw,null,si.default.createElement(cw,null,si.default.createElement(No,null),a.length&gt;0&amp;&amp;si.default.createElement(TG,null)))),i==="done"&amp;&amp;a.length===0&amp;&amp;si.default.createElement("div",{className:"drawerContentSubDesc"},p.noNotesFound),i instanceof Error&amp;&amp;si.default.createElement("div",{className:"drawerContentSubDesc"},p.noteFetchErrorOccurred),i==="done"&amp;&amp;a.length&gt;0&amp;&amp;si.default.createElement(gn,null,a.map(m=&gt;si.default.createElement(kG,{note:m,key:m.id,onClick:()=&gt;c(m)})))))};var bw=({submission:r,courseId:e,answers:t,children:n})=&gt;{let o=pe(),i=Me(),[s,a]=(0,PG.useState)(!1),[l,u]=(0,PG.useState)();return yP.default.createElement(yP.default.Fragment,null,n(()=&gt;{var f,m;let c=C1("submitButton"),p=t.map(g=&gt;{let v=r.hide_author,b=!v&amp;&amp;g.author_name!==void 0?(0,rue.sprintf)(o.submissionName,g.author_name):o.answerQuestionnaire,C=v?void 0:g.author_id;return{id:g.id,extension:".lnfragment",asset_proxy:void 0,author_id:C,comment_snapshot_id:void 0,name:b,timestamp:g.timestamp}}),h=new _0(p,{x:(f=c==null?void 0:c.x)!=null?f:0,y:(m=c==null?void 0:c.y)!=null?m:0});i.desktop?(At(h),Vx(i)):(u(h),a(!0))}),yP.default.createElement(eo,{open:s,onClose:()=&gt;{u(void 0),a(!1)},transition:"fade"},yP.default.createElement(vw,{store:i,courseId:e,message:o.selectNoteForAddingMaterials,onClose:()=&gt;{u(void 0),a(!1)},onReady:()=&gt;{At(l),Vx(i)}})))};var Av=oe(Wr());var rh=r=&gt;({image:{iconSrc:"/svg/download_image.svg",message:(0,Av.sprintf)(r.downloadFile,r.image)},video:{iconSrc:"/svg/download_video.svg",message:(0,Av.sprintf)(r.downloadFile,r.video)},audio:{iconSrc:"/svg/download_audio.svg",message:(0,Av.sprintf)(r.downloadFile,r.audio)},pdf:{iconSrc:"/svg/download_pdf.svg",message:(0,Av.sprintf)(r.downloadFile,r.pdf)},file:{iconSrc:"/svg/download_file.svg",message:(0,Av.sprintf)(r.downloadFile,r.file)}}),GMe=(r,e)=&gt;L0(e)?rh(r).image:Hh(e)?rh(r).video:Za(e)?rh(r).audio:O0(e)?rh(r).pdf:rh(r).file,nue=(r,e)=&gt;e instanceof ga?rh(r).image:e instanceof zn?rh(r).video:e instanceof Qn?rh(r).audio:e instanceof Yi?rh(r).pdf:rh(r).file;function WMe(r,e){if(!e)return!1;let t=r.contentAssetId();if(!t)return!1;let n=e.downloadedPdfNumPages.get(t),o=[],i=-1;return Array.from(r.iterator()).map((s,a)=&gt;{var l;if(s instanceof Yi&amp;&amp;t===((l=s.content.asset)==null?void 0:l.remote_id)){let u=s.content.page_index;u===0&amp;&amp;i===-1&amp;&amp;(i=a),i&gt;-1&amp;&amp;a-i===u&amp;&amp;o.push(u)}}),n===o.length}var AG=(r,e)=&gt;r instanceof ga||r instanceof zn||r instanceof Qn||r instanceof Yi&amp;&amp;!r.isThinkingTool&amp;&amp;WMe(r,e),oue=r=&gt;{if(!r)return!1;let{remote_id:e,extension:t}=r;return!!e&amp;&amp;!!t},vB=({t:r,card:e,downloadFileName:t,editorStore:n})=&gt;{var i;let o=[];if(!e)return[];if(AG(e,n)){let{asset:s}=e.content;if(oue(s)){let a=ad((i=t!=null?t:Lx(e))!=null?i:"asset");o.push({display:nue(r,e),fileInfo:{name:a,assetId:s.remote_id,extension:s.extension}})}else s&amp;&amp;s.extension&amp;&amp;o.push({display:nue(r,e)})}if(e.gadgets.naration)if(oue(e.gadgets.naration.asset)){let s=ad(t!=null?t:"narration");o.push({display:{iconSrc:"/svg/download_record.svg",message:(0,Av.sprintf)(r.downloadFile,r.audioRecording)},fileInfo:{assetId:e.gadgets.naration.asset.remote_id,name:s,extension:e.gadgets.naration.asset.extension}})}else o.push({display:{iconSrc:"/svg/download_record.svg",message:(0,Av.sprintf)(r.downloadFile,r.audioRecording)}});return o},iue=(r,e)=&gt;{if(e.asset_proxy){let t=ad(e.name),{asset_proxy:n,extension:o}=e;return[{display:GMe(r,o),fileInfo:{assetId:n,name:t,extension:o}}]}return[]};var EG=oe(n6());var CP=oe(Wr()),bB=244,yw=class{constructor(e,t){this.base=e;this.extension=t;if(!t.startsWith("."))throw new Error("Dot is required in file name")}get fullName(){return this.base+this.extension}},sue=(r,e)=&gt;xE({courseId:r,submissionNumber:e.submission_number,authorKey:e.author_key,generation:e.generation,answerId:e.id,pageIndex:0}),$Me=Bf(3),aue=async r=&gt;{let{answer:e,rootDirectoryHandle:t,directoryName:n,submissionUrl:o,abortSignal:i}=r,s=async()=&gt;{let a=await t.getDirectoryHandle(n,{create:!0}),{id:l,author_id:u,author_name:d}=e,c=await ie.lnsClient.downloadDocument(l,i),p=await Is(c),h=Es({id:l,file:p,author:{id:u,name:d}});await VMe(a,o);let f=KMe(h),m=[];for(let g of f)m.push(XMe({downloadableAsset:g,toDirectory:a,abortSignal:i}));return await Promise.all(m)};return await $Me.execute(s)},VMe=async(r,e)=&gt;{let t=he.get().strings,o=await(await r.getFileHandle(`${t.showSubmission}.html`,{create:!0})).createWritable();await o.write(jMe({url:`${window.location.origin}${e}`,t})),await o.close()},jMe=r=&gt;{let{url:e,t}=r;return`
&lt;!DOCTYPE html&gt;
&lt;html lang="${yK(he.get().locale)}"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;
    &lt;meta http-equiv="refresh" content="0;url=${e}"&gt;
    &lt;title&gt;${t.titleRedirect}&lt;/title&gt;
  &lt;/head&gt;
  &lt;body style="
    display: grid;
    place-content: center;
    height:100vh;
  "&gt;
    &lt;main style="
      display: grid;
      justify-items: center;
    "&gt;
      &lt;p&gt;${t.redirectSubmissionMessage}&lt;/p&gt;
      &lt;p&gt;
        &lt;a href="${e}"&gt;${t.showSubmission}&lt;/a&gt;
      &lt;/p&gt;
    &lt;/main&gt;
  &lt;/body&gt;
&lt;/html&gt;
`},KMe=r=&gt;{let e=[],t=new IG,n=r.headGroup();for(let o of n.memberAndChildrenIteratorOverGroup()){let i=qMe(o);if(i&amp;&amp;!e.some(a=&gt;a.assetId===i.assetId)){let{fileName:a}=i,l=t.execute(a);i.fileName=l,e.push(i)}let s=YMe(o);if(s&amp;&amp;!e.some(a=&gt;a.assetId===s.assetId)){let{fileName:a}=s,l=t.execute(a);s.fileName=l,e.push(s)}}return e},qMe=r=&gt;{var e;if(AG(r)&amp;&amp;r.content.asset&amp;&amp;r.content.asset.remote_id&amp;&amp;r.content.asset.extension)return{assetId:r.content.asset.remote_id,fileName:new yw(ad((e=Lx(r))!=null?e:"asset"),r.content.asset.extension)}},YMe=r=&gt;{if(r.gadgets.naration&amp;&amp;r.gadgets.naration.asset&amp;&amp;r.gadgets.naration.asset.remote_id&amp;&amp;r.gadgets.naration.asset.extension)return{assetId:r.gadgets.naration.asset.remote_id,fileName:new yw("narration",r.gadgets.naration.asset.extension)}},lue=(r,e,t)=&gt;{let n=new Map,o=1,i=r.map(s=&gt;{let a;return e?a=t.folder+o++:a=(0,EG.default)(s.author_name,{replacement:"_"}),{id:s.author_id,name:a.slice(0,bB)}});return i.forEach(({id:s,name:a})=&gt;{if(i.filter(u=&gt;u.id!==s&amp;&amp;u.name===a).length&gt;0){let u=` (${s})`,d=a.slice(0,bB-u.length);n.set(s,`${d}${u}`)}else n.set(s,a)}),n},IG=class{constructor(){this.nameStore=[]}execute(e){let t=(0,EG.default)(e.base,{replacement:"_"}),n=0,o=new yw(t.slice(0,bB-e.extension.length),e.extension);for(;this.nameStore.includes(o.fullName);){n++;let i=` (${n})`,s=t.slice(0,bB-(i.length+e.extension.length));o=new yw(`${s}${i}`,e.extension)}return this.nameStore.push(o.fullName),o}},XMe=async r=&gt;{let{downloadableAsset:e,toDirectory:t,abortSignal:n}=r,o=await JMe(e,n);await ZMe(o,t)},QMe=Bf(),JMe=async(r,e)=&gt;{let t=async()=&gt;{let{assetId:n,fileName:o}=r;return{blob:await ie.lnsClient.downloadAsset(n,e),fileName:o}};return await QMe.execute(t)},ZMe=async(r,e)=&gt;{let{fileName:t,blob:n}=r,o=async i=&gt;{let a=await(await e.getFileHandle(i,{create:!0})).createWritable();await a.write(n),await a.close()};try{await o(t.fullName)}catch(i){if(i instanceof TypeError)try{await o(`replacedName${t.extension}`)}catch(s){throw s}else throw i}},eNe=(r,e)=&gt;{let t={message:e.unknownError,unknownError:r};return r.name==="NotFoundError"?t.message=e.fileDestinationNotExist:r.name==="TypeMismatchError"?t.message=e.invalidFolderName:r.name==="InvalidStateError"&amp;&amp;(t.message=e.invalidFileNameOrPath),t},uue=(r,e)=&gt;{if(r instanceof DOMException){let{message:n}=eNe(r,e);return n}else if(r instanceof TypeError)return e.invalidDirectoryNameForBatchDownload;let{message:t}=ot(r,{[403]:e.insufficientPermission,[404]:e.status404ItemNotFound,[500]:e.unknownApiErrorMsg});return t},due=(r,e)=&gt;{let t=he.get(),n=t.strings,{locale:o}=t,[i,s,a,l,...u]=r,d=[i,s,a,l].filter(c=&gt;!!c);if(d.length===1)return[(0,CP.sprintf)(n.failedDownloadFile,d[0]),e];if(d.length&gt;1){if(u.length&gt;0)return[(0,CP.sprintf)(n.failedDownloadFilesWithOthers,t.enumerate(d),u.length),e];if(o==="en-US"){let p=d.splice(-1)[0],h=t.enumerate(d);return[(0,CP.sprintf)(n.failedDownloadFiles,t.and(h,p)),e]}let c=t.enumerate(d);return[(0,CP.sprintf)(n.failedDownloadFiles,c),e]}else return[e]};var cue=()=&gt;{let e=Me().userInfo.is_teacher&amp;&amp;lF()&amp;&amp;window.showDirectoryPicker;return Ai.default.createElement(Ai.default.Fragment,null,Ai.default.createElement(_G,null),Ai.default.createElement(No,null),Ai.default.createElement(tNe,null),Ai.default.createElement(rNe,null),e&amp;&amp;Ai.default.createElement(nNe,null))},tNe=()=&gt;{let r=pe(),e=Me(),{state:t,courseId:n,submission:o}=(0,Kf.useContext)(Wa),i=t.selectedAnswers.map(s=&gt;e.submissionAnswers.byId[s]).filter(s=&gt;!!s);return Ai.default.createElement(bw,{courseId:n,submission:o,answers:i},s=&gt;Ai.default.createElement(Dd,{disabled:t.selectedAnswers.length===0,onClick:s},r.use))},rNe=()=&gt;{let r=pe(),e=Me(),{state:t,submission:n,courseId:o}=(0,Kf.useContext)(Wa),i=async()=&gt;{let s=27,a=t.selectedAnswers.length,l=h=&gt;{let f=`${r.exportingCardAsPdf} (${h}/${a})`;e.reduce(we(s,f))};l(0);let u=await Ot.regularFont.getOrFetch(),d=await Ot.boldFont.getOrFetch(),c=new Pv({ctx:ie,regularFont:u,boldFont:d}),p=t.selectedAnswers.map(h=&gt;e.submissionAnswers.byId[h]).filter(h=&gt;!!h).map(h=&gt;({id:h.id,authorName:n.hide_author?void 0:h.author_name}));try{let h=await c.exportDocumentsAsPdf({documents:p,selfAuthor:Nr(e,e.userInfo.user_id),needsFooter:!n.hide_author,onProgress:l});e.reduce(we(s,null));let f=au(e,o),m=ls(e,o),g=La(`${f}_${m}_${n.message}`,".pdf");Ol(h,g)}catch(h){e.reduce(we(s,null),me(s,{title:r.couldntExportCard,...ot(h),onOk:()=&gt;e.reduce(me(s,void 0)),okMessage:r.back}))}};return Ai.default.createElement(Dd,{disabled:t.selectedAnswers.length===0,onClick:i},r.pdf)},_G=()=&gt;{let{state:r,dispatch:e,answers:t,sortedAnswers:n}=(0,Kf.useContext)(Wa),o=pe(),i=r.selectedAnswers.length===t.length;return Ai.default.createElement(Dd,{onClick:()=&gt;{if(i)e({selectedAnswers:[]});else{let a=n.map(l=&gt;l.submissionAnswer).filter(l=&gt;!!l).map(l=&gt;l.id);e({selectedAnswers:a})}}},i?o.releaseAll:o.selectAll)},nNe=()=&gt;{let r=pe(),e=Me(),{batchDownloadState:t}=e,{state:n,courseId:o,submission:i}=(0,Kf.useContext)(Wa),[s,a]=(0,Kf.useState)(0),l=(0,Kf.useRef)(),u=n.selectedAnswers.map(h=&gt;e.submissionAnswers.byId[h]).filter(h=&gt;!!h&amp;&amp;ua(h,e.userInfo,i.hide_author)),d=async()=&gt;{var f;let h=[];try{e.reduce(L1("inPreparation"));let m=await window.showDirectoryPicker(),g=i.message||sC(i,r.taskExpiryFmt),v=await m.getDirectoryHandle(Gne(g),{create:!0}),b=[];l.current=new AbortController;let{signal:C}=l.current;e.reduce(L1("inProgress"));let x=lue(u,i.hide_author,r);for(let A of u){let I=sue(o,A),E=(f=x.get(A.author_id))!=null?f:A.author_name,O=async Q=&gt;{await aue({answer:A,rootDirectoryHandle:v,directoryName:E,submissionUrl:I,abortSignal:Q}),a(j=&gt;j+1)};b.push(O(C))}let y=await Promise.allSettled(b),S=y.some(A=&gt;A.status==="rejected");if(!S){e.reduce(Jt({type:"normal",text:r.completedBatchDownload}));return}if(S&amp;&amp;C.aborted){e.reduce(Jt({type:"normal",text:r.canceledBatchDownload}));return}let T=[];y.forEach((A,I)=&gt;{A.status==="rejected"&amp;&amp;(T.push(A),h.push(u[I].author_name))});let[w,...k]=T;throw k.forEach(A=&gt;V2.error(A.reason)),w.reason}catch(m){let g=m instanceof DOMException&amp;&amp;(m.name==="NotAllowedError"||m.name==="AbortError");if(Je.catchError(m)||g)return;e.reduce(me(77,{title:r.couldntDownloadFile,message:due(h,uue(m,r)),unknownError:m,okMessage:r.back,onOk:()=&gt;e.reduce(me(77,void 0))}))}finally{e.reduce(L1("idle")),a(0)}},c=()=&gt;{var h;(h=l.current)==null||h.abort(),e.reduce(L1("cancel"))},p=t==="inProgress"||t==="cancel";return Ai.default.createElement(Ai.default.Fragment,null,Ai.default.createElement(Dd,{disabled:n.selectedAnswers.length===0,onClick:d},r.download),Ai.default.createElement(tr,{open:p,transition:"fade",onClose:()=&gt;{}},Ai.default.createElement($m,null,Ai.default.createElement("div",{className:"uiDialogContent"},Ai.default.createElement(_t,null),Ai.default.createElement("div",{className:"uiDialogTitle"},t==="cancel"&amp;&amp;r.cancelingDownload,t==="inProgress"&amp;&amp;`${r.downloadingFile} (${s}/${u.length})`),Ai.default.createElement(la,null,Ai.default.createElement(Ui,{className:"uiDialogCancelButton",onClick:c,disabled:t!=="inProgress"||t==="inProgress"&amp;&amp;s===u.length},r.cancel))))))};var Iv=oe(Sh());function pue(r,e=new Date){let t=e.getFullYear(),n=e.getMonth(),o=e.getDate(),i=e.getHours(),s=e.getMinutes(),a=Lr(t,2),l=r.getFullYear()&gt;t,u=l?Lr(1,12):Lr(n+1,12-n),d=r.getMonth()&gt;n,c=oNe(r),p=l||d?Lr(1,c):Lr(o,c+1-o),h=r.getDate()&gt;o,f=l||d||h?Lr(0,24):Lr(i,24-i),m=r.getHours()&gt;i,g=l||d||h||m?Lr(0,60):Lr(s,60-s);return{year:a,month:u,date:p,hour:f,minutes:g}}function oNe(r){let e=r.getMonth()+1,t=r.getFullYear(),n=t%4===0&amp;&amp;!(t%100===0&amp;&amp;t%400!==0);return[1,3,5,7,8,10,12].includes(e)?31:[4,6,9,11].includes(e)?30:n?29:28}var FG="anonymous",tue=()=&gt;{let r=Me(),e=r.submissionListDisplaySetting.answersVisible,{state:t,dispatch:n,answers:o,submissionNumber:i,courseId:s,answersRevealed:a,submission:l}=(0,Qe.useContext)(Wa),u=r.userInfo.is_teacher,d=[];u&amp;&amp;(d=o.filter(x=&gt;ua(x,r.userInfo,l.hide_author)&amp;&amp;x.reply_status.annotation_layer_updated&amp;&amp;x.author_id!==r.userInfo.user_id));let[c,p]=gs({store:r,initialState:!1}),h=pe(),f=()=&gt;{let x=l.reveal_answer;(x!==0||confirm(h.confirmAnswerShare))&amp;&amp;$x(r,{courseId:s,submissionNumber:i,opts:{reveal_answer:x===0?1:0}})},m=()=&gt;{let x=d.length;if(x&lt;1)return;let y=he.get(),S=(0,SP.sprintf)(h.confirmSendBackAll,x,y.pluralSafeSuffix(x));confirm(S)&amp;&amp;Xie(r,{list:d.map(T=&gt;({documentId:T.id,fallback:async(w,k)=&gt;{let I=(await ie.lnsClient.downloadDocument(T.id).then(Is).then(E=&gt;Es({id:T.id,file:E,author:Nr(r,T.author_id)}))).memberAt(w);if(!I)throw new Error("member not found at "+w);return k==="document"?gM(I):vM(I)}}))})},g=x=&gt;{let y=l.preparation?!1:void 0;$x(r,{courseId:s,submissionNumber:i,opts:{expiry:x.toISOString(),preparation:y}})},v=()=&gt;{n({mode:"selection"})},b=()=&gt;{n({mode:"comparison"})},C=!(!u&amp;&amp;(l.hide_author||l.reveal_answer===0));return Qe.default.createElement("div",{className:"submissionListMiddleHeader"},t.mode==="comparison"&amp;&amp;Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement(_G,null),Qe.default.createElement(No,null),Qe.default.createElement(Dd,{disabled:t.selectedAnswers.length===0,onClick:()=&gt;{!vP(r)||r.reduce(mp(t.selectedAnswers))}},h.startComparing)),t.mode==="default"&amp;&amp;Qe.default.createElement(Qe.default.Fragment,null,u&amp;&amp;Qe.default.createElement("div",{className:"submissionListMiddleHeaderItem"},Qe.default.createElement(Gt,{className:"submissionListAnswerOnButton","data-off":!e,onClick:()=&gt;r.reduce(r_({answersVisible:!e}))})),C&amp;&amp;Qe.default.createElement(sNe,null),!u&amp;&amp;Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement(No,null),Qe.default.createElement(MG,null),Qe.default.createElement(NG,{store:r,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:g}),a&amp;&amp;Qe.default.createElement(Dd,{onClick:v},h.selection),Kh(l)&amp;&amp;Qe.default.createElement(Dd,{onClick:b},h.comparison)),u&amp;&amp;!r.screen.isMobile&amp;&amp;Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement(Dd,{onClick:f,lineClamp:!0},l.reveal_answer===0?h.startAnswerSharing:h.sharingAnswers),Qe.default.createElement(Dd,{onClick:m,disabled:d.length===0,lineClamp:!0},h.sendBackAll),Qe.default.createElement(No,null),Qe.default.createElement(MG,null),Qe.default.createElement(NG,{store:r,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:g}),Qe.default.createElement(Dd,{onClick:v,lineClamp:!0},h.selection),Qe.default.createElement(Dd,{onClick:b,lineClamp:!0},h.comparison)),u&amp;&amp;r.screen.isMobile&amp;&amp;Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement(No,null),Qe.default.createElement(MG,null),Qe.default.createElement(NG,{store:r,expiry:l.expiry,isSubmitted:l.submitted,onChangeExpiry:g}),Qe.default.createElement("div",{className:"submissionListMiddleHeaderItem"},Qe.default.createElement(ev,{onClick:()=&gt;p(!0)}),Qe.default.createElement(xt,{open:c,onClose:()=&gt;p(!1)},Qe.default.createElement(Rr,{onClick:f},l.reveal_answer===0?h.startAnswerSharing:h.endAnswerSharing),Qe.default.createElement(Rr,{onClick:m,disabled:d.length===0},h.sendBackAll),Qe.default.createElement(Rr,{onClick:()=&gt;{n({mode:"selection"}),p(!1)}},h.selection),Qe.default.createElement(Rr,{onClick:()=&gt;{n({mode:"comparison"}),p(!1)}},h.comparison))))),t.mode==="selection"&amp;&amp;Qe.default.createElement(cue,null))},iNe=Do(),MG=()=&gt;{let t=g=&gt;g&gt;=8,n=g=&gt;g&lt;=1,o=pe(),i=Me(),{state:s,dispatch:a}=(0,Qe.useContext)(Wa),l=xG(window.screen),[u,d]=(0,Qe.useState)(!1),c=g=&gt;{iNe(()=&gt;{i.reduce(Wi({submissonListColumnSize:{$set:g}}))},1e3)},p=g=&gt;{let v=Number(g.target.value);a({listColumnSize:v}),c(v)},h=()=&gt;{a({listColumnSize:l}),c(l)},f=()=&gt;{let{listColumnSize:g}=s;if(t(g))return;let v=g+1;a({listColumnSize:v}),c(v)},m=()=&gt;{let{listColumnSize:g}=s;if(n(g))return;let v=g-1;a({listColumnSize:v}),c(v)};return Qe.default.createElement("div",null,Qe.default.createElement(Gt,{className:"submissionColumnSizePopoverButton submissionListMiddleHeaderItem",onClick:()=&gt;d(!0)}),Qe.default.createElement(xt,{open:u,onClose:()=&gt;d(!1)},Qe.default.createElement("div",{className:"submissionColumnSizePopoverItem"},Qe.default.createElement("div",{className:"submissionColumnSizePopoverItemTitle"},o.changeLayout),Qe.default.createElement("div",{className:"submissionColumnSizePopoverItemDescription"},o.changeLayoutDescription),Qe.default.createElement("div",{className:"submissionColumnSizeSliderWrapper"},Qe.default.createElement(Gt,{className:"submissionColumnSizeSliderLeftIcon",onClick:m,disabled:n(s.listColumnSize)}),Qe.default.createElement("input",{className:"submissionColumnSizeSlider",type:"range",min:`${1}`,max:`${8}`,value:s.listColumnSize,step:"1",onChange:p}),Qe.default.createElement(Gt,{className:"submissionColumnSizeSliderRightIcon",onClick:f,disabled:t(s.listColumnSize)}))),Qe.default.createElement(Rr,{role:"button",onClick:()=&gt;h()},o.resetLayout)))},sNe=()=&gt;{let r=Me(),e=r.submissionListDisplaySetting.orderType,{submission:t,courseId:n,submissionNumber:o}=(0,Qe.useContext)(Wa),[i,s]=(0,Qe.useState)(!1),a=pe(),l=d=&gt;async()=&gt;{if(t.hide_author&amp;&amp;d!==FG){let c="";if(d==="byAuthorName"?c=a.nameOrder:d==="byUpdatedDate"?c=a.updateOrder:d==="bySubmissionDate"&amp;&amp;(c=a.submitOrder),!confirm((0,SP.sprintf)(a.confirmRevealSubmitterNames,c)))return}s(!1),!((t.hide_author||d==="anonymous")&amp;&amp;!await $x(r,{courseId:n,submissionNumber:o,opts:{hide_author:d===FG}}))&amp;&amp;d!==FG&amp;&amp;r.reduce(r_({orderType:d}))},u={byAuthorName:a.nameOrder,bySubmissionDate:a.submitOrder,byUpdatedDate:a.updateOrder};return Qe.default.createElement("div",{className:"submissionListMiddleHeaderItem submissionListMiddleHeaderSortButton"},Qe.default.createElement(Gt,{className:"primaryTextButton submissionListMiddleHeaderSort submissionListMiddleButton",onClick:()=&gt;s(!0)},Qe.default.createElement("span",{className:"submissionListMiddleHeaderLineClamp"},t.hide_author?a.anonymous:u[e])),Qe.default.createElement(xt,{open:i,onClose:()=&gt;s(!1)},Qe.default.createElement(Rr,{onClick:l("bySubmissionDate")},a.submitOrder),Qe.default.createElement(Rr,{onClick:l("byUpdatedDate")},a.updateOrder),Qe.default.createElement(Rr,{onClick:l("byAuthorName")},a.nameOrder),r.userInfo.is_teacher&amp;&amp;Qe.default.createElement(Rr,{onClick:l("anonymous")},a.anonymous)))},NG=({expiry:r,store:e,isSubmitted:t,onChangeExpiry:n})=&gt;{let o=pe(),{submission:i}=(0,Qe.useContext)(Wa),[s,a]=gs({store:e,initialState:!1}),l=()=&gt;a(!1),u=rd(),d,c;r&amp;&amp;(d=new Date(r),c=new su(d.getTime()-Date.now()));let p=c==null?void 0:c.isPast();(0,Qe.useEffect)(()=&gt;{if(p!==!1)return;let v=dS.subscribe(u);return()=&gt;v.close()},[p]);let h=v=&gt;{n(v),a(!1)},f=e.userInfo.is_teacher?Qe.default.createElement(xt,{open:s,onClose:l},Qe.default.createElement(BG,{expiry:d,onOk:h,popover:!0,title:o.setTimeAndDateForDeadline})):Qe.default.createElement(xt,{open:s,onClose:l},Qe.default.createElement("div",{className:"submissionExpiryText"},Qe.default.createElement("div",{className:"submissionExpiryTextSub"},o.expiryDialogTitle),Qe.default.createElement("div",{className:"submissionExpiryTextMain"},(0,Iv.default)(d).format("lll")))),m="";i.preparation?m=Ca.preparing:c&amp;&amp;!c.isPast()&amp;&amp;(m=t?Ca.submitted:Ca.opening);let g=o.noExpiry;return i.preparation?g=o.inPreparation:c&amp;&amp;(g=c.isPast()?o.expiry:c.toRelativeString()),Qe.default.createElement("div",{className:"submissionListMiddleHeaderItem"},Qe.default.createElement(gt,{className:"submissionListMiddleHeaderButton",onClick:()=&gt;a(!0),style:{color:m}},Qe.default.createElement("div",{className:"submissionListMiddleHeaderClock",style:{backgroundColor:m}}),Qe.default.createElement("div",{className:"submissionListMiddleHeaderDeadline"},g)),f)},Dd=({className:r="",disabled:e,lineClamp:t,onClick:n,children:o})=&gt;{let i=t?"submissionListMiddleHeaderLineClamp":"";return Qe.default.createElement(Gt,{className:`primaryTextButton submissionListMiddleHeaderItem submissionListMiddleHeaderButton ${r}`,disabled:e,onClick:n},Qe.default.createElement("span",{className:i},o))},BG=({expiry:r,onOk:e,title:t,popover:n=!0})=&gt;{let o=(0,Qe.useMemo)(()=&gt;new Date,[]),i;r?i=o&gt;r?o:r:i=new Ls().after(10*6e4);let[s,a]=(0,Qe.useState)(i),l=d=&gt;a(d&lt;o?o:d),u=pe();return Qe.default.createElement("div",{className:"submissionExpiryDialog","data-popover":n},t&amp;&amp;Qe.default.createElement("div",null,t),Qe.default.createElement("div",{className:"submissionExpiryDialogBody"},Qe.default.createElement(lNe,{date:s,onChange:l})),Qe.default.createElement("div",{className:"submissionExpiryDialogFooter"},Qe.default.createElement("div",{className:"submissionExpiryDialogDeadLine","data-popover":n},(0,Iv.default)(s).format("lll")," | ",(0,Iv.default)().isBefore(s)?(0,Iv.default)(s).fromNow():u.hasExpired),Qe.default.createElement("div",null,Qe.default.createElement(aNe,null,r&amp;&amp;o&lt;r&amp;&amp;Qe.default.createElement(yB,{key:0,onClick:()=&gt;{a(new Ls)}},u.closeNow),Qe.default.createElement(yB,{key:1,onClick:()=&gt;{a(new Ls().after(10*6e4))}},u.closeAfterTen),Qe.default.createElement(yB,{key:2,onClick:()=&gt;{a(Ls.tomorrow().after(-2*36e5))}},u.closeToday),Qe.default.createElement(yB,{key:3,onClick:()=&gt;{e(s)},color:r?"":Ca.opening},r?u.okay:u.callForAnswers)))))},aNe=({children:r})=&gt;Qe.default.createElement("div",{className:"uiSelector",style:{width:"100%"}},r),yB=({children:r,onClick:e,flex:t,color:n})=&gt;{let o=Me();return Qe.default.createElement("div",{className:"uiSelectorItem",style:{flex:t,color:n},role:"button",onClick:e,"data-hiragana":o.locale==="ja-Hira"?"true":void 0},r)},lNe=({onChange:r,date:e})=&gt;{let t=(0,Qe.useMemo)(()=&gt;new Date,[]),n=(0,Iv.default)().add(1,"year").format("YYYY-MM-DDTHH:mm"),o=(0,Iv.default)(t).format("YYYY-MM-DDTHH:mm"),i=pe(),s=a=&gt;(a.setSeconds(0),a.setMilliseconds(0),a);if(Ig())return Qe.default.createElement("input",{required:!0,type:"datetime-local",min:o,max:n,value:(0,Iv.default)(e).format("YYYY-MM-DDTHH:mm"),onChange:a=&gt;{let l=a.target.value;l&amp;&amp;r(s(new Date(l)))}});{let a=pue(e,t);return Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement("div",{className:"submissionDateTimeInputGroup"},Qe.default.createElement("label",{className:"submissionDateTimeInputLabel"},i.dateLabel),Qe.default.createElement("div",{className:"submissionDateTimeInputItem"},Qe.default.createElement("select",{name:"year",value:e.getFullYear(),onChange:l=&gt;{let u=new Date(e);u.setFullYear(+l.target.value),r(s(u))}},a.year.map(l=&gt;Qe.default.createElement("option",{key:l,value:l},l))),Qe.default.createElement("select",{name:"month",value:e.getMonth(),onChange:l=&gt;{let u=new Date(e);u.setMonth(+l.target.value),r(s(u))}},a.month.map(l=&gt;Qe.default.createElement("option",{key:l,value:l-1},l))),Qe.default.createElement("select",{name:"date",value:e.getDate(),onChange:l=&gt;{let u=new Date(e);u.setDate(+l.target.value),r(s(u))}},a.date.map(l=&gt;Qe.default.createElement("option",{key:l,value:l},l))))),Qe.default.createElement("div",{className:"submissionDateTimeInputGroup"},Qe.default.createElement("label",{className:"submissionDateTimeInputLabel"},i.timeLabel),Qe.default.createElement("div",{className:"submissionDateTimeInputItem"},Qe.default.createElement("select",{name:"hour",value:e.getHours(),onChange:l=&gt;{let u=new Date(e);u.setHours(+l.target.value),r(s(u))}},a.hour.map(l=&gt;Qe.default.createElement("option",{key:l,value:l},(0,SP.sprintf)("%02d",l)))),Qe.default.createElement("select",{name:"minute",value:e.getMinutes(),onChange:l=&gt;{let u=new Date(e);u.setMinutes(+l.target.value),r(s(u))}},a.minutes.map(l=&gt;Qe.default.createElement("option",{key:l,value:l},(0,SP.sprintf)("%02d",l)))))))}};function vP(r,e=!0){return r.submissionListDisplaySetting.answersVisible?!0:confirm(he.get().strings.confirmDisplayAnswers)?(e&amp;&amp;r.reduce(r_({answersVisible:!0})),!0):!1}var hue=({onClose:r})=&gt;{let e=Me(),t=he.get().strings,n=e.courseId;Ee(typeof n=="number");let o=(0,ko.useRef)(uNe(e,n)),[i,s]=(0,ko.useState)(!1),[a,l]=(0,ko.useState)(),u=h=&gt;{a&amp;&amp;l(null),o.current=h.target.value},d=async()=&gt;{let h=o.current,f=aB(h,{maxLength:255});l(f),f===null&amp;&amp;(await Z6(e,{title:h,courseId:n,preparation:!0}),r())},c=()=&gt;{let h=o.current,f=aB(h,{maxLength:255});l(f),f===null&amp;&amp;s(!0)},p=async h=&gt;{let f=o.current;await Z6(e,{title:f,courseId:n,expiry:h,preparation:!1}),s(!1),r()};return ko.default.createElement(ko.default.Fragment,null,ko.default.createElement("div",{className:"submissionBoxCreateDialog"},ko.default.createElement(rr,{round:!0},ko.default.createElement(Et,{className:"submissionBoxCreateDialogHeader"},ko.default.createElement(Ft,null,ko.default.createElement(Mt,null,ko.default.createElement(Gt,{className:"submissionBoxCreateDialogCloseButton",onClick:r},t.close)),ko.default.createElement(Vt,null,ko.default.createElement("span",{className:"submissionBoxCreateDialogHeaderTitle"},t.createNewTask)),ko.default.createElement(jt,null))),ko.default.createElement(ur,{className:"submissionBoxCreateDialogBody"},ko.default.createElement("div",{className:"submissionBoxCreateDialogTitleContainer"},ko.default.createElement("div",{className:"submissionBoxCreateDialogTitle"},t.title),ko.default.createElement(mw,{className:"submissionBoxCreateDialogTitleInput",type:"text",maxLength:255,defaultValue:o.current,onChange:u,readOnly:i}),a&amp;&amp;ko.default.createElement("div",{className:"submissionBoxCreateDialogTitleError"},a)),ko.default.createElement("div",{className:"submissionBoxCreateDialogButtonContainer"},ko.default.createElement(Gt,{className:"submissionBoxCreateDialogButton submissionBoxInPreparation",onClick:d},t.createInPreparation),ko.default.createElement(Gt,{className:"submissionBoxCreateDialogButton submissionBoxCallForAnswers",onClick:c},t.callForAnswersNow))))),ko.default.createElement(tr,{className:"submissionBoxCreateModal",open:i,onClose:()=&gt;s(!1),overlay:!0},ko.default.createElement("div",{className:"submissionBoxCreateDatePicker","data-mobile":Ig()},ko.default.createElement(BG,{expiry:void 0,onOk:p,title:t.setTimeAndDateForDeadline,popover:!1}))))},uNe=(r,e)=&gt;{var i;let t=he.get().strings,n=(i=r.submissions.byCourseId[e])!=null?i:[],o=t.taskNameDefaultPrefix;return Tre(o,n.map(s=&gt;r.submissions.byKey[s]))};var fue=oe(ve());var Ev=({onClose:r})=&gt;{let e=pe();return fue.default.createElement(Wm,{title:e.submissionBoxDeletedOrNotExisted,okMessage:e.close,color:"error",onOk:r})};var Ca={opening:"#ff1d1d",preparing:"#039E6F",submitted:"#70b700",submittedLate:"#555555",submittedLateDark:"#333333"},gue=({store:r,courseId:e,onClose:t})=&gt;{(0,Xe.useEffect)(()=&gt;{Ua(r,e),Vy({store:r,courseId:e,enableFetchError:!0}),r.desktop||Zp(r,e)},[]);let{submissionNumber:n}=r,o=l=&gt;{r.userInfo.is_teacher&amp;&amp;jy({store:r,courseId:e,submissionNumber:l})},i=l=&gt;{n!==void 0&amp;&amp;n!==l.submission_number&amp;&amp;o(n),r.reduce(Jh(l.submission_number))},s=()=&gt;{n&amp;&amp;o(n),r.reduce(Jh(void 0))},a=n?r.submissions.byKey[pn(e,n)]:void 0;return Xe.default.createElement("div",{className:"submissionBox"},Xe.default.createElement(cNe,{store:r,onClick:i,onClose:t}),n&amp;&amp;(a?Xe.default.createElement(eue,{submission:a,onBack:s}):Xe.default.createElement(Ev,{onClose:s})))},vue=({onClose:r,store:e})=&gt;{let t=pe(),n=Gr(Xt(e)),o=e.fetchStates[nt.submissions(n)],[i,s]=(0,Xe.useState)(!1);(0,Xe.useEffect)(()=&gt;{Vy({store:e,courseId:n,enableFetchError:!0})},[]);let a=()=&gt;{s(!0)},l=()=&gt;{i?s(!1):r()},u=async d=&gt;{if(d.submitted){let c=d.message?d.message:sC(d,t.taskExpiryFmt),p=(0,mue.sprintf)(t.confirmResubmit,c);if(!confirm(p))return}await Kie(e,d.submission_number)};return Xe.default.createElement(rr,{round:!e.screen.isMobile},Xe.default.createElement(Et,null,Xe.default.createElement(Ft,null,Xe.default.createElement(Mt,null,Xe.default.createElement(gt,{onClick:l},!i&amp;&amp;Xe.default.createElement(Xe.default.Fragment,null,t.cancel),i&amp;&amp;Xe.default.createElement(Xe.default.Fragment,null,Xe.default.createElement("div",{className:"navHeaderBackButtonIcon"}),t.back))),Xe.default.createElement(Vt,null,Xe.default.createElement(nr,null,t.pleaseChooseTask)),Xe.default.createElement(jt,null)),o==="fetching"&amp;&amp;Xe.default.createElement(_t,{absolute:"bottom"})),Xe.default.createElement(ur,{className:"relative"},Xe.default.createElement(Mn,{classNames:"slide-left",in:!i,appear:!1,enter:!0,exit:!0,timeout:200,unmountOnExit:!0},Xe.default.createElement("div",{className:"submissionDialogPage"},Xe.default.createElement(bue,{store:e,courseId:n,showAllow:!0,onClick:u}),Xe.default.createElement(gn,{title:t.expiredTasks},Xe.default.createElement(xr,{onClick:a,showArrow:!0},Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionExpiredBoxes"})),Xe.default.createElement(mn,null,Xe.default.createElement(nr,{disablePopover:!0},t.allExpiredTasks)))))),Xe.default.createElement(Mn,{classNames:"slide-right",in:i,appear:!1,enter:!0,exit:!0,timeout:200,unmountOnExit:!0},Xe.default.createElement("div",{className:"submissionDialogPage"},Xe.default.createElement(dNe,{store:e,courseId:n,onClick:u})))))},dNe=({store:r,courseId:e,onClick:t})=&gt;{let n=r.fetchStates[nt.submissions(e)],i=r.submissionsOldest.byCourseId[e]||n!=="done";return Xe.default.createElement(fP,{className:"submissionDialogScrollLoader",disable:i,onLoadMore:()=&gt;{let a=r.lastSubmissionId.byCourseId[e];Vy({store:r,courseId:e,beforeSubmissionID:a})}},Xe.default.createElement(yue,{store:r,courseId:e,showAllow:!1,onClick:t,messageIfEmpty:!0}))},Axt=Do(),cNe=({store:r,onClick:e,onClose:t})=&gt;{var v,b;let[n,o]=(0,Xe.useState)(!1),i=Gr(Xt(r)),s=r.fetchStates[nt.submissions(i)],a=()=&gt;{o(!0)},l=(v=r.submissionsOldest.byCourseId[i])!=null?v:!1,d=((b=r.submissions.byCourseId[i])!=null?b:[]).map(C=&gt;r.submissions.byKey[C]),c=()=&gt;{let C=r.lastSubmissionId.byCourseId[i];Vy({store:r,courseId:i,beforeSubmissionID:C})},[p,h]=$r({editing:!1}),f=C=&gt;h({editing:C}),m=pe(),g=sg(r,i);return Xe.default.createElement(Xe.default.Fragment,null,Xe.default.createElement(rr,null,Xe.default.createElement(Et,null,Xe.default.createElement(Ft,null,Xe.default.createElement(Mt,null,!p.editing&amp;&amp;Xe.default.createElement(gt,{onClick:t},m.back)),Xe.default.createElement(Vt,null,Xe.default.createElement(bd,null,g&amp;&amp;Xe.default.createElement(Ml,{enablePopover:!0},g),Xe.default.createElement(vd,null,m.taskListTitle))),Xe.default.createElement(jt,null,Xe.default.createElement(hNe,{store:r,courseId:i,editing:p.editing,onEditChange:f}))),s==="fetching"&amp;&amp;Xe.default.createElement(_t,{absolute:"bottom"})),Xe.default.createElement(ur,null,Xe.default.createElement(fP,{className:"submissionBoxScrollLoader",disable:l||d.length===0||s!=="done",onLoadMore:c},r.userInfo.is_teacher&amp;&amp;Xe.default.createElement(nC,{disabled:s==="fetching"||p.editing||!!r.updatingMessages[14],onClick:a},m.createNewTask),Xe.default.createElement(fNe,{store:r,onClick:e,editing:p.editing})))),Xe.default.createElement(tr,{className:"submissionBoxCreateModal",open:n,onClose:()=&gt;o(!1),overlay:!0},Xe.default.createElement(hue,{onClose:()=&gt;o(!1)})))},pNe=(r,e)=&gt;{let t;if(r==="production"?t=Zc:r==="staging"?t=sK:(r==="development"||r==="local")&amp;&amp;(t=pE),!!t)return`${t}/courses/${e}/submission_messages?mode=students`},hNe=({store:r,courseId:e,editing:t,onEditChange:n})=&gt;{var p,h;let o=r.userInfo.is_teacher,[i,s]=(0,Xe.useState)(!1),a=()=&gt;{n(!t),s(!1)},l=()=&gt;{let f=pNe(r.releaseStage,e);f&amp;&amp;window.open(f,"_blank")},u=((h=(p=r.mobilePushes.byCourseId[e])==null?void 0:p.filter(f=&gt;{var m,g;return((m=r.mobilePushes.byId[f])==null?void 0:m.type)==="submit"||((g=r.mobilePushes.byId[f])==null?void 0:g.type)==="reveal_submission_answers"}))==null?void 0:h.length)&gt;0,d=()=&gt;{if(!u)return;let f=o?c.confirmMarkAllSubmitsAsRead:c.confirmMarkAllRevealAnswersAsRead;confirm(f)&amp;&amp;(o?jy({store:r,courseId:e}):gN({store:r,courseId:e})),s(!1)},c=pe();return t?Xe.default.createElement(gt,{onClick:()=&gt;n(!1)},c.complete):Xe.default.createElement("div",{className:"relative"},Xe.default.createElement(ev,{onClick:()=&gt;s(!0)}),Xe.default.createElement(xt,{open:i,onClose:()=&gt;s(!1)},o&amp;&amp;Xe.default.createElement(Rr,{onClick:a},c.delete),Xe.default.createElement(Rr,{onClick:d,disabled:!u},c.markAllAsRead),o&amp;&amp;Xe.default.createElement(Rr,{onClick:l},c.displayByStudent)))},fNe=({editing:r,store:e,onClick:t})=&gt;{let n=Gr(Xt(e)),o=e.userInfo.is_teacher,[i,s]=(0,Xe.useState)(void 0),a=pe(),l=c=&gt;{if(!!r)return{deleting:c===i,onDeleting:p=&gt;s(p?c:void 0),onDelete:()=&gt;{confirm(a.confirmDelete)&amp;&amp;jie(e,n,c)}}};(0,Xe.useEffect)(()=&gt;{r||s(void 0)},[r]);let u=(0,Xe.useMemo)(()=&gt;{var p,h;let c=(h=(p=e.mobilePushes.byCourseId[n])==null?void 0:p.map(f=&gt;e.mobilePushes.byId[f]))!=null?h:[];return vNe(c)},[e.mobilePushes]),d=(0,Xe.useMemo)(()=&gt;{var p,h;let c=(h=(p=e.mobilePushes.byCourseId[n])==null?void 0:p.map(f=&gt;e.mobilePushes.byId[f]))!=null?h:[];return bNe(c)},[e.mobilePushes]);return Xe.default.createElement("div",null,Xe.default.createElement(bue,{store:e,courseId:n,showAllow:!r,submitBadgeMap:u,revealBadgeMap:d,onClick:t,deleteOpts:l}),o&amp;&amp;Xe.default.createElement(mNe,{store:e,courseId:n,showAllow:!r,onClick:t,deleteOpts:l}),Xe.default.createElement(yue,{store:e,courseId:n,showAllow:!r,submitBadgeMap:u,revealBadgeMap:d,onClick:t,deleteOpts:l}))},bue=({store:r,courseId:e,showAllow:t,submitBadgeMap:n,revealBadgeMap:o,onClick:i,deleteOpts:s})=&gt;{let a=pe(),l=new Date,u=xq(r,e,l);return Xe.default.createElement(gn,{className:"submissionListSection",title:a.openForSubmissions,titleColor:Ca.opening},u.length===0?Xe.default.createElement(xr,{className:"submissionDisableCell",disabled:!0},Xe.default.createElement(mn,null,a.noOpenTasks)):u.sort(OE).map(d=&gt;Xe.default.createElement(xr,{key:d.submission_number,className:d.submitted?"":"submissionActiveCell",highlight:d.submission_number===r.submissionNumber,deleteOpts:s?s(d.submission_number):void 0,onClick:()=&gt;i(d),showArrow:t},Xe.default.createElement(Ur,null,Xe.default.createElement(lr,{className:"submissionBoxIcon",src:"/img/Waiting_For_AnswersIcon@2x.png"})),Xe.default.createElement(mn,null,Xe.default.createElement(nr,{className:d.message?"":"grayText",disablePopover:!0},d.message?d.message:sC(d,a.taskExpiryFmt))),d.expiry&amp;&amp;Xe.default.createElement(Ur,null,Xe.default.createElement(gNe,{expiry:d.expiry,isSubmitted:d.submitted})),Xe.default.createElement(Sue,{submissionNumber:d.submission_number,submitBadgeMap:n,revealBadgeMap:o}),Kh(d)&amp;&amp;Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionAnswerRevealedIcon"})),Xe.default.createElement(xue,{isSubmitted:d.submitted,isLate:!1,isTeacher:r.userInfo.is_teacher}))))},mNe=({store:r,courseId:e,showAllow:t,onClick:n,deleteOpts:o})=&gt;{let i=pe(),s=wq(r,e);return s.length===0?null:Xe.default.createElement(gn,{title:i.inPreparation,titleColor:Ca.preparing},s.sort(OE).map(a=&gt;Xe.default.createElement(xr,{key:a.submission_number,highlight:a.submission_number===r.submissionNumber,deleteOpts:o?o(a.submission_number):void 0,onClick:()=&gt;n(a),showArrow:t},Xe.default.createElement(mn,null,Xe.default.createElement(nr,{className:a.message?"":"grayText",disablePopover:!0},a.message?a.message:sC(a,i.taskExpiryFmt))),Kh(a)&amp;&amp;Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionAnswerRevealedIcon"})))))},yue=({store:r,courseId:e,showAllow:t,submitBadgeMap:n,revealBadgeMap:o,messageIfEmpty:i,onClick:s,deleteOpts:a})=&gt;{let l=pe(),u=new Date,d=r.lastSubmissionId.byCourseId[e],c=Tq(r,e,u).filter(f=&gt;f.submission_number&gt;=d),h=Dq(c,(f,m)=&gt;{let g=Ks(f,l.taskExpiryFmt);return m&amp;&amp;(g+=` ${l.closedTaskLabel}`),g});return h.length===0?i?Xe.default.createElement(gn,{className:"submissionListSection"},Xe.default.createElement(xr,{className:"submissionDisableCell",disabled:!0},Xe.default.createElement(mn,null,l.noTasksExpired))):null:Xe.default.createElement(Xe.default.Fragment,null,h.map(({title:f,submissions:m})=&gt;Xe.default.createElement(gn,{className:"submissionListSection",key:f,title:f},m.sort(OE).reverse().map(g=&gt;{let v=!1;return g.expiry&amp;&amp;g.submit_date&amp;&amp;new Date(g.expiry)&lt;new Date(g.submit_date)&amp;&amp;(v=!0),Xe.default.createElement(xr,{key:g.submission_number,deleteOpts:a?a(g.submission_number):void 0,highlight:g.submission_number===r.submissionNumber,onClick:()=&gt;s(g),showArrow:t},Xe.default.createElement(Ur,null,Xe.default.createElement(lr,{className:"submissionBoxIcon",src:"/img/ExpiredTaskIcon@2x.png"})),Xe.default.createElement(mn,null,Xe.default.createElement(nr,{className:g.message?"":"grayText",disablePopover:!0},g.message?g.message:sC(g,l.taskExpiryFmt))),Xe.default.createElement(Sue,{submissionNumber:g.submission_number,submitBadgeMap:n,revealBadgeMap:o}),Kh(g)&amp;&amp;Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionAnswerRevealedIcon"})),Xe.default.createElement(xue,{isSubmitted:g.submitted,isLate:v,isTeacher:r.userInfo.is_teacher}))}))))},Cue=({isSubmitted:r,children:e})=&gt;Xe.default.createElement("span",{className:"submissionStatusText","data-submitted":r},e),gNe=({expiry:r,isSubmitted:e})=&gt;{let t=Me(),n=new su(new Date(r).getTime()-Date.now()),[o,i]=(0,Xe.useState)(n.toRelativeString());return(0,Xe.useEffect)(()=&gt;{let s=new su(new Date(r).getTime()-Date.now());i(s.toRelativeString());let a=dS.subscribe(()=&gt;{let l=new su(new Date(r).getTime()-Date.now());if(l.isPast()){t.reduce(n_());return}i(l.toRelativeString())});return()=&gt;a.close()},[r]),Xe.default.createElement("span",{className:"submissionStatusText","data-submitted":e},o)},vNe=r=&gt;{let e=new Fn(()=&gt;[]);for(let t of r)if(t.type==="submit"){let n=e.get(t.data.submission_number);n.includes(t.data.author_id)||(n.push(t.data.author_id),e.set(t.data.submission_number,n))}return e},bNe=r=&gt;{let e=new Map;for(let t of r)t.type==="reveal_submission_answers"&amp;&amp;e.set(t.data.submission_number,!0);return e},Sue=({submissionNumber:r,submitBadgeMap:e,revealBadgeMap:t})=&gt;{var s,a;let n=Me();if(typeof Xt(n)!="number")return null;if(n.userInfo.is_teacher){let u=((s=e==null?void 0:e.get(r))!=null?s:[]).length;return u&gt;0?Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionUnReadCount"},Xe.default.createElement("div",{className:"submissionUnReadCountInner"},u))):null}else return((a=t==null?void 0:t.get(r))!=null?a:!1)?Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionAnswerDotMark"})):null},xue=({isSubmitted:r,isLate:e,isTeacher:t})=&gt;{let n="";if(r)e?n="submittedLate":n="submitted";else if(!t)n="notSubmitted";else return null;return Xe.default.createElement(Ur,null,Xe.default.createElement("div",{className:"submissionStatusMark "+n}))};async function wue(r){let{userId:e,url:t,eTag:n,onUpdated:o}=r,i=await ie.idb.eTags.getETags(e),s=i[t];if(!s){await ie.idb.eTags.putETags(e,{...i,[t]:n});return}n!==s&amp;&amp;o()}async function Tue(r){let{userId:e,url:t,eTag:n}=r,o=await ie.idb.eTags.getETags(e);await ie.idb.eTags.putETags(e,{...o,[t]:n})}var nh=({title:r,className:e="courseListSection",children:t,...n})=&gt;dt.default.createElement("div",{className:e,...n},dt.default.createElement(gn,{title:r},t)),yNe=({status:r})=&gt;{let e="red",t="",n=pe();return r==="submitted"?(t=n.submitted,e=Ca.submitted):(r==="unsubmitted"||r==="waiting")&amp;&amp;(t=n.openForSubmissions),dt.default.createElement(Ur,null,dt.default.createElement("div",{className:"courseListStatus",style:{color:e,border:`1px solid ${e}`}},t))},CB=({course:r,deleteOpts:e,showArrow:t,dotMark:n,status:o,onClick:i})=&gt;dt.default.createElement(xr,{key:r.course_id,deleteOpts:e,showArrow:t,onClick:i},dt.default.createElement(mn,null,dt.default.createElement(nr,{disablePopover:!0},r.subject_name)),n&amp;&amp;dt.default.createElement(Ur,null,dt.default.createElement("div",{className:"courseListDotMark"})),o&amp;&amp;dt.default.createElement(yNe,{status:o})),kue=({store:r})=&gt;{let e=pe(),[t,n]=$r({editing:!1,addCourseModalOpen:!1}),{editing:o,deletingId:i}=t,s=r.updatingMessages[1]!==void 0,a=r.courses.joinedCourseIds;jn(()=&gt;{a.length===0&amp;&amp;jk(r)}),(0,xP.useEffect)(()=&gt;{r.fetchStates[nt.courses()]==="done"&amp;&amp;a.length&gt;0&amp;&amp;Qie(r,a)},[r.fetchStates[nt.courses()]]),(0,xP.useEffect)(()=&gt;{a.length===0&amp;&amp;o&amp;&amp;n({editing:!1})},[a]),(0,xP.useEffect)(()=&gt;{r.pageVisible&amp;&amp;Zp(r)},[r.pageVisible]);let l=b=&gt;{r.reduce(ug(b),Zu({type:"noteList",courseId:b}))},u=()=&gt;{r.reduce(Zu({type:"unassignedCourseList"}))},d=()=&gt;{r.reduce(Zu({type:"closedYearList"}))},c=b=&gt;{if(!!o)return{deleting:b.course_id===i,onDeleting:C=&gt;{n({deletingId:C?b.course_id:void 0})},onDelete:()=&gt;{confirm(e.confirmDelete)?zie(r,b):n({deletingId:void 0})}}},p=b=&gt;{let C=r.submissionMessages.byCourseId[b];if((C==null?void 0:C.submission_messages.not_submitted.length)&gt;0)return r.userInfo.is_teacher?"waiting":"unsubmitted";if((C==null?void 0:C.submission_messages.submitted.length)&gt;0)return r.userInfo.is_teacher?"waiting":"submitted"},h=a.map(b=&gt;r.courses.byId[b]),f=Nb(h),m=r.fetchStates[nt.courses()],g=b=&gt;{var C;return(C=r.mobilePushes.byCourseId[b])==null?void 0:C.some(x=&gt;{var y,S,T;return((y=r.mobilePushes.byId[x])==null?void 0:y.type)==="submit"||((S=r.mobilePushes.byId[x])==null?void 0:S.type)==="share"||((T=r.mobilePushes.byId[x])==null?void 0:T.type)==="comment_on_submission_answer"})},v=!fG.test(r.userInfo.school_name);return dt.default.createElement(rr,null,dt.default.createElement(Et,null,dt.default.createElement(Ft,null,dt.default.createElement(Mt,null),dt.default.createElement(Vt,null,v?dt.default.createElement(nr,null,r.userInfo.school_name,r.userInfo.is_graduated&amp;&amp;dt.default.createElement("span",{className:"courseListTitleGraduated"},"(",e.graduated,")")):e.subjectTitle),dt.default.createElement(jt,null,r.userInfo.is_teacher&amp;&amp;dt.default.createElement(gt,{disabled:m==="fetching"||s,onClick:()=&gt;{n({editing:!o,deletingId:void 0})}},o?e.complete:e.edit))),m==="fetching"&amp;&amp;dt.default.createElement(_t,{absolute:"bottom"})),dt.default.createElement(ur,null,m instanceof Error&amp;&amp;dt.default.createElement("div",{className:"drawerContentSubDesc"},e.courseFetchErrorOccurred),m==="done"&amp;&amp;a.length===0&amp;&amp;dt.default.createElement("div",{className:"drawerContentSubDesc"},r.userInfo.is_teacher?dt.default.createElement(dt.default.Fragment,null,dt.default.createElement("p",null,e.teacherNoJoinedCourseTitle1),dt.default.createElement("p",null,e.noJoinedCourseTitle2),dt.default.createElement("p",{className:"guideText bold"},e.addCourseDesc)):r.userInfo.is_graduated?dt.default.createElement(dt.default.Fragment,null,dt.default.createElement("p",null,e.graduateMsg),dt.default.createElement("div",{className:"courseListFixedSpacer"})):dt.default.createElement(dt.default.Fragment,null,dt.default.createElement("p",null,e.enterClassCodeToJoinClass),dt.default.createElement("p",{className:"guideText bold"},e.endedCoursesDesc))),m==="done"&amp;&amp;a.length&gt;0&amp;&amp;dt.default.createElement(dt.default.Fragment,null,dt.default.createElement("div",{className:"courseListFixedSpacer"}),f.map(b=&gt;dt.default.createElement(nh,{title:b[0].user_group_name,key:b[0].user_group_id},b.sort(hP).map(C=&gt;dt.default.createElement(CB,{key:C.course_id,course:C,deleteOpts:c(C),showArrow:!o,dotMark:g(C.course_id),status:p(C.course_id),onClick:()=&gt;l(C.course_id)}))))),r.userInfo.is_teacher&amp;&amp;dt.default.createElement(nC,{onClick:()=&gt;n({addCourseModalOpen:!0}),disabled:o},e.addCourseLabel),!r.userInfo.is_teacher&amp;&amp;!r.userInfo.is_graduated&amp;&amp;dt.default.createElement(nC,{onClick:()=&gt;Nle(r),disabled:o},e.joinCourseBtnLabel),dt.default.createElement(nh,null,r.userInfo.is_teacher&amp;&amp;dt.default.createElement(xr,{onClick:u,showArrow:!0},dt.default.createElement(uC,{iconName:"courseListOtherTeacherCoursesIcon"}),dt.default.createElement(mn,null,e.otherTeachersCoursesTitle)),dt.default.createElement(xr,{onClick:d,showArrow:!0},dt.default.createElement(uC,{iconName:"courseListEndedCoursesIcon"}),dt.default.createElement(mn,null,e.endedCoursesTitle))),dt.default.createElement("div",{className:"courseListFixedSpacer"}),dt.default.createElement(nh,null,dt.default.createElement(xr,{onClick:()=&gt;l("self-study"),showArrow:!0},dt.default.createElement(uC,{iconName:"courseListSelfStudyIcon"}),dt.default.createElement(mn,null,e.selfStudy))),dt.default.createElement(CNe,null)),dt.default.createElement(eo,{open:t.addCourseModalOpen,onClose:()=&gt;n({addCourseModalOpen:!1}),transition:"up"},dt.default.createElement(Ble,{store:r,onClose:()=&gt;n({addCourseModalOpen:!1})})))},SB=({store:r,message:e,showArrow:t,onClickCell:n,closeDialog:o,onClickOtherTeacher:i})=&gt;{let s=pe(),a=r.courses.joinedCourseIds;jn(()=&gt;{a.length===0&amp;&amp;jk(r)});let l=a.map(c=&gt;r.courses.byId[c]),u=Nb(l),d=r.fetchStates[nt.courses()];return dt.default.createElement(rr,{round:!r.screen.isMobile},dt.default.createElement(Et,null,dt.default.createElement(Ft,null,dt.default.createElement(Mt,null,o&amp;&amp;dt.default.createElement(gt,{onClick:o},s.cancel)),dt.default.createElement(Vt,null,s.subjectTitle),dt.default.createElement(jt,null)),d==="fetching"&amp;&amp;dt.default.createElement(_t,{absolute:"bottom"})),dt.default.createElement(ur,null,dt.default.createElement("div",{className:"drawerContentDesc"},e),d instanceof Error&amp;&amp;dt.default.createElement("div",{className:"drawerContentSubDesc"},s.courseFetchErrorOccurred),d==="done"&amp;&amp;a.length&gt;0&amp;&amp;dt.default.createElement(dt.default.Fragment,null,dt.default.createElement("div",{className:"courseListFixedSpacer"}),u.map(c=&gt;dt.default.createElement(nh,{title:c[0].user_group_name,key:c[0].user_group_id},c.sort(hP).map(p=&gt;dt.default.createElement(CB,{key:p.course_id,course:p,showArrow:t,onClick:()=&gt;n(p.course_id)}))))),dt.default.createElement(nh,null,r.userInfo.is_teacher&amp;&amp;dt.default.createElement(xr,{onClick:i,showArrow:!0},dt.default.createElement(uC,{iconName:"courseListOtherTeacherCoursesIcon"}),dt.default.createElement(mn,null,s.otherTeachersCoursesTitle))),dt.default.createElement(nh,null,dt.default.createElement(xr,{onClick:()=&gt;n("self-study"),showArrow:t},dt.default.createElement(uC,{iconName:"courseListSelfStudyIcon"}),dt.default.createElement(mn,null,s.selfStudy)))))},uC=({iconName:r,dotMark:e,...t})=&gt;dt.default.createElement(Ur,{className:"relative"},dt.default.createElement("div",{className:`courseListIcon ${r}`,...t}),e&amp;&amp;dt.default.createElement("div",{className:"courseListDotMark courseListDotMarkTopRightPosition"})),CNe=()=&gt;{let r=Me(),[e,t]=(0,dt.useState)(!1),n=w4(r.locale,r.userInfo.school_country,r.userInfo.is_teacher),o=r.userInfo.user_id,i=r.newsSiteETag;(0,xP.useEffect)(()=&gt;{!i||wue({userId:o,url:n,eTag:i,onUpdated:()=&gt;t(!0)})},[]);let s=()=&gt;{e&amp;&amp;i&amp;&amp;Tue({userId:o,url:n,eTag:i}),t(!1)},a=r.userInfo.is_teacher&amp;&amp;e,l=a;return dt.default.createElement(dt.default.Fragment,null,dt.default.createElement(nh,{"data-combined":l},r.userInfo.is_teacher&amp;&amp;dt.default.createElement(SNe,null),!a&amp;&amp;dt.default.createElement(Due,{dotMark:e,onNewsChecked:s})),l&amp;&amp;dt.default.createElement(nh,{className:"courseListOtherSitesStickySection"},a&amp;&amp;dt.default.createElement(Due,{dotMark:e,onNewsChecked:s})))},Due=({dotMark:r,onNewsChecked:e})=&gt;{let t=Me(),n=pe();return dt.default.createElement(xr,{onClick:()=&gt;{let i=w4(t.locale,t.userInfo.school_country,t.userInfo.is_teacher);e(),window.open(i)},showArrow:!1},dt.default.createElement(uC,{iconName:"courseListNewsIcon",dotMark:r,"data-on":r}),dt.default.createElement(mn,null,n.loiLoNews))},SNe=()=&gt;{let r=Me(),e=pe();return dt.default.createElement(xr,{onClick:()=&gt;{let n=CK(r.locale,r.userInfo.school_country);window.open(n)},showArrow:!1},dt.default.createElement(uC,{iconName:"courseListLessonPlanIcon"}),dt.default.createElement(mn,null,e.lessonPlans))};var Eue=oe(ve()),_ue=oe(ve());var xB=oe(bS());async function RG({lnsClient:r,id:e,is_shared:t,signal:n}){let o;t?o=await r.downloadSnapshot({noteId:e,protocolVersion:aa,signal:n}).then(Cp):o=await r.downloadNote(e,n).then(Cp);let i=Dc(o.note.data.frames);return await r.exportNote({noteId:e,assetUUIDs:i,signal:n})}async function Pue({lnsClient:r,notes:e,signal:t,onProgress:n,appVersion:o}){if(e.length===0)return{type:"error",error:new Error("notes empty")};try{let i=1,s=e.length,a=[];for(let{id:c,is_shared:p}of e){n(i++,s);let h=await RG({id:c,is_shared:p,signal:t,lnsClient:r});a.push([c,h])}let l=new xB.default;for(let[c,p]of a)l.file(`${c}.loilonote`,p);let u={creator:{app:"web",version:o},notes:e.map(({id:c,name:p})=&gt;({id:c,name:p}))};l.file("structure.json",JSON.stringify(u));let d=await l.generateAsync({type:"blob",compression:"DEFLATE"});return{type:"success",value:d}}catch(i){return t!=null&amp;&amp;t.aborted?{type:"cancelled"}:{type:"error",error:i}}}async function Aue(r){var t,n;let e=[];for(let o of r)if(o.name.endsWith(".loilonote")){let s=await((t=(await xB.default.loadAsync(o)).file("metadata"))==null?void 0:t.async("string"));if(!s)throw new Error("metadata not found");let a=JSON.parse(s);e.push({filename:a.name,load:()=&gt;Promise.resolve(o)})}else if(o.name.endsWith(".loilonotes")){let i=await xB.default.loadAsync(o),s=await((n=i.file("structure.json"))==null?void 0:n.async("string"));if(!s)throw new Error("structure.json not found");let a=JSON.parse(s);for(let{id:l,name:u}of a.notes){let d=`${l}.loilonote`,c=i.file(d);c&amp;&amp;e.push({filename:u,load:()=&gt;c.async("blob")})}}return e}async function Iue({lnsClient:r,courseId:e,importers:t,signal:n,onProgress:o,onImported:i}){let s=1,a=[];try{for await(let l of t){o(s++);let u=await l.load(),d=await r.importNote({courseId:e,file:u,signal:n});a.push(d),i(d)}return{type:"success",value:a}}catch(l){return n!=null&amp;&amp;n.aborted?{type:"cancelled"}:{type:"error",error:l}}}var qf=oe(ve());var Cw=({title:r,message:e,cancelMessage:t,onCancel:n})=&gt;qf.default.createElement(h0,null,qf.default.createElement("div",{className:"uiDialogContent"},qf.default.createElement(_t,null),qf.default.createElement("div",{className:"uiDialogTitle"},r),e&amp;&amp;qf.default.createElement("div",{className:"uiDialogMessage"},qf.default.createElement("div",{className:"uiDialogSection"},e)),qf.default.createElement(la,null,t&amp;&amp;n&amp;&amp;qf.default.createElement(Ui,{className:"uiDialogCancelButton",onClick:n},t))));var Fue=({courseId:r,noteIds:e,onFinish:t})=&gt;{let n=pe(),o=Me(),[i,s]=$r({count:1,ctrl:new AbortController}),a=()=&gt;{i.ctrl.abort()};return(0,_ue.useEffect)(()=&gt;{let l=ls(o,r),{lnsClient:u}=ie,{signal:d}=i.ctrl;if(e.length===1){let[c]=e,{name:p,is_shared:h}=o.notes.byId[c],f=La(`${l}_${p}`,".loilonote");RG({id:c,is_shared:h,signal:d,lnsClient:u}).then(m=&gt;{t({type:"success",value:new File([m],f,{type:"application/octet-stream"})})}).catch(m=&gt;{d.aborted?t({type:"cancelled"}):t({type:"error",error:m})})}else{let c=h=&gt;{s({count:h})},p=e.map(h=&gt;o.notes.byId[h]).sort((h,f)=&gt;h.id-f.id);Pue({lnsClient:u,notes:p,signal:d,onProgress:c,appVersion:o.appVersion}).then(async h=&gt;{if(h.type==="cancelled")t(h);else if(h.type==="error")t(h);else{let f=ls(o,r),m=La(`${f}`,".loilonotes");t({type:"success",value:new File([h.value],m,{type:"application/octet-stream"})})}})}return()=&gt;a()},[e]),Eue.default.createElement(Cw,{title:`${n.exportingNotes}
(${i.count}/${e.length})`,cancelMessage:n.cancel,onCancel:a})};var Ii=oe(ve()),LG=oe(ve()),Mue=oe(Wr());var wB=({courseId:r,files:e,onImported:t,onClose:n,onFinish:o})=&gt;{let i=pe(),[s,a]=$r({ctrl:new AbortController,count:1});(0,LG.useEffect)(()=&gt;()=&gt;s.ctrl.abort(),[]);let l=d=&gt;{a({importingNotes:d.length}),Iue({lnsClient:ie.lnsClient,courseId:r,importers:d,signal:s.ctrl.signal,onProgress:c=&gt;a({count:c}),onImported:t}).then(o)},u=()=&gt;s.ctrl.abort();return Ii.default.createElement(Ii.default.Fragment,null,Ii.default.createElement(eo,{open:!s.importingNotes,onClose:n},Ii.default.createElement(xNe,{onClose:n,files:e,onImport:l}),";"),s.importingNotes&amp;&amp;Ii.default.createElement(Cw,{title:`${i.importingNotes}
(${s.count}/${s.importingNotes})`,cancelMessage:i.cancel,onCancel:u}))},xNe=({files:r,onClose:e,onImport:t})=&gt;{let[n,o]=$r({selections:[]}),i=pe(),s=Me();(0,LG.useEffect)(()=&gt;{Aue(r).then(u=&gt;{o({importers:u,selections:u})}).catch(u=&gt;{var d;s.reduce(me(24,{title:i.errorOccurred,message:(d=u==null?void 0:u.message)!=null?d:"",okMessage:i.close,onOk:()=&gt;s.reduce(me(24,void 0))})),e()})},[r]);let a=u=&gt;({selected:n.selections.includes(u),onSelect:d=&gt;{let c=d?n.selections.concat(u):n.selections.filter(p=&gt;p!==u);o({selections:c})}}),l=n.selections.length&gt;0?(0,Mue.sprintf)(i.importNotes,n.selections.length,he.get().pluralSafeSuffix(n.selections.length)):i.chooseNoteToImport;return Ii.default.createElement(rr,{round:!s.screen.isMobile},Ii.default.createElement(Et,null,Ii.default.createElement(Ft,null,Ii.default.createElement(Mt,null,Ii.default.createElement(gt,{onClick:e},i.cancel)),Ii.default.createElement(Vt,null,i.import),Ii.default.createElement(jt,null,Ii.default.createElement(gt,{disabled:n.selections.length===0,onClick:()=&gt;t(n.selections)},i.start)))),Ii.default.createElement(ur,null,n.importers!=null&amp;&amp;Ii.default.createElement(Ii.default.Fragment,null,Ii.default.createElement(js,{style:{color:"black"}},l),Ii.default.createElement(js,null,Ii.default.createElement(gt,{style:{paddingLeft:15},onClick:()=&gt;{n.selections.length&gt;0?o({selections:[]}):o({selections:n.importers})}},n.selections.length&gt;0?i.releaseAll:i.selectAll)),Ii.default.createElement(gn,null,n.importers.map((u,d)=&gt;Ii.default.createElement(xr,{selectOpts:a(u),key:d},u.filename))))))};var _v=r=&gt;r&amp;&amp;r.hasOwnProperty("card_ids"),OG=r=&gt;r&amp;&amp;r.hasOwnProperty("card_ids");function Nue(r){return r.hasOwnProperty("root_group_type")}function Bue(r){switch(r){case 0:return"private";case 1:return"school-all";case 2:return"school-teacher";case 3:case 4:return"school-class";case 5:return"district-all";case 6:return"district-teacher"}return"private"}function Rue(r,e,t){var i;let n=e==="self-study"?r.notes.selfStudyIds:r.notes.byCourseId[e],o=(i=n==null?void 0:n.map(s=&gt;r.notes.byId[s]))!=null?i:[];return UG(o,r,e,t)}function UG(r,e,t,n){let o=nt.notes(t),i=e.fetchStates[o];return{courseId:t,fetchState:i,notes:r,onCopy({destCourseId:s,noteIds:a,copySuffix:l}){dle(e,{noteIds:a,destCourseId:s,suffix:l}).then(()=&gt;{dP(e,s),n({copyModalOpen:!1,editMode:void 0,selectedItems:[]})})},onCreateStandard(s){let a=Ey(0).toJSON();ZN(e,{name:s,courseId:t,note:a})},onCreateSharedOld(s){Ee(typeof t=="number"),KN(e,{name:s,courseId:t})},isEditable(s,a){let l=e.userInfo.user_id;switch(a){case"rename":case"delete":return s.user_id===l;case"manage-member":return s.is_shared;case"share":return!s.is_shared;default:return!0}},onDelete(s){lle(e,{noteId:s.id,title:s.name,courseId:t})},onFetch(){dP(e,t)},onOpen(s){let a=s.id,l=t;_v(s)&amp;&amp;s.course_id!==t&amp;&amp;(l=s.course_id||"self-study",e.reduce(ug(l),Zu({type:"noteList",courseId:l}))),s.is_shared?(Ee(l!=="self-study"),rw(e,{courseId:l,noteId:a,pushState:!0})):iw(e,{courseId:l,noteId:a,pushState:!0})},onRename(s){ale(e,s)},onExport(s){n({exportingNotes:void 0,selectedItems:[],editMode:void 0}),s.type!=="cancelled"&amp;&amp;(s.type==="error"?TB(e,23,s.error):Ol(s.value,s.value.name))},onImport(s){let a=24;n({importingNotes:void 0});let l=he.get().strings;s.type==="success"?e.reduce(Jt({type:"normal",text:l.imported})):s.type==="error"&amp;&amp;TB(e,a,s.error)}}}function TB(r,e,t){let n=he.get().strings;if(Je.catchError(t))return;fe.error(t);let{message:o,unknownError:i}=ot(t,{default:n.errorOccurred,[403]:n.api403ErrorMsg,[404]:n.api404ErrorMsg});r.reduce(we(e,null),me(e,{title:n.errorOccurred,message:o,unknownError:i,okMessage:n.okay,onOk:()=&gt;r.reduce(me(e,void 0))}))}var vs=oe(ve());var Lue=oe(Wr());var zG=({store:r,forYear:e})=&gt;vs.default.createElement(Oue,{store:r,onClickCell:o=&gt;{r.reduce(ug(o),Zu({type:"noteList",courseId:o}))},onClickBack:()=&gt;{r.reduce(Ob())},forYear:e,isDialog:!1,showArrow:!0}),DB=({store:r,showArrow:e,onClickCell:t,onClickBack:n})=&gt;vs.default.createElement(Oue,{store:r,onClickCell:t,onClickBack:n,isDialog:!0,showArrow:e}),Oue=({store:r,onClickCell:e,onClickBack:t,isDialog:n,showArrow:o,forYear:i})=&gt;{let s=i?r.courses.byYear[i].school:r.courses.otherTeacherCourseIds;jn(()=&gt;{s.length===0&amp;&amp;Uie(r)});let a=s.map(p=&gt;r.courses.byId[p]),l=Nb(a),u=i?r.fetchStates[nt.closedCoursesByYear(i)]:r.fetchStates[nt.otherTeacherCourses()],d=pe(),c=i?(0,Lue.sprintf)(d.year,i):"";return vs.default.createElement(rr,{round:n&amp;&amp;!r.screen.isMobile},vs.default.createElement(Et,null,vs.default.createElement(Ft,null,vs.default.createElement(Mt,null,vs.default.createElement(gt,{onClick:t},d.back)),vs.default.createElement(Vt,null,vs.default.createElement(bd,null,i&amp;&amp;vs.default.createElement(Ml,null,c),vs.default.createElement(vd,null,d.otherTeachersCoursesTitle))),vs.default.createElement(jt,null)),u==="fetching"&amp;&amp;vs.default.createElement(_t,{absolute:"bottom"})),vs.default.createElement(ur,null,u instanceof Error&amp;&amp;vs.default.createElement("div",{className:"drawerContentSubDesc"},d.courseFetchErrorOccurred),u==="done"&amp;&amp;s.length===0&amp;&amp;vs.default.createElement("div",{className:"drawerContentSubDesc"},d.otherTeachersCourseNotFound),u==="done"&amp;&amp;s.length&gt;0&amp;&amp;vs.default.createElement("div",null,l.map(p=&gt;vs.default.createElement(nh,{key:p[0].user_group_id,title:p[0].user_group_name},p.sort((h,f)=&gt;h.subject_name.localeCompare(f.subject_name)).map(h=&gt;vs.default.createElement(CB,{key:h.course_id,course:h,showArrow:o,onClick:()=&gt;e(h.course_id)})))))))};var Qi=oe(ve());var HG=mg(),Uue=({store:r,courseId:e,state:t,dispatch:n})=&gt;{let[o,i]=(0,Qi.useState)([]),s=UG(o,r,e,n);return Qi.default.createElement(Qi.default.Fragment,null,Qi.default.createElement(wNe,{update:i,courseId:e,dispatch:n}),t.showSearchedContents&amp;&amp;Qi.default.createElement($l.Provider,{value:{state:t,dispatch:n,props:s}},Qi.default.createElement(ur,null,Qi.default.createElement(GG,{searchModal:!0}),Qi.default.createElement(WG,null))))},kB="",wNe=({update:r,dispatch:e})=&gt;{let{state:t}=(0,Qi.useContext)($l),n=ie.noteSearchClient;jn(()=&gt;{n.updater(c=&gt;{c.request_id===kB&amp;&amp;(e({loading:!1}),r(c.hits))}).connect()});let o=c=&gt;(kB=Sr(),{text_query:c,include_shared:!0,request_id:kB});nd(()=&gt;{n.close()});let i=c=&gt;{c?(e({loading:!0}),c===t.searchQuery?HG.set(()=&gt;{n.send(o(c))},1e3):(e({searchQuery:c,showSearchedContents:!0}),HG.set(()=&gt;{n.send(o(c))},250))):(e({loading:!1}),kB="",HG.clear(),e({searchQuery:"",showSearchedContents:!1}))},s=c=&gt;{c.preventDefault(),i(t.searchQuery)},a=c=&gt;{c.key=="Enter"&amp;&amp;s(c)},l=c=&gt;{let p=c.target.value;i(p)},u=()=&gt;{i(t.searchQuery)},d=pe();return Qi.default.createElement(Qi.default.Fragment,null,Qi.default.createElement("form",{onSubmit:s},Qi.default.createElement("div",{className:"searchBoxContainer noteSearchContainer"},Qi.default.createElement("div",{className:"searchBoxWrapper"},Qi.default.createElement("input",{type:"text",id:"noteSearch",className:"searchBox",value:t.searchQuery,placeholder:d.searchNote,onChange:l,onKeyDown:a,onFocus:u,autoComplete:"off"})),Qi.default.createElement("button",{type:"button",className:"searchBoxButton",onClick:s},Qi.default.createElement("div",{className:"searchIconWrapper"},Qi.default.createElement(lr,{className:"searchIcon",src:"/img/SearchIcon.png",alt:"search icon"}))))))};var PB=oe(ve()),zue=oe(ve()),AB=({highlight:r})=&gt;{let e=r.split("&lt;lnsHits&gt;"),t=e.shift();return PB.default.createElement("span",null,t,e.map((n,o)=&gt;{let i=n.split("&lt;/lnsHits&gt;");return PB.default.createElement(zue.Fragment,{key:o},PB.default.createElement("span",{className:"searchHighlight"},i[0]),i[1])}))};var $l=st.default.createContext({state:{popoverOpen:!1,memberDialogId:void 0,memberDialogOpen:!1,copyModalOpen:!1,selectedItems:[],loading:!1,showSearchedContents:!1,searchQuery:""},props:{courseId:0,onCreateSharedOld(r){},onCreateStandard(r){},fetchState:null,onFetch(){},isEditable(r,e){return!1},onDelete(){},onOpen(r){},onRename(r){},onCopy(r){},onImport(){},onExport(){},notes:[]},dispatch:()=&gt;{}}),Hue=({courseId:r})=&gt;{let e=Me(),[t,n]=$r({popoverOpen:!1,copyModalOpen:!1,memberDialogOpen:!1,selectedItems:[],loading:!1,showSearchedContents:!1,searchQuery:""}),o=Rue(e,r,n);(0,Qs.useEffect)(()=&gt;{o.fetchState==null&amp;&amp;o.onFetch()},[o.fetchState]);let{editMode:i}=t,s=pe(),a;i==="copy"?a=s.chooseNoteToCopy:i==="rename"?a=s.chooseNoteToRename:i==="manage-member"?a=s.chooseNoteToManageMember:i==="export"?a=s.chooseNoteToExport:i==="share"&amp;&amp;(a=s.chooseNoteToShare);let l=()=&gt;n({memberDialogOpen:!1}),u=d=&gt;{n(d==="cancel"?{sharingNote:void 0}:{sharingNote:void 0,editMode:void 0})};return st.default.createElement($l.Provider,{value:{state:t,dispatch:n,props:o}},st.default.createElement(rr,null,st.default.createElement(kNe,null),e.userPreference.experimentalFeatures.enableSearch&amp;&amp;st.default.createElement(Uue,{store:e,courseId:r,state:t,dispatch:n}),st.default.createElement("div",{style:{display:t.showSearchedContents?"none":"block"}},st.default.createElement(ur,null,a&amp;&amp;st.default.createElement("div",{className:"drawerContentDesc"},a),st.default.createElement(GG,{searchModal:!1}),st.default.createElement(WG,null))),st.default.createElement(ENe,{copySuffix:s.duplicateNoteNameSuffix}),st.default.createElement(eo,{open:t.memberDialogOpen,onClose:l,onExited:()=&gt;n({memberDialogId:void 0}),transition:"up"},t.memberDialogId&amp;&amp;(K0(e)?st.default.createElement(IB,{courseId:Gr(r),noteId:t.memberDialogId,onClose:l,showStatus:!1}):st.default.createElement(nB,{courseId:Gr(r),noteId:t.memberDialogId,onClose:l})))),t.exportingNotes&amp;&amp;st.default.createElement(Fue,{courseId:r,noteIds:t.exportingNotes,onFinish:o.onExport}),t.importingNotes&amp;&amp;st.default.createElement(wB,{courseId:r,files:t.importingNotes,onImported:d=&gt;e.reduce(hp(r,[d])),onClose:()=&gt;n({importingNotes:void 0}),onFinish:o.onImport}),st.default.createElement(eo,{open:!!t.sharingNote,onClose:()=&gt;n({sharingNote:void 0})},t.sharingNote&amp;&amp;(K0(e)?st.default.createElement(Wue,{noteId:t.sharingNote.id,courseId:Gr(r),onClose:u}):st.default.createElement(ble,{courseId:Gr(r),noteId:t.sharingNote.id,onClose:u}))))},GG=({searchModal:r})=&gt;{let{state:e,props:t}=(0,Qs.useContext)($l),n=!e.editMode||e.editMode==="delete",o=e.editMode==="copy"||e.editMode==="export";return st.default.createElement(st.default.Fragment,null,n&amp;&amp;st.default.createElement(DG,{notes:t.notes,onCreateStandard:t.onCreateStandard,onCreateSharedOld:t.onCreateSharedOld,courseId:t.courseId,disabled:t.fetchState!=="done"||e.editMode==="delete"}),st.default.createElement(lw,null,st.default.createElement(cw,null,o&amp;&amp;st.default.createElement(DNe,null),st.default.createElement(No,null),t.notes.length&gt;0&amp;&amp;!r&amp;&amp;st.default.createElement(TG,null))))},TNe=lB(),TG=({disabled:r})=&gt;{let e=["updatedAt","createdAt"],t=Me(),n=pe(),o=t.userPreference.noteListSortOrder,i=(a,l)=&gt;{t.reduce(Wi({noteListSortOrder:{$set:{key:a,direction:l}}}))},s=a=&gt;a==="updatedAt"?n.sortUpdateDateOrder:n.sortCreateDateOrder;return st.default.createElement(TNe,{disabled:r,sortKeys:e,sortKey:o.key,sortDirection:o.direction,titleForKey:s,onChange:i})},DG=({notes:r,onCreateStandard:e,onCreateShared:t,onCreateSharedOld:n,courseId:o,disabled:i,openAfterCreated:s=!0})=&gt;{let a=pe(),[l,u]=(0,Qs.useState)(!1),[d,c]=(0,Qs.useState)(!1),p=Me(),h=async()=&gt;{J4(p,o)?u(!0):m()},f=()=&gt;{let v=sB(r.map(C=&gt;C.name),a),b=ba(a.createNewNote,{defaultValue:v,maxLength:255});if(b!==null)return b},m=()=&gt;{let v=f();v&amp;&amp;e(v),u(!1)},g=()=&gt;{if(K0(p))c(!0);else{let v=f();v&amp;&amp;n(v)}u(!1)};return st.default.createElement("div",null,st.default.createElement(nC,{style:{marginBottom:14},disabled:i,onClick:h},a.createNewNote),st.default.createElement(xt,{open:l,onClose:()=&gt;u(!1)},st.default.createElement(Ra,null,st.default.createElement(Rr,{role:"button",onClick:m},a.standardNote),st.default.createElement(Rr,{role:"button",onClick:g},a.sharedNote))),d&amp;&amp;st.default.createElement(eo,{open:!0,onClose:()=&gt;{c(!1)}},st.default.createElement(Gue,{courseId:Gr(o),openAfterCreated:s,onClose:v=&gt;{v.type==="done"&amp;&amp;(t==null||t(v.noteInfo)),c(!1)}})))},DNe=()=&gt;{let r=pe(),{state:e,props:t,dispatch:n}=(0,Qs.useContext)($l),o=e.selectedItems.length===t.notes.length,i=()=&gt;{n(o?{selectedItems:[]}:{selectedItems:t.notes.filter(a=&gt;t.isEditable(a,e.editMode)).map(a=&gt;a.id)})},s=o?r.releaseAll:r.selectAll;return st.default.createElement(gt,{disabled:t.notes.length===0,onClick:i},s)},kNe=()=&gt;{let{state:r,dispatch:e,props:t}=(0,Qs.useContext)($l),n=Me(),o=pe(),{editMode:i,popoverOpen:s}=r,a=!!(n.updatingMessages[4]||n.updatingMessages[6]||n.updatingMessages[5]),l=au(n,t.courseId),u=ls(n,t.courseId),d=()=&gt;{n.reduce(Ob())},c=()=&gt;{let h=document.createElement("input");h.type="file",h.accept=".loilonote,.loilonotes",h.multiple=!0,h.onchange=()=&gt;{!h.files||h.files.length===0||e({popoverOpen:!1,importingNotes:Array.from(h.files)})},h.click()},p=h=&gt;{h==="import"?c():e({editMode:h,popoverOpen:!1})};return st.default.createElement(Et,null,st.default.createElement(Ft,null,st.default.createElement(Mt,null,i?st.default.createElement(PNe,null):st.default.createElement(gt,{onClick:d,disabled:a},o.back)),st.default.createElement(Vt,null,st.default.createElement(bd,null,st.default.createElement(Ml,{enablePopover:!0},l!=null?l:""),st.default.createElement(vd,{enablePopover:!0},u!=null?u:""))),st.default.createElement(jt,null,st.default.createElement("div",{className:"relative"},st.default.createElement(ANe,null),st.default.createElement(xt,{open:s,onClose:()=&gt;e({popoverOpen:!1})},st.default.createElement(INe,{onSelect:p}))))),(t.fetchState==="fetching"||r.loading)&amp;&amp;st.default.createElement(_t,{absolute:"bottom"}))},WG=()=&gt;{let r=Me(),e=pe(),{state:t,dispatch:n,props:o}=(0,Qs.useContext)($l),{notes:i,fetchState:s}=o,{editMode:a,selectedItems:l,deletingId:u}=t,d=r.userPreference.noteListSortOrder,c=m=&gt;{if(a==="rename"){let g=ba(e.renameNoteDialogMsg,{defaultValue:m.name,maxLength:255});g!==null&amp;&amp;o.onRename({noteId:m.id,prevName:m.name,nextName:g})}else a==="share"?n({sharingNote:m}):a==="manage-member"?n({memberDialogOpen:!0,memberDialogId:m.id}):(_v(m),o.onOpen(m))},p=m=&gt;{if(!!o.isEditable(m,"delete")&amp;&amp;a==="delete")return{deleting:u===m.id,onDeleting:g=&gt;{n({deletingId:g?m.id:void 0})},onDelete:()=&gt;{confirm(e.confirmDelete)&amp;&amp;o.onDelete(m)}}},h=m=&gt;{if(a==="copy"||a==="export")return{selected:l.findIndex(g=&gt;g===m.id)&gt;-1,onSelect:g=&gt;{n(g?{selectedItems:[...l,m.id]}:{selectedItems:l.filter(v=&gt;v!==m.id)})}}},f=i;return t.showSearchedContents||(f=(0,Qs.useMemo)(()=&gt;Array.from(i).sort(Y2(d)),[i,d.key,d.direction])),st.default.createElement(gn,null,s instanceof Error&amp;&amp;st.default.createElement("div",{className:"drawerContentSubDesc"},e.noteFetchErrorOccurred),t.showSearchedContents&amp;&amp;i.length===0&amp;&amp;st.default.createElement("div",{className:"drawerContentSubDesc"},e.noMatchesFound),!t.showSearchedContents&amp;&amp;s==="done"&amp;&amp;i.length===0&amp;&amp;st.default.createElement("div",{className:"drawerContentSubDesc"},e.noNotesFound),s==="done"&amp;&amp;f.map(m=&gt;{let g=t.editMode?!o.isEditable(m,t.editMode):!1;return st.default.createElement(kG,{key:m.id,note:m,disabled:g,checked:r.desktop&amp;&amp;r.desktop.noteId===m.id,onClick:()=&gt;c(m),deleteOpts:p(m),selectOpts:h(m)})}))},kG=({note:r,children:e,...t})=&gt;{let n=pe(),o="";return r.updated_at&amp;&amp;(o=Ks(r.updated_at,n.fileUpdatedAtDateTimeFmt)),st.default.createElement(xr,{...t},st.default.createElement(Ur,null,st.default.createElement("div",{className:"drawerNoteListNoteIcon"})),st.default.createElement(cP,null,st.default.createElement(MNe,{note:r}),st.default.createElement(_Ne,{note:r}),_v(r)&amp;&amp;st.default.createElement(FNe,{note:r,updatedAt:o}),!_v(r)&amp;&amp;st.default.createElement(th,null,o)),r.is_shared&amp;&amp;st.default.createElement(Ur,null,st.default.createElement("div",{className:"noteListSharedNoteIcon"})))},PNe=()=&gt;{let{state:r,dispatch:e}=(0,Qs.useContext)($l),t=pe();return r.editMode==="copy"||r.editMode==="export"?st.default.createElement(gt,{onClick:()=&gt;e({editMode:void 0,selectedItems:[]})},t.back):null},ANe=()=&gt;{let{state:r,dispatch:e,props:t}=(0,Qs.useContext)($l),n=pe();if(r.editMode){if(r.editMode==="delete"||r.editMode==="rename"||r.editMode==="manage-member"||r.editMode==="share")return st.default.createElement(gt,{onClick:()=&gt;{e({editMode:void 0,deletingId:void 0})}},n.complete);if(r.editMode==="copy")return st.default.createElement(gt,{disabled:r.selectedItems.length===0,onClick:()=&gt;e({copyModalOpen:!0})},n.copy);if(r.editMode==="export")return st.default.createElement(gt,{disabled:r.selectedItems.length===0,onClick:()=&gt;e({exportingNotes:r.selectedItems})},n.exportCard)}else return st.default.createElement(ev,{onClick:()=&gt;e({popoverOpen:!0})});throw new Error("invalid editmode")},dC=({onClick:r,children:e})=&gt;st.default.createElement("div",{className:"uiPopoverItem",role:"button",onClick:r},e),INe=({onSelect:r})=&gt;{let e=pe(),t=Me(),{props:n}=(0,Qs.useContext)($l);return st.default.createElement(st.default.Fragment,null,st.default.createElement(dC,{onClick:()=&gt;r("rename")},e.rename),st.default.createElement(dC,{onClick:()=&gt;r("copy")},e.copy),st.default.createElement(dC,{onClick:()=&gt;r("delete")},e.delete),J4(t,n.courseId)&amp;&amp;st.default.createElement(dC,{onClick:()=&gt;r("share")},e.convertToSharedNote),typeof n.courseId=="number"&amp;&amp;t.userInfo.is_teacher&amp;&amp;st.default.createElement(dC,{onClick:()=&gt;r("manage-member")},e.manageSharedNoteMember),st.default.createElement(dC,{onClick:()=&gt;r("import")},e.import),st.default.createElement(dC,{onClick:()=&gt;r("export")},e.export))},ENe=({copySuffix:r})=&gt;{let e=Me(),t=pe(),{state:n,props:o,dispatch:i}=(0,Qs.useContext)($l),[s,a]=(0,Qs.useState)("joined");(0,Qs.useEffect)(()=&gt;{a("joined")},[]);let l=d=&gt;{o.onCopy({destCourseId:d,noteIds:n.selectedItems,copySuffix:r})},u=()=&gt;s==="joined"?st.default.createElement(SB,{store:e,message:t.toWhichSubjectDoYouWantToCopy,showArrow:!1,onClickCell:l,onClickOtherTeacher:()=&gt;{a("otherTeachers")},closeDialog:()=&gt;i({copyModalOpen:!1})}):st.default.createElement(DB,{store:e,showArrow:!1,onClickCell:l,onClickBack:()=&gt;{a("joined")}});return st.default.createElement(eo,{open:n.copyModalOpen,transition:"up",onClose:()=&gt;{i({copyModalOpen:!1}),a("joined")}},u())},_Ne=({note:r})=&gt;_v(r)?r.highlight_cards_text?st.default.createElement(th,null,st.default.createElement("span",null,r.name)):st.default.createElement(aw,null,st.default.createElement("span",null,r.name)):st.default.createElement(aw,null,r.name),FNe=({note:r,updatedAt:e})=&gt;{let t=pe();return st.default.createElement("div",{className:"searchHitsMetadata"},r.course_id&amp;&amp;st.default.createElement(st.default.Fragment,null,st.default.createElement(th,null,e),st.default.createElement("div",{className:"searchHitsCourse"},st.default.createElement("div",{className:"searchHitsName ellipsisText"},r.subject_name),st.default.createElement("div",{className:"searchHitsName ellipsisText"},r.user_group_name))),!r.course_id&amp;&amp;st.default.createElement(st.default.Fragment,null,st.default.createElement(th,null,e),st.default.createElement(th,null,t.selfStudy)))},MNe=({note:r})=&gt;_v(r)&amp;&amp;r.highlight_cards_text?st.default.createElement("div",{className:"searchHitsCards ellipsisText"},st.default.createElement(AB,{highlight:r.highlight_cards_text[0]})):st.default.createElement(st.default.Fragment,null);var kd=()=&gt;(0,ul.useContext)(TP),$G=(r,e)=&gt;{var y;let t=pe(),n=Me(),o=e?n.notes.byId[e]:void 0,{props:i}=(0,ul.useContext)($l),[s,a]=(0,ul.useState)((y=o==null?void 0:o.name)!=null?y:sB(i.notes.map(S=&gt;S.name),t)),[l,u]=$r({byId:new Map,teachers:[],students:[]}),[d,c]=$r({teacher:"manage",student:"write"}),p=n.fetchStates[nt.courseAttributes(r)],h=n.fetchStates[nt.courseTemporaryTeachers(r)],f=Z4([p,h]);(0,ul.useEffect)(()=&gt;{(!p||!h)&amp;&amp;Ua(n,r)},[p,h]);let m=VG(n,r);return(0,ul.useEffect)(()=&gt;{var k;let S=m.teachers.map(A=&gt;({...A,permission:"manage",hasIndividualPermission:!1})),T=m.students.map(A=&gt;({...A,permission:"write",hasIndividualPermission:!1})),w=[...S,...T];w.length!==0&amp;&amp;u({byId:new Map(w.map(A=&gt;[A.id,A])),owner:(k=o==null?void 0:o.user_id)!=null?k:n.userInfo.user_id,teachers:S.map(({id:A})=&gt;A),students:T.map(({id:A})=&gt;A)})},[m,o,n.userInfo]),{noteName:s,members:l,groupPermission:d,courseUsers:m,fetchState:f,addPermissions:async(S,T)=&gt;{for(let w of S){let k=l.byId.get(w);!k||(k.hasIndividualPermission=!0,k.permission=k.is_admin?"manage":T)}return u({byId:l.byId}),!0},deletePermissions:async S=&gt;{for(let T of S){let w=l.byId.get(T);!w||(w.hasIndividualPermission=!1)}return u({byId:l.byId}),!0},updateGroupPermission:async S=&gt;{c(S)},updatePermissions:async S=&gt;{for(let{userId:T,permission:w}of S){let k=l.byId.get(T);!k||k.is_admin||(k.permission=w)}return u({byId:l.byId}),!0},onChangeNoteName:S=&gt;{a(S)}}},Vue=(r,e)=&gt;{var b,C;let t=Me(),n=t.notes.byId[e];(0,ul.useEffect)(()=&gt;{YN(t,{noteId:e}),ole(t,e)},[]);let o=t.fetchStates[nt.courseAttributes(r)],i=t.fetchStates[nt.courseTemporaryTeachers(r)],s=t.fetchStates[nt.sharedNoteIndividualMembers(e)],a=t.fetchStates[nt.noteInfo(e)],l=Z4([o,i,s,a]);(0,ul.useEffect)(()=&gt;{(!o||!i)&amp;&amp;Ua(t,r)},[o,i]);let u=VG(t,r),{teachers:d,students:c}=NNe(r,e),p=(0,ul.useMemo)(()=&gt;{if(l!=="done")return;let x=[...d,...c];if(x.length!==0)return{byId:new Map(x.map(y=&gt;[y.id,y])),owner:n.user_id,teachers:d.map(({id:y})=&gt;y),students:c.map(({id:y})=&gt;y)}},[l,n,d,c]),h={teacher:(b=t.notes.byId[e].teacher_permission)!=null?b:pP.teacher,student:(C=t.notes.byId[e].student_permission)!=null?C:pP.student},f=(x,y)=&gt;{let S=x.map(T=&gt;{let w=u.teachers.find(k=&gt;k.id===T&amp;&amp;k.is_admin);return{userId:T,permission:w?"manage":y}});return Gae({store:t,noteId:e,permissions:S})},m=x=&gt;Wae(t,e,x),g=x=&gt;Vae({store:t,noteId:e,permission:{studentPermission:x.student,teacherPermission:x.teacher}}),v=x=&gt;jae({store:t,noteId:e,permissions:x.filter(({userId:y})=&gt;{var S;return!((S=p==null?void 0:p.byId.get(y))!=null&amp;&amp;S.is_admin)})});return{noteName:n.name,members:p,groupPermission:h,courseUsers:u,fetchState:l,addPermissions:f,deletePermissions:m,updateGroupPermission:g,updatePermissions:v}},NNe=(r,e)=&gt;{var l;let t=Me(),n=VG(t,r),o=t.notes.byId[e],i=new Map(Object.entries((l=t.sharedNotePermissions[e])!=null?l:{})),s=n.teachers.map(u=&gt;$ue(u,o,i.get(`${u.id}`))).filter(u=&gt;u),a=n.students.map(u=&gt;$ue(u,o,i.get(`${u.id}`))).filter(u=&gt;u);return(0,ul.useMemo)(()=&gt;({teachers:s,students:a}),[r,e,n,i,o])},VG=(r,e)=&gt;(0,ul.useMemo)(()=&gt;qh({store:r,courseId:e,includeSelf:!0}),[r.userInfo,r.users,e]),$ue=(r,{teacher_permission:e,student_permission:t},n)=&gt;{let o;if(n?o=n:o=r.is_teacher?e:t,!(!o||o==="none"))return{...r,permission:o,hasIndividualPermission:!!n}},wP=()=&gt;{let{userInfo:r}=Me(),{members:e}=kd();return(0,ul.useMemo)(()=&gt;{let t=BNe(r,e);return Tle.bind(null,r,t)},[r,e])},BNe=(r,e)=&gt;{var t,n;return r.user_id===(e==null?void 0:e.owner)?"owner":r.is_admin?"schoolAdmin":(n=(t=e==null?void 0:e.byId.get(r.user_id))==null?void 0:t.permission)!=null?n:"none"};var cr=oe(ve());var Tn=oe(ve());var EB=["manage","write","read"];var jue=({currentPermission:r,disabled:e,onSelect:t})=&gt;{let[n,o]=(0,Tn.useState)(!1);return Tn.default.createElement(_B,{type:"teachers",permission:r,disabled:e,onClick:()=&gt;o(!n)},Tn.default.createElement(xt,{open:n,onClose:()=&gt;o(!1),anchor:"topCenter"},Tn.default.createElement(Ra,null,Sq.map(i=&gt;Tn.default.createElement(DP,{type:"teachers",key:i,permission:i,selected:r===i,onClick:()=&gt;{o(!1),t(i)}})))))},Kue=({currentPermission:r,disabled:e,onSelect:t})=&gt;{let[n,o]=(0,Tn.useState)(!1);return Tn.default.createElement(_B,{type:"students",permission:r,disabled:e,onClick:()=&gt;o(!n)},Tn.default.createElement(xt,{open:n,onClose:()=&gt;o(!1),anchor:"topCenter"},Tn.default.createElement(Ra,null,Cq.map(i=&gt;Tn.default.createElement(DP,{type:"students",key:i,permission:i,selected:r===i,onClick:()=&gt;{o(!1),t(i)}})))))},que=({currentPermission:r,disabled:e,isAdmin:t,onSelect:n,onDelete:o})=&gt;{let i=pe(),[s,a]=(0,Tn.useState)(!1);return Tn.default.createElement(_B,{type:"individual",permission:r,disabled:e,onClick:()=&gt;a(!s)},Tn.default.createElement(xt,{open:s,onClose:()=&gt;a(!1),anchor:"topCenter"},Tn.default.createElement(Ra,null,(t?["manage"]:EB).map(u=&gt;Tn.default.createElement(DP,{type:"individual",key:u,permission:u,selected:r===u,onClick:()=&gt;{a(!1),n(u)}})),Tn.default.createElement(Rr,{className:"sharedNotePermissionSelectorItem",role:"button",onClick:()=&gt;{a(!1),o()}},Tn.default.createElement("div",{className:"sharedNotePermissionSelectorMark"}),Tn.default.createElement("div",{className:"sharedNotePermissionSelectorDelete"},FB(i,"none","individual"))))))},Yue=({disabled:r,onSelect:e,onDelete:t})=&gt;{let n=pe(),[o,i]=(0,Tn.useState)(!1);return Tn.default.createElement(Gt,{className:"primaryTextButton",disabled:r,onClick:()=&gt;i(!o)},n.change,Tn.default.createElement(xt,{open:o,onClose:()=&gt;i(!1),anchor:"topCenter"},Tn.default.createElement(Ra,null,EB.map(s=&gt;Tn.default.createElement(DP,{type:"individual",key:s,permission:s,onClick:()=&gt;{i(!1),e(s)}})),Tn.default.createElement(Rr,{className:"sharedNotePermissionSelectorItem",role:"button",onClick:()=&gt;{i(!1),t()}},Tn.default.createElement("div",{className:"sharedNotePermissionSelectorDelete"},FB(n,"none","individual"))))))},Xue=({currentPermission:r,onSelect:e})=&gt;{let[t,n]=(0,Tn.useState)(!1);return Tn.default.createElement(_B,{type:"individual",permission:r,disabled:!1,onClick:()=&gt;n(!t)},Tn.default.createElement(xt,{open:t,onClose:()=&gt;n(!1),anchor:"bottomCenter"},Tn.default.createElement(Ra,null,EB.map(o=&gt;Tn.default.createElement(DP,{type:"individual",key:o,permission:o,selected:r===o,onClick:()=&gt;{n(!1),e(o)}})))))},_B=({children:r,type:e,permission:t,disabled:n,onClick:o})=&gt;{let i=pe();return Tn.default.createElement(Gt,{className:"primaryTextButton sharedNotePermissionSelectorButton",disabled:n,onClick:o},FB(i,t,e),Tn.default.createElement("div",{className:"sharedNotePermissionSelectorButtonIcon","data-disabled":n},r))},DP=({type:r,permission:e,selected:t,onClick:n})=&gt;{let o=pe();return Tn.default.createElement(Rr,{className:"sharedNotePermissionSelectorItem",role:"button",onClick:n},t!==void 0&amp;&amp;Tn.default.createElement("div",{className:"sharedNotePermissionSelectorMark","data-selected":t}),Tn.default.createElement("div",null,FB(o,e,r)))};function FB(r,e,t){return e==="none"?t==="individual"?r.delete:r.notShared:r[wle.get(e)]}var MB=()=&gt;{let r=pe(),e=Me(),t=!e.screen.isMobile,n=dw(),{mode:o,courseId:i,noteName:s,members:a,groupPermission:l,fetchState:u,deletePermissions:d,updateGroupPermission:c,updatePermissions:p,createSharedNote:h,onChangeNoteName:f}=kd(),[m,g]=(0,cr.useState)(),v=Que(),b=RNe(),C=wP(),x=k=&gt;{if(!!m&amp;&amp;C({type:"individual",member:k}))return{selected:m.some(A=&gt;A===k.id),onSelect:A=&gt;{g(A?[...m,k.id]:m.filter(I=&gt;I!==k.id))}}},y=(()=&gt;o!=="edit"||m?r.cancel:n.hasPrev()?r.back:r.close)(),S=()=&gt;{m?g(void 0):n.onPrev()},T=()=&gt;g([]),w=()=&gt;g(b);return cr.default.createElement(rr,{round:t},cr.default.createElement(Et,null,cr.default.createElement(Ft,null,cr.default.createElement(Mt,null,cr.default.createElement(gt,{onClick:S},y)),cr.default.createElement(Vt,null,cr.default.createElement(nr,null,o==="edit"&amp;&amp;r.sharedNoteSettings,o==="share"&amp;&amp;r.convertToSharedNote,o==="create"&amp;&amp;r.newSharedNote)),o!=="edit"&amp;&amp;h&amp;&amp;cr.default.createElement(jt,null,cr.default.createElement(gt,{onClick:h,disabled:o==="create"&amp;&amp;s.length===0},o==="share"&amp;&amp;r.execute,o==="create"&amp;&amp;r.create))),u==="fetching"&amp;&amp;cr.default.createElement(_t,{absolute:"bottom"})),cr.default.createElement(ur,null,u instanceof Error&amp;&amp;cr.default.createElement(js,null,r.errorOccurred),cr.default.createElement(gn,{title:r.noteName},cr.default.createElement(xr,{role:"general",disabled:o!=="create"},cr.default.createElement(mn,null,o==="create"?cr.default.createElement("input",{className:"sharedNoteNameInput",type:"text",value:s,onChange:k=&gt;{f==null||f(k.target.value)}}):s))),cr.default.createElement(hG,{className:"flex"},cr.default.createElement("div",null,r.sharedRange),cr.default.createElement(No,null),C({type:"individual"})&amp;&amp;cr.default.createElement(Gt,{className:"primaryTextButton sharedNotePermissionSelectButton",role:"button",onClick:()=&gt;g(m?void 0:[]),disabled:b.length===0},m?r.cancel:r.selection)),a&amp;&amp;cr.default.createElement(gn,null,a.owner&amp;&amp;cr.default.createElement(xr,{role:"general",disabled:!!m},cr.default.createElement(mn,null,cr.default.createElement(nr,null,a.byId.get(a.owner).display_name)),cr.default.createElement(Ur,{className:"sharedNotePermissionOwnerTitle"},r.owner)),cr.default.createElement(xr,{role:"general",disabled:!!m},cr.default.createElement(mn,null,cr.default.createElement(nr,null,r.allTeachers)),cr.default.createElement(Ur,null,cr.default.createElement(jue,{currentPermission:l.teacher,disabled:!!m||!C({type:"teachers"}),onSelect:k=&gt;c({teacher:k})}))),cr.default.createElement(xr,{role:"general",disabled:!!m},cr.default.createElement(mn,null,cr.default.createElement(nr,null,r.student," (",au(e,i),")")),cr.default.createElement(Ur,null,cr.default.createElement(Kue,{currentPermission:l.student,disabled:!!m||!C({type:"students"}),onSelect:k=&gt;c({student:k})}))),v.map(k=&gt;({member:k,_selectOpts:x(k)})).map(({member:k,_selectOpts:A})=&gt;cr.default.createElement(xr,{key:k.id,role:m?"button":"general",selectOpts:A,disabled:m&amp;&amp;!A},cr.default.createElement(mn,null,cr.default.createElement(nr,{disablePopover:!!m},k.display_name)),cr.default.createElement(Ur,null,cr.default.createElement(que,{currentPermission:k.permission,disabled:!C({type:"individual",member:k})||!!m,isAdmin:k.is_admin,onSelect:I=&gt;p([{userId:k.id,permission:I}]),onDelete:()=&gt;d([k.id])})))),C({type:"individual"})&amp;&amp;cr.default.createElement(xr,{role:"button",className:"sharedNoteAddMemberButton",onClick:n.onNext,disabled:!!m},cr.default.createElement(Ur,null,cr.default.createElement(lr,{className:"sharedNoteAddMemberIcon","data-disabled":!!m,src:"/svg/blue_circle_add subject.svg"})),cr.default.createElement(mn,null,r.add)))),m&amp;&amp;cr.default.createElement(Gp,null,cr.default.createElement("div",{className:"sharedNoteMemberPermissionsFooter"},cr.default.createElement(Gt,{className:"primaryTextButton",onClick:()=&gt;{b.length===m.length?T():w()}},b.length===m.length?r.releaseAll:r.selectAll),cr.default.createElement(No,null),cr.default.createElement(Yue,{disabled:m.length===0,onSelect:async k=&gt;{await p(m.map(I=&gt;({userId:I,permission:k})))&amp;&amp;g(void 0)},onDelete:async()=&gt;{await d(m)&amp;&amp;g(void 0)}}))))},Que=()=&gt;{let{members:r}=kd();return(0,cr.useMemo)(()=&gt;{var e;return Array.from((e=r==null?void 0:r.byId.values())!=null?e:[]).filter(t=&gt;t.id!==(r==null?void 0:r.owner)&amp;&amp;t.hasIndividualPermission)},[r])},RNe=()=&gt;{let{userInfo:r}=Me(),e=Que(),t=wP();return(0,cr.useMemo)(()=&gt;e.filter(n=&gt;n.id!==r.user_id&amp;&amp;t({type:"individual",member:n})).map(({id:n})=&gt;n),[r,e,t])};var Bo=oe(ve());var NB=()=&gt;{let r=pe(),t=!Me().screen.isMobile,{addPermissions:n,fetchState:o}=kd(),i=dw(),s=Jue(),a=LNe(),l=ONe(),[u,d]=(0,Bo.useState)("write"),[c,p]=(0,Bo.useState)([]);(0,Bo.useEffect)(()=&gt;{c.length!==0&amp;&amp;c.some(g=&gt;!a.includes(g))&amp;&amp;p(c.filter(g=&gt;a.includes(g)))},[c,a]);let h=g=&gt;{s(g)||(c.includes(g)?p(c.filter(v=&gt;v!==g)):p(c.concat([g])))},f=()=&gt;{p([]),i.onPrev()},m=async()=&gt;{await n(c,u)&amp;&amp;(p([]),i.onPrev())};return Bo.default.createElement(rr,{className:"sharedNoteMemberDialog",round:t},Bo.default.createElement(Et,null,Bo.default.createElement(Ft,null,Bo.default.createElement(Mt,null,Bo.default.createElement(gt,{onClick:f},r.back)),Bo.default.createElement(Vt,null,Bo.default.createElement(nr,null,r.sharedRange)),Bo.default.createElement(jt,null,Bo.default.createElement(gt,{disabled:c.length===0,onClick:m},r.add))),o==="fetching"&amp;&amp;Bo.default.createElement(_t,{absolute:"bottom"})),Bo.default.createElement(ur,{className:"sharedNoteMemberBody"},o instanceof Error&amp;&amp;Bo.default.createElement(js,null,r.errorOccurred),Bo.default.createElement("div",{className:"sharedNoteEditMemberHeader"},Bo.default.createElement(Xue,{currentPermission:u,onSelect:d})),Bo.default.createElement(wv,{onClickUser:h,selectedIds:c,sections:l,isDisabledForUser:s})),Bo.default.createElement(Gp,null,Bo.default.createElement(uw,{disableSelectAll:c.length===a.length,disableReleaseAll:c.length===0,onClickSelectAll:()=&gt;p(a),onClickReleaseAll:()=&gt;p([])})))},Jue=()=&gt;{let{members:r}=kd();return(0,Bo.useMemo)(()=&gt;e=&gt;{var t,n;return(n=(t=r==null?void 0:r.byId.get(e))==null?void 0:t.hasIndividualPermission)!=null?n:!1},[r])},LNe=()=&gt;{let{members:r,courseUsers:e}=kd(),t=wP(),n=Jue();return(0,Bo.useMemo)(()=&gt;[...e.teachers,...e.students].filter(o=&gt;o.id!==(r==null?void 0:r.owner)&amp;&amp;!n(o.id)&amp;&amp;t({type:"individual",member:o})).map(({id:o})=&gt;o),[r,e,t,n])},ONe=()=&gt;{let r=pe(),{userInfo:e}=Me(),{courseUsers:t}=kd();return(0,Bo.useMemo)(()=&gt;[[r.teacher,e.is_teacher?t.teachers.filter(({id:n})=&gt;n!==e.user_id):[]],[r.student,t.students.filter(({id:n})=&gt;n!==e.user_id)]],[e,t])};var Sa=oe(ve());var Zue=()=&gt;{let r=pe(),t=!Me().screen.isMobile,n=dw(),{noteId:o,fetchState:i}=kd(),s=UNe(Gr(o)),a=zNe();return Sa.default.createElement(rr,{className:"sharedNoteMemberDialog",round:t},Sa.default.createElement(Et,null,Sa.default.createElement(Ft,null,Sa.default.createElement(Mt,null,Sa.default.createElement(gt,{onClick:n.onPrev},r.close)),Sa.default.createElement(Vt,null,Sa.default.createElement(nr,null,r.sharedNoteMembers)),Sa.default.createElement(jt,null,Sa.default.createElement(gt,{onClick:n.onNext},r.settings))),i==="fetching"&amp;&amp;Sa.default.createElement(_t,{absolute:"bottom"})),Sa.default.createElement(ur,{className:"sharedNoteMemberBody"},i instanceof Error&amp;&amp;Sa.default.createElement(js,null,r.errorOccurred),a&amp;&amp;Sa.default.createElement(wv,{onClickUser:()=&gt;{},statusForUser:s,selectedIds:[],selectable:!1,sections:a})))},UNe=r=&gt;{var i;let{sharedNoteSessions:e}=Me(),n=((i=e.byNoteId[r])!=null?i:[]).map(s=&gt;e.byId[s]),o=new Set(n.map(s=&gt;s.user.id));return(0,Sa.useMemo)(()=&gt;s=&gt;o.has(s)?"connected":"disconnected",[o])},zNe=()=&gt;{let r=pe(),{members:e}=kd();return(0,Sa.useMemo)(()=&gt;{if(!e)return[];let t=e!=null&amp;&amp;e.owner?e==null?void 0:e.byId.get(e.owner):void 0,n=[],o=[],i=[];if(e)for(let s of[...e.teachers,...e.students]){let a=e.byId.get(s);s!==(t==null?void 0:t.id)&amp;&amp;(a.permission==="manage"?n.push(a):a.permission==="write"?o.push(a):a.permission==="read"&amp;&amp;i.push(a))}return[[r.owner,t?[t]:[]],[r.sharedInManageable,n!=null?n:[]],[r.sharedInWritable,o!=null?o:[]],[r.sharedInViewOnly,i!=null?i:[]]]},[e])};var TP=(0,Ei.createContext)({mode:"edit",courseId:0,noteId:0,noteName:"",groupPermission:pP,courseUsers:{allIds:[],students:[],teachers:[]},addPermissions:async()=&gt;!0,deletePermissions:async()=&gt;!0,updateGroupPermission:async()=&gt;{},updatePermissions:async()=&gt;!0,fetchState:null}),Gue=({courseId:r,openAfterCreated:e=!0,onClose:t})=&gt;{Gr(r);let n=Me(),o=!n.screen.isMobile,i=$G(r),s=async()=&gt;{var l,u;let a=await Hae({store:n,courseId:r,name:i.noteName,openAfterCreated:e,permissions:Array.from((u=(l=i.members)==null?void 0:l.byId.entries())!=null?u:[]).filter(([,{hasIndividualPermission:d}])=&gt;d).map(([d,{permission:c}])=&gt;({userId:Number(d),permission:c})),teacherPermission:i.groupPermission.teacher,studentPermission:i.groupPermission.student});!a||t({type:"done",noteInfo:a})};return Ei.default.createElement(TP.Provider,{value:{mode:"create",courseId:r,createSharedNote:s,...i}},Ei.default.createElement(iB,{round:o,onClose:()=&gt;t({type:"cancel"})},Ei.default.createElement(MB,null),Ei.default.createElement(NB,null)))},Wue=({courseId:r,noteId:e,onClose:t})=&gt;{Gr(r);let n=pe(),o=Me(),i=!o.screen.isMobile,s=$G(r,e),a=async()=&gt;{var u,d;!confirm(n.confirmShareNote)||(await qae({store:o,noteId:e,permissions:Array.from((d=(u=s.members)==null?void 0:u.byId.entries())!=null?d:[]).filter(([c,{hasIndividualPermission:p}])=&gt;p).map(([c,{permission:p}])=&gt;({userId:Number(c),permission:p})),teacherPermission:s.groupPermission.teacher,studentPermission:s.groupPermission.student})).type!=="success"||t("done")};return Ei.default.createElement(TP.Provider,{value:{mode:"share",courseId:r,noteId:e,createSharedNote:a,...s}},Ei.default.createElement(iB,{round:i,onClose:()=&gt;t("cancel")},Ei.default.createElement(MB,null),Ei.default.createElement(NB,null)))},IB=({courseId:r,noteId:e,onClose:t,showStatus:n=!0})=&gt;{let o=Me(),i=!o.screen.isMobile,s=Vue(r,e),a=(0,Ei.useRef)(),l=(0,Ei.useRef)(o);return(0,Ei.useEffect)(()=&gt;{l.current=o},[o]),(0,Ei.useEffect)(()=&gt;{s.fetchState==="done"&amp;&amp;!a.current&amp;&amp;(a.current=oC.get(e,l).subscribe())},[s.fetchState,a.current,e]),nd(()=&gt;{var u;(u=a.current)==null||u.close(),a.current=void 0}),Ei.default.createElement(TP.Provider,{value:{mode:"edit",courseId:r,noteId:e,...s}},Ei.default.createElement(iB,{round:i,onClose:t},n&amp;&amp;Ei.default.createElement(Zue,null),Ei.default.createElement(MB,null),Ei.default.createElement(NB,null)))};var ede=()=&gt;{var c,p;let[r,e]=(0,kP.useState)(!1),{courseId:t,noteId:n}=Sd(),o=Me(),[i,s]=(0,kP.useState)(!1);Al(()=&gt;{i&amp;&amp;setTimeout(()=&gt;s(!1),300)},[i]);let a=((c=o.sharedNoteSessions.byNoteId[n])!=null?c:[]).map(h=&gt;o.sharedNoteSessions.byId[h]),l=new Set(a.map(h=&gt;h.user.id)).size,u=(p=o.sharedNoteConnectionState)!=null?p:"unknown";return(0,kP.useEffect)(()=&gt;{s(!0)},[l]),o.editor!==void 0?null:oh.default.createElement("div",{className:"sharedNoteSessionButtonWrapper"},oh.default.createElement(Gt,{className:"sharedNoteSessionButton",onClick:()=&gt;{e(!0)}},l&gt;0&amp;&amp;oh.default.createElement("div",{className:"sharedNoteSessionCountBadge","data-animate":i},l),oh.default.createElement("div",{className:"sharedNoteConnectionState"},oh.default.createElement(sw,{status:u})),oh.default.createElement("div",{className:"sharedNoteSessionButtonIcon"})),oh.default.createElement(eo,{open:r,onClose:()=&gt;e(!1),transition:"up"},K0(o)?oh.default.createElement(IB,{courseId:Gr(t),noteId:n,onClose:()=&gt;e(!1)}):oh.default.createElement(nB,{courseId:Gr(t),noteId:n,onClose:()=&gt;e(!1)})))};var Ji=oe(ve()),tde=oe(ve());var rde=oe(Wr());var nde=({store:r,rejection:e})=&gt;{let t=pe(),{courseId:n,note:o,noteId:i}=e,s=async()=&gt;{let d=r.notes.byId[i],c=d?d.name:t.unnamedNote;if(a==="saveOther"){let p=(0,rde.sprintf)(t.copyOf,c);ile(r,{courseId:n,note:e.note,name:p,baseNoteId:i})}else a==="useOurs"?sle(r,{noteId:i,courseId:n,note:o,version:e.info.existing_version+1,name:c,assets:Dc(o.data.frames)}):a==="useTheirs"&amp;&amp;r.reduce(ed())},[a,l]=(0,tde.useState)("saveOther"),u=({id:d,type:c,children:p})=&gt;Ji.default.createElement("div",{className:"noteConflictResolveInputGroup"},Ji.default.createElement("input",{role:"button",type:"radio",id:d,name:c,value:c,checked:a===c,onChange:()=&gt;l(c)}),Ji.default.createElement("label",{role:"button",className:"noteConflictResolveInputRight",htmlFor:d},p));return Ji.default.createElement(Vm,{title:t.noteConflictDialogTitle,type:"error"},Ji.default.createElement(TK,null,Ji.default.createElement("div",{className:"noteConflictResolveDialogContent"},Ji.default.createElement("div",{className:"noteConflictResolveInputGroup"},Ji.default.createElement(u,{type:"saveOther",id:"noteConflictResolveDialog-saveOther"},Ji.default.createElement("div",{className:"noteConflictResolveInputGroupTitle"},t.saveNoteUnderOtherNameTitle),Ji.default.createElement("div",{className:"noteConflictResolveInputGroupDesc"},t.saveNoteUnderOtherNameDesc))),Ji.default.createElement("div",{className:"noteConflictResolveInputGroup"},Ji.default.createElement(u,{type:"useOurs",id:"noteConflictResolveDialog-useOurs"},Ji.default.createElement("div",{className:"noteConflictResolveInputGroupTitle"},t.prioritizeThisVersionTitle),Ji.default.createElement("div",{className:"noteConflictResolveInputGroupDesc"},t.prioritizeThisVersionDesc))),Ji.default.createElement("div",{className:"noteConflictResolveInputGroup"},Ji.default.createElement(u,{type:"useTheirs",id:"noteConflictResolveDialog-userTheirs"},Ji.default.createElement("div",{className:"noteConflictResolveInputGroupTitle"},t.deferToOtherDeviceVersionTitle),Ji.default.createElement("div",{className:"noteConflictResolveInputGroupDesc"},t.deferToOtherDeviceVersionDesc))))),Ji.default.createElement(la,null,Ji.default.createElement(Ui,{onClick:s},t.resolve)))};var pi=oe(ve()),Pd=oe(ve());var cde=oe(Wr());var ide=.1,HNe=1e4,ode=1e4,GNe=1e4;function sde(r,e={x:0,y:0}){let t=r.position;return Math.hypot(t.x-e.x,t.y-e.y)&gt;HNe}function ade(r){let e=r.content.margins;return Math.max(Math.abs(e.bottom),Math.abs(e.left),Math.abs(e.right),Math.abs(e.top))&gt;GNe}function lde(r){return r.size.width&gt;ode||r.size.height&gt;ode}function ude(r){let e=0;for(let t of r.rootChildrenIterator())(sde(t)||ade(t)||lde(t))&amp;&amp;e++;return e}function dde(r,e,t,n){let o=[],i=[];for(let l of r.rootChildrenIterator()){let u=!1;if(ade(l)){let d=od(l.contentSize,kt);d&amp;&amp;We({type:"cardMarginsChanged",cardId:l.id,layoutSize:Nt(l.contentSize,d),margins:An(0),position:l.position,committed:!0}),u=!0}if(lde(l)){let d=WNe(l);d&amp;&amp;We(T_({card:d,point:{x:d.position.x,y:d.position.y},grouped:d.isFolded,committed:!0,corner:"bbRightBottom",startBounds:d.bounds,zoom:e})),u=!0}sde(l)&amp;&amp;(u=!0),u?o.push(l):i.push(l)}let s={x:0,y:0};for(let l of i)s.x+=l.position.x,s.y+=l.position.y;i.length&gt;0&amp;&amp;(s.x/=i.length,s.y/=i.length);let a=[];for(let l of o)if(!a.some(u=&gt;u.id===l.id))if(l.isHead)a.push(l);else{let u=l.head();for(let d of u.iteratorOverGroup())a.push(d)}for(let l of a)l.isFolded&amp;&amp;We(rf(l.id,!1)),We(tf({cardId:l.id,x:s.x,y:s.y,animationFrom:l.position,committed:!0}));if(a.length&gt;0){let l=pu({position:{x:s.x,y:s.y},backcolor:"#FFFFFFFF",color:"#FF000000",author:t,text:n.collectedCard});We({type:"cardsInserted",cards:[l],groupStates:[],connections:[],treeStates:[],transitions:[]});for(let u=0;u&lt;a.length;u++)u===0?We(j1(l.id,a[u].id)):We(j1(a[u-1].id,a[u].id));g_({card:a[0],visibleRect:qe({x:s.x,y:s.y,width:kt.width*5,height:kt.height*(a.length/4+1)})}),We(rf(a[0].id,!1))}}function WNe(r){let e=od(r.size,kt);return e?(yp(()=&gt;r.memberAndChildrenIteratorOverGroup(),e,{x:0,y:0}),r):void 0}var pde=({store:r,position:e,noteContext:t,editor:n})=&gt;{let{x:o,y:i}=e,s=qe(o,i-10,0,0),[a,l]=(0,Pd.useState)(),[u,d]=(0,Pd.useState)(),[c,p]=(0,Pd.useState)(),h=(0,Pd.useRef)(Qne(Nr(r,r.userInfo.user_id))),[f,m]=(0,Pd.useState)(),g=()=&gt;{r.reduce(hn(void 0))};return(0,Pd.useEffect)(()=&gt;{let v=new AbortController,b=async()=&gt;{if(!!K2()&amp;&amp;!!r.pageFocused)return Jne(h.current,v.signal)},C=()=&gt;{if(!!n&amp;&amp;!!t)return t.getNote().getCardSafe(n==null?void 0:n.cardId)},x=()=&gt;{let T=C();if(!!T)return{card:T}},y=()=&gt;{if(!av())return;let T=C();if(!!T)return{card:T}},S=()=&gt;{if(n||!t||t.isShared()&amp;&amp;!t.getStore().userInfo.is_teacher||t.getRenderer().getZoom()&gt;ide)return;let w=ude(t.getNote());if(w!=0)return{collectSize:w}};return(async()=&gt;{if(!on(r)){let w=await b(),k=x(),A=S();w&amp;&amp;l(w),k&amp;&amp;d(k),A&amp;&amp;m(A)}let T=y();T&amp;&amp;p(T)})(),()=&gt;v.abort()},[]),Al(()=&gt;{var v;(v=r.desktop)!=null&amp;&amp;v.positionPopoverOpen&amp;&amp;g()},[r.screen]),!a&amp;&amp;!u&amp;&amp;!c&amp;&amp;!f?null:pi.default.createElement(kf,{className:"fade",anchor:"topCenter",roundEdge:!0,arrowColor:cn().toRGBAHex(),getParentBounds:()=&gt;s},pi.default.createElement("div",{className:"cardPopover"},a&amp;&amp;pi.default.createElement($Ne,{store:r,position:e,text:a.text,disabled:a.disabled,reader:h.current,onClose:g}),u&amp;&amp;pi.default.createElement(VNe,{card:u.card,onClose:g}),c&amp;&amp;pi.default.createElement(jNe,{card:c.card,onClose:g}),f&amp;&amp;t&amp;&amp;pi.default.createElement(KNe,{noteContext:t,collectSize:f.collectSize,onClose:g})))},$Ne=({store:r,position:e,text:t,disabled:n,reader:o,onClose:i})=&gt;{let s=pe();return pi.default.createElement("div",{role:"button",className:"cardPopoverItem",onClick:async()=&gt;{await o.fetch(void 0).then(l=&gt;{l.type==="success"?l.value&amp;&amp;lv({store:r,data:l.value,position:e}):l.type==="error"&amp;&amp;toe(r,l.error)}),i()},"data-disabled":n,title:n?s.pasteTips:""},pi.default.createElement("div",{className:`${t===s.createWebCard?"cardPopoverPasteWebIcon":"cardPopoverPasteIcon"} cardPopoverIcon`}),t)},hde=({card:r,title:e,icon:t,onClick:n})=&gt;{let o=Me(),[i,s]=(0,Pd.useState)(!0);return(0,Pd.useEffect)(()=&gt;{let l=Array.from(r.familyIterator()).map(d=&gt;d.id);Rf(o,l)||s(!1)},[]),pi.default.createElement("div",{role:"button",className:"cardPopoverItem",onClick:()=&gt;{i||n()},"data-disabled":i},pi.default.createElement("div",{className:`${t} cardPopoverIcon`}),e)},VNe=({card:r,onClose:e})=&gt;{let t=pe(),n=Me(),o=uG(r,n),i=o?t.reuse:t.duplicate;return pi.default.createElement(hde,{card:r,title:i,icon:o?"cardPopoverReuseIcon":"cardPopoverDuplicateIcon",onClick:()=&gt;{o?At(new sp(r.id,!0)):At(new Xu(r.id,"single",!0)),e()}})},jNe=({card:r,onClose:e})=&gt;{let t=Me(),n=pe(),o=n.copy;return pi.default.createElement(hde,{card:r,title:o,icon:"cardPopoverCopyIcon",onClick:async()=&gt;{try{let a=Nr(t,t.userInfo.user_id);await Tk(r,!1,a),t.reduce(Jt({type:"normal",text:n.copiedToClipboard}))}catch(a){let l=ot(a,{default:n.failedToCopyCards}).message;t.reduce(Jt({type:"error",text:l}))}finally{e()}}})},KNe=({noteContext:r,collectSize:e,onClose:t})=&gt;{let n=pe(),[o,i]=(0,Pd.useState)(!1);return pi.default.createElement(pi.default.Fragment,null,pi.default.createElement("div",{role:"button",className:"cardPopoverItem",onClick:()=&gt;{i(!0)}},pi.default.createElement("div",{className:"cardPopoverCollectCardIcon cardPopoverIcon"}),n.collectCard),pi.default.createElement(qNe,{isOpenCollectDialog:o,noteContext:r,collectSize:e,onCloseDialog:()=&gt;{t()}}))},qNe=({isOpenCollectDialog:r,noteContext:e,collectSize:t,onCloseDialog:n})=&gt;{let o=pe(),i=()=&gt;{if(e){let s=e.getStore();dde(e.getNote(),e.getRenderer().getZoom(),{id:s.userInfo.user_id,name:s.userInfo.username},o),e.getRenderer().resetNoteBoundsAndViewPoint(),alert(o.completeCollectCardMessage),n()}};return pi.default.createElement(tr,{open:r,overlay:!0,onClose:()=&gt;{}},pi.default.createElement(Vm,{title:o.collectCardDialogTitle},pi.default.createElement("div",{className:"cardCollectDialogContent"},(0,cde.sprintf)(o.confirmCollectCardMessage,t)),pi.default.createElement(la,null,pi.default.createElement(Ui,{onClick:n},o.cancel),pi.default.createElement(Ui,{disableAfterSubmit:!0,onClick:i},o.collect))))};var BB=oe(ve()),fde=()=&gt;{let r=Me();return BB.default.createElement("div",{style:{position:"fixed",bottom:35,left:0,background:"#FFFFFF66",pointerEvents:"none"}},BB.default.createElement("p",null,"DrawnAsset upload states"),Object.entries(r.assetUploadStates).map(([e,t])=&gt;{if(!!t.drawn)return BB.default.createElement("p",{key:e},e.slice(0,8)+"... : "+t.drawn)}))};var es=oe(ve()),IW=oe(Wr());var XG=oe(ve()),Uc=oe(ve());var YNe=3,RB=class{constructor(){this.histories=[]}filter(e){if(this.histories.length&gt;=YNe&amp;&amp;this.histories.shift(),this.histories.push(e),this.histories.length&lt;=1)return e;let t=0,n=0;for(let o=0;o&lt;this.histories.length;o++)t+=this.histories[o].x/this.histories.length,n+=this.histories[o].y/this.histories.length;return{x:t,y:n}}get lastPoint(){return this.histories[this.histories.length-1]}};function mde(r,e,t,n){if(e&lt;=0)return n;let o=Math.max(0,Math.min(1,r/e))-1;return-(n-t)*(o*o*o*o-1)+t}function jG(r,e,t,n){if(e&lt;=0)return n;let o=Math.max(0,Math.min(1,r/e));return(n-t)*o*o+t}var cC=class{constructor(e,t,n,o,i){this.id=e;this.type=t;this.center=n;this.timestamp=o;this.color=i;t==="stroke"?(this.durationMs=3200,this.pivotRadius=5,this.rangeRadius=5):(this.durationMs=2e3,this.pivotRadius=5,this.rangeRadius=50)}},KG=class{constructor(e,t){this.startTime=e;this.points=[];this.firstPointTimestamp=t.timestamp,this.points.push(new PP(e,t)),this.color=t.color.toARGBHex()}get isEmpty(){return this.points.length===0}append(e){let t=e.timestamp-this.firstPointTimestamp,n=this.startTime+t;this.points.push(new PP(n,e))}update(e){let t=!1;for(let n=this.points.length-1;n&gt;=0;n--){let o=this.points[n].isEnd(e),i=this.points[n].isStarted(e);o?(this.points.splice(n,1),t=!0):!t&amp;&amp;i&amp;&amp;(t=!0)}return t}draw(e,t,n){let o={id:"",color:this.color,type:"laser",width:0,points:this.convertStrokePoints(t,n)};O_({ctx:e,content:o,resolutionScale:n})}convertStrokePoints(e,t){let n=[];for(let o=0;o&lt;this.points.length;o++){let i={x:this.points[o].x*t,y:this.points[o].y*t,width:this.getCurWidth(this.points[o],e)*t};n.push(i)}return n}getCurWidth(e,t){let n=e.durationMs,o=e.getElapsedTime(t),i=window.devicePixelRatio;return jG(o,n,e.pivotRadius*2*i,0)}},qG=class{constructor(e,t){this.point=new PP(e,t)}get isEmpty(){return this.point==null}update(e){var n,o;let t=!1;return(n=this.point)!=null&amp;&amp;n.isEnd(e)?(t=!0,this.point=void 0):(o=this.point)!=null&amp;&amp;o.isStarted(e)&amp;&amp;(t=!0),t}draw(e,t,n){var f;if(!((f=this.point)!=null&amp;&amp;f.isStarted(t)))return;let o=this.point.durationMs,i=this.point.getElapsedTime(t),s=jG(i,o,1,0),a=window.devicePixelRatio,l=this.point.pivotRadius*n,u=this.point.rangeRadius*n,d=mde(i,o,l,u),c=this.point.pivotRadius*n*.8;e.save(),e.beginPath();let p=this.point.x*n,h=this.point.y*n;e.arc(p,h,d*a,0,2*Math.PI,!1),e.strokeStyle=this.point.color.toCSSRGBA(),e.globalAlpha=s,e.lineWidth=c*2*a,e.stroke(),e.restore()}},PP=class{constructor(e,t){this.startTime=e;this.point=t}get x(){return this.point.center.x}get y(){return this.point.center.y}get pivotRadius(){return this.point.pivotRadius}get rangeRadius(){return this.point.rangeRadius}get color(){return this.point.color}get durationMs(){return this.point.durationMs}get endTime(){return this.startTime+this.point.durationMs}isStarted(e){return e&gt;=this.startTime}isEnd(e){return e&gt;this.endTime}getElapsedTime(e){return e-this.startTime}},YG=class{constructor(e,t,n){this.curTime=e;this.strokes=t;this.ovals=n}},LB=class{getStrokes(){var e;return(e=this.data)==null?void 0:e.strokes}constructor(){this.inputs=[],this.lastPoint=void 0}push(e){this.lastPoint&amp;&amp;gde(this.lastPoint,e)||(this.inputs.push(e),this.lastPoint=e)}pushPoints(e){if(!(this.lastPoint&amp;&amp;gde(this.lastPoint,e[0]))){for(let t=0;t&lt;e.length;t++)this.inputs.push(e[t]);this.lastPoint=e[0]}}invalidate(){this.inputs=[],this.data=void 0}update(e){var i,s,a,l;let t=(s=(i=this.data)==null?void 0:i.strokes)!=null?s:new Map,n=(l=(a=this.data)==null?void 0:a.ovals)!=null?l:new Map,o=!1;for(let u of t.keys()){let d=t.get(u);o=d.update(e),o&amp;&amp;d.isEmpty&amp;&amp;t.delete(u)}for(let u of n.keys()){let d=n.get(u);o=d.update(e),o&amp;&amp;d.isEmpty&amp;&amp;n.delete(u)}for(;this.inputs.length!==0;){let u=this.inputs.shift();u.type==="stroke"?t.has(u.id)?t.get(u.id).append(u):t.set(u.id,new KG(e,u)):n.set(u.id,new qG(e,u)),o=!0}return this.data=new YG(e,t,n),o}draw(e,t,n){var s,a;if(!this.data)return;e.clearRect(0,0,e.canvas.width,e.canvas.height);let o=this.data.strokes;for(let l of o.keys())(s=o.get(l))==null||s.draw(e,t,n);let i=this.data.ovals;for(let l of i.keys())(a=i.get(l))==null||a.draw(e,t,n)}};function gde(r,e){return r.id===e.id&amp;&amp;r.center.x===e.center.x&amp;&amp;r.center.y===e.center.y&amp;&amp;r.durationMs===e.durationMs&amp;&amp;r.pivotRadius===e.pivotRadius&amp;&amp;r.rangeRadius===e.rangeRadius&amp;&amp;r.timestamp==e.timestamp&amp;&amp;r.type===e.type}var pC=class{constructor(e,t){this.point=e;this.timestamp=t}},UB=class{constructor(e,t){this.id=e;this.startPoint=t;this.pendings=[];this.smoother=new RB;this.pendings.push(t)}get lastPoint(){return this.smoother.lastPoint}pushPending(e){this.pendings.push(e)}popPendings(){let e=this.pendings;return this.pendings=[],e}makeStrokePoint(e){let t=this.smoother.filter(e.point),n;return this.startTimestamp?n=e.timestamp-this.startTimestamp:(this.startTimestamp=e.timestamp,n=0),new cC(this.id,"stroke",t,n,UB.kColor)}makeOvalPoint(e){return new cC(this.id,"oval",e.point,e.timestamp,UB.kColor)}},OB=UB;OB.kColor=nn({a:255,r:255,g:0,b:0});var zB=class{constructor(){this.state="idle"}static nextId(){return zB.id++}get isDisabled(){return this.state==="disabled"}setDisabled(){this.state="disabled"}onPointerStarted(e){this.initializeStroke(e)}onPointerMoved(e){if(!!this.stroke){if(this.state==="pending"){if(this.detectStroke(e)){let n=this.stroke,o=e.timestamp;n.popPendings().forEach(i=&gt;{let s=new pC(i.point,o);return n.makeStrokePoint(s)})}}else if(this.state==="stroke"){let t={x:e.x,y:e.y},n=new pC(t,e.timestamp);return this.stroke.makeStrokePoint(n)}}}onPointerEnded(e){if(!this.stroke)return;let t={x:e.x,y:e.y},n;if(this.state==="pending"){let o=new pC(t,e.timestamp);n=this.stroke.makeOvalPoint(o)}return this.resetStroke(),n}initializeStroke(e){let t={x:e.x,y:e.y},n=e.timestamp;if(this.stroke)return;let o=zB.nextId(),i=new pC(t,n);this.stroke=new OB(o,i),this.state="pending"}detectStroke(e){if(!this.stroke)return!1;let t={x:e.x,y:e.y};this.stroke.pushPending(new pC(t,e.timestamp));let n=window.devicePixelRatio,o=e.totalMovementX/n,i=e.totalMovementY/n;return Math.hypot(o,i)&gt;5?(this.state="stroke",!0):!1}resetStroke(){this.stroke=void 0,this.state="idle"}},AP=zB;AP.id=0;var Ad=({canvasSize:r,notification:e,scale:t,callback:n,consumer:o})=&gt;{let i=Me(),s=(0,Uc.useRef)(null),a=(0,Uc.useRef)(new LB).current;if(e!=null&amp;&amp;e.pointer){let h=QNe(e==null?void 0:e.pointer);a.pushPoints(h)}let l=e==null?void 0:e.screenWidth,u=e==null?void 0:e.screenHeight,d=(0,Uc.useRef)(i);(0,Uc.useEffect)(()=&gt;{d.current=i},[i]);let c=(0,Uc.useRef)(),p=!!i.screenSharingState;return(0,Uc.useEffect)(()=&gt;{if(!p||!o)return;c.current=XNe(o);let h=window.setInterval(c.current.flush,100);return()=&gt;{c.current=void 0,window.clearInterval(h)}},[p]),(0,Uc.useEffect)(()=&gt;{let h=s.current;n&amp;&amp;h.addEventListener("wheel",n.onHandleWheel);let f=new Gn(h),m=new AP;f.onSingle=(v,b)=&gt;{var x,y,S;if(n==null||n.onHandleSingle(v,b),!o||!fM(b))return;v==="down"&amp;&amp;m.onPointerStarted(b);let C;v==="move"&amp;&amp;(C=m.onPointerMoved(b),C&amp;&amp;((x=c.current)==null||x.push(ZNe([C])))),v==="up"&amp;&amp;(C=m.onPointerEnded(b),(C==null?void 0:C.type)==="oval"&amp;&amp;((y=c.current)==null||y.push(JNe(C))),(S=c.current)==null||S.flush()),C&amp;&amp;a.push(C)},f.onDoubleMove=(v,b)=&gt;{n==null||n.onHandleDoubleMove(v,b),m==null||m.setDisabled()};let g=new Ha(h,{enableDragEventPropagation:!0});return g.onFreeMove=(v,b)=&gt;{var C;(C=n==null?void 0:n.onHandleFreeMove)==null||C.call(n,h,v,b)},()=&gt;{f.unbind(),g.unbind(),n&amp;&amp;h.removeEventListener("wheel",n.onHandleWheel)}},[n]),(0,Uc.useEffect)(()=&gt;{let h=s.current,f=h.getContext("2d");if(!f)throw new uo;f.clearRect(0,0,h.width,h.height),a.invalidate()},[l,u]),(0,Uc.useEffect)(()=&gt;{let h=!1,f=()=&gt;{let m=performance.now(),g=s.current;if(!(h||!g)){if(a.update(m)){let v=g.getContext("2d");if(!v)throw new uo;a.draw(v,m,t||1)}requestAnimationFrame(f)}};return requestAnimationFrame(f),()=&gt;{if(h=!0,!e){a.invalidate();let m=s.current;if(!m)return;let g=m.getContext("2d");g==null||g.clearRect(0,0,m.width,m.height)}}},[r.width,r.height]),XG.default.createElement("div",{className:"laserLayer"},XG.default.createElement("canvas",{ref:s,style:{width:`${r.width/window.devicePixelRatio}px`,height:`${r.height/window.devicePixelRatio}px`},width:r.width,height:r.height}))};function XNe(r){let e=[];return{push:o=&gt;{e.push(...o)},flush:()=&gt;{let o=[...e];e.splice(0,e.length),o.length&gt;0&amp;&amp;r.pushPoint(o)}}}function QNe(r){let e=[];for(let t=0;t&lt;r.length;t++){let n=r[t],o=eBe(n.points),i="stroke";n.type==="spotlight"&amp;&amp;(i="oval");let s=dn(n.color);for(let a=0;a&lt;o.length;a++){let l=new cC(Number(n.id),i,o[a].point,o[a].timestamp/10,s);e.push(l)}}return e}function JNe(r){let{id:e,rangeRadius:t,pivotRadius:n,durationMs:o,color:i}=r;return[{id:`${e}`,type:"spotlight",rangeRadius:t,pivotRadius:n,points:vde([r]),color:i.toARGBHex(),duration:o/1e3}]}function ZNe(r){let{id:e,pivotRadius:t,durationMs:n,color:o}=r[0];return[{id:`${e}`,points:vde(r),type:"laserPointer",color:o.toARGBHex(),radius:t,duration:n/1e3}]}function vde(r){let e=new ArrayBuffer(12*r.length),t=new Uint8Array(e),n=new DataView(e),o=0,i=window.devicePixelRatio;for(let s of r)n.setFloat32(o,s.center.x/i,!0),n.setFloat32(o+4,s.center.y/i,!0),n.setUint32(o+8,s.timestamp*10,!0),o+=12;return btoa(String.fromCharCode(...t))}function eBe(r){let e=[],t=atob(r),n=new DataView(new ArrayBuffer(t.length));for(let s=0;s&lt;t.length;s++)n.setInt8(s,t.charCodeAt(s));let o=window.devicePixelRatio,i=t.length/4/3;for(let s=0;s&lt;i;s++){let a=n.getFloat32(s*12,!0)*o,l=n.getFloat32(s*12+4,!0)*o,u=n.getInt32(s*12+8,!0);e.push({point:{x:a,y:l},timestamp:u})}return e}var ai=oe(ve());var Iu=oe(ve());var Fv=({diameter:r,color:e,period:t,diameterRatio:n,startAngle:o})=&gt;{let i=r*n/2,s=Math.PI/2-o,a=r/2+Math.cos(s)*r/2-i,l=r/2+Math.sin(s)*r/2-i;return Iu.default.createElement("div",{className:"circleActivityIndicatorElementLayer",style:{animation:`circleActivityIndicatorElementLayerAnimation ${t}s linear infinite`}},Iu.default.createElement("div",{style:{position:"absolute",width:i*2,height:i*2,top:l,left:a,backgroundColor:e.toCSSRGBA(),borderRadius:"50%"}}))},HB=({diameter:r=160})=&gt;{let e=r*.5;return Iu.default.createElement("div",{className:"circleActivityIndicator",onDragOver:o=&gt;{o.preventDefault()},onDrop:o=&gt;{o.preventDefault()}},Iu.default.createElement("div",{style:{position:"absolute",top:`calc(50% - ${e}px)`,left:`calc(50% - ${e}px)`,width:r,height:r,pointerEvents:"none"}},Iu.default.createElement(Fv,{diameter:r,color:nn({r:0,g:192,b:108,a:255}),diameterRatio:.2,startAngle:0,period:1.6}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:255,g:0,b:60,a:255}),diameterRatio:.2,startAngle:5,period:1.142857142857143}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:250,g:190,b:40,a:255}),diameterRatio:.2,startAngle:3,period:2}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:0,g:192,b:108,a:255}),diameterRatio:.12,startAngle:0,period:1.25}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:255,g:0,b:60,a:255}),diameterRatio:.12,startAngle:1,period:1.428571428571429}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:250,g:190,b:40,a:255}),diameterRatio:.12,startAngle:2,period:1.176470588235294}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:136,g:0,b:193,a:255}),diameterRatio:.12,startAngle:3,period:1.666666666666667}),Iu.default.createElement(Fv,{diameter:r,color:nn({r:0,g:136,b:193,a:255}),diameterRatio:.12,startAngle:4,period:1.481481481481481})))};var bde=1,Mv=r=&gt;{let{card:e,store:t,onClosing:n,onDismiss:o,viewMode:i,updateCoverDataBeforeUnload:s}=r,[a,l]=ai.default.useState(""),u=t.lnsEndpoint,d=Vr.getEndpoint("loilonote-quiz");if(!d)return null;let c=`${d}`,p=e.content.quiz_id,h=e.content.preset,f=Xt(t),[m,g]=ai.default.useState(!1),[v,b]=ai.default.useState(!1),[C,x]=ai.default.useState(!0);jn(()=&gt;(t.reduce(zi(!0)),window.addEventListener("message",T),()=&gt;{window.removeEventListener("message",T)})),(0,ai.useEffect)(()=&gt;{if(!Or(f))return;let B=t.screenSharingActionNotification[f],z=B&amp;&amp;B.type!=="end";m&amp;&amp;!z&amp;&amp;o(),g(z)},[f,t.screenSharingActionNotification]);let y=async()=&gt;{let z=await new Qp({lnsEndpoint:u,lnqEndpoint:d,logEnabled:t.logEnabled,locale:t.locale,appTokenManager:Vr}).getCoverData(p).catch(fe.error);if(z){let N=QG({card:e,data:z});N&amp;&amp;We(N)}},S=()=&gt;{s?y().finally(()=&gt;{o()}):o()},T=B=&gt;{if(B.origin!==c)return;let z=B.data,{version:N,command:V}=z;if(N===bde)switch(V){case"ready":b(!0);break;case"upload-completed":z.failed===!0?t.reduce(me(79,{title:j.errorOccurred,message:j.failedToSaveDataToServer.split(`
`),okMessage:j.close,cancelMessage:j.cancel,onOk:()=&gt;{S(),t.reduce(me(79,void 0))},onCancel:()=&gt;{t.reduce(me(79,void 0))},buttonColor:"inverse"})):S();break;case"handshake-request":O({command:"handshake-response"});break}};(0,ai.useEffect)(()=&gt;{i===void 0||i==="closing"||Vr.issue("loilonote-quiz").then(B=&gt;{Wu(B==null?void 0:B.app_token)&amp;&amp;l(tBe(d,p,i,B==null?void 0:B.app_token,u,f,t.locale))})},[i]);let w=(()=&gt;{if(!m)return!0;if(t.screenSharingForPresenter)return!1;if(t.screenSharingForSelf||!Or(f))return!0;let B=t.screenSharingActionNotification[f];return!B||!as(B)?!0:B.presenter===t.userInfo.user_id})(),k=(()=&gt;m?t.userInfo.is_teacher?t.screenSharingForPresenter?!0:!t.screenSharingForSelf:!1:!0)(),A=w||k,I;typeof f=="number"&amp;&amp;(I=t.screenSharingActionNotification[f]);let E=ai.default.useRef(null),O=B=&gt;{var N,V;let z={version:bde,...B};(V=(N=E.current)==null?void 0:N.contentWindow)==null||V.postMessage(z,c)},Q=()=&gt;{v?(O({command:"will-unmount"}),n()):s?y().finally(o):o()},j=pe(),U;if(i==="closing")U=j.saving;else switch(h){case"survey":U=j.preparingQuestionnaire;break;case"test":U=j.preparingTest;break}return ai.default.createElement("div",{className:"testCardContainer","data-type":C?`quiz-${h}`:void 0},C&amp;&amp;ai.default.createElement(ai.default.Fragment,null,ai.default.createElement("div",{className:"testCardLoadingProgressLabel"},U),ai.default.createElement(_t,{style:{position:"absolute",top:"30%",left:"25%",width:"50%"}})),ai.default.createElement("iframe",{className:"testCardFrame",sandbox:"allow-scripts allow-forms allow-modals allow-same-origin allow-downloads",allowFullScreen:!0,allow:"fullscreen",src:a,ref:E,onLoad:()=&gt;x(!1)}),A&amp;&amp;ai.default.createElement("div",{className:"testCardTopBarContainer"},ai.default.createElement("div",{className:"testCardTopBarContainerInner"},ai.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},w&amp;&amp;ai.default.createElement("div",{className:"editorButtonWrapper"},ai.default.createElement("div",{className:"editorButton",onClick:Q},ai.default.createElement("div",{className:"editorButtonIcon backButtonIcon"})))),k&amp;&amp;Or(f)&amp;&amp;as(I)&amp;&amp;ai.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},ai.default.createElement("div",{className:"flexSpacer"}),ai.default.createElement(Au,{store:t,courseId:f,sessionId:I.id,publisher:I.publisher,forStudent:I.publisher===t.userInfo.user_id})))),i==="closing"&amp;&amp;ai.default.createElement(HB,null))};function QG(r){var s,a;let{card:e,data:t}=r,{content:n}=e,o={};n.title!==t.title&amp;&amp;(o["content.title"]=t.title),n.question_count!==t.questionCount&amp;&amp;(o["content.question_count"]=t.questionCount);let i=GM(t);if(n.isAnswered!==i&amp;&amp;(o["content.isAnswered"]=i),((s=n.quiz_author)==null?void 0:s.id)!==t.author.id&amp;&amp;(o["content.quiz_author.id"]=t.author.id),((a=n.quiz_author)==null?void 0:a.name)!==t.author.name&amp;&amp;(o["content.quiz_author.name"]=t.author.name),n.is_result_opened!==t.isResultOpened&amp;&amp;(o["content.is_result_opened"]=t.isResultOpened),Object.keys(o).length&gt;0)return On(e.id,o)}function tBe(r,e,t,n,o,i,s){return`${r}/quiz/${e}?${t==="preview"?"viewMode=preview&amp;":t==="result"?"viewMode=result&amp;":t==="answer"?"viewMode=answer&amp;":t==="game"?"viewMode=game&amp;":""}app_token=${n}&amp;lns_endpoint=${o}&amp;course_id=${i}&amp;language_type=${Hm(s)}`}function yde(){let r,e=[];function t(){return r}function n(a){return!!e.find(l=&gt;l===a.id)}function o(a){r=a.rootParent(),r.document||(r=a),e=[...r.iteratorOverGroup()].map(l=&gt;l.id)}function i(a){e.some(l=&gt;l===a.id)&amp;&amp;(r=a)}function s(){r=void 0,e=[]}return{set:o,get:t,update:i,clear:s,rootCards:n}}var Cde=v0.toCSSRGBA(),Id=class{constructor(e){this.minZoom=.1;this.fitZoom=Math.sqrt(1/2);this.maxZoom=16;this.fineStrokeRenderStrategy="redraw";this._mtx=new ft;this.shouldHandleEvent=!1;this.handleSingle=(e,t)=&gt;{this.sar.needsDisplay();let{editorStore:n}=this.state,{selectedTool:o}=n;if(Cx(t))o!==1&amp;&amp;this.handleRightSingle(e,t);else if(fM(t)){let i=!1;if(this.state.editorStore.selectedTool===1)if(i=!0,e==="down"){let s=this.getObjectUnderPoint(t);(s==null?void 0:s.card)===this.card&amp;&amp;wc(s.eventTarget)&amp;&amp;(i=!1)}else Kt(this.card,this.callback).handlingComponent&amp;&amp;(i=!1);i?this.handlePointerDraw(e,t):this.state.editorStore.narrationRecording?this.handlePointerNarrationRecording(e,t):this.handleLeftSingle(e,t)}};this.onRemoteStroke=({cmd:e,sender:t})=&gt;{let n=this.role.drawnType,o=t.id;if(e.type==="userLeft"){this.fineStrokeRenderer.clearCurrent(n,o),this.strokeManager.deleteRemoteCurrentStroke(o);return}if(e.cardId===this.card.id)if(e.operation==="write"){let i=vg(e.content),s=this.strokeManager.setRemoteCurrentStroke({sessionId:o,content:i,zoom:this.mtx.a,isRuler:e.usage==="replace"}),a=Xr(this.canvas,this.card.size),l=new ft().scale(a).prependMatrix(this.mtx);this.fineStrokeRenderer.appendStroke({canvasSize:this.canvas,mtx:l,card:this.card,type:n,stroke:s,isEraser:s.type==="eraser",sessionId:o})}else e.operation==="add"?(this.fineStrokeRenderer.commitCurrent(n,o),this.fineStrokeRenderer.clearCurrent(n,o),this.strokeManager.deleteRemoteCurrentStroke(o)):e.operation==="cancel"&amp;&amp;(this.fineStrokeRenderer.clearCurrent(n,o),this.strokeManager.deleteRemoteCurrentStroke(o))};this.handledDoubleFinger=!1;this.handleDoubleMove=(e,t)=&gt;{var u;let n=30;if(this.state.editorStore.selectedTool===1){let d=this.strokeManager,c=(u=d.currentStroke)==null?void 0:u.id,p=d.cancelStroke();this.setDrawnCursorVisible(!1),this.setDrawnLassoVisible(!1),p?(this.endDrawn(p),p.strokes.forEach(this.emitStrokeAdded)):(this.fineStrokeRenderer.clearCurrent(this.role.drawnType),n=1,c&amp;&amp;this.emitStrokeCancel(c))}let o=this.mtx.clone();this.handledDoubleFinger=!0,this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(n),this.fineStrokeRenderStrategy="redraw",o.prependMatrix(pM({ev1:e,ev2:t,minZoom:this.minZoom,maxZoom:this.maxZoom,zoom:o.a}));let{minTx:i,maxTx:s,minTy:a,maxTy:l}=this.getScrollLimit(o.a);o.tx=it(o.tx,i,s),o.ty=it(o.ty,a,l),this.mtx=o,this.updateFullScreenSharing(),this.zoomTimer.set(this.zoomCommitted,250),this.state.store.reduce(Ar(!1),hn(void 0))};this.zoomTimer=mg();this.handleWheel=e=&gt;{if(e.stopPropagation(),e.preventDefault(),this.abortBounceAnimation(),this.hasAnimation()||this.state.editorStore.selectedTool===1&amp;&amp;this.strokeManager.currentStroke)return;let t=this.mtx.clone();this.sar.setFineRedrawCountDown(30),this.sar.needsDisplay(),this.fineStrokeRenderStrategy="redraw";let n=e.ctrlKey?this.state.store.userPreference.trackpadPinchZoomMultiplier:this.state.store.userPreference.mouseWheelMultiplier,o=hM({ev:e,minZoom:this.fitZoom*.9,maxZoom:this.maxZoom,zoom:t.a,invert:this.state.store.userPreference.invertMouseWheel,multiplier:n});t.prependMatrix(o);let{minTx:i,maxTx:s,minTy:a,maxTy:l}=this.getScrollLimit(t.a);t.tx=it(t.tx,i,s),t.ty=it(t.ty,a,l),this.mtx=t,this.updateFullScreenSharing(),this.zoomTimer.set(this.zoomCommitted,250),this.state.store.reduce(Ar(!1),hn(void 0))};this.zoomCommitted=()=&gt;{let e=this.fitZoom+(1-this.fitZoom)/2,t=this.mtx.a;t&lt;=e?this.zoomAnimation=As({from:t,to:this.fitZoom,easing:ms,duration:.25}):t&lt;=1&amp;&amp;(this.zoomAnimation=As({from:t,to:1,easing:ms,duration:.25})),this.state.editorStore.setZoom(t),this.invalidateChildrenMipmap()};this.parentStack=[];this.rootCardMonitor=yde();this.prevLoading=!0;this._updater=new vv;this.closed=!1;this.laserPointerConsumer=this.createLaserPointerConsumer();this.emitStrokeWrite=e=&gt;{if(this.card.document)return;let t=Bb(this.state.store,!1),n=this.drawToolPref(t);if(n===void 0)return;let{isRuler:o}=n,i=o?e.content:e.contentLastPoint;We(KY({cardId:this.card.id,isRuler:o,content:b_(i),type:this.role.drawnType}))};this.emitStrokeCancel=e=&gt;{this.card.document||We(qY({cardId:this.card.id,strokeId:e,type:this.role.drawnType}))};this.emitStrokeAdded=e=&gt;{this.card.document||We(YY({cardId:this.card.id,content:b_(e.content),type:this.role.drawnType}))};this.emitStrokeDeleted=e=&gt;{this.card.document||We(XY({cardId:this.card.id,strokeId:e.id,type:this.role.drawnType}))};this.onReadonly=()=&gt;{if(!this.card.document){this.fineStrokeRenderer.clearCurrent(this.role.drawnType),this.strokeManager.cancelStroke(!0);for(let e of this.card.familyIterator())Kt(e,this.callback).endResize()}};var a,l,u;this.state=e.state,this.canvas=e.canvas;let t=document.createElement("div");t.classList.add("editorDrawnCursor"),t.style.visibility="hidden",this.drawnCursor=t,this.canvas.after(t);let n=document.createElement("div");n.classList.add("editorDrawnLasso"),n.style.visibility="hidden",this.drawnLasso=n,this.canvas.after(n),this.playManager=e.playManager,this._decorateFavorites=e.decorateFavorites,this.role=e.role;let o=fr.create(e.canvas),i=fr.create(e.canvas);this.sar=oN({roughCanvas:i,fineCanvas:o}),this.callback=e.callback,this.shrinkManager=new zx,this.longHoverDetector=new Hx(500),this.documentPagerDelegate=e.documentPagerDelegate,this.canvas.addEventListener("wheel",this.handleWheel),this.card=e.state.card,this.fineStrokeRenderer=Oa.forEditorRoot(),this.layout=new $1(this.card),this.quizButtonState=void 0,this.restoreParentStack(this.state.viewStack);let s=()=&gt;{let d=Nt(e.state.screen,window.devicePixelRatio);return new ft(1,0,0,1,d.width/2,d.height/2)};this.onNextState(e.state,(a=e.mtx)!=null?a:s()),this.remotePointerManager=e.remotePointerManager,this.pointerSubscription=(l=this.remotePointerManager)==null?void 0:l.subscribe(d=&gt;{d.cardId===this.card.id&amp;&amp;this.setNeedsDisplay()}),this.strokeSubscription=(u=e.remoteStrokeBus)==null?void 0:u.subscribe(this.onRemoteStroke)}get strokeManager(){let e=this.role.drawnType;return Xn.get(e,this.card)}get width(){return this.canvas.width}get height(){return this.canvas.height}getCardSizeOnCanvas(e,t){let n=Xr(this.canvas,e.size)*t;return Nt(e.size,n)}get mtx(){return this._mtx}set mtx(e){let t=!this._mtx.equals(e);this._mtx=new ft(e.a,e.b,e.c,e.d,e.e,e.f),t&amp;&amp;this.callback.onZoomScroll(e.clone())}initialMatrix(){return new ft(1,0,0,1,this.width/2,this.height/2)}set decorateFavorite(e){this._decorateFavorites=e}createCardsInsertionCommand(e,t){let n=this.getCardTransform(),o=zt(t),i={id:t.user_id,name:o},{color:s,backcolor:a,text:l}=e,u;if(e.position){let d=window.devicePixelRatio;u=uu(n.inverted().cross(e.position.x*d,e.position.y*d))}else{let d=kt,c=this.layout.add(d,!1);u=tn(c)}return _Y({position:u,color:s,backcolor:a,text:l,author:i,firedCard:this.card,isTransition:!e.position})}onTextCardDroppedInSelf(e){let t=this.createCardsInsertionCommand(e,this.state.store.userInfo),n=t.cards[0].id;if(this.cardInsertionEvent={cardId:n,type:"inside"},We(t),e.unmodified){let o=this.card.getCard(n);if(o){let{id:i,lastModified:s}=o;this.modificationMonitoredCard={id:i,lastModified:s}}}}createDroppedSheet(e){let t=this.state.store,n=qx(e.sheetType),[o]=n.split("/").splice(-1,1),[i,s]=o.split("."),a=window.devicePixelRatio,l=this.getCardTransform().inverted().cross(e.position.x*a,e.position.y*a),u=br(xi,kt);return cc({author:{id:t.userInfo.user_id,name:zt(t.userInfo)},asset:{description:i,extension:s},position:l,pageIndex:0,pageSize:{...xi},layoutSize:u,usage:"thinking_tool"})}onSheetDropped(e){this.cardInsertionEvent={cardId:e.id,type:"inside"};let t=e.metadata.position.left,n=e.metadata.position.top;We(C_({creator:this.card,card:e,type:"inside",position:{x:t,y:n},ignoreTransition:!0}))}onCardInsertedInSelf(e){this.cardInsertionEvent={cardId:e.card.id,type:e.type};let t=this.layout.add(e.card.metadata.layout_size,!1),n=tn(t);this.card.pinned&amp;&amp;e.type==="next"&amp;&amp;We(cu(this.card.id,!1)),We(C_({creator:this.card,card:e.card,type:e.type,position:n}))}adjustViewport(e){if(!this.callback.getCardOnNote||!e.transitions||e.transitions.length===0)return;let t=lN(e.transitions,this.callback.getCardOnNote);if(!t)return;let n=new Sn(this.viewportRect()),o=uN({viewport:n,inflate:new Sn(t)}),i=dN(n,o,this.canvas);if(!i)return;let s=Eo(this.card.bounds),a=100*s,l=Math.max(n.height/(o.height+a),n.width/(o.width+a)),u=Math.max(this.mtx.a*l,this.minZoom);this.zoomAnimPivot=i,this.zoomAnimation=As({from:this.mtx.a,to:u,duration:.3}),this.invalidateChildrenMipmap()}viewportRect(){let e=Xr(this.canvas,this.card.size),t=new ft().translate(-this.card.position.x,-this.card.position.y).scale(e).prependMatrix(this.mtx).inverted(),n=qe(0,0,this.canvas.width,this.canvas.height);return t.transformRect(qe(),n)}async onWebCardInserted(e){let{store:t}=this.state,{url:n,thumbnailFile:o}=e,i=await ki.fromFile(o),s=Zo.get(ha(o)),[a]=i.getLayoutSize(),l,u;if(e instanceof ip&amp;&amp;e.position){let p=window.devicePixelRatio;l=this.getCardTransform().inverted().cross(e.position.x*p,e.position.y*p),u=!1}else{let p=this.layout.add(a,!1);l=tn(p),u=!0}let d=t.userInfo,c=FY({creator:this.card,author:{id:d.user_id,name:zt(d)},url:n,position:l,contentSize:a,isTransition:u});this.cardInsertionEvent={cardId:c.cards[0].id,type:"inside"},qi(t,{file:o,metadata:i.getMetadata(),description:e.title,extension:s,cardIdList:[c.cards[0].id],thumbnailsGenerator:()=&gt;i.generateThumbnails()}),We(c)}async onWebCardInsertedFromQr(e){let{store:t}=this.state,{created:n,type:o,thumbnail:i}=e,[s]=i.getLayoutSize(),a=this.layout.add(s,!1),l=tn(a);this.card.pinned&amp;&amp;o==="next"&amp;&amp;We(cu(this.card.id,!1));let u=C_({creator:this.card,card:n,position:l,type:o});this.cardInsertionEvent={cardId:u.cards[0].id,type:o};let d=Zo.get(ha(i.file));qi(t,{file:i.file,metadata:i.getMetadata(),extension:d,cardIdList:[u.cards[0].id],thumbnailsGenerator:()=&gt;i.generateThumbnails()}),We(u)}async onPictureCardCreateFromExtension(e){let{store:t}=this.state,n=t.userInfo,o=e.file,i=await ki.fromFile(o),s=Zo.get(ha(o)),[a]=i.getLayoutSize(),l=this.layout.add(a,!1),u=tn(l),d=MY({creator:this.card,author:{id:n.user_id,name:zt(n)},position:u,asset:{description:i.name,extension:s},contentSize:a});this.cardInsertionEvent={cardId:d.cards[0].id,type:"inside"},qi(t,{file:o,metadata:i.getMetadata(),extension:s,cardIdList:[d.cards[0].id],thumbnailsGenerator:()=&gt;i.generateThumbnails()}),We(d)}async onCardPastedInEditor(e){var u,d;let t=Die(e.head.copyGroup({}));t.pinned=!1;let n=t.headGroup(),o=window.devicePixelRatio,i,s;if(e.position)i=this.getCardTransform().inverted().cross(e.position.x*o,e.position.y*o);else{let c=n.size,p=this.layout.add(c,t.isFolded);i=tn(p),s=De(i.x,this.card.bounds.y-p.height)}let a=nf({head:n,destPosition:i,parent:this.card,startPosition:s});We(a);let l=(d=(u=this.callback).getCardOnNote)==null?void 0:d.call(u,a.cards[0].id);l&amp;&amp;this.state.store.reduce(Hi({id:l.id,favorite:l.favorite,pinned:l.pinned,canPin:l.canPin(),canAlign:l.canAlign(),canRotate:l.canRotate(),bounds:this.boundingBoxRectToScreen(l.bounds)}))}async onLocalFileInserted(e){let t=he.get().strings,{store:n}=this.state,[o]=e.file.getLayoutSize(),i=e.file instanceof rl,s=this.layout.add(o,i),a=tn(s);this.card.pinned&amp;&amp;e.type==="next"&amp;&amp;We(cu(this.card.id,!1));let l=wU({creator:this.card,type:e.type,position:a,user:n.userInfo,file:e.file}),u=e.file.getMetadata(),d=l.cards.map(p=&gt;p.id),{extension:c}=e.file;(Za(c)||Hh(c))&amp;&amp;ie.fileManager.setContentLocalFileAsset(d,e.original),qi(n,{file:e.original,metadata:u,extension:e.file.extension,cardIdList:d,thumbnailsGenerator:()=&gt;e.file.generateThumbnails()}),e.type==="inside"&amp;&amp;n.reduce(Jt({type:"normal",text:t.didInsertFile})),this.cardInsertionEvent={cardId:l.cards[0].id,type:e.type},We(l)}async onLocalFilePasted(e){let t=he.get().strings,n=await WS(e.files),o=await Promise.all(n.map(Vg));if(o.some((l,u)=&gt;{if(l instanceof ji){let d=e.files[u];return Yx(d,l)}})){let l=he.get().strings;if(!confirm(l.exceedVideoQuality))throw new Oh("abort video-file uploading.")}let s=this.state.store.userInfo,a=this.state.store;for(let l=0;l&lt;n.length;l++){let u=o[l],[d]=u.getLayoutSize(),c;if(l===0&amp;&amp;e.position){let v=window.devicePixelRatio,b=this.getCardTransform().inverted().cross(e.position.x*v,e.position.y*v);c=this.layout.set(b,d)}else{let v=u instanceof rl&amp;&amp;u.pageSizes.length&gt;1;c=this.layout.add(d,v)}let p=tn(c),h=wU({creator:this.card,type:"inside",file:u,user:s,position:p,ignoreTransition:e.position!==void 0}),f=u.getMetadata(),m=h.cards.map(v=&gt;v.id),{extension:g}=u;(Za(g)||Hh(g))&amp;&amp;ie.fileManager.setContentLocalFileAsset(m,n[l]),qi(a,{file:n[l],metadata:f,extension:u.extension,cardIdList:m,thumbnailsGenerator:()=&gt;u.generateThumbnails()}),a.reduce(Jt({type:"normal",text:t.didInsertFile})),We(h)}}onNoteEffect(e){var o,i;let t=e.command,n=e.byOtherUserId==null;if(t.type==="cardsInserted"){let[s]=t.cards;if(this.cardInsertionEvent&amp;&amp;s.id===this.cardInsertionEvent.cardId){let a=this.cardInsertionEvent;if(this.cardInsertionEvent=void 0,a.type==="inside"){let{left:l,top:u}=s.metadata.position,{width:d,height:c}=s.metadata.layout_size;this.state.store.reduce(Hi({id:s.id,favorite:!1,pinned:!1,canPin:!0,canAlign:!1,canRotate:s.type==="picture",bounds:this.boundingBoxRectToScreen({x:l-d/2,y:u-c/2,width:d,height:c})}),Ar(!1),hn(void 0)),this.adjustViewport(t)}else this.startCardPager({dir:"next"})}else(o=t.transitions)!=null&amp;&amp;o.some(a=&gt;a.cardId===this.card.id)&amp;&amp;this.layout.reset()}else if(t.type==="cardDeleted")if(t.cardId===this.card.id)if(t.toCardId&amp;&amp;this.callback.getCardOnNote){let s=this.callback.getCardOnNote(t.toCardId);if(!s)throw new Error("can not found card on note");this.setCard({card:s}),this.callback.onCardSelected(s)}else this.popPage(!0);else this.card.isDescendantOf(t.cardId)&amp;&amp;this.popPage(!0);else if(t.type==="groupDeleted")(e.effect.deleted.includes(this.card.id)||e.effect.deleted.some(s=&gt;this.card.isDescendantOf(s)))&amp;&amp;this.popPage(!0);else if(t.type==="cardMoved")!n&amp;&amp;t.cardId===this.card.id&amp;&amp;this.layout.reset();else if(t.type==="groupMoved")!n&amp;&amp;t.topOfGroup===this.card.head().id&amp;&amp;this.layout.reset();else if(t.type==="cardsCopied"){if(!n){(i=t.transitions)!=null&amp;&amp;i.some(a=&gt;a.cardId===this.card.id)&amp;&amp;this.layout.reset();return}let s=this.card.getCard(t.srcCardId);if(t.isRootCard)if(t.grouped)this.popPage(!1);else if(s.pinned)this.popPage(!1);else{let[a]=t.cards;this.startCardPager({dir:"next"})}else this.adjustViewport(t)}else if(t.type==="cardEdited"){let s=t.replacement["metadata.playback_rate"],a=this.card.id===t.cardId;!n&amp;&amp;a&amp;&amp;s!==void 0&amp;&amp;this.state.editorStore.setAvSpeedScale(s)}else t.type==="cardSizesChanged"?!n&amp;&amp;t.firedCardId===this.card.id&amp;&amp;this.layout.reset():t.type==="cardMarginsChanged"?!n&amp;&amp;t.cardId===this.card.id&amp;&amp;this.layout.reset():t.type;this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1)}clearCardModificationMonitor(){let e=this.modificationMonitoredCard;return this.modificationMonitoredCard=void 0,e}getCardTransformInTransform(e,t){let n=new ft,o=e.size;if(e===this.card){let{resizeStartSize:i}=Kt(e,this.callback);i&amp;&amp;(o=i.bounds)}return n.scale(Xr(this.canvas,o)),n.e=-e.position.x*n.a,n.f=-e.position.y*n.d,n.prependMatrix(t),n}getCardTransform(){return this.getCardTransformInTransform(this.card,this.mtx)}handlePointerNarrationRecording(e,t){let n;e==="down"?(n=void 0,this.abortBounceAnimation()):e==="move"?(n="free",this.updateMtxTransition(t,n),this.sar.setFineRedrawCountDown(30)):e==="up"&amp;&amp;(this.setAnimation(t,n),this.sar.setFineRedrawCountDown(1),this.handledDoubleFinger=!1,n=void 0),this.state.editorStore.setEditorMoveMode(n)}handleLeftSingle(e,t){var i,s,a,l,u;if(e==="down"&amp;&amp;(this.shouldHandleEvent=!0,this.abortBounceAnimation()),!this.shouldHandleEvent||this.translateAnimation)return;e==="up"&amp;&amp;(this.shouldHandleEvent=!1,this.sar.setFineRedrawCountDown(30));let n=this.handleEventOnCard(e,t);if((i=this.state.store.desktop)!=null&amp;&amp;i.positionPopoverOpen){let d=Mf(t),c=oi(t);(e==="move"&amp;&amp;d&gt;5||e==="up"&amp;&amp;c)&amp;&amp;this.state.store.reduce(hn(void 0))}if(n&amp;&amp;!this.state.editorStore.moveMode){if(e==="down"){this.touchDownCardPosition=De(n.renderer.card.position);let c=(s=n.renderer.moveCardTarget)==null?void 0:s.card;c&amp;&amp;(this.callback.onHoverCard(c.parent),this.shrinkManager.heldUp({card:c,grouped:c.isFolded||n.target==="foldHandle"}))}else if(e==="move"){let c=(a=this.state.store.desktop)==null?void 0:a.heldCard,p=c&amp;&amp;this.card.getCard(c.head);if(p){let h=this.getCardTransform(),f=h.a,m=h.inverted().cross(t.x,t.y),g=$M({cardHolder:this.card,card:p,desktopScale:f,forHitTest:!0,pivot:m,rootCard:this.card,withGroup:n.target==="foldHandle"});aN({nextHover:g,root:this.card,pivot:m,desktopScale:f,shrinkManager:this.shrinkManager,longHoverDetector:this.longHoverDetector,onHoverChanged:this.callback.onHoverCard})}}this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw();let d=n.target;if(d==="card"||d==="foldHandle"||d==="bbLeftTop"){let c=(l=n.movedCard)!=null?l:n.renderer.card,p=Kt(c,this.callback);this.publishTrashBoxInIfNeeded({ev:t,renderer:p,grouped:d==="foldHandle"||c.isFolded,up:e==="up"})}return}if(this.quizButtonState&amp;&amp;this.handleEventOnCoverButton(t,e,this.quizButtonState,d=&gt;{var c,p;return(p=(c=this.callback).onQuizButtonClicked)==null?void 0:p.call(c,d)})||this.attendanceButtonState&amp;&amp;this.handleEventOnCoverButton(t,e,this.attendanceButtonState,d=&gt;{var c,p;return(p=(c=this.callback).onAttendanceButtonClicked)==null?void 0:p.call(c,d)}))return;let o=this.getEditorMoveMode(e,t);this.state.editorStore.setEditorMoveMode(o),e==="move"?(this.updateMtxTransition(t,o),o==="horizontal"||o==="vertical"?this.sar.setFineRedrawCountDown(1):this.sar.setFineRedrawCountDown(30),Mf(t)&gt;5&amp;&amp;((u=this.state.store.desktop)==null?void 0:u.popoverOpen)&amp;&amp;this.state.store.reduce(Ar(!1))):e==="up"&amp;&amp;(oi(t)&amp;&amp;(this.shouldExitTextEditingOnUnhandledMouseUp(t)&amp;&amp;(this.state.editorStore.setTool(0),this.state.store.reduce(ti())),this.updateFullScreenSharing()),this.sar.setFineRedrawCountDown(1),this.handledDoubleFinger=!1)}getEditorMoveMode(e,t){let n,o=this.state.editorStore.moveMode;return e==="move"?o=o!=null?o:this.judgeMoveMode(t):e==="up"&amp;&amp;((!oi(t)||!this.shouldExitTextEditingOnUnhandledMouseUp(t))&amp;&amp;(n=this.setAnimation(t,o)),n instanceof Ff?o="vertical":n instanceof Pc?o="horizontal":o=void 0),o}shouldExitTextEditingOnUnhandledMouseUp(e){if(this.state.editorStore.selectedTool!==2)return!1;let t=this.getCardUnderPoint(e);return!(t&amp;&amp;al(t)&amp;&amp;t.gadgets.title&amp;&amp;t.gadgets.title.text.length&gt;0)}handleRightSingle(e,t){var o,i,s;if(this.state.editorStore.narrationRecording||e!=="up"||!oi(t))return;if(!this.state.editorStore.toolVisible){this.state.editorStore.setToolVisible(!0),this.state.store.reduce(zi(!0));return}if(!this.role.enableRightClick||!!((o=this.state.store.screenSharingState)!=null&amp;&amp;o.sessionId))return;let n=this.getCardUnderPoint(t);if(!n||n===this.card){if(this.state.editorStore.selectedTool===2)this.state.editorStore.setTool(0);else{let a=window.devicePixelRatio,l=De(t.x/a,t.y/a);this.state.store.reduce(hn(l),Ar(!1))}return}else!al(n)&amp;&amp;this.state.editorStore.selectedTool===2&amp;&amp;this.state.editorStore.setTool(0);this.state.store.reduce(Hi({id:n.id,pinned:n.pinned,favorite:n.favorite,canPin:n.canPin(),canRotate:n.canRotate(),canAlign:n.canAlign(),bounds:this.boundingBoxRectToScreen(n.bounds)}),hn(void 0),Ar(!0)),(s=(i=this.callback).bringChildToFront)==null||s.call(i,n,!1),this.sar.setFineRedrawCountDown(1)}judgeMoveMode(e){if(!e.down)return;let t=window.devicePixelRatio,n=e.x-e.down.x,o=e.y-e.down.y,i=5*t;if(Math.abs(n)&lt;i&amp;&amp;Math.abs(o)&lt;i)return;let{selectedTool:s}=this.state.editorStore;if(Math.abs(n)&lt;Math.abs(o)&amp;&amp;o&gt;0&amp;&amp;s!==2){if(this.mtx.a&lt;=1)return this.canLeave()?"vertical":"horizontal"}else{if(Math.abs(n)&lt;Math.abs(o)||!this.role.canLeave)return"free";{let a=this.getOverScrollAmount(this.mtx.tx+n,this.mtx.ty+o,this.mtx.a);if(a.left&gt;0&amp;&amp;n&gt;0&amp;&amp;this.hasPrev||a.right&gt;0&amp;&amp;n&lt;0&amp;&amp;this.hasNext)return"horizontal"}}return"free"}canLeave(){let e=this.role.canLeave;return e&amp;&amp;WE(this.state.store)&amp;&amp;(e=!this.rootCardMonitor.rootCards(this.card)),this.state.editorStore.quizSharingModeDialogOpen&amp;&amp;(e=!1),e}get hasPrev(){var e,t;return this.card.hasPrevCardOrGroup||((t=(e=this.documentPagerDelegate)==null?void 0:e.hasPreviousDocument())!=null?t:!1)}get hasNext(){var e,t;return this.card.hasNextCardOrGroup||((t=(e=this.documentPagerDelegate)==null?void 0:e.hasNextDocument())!=null?t:!1)}getScrollLimit(e){let t=this.getCardSizeOnCanvas(this.card,e),n=window.devicePixelRatio,o=this.state.screen.keyboardHeight*n,i=$e(this.width,this.height-o),s,a;i.width&lt;t.width?(s=i.width-t.width/2,a=t.width/2):s=a=i.width/2;let l,u;return i.height&lt;t.height?(l=i.height-t.height/2,u=t.height/2):l=u=i.height/2,{minTx:s,minTy:l,maxTx:a,maxTy:u}}getOverScrollAmount(e,t,n){let{minTx:o,maxTx:i,minTy:s,maxTy:a}=this.getScrollLimit(n),l=Math.max(0,e-i),u=Math.max(0,o-e),d=Math.max(0,t-a),c=Math.max(0,s-t);return{left:l,top:d,right:u,bottom:c}}updateMtxTransition(e,t){let n=this.mtx.clone();if(t==="horizontal")n.tx+=e.dx,this.mtx=n;else if(t==="vertical")n.ty+=e.dy,n.ty&lt;this.height/2&amp;&amp;(n.ty=this.height/2),this.mtx=n;else if(t==="free"){let o=this.getOverScrollAmount(n.tx+e.dx,n.ty+e.dy,n.a),i;o.left===0&amp;&amp;o.right===0?i=1:i=.2;let s;o.top===0&amp;&amp;o.bottom===0?s=1:s=.2,n.tx+=e.dx*i,n.ty+=e.dy*s,this.mtx=n,i===1&amp;&amp;s===1&amp;&amp;this.updateFullScreenSharing()}}setAnimation(e,t){if(!e.down)return;let n=e.timestamp-e.down.timestamp,o=Math.abs(e.x-e.down.x),i=window.devicePixelRatio,s=!this.handledDoubleFinger&amp;&amp;n&lt;500&amp;&amp;o&gt;2*i,a=this.getOverScrollAmount(this.mtx.tx,this.mtx.ty,this.mtx.a);if(this.role.canLeave)if(t==="horizontal"){let l=s||a.left&gt;=this.width/2||a.right&gt;=this.width/2;l&amp;&amp;a.right&gt;0&amp;&amp;this.hasNext?this.startPager({dir:"next"}):l&amp;&amp;a.left&gt;0&amp;&amp;this.hasPrev&amp;&amp;this.startPager({dir:"prev"})}else t==="vertical"&amp;&amp;this.mtx.a&lt;=1&amp;&amp;(s||a.top&gt;=this.height/2)&amp;&amp;this.startPopStackAnimation();if(!this.translateAnimation){let l=Sx(e,.5);this.startBounceAnimation(l)}return this.translateAnimation}canStartPaging(){return this.role.canLeave?!this.state.editorStore.quizSharingModeDialogOpen:!1}startPager(e){if(!this.canStartPaging())return;let{dir:t}=e;t==="next"?(Ee(this.hasNext),this.card.hasNextCardOrGroup?this.startCardPager({dir:t}):this.startDocumentPager(t,!1)):(Ee(this.hasPrev),this.card.hasPrevCardOrGroup?this.startCardPager({dir:t}):this.startDocumentPager(t,!1))}startCardPager(e){if(!this.canStartPaging())return;let{dir:t}=e,n=.5,o=De(this.mtx.tx,this.mtx.ty),i=this.height/2;if(this.state.editorStore.setEditorMoveMode("horizontal"),t==="next"){let s=this.card.next||this.card.nextGroup;if(!s)return;let a=this.width/2-this.getDistanceToAdjacentCard(s),l=De(a,i),u=Rl(o,l,n,ms);this.translateAnimation=new Pc(u,t)}else if(t==="prev"){let s=this.card.prev||this.card.prevGroup;if(!s)return;let a=this.width/2+this.getDistanceToAdjacentCard(s),l=De(a,i),u=Rl(o,l,n,ms);this.translateAnimation=new Pc(u,t)}}startDocumentPager(e,t){var a,l;if(!this.canStartPaging())return;let n=.5,o=De(this.mtx.tx,this.mtx.ty),i=this.height/2;this.state.editorStore.setEditorMoveMode("horizontal");let s={jumpToHead:t};if(e==="next"){if(!((a=this.documentPagerDelegate)!=null&amp;&amp;a.hasNextDocument()))return;this.documentPagerDelegate.onDocumentLoading(e);let u=-this.width/2,d=De(u,i),c=Rl(o,d,n,ms);this.translateAnimation=new Pc(c,e,s)}else if(e==="prev"){if(!((l=this.documentPagerDelegate)!=null&amp;&amp;l.hasPreviousDocument()))return;this.documentPagerDelegate.onDocumentLoading(e);let u=this.width*3/2,d=De(u,i),c=Rl(o,d,n,ms);this.translateAnimation=new Pc(c,e,s)}}getDistanceToAdjacentCard(e){let t=this.getCardSizeOnCanvas(this.card,this.mtx.a),n=this.getCardSizeOnCanvas(e,1),{width:o}=this.canvas,i=20*window.devicePixelRatio,s=Math.max(i,(o-t.width)/2),a=Math.max(i,(o-n.width)/2),l=Math.max(0,s+a);return t.width/2+l+n.width/2}startPopStackAnimation(){if(!this.canLeave())return;this.state.store.reduce(zi(!0)),this.card.parent&amp;&amp;this.state.editorStore.setToolVisible(!0),this.state.editorStore.setEditorMoveMode("vertical");let e=this.height*1.5;this.translateAnimation=new Ff(Rl(De(this.mtx.tx,this.mtx.ty),De(this.mtx.tx,e),.25,ms))}startBounceAnimation(e){if(this.translateAnimation)return;let t=this.mtx.clone(),n=this.getOverScrollAmount(t.tx,t.ty,t.a),o=.25,i=t.tx,s=t.ty;if(n.left&gt;0?i=t.tx-n.left:n.right&gt;0&amp;&amp;(i=t.tx+n.right),n.top&gt;0?s=t.ty-n.top:n.bottom&gt;0&amp;&amp;(s=t.ty+n.bottom),i!==t.tx||s!==t.ty)this.translateAnimation=Rl(De(this.mtx.tx,this.mtx.ty),De(i,s),o,ms);else{let a=De(this.mtx.tx,this.mtx.ty),{minTx:l,minTy:u,maxTx:d,maxTy:c}=this.getScrollLimit(this.mtx.a);this.translateAnimation=tM({start:a,velocity:e,minX:l,minY:u,maxX:d,maxY:c})}}abortBounceAnimation(){this.translateAnimation instanceof Pc||this.translateAnimation instanceof Ff||(this.translateAnimation=void 0)}startTrimmedBounceAnimation(e){let{card:t}=this,n=this.getCardTransform(),o=n.a/e.a,i=this.fitZoom,s=i/o,a=.25;this.zoomAnimation=As({from:s,to:i,duration:a,easing:ms});let l=e.transformRect(qe(),t.bounds),u=n.transformRect(qe(),t.bounds),d=tn(l),c=tn(u),p=Jo(c,d);this.translateAnimation=Rl(De(this.mtx.tx-p.x,this.mtx.ty-p.y),De(this.width*.5,this.height*.5),a,ms)}updateTrimmingMtx(e,t){let n=this.getCardTransformInTransform(this.card,e),o=n.transformRect(qe(),this.card.bounds),i=n.transformRect(qe(),t),s=o.x-i.x,a=o.x+o.width-(i.x+i.width),l=o.y-i.y,u=o.y+o.height-(i.y+i.height),d=Bs(De(s+a,l+u),.5);return new ft(e.a,e.b,e.c,e.d,this.width*.5+d.x,this.height*.5+d.y)}handleEventOnCard(e,t){var i,s,a,l,u,d,c,p;let n=this.getCardTransform(),o=this.state.editorStore.toolVisible;for(let h of this.card.bubblingOrderIterator()){if(this.card===h){let m=this.handleEventOnRootCard(e,t);if(m)return m;continue}if(!o)continue;let f=Kt(h,this.callback);if(e==="down"){let m=f.onDown({ev:t,mtx:n,focused:((s=(i=this.state.store.desktop)==null?void 0:i.focusingCard)==null?void 0:s.id)===h.id,root:this.card,toolVisible:o,zoom:this.mtx.a});if(m)return{renderer:f,target:m,movedCard:(a=f.moveCardTarget)==null?void 0:a.card}}else if(e==="move"){let m=f.onMove(t,n);if(m)return{target:m,renderer:f,movedCard:(l=f.moveCardTarget)==null?void 0:l.card}}else if(e==="up"){let m=this.card,g=(u=f.moveCardTarget)==null?void 0:u.card,v=(d=this.state.store.desktop)==null?void 0:d.hoverCardId,b=f.onUp({ev:t,mtx:n,root:this.card});if(b){let C=oi(t),x=n.inverted().cross(t.x,t.y);if(b==="card"||b==="foldHandle"||b==="bbLeftTop"){let y=h.isFolded||b==="foldHandle";(p=(c=this.callback).bringChildToFront)==null||p.call(c,h,y)}return g&amp;&amp;!C?b==="card"||b==="bbLeftTop"?(this.rebuildTreeStateIfNeeded({root:m,card:g,hoverCardId:v,pointer:x,grouped:g.isFolded}),this.insertConnectionIfNeeded({ev:t,mtx:n,card:g}),this.longHoverDetector.clear(),this.shrinkManager.release()):b==="foldHandle"&amp;&amp;(this.rebuildTreeStateIfNeeded({root:m,card:g,hoverCardId:v,pointer:x,grouped:!0}),this.longHoverDetector.clear(),this.shrinkManager.release()):b==="connectorHandle"?this.onConnectorUp({from:h,pt:x,ignoreFoldHandle:!1,isClick:C}):b==="connection"&amp;&amp;this.onConnectorUp({from:h,pt:x,ignoreFoldHandle:C,isClick:C}),{target:b,renderer:f,movedCard:g}}}}if(e==="down")for(let h of this.card.bubblingOrderIterator()){let f=Kt(h,this.callback);f.handlingComponent=void 0}else e==="up"&amp;&amp;this.state.editorStore.selectedTool!==2&amp;&amp;oi(t)&amp;&amp;this.state.store.reduce(ti())}handleEventOnRootCard(e,t){let n=this.card,{toolVisible:o,selectedTool:i}=this.state.editorStore,s=Kt(n,this.callback),a=this.getCardTransform(),{desktop:l}=this.state.store;if(e==="down"){let u=this.getObjectUnderPoint(t);if((u==null?void 0:u.card)===n){let d=s.onDown({ev:t,mtx:a,focused:!1,root:n,toolVisible:o,zoom:this.mtx.a});if(d)return{renderer:s,target:d}}}else if(e==="move"){if(s.handlingComponent){let u=s.onMove(t,a);if(u)return{renderer:s,target:u}}}else if(s.handlingComponent){let u=s.onUp({ev:t,mtx:a,root:n});if(u)return wc(u)&amp;&amp;(this.layout.reset(),this.startTrimmedBounceAnimation(a)),{renderer:s,target:u}}else if(oi(t))switch(i){case 0:!(l!=null&amp;&amp;l.focusingCard)&amp;&amp;!(l!=null&amp;&amp;l.positionPopoverOpen)&amp;&amp;(this.state.editorStore.setToolVisible(!o),this.state.store.reduce(zi(!o)));break;case 2:n.gadgets.title&amp;&amp;n.gadgets.title.text.length&gt;0&amp;&amp;this.callback.onCardClicked(n,t);break}else dM(t)&amp;&amp;(o||(this.state.editorStore.setToolVisible(!0),this.state.store.reduce(zi(!0))))}handleEventOnCoverButton(e,t,n,o){if(!oi(e))return this.resetCoverButtonInteraction(n),!1;let a=this.getCardTransform().inverted().cross(e.x,e.y),l;for(let u of n){let{state:d}=u;if(!!d.bounds&amp;&amp;Pn(d.bounds,a)){l=u;break}}if(t==="up"){let u=n.find(d=&gt;d.state.interaction==="pushed");if(this.resetCoverButtonInteraction(n),l&amp;&amp;l===u)return this.playManager.pause(this.state.editorStore),o(l.role),!0}else if(t==="move"){if(n.some(u=&gt;u.state.interaction!=="none"))return!0}else if(t==="down"&amp;&amp;l){for(let u of n)u.state.interaction=u===l?"pushed":"none";return this.sar.setFineRedrawCountDown(1),!0}return!1}resetCoverButtonInteraction(e){let t=!1;e.forEach(n=&gt;{n.state.interaction==="pushed"&amp;&amp;(n.state.interaction="none",t=!0)}),t&amp;&amp;this.sar.setFineRedrawCountDown(1)}hideTool(e){this.timeOutId&amp;&amp;clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=&gt;{this.closed||this.state.editorStore.setToolVisible(!1)},e)}setToolVisible(e){this.timeOutId&amp;&amp;clearTimeout(this.timeOutId),this.state.editorStore.setToolVisible(e)}setBounceAnimation(){this.abortBounceAnimation(),this.startBounceAnimation(new Pr(0,0))}ensureTextCaretVisible(e){let t=this.mtx.clone(),n=window.devicePixelRatio,o=40/n,i=Lh(qe(e.x-o,e.y-o,e.width+2*o,e.height+2*o),n),s=qe(0,0,this.width,Math.max(this.height-this.state.screen.keyboardHeight*n,0));if(nu(s,i))return;let l;i.x&lt;s.x?l=s.x-i.x:s.x+s.width&lt;i.x+i.width?l=s.x+s.width-(i.x+i.width):l=0;let u;i.y&lt;s.y?u=s.y-i.y:s.y+s.height&lt;i.y+i.height?u=s.y+s.height-(i.y+i.height):u=0;let d=.25;this.abortBounceAnimation(),!this.translateAnimation&amp;&amp;(l!==0||u!==0)&amp;&amp;(this.translateAnimation=Rl(De(t.tx,t.ty),De(t.tx+l,t.ty+u),d,ms))}get editingCard(){var t,n;let e=(n=(t=this.state.store.desktop)==null?void 0:t.focusingCard)==null?void 0:n.id;if(e){let o=this.card.getCard(e);if(o)return o}return this.card}get textEditingCard(){if(this.state.editorStore.selectedTool===2)return this.editingCard}onConnectorUp(e){var c;let{from:t,pt:n,ignoreFoldHandle:o,isClick:i}=e,{parent:s}=t,a=[...this.card.familyIterator()].filter(p=&gt;{let h=p.parent;return s&amp;&amp;h?s.id===h.id:s===h}),l=this.card,u=this.mtx,d=(c=this.state.store.desktop)==null?void 0:c.focusingCard;for(let p=a.length-1;p&gt;=0&amp;&amp;!Kt(a[p],this.callback).onConnectorUp({pt:n,from:t,root:l,ignoreFoldHandle:o,focused:(d==null?void 0:d.id)===a[p].id,mtx:u,isClick:i});p--);this.callback.onConnectorDismissed(t)}rebuildTreeStateIfNeeded(e){var a;let{root:t,card:n,hoverCardId:o,pointer:i,grouped:s=!1}=e;if(!o)n.parent!==t&amp;&amp;this.callback.treeStateChanged(n,t.id,s);else if(o!==((a=n.parent)==null?void 0:a.id)){let u={scale:this.shrinkManager.scale,pivot:i};this.callback.treeStateChanged(n,o,s,u)}}insertConnectionIfNeeded({ev:e,mtx:t,card:n}){var o;Ee(n.parent!==void 0);for(let i of n.parent.children){if(i===n)continue;if(Kt(i,this.callback).getObjectUnderPoint({root:this.card,ev:e,mtx:t,focused:!1,toolVisible:!0,zoom:this.mtx.a})==="connection"){let l=i.isFolded?i.tail():i,u=(o=l.next)!=null?o:l.nextGroup;if(Ee(u!=null),n.canBeConnectedFrom(l)&amp;&amp;u.canBeConnectedFrom(n)){this.callback.onConnectorInserted(l,n,u);break}}}}drawToolPref(e){switch(e.activeTool){case"pen":{let t=e.prefs[e.activeTool];return{penType:e.activePen,width:t.width,color:nn(t.colors[t.activeColor]),isRuler:t.activeRuler}}case"highlighter":{let t=e.prefs[e.activeTool];return{penType:"highlighter",width:t.width,color:nn(t.colors[t.activeColor]),isRuler:t.activeRuler}}case"eraser":return{penType:"eraser",width:e.prefs.eraser.width,color:cn(),isRuler:!1};case"lasso":return;default:fe.error("unknown toolType");return}}initDrawn(e,t,n,o,i){e.beginStroke({penType:t,width:n,color:o,isRuler:i}),this.fineStrokeRenderer.clearCurrent(this.role.drawnType)}addDrawn({ev:e,sm:t,penType:n}){var d;let o=0;(n==="pen"||n==="brush")&amp;&amp;(iv(e.original)?o=e.original.pressure:uM(e.original)&amp;&amp;(o=e.original.force));let i=this.strokeManager.currentStroke;if(!i)return;let s=new ri,a=(d=e.coalescedPoints)!=null?d:[e];for(let c=0;c&lt;a.length;c++){let p=a[c],h=t.addPoint(p.x,p.y,this.mtx.a,o);h&amp;&amp;s.add(h)}let l=Xr(this.canvas,this.card.size),u=new ft().scale(l).prependMatrix(this.mtx);this.fineStrokeRenderer.appendStroke({canvasSize:this.canvas,mtx:u,card:this.card,type:this.role.drawnType,stroke:i,isEraser:i.type==="eraser",rectUpdated:s.rect})}redrawThumbnails(){let e=mr.get(this.card),t=this.card.createDrawnGeometry(this.role.drawnType);return e[this.role.drawnType].redrawThumbnails({geometry:t,contents:this.strokeManager.packContents()})}endDrawn(e){let t=this.strokeManager;this.fineStrokeRenderer.commitCurrent(this.role.drawnType),this.state.editorStore.setExecutableStrokeOperation(t.canUndo(),t.canRedo(),t.canClearAllStroke()),this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:e,thumbs:this.redrawThumbnails()})}handlePointerDraw(e,t){var u,d;let n=!1,o=this.card,i=this.strokeManager;i.updateTransformMatrix({canvasSize:$e(this.canvas),mtx:this.mtx.clone(),card:o});let s=Bs(t,1/devicePixelRatio),a=Bb(this.state.store,o.document!==void 0),l=this.drawToolPref(a);if(l){let{penType:c,width:p,color:h,isRuler:f}=l;if(e==="down"){let m;if(c==="eraser"){let g=(d=(u=this.getDomMatrixSet())==null?void 0:u[i.type])!=null?d:new ft,v=p/2;m=p/g.a,this.drawnCursor.style.width=`${v*2}px`,this.drawnCursor.style.height=`${v*2}px`,this.drawnCursor.style.left=`${s.x}px`,this.drawnCursor.style.top=`${s.y}px`,this.drawnCursor.style.translate=`${-v}px ${-v}px`,this.setDrawnCursorVisible(!0)}else m=p;this.initDrawn(i,c,m,h,f),this.addDrawn({ev:t,sm:i,penType:c}),n=!1,i.currentStroke&amp;&amp;this.emitStrokeWrite(i.currentStroke)}if(this.strokeManager.cancelled)return;if(e==="move")c==="eraser"&amp;&amp;(this.drawnCursor.style.left=`${s.x}px`,this.drawnCursor.style.top=`${s.y}px`),this.addDrawn({ev:t,sm:i,penType:c}),n=!0,i.currentStroke&amp;&amp;this.emitStrokeWrite(i.currentStroke);else if(e==="up"){this.setDrawnCursorVisible(!1);let m=i.endStroke();m&amp;&amp;(this.endDrawn(m),n=!0,m.strokes.forEach(this.emitStrokeAdded))}}else if(a.activeTool==="lasso")if(e==="down"){this.setDrawnLassoVisible(!0);let c=i.beginLasso(t.x,t.y);this.drawnLasso.style.width=`${c.width}px`,this.drawnLasso.style.height=`${c.height}px`,this.drawnLasso.style.left=`${c.x}px`,this.drawnLasso.style.top=`${c.y}px`}else if(e==="move"){let c=i.updateLasso(t.x,t.y);c&amp;&amp;(this.drawnLasso.style.width=`${c.width}px`,this.drawnLasso.style.height=`${c.height}px`,this.drawnLasso.style.left=`${c.x}px`,this.drawnLasso.style.top=`${c.y}px`)}else i.endLasso(t.x,t.y),this.setDrawnLassoVisible(!1);n&amp;&amp;(this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw(),this.fineStrokeRenderStrategy="bitblt")}handleLongPress(e){this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1);let t=this.getCardTransform(),{toolVisible:n}=this.state.editorStore,{teacherToolVisible:o}=this.state.store;this.quizButtonState&amp;&amp;this.resetCoverButtonInteraction(this.quizButtonState),this.attendanceButtonState&amp;&amp;this.resetCoverButtonInteraction(this.attendanceButtonState);for(let i of this.card.bubblingOrderIterator()){if(i===this.card||!n)continue;if(Kt(i,this.callback).predictPointerEventResponse({ev:e,mtx:t,root:this.card,toolVisible:n&amp;&amp;o,zoom:this.mtx.a})===1)return!al(i)&amp;&amp;this.state.editorStore.selectedTool===2&amp;&amp;this.state.editorStore.setTool(0),this.state.store.reduce(Hi({id:i.id,pinned:i.pinned,favorite:i.favorite,canPin:i.canPin(),canRotate:i.canRotate(),canAlign:i.canAlign(),bounds:this.boundingBoxRectToScreen(i.bounds)}),Ar(!0),hn(void 0)),!0}if(this.state.editorStore.selectedTool===2)this.state.editorStore.setTool(0);else{let i=window.devicePixelRatio,s=De(e.x/i,e.y/i);this.state.store.reduce(Ar(!1),hn(s))}return!1}rectEditorToScreen(e){return this.transformEditorToScreen.transformRect(qe(),e)}boundingBoxRectToScreen(e){let t=this.transformEditorToScreen,n=Jg(this.transformEditorToScreen.a)/window.devicePixelRatio;return t.transformRect(qe(),Vu(e,An(n)))}get transformEditorToScreen(){let e=window.devicePixelRatio;return this.getCardTransform().scale(1/e)}getDomMatrixSet(){let e=this.card,t=this.canvas,n=window.devicePixelRatio,o=t.width/n,i=t.height/n,s=e.content.margins,a=e.contentSizeWithMargins,u=Kt(e,fo).resizeStartSize,d;u===void 0?d=e.contentSizeWithMargins:d=u.contentWithMargins;let c=(this.mtx.tx-t.width/2)/n,p=(this.mtx.ty-t.height/2)/n,h=CY({width:o,height:i},d);if(!h)return;let f=(a.width-d.width)*h.a/2,m=(a.height-d.height)*h.a/2,g=new ft;g.append(this.mtx.a,0,0,this.mtx.d,o/2+c,i/2+p),g.append(1,0,0,1,-o/2,-i/2),g.append(h.a,h.b,h.c,h.d,h.tx-f,h.ty-m);let v=g.clone();v.append(1,0,0,1,s.left,s.top);let b=e.drawnGeometry("drawn"),C=v.clone().appendMatrix(Sde(e.contentSize,b)),x=e.drawnGeometry("annotation"),y=v.clone().appendMatrix(Sde(e.contentSize,x));return{contentSize:v,contentSizeWithMargins:g,drawn:C,annotation:y}}shouldHandleLongPress(e){let{selectedTool:t,toolVisible:n,narrationRecording:o}=this.state.editorStore,{teacherToolVisible:i,screenSharingState:s}=this.state.store;switch(t){case 2:break;case 3:if(o)return!1;break;case 1:return!1;case 0:if(!n||s)return!1;break;default:fe.warn("\u672A\u77E5\u306E EditorTool. \u5B9F\u88C5\u304C\u4E0D\u5B8C\u5168\u3067\u3059");break}let a=this.getCardTransform();for(let l of this.card.bubblingOrderIterator()){if(l===this.card)continue;let d=Kt(l,this.callback).predictPointerEventResponse({ev:e,mtx:a,root:this.card,toolVisible:n&amp;&amp;i,zoom:this.mtx.a});if(d===0)return!1;if(d===1)return!0}return!0}handleDoubleClick(e){let t=this.getCardTransform(),{toolVisible:n}=this.state.editorStore,{teacherToolVisible:o}=this.state.store;for(let i of this.card.bubblingOrderIterator()){let s=Kt(i,this.callback);if(s.predictPointerEventResponse({ev:e,mtx:t,root:this.card,toolVisible:n&amp;&amp;o,zoom:this.mtx.a})===1)return this.onDoubleClick(i),{renderer:s}}}shouldHandleDoubleClick(e){let{selectedTool:t,toolVisible:n,narrationRecording:o}=this.state.editorStore,{teacherToolVisible:i,screenSharingState:s}=this.state.store;if(t===1||o||!!(s!=null&amp;&amp;s.sessionId)||t===2)return!1;let a=this.getCardTransform();for(let u of this.card.bubblingOrderIterator()){if(u===this.card)continue;if(Kt(u,this.callback).predictPointerEventResponse({ev:e,mtx:a,root:this.card,toolVisible:n&amp;&amp;i,zoom:this.mtx.a})!==2)return!1}let l=this.getObjectUnderPoint(e);return l?!$te(l.eventTarget)&amp;&amp;!Vte(l.eventTarget):!0}onDoubleClick(e){let{selectedTool:t}=this.state.editorStore;if(this.state.editorStore.setToolVisible(!0),t===2)if(al(e)){let o=this.editingCard;if(o.id!==e.id){let i=Kt(o,this.callback);i.setTextSelectedRange(void 0),i.setTextCompositionRange(void 0)}}else this.state.editorStore.setTool(0);let n=this.card.id!==e.id&amp;&amp;t!==2&amp;&amp;!(e instanceof jr)&amp;&amp;!(e instanceof wn);this.state.store.reduce(Hi({id:e.id,pinned:e.pinned,favorite:e.favorite,canPin:e.canPin(),canRotate:e.canRotate(),canAlign:e.canAlign(),bounds:this.boundingBoxRectToScreen(e.bounds)}),Ar(n),zi(!0)),this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1)}getObjectUnderPoint(e){var u;let{toolVisible:t,selectedTool:n,narrationRecording:o}=this.state.editorStore,{teacherToolVisible:i,desktop:s,screenSharingState:a}=this.state.store,l=this.getCardTransform();if(!o&amp;&amp;n!==1){if(this.quizButtonState){let d=l.inverted().cross(e.x,e.y);for(let c of this.quizButtonState){let{state:p,role:h}=c;if(!!p.bounds&amp;&amp;Pn(p.bounds,d))return{eventTarget:Noe(h)}}}if(this.attendanceButtonState){let d=l.inverted().cross(e.x,e.y);for(let c of this.attendanceButtonState){let{state:p,role:h}=c;if(!!p.bounds&amp;&amp;Pn(p.bounds,d))return{eventTarget:Ooe(c.role)}}}}if(!(!t||o))for(let d of this.card.bubblingOrderIterator()){let p=Kt(d,this.callback).getObjectUnderPoint({ev:e,mtx:l.clone(),focused:((u=s==null?void 0:s.focusingCard)==null?void 0:u.id)===d.id,root:this.card,toolVisible:t&amp;&amp;i,zoom:this.mtx.a});if(d===this.card){if(p&amp;&amp;this.mtx.a&lt;1&amp;&amp;wc(p)&amp;&amp;a===void 0&amp;&amp;((s==null?void 0:s.focusingCard)===void 0||s.focusingCard.id===d.id))return{card:d,eventTarget:p};continue}if(p)return{card:d,eventTarget:p}}}getHandlingComponent(){for(let e of this.card.bubblingOrderIterator()){let t=Kt(e,this.callback);if(t.handlingComponent)return{card:e,eventTarget:t.handlingComponent}}}getCardUnderPoint(e){var i,s,a,l;let t=this.getCardTransform();for(let u of this.card.bubblingOrderIterator()){if(u.id===this.card.id)continue;if(Kt(u,this.callback).getObjectUnderPoint({ev:e,mtx:t.clone(),focused:((s=(i=this.state.store.desktop)==null?void 0:i.focusingCard)==null?void 0:s.id)===u.id,root:this.card,toolVisible:this.state.editorStore.toolVisible&amp;&amp;this.state.store.teacherToolVisible,zoom:this.mtx.a}))return u}if(Kt(this.card,this.callback).getObjectUnderPoint({ev:e,mtx:t.clone(),focused:((l=(a=this.state.store.desktop)==null?void 0:a.focusingCard)==null?void 0:l.id)===this.card.id,root:this.card,toolVisible:this.state.editorStore.toolVisible&amp;&amp;this.state.store.teacherToolVisible,zoom:this.mtx.a}))return this.card}startEnterAnimation(e,t){let n=t.transformRect(qe(),e.bounds),o=qe(0,0,this.canvas.width,this.canvas.height),i=Jo(tn(o),tn(n)),s=this.mtx.tx-i.x,a=this.mtx.ty-i.y,l=qe(s-n.width/2,a-n.height/2,n.width,n.height),u=Xr(this.canvas,l);this.enterAnimation=new J2({fromPos:tn(l),toPos:tn(o),fromScale:1/u,toScale:1,duration:.3})}startExitAnimation(e,t){this.exitAnimation=new Z2({card:e,baseMtx:t,fromScale:1,toScale:.75,duration:.3})}handleKey(e){if(this.strokeManager.currentStroke||this.zoomTimer.isSet())return!1;let t=aF(),n=t&amp;&amp;e.metaKey||!t&amp;&amp;e.ctrlKey,o=this.state.editorStore.selectedTool===1;return e.key==="ArrowRight"&amp;&amp;this.hasNext?(this.card.hasNextCardOrGroup?this.forwardCardPage():this.forwardDocumentPage(!1),!0):e.key==="ArrowLeft"&amp;&amp;this.hasPrev?(this.card.hasPrevCardOrGroup?this.backwardCardPage():this.backwardDocumentPage(!1),!0):e.key==="ArrowDown"&amp;&amp;this.mtx.a&lt;=1?(this.startPopStackAnimation(),!0):o&amp;&amp;this.state.editorStore.canUndoStroke&amp;&amp;e.key==="z"&amp;&amp;n&amp;&amp;!e.shiftKey?(this.undo(),!0):o&amp;&amp;this.state.editorStore.canRedoStroke&amp;&amp;e.key.toLowerCase()==="z"&amp;&amp;n&amp;&amp;e.shiftKey?(this.redo(),!0):!1}publishTrashBoxInIfNeeded(e){if(this.mtx.a&gt;=1)return;let{up:t,grouped:n,ev:o,renderer:i}=e,s=i.card.pinned&amp;&amp;i.card.parent===this.card?void 0:qK(o);if(t&amp;&amp;s==="editorTrashBox"){let a=_c(i.card,n);if(confirm(a))n?this.callback.onGroupDeleted(i.card):this.callback.onCardDeleted(i.card);else if(this.touchDownCardPosition){let{x:l,y:u}=this.touchDownCardPosition;if(n){let d=i.card.position,[c,p]=[l-d.x,u-d.y];this.callback.onGroupMoved(i.card.head(),{pos:De(l,u),delta:De(c,p)},!0)}else this.callback.onCardMoved(i.card,{x:l,y:u},!0)}this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)}else t?(this.hitFixedUI=void 0,this.callback.onTrashBoxHit(!1)):s!==this.hitFixedUI&amp;&amp;(this.hitFixedUI=s,this.callback.onTrashBoxHit(s!==void 0))}restoreParentStack(e){if(this.callback.getCardOnNote)for(let t=0;t&lt;e.length-1;t++){let n=this.callback.getCardOnNote(e[t].cardId);n&amp;&amp;this.parentStack.push({card:n,mtx:this.initialMatrix()})}}onNextState(e,t){var a,l,u,d;let n=this.state;this.state=e,this.onPlaySyncStatusChanged(),this.role.enableFullScreenSharing&amp;&amp;this.onSharingStateChanged(n.store,this.state.store),Jc(n.screen,e.screen)||(t=t!=null?t:this.mtxKeepVisualCenter(n.screen,e.screen),this.updateFullScreenSharing(t)),t&amp;&amp;!t.equals(this.mtx)&amp;&amp;(this.mtx=t,this.abortBounceAnimation(),(WE(this.state.store)||!up(this.state.store))&amp;&amp;this.startBounceAnimation(new Pr(0,0)),this.sar.setFineRedrawCountDown(1));let o=Kt(this.card,this.callback);o.player=e.editorStore.mediaPlayer;let i=this.card;if(n===e)e.viewStack[e.viewStack.length-1].animate&amp;&amp;this.startEnterAnimation(e.card,this.state.noteMtx),this.setCard({card:e.card,mtx:t});else if(n.viewStack.length&gt;e.viewStack.length){this.startExitAnimation(this.card,this.mtx.clone());let c=n.viewStack.length-e.viewStack.length,p;for(let h=0;h&lt;c;h++)p=(a=this.parentStack.pop())==null?void 0:a.mtx;this.setCard({card:e.card,mtx:p})}else n.viewStack.length&lt;e.viewStack.length?(this.parentStack.push({mtx:this.mtx.clone(),card:this.card}),e.viewStack[e.viewStack.length-1].animate&amp;&amp;this.startEnterAnimation(e.card,this.getCardTransform()),this.setCard({card:e.card,mtx:t})):i!==e.card&amp;&amp;this.setCard({card:e.card,mtx:t});e.editorStore.continuePlaying()&amp;&amp;e.editorStore.nextCardId!==this.card.id&amp;&amp;(up(e.store)?((l=e.store.screenSharingState)==null?void 0:l.presenter)===e.store.userInfo.user_id&amp;&amp;this.forwardCardPage():this.forwardCardPage()),rBe(n,e)&amp;&amp;this.setNeedsDisplay();let s=(d=(u=this.card)==null?void 0:u.document)==null?void 0:d.id;s&amp;&amp;this.handleDocumentLayerUpdateNotification(s,n.store,e.store),$E(n.store,e.store)&amp;&amp;this.onReadonly()}onPlaySyncStatusChanged(){var t;let{editorStore:e}=this.state;this.playManager.getAndClearNeedsUpdateFullScreenSharing()&amp;&amp;this.updateFullScreenSharing(),e.avEnded&amp;&amp;this.playManager.playEnded(),this.playManager.seeking&amp;&amp;this.updateFullScreenSharing(),(t=this.playManager)!=null&amp;&amp;t.rewind&amp;&amp;this.playManager.endRewind(e)}onSharingStateChanged(e,t){var u,d,c,p,h,f;let n=(u=t.screenSharingState)==null?void 0:u.fullscreen,o=(d=t.screenSharingState)==null?void 0:d.sessionId,i=(c=t.screenSharingState)==null?void 0:c.presenter,s=(p=t.screenSharingState)==null?void 0:p.type,a=(h=e.screenSharingState)==null?void 0:h.sessionId,l=(f=e.screenSharingState)==null?void 0:f.type;if(o&amp;&amp;n&amp;&amp;(o!==a||s!==l||!i&amp;&amp;!this.fullScreenSharingProvider)&amp;&amp;(this.initScreenSharing(n),i===t.userInfo.user_id&amp;&amp;this.updateFullScreenSharing()),a&amp;&amp;!o&amp;&amp;(this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.playManager.clearRemoteStatus()),t.screenSharingState){let m=t.screenSharingState.courseId,g=e.screenSharingActionNotification[m],v=t.screenSharingActionNotification[m];v&amp;&amp;(!g||g&amp;&amp;!Object.is(g,v))&amp;&amp;this.handleScreenSharingNotification(v)}e.screenSharingForPresenter&amp;&amp;!t.screenSharingForPresenter&amp;&amp;this.updateFullScreenSharing()}screenSharingRootCards(e){return this.rootCardMonitor.rootCards(e)}getScreenSharingRootCard(){return this.rootCardMonitor.get()}initScreenSharing(e){let t=this.state.editorStore;(t.selectedTool===3||t.selectedTool===2)&amp;&amp;t.setTool(0),this.rootCardMonitor.set(this.card);let n=this.getFullScreenSharingState(),o={...e,...n};this.fullScreenSharingProvider=new JM(o,()=&gt;this.state.store),this.playManager.setRemoteStatus(t,!0,n.isPlaying,n.playToken)}handleScreenSharingNotification(e){var t,n,o;if(as(e)&amp;&amp;this.role.shouldSyncPlayController(this.state.store,e)){let{isPlaying:i,playToken:s}=e.fullscreen,a=e.fullscreen.zoom;a&amp;&amp;a.id===this.card.id&amp;&amp;(i=a.isPlaying,s=a.playToken),(t=this.playManager)==null||t.setRemoteStatus(this.state.editorStore,!0,i,s)}Mb(e)&amp;&amp;e.id===((n=this.state.store.screenSharingState)==null?void 0:n.sessionId)&amp;&amp;((o=this.playManager)==null||o.clearRemoteStatus(),this.rootCardMonitor.clear(),this.fullScreenSharingProvider=void 0,this.state.store.reduce(Os(void 0),ho()))}handleDocumentLayerUpdateNotification(e,t,n){for(let o=0;o&lt;this.card.memberCountOverGroup();o++){let i=$h(e,o),s=t.documentAnnotationLayerUpdateNotification[i],a=n.documentAnnotationLayerUpdateNotification[i];s!==a&amp;&amp;a&amp;&amp;this.updateLayerAndThumb("annotation",a);let l=t.documentExtensionLayerUpdateNotification[i],u=n.documentExtensionLayerUpdateNotification[i];l!==u&amp;&amp;u&amp;&amp;this.updateLayerAndThumb("drawn",u)}}updateLayerAndThumb(e,t){var l,u;let{document:n,index:o,data:i}=t,s=Xn.forDocument(e,n,o),a=(l=s.getLayerMetadata())==null?void 0:l.generation;if(!a||i.generation&gt;a){fe.log("updateLayerAndThumb:begin",e);let d=this.card.memberAt(o);((u=d==null?void 0:d.document)==null?void 0:u.id)===n&amp;&amp;s.updateDocumentLayer().then(c=&gt;{fe.log("updateLayerAndThumb:done",c),c.type==="success"&amp;&amp;c.value==="updated"&amp;&amp;(mr.forDocument(n,o,void 0)[e].redrawThumbnails({geometry:d.drawnGeometry(e),contents:s.packContents()}),this.state.store.reduce(ho()))})}}mtxKeepVisualCenter(e,t){let n=window.devicePixelRatio,o=Nt(e,n),i=Nt(t,n),s=od(this.card.size,t),a=od(this.card.size,e);if(s==null||a==null)return this.mtx;let l=a!==0?s/a:0,u=this.mtx.tx*l+(i.width-o.width*l)/2,d=this.mtx.ty*l+(i.height-o.height*l)/2;return new ft(this.mtx.a,0,0,this.mtx.d,u,d)}initPdfRenderer(e){var t;(t=this.finePdfRenderer)==null||t.close(),this.finePdfRenderer=void 0,e instanceof Yi&amp;&amp;(this.finePdfRenderer=new uF({card:e,signalRedraw:()=&gt;{this.sar.setFineRedrawCountDown(1)},documentLoaded:()=&gt;{var i,s;let n=(i=e.content.asset)==null?void 0:i.remote_id,o=(s=this.finePdfRenderer)==null?void 0:s.getNumPages();n&amp;&amp;o&amp;&amp;this.state.editorStore.downloadedPdfNumPages.set(n,o)}}))}async getCoverData(e){let t=Vr.getEndpoint("loilonote-quiz"),n=this.state.store;if(t&amp;&amp;e instanceof jr){let o=new Qp({lnsEndpoint:n.lnsEndpoint,lnqEndpoint:t,logEnabled:n.logEnabled,locale:n.locale,appTokenManager:Vr}),{quiz_id:i}=e.content;await o.getCoverData(i).then(s=&gt;{let a=QG({card:e,data:s});a&amp;&amp;We(a)}).catch(fe.error)}this.initQuizButtonState(),this.setNeedsDisplay()}setCard(e){var l,u;let{card:t,mtx:n}=e,o=this.card;this.card=t;let i=(l=o.document)==null?void 0:l.id,s=(u=t.document)==null?void 0:u.id;i&amp;&amp;s&amp;&amp;i!==s?this.rootCardMonitor.set(t):this.rootCardMonitor.update(t),this.initPdfRenderer(t),!t.gadgets.drawn&amp;&amp;!on(this.state.store)&amp;&amp;this.callback.onEnsureDrawnGadget(t),this.initStrokeManager(t),this.fineStrokeRenderer.clearCurrentAll(this.role.drawnType),this.layout=new $1(t),this.invalidateRootMipmap(),this.invalidateChildrenMipmap(),this.quizButtonState=void 0,this.getCoverData(t),this.initAttendanceButtonState(t),this.state.store.reduce(ti(),hn(void 0)),this.mtx=n!=null?n:this.initialMatrix(),this.state.editorStore.setEditorMoveMode(void 0),this.state.editorStore.uninitializeAvSource(),this.playManager.playEnded();let a=Kt(o,this.callback);a.player=void 0,this.state.editorStore.initializeAvSource(t,this.state.store),this.playManager.pageChanged(this.state.editorStore),(t.isDescendantOf(o.id)||o.isDescendantOf(t.id))&amp;&amp;this.playManager.pause(this.state.editorStore),this.updateFullScreenSharingOtherCard(this.card)}initStrokeManager(e){let t=this.strokeManager;t.clearRemoteCurrentStroke();let n=()=&gt;{let s=e.drawnGeometry(this.role.drawnType),a=t.packContents();this.fineStrokeRenderer.redrawFineThumbnail(this.getCardTransform(),{canvasSize:$e(this.canvas),contents:a,geometry:s,type:this.role.drawnType,contentLocalBounds:this.card.contentLocalBounds,drawnLocalBounds:this.card.drawnLocalBounds(this.role.drawnType)}),this.state.editorStore.setExecutableStrokeOperation(t.canUndo(),t.canRedo(),t.canClearAllStroke()),this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1)};t.updateTransformMatrix({canvasSize:this.canvas,mtx:this.mtx.clone(),card:this.card});let o=mr.get(e),i=["drawn","annotation"];for(let s of i)o[s].load("high",this.card).then(()=&gt;{if(s==="drawn"){let a=[...e.renderingOrderIterator()].filter(l=&gt;Xn.get(s,l).mergeExtended(l)).map(l=&gt;l.id);this.role.drawnType==="drawn"&amp;&amp;!this.state.store.screenSharingState&amp;&amp;this.state.store.reduce(da({state:"unsaved",cardIdList:a,type:"drawn"}))}}).then(n)}async invalidateRootMipmap(){await Kt(this.card,this.callback).invalidateMipmapWithLevel("high")}invalidateChildrenMipmap(){let e=this.mtx.a*Xr(this.canvas,this.card.size);for(let t of this.card.familyIterator({withoutSelf:!0}))Kt(t,this.callback).invalidateMipmap(e)}initQuizButtonState(){let e=this.card;if(e instanceof jr&amp;&amp;this.role.enableQuizCoverButtons){let t=this.state.store;this.quizButtonState=Boe({card:e,store:t})}else this.quizButtonState=void 0}initAttendanceButtonState(e){if(this.role.enableAttendanceCoverButtons){let t=this.state.store;this.attendanceButtonState=Uoe({card:e,store:t})}else this.attendanceButtonState=void 0}forwardCardPage(){var e;if(this.card.hasNextCardOrGroup&amp;&amp;this.canStartPaging()){let t=this.card,n=(e=t.next)!=null?e:t.nextGroup;Ee(n),this.callback.onCardSelected(n)}}backwardCardPage(){var e;if(this.card.hasPrevCardOrGroup&amp;&amp;this.canStartPaging()){let t=this.card,n=(e=t.prev)!=null?e:t.prevGroup;Ee(n),this.callback.onCardSelected(n)}}forwardDocumentPage(e){var t;((t=this.documentPagerDelegate)==null?void 0:t.hasNextDocument())&amp;&amp;this.canStartPaging()&amp;&amp;this.documentPagerDelegate.onDocumentSelected("next",e)}backwardDocumentPage(e){var t;((t=this.documentPagerDelegate)==null?void 0:t.hasPreviousDocument())&amp;&amp;this.canStartPaging()&amp;&amp;this.documentPagerDelegate.onDocumentSelected("prev",e)}popPage(e){this.callback.onPop(e)}alpha(){if(this.enterAnimation)return this.enterAnimation.current().alpha;if(this.mtx.a&gt;1||this.state.editorStore.moveMode!=="vertical"&amp;&amp;!(this.translateAnimation instanceof Ff))return 1;let e=this.state.viewStack.length&gt;1?.5:1;return 1-(this.mtx.ty-this.height/2)/this.height*e}get toolOpacity(){return this.mtx.a&gt;1||this.state.editorStore.moveMode!=="vertical"&amp;&amp;!(this.translateAnimation instanceof Ff)||this.state.viewStack.length&gt;1?1:1-(this.mtx.ty-this.height/2)/this.height}hasAnimation(){return!!(this.translateAnimation||this.zoomAnimation||this.enterAnimation||this.exitAnimation)}update(e){let t=!1;this.hasAnimation()&amp;&amp;(this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1));let n=this.mtx.clone(),o=Kt(this.card,this.callback),i=this.translateAnimation;if(i){let u=i.update(e);n.tx=u.x,n.ty=u.y,i.finished&amp;&amp;(this.translateAnimation=void 0,i instanceof Pc?i.direction==="next"?i.toDocument?this.forwardDocumentPage(i.toDocument.jumpToHead):this.forwardCardPage():i.toDocument?this.backwardDocumentPage(i.toDocument.jumpToHead):this.backwardCardPage():i instanceof Ff?this.popPage(!1):this.updateFullScreenSharing(n))}else if(o.resizeStartSize){let u=this.updateTrimmingMtx(n,o.resizeStartSize.bounds);n.setMatrix(u)}if(this.zoomAnimation){let u=this.zoomAnimation.update(e);if(this.zoomAnimPivot){let d=this.mtx.a,c=new ft().translate(-this.zoomAnimPivot.x,-this.zoomAnimPivot.y).scale(u/d).translate(this.zoomAnimPivot.x,this.zoomAnimPivot.y);n.prependMatrix(c);let{minTx:p,maxTx:h,minTy:f,maxTy:m}=this.getScrollLimit(n.a);n.tx=it(n.tx,p,h),n.ty=it(n.ty,f,m)}else n.a=n.d=u;this.state.editorStore.setZoom(n.a),this.zoomAnimation.finished&amp;&amp;(this.zoomAnimation=void 0,this.zoomAnimPivot=void 0,this.updateFullScreenSharing(n))}if(this.enterAnimation){let u=this.enterAnimation.update(e);n.a=u.scale,n.d=u.scale,n.tx=u.pos.x,n.ty=u.pos.y,this.state.editorStore.setZoom(n.a),this.enterAnimation.finished&amp;&amp;(this.enterAnimation=void 0,this.updateFullScreenSharingOtherCard(this.card,n))}this.exitAnimation&amp;&amp;(this.exitAnimation.update(e),this.exitAnimation.finished&amp;&amp;(this.exitAnimation=void 0,this.updateFullScreenSharingOtherCard(this.card))),this.mtx=n;let s=this.card.prev||this.card.prevGroup,a=this.card.next||this.card.nextGroup,l=!1;for(let u of[s,this.card,a])if(!!u)for(let d of u.familyIterator()){let c=Kt(d,this.callback);c.update()&amp;&amp;(t=!0),u===this.card&amp;&amp;(l=l||c.shouldDisplayLoading(this.card===d))}if(this.prevLoading&amp;&amp;!l&amp;&amp;(t=!0),this.prevLoading=l,this.card instanceof Yi){let u=$e(this.width,this.height),d=new ft().scale(Xr(u,this.card.size)).prependMatrix(this.mtx);this.finePdfRenderer.prepare(u,d,this.card.isThinkingTool?is.toCSSRGBA():void 0)}t&amp;&amp;(this.sar.setFineRedrawCountDown(1),this.sar.needsRoughRedraw())}scheduleRender(){let e=()=&gt;{};e=()=&gt;{if(this.closed||!this.canvas)return;let t=this.canvas.getContext("2d");if(!t)throw new uo;this._updater.update(),this.update(this._updater.deltaTime),this.render(t),requestAnimationFrame(e)},requestAnimationFrame(e)}setNeedsDisplay(){this.sar.needsDisplay(),this.sar.setFineRedrawCountDown(1)}render(e){e.save();let t=this.mtx.clone(),n=new ft(2,0,0,2,-this.width/2,-this.height/2),o=this.clipRenderingRegion(e);this.sar.render({ctx:e,mtx:t,roughScaleTransform:n,delegate:i=&gt;{this.renderInternal(i)},clip:o}),e.restore(),this.state.store.logEnabled&amp;&amp;this.renderDebug(e)}clipRenderingRegion(e){let t=Xn.get("drawn",this.card);if(this.playManager.remotePlaying||this.hasAnimation()||t.remoteCurrentStrokes.size&gt;0)return;let n=t.getUpdatedCanvasClipRect();return n&amp;&amp;(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.closePath(),e.clip(),t.clearUpdatedRect()),n}renderDebug(e){e.save();let t="white";this.prevFineStrokeRenderStrategy==="redraw"?t="red":this.prevFineStrokeRenderStrategy==="bitblt"&amp;&amp;(t="orange"),this.prevFineStrokeRenderStrategy=void 0,e.clearRect(this.canvas.width-10,this.canvas.height-10,10,10),e.fillStyle=t,e.fillRect(this.canvas.width-10,this.canvas.height-10,10,10),e.restore(),e.save(),e.fillStyle="red",e.font="20px Arial",e.textAlign="start";let n=window.devicePixelRatio,o=this.state.store.screen.width*n,i=this.state.store.screen.height*n;e.fillText(this._updater.fps+"",o-50,i-50),e.restore()}renderInternal({ctx:e,mtx:t,rough:n,clip:o}){e.save(),o&amp;&amp;(e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.closePath(),e.clip()),e.clearRect(0,0,e.canvas.width,e.canvas.height);let{width:i,height:s}=e.canvas,a=this.alpha();if(a&lt;1&amp;&amp;this.parentStack.length&gt;0){let{card:h,mtx:f}=this.parentStack[this.parentStack.length-1];e.save(),e.beginPath(),e.fillStyle=Cde,e.fillRect(0,0,i,s),e.transform(f.a,f.b,f.c,f.d,f.e,f.f),this.renderCardTreeInternal({ctx:e,card:h,mtx:f,rough:n}),e.restore()}e.save(),e.globalAlpha*=a,e.beginPath(),e.fillStyle=Cde,e.fillRect(0,0,i,s),e.restore(),e.transform(t.a,t.b,t.c,t.d,t.e,t.f);let l=!this.state.documentLoading&amp;&amp;(this.state.editorStore.moveMode==="horizontal"||this.translateAnimation instanceof Pc),u=this.state.screen.keyboardHeight,d=this.card.prev||this.card.prevGroup;if(this.role.canLeave&amp;&amp;d&amp;&amp;l){e.save();let h=this.getDistanceToAdjacentCard(d);e.setTransform(1,0,0,1,t.e-h,s/2-u);let f=t.clone().translate(-h,0);this.renderCardTreeInternal({ctx:e,mtx:f,card:d,rough:n}),e.restore()}let c=new Fn(()=&gt;"redraw",[[this.role.drawnType,this.fineStrokeRenderStrategy]]);this.renderCardTreeInternal({ctx:e,mtx:t,fineStrokeRenderStrategies:c,card:this.card,rough:n});let p=this.card.next||this.card.nextGroup;if(this.role.canLeave&amp;&amp;p&amp;&amp;l){e.save();let h=this.getDistanceToAdjacentCard(p);e.setTransform(1,0,0,1,t.e+h,s/2-u);let f=t.clone().translate(h,0);this.renderCardTreeInternal({ctx:e,mtx:f,card:p,rough:n}),e.restore()}if(this.exitAnimation){let{card:h,baseMtx:f}=this.exitAnimation,{scale:m,alpha:g}=this.exitAnimation.current();e.save(),e.setTransform(1,0,0,1,0,0),e.globalAlpha=g,e.transform(f.a,f.b,f.c,f.d,f.e,f.f),e.scale(m,m),this.renderCardTreeInternal({ctx:e,mtx:f,card:h,rough:n}),e.restore()}this.prevFineStrokeRenderStrategy=this.fineStrokeRenderStrategy,this.fineStrokeRenderStrategy="redraw",e.restore()}renderCardTreeInternal({ctx:e,mtx:t,card:n,fineStrokeRenderStrategies:o,rough:i}){var x,y,S,T,w;let a=Kt(n,this.callback).resizeStartSize,l=a?a.bounds:n.size,u=Xr(this.canvas,l),d=new ft().scale(u).prependMatrix(t),{narrationRecording:c,hideAnnotation:p}=this.state.editorStore;e.save(),e.scale(u,u);let{desktop:h}=this.state.store,f=[];h!=null&amp;&amp;h.hoverCardId&amp;&amp;f.push(h.hoverCardId);let m=[];h!=null&amp;&amp;h.heldCard&amp;&amp;m.push(...h.heldCard.all);let g;((x=this.finePdfRenderer)==null?void 0:x.card)===n&amp;&amp;(g=this.finePdfRenderer);let v=fie({card:n,root:this.card,focusingCardId:(S=(y=this.state.store.desktop)==null?void 0:y.focusingCard)==null?void 0:S.id,editorStore:this.state.editorStore,mtx:t,rough:i,isAnimating:!!this.enterAnimation||!!this.exitAnimation,isScreenSharing:!!this.state.store.screenSharingState,enableCardEditTool:this.role.enableCardEditTool}),b=mie(this.state.editorStore,!!this.state.store.screenSharingState,this.role.enableCardEditTool),C=o?{strategies:o,renderer:this.fineStrokeRenderer}:void 0;Nf({ctx:e,card:n,canvas:e.canvas,viewport:Tl(),mtx:d,root:n,visibleRect:void 0,finePdfRenderer:g,cardRendererCallback:this.callback,fineStroke:C,focusingCardId:v,textEditingCardId:(T=this.textEditingCard)==null?void 0:T.id,hoverCardIds:f,heldCardIds:m,assetUplaodStates:this.state.store.assetUploadStates,toolVisible:b,narrationRecording:c,ignoreFavorites:this._decorateFavorites===!1||!this.state.editorStore.toolVisible,ignoreAnnotations:p,quizButtons:this.quizButtonState,attendanceButtons:this.attendanceButtonState,dpr:devicePixelRatio,remotePointers:(w=this.remotePointerManager)==null?void 0:w.getPointers(),cardStrokeStates:jp([...n.renderingOrderIterator({includeSelf:!1})]),isReadonly:on(this.state.store)}),e.restore()}close(){var e,t,n;(e=this.finePdfRenderer)==null||e.close(),this.state.editorStore.uninitializeAvSource(),(t=this.pointerSubscription)==null||t.close(),(n=this.strokeSubscription)==null||n.close(),this.drawnCursor.remove(),this.drawnLasso.remove(),this.closed=!0,Oa.onEditorClose(),this.strokeManager.clearRemoteCurrentStroke()}runStrokeOperation(e){let n=((o,i)=&gt;{switch(i){case"undo":return o.undo();case"redo":return o.redo();case"clearAll":return o.clearAllStroke();case"clearHistory":o.clearHistory()}})(this.strokeManager,e);if(n){n.strokes.forEach(this.emitStrokeAdded),n.deleted.forEach(this.emitStrokeDeleted);let o=mr.get(this.card),i=this.strokeManager.packContents(),s=this.card.createDrawnGeometry(this.role.drawnType),a=o[this.role.drawnType].redrawThumbnails({geometry:s,contents:i});this.fineStrokeRenderer.clear(this.role.drawnType),this.sar.needsRoughRedraw(),this.sar.setFineRedrawCountDown(1),this.fineStrokeRenderStrategy="redraw",this.callback.onDrawnMarkedAsUnsaved({card:this.card,op:n,thumbs:a})}this.state.editorStore.setExecutableStrokeOperation(this.strokeManager.canUndo(),this.strokeManager.canRedo(),this.strokeManager.canClearAllStroke())}clear(){this.runStrokeOperation("clearAll")}redo(){this.runStrokeOperation("redo")}undo(){this.runStrokeOperation("undo")}createLaserPointerConsumer(){let e=this;return{pushPoint(t){var n;(n=e.fullScreenSharingProvider)==null||n.pushPoint(t)}}}updateFullScreenSharing(e){var s;if(!this.fullScreenSharingProvider||!((s=this.state.store.screenSharingState)!=null&amp;&amp;s.fullscreen)||!this.shouldUpdateFullScreenSharing())return;let t=this.getFullScreenSharingState({mtx:e}),{presentedWebURL:n,presentedQuizId:o,presentedAttendanceId:i}=this.state.store.screenSharingState.fullscreen;this.fullScreenSharingProvider.update({presentedWebURL:n,presentedQuizId:o,presentedAttendanceId:i,...t})}updateFullScreenSharingOtherCard(e,t){var s;if(!this.fullScreenSharingProvider||!((s=this.state.store.screenSharingState)!=null&amp;&amp;s.fullscreen)||!this.shouldUpdateFullScreenSharing())return;let{startSeconds:n,endSeconds:o}=Xi(e),i=this.getFullScreenSharingState({mtx:t,avSettings:{avSeekTime:n,avEnded:n===o,avSpeedScale:e.playbackRate,toolVisible:!0}});this.fullScreenSharingProvider.update({presentedQuizId:void 0,presentedAttendanceId:void 0,presentedWebURL:void 0,...i})}shouldUpdateFullScreenSharing(){return!this.state.documentLoading&amp;&amp;!this.state.store.screenSharingForPresenter&amp;&amp;!this.hasAnimation()}getFullScreenSharingState(e={}){var l;let{mtx:t,avSettings:n}=e,o=(u,d)=&gt;{var k,A,I,E,O,Q,j,U;let c=d.indexOverGroup(),p=u.a,h=this.getCardSizeOnCanvas(d,u.a),{width:f,height:m}=this.state.screen,g=window.devicePixelRatio,v={x:(f*g/2-(u.e-h.width/2))/h.width,y:(m*g/2-(u.f-h.height/2))/h.height},b=(A=(k=this.playManager)==null?void 0:k.remotePlaying)!=null?A:!1,C=(E=(I=this.playManager)==null?void 0:I.playToken)!=null?E:void 0,x=this.state.editorStore,y=(O=n==null?void 0:n.avSeekTime)!=null?O:x.avSeekTime,S=(Q=n==null?void 0:n.avEnded)!=null?Q:x.avEnded,T=(j=n==null?void 0:n.avSpeedScale)!=null?j:x.avSpeedScale,w=(U=n==null?void 0:n.toolVisible)!=null?U:x.toolVisible;return{page:c,scale:p,center:v,isPlaying:b,playToken:C,currentTime:y,needsDecorateFavorite:w,isPlayEnded:S,playbackRate:T,zoom:void 0}},i=this.rootCardMonitor.get();if(!i){let u=this.card.rootParent();i=u.document?u:this.card}let s=(l=this.parentStack.find(u=&gt;u.card.id===(i==null?void 0:i.id)))==null?void 0:l.mtx;s||(s=t!=null?t:this.mtx);let a=o(s,i);if(this.card.id!==i.id){let u=t!=null?t:this.mtx,{page:d,zoom:c,...p}=o(u,this.card);a.zoom={id:this.card.id,...p},a.currentTime=0,a.playToken=void 0,a.isPlaying=!1,a.playbackRate=1,a.isPlayEnded=!1}return a}updateFullScreenSharingDocument(e){var s,a,l,u;if(!this.fullScreenSharingProvider)return;let{document:t,page:n,authorId:o}=e,i={page:n,scale:1,center:{x:.5,y:.5},isPlaying:(a=(s=this.playManager)==null?void 0:s.remotePlaying)!=null?a:!1,playToken:(u=(l=this.playManager)==null?void 0:l.playToken)!=null?u:void 0,currentTime:0,needsDecorateFavorite:this.state.editorStore.toolVisible,isPlayEnded:!1};this.fullScreenSharingProvider.update({document:t,authorId:o,presentedWebURL:void 0,presentedQuizId:void 0,presentedAttendanceId:void 0,...i})}setDrawnLassoVisible(e){this.drawnLasso.style.visibility=e?"visible":"hidden"}setDrawnCursorVisible(e){this.drawnCursor.style.visibility=e?"visible":"hidden"}};function rBe(r,e){var t,n,o,i;return e.store.editorRedrawTrigger&gt;r.store.editorRedrawTrigger||e.documentLoading!==r.documentLoading||e.editorStore.selectedTool!==r.editorStore.selectedTool||r.editorStore.activeFingerTool!==e.editorStore.activeFingerTool||r.editorStore.narrationRecording!==e.editorStore.narrationRecording||((n=(t=r.store.desktop)==null?void 0:t.focusingCard)==null?void 0:n.id)!==((i=(o=e.store.desktop)==null?void 0:o.focusingCard)==null?void 0:i.id)}function Sde(r,e){if(e.canvas.width/e.canvas.height&gt;r.width/r.height){let t=r.height/e.canvas.height,n=-(e.canvas.width*t-r.width)/2,o=0;return new ft(t,0,0,t,n,o)}else{let t=r.width/e.canvas.width,n=0,o=-(e.canvas.height*t-r.height)/2;return new ft(t,0,0,t,n,o)}}function ih(r={}){let e=!1,t=!1,n=1,o=1,i=0,s=1,a=!1,l=!0,u,d=new $S;d.onTimeChange=f=&gt;{if(!u.avPlaying)return;if((()=&gt;f&lt;u.avEndTime?!1:!(u.narrationRecording&amp;&amp;u.isUnlimitedRecordingTime))()){let g=u.continuousPlayback();p({avSeekTime:u.avEndTime,avPlaying:!1,slideshowPlaying:g,avEnded:!g})}else p({avSeekTime:f})},d.onEnded=()=&gt;{if(!u.avPlaying||u.narrationRecording&amp;&amp;u.isUnlimitedRecordingTime)return;let f=u.continuousPlayback();p({avPlaying:!1,slideshowPlaying:f,avSeekTime:u.avEndTime,avEnded:!f})};let c=ic(),p=(f,m=!1)=&gt;{let g={...u,...f};u=g,c.publish(g),d.apply(g,{syncTime:m})},h={selectedTool:0,toolVisible:!0,avSeekTime:i,avEndTime:0,avPlaying:e,avEnded:!1,avInitialized:t,avReady:!1,avSpeedScale:n,avVolume:s,avMuted:a,zoom:1,narrationRecording:!1,narrationVolume:o,isUnlimitedRecordingTime:l,mediaPlayer:void 0,canUndoStroke:!1,canRedoStroke:!1,canClearStroke:!1,textCanUndo:!1,textCanRedo:!1,slideshowPlaying:!1,typingAttributes:{color:To(),bold:!1,fontSize:Sb,lineSpacing:0,list:void 0},addCardDialogOpen:!1,addUrlDialogOpen:!1,quizSharingModeDialogOpen:!1,activeFingerTool:"finger",hideAnnotation:!1,activateTextEditor:!1,downloadedPdfNumPages:new Map,...r};return u={...h,subscribe(f){return c.subscribe(f)},setZoom(f){p({zoom:f})},rewind(f){let m=u.avSeekTime-1;if(f instanceof zn||f instanceof Qn){let g=f.content.in_point;m&lt;=g&amp;&amp;g&lt;=u.avSeekTime&amp;&amp;(m=g)}p({avSeekTime:Math.max(0,m)},!0)},setPlaying(f){let m=u.slideshowPlaying;return p({slideshowPlaying:f,avPlaying:f,avEnded:!1}),m},continuousPlayback(){return u.slideshowPlaying&amp;&amp;u.selectedTool===0&amp;&amp;u.activeFingerTool==="finger"&amp;&amp;!!u.nextCardId&amp;&amp;u.moveMode!=="vertical"},continuePlaying(){return u.avSeekTime===u.avEndTime&amp;&amp;u.slideshowPlaying&amp;&amp;!u.avPlaying},setAvSeekTime(f,m){p({avSeekTime:f,avEnded:!1},m)},setAvEndTime(f){p({avEndTime:f})},setAvSpeedScale(f){p({avSpeedScale:f})},setAvVolume(f){p({avVolume:f})},setAvMuted(f,m){p({avMuted:f,forcedMute:m})},setInheritAvSeektime(f){p({inheritAvSeektime:f})},setNarration(f){let m={},g=!1;if(f.card){d.setNarration(f.card);let{startSeconds:v}=Xi(f.card);m.avPlaying=!1,m.slideshowPlaying=!1,m.avSeekTime=v,g=!0}f.duration&amp;&amp;d.setNarrationDuration(f.duration),f.recording!==void 0&amp;&amp;(m.narrationRecording=f.recording),f.volume!==void 0&amp;&amp;(m.narrationVolume=f.volume),f.unlimited!==void 0&amp;&amp;(m.isUnlimitedRecordingTime=f.unlimited),p(m,g)},initializeAvSource(f,m){var y,S,T,w;(f instanceof Qn||f instanceof zn)&amp;&amp;!_a(f.duration)&amp;&amp;(d.onDurationChange=k=&gt;{var I;d.onDurationChange=void 0,We(On(f.id,{"metadata.duration":k,"content.out_point":k}));let A=(I=f.content.asset)==null?void 0:I.remote_id;if(A){let E=Object.assign({},f.size,{duration:k,index:0});m.reduce(oS(A,[E]))}}),d.onReady=k=&gt;{p(k===void 0?{avReady:!0}:{avReady:!1,loadError:k})},d.initialize(f);let{startSeconds:g,endSeconds:v}=Xi(f),b=it(u.avSeekTime,g,v),C=ZF(f),x=VM(f);p({cardId:f.id,mediaPlayer:d.player,avPlaying:u.slideshowPlaying,nextCardId:(w=(T=(y=f.next)==null?void 0:y.id)!=null?T:(S=f.nextGroup)==null?void 0:S.id)!=null?w:void 0,avInitialized:!0,avSeekTime:b,avEndTime:v,avVolume:C,avSpeedScale:f.playbackRate,inheritAvSeektime:!1,isUnlimitedRecordingTime:x},!0)},uninitializeAvSource(){if(!u.avInitialized)return;d.uninitialize();let f=u.inheritAvSeektime?u.avSeekTime:0;p({mediaPlayer:void 0,avPlaying:!1,avSeekTime:f,avInitialized:!1,avEnded:!1})},setTool(f){let m=f!==0?!0:h.toolVisible;p({selectedTool:f,toolVisible:m,nextCaretPoint:void 0,activateTextEditor:!1})},setTextToolWithCaretPoint(f){p({selectedTool:2,toolVisible:!0,nextCaretPoint:f})},setToolVisible(f){p({toolVisible:f})},setExecutableStrokeOperation(f,m,g){p({canUndoStroke:f,canRedoStroke:m,canClearStroke:g})},setTextHistoryTool({canUndo:f,canRedo:m}){p({textCanUndo:f,textCanRedo:m})},setTypingAttributes(f){p({typingAttributes:f})},setAddCardDialogOpen(f){p({addCardDialogOpen:f})},setAddUrlDialogOpen(f){p({addUrlDialogOpen:f})},setQuizView(f){if(f===void 0)p({quizView:void 0});else{let{card:m,mode:g}=f;p({quizView:{cardId:m.id,mode:g}})}},setQuizSharingModeDialogOpen(f){p({quizSharingModeDialogOpen:f})},setAttendanceView(f){if(f){let{card:m,mode:g}=f;p({attendanceView:{cardId:m.id,mode:g}})}else p({attendanceView:void 0})},setActiveFingerTool(f){p({activeFingerTool:f})},setEditorMoveMode(f){p({moveMode:f})},setHideAnnotation(f){p({hideAnnotation:f})},setLoadError(f){p({loadError:f})},setActivateTextEditor(f){p({activateTextEditor:f})},dispatch:p}}var wde=.1,JG=class{constructor(){this.isDistributor=!1;this._needsUpdateFullScreenSharing=!1;this.session={playing:!1,id:0};this._seeking=!1;this._rewind=!1;this._speedScaling=!1;this.remotePlayingAccepted=!1;this._playToken=Sr()}get needsUpdateFullScreenSharing(){return this._needsUpdateFullScreenSharing}set needsUpdateFullScreenSharing(e){this._needsUpdateFullScreenSharing=e}get seeking(){return this._seeking}get rewind(){return this._rewind}get speedScaling(){return this._speedScaling}get playToken(){return this._playToken}get userPlaying(){return!this._rewind&amp;&amp;!this._seeking&amp;&amp;this.session.playing}get remotePlaying(){return this.userPlaying&amp;&amp;!this._speedScaling}get localPlaying(){return this.isDistributor?this.remotePlaying&amp;&amp;this.remotePlayingAccepted:this.userPlaying}nextSession(e){return{playing:e,id:e?this.session.id+1:this.session.id}}newSession(){return{playing:this.session.playing,id:this.session.id+1}}setUserStatus(e){var o,i,s,a;let t=this.remotePlaying;this._seeking=(o=e.seeking)!=null?o:this._seeking,this._rewind=(i=e.rewind)!=null?i:this._rewind,this._speedScaling=(s=e.speedScaling)!=null?s:this._speedScaling;let n=(a=e.session)!=null?a:this.session;this.session.id!==n.id&amp;&amp;(this._playToken=Sr(),this.remotePlayingAccepted=!1),this.session=n,t!==this.remotePlaying&amp;&amp;(this.needsUpdateFullScreenSharing=!0)}setRemoteStatus(e,t,n){let o=this.remotePlaying;this.isDistributor=e,e&amp;&amp;t&amp;&amp;this._playToken===n&amp;&amp;(this.remotePlayingAccepted=!0,o!==this.remotePlaying&amp;&amp;(this.needsUpdateFullScreenSharing=!0))}},Ed=class{constructor(){this._status=new JG}get remotePlaying(){return this._status.remotePlaying}get localPlaying(){return this._status.localPlaying}get playToken(){return this._status.playToken}get seeking(){return this._status.seeking}get rewind(){return this._status.rewind}getAndClearNeedsUpdateFullScreenSharing(){let e=this._status.needsUpdateFullScreenSharing;return this._status.needsUpdateFullScreenSharing=!1,e}updateStatusPlay(){return this._status.setUserStatus({session:this._status.nextSession(!0)}),this._status.localPlaying}updateStatusPause(){this._status.setUserStatus({session:this._status.nextSession(!1)})}updateRewindState(e){this._status.setUserStatus({rewind:e})}updateSeekState(e){this._status.setUserStatus({seeking:e})}updateSpeedScaleState(e){this._status.setUserStatus({speedScaling:e})}newSession(){this._status.setUserStatus({session:this._status.newSession()})}setRemoteStatus(e,t,n,o){this._status.setRemoteStatus(t,n,o),e.setPlaying(n)}clearRemoteStatus(){this._status.setRemoteStatus(!1,!1,void 0)}play(e){let t=this.updateStatusPlay()&amp;&amp;e.avInitialized;e.setPlaying(t)}pause(e){this._status.setUserStatus({session:this._status.nextSession(!1)}),e.setPlaying(!1)}playEnded(){this._status.setUserStatus({session:this._status.nextSession(!1)})}pageChanged(e){if(e.slideshowPlaying){let t=this.updateStatusPlay();t&amp;&amp;e.setPlaying(t)}else this.newSession()}beginSeek(e){this.updateSeekState(!0),e.setPlaying(!1)}seek(e,t){e.setAvSeekTime(t,!0)}endSeek(e,t){var i;this.updateSeekState(!1),this.newSession();let n=(i=this.localPlaying)!=null?i:!0,o=xde(e,t);e.setAvEndTime(o),e.setPlaying(n)}beginRewind(e,t){this.updateRewindState(!0),e.rewind(t)}endRewind(e){this.updateRewindState(!1);let t=this.updateStatusPlay()&amp;&amp;e.avInitialized;e.setPlaying(t)}beginSpeedScaling(e){this.updateSpeedScaleState(!0);let t=this.localPlaying;e.setPlaying(t)}endSpeedScaling(e){this.updateSpeedScaleState(!1),this.newSession();let t=this.localPlaying;e.setPlaying(t)}togglePlayPause(e,t){let n=!e.avPlaying,{startSeconds:o,endSeconds:i}=Xi(t),s=wde;if(n){Math.abs(e.avSeekTime-i)&lt;s&amp;&amp;t.duration&gt;1&amp;&amp;e.setAvSeekTime(o,!0),t.duration-s&lt;=e.avSeekTime&amp;&amp;e.setAvSeekTime(o,!0);let a=xde(e,t);e.setAvEndTime(a),n=this.updateStatusPlay()&amp;&amp;e.avInitialized}else this.updateStatusPause();e.setPlaying(n)}};function xde(r,e){let{endSeconds:t}=Xi(e),{avSeekTime:n}=r;return n&gt;t+wde?e.duration:t}var GB=class{constructor(){this.history=[]}push(e){if(this.history.length&gt;0&amp;&amp;this.history[this.history.length-1]===e)return;let t=this.history.findIndex(n=&gt;n===e);t&gt;-1&amp;&amp;this.history.splice(t,1),this.history.push(e)}lastTargeted(e){if(this.cleanupExpired(e),!(this.history.length&lt;1)){let t=this.history[this.history.length-1];return e.getCard(t)}}cleanupExpired(e){this.history=this.history.filter(t=&gt;e.getCard(t)!==void 0)}};var Tde="webCardExtensionLeadingDate",nBe=864e5*7;function Dde(){let r=ie.localStorage.get(Tde);return r==null?!0:new Date().getTime()-new Date(r).getTime()&gt;=nBe}function kde(){let r=new Date;ie.localStorage.put(Tde,r.toISOString())}function Sw(r){if(Pf(r)){let t=decodeURI(r);return window.open(t,"_blank")}let e=he.get().strings;return alert(e.invalidOpenUrl),null}function xw(r){let e=he.get().strings;r?window.open(e.schoolLoiloTVUrlWithExtension):window.open(e.schoolLoiloTVUrl)}var yi=oe(ve());var Nv=({card:r,viewMode:e,onDismiss:t,updateCoverDataBeforeUnload:n})=&gt;{let o=Me(),[i,s]=(0,yi.useState)(""),[a,l]=(0,yi.useState)(!1),[u,d]=(0,yi.useState)(!0),c=Vr.getEndpoint("loilonote-attendance");if(!c)return null;let p=Xt(o),h=pe();jn(()=&gt;{o.reduce(zi(!0))}),nd(()=&gt;{n&amp;&amp;f()}),(0,yi.useEffect)(()=&gt;{if(!Or(p))return;let x=o.screenSharingActionNotification[p],y=x&amp;&amp;x.type!=="end";a&amp;&amp;!y&amp;&amp;t(),l(y)},[p,o.screenSharingActionNotification]);let f=async()=&gt;{let x=await Vr.issue("loilonote-attendance");if(!x)return;let y=o.lnsEndpoint,T=await new hv({lnsEndpoint:y,lnaEndpoint:c,logEnabled:o.logEnabled,locale:o.locale}).getCoverData(r.content.attendance_id,x.app_token),w=oBe({card:r,data:T});w&amp;&amp;We(w)};(0,yi.useEffect)(()=&gt;{if(!e)return;let x=Vr.getEndpoint("loilonote-attendance");!x||Vr.issue("loilonote-attendance").then(y=&gt;{if((y==null?void 0:y.app_token)===void 0)return;let S=`${x}/attendance/${r.content.attendance_id}?app_token=${y.app_token}&amp;lns_endpoint=${o.lnsEndpoint}&amp;language_type=${Hm(o.locale)}`;s(e==="teacherAnswer"?S+"&amp;teacherViewMode=answer":S)})},[e]);let m=()=&gt;{t()},g=(()=&gt;{if(!a)return!0;if(o.screenSharingForPresenter)return!1;if(o.screenSharingForSelf||!Or(p))return!0;let x=o.screenSharingActionNotification[p];return!x||!as(x)?!0:x.presenter===o.userInfo.user_id})(),v=(()=&gt;a?o.userInfo.is_teacher?o.screenSharingForPresenter?!0:!o.screenSharingForSelf:!1:!0)(),b=g||v,C;return typeof p=="number"&amp;&amp;(C=o.screenSharingActionNotification[p]),yi.default.createElement("div",{className:"testCardContainer","data-type":u?"attendance":void 0},u&amp;&amp;yi.default.createElement(yi.default.Fragment,null,yi.default.createElement("div",{className:"testCardLoadingProgressLabel"},h.preparingAttendance),yi.default.createElement(_t,{style:{position:"absolute",top:"30%",left:"25%",width:"50%"}})),yi.default.createElement("iframe",{className:"testCardFrame",sandbox:"allow-scripts allow-forms allow-modals allow-same-origin allow-downloads",src:i,onLoad:()=&gt;d(!1)}),b&amp;&amp;yi.default.createElement("div",{className:"testCardTopBarContainer"},yi.default.createElement("div",{className:"testCardTopBarContainerInner"},yi.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},g&amp;&amp;yi.default.createElement("div",{className:"editorButtonWrapper"},yi.default.createElement("div",{className:"editorButton",onClick:m},yi.default.createElement("div",{className:"editorButtonIcon backButtonIcon"})))),v&amp;&amp;Or(p)&amp;&amp;as(C)&amp;&amp;yi.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},yi.default.createElement("div",{className:"flexSpacer"}),yi.default.createElement(Au,{store:o,courseId:p,sessionId:C.id,publisher:C.publisher,forStudent:C.publisher===o.userInfo.user_id})))))};function oBe(r){var i,s;let{card:e,data:t}=r,{content:n}=e,o={};if(n.title!==t.title&amp;&amp;(o["content.title"]=t.title),((i=n.attendance_author)==null?void 0:i.id)!==t.author.id&amp;&amp;(o["content.attendance_author.id"]=t.author.id),((s=n.attendance_author)==null?void 0:s.name)!==t.author.name&amp;&amp;(o["content.attendance_author.name"]=t.author.name),Object.keys(o).length&gt;0)return On(e.id,o)}var _s=oe(ve());var ZG=16,WB=class extends _s.default.Component{constructor(){super(...arguments);this.state={tx:0,inTx:void 0,outTx:void 0,narrationRecording:!1};this.eventTargetRef=_s.default.createRef();this.controlRef=_s.default.createRef();this.inPointRef=_s.default.createRef();this.outPointRef=_s.default.createRef();this.onSingle=(t,n)=&gt;{let o=this.duration;if(!_a(o)){this.mouseDown=void 0;return}let{playManager:i,editorStore:s,card:a}=this.props,l=n.x-ZG;if(t==="down"){i.beginSeek(s);let c=this.state.tx-l,p;Math.abs(c)&gt;ZG?p=0:p=c,this.mouseDown={offset:p}}else if(this.mouseDown===void 0)return;let u=l+this.mouseDown.offset,d=it(this.timeFromX(u),0,this.maxSeekTime);i.seek(s,d),t==="up"&amp;&amp;(i.endSeek(s,a),this.mouseDown=void 0),this.setState({tx:u})}}componentDidMount(){this.processor=new Gn(this.eventTargetRef.current,{ignoreDevicePixelRatio:!0}),this.processor.onSingle=this.onSingle}componentWillUnmount(){var t;(t=this.processor)==null||t.unbind()}xFromTime(t){if(this.props.screenSharing){let{startSeconds:n,duration:o}=Xi(this.props.card);return o&lt;=0?0:(t-n)/o*this.sliderWidth}return t/this.duration*this.sliderWidth}timeFromX(t){if(this.props.screenSharing){let{startSeconds:n,duration:o}=Xi(this.props.card);return t/this.sliderWidth*o+n}return t/this.sliderWidth*this.duration}get duration(){var t,n;return(n=(t=this.props.editorStore.mediaPlayer)==null?void 0:t.duration)!=null?n:this.props.card.duration}get maxSeekTime(){let t=this.props.screenSharing?Xi(this.props.card).endSeconds:this.duration;return(1-Number.EPSILON)*t}get sliderWidth(){return this.eventTargetRef.current.getBoundingClientRect().width-ZG*2}componentDidUpdate(t,n,o){let{avSeekTime:i,narrationRecording:s}=this.props.editorStore,a=0,l,u,d=this.getDefaultInOut();d&amp;&amp;(a=it(this.xFromTime(i),0,this.sliderWidth),d.inTx&gt;0&amp;&amp;(l=d.inTx),Fh(this.xFromTime(this.maxSeekTime),d.outTx)&amp;&amp;(u=d.outTx)),!(a===this.state.tx&amp;&amp;l===this.state.inTx&amp;&amp;u===this.state.outTx&amp;&amp;s===this.state.narrationRecording)&amp;&amp;this.setState({tx:a,inTx:l,outTx:u,narrationRecording:s})}getDefaultInOut(){if(!this.eventTargetRef.current||!_a(this.duration))return;let{startSeconds:t,endSeconds:n}=Xi(this.props.card),o=this.sliderWidth,i=it(this.xFromTime(t),0,o),s=it(this.xFromTime(n),0,o);return{inTx:i,outTx:s}}render(){let{tx:t,inTx:n,outTx:o,narrationRecording:i}=this.state,s=!i&amp;&amp;this.props.editorStore.avReady,a=this.getDefaultInOut(),l=2,u=0,d="100%";if(a&amp;&amp;!this.props.screenSharing){let c=this.sliderWidth-2*l;u=it(n!=null?n:a.inTx-l,0,c),d=it(o!=null?o:a.outTx-l,0,c)-u}return _s.default.createElement("div",{className:"editorSliderWrapper"},_s.default.createElement("div",{className:"editorAvSlider","data-enable":s},_s.default.createElement("div",{ref:this.eventTargetRef,className:"editorAvSliderBarWrapper"},_s.default.createElement("div",{className:"editorAvSliderBarInner"},_s.default.createElement("div",{className:"editorAvSliderBar","data-enable":s},_s.default.createElement("div",{className:"editorAvSliderBodyRangeBar",style:{left:u,width:d},"data-enable":s}),t&gt;=u&amp;&amp;Or(d)&amp;&amp;_s.default.createElement("div",{className:"editorAvSliderPlayedRangeBar",style:{left:u,width:it(t-u,0,d)},"data-enable":s})))),n!==void 0&amp;&amp;_s.default.createElement("div",{ref:this.inPointRef,className:"editorAvSliderInOutPointWrapper",style:{transform:`translateX(${n}px)`}},_s.default.createElement("div",{className:"editorAvSliderInPoint"})),o!==void 0&amp;&amp;_s.default.createElement("div",{ref:this.outPointRef,className:"editorAvSliderInOutPointWrapper",style:{transform:`translateX(${o}px)`}},_s.default.createElement("div",{className:"editorAvSliderOutPoint"})),_s.default.createElement("div",{className:"editorAvSliderControlWrapper",ref:this.controlRef,style:{transform:`translateX(${t}px)`},"data-enable":s},_s.default.createElement("div",{className:"editorAvSliderControl","data-enable":s}))))}};var zr=oe(ve()),hC=oe(ve());var eW=oe(ve()),$B=oe(ve());var ww=({store:r,disappearProgress:e=1,type:t})=&gt;{let n={},o=1;e&lt;1&amp;&amp;(n={transform:`scale(${.5+e/2})`},o=e*.5);let i=r.fixedUIHit===t?"enter":"exit",s=(0,$B.useRef)(null);(0,$B.useEffect)(()=&gt;{if(s.current){let l=s.current.getBoundingClientRect();Ib(t,qe(l.left,l.top,l.width,l.height))}});let a=r.fixedUIHit===t?"/img/TrashFull@2x.png":"/img/Trash@2x.png";return eW.default.createElement("div",{className:"trashBox",ref:s,style:{opacity:o,display:e&gt;0?"flex":"none"}},eW.default.createElement(lr,{className:"trashBoxImg "+i,style:n,src:a,alt:t}))};var _d=oe(ve());var tW="#b3b3b3ff",Pde=1,iBe="#ffff00ff",sBe=3,rW="#ffffff99",aBe="#d6d6d6ff",VB=class{constructor(e){this.scrollX=0;this.handleSingle=(e,t)=&gt;{var i,s;let n=window.devicePixelRatio,{minScrollX:o}=Tw(this.props);if(this.dirtyMark.mark(),e==="down"&amp;&amp;(this.transition=void 0),e==="move"&amp;&amp;o&lt;0){let a=lBe(this.scrollX+t.dx,o)?.5:1;this.scrollX+=t.dx*a}if(e==="up")if(oi(t)){let a=this.getItemUnderPoint(t);a instanceof Go?this.onCardSelected(a):a==="prevButton"?(i=this.onPagerButtonClicked)==null||i.call(this,"prev"):a==="nextButton"&amp;&amp;((s=this.onPagerButtonClicked)==null||s.call(this,"next"))}else{let a=Sx(t,.5);this.transition=tM({start:De(this.scrollX,0),velocity:a,minX:o*n,minY:0,maxX:0,maxY:0})}};this.handleFreeMove=e=&gt;{this.getItemUnderPoint(e)?this.canvas.style.cursor="pointer":this.canvas.style.cursor="default"};this.dirtyMark=yg();this.prevLoading=!1;this.props={screen:e.screen,card:e.card,store:e.store,hasNext:e.hasNext,hasPrev:e.hasPrev},this.canvas=e.canvas,this.rootMipmapType=e.rootMipmapType,this.eventProcessor=new Gn(this.canvas),this.eventProcessor.onSingle=this.handleSingle,this.freeMoveProcessor=new Ha(this.canvas),this.freeMoveProcessor.onFreeMove=this.handleFreeMove,this.onCardSelected=e.onCardSelected,this.onPagerButtonClicked=e.onPagerButtonClicked,this.seekTimeDelegate=e.seekTimeDelegate,this.cardRendererCallback=e.cardRendererCallback,this.onNextProps(this.props),this.scrollToReveal(e.card),this.applyScale()}unbind(){this.freeMoveProcessor.unbind(),this.eventProcessor.unbind(),Oa.onEditorFooterThumbClose(this.props.card)}getItemUnderPoint(e){let t=window.devicePixelRatio,n=Bs(e,1/t);for(let{item:o,bounds:i}of IP({offset:this.offset,...this.props}))if(o!=="separator"&amp;&amp;Pn(i,n))return o}get offset(){return De(this.scrollX/window.devicePixelRatio,0)}scrollToReveal(e){let t=[...IP({offset:this.offset,...this.props})].find(m=&gt;m.item instanceof Go?m.item.id===e.id:!1);if(!t)return;let n=t.bounds,{bounds:o,origin:i}=Tw(this.props),s=window.devicePixelRatio,a=n.x,l=a+n.width,u=i.x,d=o.width;if(u&lt;=a&amp;&amp;l&lt;=d)return;let c=(u-a)*s,p=(d-l)*s,h=De(this.scrollX,0),f=.25;c&gt;0?this.transition=Rl(h,De(this.scrollX+c,0),f,ms):p&lt;0&amp;&amp;(this.transition=Rl(h,De(this.scrollX+p,0),f,ms))}onNextProps(e){let t=this.props.card;this.props=e,t!==e.card&amp;&amp;(this.applyScale(),this.scrollToReveal(e.card),this.prevSeekTime=void 0),this.dirtyMark.mark()}applyScale(){let{thumbSize:e}=Tw(this.props),{card:t}=this.props;for(let n of t.iteratorOverGroup()){let o=Xr(e,n.size);if(n.document)Kt(n,this.cardRendererCallback).invalidateMipmap(o);else for(let i of n.familyIterator())Kt(i,this.cardRendererCallback).invalidateMipmap(o)}this.dirtyMark.mark()}setSeekTimeDelegate(e){this.seekTimeDelegate=e}update(e){let t=!1;if(this.transition){let i=this.transition.update(e);this.scrollX=i.x,this.transition.finished&amp;&amp;(this.transition=void 0),t=!0}let n=!1;for(let{item:i}of IP({offset:this.offset,...this.props}))if(i instanceof Go)for(let s of i.familyIterator()){let a=Kt(s,this.cardRendererCallback);a.update()&amp;&amp;(t=!0),n=n||a.shouldDisplayLoading(!0)}this.prevLoading&amp;&amp;!n&amp;&amp;(t=!0),this.prevLoading=n;let o=this.seekTimeDelegate(this.props.card.id);return o!==this.prevSeekTime&amp;&amp;(t=!0),this.prevSeekTime=o,t||this.dirtyMark.drain()}setNeedsDisplay(){this.dirtyMark.mark()}render(e){e.save(),e.imageSmoothingEnabled=!1,e.clearRect(0,0,this.canvas.width,this.canvas.height);let t=window.devicePixelRatio;e.scale(t,t);for(let{item:n,bounds:o}of IP({offset:this.offset,...this.props}))if(n==="separator")e.save(),e.strokeStyle=aBe,e.lineWidth=2,e.beginPath(),e.moveTo(o.x+o.width/2,o.y),e.lineTo(o.x+o.width/2,o.y+o.height),e.stroke(),e.restore();else if(n==="nextButton"||n==="prevButton"){e.save(),e.translate(o.x+o.width/2,o.y+o.height/2);let i=-o.width/2,s=-o.height/2,a=o.width,l=o.height;e.fillStyle=rW,e.fillRect(i,s,a,l),e.strokeStyle=tW,e.lineWidth=Pde,e.strokeRect(i,s,a,l);let d=Math.min(o.width,o.height)*.5*.5;e.fillStyle=rW,e.beginPath(),e.ellipse(0,0,d,d,0,0,2*Math.PI),e.fill();let c=d*.5,p=n==="prevButton"?1:-1;e.beginPath(),e.moveTo(p*c*.5,-c),e.lineTo(-p*c*.5,0),e.lineTo(p*c*.5,c),e.lineWidth=2,e.strokeStyle=tW,e.stroke(),e.restore()}else{let i=n;e.save(),e.translate(o.x+o.width/2,o.y+o.height/2);let s=-o.width/2,a=-o.height/2,l=o.width,u=o.height,d=i===this.props.card,c,p;d?(c=sBe,p=iBe):(c=Pde,p=tW);let h=c*.5;e.save(),e.beginPath(),e.rect(s+h,a+h,l-2*h,u-2*h),e.clip(),e.beginPath(),e.fillStyle=rW,e.fillRect(s,a,l,u);let f=Xr(o,i.size);e.scale(f,f),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="medium";let m=new ft().scale(f).translate(o.x+o.width/2,o.y+o.height/2),g,v=i.extendedDrawn();if(v&amp;&amp;v.commands.length&gt;0&amp;&amp;(g={renderer:Oa.forEditorFooterThumbRoot(i),strategies:UM()}),Nf({ctx:e,card:i,viewport:Tl(),canvas:e.canvas,mtx:m,rootMipmapType:this.rootMipmapType,root:i,assetUplaodStates:this.props.store.assetUploadStates,cardRendererCallback:this.cardRendererCallback,toolVisible:!1,narrationRecording:!1,dpr:t,cardStrokeStates:jp([...i.renderingOrderIterator({includeSelf:!1})]),fineStroke:g}),e.restore(),e.imageSmoothingEnabled=!1,d){let b=this.seekTimeDelegate(i.id),{startSeconds:C,endSeconds:x}=Xi(i),y=(b-C)/(x-C);e.beginPath(),e.fillStyle="rgba(0, 0, 255, 0.5)",e.fillRect(s,a,l*it(y,0,1),u),e.beginPath(),e.strokeStyle=p,Ade(e,s,a,l,u,c);let S=jB,T=De(0,a-S.height),w=S.height+1,k=w*(S.width/S.height),A=uBe(T.x-k/2,T.y,k,w);e.fillStyle=p,e.fill(A)}else e.beginPath(),e.strokeStyle=p,Ade(e,s,a,l,u,c);e.restore()}e.restore()}};function lBe(r,e){let t=window.devicePixelRatio;return it(r,e*t,0)!==r}function Ade(r,e,t,n,o,i){r.lineWidth=i,r.strokeRect(e+i/2,t+i/2,n-i,o-i)}function uBe(r,e,t,n){let o=new Path2D;return o.moveTo(r+t/2,e),o.lineTo(r+t,e+n),o.lineTo(r,e+n),o.closePath(),o}var Ide=({card:r,rootMipmapType:e,store:t,screen:n,onCardSelected:o,onPagerButtonClicked:i,seekTimeDelegate:s,cardRendererCallback:a})=&gt;{let l=(0,_d.useRef)(null),u=(0,_d.useRef)(),d=j0(t,r),c=!!(d!=null&amp;&amp;d.prev),p=!!(d!=null&amp;&amp;d.next);(0,_d.useEffect)(()=&gt;{let m=l.current,g=n.width*window.devicePixelRatio;m.width!==g&amp;&amp;(m.width=g);let v=new VB({screen:n,canvas:m,store:t,card:r,hasPrev:c,hasNext:p,rootMipmapType:e,onCardSelected:o,onPagerButtonClicked:i,seekTimeDelegate:s,cardRendererCallback:a}),b=m.getContext("2d");if(!b)throw new uo;let C=!1,x=new vv,y=()=&gt;{C||(x.update(),v.update(x.deltaTime)&amp;&amp;v.render(b),requestAnimationFrame(y))};return requestAnimationFrame(y),u.current=v,()=&gt;{C=!0,v.unbind()}},[]),(0,_d.useEffect)(()=&gt;{var m;(m=u.current)==null||m.onNextProps({screen:n,card:r,hasNext:p,hasPrev:c,store:t})},[n,r,p,c,t]),(0,_d.useEffect)(()=&gt;{var b;let m=l.current,g=m.width,{width:v}=m.getBoundingClientRect();m.width=v*window.devicePixelRatio,g!==m.width&amp;&amp;((b=u.current)==null||b.applyScale())},[n]),(0,_d.useEffect)(()=&gt;{var m;(m=u.current)==null||m.setSeekTimeDelegate(s)},[s]),(0,_d.useEffect)(()=&gt;{var m;(m=u.current)==null||m.setNeedsDisplay()},[r,u.current,t.assetUploadStates]),(0,_d.useEffect)(()=&gt;{let m=ap(g=&gt;{var v;(v=u.current)==null||v.setNeedsDisplay()});return()=&gt;{m.close()}},[]);let h=window.devicePixelRatio,{bounds:f}=Tw({screen:n,card:r,store:t,hasPrev:c,hasNext:p});return _d.default.createElement("canvas",{ref:l,style:{position:"absolute",left:`${f.x}px`,top:`${f.y}px`,width:`${f.width}px`,height:`${f.height}px`},width:f.width*h,height:f.height*h})},dBe=5/6,jB=$e(8,5);function Tw(r){let{screen:e,card:t,hasPrev:n,hasNext:o}=r,i=jB.height,s=e.isMobile?44:70,a=e.isMobile?10:20,l=kt.width/kt.height,u=window.devicePixelRatio,d=(s-i)*l,c=Math.round(d*u)/u,p=c/l,h=0,f=0;for(let Q of t.connectedGroupHeadCards())h+=Q.groupMemberCount(),f++;let m=0;if(h&gt;1||fv(t)){let Q,j;e.isMobile?(Q=Nh(8),j=5):(Q=48,j=15),Q+=2*2;let B=3;m=j+Q*B+j*(B-1)+j}let g=m,v=h,b=f-1,C=0;n&amp;&amp;(v++,b++,C=c+a,g+=C),o&amp;&amp;(v++,b++);let x=c*v+a*b,y=p,S=g+c*h+a*(f-1),T,w,k,A,I=(g+S)/2,E=e.width/2;m&lt;=E-(I-g+C)&amp;&amp;S&lt;=e.width?(T=E-(I-g+C),w=T+x,k=De(0,i),A=0):m&lt;=E-x/2?(T=e.width/2-x/2,w=T+x,k=De(0,i),A=0):x&lt;=e.width-m?(T=m,w=T+x,k=De(0,i),A=0):(T=0,w=e.width,k=De(m,i),A=e.width-m-x);let O=w-T;return{bounds:qe(T,0,O,s),contentSize:$e(x,y),thumbSize:$e(c,p),origin:k,minScrollX:A,groupSeparatorWidth:a}}function*IP(r){let{card:e,offset:t,hasPrev:n,hasNext:o}=r,{thumbSize:i,origin:s,groupSeparatorWidth:a,bounds:l}=Tw(r),u=s.x+t.x,d=s.y+t.y,c=jB,p=dBe,h=l.height-2*c.height,f=h*p,m=f*4/3,g=C=&gt;{let y=De(u+C+i.width/2,d+i.height/2).x-m*.5,S=d+(h-f)*.5;return qe(y,S,m,f)},v=C=&gt;{let x=u+C,y=(i.height-2*c.height)*p,S=d+i.height/2-y/2;return qe(x,S,a,y)},b=0;if(n){let C=g(b);b+=i.width,yield{item:"prevButton",bounds:C};let x=v(b);b+=a,yield{item:"separator",bounds:x}}for(let C of e.connectedGroupHeadCards())for(let x of C.iterator()){let y=De(u+b+i.width/2,d+i.height/2);if(e===x){let S=qe(y.x-i.width/2,y.y-i.height/2,i.width,i.height);b+=i.width,yield{item:x,bounds:S}}else{let S=g(b);b+=i.width,yield{item:x,bounds:S}}if(x.next===void 0&amp;&amp;x.nextGroup){let S=v(b);b+=a,yield{item:"separator",bounds:S}}}if(o){let C=v(b);b+=a,yield{item:"separator",bounds:C};let x=g(b);yield{item:"nextButton",bounds:x}}}var $a=oe(ve()),qB=oe(ve());var Dw=({onChange:r,volume:e,contentClassName:t,knobDiameter:n})=&gt;{let o=(0,qB.useRef)(0),i=it(e,0,2),s=(a,l)=&gt;{l==="down"?o.current=a:r(a,o.current,l)};return $a.default.createElement("div",{className:t!=null?t:"editorVolumePopup"},$a.default.createElement(KB,{knobDiameter:n,onChange:s,step:.1,min:0,mid:1,max:2,value:i,enable:!0}))},Ede=({onChangeDuration:r,onChangeUnlimited:e,duration:t,unlimitedRecording:n})=&gt;$a.default.createElement("div",{className:"editorDurationPopup"},$a.default.createElement(KB,{onChange:(i,s)=&gt;{i&lt;1&amp;&amp;(i=parseFloat((.9+i*.1).toFixed(1))),r(i,s)},step:1,min:-8,mid:60,max:600,value:t,enable:!n}),$a.default.createElement(cBe,{checked:n,onChange:e})),cBe=({checked:r,onChange:e})=&gt;{let t=pe();return $a.default.createElement("div",{className:"durationAutoCheckbox"},$a.default.createElement("input",{type:"checkbox",id:"sliderCheckbox",className:"durationAutoCheckboxInput",checked:r,onChange:()=&gt;{e(!r)}}),$a.default.createElement("label",{htmlFor:"sliderCheckbox"},t.automatic))},KB=class extends $a.default.Component{constructor(){super(...arguments);this.ref=(0,qB.createRef)();this.kDefaultKnobDiameter=30;this.kSliderWidth=150;this.knobTouchOffset=0;this.handleEvent=(t,n)=&gt;{let{value:o,onChange:i}=this.props,s=this.knobTouchDiameter;if(t==="down"){let l=this.xFromValue(o);l&lt;=n.x&amp;&amp;n.x&lt;=l+s?this.knobTouchOffset=l+s/2-n.x:this.knobTouchOffset=0}let a=this.valueFromX(n.x-s/2+this.knobTouchOffset);i(a,t)}}componentDidMount(){let t=this.ref.current,n=new Gn(t,{ignoreDevicePixelRatio:!0});n.onSingle=this.handleEvent,this.pointerEventProcessor=n}componentWillUnmount(){this.pointerEventProcessor&amp;&amp;(this.pointerEventProcessor.unbind(),this.pointerEventProcessor=void 0)}get knobDiameter(){return this.props.knobDiameter||this.kDefaultKnobDiameter}get knobTouchDiameter(){return Math.max(this.knobDiameter,this.kDefaultKnobDiameter)}valueFromX(t){let{step:n,min:o,mid:i,max:s}=this.props,a=this.kSliderWidth/2,l;if(t&lt;a){let c=t/a;l=o+c*(i-o)}else{let c=(t-a)/a;l=i+c*(s-i)}let u=Math.floor((l-o)/n),d=o+u*n;return it(d,o,s)}xFromValue(t){let{min:n,mid:o,max:i}=this.props,{kSliderWidth:s}=this,a=s/2;if(t&lt;o){let l=(t-n)/(o-n)*a;return it(l,0,a)}else{let l=a+(t-o)/(i-o)*a;return it(l,a,s)}}render(){let{value:t,enable:n}=this.props,{kSliderWidth:o}=this,i=this.knobDiameter,s=this.knobTouchDiameter,a=this.xFromValue(t),l="#E2E2E6";return $a.default.createElement("div",{className:"inputRange"},$a.default.createElement("div",{className:"inputRangeBar",style:{backgroundColor:n?"#0075f6":l,width:`${a}px`}}),$a.default.createElement("div",{className:"inputRangeControlWrapper",style:{width:`${s}px`,height:`${s}px`,transform:`translateX(${a-s/2}px)`}},$a.default.createElement("div",{className:"inputRangeControl",style:{width:`${i}px`,height:`${i}px`}})),$a.default.createElement("div",{className:"inputRangeBar",style:{backgroundColor:l,width:`${o-a}px`}}),$a.default.createElement("div",{className:"inputRangeTouchArea",ref:this.ref,style:{left:`${-s/2}px`,width:`${o+s}px`,height:`${s}px`}}))}};var Mde=oe(Wr());var sh=oe(ve()),Fde=oe(Wr());var bs=[{speedScale:.5,knobPosition:0},{speedScale:2/3,knobPosition:.16},{speedScale:.8,knobPosition:.33},{speedScale:1,knobPosition:.5},{speedScale:1.25,knobPosition:.625},{speedScale:1.5,knobPosition:.75},{speedScale:2,knobPosition:.875},{speedScale:2.5,knobPosition:1}];function nW(r){let e=it(r,bs[0].speedScale,bs[bs.length-1].speedScale);for(let t=0;t&lt;bs.length-1;t++){let n=bs[t],o=bs[t+1];if(n.speedScale&lt;=e&amp;&amp;e&lt;o.speedScale)return n.knobPosition+(o.knobPosition-n.knobPosition)*(e-n.speedScale)/(o.speedScale-n.speedScale)}return bs[bs.length-1].knobPosition}function pBe(r){let e=it(r,0,1);for(let t=0;t&lt;bs.length-1;t++){let n=bs[t],o=bs[t+1];if(n.knobPosition&lt;=e&amp;&amp;e&lt;o.knobPosition)return n.speedScale+(o.speedScale-n.speedScale)*(e-n.knobPosition)/(o.knobPosition-n.knobPosition)}return bs[bs.length-1].speedScale}function _de(r){let e=it(r,0,1);for(let t=0;t&lt;bs.length-1;t++){let n=bs[t],o=bs[t+1],i=(e-n.knobPosition)/(o.knobPosition-n.knobPosition);if(0&lt;=i&amp;&amp;i&lt;.5)return n;if(.5&lt;=i&amp;&amp;i&lt;=1)return o}return bs[bs.length-1]}var kw=class extends sh.default.Component{constructor(t){super(t);this.touchPad=sh.default.createRef();this.onSingle=(t,n)=&gt;{let s=(n.x-18)/204,a=pBe(s),l=_de(s);this.props.onChange(l.speedScale,t),this.setState({speedScale:t==="up"?l.speedScale:a})};this.state={speedScale:t.speedScale}}componentDidMount(){this.processor=new Gn(this.touchPad.current,{ignoreDevicePixelRatio:!0}),this.processor.onSingle=this.onSingle}componentWillUnmount(){var t;(t=this.processor)==null||t.unbind()}render(){let t=_de(nW(this.state.speedScale)),n=`calc(var(--editorAvSpeedScaleRailWidth) * ${nW(this.state.speedScale)})`;return sh.default.createElement("div",{className:"editorSpeedScalePopup"},sh.default.createElement("div",{className:"editorSpeedScaleSliderRail"}),sh.default.createElement("div",{className:"editorSpeedScaleSliderRailToCurrent",style:{width:n}}),bs.map((o,i)=&gt;{let a={left:`calc(var(--editorAvSpeedScalePadding) - var(--editorAvSpeedScaleLabelWidth) / 2 + var(--editorAvSpeedScaleRailWidth) * ${o.knobPosition})`},l=(0,Fde.sprintf)("%.02f",o.speedScale);l.endsWith("0")&amp;&amp;(l=l.substr(0,l.length-1));let u=o.speedScale===t.speedScale?"true":"false";return sh.default.createElement("div",{className:"editorSpeedScaleLabel",...{key:i,style:a},"data-active":u},l)}),bs.map((o,i)=&gt;{let s=o.speedScale===1?"var(--editorAvSpeedScaleCenterKnobRadius)":"var(--editorAvSpeedScaleSmallKnobRadius)",a=o.speedScale===1?"editorSpeedScaleCenterKnob":"editorSpeedScaleSmallKnob",l=`calc(var(--editorAvSpeedScalePadding) - ${s} + var(--editorAvSpeedScaleRailWidth) * ${o.knobPosition})`,u=o.speedScale&lt;=this.state.speedScale?"true":"false";return sh.default.createElement("div",{...{className:a,key:i},style:{left:l},"data-active":u})}),sh.default.createElement("div",{className:"editorSpeedScaleLargeKnob",style:{left:`calc(var(--editorAvSpeedScalePadding) - var(--editorAvSpeedScaleLargeKnobRadius) + var(--editorAvSpeedScaleRailWidth) * ${nW(this.state.speedScale)}`}}),sh.default.createElement("div",{className:"editorAvSliderTouchPad",ref:this.touchPad}))}};function oW(r){let e=(0,Mde.sprintf)("x%.2f",r);return e.endsWith("0")&amp;&amp;(e=e.substr(0,e.length-1)),e}var Bv=({card:r,store:e,editorStore:t,screen:n,cardRendererCallback:o,editable:i,onCardSelected:s,onPagerButtonClicked:a,opacity:l,playManager:u,timestampAuthorPageNumState:d,popoverContainer:c})=&gt;{let p=()=&gt;{u.togglePlayPause(t,r)},h=()=&gt;{u.beginRewind(t,r)},{zoom:f,avPlaying:m,slideshowPlaying:g,avSeekTime:v,avSpeedScale:b}=t,{startSeconds:C,endSeconds:x}=Xi(r),y=r instanceof zn||r instanceof Qn,S=!!e.screenSharingState,T=t.selectedTool===1,w=t.narrationRecording,k=(f-Math.SQRT1_2)/(1-Math.SQRT1_2),A=it(1-k,0,1),[I,E]=(0,hC.useState)(!1),O=()=&gt;{t!=null&amp;&amp;t.avMuted?t==null||t.setAvMuted(!1):E(!0)},Q=()=&gt;E(!1),[j,U]=(0,hC.useState)(!1),B=()=&gt;U(!0),z=()=&gt;U(!1),N=rd(),V=()=&gt;{let L=r.memberCountOverGroup();return $=&gt;{let P=!1,X=r.memberCountOverGroup();if(L!==X&amp;&amp;(L=X,P=!0),$.command.type==="cardEdited"){let{cardId:R,replacement:H}=$.command;P=r.id===R&amp;&amp;!!$.byOtherUserId&amp;&amp;(!!H["content.in_point"]||!!H["content.out_point"])}return P}},re=(0,zr.useRef)(V());(0,hC.useEffect)(()=&gt;{re.current=V()},[r]),(0,hC.useEffect)(()=&gt;{let L=ap($=&gt;{$ instanceof zh&amp;&amp;re.current($)&amp;&amp;N()});return()=&gt;{L.close()}},[]),(0,hC.useEffect)(()=&gt;{t.moveMode&amp;&amp;(U(!1),E(!1))},[t.moveMode]);let ce=()=&gt;{let L={"content.in_point":v};x&lt;v&amp;&amp;(L["content.out_point"]=v),We(On(r.id,L)),m||N()},ge=()=&gt;Math.abs(r.duration-v)&lt;1e-5,ae=()=&gt;{u.pause(t);let L={"content.out_point":ge()?r.duration:v};v&lt;C&amp;&amp;(L["content.in_point"]=v),We(On(r.id,L)),m||N()},Y=L=&gt;L===r.id?t.avSeekTime:0,W=(L,$,P)=&gt;{t.setAvVolume(L),i&amp;&amp;y&amp;&amp;P==="up"&amp;&amp;We(On(r.id,{"content.source_volume":L}))},G=(L,$)=&gt;{$==="down"&amp;&amp;u.beginSpeedScaling(t),t.setAvSpeedScale(L),$==="up"&amp;&amp;u.endSpeedScaling(t),i&amp;&amp;We(On(r.id,{"metadata.playback_rate":L}))},ee=pe(),F=(()=&gt;T?!1:fv(r)?!0:t.narrationRecording&amp;&amp;!r.unlimitedRecordingTime)();return zr.default.createElement(Ba,{in:t.toolVisible},zr.default.createElement("div",{className:"editorFooter fade",style:{opacity:l&lt;1?l:void 0}},zr.default.createElement("div",{className:"editorFooterInner"},i&amp;&amp;!S&amp;&amp;zr.default.createElement("div",{className:"editorTrashBoxWrapper"},zr.default.createElement("div",{className:"editorTrashBox"},zr.default.createElement(ww,{disappearProgress:A,store:e,type:"editorTrashBox"}))),F&amp;&amp;zr.default.createElement("div",{className:"editorFooterContent"},i&amp;&amp;!S&amp;&amp;y&amp;&amp;!w&amp;&amp;zr.default.createElement("div",{className:"editorButton inOutButton editorFooterItem","data-disabled":!t.avReady},zr.default.createElement("div",{className:"editorButtonIcon inOutButtonIcon "+ee.inButtonIconClass,role:"button",onClick:ce})),zr.default.createElement(WB,{card:r,editorStore:t,playManager:u,screenSharing:!!e.screenSharingState}),zr.default.createElement("div",{className:"editorAvPlayTimeText"},`${jh(v)} / ${jh(r.duration)}`),!S&amp;&amp;y&amp;&amp;!w&amp;&amp;zr.default.createElement(zr.default.Fragment,null,i&amp;&amp;zr.default.createElement("div",{className:"editorButton inOutButton editorFooterItem","data-disabled":!t.avReady},zr.default.createElement("div",{className:"editorButtonIcon inOutButtonIcon "+ee.outButtonIconClass,role:"button",onClick:ae})),zr.default.createElement("div",{className:"relative"},zr.default.createElement("div",{className:"editorButton animeVolumeButton",role:"button",onClick:O,"data-disabled":!t.avReady},zr.default.createElement("div",{className:`editorButtonIcon ${t.avMuted?"muteButtonIcon":"volumeButtonIcon"}`})),zr.default.createElement(xt,{open:I,onClose:Q,anchor:"topCenter",container:c},zr.default.createElement(Dw,{onChange:W,volume:t.avVolume}))))),!w&amp;&amp;zr.default.createElement("div",{className:"editorFooterContent"},zr.default.createElement("div",{className:"editorFooterThumbnailBar"},zr.default.createElement(Ide,{store:e,screen:n,card:r,rootMipmapType:i||T?"content":void 0,onCardSelected:s,onPagerButtonClicked:a,seekTimeDelegate:Y,cardRendererCallback:o})),(r.hasConnectedCardOrGroup||fv(r))&amp;&amp;zr.default.createElement(zr.default.Fragment,null,zr.default.createElement("div",{onClick:p,className:"editorButton editorFooterItem relative","data-disabled":!t.avReady},g?zr.default.createElement("div",{className:"editorButtonIcon pauseButtonIcon"}):zr.default.createElement("div",{className:"editorButtonIcon playButtonIcon"})),zr.default.createElement("div",{className:"editorButton editorFooterItem relative",onClick:h,"data-disabled":!t.avReady},zr.default.createElement("div",{className:"editorButtonIcon rewindButtonIcon"}))),fv(r)&amp;&amp;zr.default.createElement("div",{className:"editorButton editorFooterItem relative","data-disabled":!t.avReady},zr.default.createElement("div",{className:"relative"},zr.default.createElement("div",{className:"editorButtonIcon editorAvSpeedScaleButtonIcon",onClick:B},oW(b)),zr.default.createElement(xt,{open:j,onClose:z,anchor:"topCenter",container:c},zr.default.createElement(kw,{onChange:G,speedScale:t.avSpeedScale}))))),d&amp;&amp;zr.default.createElement(hBe,{state:d}))))},hBe=({state:r})=&gt;{let{authorName:e,answerTimestamp:t,expiry:n,pageIndex:o,pageCount:i,anonymous:s}=r,a;return o!==void 0&amp;&amp;i!==void 0&amp;&amp;(a=o+1+"/"+i),zr.default.createElement("div",{className:"editorTimestampAuthorNamePageNumberWrapper"},zr.default.createElement("div",{className:"editorTimestampAuthorNamePageNumber"},zr.default.createElement(bG,{answerTimestamp:t,expiry:n,className:"editorTimestampAuthorNamePageNumberSpacer",submittedLateColor:Ca.submittedLateDark}),!s&amp;&amp;zr.default.createElement("span",null,e),!s&amp;&amp;a&amp;&amp;zr.default.createElement("span",{style:{margin:"0px 2.5px"}}),zr.default.createElement("span",null,a)))};var Hr=oe(ve());var ln=oe(ve()),ah=oe(ve());var ys=oe(ve());var EP=oe(ve()),Nde=oe(ve());var Bde=function({children:e,store:t}){var g,v;let{desktop:n,editor:o}=t,i=o==null?void 0:o[o.length-1].cardId,[s,a]=(0,Nde.useState)(),l=(v=t.courseId)!=null?v:(g=t.desktop)==null?void 0:g.courseId,u=he.get().strings,d=async b=&gt;{if(!l)return;if(b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement){b.stopPropagation();return}b.preventDefault();let C={x:b.pageX,y:b.pageY},x=b.dataTransfer.types;if(!!n&amp;&amp;x.includes("application/x-loilo-text-card-drag")){let y=b.dataTransfer.getData("application/x-loilo-text-card-drag"),S=JSON.parse(y);if(!i)At(new nc({color:dn(S.color),backcolor:dn(S.backcolor),position:C})),At(new np({x:b.pageX,y:b.pageY},!0));else{let{backcolor:T,color:w,...k}=S;S.isTransparent&amp;&amp;(T=is.toARGBHex()),At(new oc({cardId:i,color:dn(w),backcolor:dn(T),...k,position:C}))}}else if(!!n&amp;&amp;x.includes("application/x-loilo-sheet-drag")){let y=b.dataTransfer.getData("application/x-loilo-sheet-drag"),S=JSON.parse(y);i?At(new b0(i,S.type,C)):At(new qm(S.type,C))}else if(x.includes("Files")){let{loilonotes:y,others:S}=fBe(b.dataTransfer.files);y.length&gt;0&amp;&amp;a(y),!!n&amp;&amp;S.length&gt;0&amp;&amp;(i?At(new Xm(S,C)):At(new op(S,C)))}else if(!!n&amp;&amp;x.includes("application/x-loilo-file-document")){let y=b.dataTransfer.getData("application/x-loilo-file-document"),S=JSON.parse(y);At(new Ab(S,C))}else if(!!n&amp;&amp;x.includes("text/plain")){let y=b.dataTransfer.getData("text");if(Pf(y)){let T={id:t.userInfo.user_id,name:t.userInfo.username},w=59;t.reduce(we(w,u.creatingWebCard));let k=await kx(y,T);t.reduce(we(w,null)),i?At(new ip(i,C,y,k.title,k.thumbnailFile)):At(new Ym(C,{url:y,thumbnailFile:k.thumbnailFile,title:k.title}));return}let S=Ny(y);i?At(new oc({cardId:i,color:To(),backcolor:cn(),position:C,text:S})):At(new nc({color:To(),backcolor:cn(),position:C,text:S}));return}},c=b=&gt;{if(!l){b.preventDefault();return}if(b.target instanceof HTMLInputElement||b.target instanceof HTMLTextAreaElement){b.stopPropagation();return}b.preventDefault(),b.dataTransfer.dropEffect="copy";let C=b.dataTransfer.types;!!n&amp;&amp;C.includes("application/x-loilo-text-card-drag")&amp;&amp;(o||At(new np({x:b.pageX,y:b.pageY},!1)))},p=b=&gt;{if(!l)return;let C=b.dataTransfer.types;!!n&amp;&amp;C.includes("application/x-loilo-text-card-drag")&amp;&amp;(o||At(new np({x:b.pageX,y:b.pageY},!0)))},h=b=&gt;C=&gt;{t.reduce(hp(b,[C]))},f=()=&gt;{a(void 0)},m=b=&gt;{f();let C=he.get().strings;b.type==="success"?t.reduce(Jt({type:"normal",text:C.imported})):b.type==="error"&amp;&amp;TB(t,24,b.error)};return EP.default.createElement(EP.default.Fragment,null,EP.default.createElement("div",{onDragOver:c,onDragEnter:c,onDrop:d,onDragLeave:p},e),!!l&amp;&amp;s!==void 0&amp;&amp;EP.default.createElement(wB,{courseId:l,files:s,onImported:h(l),onClose:f,onFinish:m}))},fBe=r=&gt;{let e=[],t=[];for(let n of r)[".loilonote",".loilonotes"].includes(pa(n.name))?e.push(n):t.push(n);return{loilonotes:e,others:t}};var mBe=({type:r,draggable:e,onClick:t})=&gt;{let o=pe()[mae(r)],i=a=&gt;{a.dataTransfer.clearData();let l={type:r};a.dataTransfer.setData("application/x-loilo-sheet-drag",JSON.stringify(l)),a.dataTransfer.effectAllowed="copy"},s=ie.res.src(qx(r));return ys.default.createElement("div",{className:"thinkingToolModalCell",onClick:t},ys.default.createElement("div",{className:"thinkingToolModalCellImage",onDragStart:e?i:void 0,draggable:e,style:{backgroundImage:`url("${s}")`}}),ys.default.createElement("div",{className:"thinkingToolModalCellDesk"},ys.default.createElement("span",null,o)))},Pw=({className:r="thinkingToolModal",onSelect:e,onDismiss:t,draggable:n,dismissOnSelect:o,inPopover:i=!1})=&gt;{let s=pe(),a=l=&gt;()=&gt;{e(l),o&amp;&amp;t()};return ys.default.createElement(rr,{className:r},ys.default.createElement(Et,{inPopover:i},ys.default.createElement(Ft,null,ys.default.createElement(Mt,null,ys.default.createElement(gt,{onClick:t},s.back)),ys.default.createElement("div",null),ys.default.createElement("div",null))),ys.default.createElement(ur,{className:"thinkingToolModalBody"},ys.default.createElement("div",{className:"thinkingToolModalBanner"},ys.default.createElement("div",{className:"thinkingToolModalBannerImg"},ys.default.createElement(lr,{style:{maxWidth:"100%"},alt:s.learnAboutThinkingTools,src:"/img/ThinkingToolHeaderBanner.png"})),ys.default.createElement("div",{className:"thinkingToolModalUsageLink"},ys.default.createElement("a",{href:s.thinkingToolHelpPageUrl,target:"_blank"},s.learnAboutThinkingTools))),ys.default.createElement("div",{className:"thinkingToolModalContent"},fae.map((l,u)=&gt;ys.default.createElement(mBe,{key:u,type:l,draggable:n,onClick:a(l)})))))};var Lde={camera:"cameraIcon",web:"svgWebIcon",tt:"thinkingToolIcon",file:"fileIcon"},gBe={camera:"camera",web:"web",file:"file",tt:"thinkingTool"},iW=({type:r,onClick:e})=&gt;{let t=gBe[r],o=pe()[t];return ln.default.createElement("div",{className:"addCardButton",onClick:e,role:"button"},ln.default.createElement("div",{className:Lde[r]+" addCardIcon"}),ln.default.createElement("div",{className:"addCardButtonDesc","data-is-tt":r==="tt"},o))},vBe=({onInput:r,desc:e})=&gt;{let t=(0,ah.useRef)(null),n=()=&gt;{let s=t.current;s instanceof HTMLInputElement&amp;&amp;(s.click(),s.onchange=()=&gt;{!s.files||s.files.length===0||r(s.files[0])})},o=[...Zo.keys(),...R0.keys()].join(", "),i=pe();return ln.default.createElement("div",{className:"addCardButton",onClick:n,role:"button"},ln.default.createElement("div",{className:Lde.file+" addCardIcon"}),ln.default.createElement("div",{className:"addCardButtonDesc"},i.file),ln.default.createElement("input",{ref:t,hidden:!0,type:"file",accept:o}))},bBe=({subColor:r,textColor:e,backcolor:t,onClick:n,isTransparent:o})=&gt;ln.default.createElement("div",{className:"addTextCardButton",draggable:!0,onClick:n,onDragStart:i=&gt;{let s=JSON.stringify({name:"addTextCard",backcolor:t.toARGBHex(),color:e.toARGBHex(),isTransparent:o});i.dataTransfer.setData("application/x-loilo-text-card-drag",s),i.dataTransfer.effectAllowed="copy"},"data-is-transparent":o,style:{backgroundColor:t.toCSSRGBA(),borderColor:r.toCSSRGBA()}}),yBe=[{backcolor:mt("#ffccdcFF"),subColor:mt("#ED7DA1FF"),textColor:mt("#000000FF"),isTransparent:!1},{backcolor:mt("#caefd1ff"),subColor:mt("#87D089FF"),textColor:mt("#000000FF"),isTransparent:!1},{subColor:mt("#002663FF"),backcolor:mt("#b3ddfcff"),textColor:mt("#000000FF"),isTransparent:!1},{backcolor:mt("#FFFFFFFF"),subColor:mt("#CED7E0FF"),textColor:mt("#000000FF"),isTransparent:!1},{backcolor:mt("#F1F5F8FF"),subColor:mt("#93A3BEFF"),textColor:mt("#FFFFFFFF"),isTransparent:!0}],Ode=({store:r,editorStore:e,onClose:t})=&gt;{let n=r.editor,o=n[n.length-1].cardId,i=pe(),[s,a]=(0,ah.useState)([{mode:"menu"}]),l=(0,ah.useRef)(null),u=(0,ah.useRef)(null),d=(0,ah.useRef)(null),{user_id:c}=r.userInfo,p={id:c,name:zt(r.userInfo)},h=S=&gt;{a(s.concat({mode:"selector",addingCard:S}))},f=async S=&gt;{let T=await tl({url:ie.res.src("/svg/web_card_placeholder.svg")}),w=zb({author:p,url:S});h({card:w,thumb:T})},m=S=&gt;()=&gt;{S==="camera"?(r.reduce(cg(!0)),t()):S==="web"?f():S==="tt"&amp;&amp;a(s.concat({mode:"tt"}))},g=S=&gt;async()=&gt;{let T=S.textColor.toARGBHex(),w=S.backcolor.toARGBHex();S.isTransparent&amp;&amp;(w=is.toARGBHex());let k;S.isTransparent&amp;&amp;(k=await tl({url:ie.res.src("/svg/transparent_card_placeholder.svg")}));let A=pu({backcolor:w,color:T,author:p});h({card:A,thumb:k})},v=()=&gt;{let S=[...s];S.pop(),a(S)},b=async S=&gt;{let T=qx(S),w=await tl({url:T}),[k]=T.split("/").splice(-1,1),[A,I]=k.split("."),E=cc({author:{id:r.userInfo.user_id,name:zt(r.userInfo)},asset:{description:A,extension:I},position:De(),pageIndex:0,pageSize:{...xi},layoutSize:br(xi,kt),usage:"thinking_tool"});l.current=S,h({card:E,thumb:w})},C=S=&gt;T=&gt;{let w=T?"inside":"next";if(u.current){let{original:k,file:A}=u.current;At(new P0(k,A,w,o)),u.current=null}else S.type==="pdf"&amp;&amp;l.current?(At(new k0(o,l.current,S,w)),l.current=null):(S.type==="title"&amp;&amp;e.setActivateTextEditor(!0),At(new Qm({cardId:o,card:S,type:w})));t()},x=async S=&gt;{let T=43,w=S.name.toLowerCase().endsWith(".pdf");w&amp;&amp;r.reduce(we(T,i.loadingFile));try{let A=sc(pa(S.name))?(await WS([S]))[0]:S,I=await Vg(A);if(!Kx(r,[S])){w&amp;&amp;r.reduce(we(T,null)),t();return}if(I instanceof ji){let Q=Yx(A,I),j=he.get().strings;if(Q&amp;&amp;!confirm(j.exceedVideoQuality)){t();return}}let E=await I.generateHeadThumbnail(),[O]=I.toCards({position:De(),user:r.userInfo});h({card:O,thumb:E}),w&amp;&amp;r.reduce(we(T,null)),u.current={original:A,file:I}}catch(k){fe.error(k),r.reduce(we(T,null),me(T,{title:i.couldntLoadFileTitle,...ot(k),okMessage:i.back,onOk:()=&gt;r.reduce(me(T,void 0))}))}},y=s[s.length-1];return ln.default.createElement(ln.default.Fragment,null,y.mode==="menu"&amp;&amp;ln.default.createElement("div",{className:"addCardDialog",ref:d},ln.default.createElement("div",{className:"addCardDialogInner"},ln.default.createElement("div",{className:"addCardRow"},ln.default.createElement(iW,{type:"camera",onClick:m("camera")}),ln.default.createElement(iW,{type:"web",onClick:m("web")}),ln.default.createElement(vBe,{desc:i.file,onInput:x}),ln.default.createElement(iW,{type:"tt",onClick:m("tt")})),ln.default.createElement("div",{className:"addCardDialogBr"}),ln.default.createElement("div",{className:"addTextCardRow"},yBe.map((S,T)=&gt;ln.default.createElement(bBe,{onClick:g(S),key:T,...S}))))),y.mode==="tt"&amp;&amp;ln.default.createElement(CBe,{onSelect:b,onBack:v}),y.mode==="selector"&amp;&amp;ln.default.createElement("div",{className:"addCardDialog",ref:d},ln.default.createElement(sW,{store:r,onBack:v,onClick:C(y.addingCard.card),thumb:y.addingCard.thumb,card:y.addingCard.card})))},CBe=({onBack:r,onSelect:e})=&gt;ln.default.createElement("div",{className:"addSheetDialogWrapper"},ln.default.createElement(Pw,{className:"",onSelect:e,onDismiss:r,dismissOnSelect:!1,draggable:!0,inPopover:!0})),sW=({store:r,onBack:e,onClick:t,thumb:n,card:o,forCamera:i})=&gt;{let s=dn(o.content.backcolor),a=pe(),l=(0,ah.useRef)(null);(0,ah.useEffect)(()=&gt;{let p=l.current.getContext("2d");if(!p)throw new uo;SBe({ctx:p,thumb:n,backcolor:s.toCSSRGBA()})},[r.screen]);let u=window.devicePixelRatio,d=i?Math.min(480,Wj(100)-20):Math.min(480,Nh(100)-20);return ln.default.createElement("div",{className:"addCardTypeSelectorWrapper"},ln.default.createElement(rr,{round:!0},ln.default.createElement(Et,{inPopover:!i},ln.default.createElement(Ft,null,ln.default.createElement(Mt,null,ln.default.createElement(gt,{onClick:e},i?a.cancel:a.back)),ln.default.createElement(Vt,null,a.addCardDialogTitle),ln.default.createElement(jt,null))),ln.default.createElement(ur,{className:"addCardTypeSelector"},ln.default.createElement("div",{className:"addCardTypeContentWrapper"},ln.default.createElement("div",{className:"addCardTypeContent",role:"button",onClick:()=&gt;t(!0)},ln.default.createElement("div",{className:"addCardTypeDesc"},a.inThisCard)),ln.default.createElement("div",{className:"addCardTypeContent",role:"button",onClick:()=&gt;t(!1)},ln.default.createElement("div",{className:"addCardTypeDesc"},a.asNextCard))),ln.default.createElement("canvas",{width:d*u,height:164*u,style:{position:"absolute",pointerEvents:"none",width:d,height:164},ref:l}))))};function SBe({ctx:r,backcolor:e,thumb:t}){let n=window.devicePixelRatio,o=r.canvas,i=o.width/n/480;if(r.save(),r.clearRect(0,0,o.width,o.height),r.scale(n,n),r.save(),r.scale(i,i),r.fillStyle="#fff",r.fillRect(40,20,kt.width,kt.height),r.shadowColor="rgba(0,0,0,0.4)",r.shadowBlur=8,r.shadowOffsetX=4,r.shadowOffsetY=4,t){let l=ds(t,2700);r.drawImage(t,60,40,t.width*l,t.height*l)}else r.fillStyle=e,r.fillRect(60,40,60,45);r.restore(),r.save(),r.fillStyle="#fff",r.rect(o.width/(2*n),0,o.width/(2*n),o.height),r.clip(),r.translate(o.width/(2*n),o.height/(2*n)-45/2);let s=-40;r.fillRect(-40,0,60,45),s+=60+22,r.save(),r.shadowColor="rgba(0,0,0,0.4)",r.shadowBlur=8,r.shadowOffsetX=4,r.shadowOffsetY=4;let a=60;if(t){let l=ds(t,2700),u=(45-t.height*l)/2,[d,c]=[t.width*l,t.height*l];r.drawImage(t,s,u,d,c),a=d}else r.fillStyle=e,r.fillRect(s,0,60,45);s+=a+22,r.restore(),r.fillRect(s,0,60,45),r.save(),r.translate(0,45/2),Rde(r,20,20+20),Rde(r,20+22+a,20+22+a+20),r.restore(),r.restore(),r.restore()}function Rde(r,e,t){r.save(),r.strokeStyle=rv.toCSSRGBA(),r.lineWidth=2,r.save(),r.beginPath(),r.moveTo(e,0),r.lineTo(t,0),r.stroke(),r.restore(),r.save(),r.lineCap="round",r.lineJoin="round";let n=new Pr(-1,0);n.rotate(-45,"deg"),r.beginPath(),r.moveTo(t,0),r.lineTo(t+n.x*4,n.y*4),r.stroke(),n.rotate(90,"deg"),r.beginPath(),r.moveTo(t,0),r.lineTo(t+n.x*4,n.y*4),r.stroke(),r.restore(),r.restore()}var bo=oe(ve());var YB=oe(ve());var xBe=r=&gt;({[403]:r.insufficientPermission,[404]:r.status404ItemNotFound,[500]:r.unknownApiErrorMsg}),XB=({store:r,menu:e,onClose:t,className:n=""})=&gt;{let o=he.get().strings,i=async(s,a,l)=&gt;{r.reduce(we(77,o.downloadingFile));try{let u=await ie.lnsClient.downloadAsset(l);Ol(u,La(s,a))}catch(u){Je.catchError(u)||r.reduce(me(77,{title:o.couldntDownloadFile,...ot(u,xBe(o)),okMessage:o.back,onOk:()=&gt;r.reduce(me(77,void 0))}))}r.reduce(we(77,null))};return YB.default.createElement(YB.default.Fragment,null,e.map((s,a)=&gt;{let{iconSrc:l,message:u}=s.display,{fileInfo:d}=s;return YB.default.createElement(Iy,{className:n,key:a,iconSrc:l,text:u,disabled:!d,onClick:()=&gt;{d&amp;&amp;(i(d.name,d.extension,d.assetId),t())}})}))};var Yf=({iconSrc:r,text:e,onClick:t,showArrow:n})=&gt;bo.default.createElement(Iy,{iconSrc:r,text:e,onClick:t,showArrow:n}),Ude=r=&gt;{let[e,t]=(0,bo.useState)(!1);return e?bo.default.createElement(TBe,{...r,onBack:()=&gt;t(!1)}):bo.default.createElement(wBe,{...r,onClickExport:()=&gt;t(!0)})},wBe=({store:r,editorStore:e,card:t,focusingCard:n,onClose:o,onClickExport:i})=&gt;{var C,x;let s=pe(),[a,l]=(0,bo.useState)(!1),u=y=&gt;{let S=Rf(r,y);return S?(alert(S==="saving"?s.cardHasUnsavedAttachments:s.cardHasUploadFailedAttachments),!1):!0},d=()=&gt;{let y=t===n,S=Array.from(n.familyIterator()).map(w=&gt;w.id);if(!!u(S)){for(let w of t.familyIterator()){let k=Kt(w,fo);k.setTextSelectedRange(void 0),k.setTextCompositionRange(void 0)}At(new sp(n.id,y)),o()}},c=y=&gt;{let S=t===n,T;if(y){if(!confirm(s.confirmDuplicateAllConnectedCards))return;T=Array.from(n.memberAndChildrenIterator()).map(A=&gt;A.id)}else T=Array.from(n.familyIterator()).map(A=&gt;A.id);if(!u(T))return;for(let A of t.familyIterator()){let I=Kt(A,fo);I.setTextSelectedRange(void 0),I.setTextCompositionRange(void 0)}let k=y?"all":"single";(n instanceof Qn||n instanceof zn)&amp;&amp;e.setInheritAvSeektime(!0),At(new Xu(n.id,k,S)),o()},p=()=&gt;{var y,S,T,w,k;if(n.id===((S=(y=r.desktop)==null?void 0:y.focusingCard)==null?void 0:S.id)&amp;&amp;n.id!==t.id){let A=_c(n,n.isFolded);if(!confirm(A))return;n.isFolded?We(bp(n.id)):We(du(n.id)),r.reduce(ti())}else{let A=_c(t,!1);if(!confirm(A))return;let I=(k=(w=(T=t.prev)!=null?T:t.prevGroup)!=null?w:t.next)!=null?k:t.nextGroup;We(du(t.id,I==null?void 0:I.id)),t.isFolded&amp;&amp;(I==null?void 0:I.groupMemberCount())===1&amp;&amp;We(rf(I.id,!1))}o()},h=()=&gt;{let y=Array.from(t.familyIterator()).map(T=&gt;T.id);!u(y)||(e.setTool(0),l(!0))},f=y=&gt;{At(new M0(t.id,y)),l(!1),o()},{hideAnnotation:m}=e,g=()=&gt;{e.setHideAnnotation(!e.hideAnnotation),r.reduce(ho()),o()},v=m?"/svg/show_annotation.svg":"/svg/hide_annotation.svg",b=()=&gt;{e.setTool(0),i()};return bo.default.createElement(Ra,{className:"editorOtherDialogCellContainer"},!on(r)&amp;&amp;bo.default.createElement(bo.default.Fragment,null,n instanceof jr&amp;&amp;bo.default.createElement(Yf,{iconSrc:"/svg/reuse_icon.svg",text:s.reuseThisTestCard,onClick:d}),n instanceof wn&amp;&amp;r.userInfo.is_teacher&amp;&amp;bo.default.createElement(Yf,{iconSrc:"/svg/reuse_icon.svg",text:s.reuseThisAttendanceCard,onClick:d}),!(n instanceof jr)&amp;&amp;!(n instanceof wn&amp;&amp;r.userInfo.is_teacher)&amp;&amp;bo.default.createElement(Yf,{iconSrc:"/svg/duplicate_icon.svg",text:s.duplicateThisCard,onClick:()=&gt;c(!1)}),bo.default.createElement(Yf,{iconSrc:"/svg/copy_all_icon.svg",text:s.duplicateAllConnectedCards,onClick:()=&gt;c(!0)}),bo.default.createElement(Yf,{iconSrc:"/svg/tt_switch.svg",text:s.changeTools,onClick:h}),(((C=t.gadgets.annotations)==null?void 0:C.asset)||((x=t.gadgets.annotations)==null?void 0:x.extended)&amp;&amp;t.gadgets.annotations.extended.commands.length&gt;0)&amp;&amp;bo.default.createElement(Yf,{iconSrc:v,text:m?s.showAnnotation:s.hideAnnotation,onClick:g}),bo.default.createElement(Yf,{iconSrc:"/img/dustboxMenuIcon@2x.png",text:s.delete,onClick:p})),bo.default.createElement(Yf,{iconSrc:"/img/ExportMenuIcon@2x.png",onClick:b,text:s.exportCard+" (\u03B2)",showArrow:!0}),bo.default.createElement(XB,{store:r,menu:vB({t:s,card:t,editorStore:e}),onClose:o}),bo.default.createElement(tr,{open:a,onClose:()=&gt;l(!1),transition:"slide-left",overlay:!0},bo.default.createElement(Pw,{onSelect:f,onDismiss:()=&gt;l(!1),dismissOnSelect:!0,draggable:!1})))},TBe=({store:r,card:e,onBack:t})=&gt;{let n=pe(),o=Sd(),i=async()=&gt;{let s=27;r.reduce(we(s,n.exportingCardAsPdf));let a=await Ot.regularFont.getOrFetch(),l=await Ot.boldFont.getOrFetch(),u=new Pv({ctx:ie,regularFont:a,boldFont:l});try{let d=await u.exportCardAsPdf(e);r.reduce(we(s,null));let c=sg(r,o.courseId),p=zt(r.userInfo),h=r.notes.byId[o.noteId].name,f=La(`${c}_${p}_${h}`,".pdf");Ol(d,f)}catch(d){let c=he.get().strings;r.reduce(me(s,{title:c.couldntExportCard,...ot(d),onOk:()=&gt;r.reduce(me(s,void 0)),okMessage:c.back}),we(s,null))}};return bo.default.createElement(Ra,{className:"editorOtherDialogCellContainer"},bo.default.createElement(Et,{inPopover:!0},bo.default.createElement(Ft,null,bo.default.createElement(Mt,null,bo.default.createElement(H2,{onClick:t})),bo.default.createElement(Vt,null,n.exportCard),bo.default.createElement(jt,null))),bo.default.createElement("div",null,bo.default.createElement(Yf,{iconSrc:"/svg/pdf.svg",onClick:i,text:n.pdfFile})))};var wr=oe(ve());var fC=oe(ve());var Xf=({children:r,active:e,animateAppear:t=!0})=&gt;{let n=Array.isArray(r)?r:[r],o={appear:t?"editorCollapseIcon-appear":"editorCollapseIcon-appear-done",appearActive:t?"editorCollapseIcon-appear-active":"editorCollapseIcon-appear-done",appearDone:"editorCollapseIcon-appear-done",enter:"editorCollapseIcon-enter",enterActive:"editorCollapseIcon-enter-active",enterDone:"editorCollapseIcon-enter-done",exit:"editorCollapseIcon-exit",exitActive:"editorCollapseIcon-exit-active",exitDone:"editorCollapseIcon-exit-done"};return fC.default.createElement(fC.default.Fragment,null,n.filter(Boolean).map((i,s)=&gt;fC.default.createElement(Mn,{timeout:350,unmountOnExit:!0,classNames:o,key:s,in:e,appear:!0},fC.default.createElement("div",{className:"editorCollapseIcon"},i))))},QB=({active:r,width:e,padding:t={left:!1,right:!1},children:n})=&gt;{let o={width:0,opacity:0},i={entering:{width:e,opacity:1,transition:`width 0.25s 0s, opacity 0.1s 0.25s ${t?", padding 0.25s 0s":""}`},entered:{width:e,opacity:1},exiting:{width:0,opacity:0,transition:"width 0.25s 0s"},exited:{width:0,opacity:0},unmounted:{}},{left:s,right:a}=t,l=u=&gt;{let d="0";return t&amp;&amp;(u==="entering"||u==="entered")&amp;&amp;(d=`0 ${a?"4px":"0"} 0 ${s?"4px":"0"}`),{...o,...i[u],padding:d}};return fC.default.createElement(ky,{in:r,unmountOnExit:!0,appear:!0,timeout:250},u=&gt;fC.default.createElement("div",{style:l(u)}," ",n," "))};var JB=oe(ve());var DBe=["left","center","right"],kBe=["top","middle","bottom"];function aW({h:r,v:e,vertical:t}){let n="align_";return n+=t?"v_":"h_",n+=r[0],n+=e[0],n+=".svg",n}var zde=({hAlignment:r,vAlignment:e,vertical:t,onClick:n})=&gt;JB.default.createElement(Kr,{className:"textAlignmentDialog"},kBe.map(o=&gt;DBe.map((i,s)=&gt;JB.default.createElement(Kr,{onClick:()=&gt;n(i,o),className:"textAlignmentDialogCell",style:{backgroundColor:o===e&amp;&amp;i===r?"#9FCBEE":"white"},key:`${i}-${s}`},JB.default.createElement(lr,{className:"textAlignmentDialogCellIcon",src:`/svg/alignment-dialog/${aW({h:i,v:o,vertical:t})}`})))));var Js=oe(ve()),em=oe(ve());function lW(r,e,t,n=0){if(r&lt;=0||isNaN(r)||!isFinite(r))return[];if(e&lt;0||isNaN(e)||!isFinite(e))return[];let o=[];t&amp;&amp;r&gt;t&amp;&amp;(r=t);for(let i of PBe(r))if(t&amp;&amp;i&gt;t||(n&lt;i&amp;&amp;o.push(i),o.length&gt;=e+1))break;for(let i of ABe(r)){if(n&amp;&amp;i&lt;n)break;if(!(o[0]&lt;=i)){if(o.length&gt;=2*e+1)break;o.splice(0,0,i)}}return o}var _i=[1,1.2,1.4,1.6,1.8,2,3,4,5,6,7,8,9];function*PBe(r){if(r&lt;=0||isNaN(r)||!isFinite(r))return;let e=10**Math.floor(Math.log10(r)),t=0;for(let n=0;n&lt;_i.length;n++){let o=_i[n],i=n+1&lt;_i.length?_i[n+1]:_i[0]*10;if(o*e&lt;=r&amp;&amp;r&lt;i*e){t=n;break}}for(;;)yield _i[t]*e,t++,t===_i.length&amp;&amp;(t=0,e*=10)}function*ABe(r){if(r&lt;=0||isNaN(r)||!isFinite(r))return;let e=10**Math.floor(Math.log10(r)),t=0;for(let n=0;n&lt;_i.length;n++){let o=_i[n],i=n+1&lt;_i.length?_i[n+1]:_i[0]*10;if(o*e&lt;=r&amp;&amp;r&lt;i*e){t=n;break}}for(;;)yield _i[t]*e,t--,t&lt;0&amp;&amp;(t=_i.length-1,e/=10)}function Rv(r,e=!1){if(r&lt;=0||isNaN(r)||!isFinite(r))return`${r}`;let t=e?EBe(r):IBe(r);if(0&lt;t&amp;&amp;t&lt;1){let n=Math.round(Math.log10(t))*-1;if(0&lt;n&amp;&amp;n&lt;100)return r.toFixed(n)}return r.toFixed()}function IBe(r){if(r&lt;=0||isNaN(r)||!isFinite(r))return 1;let e=eR(r),t=tR(r);if(!e||!t)return 1;let n=Math.max(e-r,r-t);return 10**Math.round(Math.log10(n))}function EBe(r){if(r&lt;=0||isNaN(r)||!isFinite(r))return 1;let e=uW(r);if(!e)return 1;let t=10**e.scaleIndex*_i[e.pivotIndex],[n,o,i]=lW(t,1),s=Math.max(i-o,o-n);return 10**Math.floor(Math.log10(s))}function uW(r){if(r&lt;=0||isNaN(r)||!isFinite(r))return;let e=Math.floor(Math.log10(r)),t=10**e,n=0;for(let o=0;o&lt;_i.length;o++){let i=_i[o],s=o+1&lt;_i.length?_i[o+1]:_i[0]*10;if(i*t&lt;=r&amp;&amp;r&lt;s*t){n=o;break}}return{scaleIndex:e,pivotIndex:n}}var ZB=class{constructor(e,t,n){this._currentSize=e;this.min=t;this.max=n}increment(){let e=eR(this._currentSize);e&amp;&amp;e&lt;=this.max&amp;&amp;(this._currentSize=e)}decrement(){let e=tR(this._currentSize);e&amp;&amp;e&gt;=this.min&amp;&amp;(this._currentSize=e)}get currentSize(){return this._currentSize}setCurrentSize(e){this._currentSize=e}};function eR(r){let e=uW(r);if(!e)return;let t=10**e.scaleIndex*_i[e.pivotIndex],n=10**(Math.floor(Math.log10(r))-1),i=Math.round((r-t)/n)+1,s=t+n*i;return Hde(s-r,n)&amp;&amp;(i-=1),t+n*i}function tR(r){if(r&lt;=Number.EPSILON)return;let e=uW(r);if(!e)return;let t=10**e.scaleIndex*_i[e.pivotIndex],n=10**(Math.floor(Math.log10(r))-1);_Be(r,n*10)&amp;&amp;(n/=10);let i=Math.round((r-t)/n)-1,s=t+n*i;return Hde(r-s,n)&amp;&amp;(i+=1),t+n*i}function _Be(r,e){return Math.abs(r-e)&lt;=Number.EPSILON}function Hde(r,e){return Math.abs(r-e)&lt;=1e-5?!1:r-e&gt;0}var Qf=oe(ve());var FP=({open:r,onClose:e,popoverAnchor:t,getParentBounds:n,shadow:o,enableArrow:i=!0,children:s})=&gt;{let a=Me(),l=i?"#fff":"transparent",u=()=&gt;(a.screen.height-a.screen.keyboardHeight)*.5,[d,c]=(0,Qf.useState)(u()),[p,h]=(0,Qf.useState)(!1);return(0,Qf.useEffect)(()=&gt;{a.screen.keyboardHeight!==0&amp;&amp;(c(u()),h(!0))},[a.screen.keyboardHeight]),Qf.default.createElement(tr,{open:r,onClose:e,textEditing:!0},p&amp;&amp;Qf.default.createElement("div",{className:"editorTextAttributeDialog",style:{top:`${d}px`},"data-shadow":o},s),!p&amp;&amp;Qf.default.createElement(kf,{anchor:t,arrowColor:l,getParentBounds:n},s))};var Ss=oe(ve());var Eu=oe(ve());var FBe=[er.red,er.orange,er.yellow,er.green,er.blue,er.purple,er.brown,er.black,er.pastelPink,er.pastelOrange,er.pastelYellow,er.pastelGreen,er.pastelBlue,er.pastelPurple,er.pastelBrown,er.gray,er.vividPink,er.vividOrange,er.vividYellow,er.vividGreen,er.vividBlue,er.vividPurple,er.peach,er.white],rR=({activeTool:r,solidLineTool:e,preference:t,isOpenPopover:n,index:o,onClick:i,onChooseNewColor:s,onClosePopover:a})=&gt;{let l=t.activeColor===o&amp;&amp;r===e,u=nn(t.colors[o]).toRGBAHex(),d=pe();return Eu.default.createElement(Lv,{showTriangle:l,enableActiveBgColor:!1},Eu.default.createElement("div",{className:"editorDrawToolColorButton",role:"button",onClick:i},Eu.default.createElement("div",{className:"editorDrawToolColorButtonOuter",style:{backgroundColor:l?"white":"transparent"}},Eu.default.createElement("div",{className:"editorDrawToolColorButtonInner",style:{backgroundColor:u}}))),Eu.default.createElement(xt,{open:n&amp;&amp;l,onClose:a,container:"none"},Eu.default.createElement("div",{className:"popoverDialog"},Eu.default.createElement(dW,{title:r==="highlighter"?d.highlighterColor:d.penColor,colors:FBe,onClick:s,numRows:3}))))},MBe=({color:r,onClick:e})=&gt;Eu.default.createElement("div",{className:"editorDrawToolColorPicker",onClick:e,style:{backgroundColor:r.toCSSRGBA()}}),dW=({title:r,colors:e,numRows:t,onClick:n})=&gt;{let o=Math.ceil(e.length/t),i=Array.from({length:t},(s,a)=&gt;a);return Eu.default.createElement("div",{className:"editorDrawToolPopoverInner"},r&amp;&amp;Eu.default.createElement("div",{className:"editorDrawToolPopoverTitle"},r),i.map(s=&gt;Eu.default.createElement("div",{className:"editorDrawToolColorPickerInner",key:s},e.slice(s*o,s*o+o).map((a,l)=&gt;Eu.default.createElement(MBe,{color:a,onClick:()=&gt;n(a),key:l})))))};var Jf=oe(ve());var Gde=({enableClear:r,isActive:e,isOpenPopover:t,onClick:n,onClosePopover:o,onClickClear:i})=&gt;{let s=pe();return Jf.default.createElement(Lv,{showTriangle:e},Jf.default.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton eraserIcon",role:"button",onClick:n,"data-active":e}),Jf.default.createElement(xt,{open:t,onClose:o,container:"none"},Jf.default.createElement("div",{className:"popoverDialog"},Jf.default.createElement("div",{className:"editorDrawToolPopoverInner"},Jf.default.createElement("div",{className:"editorDrawToolClearButton",onClick:i},Jf.default.createElement("div",{className:"editorSvgButtonIcon drawnClearIcon","data-enable":r}),Jf.default.createElement("div",{style:{color:r?"#0075f6":"#cccccc"}},s.clearAll))))))};var Jr=oe(ve());var Wde=({store:r,forDocument:e,isToolActive:t,isOpenPopover:n,onClick:o,onClosePopover:i})=&gt;{let{activeTool:s,prefs:a,activePen:l}=Bb(r,e),u=a.pen,d=s==="pen",c="transparent",p="penToolIcon";t&amp;&amp;(c=nn(u.colors[u.activeColor]).toRGBAHex(),p=`${l}Icon`);let h=Do(),f=g=&gt;()=&gt;{r.reduce(td({forDocument:e,tool:"pen",pen:g})),h(()=&gt;i(),200)},m=pe();return Jr.default.createElement(Lv,{showTriangle:t&amp;&amp;d},Jr.default.createElement("div",{className:`drawButton editorSvgButtonIcon ${p} relative`,role:"button",onClick:o,"data-active":d},t&amp;&amp;Jr.default.createElement(pW,{type:l,color:c})),Jr.default.createElement(xt,{open:n&amp;&amp;d,onClose:i,container:"none"},Jr.default.createElement("div",{className:"popoverDialog"},Jr.default.createElement("div",{className:"editorDrawToolPopoverInner"},Jr.default.createElement("div",{className:"editorDrawToolPopoverTitle"},m.penType),Jr.default.createElement("div",{className:"penTypeGroup"},Jr.default.createElement(cW,{type:"pencil",isSelected:l==="pencil",onClick:f}),Jr.default.createElement(cW,{type:"brush",isSelected:l==="brush",onClick:f}),Jr.default.createElement(cW,{type:"pen",isSelected:l==="pen",onClick:f}))))))},cW=({type:r,isSelected:e,onClick:t})=&gt;{let o={transition:`background-position-y ${250}ms ease-in-out`,backgroundPositionY:20},i={entering:{backgroundPositionY:0},entered:{backgroundPositionY:0},exiting:{backgroundPositionY:20},exited:{backgroundPositionY:20},unmounted:{}};return Jr.default.createElement("div",{className:"selectPenTypeButton",onClick:t(r)},e&amp;&amp;Jr.default.createElement("div",{className:"selectPenTypeButtonDot"}),Jr.default.createElement(ky,{in:e,timeout:250},s=&gt;Jr.default.createElement("div",{className:`selectPenTypeIcon ${r}TypeIcon`,style:{...o,...i[s]}})))},pW=({color:r,type:e})=&gt;Jr.default.createElement("div",{className:"editorDrawToolPenColorIcon",style:{fill:r}},Jr.default.createElement("svg",{version:"1.1",viewBox:"0 0 53.333 53.333",xmlns:"http://www.w3.org/2000/svg"},e==="pen"&amp;&amp;Jr.default.createElement(NBe,null),e==="pencil"&amp;&amp;Jr.default.createElement(BBe,null),e==="brush"&amp;&amp;Jr.default.createElement(RBe,null),e==="highlighter"&amp;&amp;Jr.default.createElement(LBe,null))),NBe=()=&gt;Jr.default.createElement("g",{transform:"matrix(1.3333,0,0,-1.3333,0,53.333)"},Jr.default.createElement("g",{transform:"translate(15.427,15.427)"},Jr.default.createElement("path",{d:"m0 0c-0.082 0.082-0.142 0.177-0.184 0.277l-2.933-2.933c-0.135-0.235-0.266-0.456-0.384-0.644l0.201-0.201c0.188 0.118 0.408 0.249 0.643 0.383l2.934 2.934c-0.1 0.042-0.195 0.102-0.277 0.184"})),Jr.default.createElement("g",{transform:"translate(24.772,27.871)"},Jr.default.createElement("path",{d:"m0 0-3.446-3.871 2.674-2.673 3.871 3.445z"}))),BBe=()=&gt;Jr.default.createElement("g",{transform:"matrix(1.3333 0 0 -1.3333 0 53.333)"},Jr.default.createElement("g",{transform:"translate(14.07 12.448)"},Jr.default.createElement("path",{d:"m0 0-1.594 1.594-0.794-2.388z"})),Jr.default.createElement("g",{transform:"translate(19.781 15.474)"},Jr.default.createElement("path",{d:"m0 0 7e-3 1.192-2.618 0.475-0.476 2.619-1.191-7e-3 8.934 8.935 4.28-4.278z"}))),RBe=()=&gt;Jr.default.createElement("g",{transform:"matrix(1.3333,0,0,-1.3333,0,53.333)"},Jr.default.createElement("g",{transform:"translate(13.052,13.462)"},Jr.default.createElement("path",{d:"M 0,0 C -0.477,0 -0.925,0.019 -1.335,0.049 -0.065,0.942 0.714,1.767 1.283,2.5 1.427,2.229 1.632,1.949 1.93,1.776 2.263,1.584 2.641,1.556 3.054,1.694 3.806,1.944 4.198,1.376 4.3,1.196 4.383,1.048 4.431,0.892 4.445,0.75 3.324,0.265 1.805,0 0,0"})),Jr.default.createElement("g",{transform:"translate(26.338,22.932)"},Jr.default.createElement("path",{d:"m0 0-0.047-0.039-2.606 2.606 0.039 0.049 1.75 1.75 2.615-2.615z"}))),LBe=()=&gt;Jr.default.createElement("g",{transform:"matrix(1.3333 0 0 -1.3333 0 53.333)"},Jr.default.createElement("g",{transform:"translate(22.149 17.619)"},Jr.default.createElement("path",{d:"m0 0 6.528 6.529-4.418 4.418-6.529-6.529z"})),Jr.default.createElement("g",{transform:"translate(12.493 13.418)"},Jr.default.createElement("path",{d:"m0 0-1.591-1.59 1.772-0.303 0.856 0.856z"})));var Cs=oe(ve());function $de(r,e,t){r.lineWidth=e,r.beginPath(),t?(r.lineJoin="miter",r.lineCap="square",r.moveTo(20,40),r.lineTo(50,20),r.lineTo(75,30),r.lineTo(100,40),r.lineTo(130,20)):(r.lineJoin="round",r.lineCap="round",r.moveTo(20,40),r.quadraticCurveTo(30,20,50,20),r.quadraticCurveTo(60,20,75,30),r.quadraticCurveTo(90,40,100,40),r.quadraticCurveTo(110,40,130,20)),r.stroke()}function OBe(r,e,t){r.lineWidth=e,r.beginPath(),t?(r.lineJoin="miter",r.lineCap="square",r.moveTo(20,40),r.lineTo(70,10),r.lineTo(90,50),r.lineTo(130,30)):(r.lineJoin="round",r.lineCap="round",r.moveTo(20,40),r.quadraticCurveTo(76,0,80,30),r.quadraticCurveTo(85,65,130,30)),r.stroke()}function UBe({canvas:r,strokeWidth:e,sizes:t,polygonal:n,onChangeStrokeWidth:o,onClose:i}){let s=r.height/5,a=new Gn(r),l=!1;function u(){s=r.height/5}let d=g=&gt;{if(g===0)return t[0];if(g===r.height-s)return t[t.length-1];let v=Math.floor(g/(r.height/5)),b=s*(v+1),C=(s-(b-g))/s;return 0&lt;=v&amp;&amp;v&lt;t.length-1?t[v]+(t[v+1]-t[v])*C:it(e,t[0],t[t.length-1])},p=(g=&gt;{for(let v=0;v&lt;t.length-1;v++)if(t[v]&lt;=g&amp;&amp;g&lt;t[v+1]){let b=t[v+1]-t[v],C=(g-t[v])/b;return Math.round(s*v+s*C)}return r.height-s})(e);a.onSingle=(g,v)=&gt;{if(g!=="down"){if(g==="move")!l&amp;&amp;v.down&amp;&amp;Math.abs(v.down.y-v.y)&gt;5&amp;&amp;(l=!0,p=v.y-s/2),l&amp;&amp;(p=it(p+v.dy,0,r.height-s),e=d(p));else if(g==="up"){if(v.down&amp;&amp;Math.abs(v.y-v.down.y)&lt;=5){let b=Math.floor(v.y/s);e=t[b],p=b*s}else e=it(e,t[0],t[t.length-1]);l=!1,o(e),i()}}};let h=!1;function f(){let g=r.getContext("2d");if(!g)throw new uo;let v=r.width/150,b=r.height/5;g.save(),g.clearRect(0,0,r.width,r.height),g.lineWidth=2,g.strokeStyle="#000",g.save(),g.strokeStyle="#0075f6",g.beginPath(),rq(g,1,p+1,r.width-2,b-2,6.25),g.stroke(),g.restore();let C=30/Math.max(30,t[t.length-1]);g.save(),g.translate(0,p),g.scale(v,v),$de(g,e*C,n),g.restore(),g.scale(v,v);for(let x=0;x&lt;5;x++){let y=b*x;g.save(),g.translate(0,y/v),t.indexOf(e)&lt;0||l?g.strokeStyle="rgba(0,0,0,0.2)":g.strokeStyle="rgba(0,0,0,0.5)",$de(g,t[x]*C,n),g.restore()}g.restore()}function m(){u(),f(),h||requestAnimationFrame(m)}return requestAnimationFrame(m),{close(){h=!0,a.unbind()}}}var zBe=({isEraser:r,strokeWidth:e,polygonal:t,onChangeStrokeWidth:n,onClose:o})=&gt;{let i=(0,Cs.useRef)(null),[s,a]=(0,Cs.useState)(void 0),l=Me();(0,Cs.useEffect)(()=&gt;{let p=i.current;if(p){let h=UBe({canvas:p,polygonal:t,strokeWidth:e,sizes:r?V4:$4,onChangeStrokeWidth:n,onClose:o});a(h)}return()=&gt;{s&amp;&amp;s.close()}},[]);let u=l.screen.isMobile?Nh(50):200,d=u/2,c=pe();return Cs.default.createElement("div",{className:"popoverDialog"},Cs.default.createElement("div",{className:"editorDrawToolPopoverInner"},Cs.default.createElement("div",{className:"editorDrawToolPopoverTitle"},r?c.eraserSize:c.penThickness),Cs.default.createElement("canvas",{className:"editorDrawToolWidthButtonCanvas",width:d*window.devicePixelRatio,height:u*window.devicePixelRatio,style:{width:d,height:u},ref:i})))},Vde=({preference:r,polygonal:e,activeTool:t,isOpenPopover:n,onClick:o,onClosePopover:i,onChangeStrokeWidth:s})=&gt;{let a=r.width,l=(0,Cs.useRef)(null),u=Me();(0,Cs.useEffect)(()=&gt;{let c=l.current;if(!c)return;let p=c.getContext("2d");if(!p)throw new uo;let h=c.width*.6,f=h/150,m=60*f;p.save(),p.clearRect(0,0,c.width,c.height),p.strokeStyle="#000";let g=c.width/2-h/2,v=c.height/2-m/2;p.translate(g,v),p.scale(f,f),OBe(p,a*.55+3.4,e),p.restore()},[e,a]);let d=u.screen.isMobile?Nh(8):48;return Cs.default.createElement(Cs.default.Fragment,null,Cs.default.createElement(Lv,{showTriangle:!0},Cs.default.createElement("div",{className:"editorDrawToolButton",onClick:o,role:"button"},Cs.default.createElement("canvas",{width:d*window.devicePixelRatio,height:d*window.devicePixelRatio,style:{width:d,height:d},ref:l}))),Cs.default.createElement(xt,{open:n,onClose:i,container:"none"},Cs.default.createElement(zBe,{isEraser:t==="eraser",strokeWidth:r.width,polygonal:e,onClose:i,onChangeStrokeWidth:s})))};var hW=oe(ve());var jde=({pref:r,isActive:e,onClick:t})=&gt;{let n=nn(r.colors[r.activeColor]).toRGBAHex();return hW.default.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton highlighterIcon relative",role:"button",onClick:t,"data-active":e},hW.default.createElement(pW,{type:"highlighter",color:n}))};var Zf=({store:r,editorStore:e,drawToolDispatcher:t,forDocument:n,animateAppear:o})=&gt;{let i=e.selectedTool===1,{activeTool:s,prefs:a,lastToolSolidLine:l,lastToolWithWidth:u}=Bb(r,n),d=l!=null?l:"pen",c=u!=null?u:"pen",p=a[d],h=a[c],[f,m]=(0,Ss.useState)(),g=()=&gt;{m(void 0)};(0,Ss.useEffect)(()=&gt;{e.moveMode&amp;&amp;m(void 0)},[e.moveMode]),(0,Ss.useEffect)(()=&gt;{i&amp;&amp;r.reduce(td({forDocument:n,tool:d})),m(void 0)},[i]);let v=()=&gt;{if(!i){e.setTool(1);return}if(f){m(void 0);return}if(s==="pen")if(p.activeRuler){let O={activeRuler:!1};r.reduce(hg({forDocument:n,part:O}))}else m("pen");else r.reduce(td({forDocument:n,tool:"pen"}))},b=()=&gt;{if(!(!i||s==="highlighter")){if(f){m(void 0);return}r.reduce(td({forDocument:n,tool:"highlighter"}))}},C=()=&gt;{if(!!i)if(s==="pen"||s==="highlighter"){let O={activeRuler:!p.activeRuler};r.reduce(hg({forDocument:n,tool:s,part:O}))}else{let O=d,Q=O==="pen"?"pencil":void 0;r.reduce(td({forDocument:n,tool:O,pen:Q}),hg({forDocument:n,tool:O,part:{activeRuler:!0}}))}},x=O=&gt;()=&gt;{if(!i)return;if(f){m(void 0);return}let Q={activeColor:O};if(s==="eraser"||s==="lasso"){r.reduce(td({forDocument:n,tool:d}),hg({forDocument:n,tool:d,part:Q}));return}p.activeColor===O?m("color"):r.reduce(hg({forDocument:n,part:Q}))},y=O=&gt;Q=&gt;{let j={...p.colors};j[O]=Q.toRGBA(),r.reduce(hg({forDocument:n,part:{colors:j}})),m(void 0)},S=()=&gt;{!i||!e.canUndoStroke||t.undo()},T=()=&gt;{!i||!e.canRedoStroke||t.redo()},w=()=&gt;{if(!!i){if(f){m(void 0);return}s==="eraser"?m("eraser"):r.reduce(td({forDocument:n,tool:"eraser"}))}},k=()=&gt;{!e.canClearStroke||(t.clear(),g(),r.reduce(td({forDocument:n,tool:d})))},A=()=&gt;{if(!!i){if(f){m(void 0);return}r.reduce(td({forDocument:n,tool:c})),m("width")}},I=()=&gt;{if(!!i){if(f!==void 0){m(void 0);return}s!=="lasso"&amp;&amp;r.reduce(td({forDocument:n,tool:"lasso"}))}},E=O=&gt;{r.reduce(hg({forDocument:n,part:{width:O}}))};return Ss.default.createElement("div",{className:"editorButton editorDrawTools editorHeaderItem","data-active":i},Ss.default.createElement(Wde,{store:r,forDocument:n,isToolActive:i,isOpenPopover:f==="pen",onClick:v,onClosePopover:g}),Ss.default.createElement(Xf,{active:i,animateAppear:o},Ss.default.createElement(jde,{pref:a.highlighter,isActive:s==="highlighter",onClick:b}),Ss.default.createElement(Gde,{enableClear:e.canClearStroke,isActive:s==="eraser",isOpenPopover:f==="eraser",onClick:w,onClickClear:k,onClosePopover:g}),Ss.default.createElement("div",{className:"editorSvgButtonIcon editorDrawToggleButton rulerIcon",role:"button",onClick:C,"data-active":d===s&amp;&amp;p.activeRuler}),Ss.default.createElement(Vde,{isOpenPopover:f==="width",onClick:A,onClosePopover:g,onChangeStrokeWidth:E,activeTool:s,preference:h,polygonal:d===c&amp;&amp;p.activeRuler}),Ss.default.createElement(rR,{activeTool:s,solidLineTool:d,preference:p,isOpenPopover:f==="color",index:1,onClick:x(1),onChooseNewColor:y(1),onClosePopover:g}),Ss.default.createElement(rR,{activeTool:s,solidLineTool:d,preference:p,isOpenPopover:f==="color",index:2,onClick:x(2),onChooseNewColor:y(2),onClosePopover:g}),Ss.default.createElement(rR,{activeTool:s,solidLineTool:d,preference:p,isOpenPopover:f==="color",index:3,onClick:x(3),onChooseNewColor:y(3),onClosePopover:g}),Ss.default.createElement("div",{className:"editorSvgButtonIcon editorDrawToolButton undoIcon",role:"button",onClick:()=&gt;e.canUndoStroke&amp;&amp;S(),"data-disabled":!e.canUndoStroke}),Ss.default.createElement("div",{className:"editorSvgButtonIcon editorDrawToolButton redoIcon",role:"button",onClick:()=&gt;e.canRedoStroke&amp;&amp;T(),"data-disabled":!e.canRedoStroke})))},Lv=({showTriangle:r,enableActiveBgColor:e=!0,children:t})=&gt;Ss.default.createElement(Kr,{className:"editorDrawToolPopoverButton","data-enable":e},t,r&amp;&amp;Ss.default.createElement("div",{className:"editorDrawToolPopoverButtonTriangle"})),Kde=200,fW=60,qde=1470,Yde=1170,Ov=({screen:r,isScreenSharing:e,isFingerMode:t=!1,isFocusWebCard:n=!1,bounds:o=1080,boundsForScreenSharing:i=930})=&gt;{let s=r.isMobile;return o=e?i:o,o=n?o+fW:o,t?e?!1:(o=o-360,s?r.width&lt;o-Kde:r.width&lt;o):s?r.width&lt;o-Kde:r.width&lt;o};var HBe=({size:r,selected:e,exact:t,onClick:n})=&gt;Js.default.createElement(Kr,{onClick:()=&gt;n(r),className:"textSizeDialogCell","data-selected":e,"data-exact":t},Rv(r,!0)),Xde=1,mW=.01,GBe=50,WBe=200,$Be=50,VBe=3,MP=Math.sqrt(kr(nx)/kr(kt)),nR=class extends Js.default.Component{constructor(t){super(t);this.inputRef=(0,em.createRef)();this.fontSizeChanged=yg();this.firstScrollTo=(0,em.createRef)();this.onMouseDownTextSizeInput=t=&gt;{var i;let{textActionDispatcher:n,setMode:o}=this.props;n.fontSizeInputWillFocus(),this.isFontSizeEditable&amp;&amp;((i=this.inputRef.current)==null||i.focus()),o("opaque")};this.onBlurTextSizeInput=t=&gt;{this.notifyFontSizeFromInput(!1),this.props.textActionDispatcher.fontSizeInputDidBlurred()};this.onTextSizeChanged=t=&gt;{this.notifyFontSizeFromInput(!1)};this.onKeyDownTextSizeInput=t=&gt;{let{onClose:n,setMode:o}=this.props,{key:i}=t;switch(i){case"Enter":case"Escape":this.notifyFontSizeFromInput(!1),n();return;case"ArrowUp":{t.preventDefault(),this.stepper.decrement(),this.updateFontSizeInput();break}case"ArrowDown":{t.preventDefault(),this.stepper.increment(),this.updateFontSizeInput();break}}o("transparent")};this.onKeyUpTextSizeInput=t=&gt;{let{key:n}=t;switch(n){case"ArrowUp":case"ArrowDown":this.notifyFontSizeFromInput(!1);break}};this.onCellsContainerClicked=t=&gt;{let{mode:n,onClose:o}=this.props;n==="transparent"&amp;&amp;o()};this.onSizeCellClicked=t=&gt;{this.stepper.setCurrentSize(t),this.fontSizeDidChanged(t,!1),this.updateFontSizeInput(),this.props.setMode("transparent"),this.setState({universalTextSize:t})};this.stopLongPressTimer=t=&gt;{if(t.preventDefault(),this.longPressTimer===void 0)return;this.stopTimer();let n=this.stepper.currentSize;this.fontSizeDidChanged(n,!1),this.updateFontSizeInput(),this.setState({universalTextSize:n})};this.state={universalTextSize:t.universalTextSize},this.presets=this.calcTextSizePresets(t.universalTextSize);let n=this.calcTextSizeLimit();this.stepper=new ZB(t.universalTextSize,n.min,n.max),this.textSizeInputLimit={max:tR(n.max),min:eR(n.min)}}render(){let{screen:t,mode:n,setMode:o}=this.props,{universalTextSize:i}=this.state,s=bE(this.presets,i,(p,h)=&gt;p-h),a=Rv(i),l=this.isFontSizeEditable,u=n==="transparent",d=Ov({screen:t,isScreenSharing:!1})?2:1,c=`calc(${t.height}px - ${t.keyboardHeight}px - var(--editorHeaderTotalHeight) * ${d} - var(--textSizeDialogLabelContainerHeight) - var(--textSizeDialogMargin) - ${E8}px - 2 * ${Ay}px)`;return Js.default.createElement(Kr,{className:"textSizeDialog","data-transparent":u,onMouseEnter:()=&gt;o("opaque"),onMouseDown:p=&gt;{p.target instanceof HTMLInputElement||p.preventDefault()}},Js.default.createElement("div",{className:"textSizeDialogControlsContainer","data-editable":l},Js.default.createElement(Kr,{className:"textSizeDialogChangeButtonsContainer"},Js.default.createElement("div",{className:"textSizeDialogChangeButton textSizeDialogChangeButtonMinus",onPointerDown:this.startLongPressTimer(p=&gt;{p.decrement()}),onPointerUp:this.stopLongPressTimer,onPointerCancel:this.stopLongPressTimer,onPointerLeave:this.stopLongPressTimer,"data-editable":l}),Js.default.createElement("div",{className:"textSizeDialogChangeButton textSizeDialogChangeButtonPlus",onPointerDown:this.startLongPressTimer(p=&gt;{p.increment()}),onPointerUp:this.stopLongPressTimer,onPointerCancel:this.stopLongPressTimer,onPointerLeave:this.stopLongPressTimer,"data-editable":l})),Js.default.createElement("div",{className:"textSizeDialogLabelContainer",onPointerDown:()=&gt;o("opaque")},Js.default.createElement("input",{className:"textSizeDialogSizeLabel",type:"text",defaultValue:a,onChange:this.onTextSizeChanged,onMouseDown:this.onMouseDownTextSizeInput,onPointerDown:this.onMouseDownTextSizeInput,onBlur:this.onBlurTextSizeInput,onKeyDown:this.onKeyDownTextSizeInput,onKeyUp:this.onKeyUpTextSizeInput,ref:this.inputRef,"data-editable":l}))),Js.default.createElement(Kr,{className:"textSizeDialogCellsContainerScroller"},Js.default.createElement("div",{className:"textSizeDialogCellsContainer",style:{maxHeight:c},onScroll:jBe(),onClick:this.onCellsContainerClicked},this.presets.map((p,h)=&gt;Js.default.createElement("div",{ref:h===s?this.firstScrollTo:null,key:h},Js.default.createElement(HBe,{size:p,exact:ru(p,i),selected:h===s,onClick:this.onSizeCellClicked}))))))}componentDidMount(){var t;this.props.screen.keyboardHeight===0&amp;&amp;((t=this.firstScrollTo.current)==null||t.scrollIntoView({block:"center"}))}componentDidUpdate(t,n,o){var i;if(this.props.mode==="opaque"&amp;&amp;t.mode==="transparent"&amp;&amp;this.props.screen.keyboardHeight===0&amp;&amp;((i=this.firstScrollTo.current)==null||i.scrollIntoView({block:"center"})),this.props.focusingCard!==t.focusingCard){let{universalTextSize:s}=this.props;this.stepper.setCurrentSize(s)}}componentWillUnmount(){this.fontSizeChanged.drain()&amp;&amp;this.notifyFontSizeFromInput(!0),this.props.textActionDispatcher.fontSizeInputDidBlurred(),this.stopTimer()}get isFontSizeEditable(){return this.props.screen.keyboardHeight===0}calcTextSizePresets(t){let n=Math.max(this.props.card.size.height,this.props.card.size.width),o=n*Xde*MP,i=n*mW*MP;return lW(t,GBe,o,i)}calcTextSizeLimit(){let t=Math.max(this.props.card.size.height,this.props.card.size.width),n=t*Xde*MP,o=t*mW*MP,s=Math.max(this.props.focusingCard.size.height,this.props.focusingCard.size.width)*mW*MP;return{max:n,min:Math.min(s,o)}}notifyFontSizeFromInput(t){let n=parseFloat(this.inputRef.current.value);Number.isNaN(n)||!Number.isFinite(n)||n&lt;=0||n===this.state.universalTextSize&amp;&amp;!t||(this.textSizeInputLimit.max&amp;&amp;n&gt;this.textSizeInputLimit.max?n=this.textSizeInputLimit.max:this.textSizeInputLimit.min&amp;&amp;n&lt;this.textSizeInputLimit.min&amp;&amp;(n=this.textSizeInputLimit.min),this.fontSizeDidChanged(n,t),this.setState({universalTextSize:n}))}updateFontSizeInput(){let t=Rv(this.stepper.currentSize);this.inputRef.current.value=t}fontSizeDidChanged(t,n){this.props.textActionDispatcher.fontSizeDidChanged(t,n),this.fontSizeChanged.mark()}startLongPressTimer(t){return n=&gt;{n.preventDefault(),this.props.mode==="opaque"&amp;&amp;this.props.setMode("transparent"),this.stopTimer();let o=()=&gt;{t(this.stepper);let s=this.stepper.currentSize;this.fontSizeDidChanged(s,!1),this.updateFontSizeInput(),this.setState({universalTextSize:s})};o();let i=0;this.longPressTimer=window.setInterval(()=&gt;{o(),i+=1,i===VBe&amp;&amp;(window.clearInterval(this.longPressTimer),this.longPressTimer=window.setInterval(()=&gt;{o()},$Be))},WBe)}}stopTimer(){this.longPressTimer!==void 0&amp;&amp;(window.clearInterval(this.longPressTimer),this.longPressTimer=void 0)}},Qde=({card:r,focusingCard:e,open:t,onClose:n,popoverAnchor:o,getParentBounds:i,universalTextSize:s,textActionDispatcher:a,screen:l})=&gt;{let[u,d]=(0,em.useState)("opaque"),c=u==="opaque";return(0,em.useEffect)(()=&gt;{t&amp;&amp;d("opaque")},[t]),Js.default.createElement(FP,{open:t,onClose:n,popoverAnchor:o,getParentBounds:i,enableArrow:c},Js.default.createElement(nR,{card:r,focusingCard:e,universalTextSize:s,textActionDispatcher:a,screen:l,onClose:n,mode:u,setMode:d}))},Jde=({card:r,focusingCard:e,open:t,onClose:n,universalTextSize:o,textActionDispatcher:i,screen:s})=&gt;{let[a,l]=(0,em.useState)("opaque");return(0,em.useEffect)(()=&gt;{t&amp;&amp;l("opaque")},[t]),Js.default.createElement(xt,{open:t,onClose:n,textEditing:!0,anchor:"bottomCenter"},Js.default.createElement(nR,{card:r,focusingCard:e,universalTextSize:o,textActionDispatcher:i,screen:s,onClose:n,mode:a,setMode:l}))};function jBe(r){if(!!r)return sF()?e=&gt;{let{scrollTop:t,clientHeight:n,scrollHeight:o}=e.currentTarget;t===0?e.currentTarget.scrollTop=1:t+n===o&amp;&amp;(e.currentTarget.scrollTop=t-1),r(e)}:r}var gW=oe(ve()),Zde=oe(ve());var KBe=["#ED1E14FF","#CE579BFF","#09A318FF","#007AB7FF","#000000FF","#E58339FF","#FF9FACFF","#A4C520FF","#6EB7DBFF","#70411CFF","#F3C008FF","#FAE4D4FF","#FFE600FF","#FFFFFFFF","#AAAAAAFF"].map(mt),oR=({onClick:r})=&gt;{let[e,t]=(0,Zde.useState)();return gW.default.createElement(Kr,{className:"popoverDialog"},gW.default.createElement(dW,{colors:KBe,numRows:3,onClick:o=&gt;{e!=null&amp;&amp;e.equals(o)||r(o),t(o)}}))};var vW=oe(ve()),ece=({text:r,fontSize:e,color:t,maxNormalTextLength:n})=&gt;vW.default.createElement("svg",{width:"100%",height:"100%"},vW.default.createElement("text",{fill:t!=null?t:"black",x:"50%",y:"50%",width:"100%",height:"100%",fontSize:e,textLength:n&lt;r.length?"100%":void 0,lengthAdjust:"spacingAndGlyphs",textAnchor:"middle",dominantBaseline:"central"},r));var iR=oe(ve());var sR=({current:r,onClick:e})=&gt;{let o=[1,1.15,1.5,2],i=it(r,1,2),s=bE(o,i,(a,l)=&gt;a-l);return iR.default.createElement(Kr,{className:"lineHeightDialog"},o.map((a,l)=&gt;iR.default.createElement(Kr,{onClick:()=&gt;e(a),key:l},iR.default.createElement("div",{className:"lineHeightSelectorCell","data-checked":l===s},a))))};var bW=({card:r,focusingCard:e,editorStore:t,textActionDispatcher:n,onClick:o,animateAppear:i})=&gt;{var B,z,N;let s=rd(),a=Me(),l=pe(),[u,d]=$r({}),c=()=&gt;d({modal:void 0}),{title:p}=e.gadgets,h=t.selectedTool===2,f=(B=p==null?void 0:p.vertical)!=null?B:!1,{color:m,fontSize:g,bold:v,list:b,lineHeightMultiple:C}=t.typingAttributes,x=of({card:e,clipLocalFontSize:g}),y=Rv(x),[S,T]=(0,wr.useState)({h:(z=p==null?void 0:p.h_alignment)!=null?z:"left",v:(N=p==null?void 0:p.v_alignment)!=null?N:"top"}),w=(V,re)=&gt;{(V!==S.h||re!==S.v)&amp;&amp;(n.changeAlignment(V,re),T({h:V,v:re}))},k=aW({h:S.h,v:S.v,vertical:f}),A=ie.res.src(`/svg/alignment-dialog/${k}`);(0,wr.useEffect)(()=&gt;{let V=e.gadgets.title;!V||T({h:V.h_alignment,v:V.v_alignment})},[p==null?void 0:p.h_alignment,p==null?void 0:p.v_alignment]),(0,wr.useEffect)(()=&gt;{!h&amp;&amp;u.modal!==void 0&amp;&amp;d({modal:void 0})},[h,u.modal]);let I=()=&gt;{n==null||n.toggleVertical(),s()},{v:E}=wb(mt("#faecbaff")),{v:O}=wb(m),Q=Math.abs(E-O)&lt;.02,j=(0,wr.useMemo)(()=&gt;p!=null&amp;&amp;p.text?Up(p==null?void 0:p.text):0,[p==null?void 0:p.text]),U=Ax(b,j);return wr.default.createElement("div",{className:"editorButton editorTextTool editorHeaderItem","data-active":h},wr.default.createElement(Kr,{onClick:o,role:"button"},!h&amp;&amp;wr.default.createElement("div",{className:"textButton"},wr.default.createElement("div",{className:`editorButtonIcon ${l.textButtonIconClass}`})),h&amp;&amp;wr.default.createElement("div",{className:"relative"},wr.default.createElement(Kr,{onClick:()=&gt;d({modal:"alignment"})},wr.default.createElement("div",{className:"editorSvgButtonIcon textAlignIcon",style:{backgroundImage:`url("${A}")`}})),wr.default.createElement(xt,{open:u.modal==="alignment",onClose:c,textEditing:!0},wr.default.createElement(zde,{onClick:w,vertical:f,hAlignment:S.h,vAlignment:S.v})))),wr.default.createElement(Xf,{active:h,animateAppear:i},wr.default.createElement("div",{className:"relative"},wr.default.createElement(Kr,{onClick:()=&gt;d({modal:"size"})},wr.default.createElement("div",{className:"editorSvgButtonIcon textSizeIcon"},wr.default.createElement(ece,{text:`${y}pt`,fontSize:a.screen.isMobile?Nh(3):16,maxNormalTextLength:6}))),wr.default.createElement(Jde,{card:r,focusingCard:e,open:u.modal==="size",onClose:c,universalTextSize:x,textActionDispatcher:n,screen:a.screen})),wr.default.createElement(Kr,{onClick:()=&gt;n.toggleBoldface()},wr.default.createElement("div",{className:"editorSvgButtonIcon textBoldIcon","data-bold":v},"B")),wr.default.createElement("div",{className:"relative"},wr.default.createElement(Kr,{onClick:()=&gt;d({modal:"color"})},wr.default.createElement("div",{className:"editorSvgButtonIcon textColorIcon"},wr.default.createElement("div",{className:"editorTextColorButtonLabel"},"A"),wr.default.createElement("div",{className:"editorTextColorButtonTextColor",style:{backgroundColor:m.toCSSRGBA()},"data-shadow":Q}))),wr.default.createElement(xt,{open:u.modal==="color",onClose:c,textEditing:!0},wr.default.createElement(oR,{onClick:V=&gt;n.changeColor(V)}))),wr.default.createElement(Kr,{onClick:I},wr.default.createElement("div",{className:"verticalTextButton","data-vertical":f},wr.default.createElement("div",{className:"verticalTextButtonTitle","data-multiple-lines":l.verticalWritingBtnLabel.includes(`
`)},l.verticalWritingBtnLabel.split(`
`).map((V,re)=&gt;wr.default.createElement("div",{key:re},V))),wr.default.createElement("div",{className:"verticalTextButtonIcon"}))),wr.default.createElement(Kr,{onClick:n.changeListStyle,disable:U===b},wr.default.createElement("div",{className:"editorSvgButtonIcon textList","data-list":U!=null?U:"none","data-disabled":U===b})),wr.default.createElement("div",{className:"relative"},wr.default.createElement(Kr,{onClick:()=&gt;d({modal:"lineSpacing"})},wr.default.createElement("div",{className:"editorSvgButtonIcon textLineSpacing"})),wr.default.createElement(xt,{open:u.modal==="lineSpacing",onClose:c,textEditing:!0},wr.default.createElement(sR,{current:C!=null?C:1,onClick:V=&gt;n.changeLineHeightMultiple(V)}))),wr.default.createElement(Kr,{onClick:()=&gt;n.undo(),disable:!t.textCanUndo},wr.default.createElement("div",{className:"editorSvgButtonIcon undoIcon","data-disabled":!t.textCanUndo})),wr.default.createElement(Kr,{onClick:()=&gt;n.redo(),disable:!t.textCanRedo},wr.default.createElement("div",{className:"editorSvgButtonIcon redoIcon","data-disabled":!t.textCanRedo})),wr.default.createElement(Kr,{onClick:()=&gt;n.copyTextCard(e.id)},wr.default.createElement("div",{className:"editorSvgButtonIcon newCardIcon"}))))};var tm=oe(ve());var Uv=({editorStore:r,animateAppear:e})=&gt;{let t=r.selectedTool===0,n=r.activeFingerTool;return(0,tm.useEffect)(()=&gt;{r.setActiveFingerTool("finger")},[t]),(0,tm.useEffect)(()=&gt;{!r.toolVisible&amp;&amp;r.activeFingerTool==="laser"&amp;&amp;r.setActiveFingerTool("finger")},[r.toolVisible,r.activeFingerTool]),tm.default.createElement("div",{className:"editorButton editorFingerTool editorHeaderItem","data-finger-tool":t},tm.default.createElement("div",{className:"fingerButton",role:"button",onClick:()=&gt;{t?r.setActiveFingerTool("finger"):r.setTool(0)},"data-finger-tool-type":n},tm.default.createElement("div",{className:"editorSvgButtonIcon fingerButtonIcon"})),tm.default.createElement(Xf,{active:t,animateAppear:e},tm.default.createElement("div",{className:"editorSvgButtonIcon fingerToggleButton laserIcon",role:"button",onClick:()=&gt;{r.setActiveFingerTool("laser")},"data-finger-tool-type":n})))};var Po=oe(ve()),_u=oe(ve());var Fi=oe(ve());var tce=({card:r,store:e,editorStore:t,playManager:n})=&gt;{let o=pe(),[i,s]=(0,Fi.useState)("00:00"),[a,l]=(0,Fi.useState)(),u=(0,Fi.useRef)(null),d=(0,Fi.useRef)(),c=b=&gt;{s(jh(b))},p=async b=&gt;{let{format:C,devices:x}=await CW(),{recordingDeviceId:y,enableAudioNoiseReduction:S}=e.userPreference,T=SW(y,x),w=await b.init({mimeType:C,deviceId:T,updateTime:c,uploadAsset:h,enableAudioNoiseReduction:S,onMediaDataStoreError:k=&gt;{t.setNarration({card:r,recording:!1}),!(k instanceof ay)&amp;&amp;e.reduce(me(58,{title:o.couldntFinishedAudioRecording,message:k.message,okMessage:o.close,onOk:()=&gt;e.reduce(me(58,void 0))}))}});l(w),requestAnimationFrame(f)},h=async(b,C,x)=&gt;{var w,k;let y;VM(r)&amp;&amp;(y=x);let S=0;(r instanceof Qn||r instanceof zn)&amp;&amp;(S=r.content.in_point);let T=(k=(w=r.gadgets.naration)==null?void 0:w.source_volume)!=null?k:1;await a6(e,{cardId:r.id,file:b,extension:C,duration:x,cardDuration:y,volume:T,start:S,downloadOnCancel:!0}),t.setNarration({card:r,volume:T,recording:!1})},f=()=&gt;{let b=d.current;if(!b||b.state()!=="recording")return;let C=u.current;if(!C)return;let x=C.getContext("2d");if(!x)throw new uo;YBe(x,b.volume()),requestAnimationFrame(f)},m=b=&gt;C=&gt;{C.name==="NotAllowedError"?e.reduce(me(35,{title:o.couldntStartAudioRecording,message:o.micPermissionDeniedErrorMsg,okMessage:o.getHelp,onOk:()=&gt;{e.reduce(me(35,void 0)),window.open(e.screen.isMobile?o.helpPageLinkToPermitCameraAndMicForAndroid:o.helpPageLinkToPermitCameraAndMic)},cancelMessage:o.close,onCancel:()=&gt;e.reduce(me(35,void 0))})):e.reduce(me(35,{title:o.couldntStartAudioRecording,message:C.message,okMessage:o.close,onOk:()=&gt;e.reduce(me(35,void 0))})),n.pause(t),b&amp;&amp;We(On(r.id,{"gadgets.naration":b})),t.setNarration({card:r,recording:!1})};if((0,Fi.useEffect)(()=&gt;{var b,C;((b=d.current)==null?void 0:b.state())==="recording"&amp;&amp;((C=d.current)==null||C.stop(!1)),t.setNarration({recording:!1})},[r.id]),(0,Fi.useEffect)(()=&gt;{if(t.narrationRecording){let b=r.gadgets.naration;!!(b&amp;&amp;b.asset)&amp;&amp;(We(On(r.id,{"gadgets.naration":null})),t.setNarration({card:r}));let{startSeconds:x,endSeconds:y}=Xi(r);n.beginSeek(t),n.seek(t,x),n.endSeek(t,r),t.setAvSpeedScale(1),t.setAvEndTime(y),s("00:00");let S;r instanceof zn||r instanceof Qn?S=r.duration:S=r.unlimitedRecordingTime?600:r.duration;let T=new yW(S);d.current=T,p(T).then(()=&gt;{n.play(t)}).catch(m(b))}return()=&gt;{var b,C;((b=d.current)==null?void 0:b.state())==="recording"&amp;&amp;((C=d.current)==null||C.stop(!1)),d.current=void 0}},[t.narrationRecording]),(0,Fi.useEffect)(()=&gt;{var b,C;if(t.narrationRecording&amp;&amp;!t.avPlaying){(b=d.current)==null||b.stop(!0);let x=(C=r.metadata.playback_rate)!=null?C:1;t.setAvSpeedScale(x)}},[t.avPlaying]),!t.narrationRecording)return null;let g=window.devicePixelRatio;return Fi.default.createElement("div",{className:"editorHeaderInner"},Fi.default.createElement("div",{className:"editorHeaderButtonGroup recordingMicWrapper"},Fi.default.createElement("div",{className:"editorButtonWrapper editorNarrationTool"},Fi.default.createElement("div",{className:"editorRecordingVolumeMeter"},Fi.default.createElement("canvas",{ref:u,...((b,C)=&gt;({width:b*g,height:C*g,style:{width:b,height:C}}))(120,20)})),Fi.default.createElement("div",{className:"editorRecordingTime"},i),Fi.default.createElement("div",{className:"editorRecordingTextButton editorRecordingEndButton",role:"button",onClick:()=&gt;{n.pause(t),d.current?d.current.stop():t.setNarration({recording:!1})}},o.end)),a&amp;&amp;Fi.default.createElement(qBe,{label:a})))},qBe=({label:r})=&gt;Fi.default.createElement("div",{className:"recordingMicContainer blinkAnimation",title:r},Fi.default.createElement("div",{className:"recordingMicIcon"}),Fi.default.createElement("span",{className:"recordingMicLabel"},r)),yW=class{constructor(e){this.shouldUpload=!0;this.recordedTime=0;this.duration=e}async init({mimeType:e,deviceId:t,updateTime:n,uploadAsset:o,enableAudioNoiseReduction:i,onMediaDataStoreError:s}){let a=QF(e),l=Wh({audio:{enableNoiseReduction:i,deviceId:t}}),u=await navigator.mediaDevices.getUserMedia(l);this.recorder=new MediaRecorder(u,{mimeType:e,audioBitsPerSecond:HD});let d=100,c;this.recorder.ondataavailable=f=&gt;{if(!this.recorder)throw new Error("recorder is not initialized");c||(c=f.timeStamp-d);let m=f.data;if(m.size&gt;0&amp;&amp;a.add(m),this.recordedTime=(f.timeStamp-c)/1e3,this.recorder.state==="recording")if(this.recordedTime&gt;=this.duration)this.recorder.stop();else{let g=Math.floor(this.recordedTime);n(g)}},this.recorder.onstop=()=&gt;{u.getTracks().forEach(f=&gt;{f.stop()}),this.shouldUpload&amp;&amp;a.close().then(f=&gt;{let{blob:m,duration:g}=f,v=B0.get(e),b=new File([m],`narration${v}`,{type:e});o(b,v,g)}).catch(s)};let p=new AudioContext,h=p.createMediaStreamSource(u);return this.analyser=p.createAnalyser(),this.analyser.fftSize=2048,h.connect(this.analyser),this.buffer=new Uint8Array(this.analyser.frequencyBinCount),this.recorder.start(d),u.getAudioTracks()[0].label}stop(e=!0){var t;((t=this.recorder)==null?void 0:t.state)==="recording"&amp;&amp;(this.shouldUpload=e,this.recorder.stop())}state(){if(!!this.recorder)return this.recorder.state}volume(){if(!this.buffer||this.buffer.length&lt;1||!this.analyser)return 0;this.analyser.getByteFrequencyData(this.buffer);let e=this.buffer.reduce((n,o)=&gt;n+o),t=Math.max(e/(this.analyser.frequencyBinCount*255),0);return Math.log(t*Math.E+1)}};function YBe(r,e){let t=r.canvas.width,n=r.canvas.height;r.save(),r.clearRect(0,0,t,n),r.fillStyle="#496c6c",r.fillRect(0,0,t,n),e&lt;=.4?(r.fillStyle="green",r.fillRect(0,0,e*t,n)):e&lt;=.75?(r.fillStyle="green",r.fillRect(0,0,.4*t,n),r.fillStyle="yellow",r.fillRect(.4*t,0,(e-.4)*t,n)):(r.fillStyle="green",r.fillRect(0,0,.4*t,n),r.fillStyle="yellow",r.fillRect(.4*t,0,.35*t,n),r.fillStyle="red",r.fillRect(.75*t,0,(e-.75)*t,n));let o=t/20;r.lineWidth=1,r.strokeStyle="white",r.beginPath();for(let i=0;i&lt;20;i++)r.rect(o*i,0,o,n);r.stroke(),r.restore()}async function CW(){let r=he.get().strings,e=XF("audio");if(!e||!navigator.mediaDevices)throw new co(r.browserDoesntSupportAudioRecording);let t=await xW();if(t.length===0)throw new co(r.noMicFoundErrorMsg);return{format:e,devices:t}}function SW(r,e){let t=e.find(n=&gt;n.deviceId===r);return t?t.deviceId:"default"}async function xW(){return(await navigator.mediaDevices.enumerateDevices()).filter(e=&gt;e.kind==="audioinput")}var wW=({card:r,editorStore:e,playManager:t})=&gt;{let n=pe(),o=Me(),i=e.selectedTool===3,s=r.gadgets.naration,a=!!(s&amp;&amp;s.asset),l=r instanceof zn||r instanceof Qn,[u,d]=(0,_u.useState)(r.duration),[c,p]=(0,_u.useState)(r.unlimitedRecordingTime),[h,f]=(0,_u.useState)(s?s.source_volume:1),[m,g]=(0,_u.useState)(!1),[v,b]=(0,_u.useState)(!1);(0,_u.useEffect)(()=&gt;{d(r.duration),p(r.unlimitedRecordingTime),f(s?s.source_volume:1)},[r,r.duration]),(0,_u.useEffect)(()=&gt;{e.moveMode&amp;&amp;(g(!1),b(!1))},[e.moveMode]);let C=()=&gt;{if(!i){e.setTool(3);return}t.pause(e),!(a&amp;&amp;!confirm(n.confirmAudioRecordingOverwrite))&amp;&amp;(o.reduce(Ar(!1),hn(void 0)),e.setNarration({recording:!0}))},x=()=&gt;{!i||(t.pause(e),b(!0))},y=()=&gt;{b(!1)},S=(U,B)=&gt;{if(c)return;d(U);let z=Math.max(0,U);B==="up"&amp;&amp;r.duration!==z&amp;&amp;(We(On(r.id,{"metadata.duration":z})),e.setNarration({duration:z}))},T=U=&gt;{l||c===U||(p(U),We(On(r.id,{"metadata.unlimited_recording_time":U})),e.setNarration({unlimited:U}))},w=()=&gt;{!i||g(!0)},k=()=&gt;{g(!1)},A=(U,B,z)=&gt;{!a||(f(U),e.setNarration({volume:U}),z==="up"&amp;&amp;s.source_volume!==U&amp;&amp;We(On(r.id,{"gadgets.naration.source_volume":U})))},I=()=&gt;{if(!a||!confirm(n.confirmDeleteAudioRecording))return;let U={"gadgets.naration":null},B={card:r};!l&amp;&amp;r.unlimitedRecordingTime&amp;&amp;r.duration!==Ic&amp;&amp;(d(Ic),U={...U,"metadata.duration":Ic},B={...B,duration:Ic}),We(On(r.id,U)),e.setNarration(B)},E=n.automatic;c||(E=(u&gt;=1?Math.floor(u):parseFloat(u.toFixed(1)))+n.secondTimeUnit);let O=Me().locale,Q="3em";O==="en-US"?Q="4em":O==="ja-Hira"&amp;&amp;(Q="7em");let j=c?"4em":"5em";return O==="ja-Hira"&amp;&amp;(j="6em"),Po.default.createElement("div",{className:"editorButton editorRecordingTool editorHeaderItem","data-active":i},Po.default.createElement(Kr,{className:"recordingButton",role:"button","data-disabled":i&amp;&amp;r.duration&lt;1&amp;&amp;!r.unlimitedRecordingTime?"true":"false",onClick:C},Po.default.createElement("div",{className:"editorButtonIcon recordingButtonIcon","data-has-narration":a&amp;&amp;!i?"true":"false"}),Po.default.createElement(QB,{active:i,width:"2em"},Po.default.createElement("div",{className:"recordingButtonText"},n.audioRecordBtnLabel))),!l&amp;&amp;Po.default.createElement(QB,{active:i,width:j,padding:{left:!0,right:!1}},Po.default.createElement("div",{className:"relative"},Po.default.createElement("div",{className:"editorRecordingTextButton editorRecordingToolButton",role:"button",onClick:x},Po.default.createElement("div",{className:"editorRecordingToolButtonDuration"}),E),Po.default.createElement(xt,{open:v,onClose:y},Po.default.createElement(Ede,{onChangeDuration:S,onChangeUnlimited:T,duration:u,unlimitedRecording:c})))),a&amp;&amp;Po.default.createElement(QB,{active:i,width:Q,padding:{left:!0,right:!1}},Po.default.createElement("div",{className:"relative"},Po.default.createElement("div",{className:"editorRecordingTextButton editorRecordingToolButton",role:"button",onClick:w},n.volume),Po.default.createElement(xt,{open:m,onClose:k},Po.default.createElement(Dw,{onChange:A,volume:h})))),a&amp;&amp;Po.default.createElement(Xf,{active:i},Po.default.createElement("div",{className:"editorSvgButtonIcon editorRecordingToolButton recordingDeleteButtonIcon",role:"button",onClick:I})),Po.default.createElement(XBe,{active:i}))},XBe=({active:r})=&gt;{let e=Me(),t=pe(),[n,o]=(0,_u.useState)([]),[i,s]=(0,_u.useState)(!1),[a,l]=(0,_u.useState)(e.userPreference.recordingDeviceId),u=g=&gt;{g instanceof Error&amp;&amp;(g.message===t.micPermissionDeniedErrorMsg||g.name==="NotAllowedError")?e.reduce(me(35,{title:t.couldntGetDeviceInfo,message:t.micPermissionDeniedErrorMsg,okMessage:t.getHelp,onOk:()=&gt;{e.reduce(me(35,void 0)),window.open(e.screen.isMobile?t.helpPageLinkToPermitCameraAndMicForAndroid:t.helpPageLinkToPermitCameraAndMic)},cancelMessage:t.close,onCancel:()=&gt;e.reduce(me(35,void 0))})):e.reduce(me(35,{title:t.couldntGetDeviceInfo,...ot(g),okMessage:t.close,onOk:()=&gt;{e.reduce(me(35,void 0))}}))},d=async()=&gt;{let g;try{await CW(),g=await navigator.mediaDevices.getUserMedia(Wh({audio:!0})),await c(),s(!0)}catch(v){u(v)}finally{g==null||g.getTracks().forEach(v=&gt;v.stop())}},c=async()=&gt;{let g=await xW();p(g);let v=[...g];v.find(C=&gt;C.deviceId==="default")||v.unshift({deviceId:"default",label:t.default});let b=SW(e.userPreference.recordingDeviceId,g);l(b),o(v)},p=g=&gt;{if(g.find(v=&gt;!v.label))throw new co(t.micPermissionDeniedErrorMsg)},h=async()=&gt;{try{await c()}catch(g){u(g)}};(0,_u.useEffect)(()=&gt;{if(!!i)return navigator.mediaDevices.addEventListener("devicechange",h),()=&gt;{navigator.mediaDevices.removeEventListener("devicechange",h)}},[i]);let f=()=&gt;{s(!1)},m=g=&gt;()=&gt;{l(g.deviceId),e.reduce(s_({...e.userPreference,recordingDeviceId:g.deviceId})),f()};return Po.default.createElement(Xf,{active:r},Po.default.createElement("div",{className:"relative"},Po.default.createElement("div",{className:"editorSvgButtonIcon editorRecordingToolButton recordingMicSelectButtonIcon",role:"button",onClick:d}),Po.default.createElement(xt,{open:i,onClose:f},Po.default.createElement(Ra,null,n.map((g,v)=&gt;Po.default.createElement(Rr,{className:"editorRecordingSelectedMarkCell",title:g.label,key:v,role:"button",onClick:m(g)},Po.default.createElement("div",{className:"editorRecordingSelectedMark","data-selected":g.deviceId===a}),Po.default.createElement("span",{className:"editorRecordingMicLabel"},g.label)))))))};var Aw=oe(ve()),nce=oe(ve());var NP=oe(ve());var QBe=({color:r,selected:e,onClick:t})=&gt;{let n=e?"1px solid #3579F6":"1px solid #FFFFFF00",o="1px solid #FFFFFF00";(r.isTransparent()||r.isWhite())&amp;&amp;(o="1px solid #859FAC");let i="changeBackgroundColorCellInner";return r.isTransparent()&amp;&amp;(i+=" crossLineBackgroundImage"),NP.default.createElement(Kr,{onClick:t,style:{border:n},className:"changeBackgroundColorCell"},NP.default.createElement("div",{className:i,style:{backgroundColor:r.toRGBAHex(),border:o}}))},JBe=["#ffccdcFF","#c73532ff","#fff7a8ff","#f6c607ff","#caefd1ff","#02855dff","#b3ddfcff","#0a3b8fff","#FFFFFF00","#19335eFF","#FFFFFFFF","#000000FF"].map(mt),rce=({color:r,onClick:e})=&gt;NP.default.createElement("div",{className:"changeBackgroundColorDialog"},JBe.map((t,n)=&gt;NP.default.createElement(QBe,{color:t,selected:t.toRGBAHex()===r.toRGBAHex(),onClick:()=&gt;e(t),key:n})));var oce=({store:r,editorStore:e,card:t,playManager:n})=&gt;{let o=rd(),[i,s]=gs({store:r,initialState:!1});(0,nce.useEffect)(()=&gt;{e.moveMode&amp;&amp;s(!1)},[e.moveMode]);let a=()=&gt;{r.reduce(aS(!1)),s(!0),n.pause(e)},l=()=&gt;{s(!1)},u=h=&gt;{We(On(t.id,{"content.backcolor":h.toARGBHex()})),o()},d=dn(t.content.backcolor),c=d.a===0?"#7FA0AF":"#FFFFFF00",p=e.selectedTool===2;return Aw.default.createElement("div",{className:"editorButtonWrapper"},Aw.default.createElement(Kr,{onClick:a,className:"editorButton",role:"button"},Aw.default.createElement("div",{className:"backgroundColorButtonIcon",style:{backgroundColor:d.toRGBAHex(),border:`1px solid ${c}`}})),Aw.default.createElement(xt,{open:i,onClose:l,textEditing:p},Aw.default.createElement(rce,{color:d,onClick:u})))};var aR=oe(ve()),lR=oe(ve());var rm=({store:r,sharingState:e})=&gt;{let[t,n]=$r({receiverCount:0,readiedCount:0}),o=(0,lR.useRef)(!1),{courseId:i,sessionId:s}=e,a=r.screenSharingReadyStates,l=r.userStatuses,u=r.fetchStates[nt.receiverStatus(i)],d=()=&gt;{let p=0,h=0;for(let f in a){let m=Number(f);if(m===r.userInfo.user_id)continue;let g=a[f];if(g===void 0)continue;let v=Vh(i,m),b=l.byKey[v];(b==null?void 0:b.status)==="good"&amp;&amp;(g&amp;&amp;p++,h++)}n({readiedCount:p,receiverCount:h})};if((0,lR.useEffect)(()=&gt;{u==="fetching"?o.current=!0:o.current&amp;&amp;u==="done"||u instanceof Error?(o.current=!1,XM(r,i,s)):u==="done"&amp;&amp;(o.current=!1,d())},[a,l,s]),t.receiverCount&lt;=0)return null;let c=t.readiedCount===t.receiverCount;return aR.default.createElement("div",{className:"screenSharingReceiverStatus"},aR.default.createElement("div",{className:"screenSharingReceiverRotate screenSharingReceiverRotateIcon loadingLoop","data-loaded":c}),aR.default.createElement("div",{className:"screenSharingReceiverCount","data-loaded":c},t.readiedCount+" / "+t.receiverCount))};var TW=oe(ve()),uR=oe(ve());var zv=({card:r,onClick:e,onClickWithNoUrl:t,onClickWithShare:n,closedWindowCallback:o})=&gt;{let i=(0,uR.useRef)(null),s=()=&gt;{r.content.uri?(i.current=Sw(r.content.uri),n==null||n()):t==null||t(),e==null||e()};return(0,uR.useEffect)(()=&gt;{let a=setInterval(()=&gt;{var l;(l=i.current)!=null&amp;&amp;l.closed&amp;&amp;(o==null||o(),clearInterval(a))},500);return()=&gt;{clearInterval(a)}},[i.current]),TW.default.createElement("div",{className:"editorButton editorHeaderItem mapWebButton",role:"button",onClick:s},TW.default.createElement("div",{className:"editorButtonIcon webButtonIcon"}))};var ice=({store:r,card:e,focusingCard:t,editorStore:n,drawToolDispatcher:o,textActionDispatcher:i,editorHeaderDispatcher:s,getEditorRenderer:a,opacity:l,playManager:u,onBack:d})=&gt;{let[c,p]=gs({store:r,initialState:!1}),h=on(r);(0,Hr.useEffect)(()=&gt;{n.moveMode&amp;&amp;(p(!1),n.setAddCardDialogOpen(!1))},[n.moveMode]);let f=()=&gt;{r.reduce(ti(),ho()),n.setTool(0),n.setAddCardDialogOpen(!0),u.pause(n)},m=()=&gt;{n.setAddCardDialogOpen(!1)},g=()=&gt;{let{selectedTool:Q}=n;Q==3&amp;&amp;n.setTool(0),r.reduce(Ar(!1),hn(void 0)),p(!0),u.pause(n)},v=()=&gt;{p(!1)},b=!!r.screenSharingState,C=()=&gt;{s.onTextButtonClicked()},x=Q=&gt;{let j=a==null?void 0:a().getFullScreenSharingState();!j||Ox(r,j,Q)},y=n.selectedTool,S=!h&amp;&amp;Ov({screen:r.screen,isScreenSharing:b,isFingerMode:y===0,isFocusWebCard:t instanceof Vo}),T=S?y!==0:!0,w=S?y!==2:!0,k=S?y!==3:!0,A=S?y!==1:!0;b&amp;&amp;!(a!=null&amp;&amp;a().screenSharingRootCards(e))&amp;&amp;(A=!1);let I=y===2,[E,O]=(0,Hr.useState)(!1);return jn(()=&gt;O(!0)),Hr.default.createElement(Ba,{in:n.toolVisible,unmountOnExit:!1},Hr.default.createElement("div",{className:"editorHeader fade",style:{opacity:l&lt;1?l:void 0,display:n.toolVisible?"block":"none"}},!n.narrationRecording&amp;&amp;Hr.default.createElement("div",{className:"editorHeaderMultiInner"},Hr.default.createElement("div",{className:"editorHeaderInner"},Hr.default.createElement("div",{className:"editorHeaderButtonGroupGrid"},Hr.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},Hr.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Hr.default.createElement("div",{className:"editorButton",role:"button",onClick:()=&gt;d(!1)},Hr.default.createElement("div",{className:"editorButtonIcon backButtonIcon"}))),!h&amp;&amp;!b&amp;&amp;Hr.default.createElement("div",{className:"editorSquareButtonWrapper editorHeaderSquareItem"},Hr.default.createElement("div",{className:"editorSquareButton",role:"button",onClick:f},Hr.default.createElement("div",{className:"editorSvgButtonIcon plusButtonIcon"})),Hr.default.createElement(xt,{open:n.addCardDialogOpen,onClose:m},Hr.default.createElement(Ode,{store:r,editorStore:n,onClose:m})))),Hr.default.createElement("div",{className:"editorHeaderButtonGroup"},T&amp;&amp;Hr.default.createElement(Uv,{editorStore:n,animateAppear:!1}),!h&amp;&amp;A&amp;&amp;Hr.default.createElement(Zf,{store:r,editorStore:n,forDocument:!1,drawToolDispatcher:o,animateAppear:!1}),r.screenSharingForSelf&amp;&amp;e instanceof Vo&amp;&amp;e.content.uri&amp;&amp;Hr.default.createElement(zv,{card:e,onClick:()=&gt;u.pause(n),onClickWithShare:()=&gt;x(e.content.uri),closedWindowCallback:()=&gt;x(void 0)}),!b&amp;&amp;Hr.default.createElement(Hr.default.Fragment,null,!h&amp;&amp;w&amp;&amp;Hr.default.createElement(bW,{card:e,focusingCard:t,editorStore:n,textActionDispatcher:i,onClick:C,animateAppear:!1}),!h&amp;&amp;k&amp;&amp;Hr.default.createElement(wW,{card:e,editorStore:n,playManager:u}),t instanceof Vo&amp;&amp;Hr.default.createElement(zv,{card:t,onClick:()=&gt;u.pause(n),onClickWithNoUrl:()=&gt;{xw(r.isWebCardExtensionInstalled),h||n.setAddUrlDialogOpen(!0)}}),!h&amp;&amp;Hr.default.createElement(oce,{store:r,editorStore:n,card:t,playManager:u}))),Hr.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},Hr.default.createElement("div",{className:"flexSpacer"}),!b&amp;&amp;Hr.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Hr.default.createElement(Kr,{className:"editorButton",role:"button",onClick:g},Hr.default.createElement("div",{className:"editorButtonIcon othersButtonIcon"})),Hr.default.createElement(xt,{open:c,onClose:v,textEditing:I},Hr.default.createElement(Ude,{store:r,editorStore:n,card:e,focusingCard:t,onClose:v}))),r.screenSharingState&amp;&amp;Hr.default.createElement(rm,{store:r,sharingState:r.screenSharingState}),Hr.default.createElement(bP,{store:r,editorStore:n,card:e,authorId:r.userInfo.user_id,anonymous:!1,editorRendererState:()=&gt;a==null?void 0:a().getFullScreenSharingState(),playManager:u})))),S&amp;&amp;Hr.default.createElement("div",{className:"editorHeaderInner"},Hr.default.createElement("div",{className:"editorHeaderButtonGroup"},y===0&amp;&amp;Hr.default.createElement(Uv,{editorStore:n,animateAppear:E}),y===1&amp;&amp;Hr.default.createElement(Zf,{store:r,editorStore:n,forDocument:!1,drawToolDispatcher:o,animateAppear:E}),y===2&amp;&amp;Hr.default.createElement(bW,{card:e,focusingCard:t,editorStore:n,textActionDispatcher:i,onClick:C,animateAppear:E}),y===3&amp;&amp;Hr.default.createElement(wW,{card:e,editorStore:n,playManager:u})))),Hr.default.createElement(tce,{card:e,store:r,editorStore:n,playManager:u})))};var xo=oe(ve());function DW(r,e,t){let n={cardId:t.cardId};return t.hAlignment&amp;&amp;(n.hAlignment=r.h_alignment),t.vAlignment&amp;&amp;(n.vAlignment=r.v_alignment),t.vertical!==void 0&amp;&amp;(n.vertical=r.vertical),t.string&amp;&amp;(n.string=new fn({text:r.text,attributes:r.attributes,attribute_ranges:r.attribute_ranges})),t.foreColor&amp;&amp;(n.foreColor=r.forecolor),t.fontSize&amp;&amp;(n.fontSize=r.font_size),{replacement:n,selection:e}}function BP(r){let e={};if(r.hAlignment&amp;&amp;(e["gadgets.title.h_alignment"]=r.hAlignment),r.vAlignment&amp;&amp;(e["gadgets.title.v_alignment"]=r.vAlignment),r.vertical!==void 0&amp;&amp;(e["gadgets.title.vertical"]=r.vertical),r.string){let{text:t,attributes:n,attribute_ranges:o}=r.string.pack();e["gadgets.title.text"]=t,e["gadgets.title.attributes"]=n,e["gadgets.title.attribute_ranges"]=o}return r.foreColor&amp;&amp;(e["gadgets.title.forecolor"]=r.foreColor),r.fontSize&amp;&amp;(e["gadgets.title.font_size"]=r.fontSize),On(r.cardId,e)}var dR=class{constructor(){this._undo=[];this._redo=[]}push(e,t,n){let o=DW(e,t,n);return this._undo.push(o),this._redo=[],BP(n)}get canUndo(){return this._undo.length&gt;0}get canRedo(){return this._redo.length&gt;0}undo({currentTitle:e,currentSelection:t}){if(!this.canUndo)return;let n=this._undo.pop(),o=DW(e,t,n.replacement);return this._redo.push(o),{command:BP(n.replacement),selection:n.selection}}redo({currentTitle:e,currentSelection:t}){if(!this.canRedo)return;let n=this._redo.pop(),o=DW(e,t,n.replacement);return this._undo.push(o),{command:BP(n.replacement),selection:n.selection}}};var Zi=oe(ve()),cR=oe(ve());var kW=oe(ve());var sce=({duration:r,editorStore:e})=&gt;{let{avSeekTime:t}=e,n=it(t/r*100,0,100);return kW.default.createElement("div",{className:"editorFooterTextToolAvProgressBar"},kW.default.createElement("div",{className:"editorFooterTextToolAvProgressBarIndicator",style:{width:`${n}%`}}))};var ace={color:r=&gt;{let e;isNaN(r)?e=0:e=r;let t=it(Math.round(8/3*e*255),0,255),n=it(Math.round((8/3*e-1)*255),0,255),o=it(Math.round((4*e-3)*255),0,255);return{r:t,g:n,b:o,a:255}}};var lce=({rootCard:r,focusingCard:e,store:t,editorStore:n,playManager:o})=&gt;{var x;let i=e.gadgets.title,{avSpeedScale:s,slideshowPlaying:a,typingAttributes:l,zoom:u}=n;if(!i||!l)return null;let[d,c]=(0,cR.useState)(!1),p=()=&gt;{o.togglePlayPause(n,r)},h=()=&gt;{o.beginRewind(n,r),o.endRewind(n)},f=(y,S)=&gt;{S==="down"&amp;&amp;o.beginSpeedScaling(n),n.setAvSpeedScale(y),S==="up"&amp;&amp;o.endSpeedScaling(n),We(On(r.id,{"metadata.playback_rate":y}))},m=fv(r),g=(0,cR.useMemo)(()=&gt;{var S;let y=(S=e.gadgets.title)==null?void 0:S.text;return y?Up(y):0},[(x=e.gadgets.title)==null?void 0:x.text]),v=nn(ZBe(g)),b=(u-Math.SQRT1_2)/(1-Math.SQRT1_2),C=it(1-b,0,1);return Zi.default.createElement(Ba,{in:n.toolVisible},Zi.default.createElement("div",{className:"editorFooterTextTool fade",style:{top:t.screen.height}},Zi.default.createElement("div",{className:"editorFooterTextToolTrashBoxWrapper"},Zi.default.createElement("div",{className:"editorTrashBox"},Zi.default.createElement(ww,{disappearProgress:C,store:t,type:"editorTrashBox"}))),m&amp;&amp;Zi.default.createElement(sce,{duration:r.duration,editorStore:n}),Zi.default.createElement("div",{className:"editorFooterTextToolAvButtonsContainer"},(r.hasConnectedCardOrGroup||m)&amp;&amp;Zi.default.createElement(Zi.default.Fragment,null,Zi.default.createElement(Kr,{onClick:p,className:"editorButton editorFooterItem","data-disabled":!n.avReady},a?Zi.default.createElement("div",{className:"editorButtonIcon pauseButtonIcon"}):Zi.default.createElement("div",{className:"editorButtonIcon playButtonIcon"})),Zi.default.createElement(Kr,{className:"editorButton editorFooterItem",onClick:h,"data-disabled":!n.avReady},Zi.default.createElement("div",{className:"editorButtonIcon rewindButtonIcon"}))),m&amp;&amp;Zi.default.createElement("div",{className:"editorButton editorFooterItem"},Zi.default.createElement("div",{className:"relative"},Zi.default.createElement(Kr,{className:"editorButtonIcon editorAvSpeedScaleButtonIcon",onClick:()=&gt;c(!0),"data-disabled":!n.avReady},oW(s)),Zi.default.createElement(xt,{open:d,onClose:()=&gt;c(!1),anchor:"topCenter"},Zi.default.createElement(kw,{onChange:f,speedScale:n.avSpeedScale}))))),g&gt;0&amp;&amp;Zi.default.createElement("div",{className:"editorFooterTextToolTextLengthLabel",style:{color:v.toCSSRGBA()}},g)))};function ZBe(r){let e=dv-dv/10;if(r&lt;e)return cn();let t=it((r-e)/(dv-e),0,1),n=3/8,o=(1-t)*(1-n)+n;return ace.color(o)}var PW=oe(mz());var pR=class{constructor(e){this.changed=e;this.onResize=uce(this.changed,!0);this.onRotate=uce(this.changed,!1);let t=window.visualViewport;t&amp;&amp;t.addEventListener("resize",this.onResize),window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onRotate)}close(){let e=window.visualViewport;e&amp;&amp;e.removeEventListener("resize",this.onResize),window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onRotate)}};function hR(r){let e=r.innerHeight,t=r.visualViewport;t&amp;&amp;(e=Math.floor(t.height));let n=r.innerHeight-e;return PW.default.product==="iPad"&amp;&amp;PW.default.name==="Chrome Mobile"&amp;&amp;n&gt;0&amp;&amp;(n+=44),n}function uce(r,e){let t=Do();return()=&gt;{let n=hR(window);fe.log("createOnResize keyboardHeight:"+n);let o=$e(window.innerWidth,window.innerHeight);e?t(()=&gt;r(o,n),100):r(o,n)}}var mC=class{get copied(){return this.copiedText!==void 0}copy(e,t){let n=of({card:e,clipLocalFontSize:1});this.copiedText=mC.scaleAttributedString(t,n)}paste(e){if(!this.copiedText)return;let t=jM({card:e,universalFontSize:1});return mC.scaleAttributedString(this.copiedText,t)}static scaleAttributedString(e,t){let n=e.clone();return n.attributes.forEach(o=&gt;{if(o.type==="font"){let i=o;i.value.size=i.value.size*t}else if(o.type==="paragraph_style"){let i=o;i.value.line_spacing=i.value.line_spacing*t}}),n}};var Iw=class{constructor(e,t,n){this.vertical=e;this.horizontalAlignment=t;this.verticalAlignment=n}toggleVertical(){let e=tRe(this.verticalAlignment,this.vertical),t=eRe(this.horizontalAlignment,this.vertical);return new Iw(!this.vertical,e,t)}};function eRe(r,e){if(e)switch(r){case"center":return"middle";case"left":return"bottom";case"right":return"top"}else switch(r){case"center":return"middle";case"left":return"top";case"right":return"bottom"}}function tRe(r,e){if(e)switch(r){case"middle":return"center";case"top":return"left";case"bottom":return"right"}else switch(r){case"middle":return"center";case"top":return"right";case"bottom":return"left"}}var AW=class{constructor(e,t){this.frame=e;this.scale=t}get size(){return Nt(this.frame.size,this.scale)}closestPosition(e){let t=Bs(e,1/this.scale);return this.frame.closestPosition(t)}position({from:e,direction:t,offset:n}){return this.frame.position({from:e,direction:t,offset:n})}hitTest(e){let t=Bs(e,1/this.scale);return this.frame.hitTest(t)}get vertical(){return this.frame.vertical}cursorAt(e){let t=this.frame.cursorAt(e);if(t!==void 0)return Lh(t,this.scale)}textRects(e){return this.frame.textRects(e).map(t=&gt;Lh(t,this.scale))}},fR={delay:350,unit:1},dce=An(16),LP=class extends xo.default.Component{constructor(t){super(t);this.textInput=xo.default.createRef();this.caret=xo.default.createRef();this.caretInner=xo.default.createRef();this.textCopy=new mC;this.histories=new Map;this.focusOwner="editor";this.softwareKeyboardUsed=void 0;this.showPopoverTimer=mg();this.changeColor=t=&gt;{this.processor.changeColor(t)};this.toggleBoldface=()=&gt;{this.processor.toggleBoldface()};this.changeListStyle=()=&gt;{this.processor.changeListStyle()};this.presentPopover=()=&gt;{if(this.state.currentModal==="popover_menu")return;let{begin:t,end:n}=this.processor.selectedRange,o=t!==n;this.setState({currentModal:"popover_menu",enableCopyMenu:o})};this.dismissPopover=()=&gt;{this.showPopoverTimer.clear(),this.state.currentModal!==void 0&amp;&amp;this.setState({currentModal:void 0})};this.copyMenuClicked=()=&gt;{this.emitCopyEvent(),this.dismissPopover()};this.cutMenuClicked=()=&gt;{this.cutSelectedText(),this.dismissPopover()};this.pasteMenuClicked=()=&gt;{let t=he.get().strings;if(cce())this.promiseReadClipboard().then(n=&gt;{this.pasteText(n)}).catch(()=&gt;{let n=34;this.props.store.reduce(me(n,{title:t.accessNotPermitted,message:t.giveClipboardAccess,okMessage:t.okay,onOk:()=&gt;{this.props.store.reduce(me(n,void 0))}}))});else if(this.textCopy.copied){let n=this.textCopy.paste(this.props.card);n&amp;&amp;this.processor.insert(n)}this.dismissPopover()};this.selectMenuClicked=()=&gt;{let{begin:t,end:n}=this.processor.selectedRange;if(t===n){let o=c8(this.processor.text.text,t);this.processor.updateSelectedRange({begin:{location:o.begin,affinity:"forward"},end:{location:o.end,affinity:"backward"},needsDismissPopover:!1}),this.setState({enableCopyMenu:o.begin!==o.end})}};this.selectAllMenuClicked=()=&gt;{let t=this.processor.text.length,n={location:0,affinity:"backward"},o={location:t,affinity:"forward"};this.processor.updateSelectedRange({begin:n,end:o,needsDismissPopover:!1}),this.setState({enableCopyMenu:n.location!==o.location})};this.handlePasteEvent=async t=&gt;{if(t.clipboardData){let n=this.props.store,o=Nr(n,n.userInfo.user_id),i=await Dx(t.clipboardData,o);typeof i=="string"?this.pasteText(i):i&amp;&amp;lv({store:n,data:i})}else{let n=this.textCopy.paste(this.props.card);n&amp;&amp;this.processor.insert(n)}};this.lineHeightMenuClicked=()=&gt;{this.setState({currentModal:"line_height"})};this.colorMenuClicked=()=&gt;{this.setState({currentModal:"color"})};this.sizeMenuClicked=()=&gt;{this.setState({currentModal:"size"})};this.duplicateCardMenuClicked=()=&gt;{let t=this.props.card.isFolded?"group":"single";At(new Xu(this.props.card.id,t,!1)),this.dismissPopover()};this.deleteCardClicked=()=&gt;{let t=this.props.card,n=_c(t,t.isFolded);!confirm(n)||(this.dismissPopover(),t.isFolded?We(bp(t.id)):We(du(t.id)),this.props.editorStore.setTool(0))};this.dismissLineHeightDialog=()=&gt;{this.dismissPopover()};this.changeLineHeightMultiple=t=&gt;{let n=Ot.regularFont.get(),o=Ot.boldFont.get();!n||!o||this.processor.changeLineSpacing(t,{regular:n,bold:o})};this.pinCardClicked=()=&gt;{let t=this.props.card.id,n=!this.props.card.pinned;We(cu(t,n)),this.forceUpdate(),this.dismissPopover()};this.handleCopyEvent=t=&gt;{let o=this.props.card.gadgets.title;if(!o)return;let i=fn.fromTitleGadget(o),{begin:s,end:a}=this.processor.selectedRange,l=i.substr({location:s,length:a-s});this.textCopy.copy(this.props.card,l),t.clipboardData.setData("text/plain",l.text)};this.handleKeyPress=t=&gt;{this.processor.consumeKeyPress(t)&amp;&amp;t.preventDefault()};this.handleInput=t=&gt;{this.processor.consumeInput(t)};this.handleKeyDown=t=&gt;{let o=this.props.card.gadgets.title;if(!o||!this.textInput.current||this.composingCardId!==void 0)return;if(this.processor.consumeKeyDown(t)){t.preventDefault();return}let s=aF(),a=s&amp;&amp;t.metaKey||!s&amp;&amp;t.ctrlKey,l=(u,d)=&gt;{this.showPopoverTimer.clear(),u!==d&amp;&amp;this.showPopoverTimer.set(()=&gt;this.presentPopover(),350)};if(s&amp;&amp;t.key.toLowerCase()==="a"&amp;&amp;t.ctrlKey||t.key==="Home"){let u=this.textFrame;if(u===void 0)return;let d=this.currentCaretRect;if(d===void 0)return;let c;u.vertical?c=De(d.x+d.width/2,0):c=De(0,d.y+d.height/2);let p=u.closestPosition(c);if(p===void 0)return;let h=t.shiftKey?this.processor.selectionBegin:p;this.processor.updateSelectedRange({begin:h,end:p}),t.shiftKey&amp;&amp;l(h.location,p.location)}else if(s&amp;&amp;t.key.toLowerCase()==="e"&amp;&amp;t.ctrlKey||t.key==="End"){let u=this.textFrame;if(u===void 0)return;let d=this.currentCaretRect;if(d===void 0)return;let c;u.vertical?c=De(d.x+d.width/2,u.size.height):c=De(u.size.width,d.y+d.height/2);let p=u.closestPosition(c);if(p===void 0)return;let h=t.shiftKey?this.processor.selectionBegin:p;this.processor.updateSelectedRange({begin:h,end:p}),t.shiftKey&amp;&amp;l(h.location,p.location)}else if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(t.key)&gt;=0){let u=this.textFrame;if(u===void 0)return;let d;t.key==="ArrowLeft"?d="left":t.key==="ArrowRight"?d="right":t.key==="ArrowUp"?d="up":d="down";let c=u.position({from:this.processor.selectionEnd.location,direction:d,offset:1});if(c===void 0)return;if(t.shiftKey){let p=this.processor.selectionBegin,h=c;this.processor.updateSelectedRange({begin:p,end:h}),l(p.location,h.location)}else this.processor.updateSelectedRange({begin:c})}else if(t.key==="a"&amp;&amp;a){t.preventDefault();let u=an(0,"backward"),d=an(o.text.length,"forward");this.processor.updateSelectedRange({begin:u,end:d}),l(u.location,d.location)}else if(t.key==="x"&amp;&amp;a){if(t.preventDefault(),this.processor.selectionBegin.location===this.processor.selectionEnd.location)return;this.cutSelectedText()}else t.key==="c"&amp;&amp;a?this.emitCopyEvent():t.key==="Escape"?this.dismissPopover():t.key.toLowerCase()==="z"&amp;&amp;a&amp;&amp;t.shiftKey?(t.preventDefault(),this.redo()):t.key==="z"&amp;&amp;a&amp;&amp;(t.preventDefault(),this.undo())};this.handleCompositionEnd=t=&gt;{this.props.card.id===this.composingCardId&amp;&amp;this.processor.handleCompositionEnd(t),this.composingCardId=void 0};this.handleCompositionStart=t=&gt;{this.composingCardId=this.props.card.id;let{begin:n}=this.processor.selectedRange,o=n-this.textInput.current.selectionStart;this.processor.handleCompositionStart(o)};this.fontSizeInputWillFocus=()=&gt;{this.focusOwner="fontSizeDialog"};this.fontSizeInputDidBlurred=()=&gt;{var t;this.focusOwner="editor",(t=this.textInput.current)==null||t.focus()};this.fontSizeDidChanged=(t,n)=&gt;{let o=jM({card:this.props.card,universalFontSize:t});this.changeTextSize(o,n)};this.handleFocus=()=&gt;{if(this.softwareKeyboardUsed===void 0){if(hR(window)&gt;0){this.softwareKeyboardUsed=!0;return}setTimeout(()=&gt;{let t=hR(window);this.softwareKeyboardUsed=t&gt;0||this.softwareKeyboardUsed===!0,this.updateTextInputBounds()},900)}};this.handleBlur=()=&gt;{this.active&amp;&amp;this.focusOwner==="editor"&amp;&amp;this.props.callback.onTextBlur()};this.handleContextMenu=t=&gt;{t.preventDefault(),this.focus()};this._textSelecting=!1;this.onSelectionChanged=({needsDismissPopover:t})=&gt;{this.updateTextInputBounds();let{selectedRange:n,compositionRange:o}=this.processor,{begin:i,end:s}=n,a=this.currentCaretRect;if(!a)return;let l=pce(a,De(this.bounds.x,this.bounds.y));if(i===s)this.props.callback.onTextSelectionChange({caretRect:l});else{let u={location:i,length:s-i};this.props.callback.onTextSelectionChange({caretRect:l,selectionRange:u,compositionRange:o})}t&amp;&amp;this.dismissPopover()};this.onCursorTypingAttributesChanged=t=&gt;{let n=this.caret.current;n&amp;&amp;(n.style.backgroundColor=t.color.toRGBAHex()),this.props.callback.onTypingAttributeChange(t)};this.onTextChanged=({committed:t,needsDismissPopover:n})=&gt;{let{text:o,selectionBegin:i,selectionEnd:s}=this.processor,{foreColor:a,fontSize:l}=this.processor.gadgetTypingAttribute,{card:u,callback:d}=this.props,c={cardId:u.id,string:o,foreColor:a,fontSize:l};if(t){let h=this.history(u.id),f=h.push(this.committed,{begin:i,end:s},c);We(f),d.onTextUndoHistoryChange({canUndo:h.canUndo,canRedo:h.canRedo}),this.committed=RP(u.gadgets.title)}else{let h=BP(c);We(h)}Kt(u,fo).updateTextFrameIfNeeded(),this.updateTextInputBounds(),n&amp;&amp;this.dismissPopover()};this.onCompositionTextChanged=t=&gt;{t===void 0&amp;&amp;(this.textInput.current.value="")};this.processor=new TM,this.processor.onSelectionChanged=this.onSelectionChanged,this.processor.onCursorTypingAttributesChanged=this.onCursorTypingAttributesChanged,this.processor.onTextChanged=this.onTextChanged,this.processor.onCompositionTextChanged=this.onCompositionTextChanged,this.state={currentModal:void 0,enableCopyMenu:!1},this.committed=RP(t.card.gadgets.title)}initialize(){this.histories.clear(),this.reset()}reset(){this.dismissPopover(),this.processor.updateSelectedRange({begin:an(0)}),this.composingCardId&amp;&amp;this.terminateActiveComposition(this.composingCardId),this.updateTextInputBounds()}componentDidMount(){let t=this.textInput.current;t&amp;&amp;(t.addEventListener("keypress",this.handleKeyPress),t.addEventListener("input",this.handleInput),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("compositionend",this.handleCompositionEnd),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("focus",this.handleFocus),t.addEventListener("blur",this.handleBlur),t.addEventListener("copy",this.handleCopyEvent),t.addEventListener("paste",this.handlePasteEvent)),window.addEventListener("contextmenu",this.handleContextMenu);let n=this.props.card.gadgets.title;if(n){let s=an(n.text.length);this.processor.updateSelectedRange({begin:s})}let{canUndo:o,canRedo:i}=this.history(this.props.card.id);this.props.callback.onTextUndoHistoryChange({canUndo:o,canRedo:i}),this.props.callback.onTypingAttributeChange(this.processor.cursorTypingAttributes)}componentWillUnmount(){let t=this.textInput.current;t&amp;&amp;(t.removeEventListener("keypress",this.handleKeyPress),t.removeEventListener("input",this.handleInput),t.removeEventListener("keydown",this.handleKeyDown),t.removeEventListener("compositionstart",this.handleCompositionStart),t.removeEventListener("compositionend",this.handleCompositionEnd),t.removeEventListener("focus",this.handleFocus),t.removeEventListener("blur",this.handleBlur),t.removeEventListener("copy",this.handleCopyEvent),t.removeEventListener("paste",this.handlePasteEvent)),window.removeEventListener("contextmenu",this.handleContextMenu)}componentDidUpdate(t,n,o){let i=this.textInput.current,{card:s,callback:a,store:l}=this.props;if(t.card.id!==s.id){let{canUndo:u,canRedo:d}=this.history(s.id);a.onTextUndoHistoryChange({canUndo:u,canRedo:d}),this.composingCardId&amp;&amp;this.terminateActiveComposition(t.card.id),this.committed=RP(s.gadgets.title)}this.setNextCaretPointToCaret(t.editorStore),l.screen.keyboardHeight&gt;0&amp;&amp;(this.softwareKeyboardUsed=!0),mf()&amp;&amp;this.active&amp;&amp;this.focusOwner==="editor"&amp;&amp;(i==null||i.focus()),this.updateTextFrameIfNeeded(),this.state.currentModal===void 0&amp;&amp;(this.popoverAnchorBounds=void 0)}setNextCaretPointToCaret(t){let n=t.nextCaretPoint,o=this.props.editorStore.nextCaretPoint;!o||(!n||n&amp;&amp;!ec(n,o))&amp;&amp;this.moveCaretTo(o)}terminateActiveComposition(t){let n=this.textInput.current;Ee(n);let o={cardId:t,string:this.processor.text},i=this.history(t),s={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},a=i.push(this.committed,s,o);We(a),n.removeEventListener("blur",this.handleBlur),n.blur(),n.value="",n.focus(),n.addEventListener("blur",this.handleBlur),this.composingCardId=void 0}get bounds(){return this.props.delegate.renderRect()}get active(){let{card:t,editorStore:n,store:o}=this.props;return t.gadgets.title?n.selectedTool===2&amp;&amp;!el(o):!1}updateTextFrameIfNeeded(){let t=this.props.card,n=t.gadgets.title;if(!n)return;this.processor.updateText(n),Kt(t,fo).updateTextFrameIfNeeded(),this.updateTextInputBounds()}render(){var c;let t=this.textFrame,n=this.state.currentModal==="popover_menu",o=qe(),{begin:i,end:s}=this.processor.selectedRange;if(this.caret.current){let p=Vu(sa(this.caret.current.getBoundingClientRect()),dce);o.x=p.x+p.width*.5,o.y=p.y,o.width=0,o.height=p.height}if(i!==s&amp;&amp;t){let p=new ri;if(t.textRects({location:i,length:s-i}).forEach(h=&gt;p.add(h)),p.rect){let h=Vu(p.rect,dce),{x:f,y:m}=this.bounds;o.x=f+h.x,o.y=m+h.y,o.width=h.width,o.height=h.height}}let a=nRe(o);n&amp;&amp;this.popoverAnchorBounds===void 0&amp;&amp;(this.popoverAnchorBounds=o);let{fontSize:l}=this.props.editorStore.typingAttributes,u=of({card:this.props.card,clipLocalFontSize:l}),d=this.popoverMenuItems;return xo.default.createElement("div",{className:"textInputContainer",style:{display:this.active?"block":"none"}},xo.default.createElement("div",{ref:this.caret,className:"textCaret"},xo.default.createElement("div",{ref:this.caretInner,className:"textCaretInner"})),xo.default.createElement(tr,{open:this.state.currentModal==="popover_menu",onClose:this.dismissPopover,textEditing:!0},xo.default.createElement(kf,{anchor:"topCenter",roundEdge:!0,getParentBounds:()=&gt;{var p;return(p=this.popoverAnchorBounds)!=null?p:o},arrowColor:"#faecba"},xo.default.createElement(tB,{menuItems:d,screen:this.props.store.screen,onDismiss:this.dismissPopover,menuClassName:"popoverMenuEditorText",itemClassName:"popoverMenuEditorTextItem",isMobile:this.props.store.screen.isMobile}))),xo.default.createElement(FP,{open:this.state.currentModal==="line_height",onClose:this.dismissLineHeightDialog,popoverAnchor:a,getParentBounds:()=&gt;{var p;return(p=this.popoverAnchorBounds)!=null?p:o},shadow:!0},xo.default.createElement(sR,{current:(c=this.processor.cursorTypingAttributes.lineHeightMultiple)!=null?c:1,onClick:this.changeLineHeightMultiple})),xo.default.createElement(FP,{open:this.state.currentModal==="color",onClose:this.dismissPopover,popoverAnchor:a,getParentBounds:()=&gt;{var p;return(p=this.popoverAnchorBounds)!=null?p:o},shadow:!0},xo.default.createElement(oR,{onClick:this.changeColor})),xo.default.createElement(Qde,{card:this.props.rootCard,focusingCard:this.props.card,open:this.state.currentModal==="size",onClose:this.dismissPopover,popoverAnchor:a,getParentBounds:()=&gt;{var p;return(p=this.popoverAnchorBounds)!=null?p:o},universalTextSize:u,textActionDispatcher:this,screen:this.props.store.screen}),xo.default.createElement("textarea",{ref:this.textInput,className:"textInput",spellCheck:!1,autoCapitalize:"none"}),this.props.editorStore.selectedTool===2&amp;&amp;xo.default.createElement(lce,{rootCard:this.props.rootCard,focusingCard:this.props.card,store:this.props.store,editorStore:this.props.editorStore,playManager:this.props.playManager}))}focus(){var t;this.focusOwner="editor",(t=this.textInput.current)==null||t.focus(),this.props.callback.onTextSelectionChange({caretRect:this.currentCaretRect})}blur(){var t;this.dismissPopover(),this.processor.updateSelectedRange({begin:this.processor.selectionEnd}),(t=this.textInput.current)==null||t.blur()}undo(){let t=this.props.card;if(!t.gadgets.title)return;this.composingCardId&amp;&amp;this.terminateActiveComposition(t.id);let n=this.history(t.id),o={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i=n.undo({currentTitle:t.gadgets.title,currentSelection:o});if(!i)return;We(i.command);let s=t.gadgets.title.text.length,{begin:a,end:l}=i.selection;this.processor.updateSelectedRange({begin:an(it(a.location,0,s),a.affinity),end:an(it(l.location,0,s),l.affinity)}),this.props.callback.onTextUndoHistoryChange({canUndo:n.canUndo,canRedo:n.canRedo}),this.committed=RP(t.gadgets.title)}redo(){let t=this.props.card;if(!t.gadgets.title)return;this.composingCardId&amp;&amp;this.terminateActiveComposition(t.id);let n=this.history(t.id),o={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i=n.redo({currentTitle:t.gadgets.title,currentSelection:o});if(!i)return;We(i.command);let s=t.gadgets.title.text.length,{begin:a,end:l}=i.selection;this.processor.updateSelectedRange({begin:an(it(a.location,0,s),a.affinity),end:an(it(l.location,0,s),l.affinity)}),this.props.callback.onTextUndoHistoryChange({canUndo:n.canUndo,canRedo:n.canRedo}),this.committed=RP(t.gadgets.title)}toggleVertical(){let t=this.props.card,n=t.gadgets.title;if(!n)return;let o=this.history(t.id),i={begin:this.processor.selectionBegin,end:this.processor.selectionEnd},a=new Iw(n.vertical,n.h_alignment,n.v_alignment).toggleVertical(),l={cardId:t.id,vertical:a.vertical,hAlignment:a.horizontalAlignment,vAlignment:a.verticalAlignment},u=o.push(n,i,l);We(u),this.props.callback.onTextUndoHistoryChange({canUndo:o.canUndo,canRedo:o.canRedo})}changeAlignment(t,n){let o=this.props.card,i={cardId:o.id,hAlignment:t,vAlignment:n},s=this.history(o.id),a=s.push(o.gadgets.title,{begin:this.processor.selectionBegin,end:this.processor.selectionEnd},i);We(a),this.props.callback.onTextUndoHistoryChange({canUndo:s.canUndo,canRedo:s.canRedo})}changeTextSize(t,n){this.processor.changeTextSize(t,n)}copyTextCard(t){this.props.callback.copyTextCard(t)}selectWord({atPointInCanvas:t,delayPopover:n=void 0}){let{textFrame:o}=this;if(!o)return;let i=this.canvasToEditorLocal(t),s=o.closestPosition(i),{begin:a,end:l}=c8(this.processor.text.text,s.location);this.processor.updateSelectedRange({begin:{location:a,affinity:"forward"},end:{location:l,affinity:"backward"}}),this.wordSelectedTime=Date.now(),n===void 0?this.presentPopover():(this.showPopoverTimer.clear(),this.showPopoverTimer.set(()=&gt;this.presentPopover(),n.delay*n.unit))}selectWordAt(t){this.selectWord({atPointInCanvas:t})}selectParagraphAt(t){let n=this.canvasToEditorLocal(t),{textFrame:o}=this;if(!o)return;let i=o.closestPosition(n),{text:s}=this.processor.text,a=Tc({text:s,location:i.location});if(!a)return;let l=a.location,u=a.location+a.length,d=s.substring(a.location,a.location+a.length);a.length&gt;0&amp;&amp;d.endsWith(`
`)&amp;&amp;(u-=1);let c={location:l,affinity:"forward"},p={location:u,affinity:"backward"};this.processor.updateSelectedRange({begin:c,end:p}),this.presentPopover()}history(t){let n=this.histories.get(t);if(n)return n;let o=new dR;return this.histories.set(t,o),o}get popoverMenuItems(){var S,T;let{pinned:t,isFolded:n}=this.props.card,o=this.props.store.desktop,i=this.props.store.editor;if(!i||!o)return[];let s=i[i.length-1].cardId,a=s===this.props.card.id,l=he.get().strings,{color:u,fontSize:d,list:c}=this.props.editorStore.typingAttributes,p=this.props.card.rootParent().getCard(s);if(!p)return[];let h=of({card:this.props.card,clipLocalFontSize:d}),f=`${Rv(h)}pt`,m=Up((T=(S=this.props.card.gadgets.title)==null?void 0:S.text)!=null?T:""),g=Ax(c,m),v=c!==g,b=[];this.state.enableCopyMenu?(b.push({title:l.cut,onClick:this.cutMenuClicked}),b.push({title:l.copy,onClick:this.copyMenuClicked})):(b.push({title:l.selection,onClick:this.selectMenuClicked}),b.push({title:l.selectAll,onClick:this.selectAllMenuClicked})),b.push({title:l.paste,onClick:this.pasteMenuClicked}),b.push({title:f,onClick:this.sizeMenuClicked},{icon:xo.default.createElement("div",{className:"popoverMenuItemIcon editorTextPopoverBold"},"B"),onClick:this.toggleBoldface},{onClick:this.colorMenuClicked,icon:xo.default.createElement(xo.default.Fragment,null,xo.default.createElement("div",{className:"editorTextPopoverTextColorLabelContainer"},xo.default.createElement("div",{className:"editorTextPopoverTextColorLabel"},"A")),xo.default.createElement("div",{className:"popoverMenuItemIcon editorTextPopoverTextColor",style:{backgroundColor:u.toCSSRGBA()}}))}),b.push({onClick:this.changeListStyle,icon:xo.default.createElement("div",{className:"popoverMenuItemIcon editorTextPopoverList","data-list":g!=null?g:"none","data-disabled":!v}),disable:!v},{onClick:this.lineHeightMenuClicked,icon:xo.default.createElement("div",{className:"popoverMenuItemIcon editorTextPopoverLineSpacing"})});let{begin:C,end:x}=this.processor.selectedRange,y=C!==x;if(!n&amp;&amp;!a&amp;&amp;!y&amp;&amp;b.push({title:t?l.release:"",onClick:this.pinCardClicked,icon:xo.default.createElement("div",{className:"popoverMenuItemIcon cardPopoverPinIcon editorTextPopoverIcon"})}),p.id!==this.props.card.id&amp;&amp;!y){let w=Array.from(this.props.card.isFolded?this.props.card.memberAndChildrenIterator():this.props.card.familyIterator()).map(A=&gt;A.id),k=Rf(this.props.store,w)===void 0;b.push({title:l.duplicate,icon:xo.default.createElement("div",{className:"popoverMenuItemIcon cardPopoverDuplicateIcon editorTextPopoverIcon"}),onClick:this.duplicateCardMenuClicked,disable:!k}),b.push({title:l.delete,titleClassName:"cardPopoverDeleteRedText",icon:xo.default.createElement("div",{className:"popoverMenuItemIcon cardPopoverDeleteRedIcon editorTextPopoverIcon"}),onClick:this.deleteCardClicked})}return b}promiseReadClipboard(){return cce()?navigator.clipboard.readText():Promise.reject()}pasteText(t){let n=Ny(t),o=this.textCopy.paste(this.props.card);if(o&amp;&amp;o.text===n)this.processor.insert(o);else{let i=this.processor.makeTypingText(n);this.processor.insert(i)}}textInputGeometry(){let t=this.bounds,n=br(t,kr(nx)),o=this.props.card,i=v8(o.contentSize,o.content.margins,n);if(!i)return;let s=t.height/n.height;return{fontScale:i,frameScale:s}}updateTextInputBounds(){let n=this.props.card.gadgets.title;if(!n)return;let o=this.textInput.current;if(!o)return;let i=this.caret.current;if(!i)return;let s=this.caretInner.current;if(!s)return;let a=Ot.regularFont.get(),l=Ot.boldFont.get();if(!a||!l)return;let u=this.textInputGeometry();if(!u)return;let{fontScale:d,frameScale:c}=u,p=d*c,h=this.bounds,f=this.currentCaretRect;if(!f)return;let m=De(h.x,h.y),g=this.softwareKeyboardUsed===!1?m.y+f.y:0;n.vertical?(o.style.left=`${m.x+f.x+f.width}px`,o.style.top=`${g}px`,o.style.width=`${f.width}px`,o.style.height=`${h.height}px`):(o.style.left=`${m.x+f.x}px`,o.style.top=`${g}px`,o.style.width=`${h.width}px`,o.style.height=`${f.height}px`);let{x:v,y:b,width:C,height:x}=pce(f,m);i.style.left=`${v}px`,i.style.top=`${b}px`,i.style.width=`${C}px`,i.style.height=`${x}px`;let y=this.processor.cursorTypingAttributes,S=y.bold?l.family:a.family;o.style.font=`${y.fontSize*p}px '${S}'`,o.style.color="transparent",s.style.backgroundColor=y.color.toRGBAHex()}setCaretVisible(t){let n=this.caret.current;!n||(n.style.visibility=t?"visible":"hidden")}emitCopyEvent(){let t=this.textInput.current;if(!t)return;let o=this.props.card.gadgets.title;if(!o)return;let{begin:i,end:s}=this.processor.selectedRange,l=fn.fromTitleGadget(o).substr({location:i,length:s-i});t.value=l.text,t.select(),this.textCopy.copy(this.props.card,l),document.execCommand("copy")}cutSelectedText(){this.emitCopyEvent(),this.processor.removeSelectedText()}handleSingle(t,n){var s,a;let o=this.textInput.current,i=this.textFrame;if(!o||!i||this.props.editorStore.selectedTool!==2)return!1;if(Cx(n))return t==="up"&amp;&amp;this.presentPopover(),!0;if(t==="down"){if(this.showPopoverTimer.clear(),this.hitTestTextBody({pointInCanvas:n}))if(uM(n.original)){let l=this.createPanCaptureToMoveCaret(!1);l.consume(t,n),this.pointerEventCapture=l}else{let l=this.canvasToEditorLocal(n),u=i.closestPosition(l),d=this.createPanCaptureToSelectText({textFrame:i,start:u,byLongPress:!1});d.consume(t,n),this.pointerEventCapture=d}else{let l=this.createPanCaptureToMoveCaret(!0);l.consume(t,n),this.pointerEventCapture=l}return!0}else if(t==="move"){let l=((s=this.pointerEventCapture)==null?void 0:s.consume(t,n))||!1;return l||(this.pointerEventCapture=void 0),l}else{let l=((a=this.pointerEventCapture)==null?void 0:a.consume(t,n))||!1;return this.pointerEventCapture=void 0,this.clearCaretBounceAnimation(),l}}handleLongPress(t){let n=this.textInput.current,o=this.textFrame;if(!n||!o||this.props.editorStore.selectedTool!==2)return;let i=this.canvasToEditorLocal(t),s=o.closestPosition(i);this.pointerEventCapture=this.createPanCaptureToSelectText({textFrame:o,start:s,byLongPress:!0}),this.clearCaretBounceAnimation();let a=this.caretInner.current;if(a){a.offsetWidth;let l=this.processor.gadgetTypingAttribute.vertical?"textCaretBounceX":"textCaretBounceY";a.classList.add(l)}}clearCaretBounceAnimation(){let t=this.caretInner.current;!t||t.classList.remove("textCaretBounceX","textCaretBounceY")}moveCaretTo(t){let n=this.textFrame;if(!n)return!1;let o=this.canvasToEditorLocal(t),i=n.closestPosition(o);if(!i)return!1;this.processor.updateSelectedRange({begin:i})}canvasToEditorLocal(t){let n=Bs(t,1/window.devicePixelRatio);return Jo(n,this.bounds)}createPanCaptureToMoveCaret(t){let n=i=&gt;{var a;return t?i.timestamp-(((a=i.down)==null?void 0:a.timestamp)||i.timestamp)&gt;50?!0:!oi(i):!1},o=this.processor.selectedRange;return new mR({changed:i=&gt;n(i)?!1:(this.moveCaretTo(i),!0),ended:i=&gt;{var u;let s=this.wordSelectedTime;if(this.wordSelectedTime=void 0,s){let d=Date.now()-s,{delay:c,unit:p}=fR;return d&lt;=c*p?(this.selectParagraphAt(i),!0):(this.moveCaretTo(i),!0)}let a=this.canvasToEditorLocal(i),l=(u=this.textFrame)==null?void 0:u.closestPosition(a);if(!l)return!1;if(o.begin===o.end&amp;&amp;o.begin===l.location&amp;&amp;oi(i)){let d=fR;this.selectWord({atPointInCanvas:i,delayPopover:d})}else this.processor.updateSelectedRange({begin:l,end:l});return!0}})}get textSelecting(){return this._textSelecting}createPanCaptureToSelectText({textFrame:t,start:n,byLongPress:o}){let{begin:i,end:s}=this.processor.selectedRange;return new mR({began:a=&gt;(this._textSelecting=!0,this.wordSelectedTime===void 0&amp;&amp;this.processor.updateSelectedRange({begin:n}),!0),changed:a=&gt;{let l=this.canvasToEditorLocal(a),u=t.closestPosition(l),{selectionBegin:d}=this.processor;return this.processor.updateSelectedRange({begin:d,end:u}),!0},ended:a=&gt;{this._textSelecting=!1;let l=this.canvasToEditorLocal(a),u=t.closestPosition(l),{selectionBegin:d}=this.processor,c=this.wordSelectedTime;if(this.wordSelectedTime=void 0,c){let p=Date.now()-c,{delay:h,unit:f}=fR;return p&lt;=h*f?(this.selectParagraphAt(a),!0):(this.processor.updateSelectedRange({begin:u,end:u}),!0)}if(o||d.location!==u.location)return this.processor.updateSelectedRange({begin:d,end:u}),this.presentPopover(),!0;if(i===s&amp;&amp;u.location===i){let p=fR;this.selectWord({atPointInCanvas:a,delayPopover:p})}return!0}})}hitTestTextBody(t){let{pointInCanvas:n}=t,o=this.canvasToEditorLocal(n);if(!this.textInput.current)return;let s=this.textFrame;if(s!==void 0&amp;&amp;s.hitTest(o))return{cursor:s.vertical?"vertical-text":"text"}}cursorRect(t){let o=this.props.card.gadgets.title;if(o==null)return;let i=Ot.regularFont.get();if(i==null)return;let s=this.textInputGeometry();if(!s)return;if(o.text.length===0){let{fontScale:l,frameScale:u}=s,d=this.bounds;return rRe({title:o,fontSizeScale:l*u,regularFont:i,textFrameSize:$e(d.width,d.height),edgeInsets:M2})}let a=this.textFrame;if(a!==void 0)return a.cursorAt(t)}get textFrame(){let{card:t}=this.props,n=this.bounds.width/t.size.width;if(isNaN(n)||!isFinite(n)||n&lt;=Number.EPSILON)return;let{textFrame:o}=Kt(t,fo);if(!!o)return new AW(o,n)}get currentCaretRect(){return this.cursorRect(this.processor.selectionEnd)}};LP.contextType=Gm;var mR=class{constructor({began:e,changed:t,ended:n}){this.began=e,this.changed=t,this.ended=n}consume(e,t){if(e==="down"){if(this.began)return this.began(t)}else if(e==="move"){if(this.changed)return this.changed(t)}else if(this.ended)return this.ended(t);return!1}};function rRe(r){let{title:e,fontSizeScale:t,regularFont:n,textFrameSize:o,edgeInsets:i}=r,s=n.font.unitsPerEm||1e3,a=1/s*e.font_size*t,l=(n.font.ascender-n.font.descender)*a,u=I_(i,t),d=0,c=0;if(e.vertical){let p=l+u.right+u.left,h=it(o.width/p,0,1),f=l*h;return e.h_alignment==="left"?d=u.left*h:e.h_alignment==="right"?d=o.width-u.right*h-f:d=o.width/2-f/2,e.v_alignment==="top"?c=u.top*h:e.v_alignment==="bottom"?c=o.height-u.bottom*h:c=o.height/2,qe(d,c,f,0)}else{let p=l+u.top+u.bottom,h=it(o.height/p,0,1),f=l*h;return e.h_alignment==="left"?d=u.left*h:e.h_alignment==="right"?d=o.width-u.right*h:d=o.width/2,e.v_alignment==="top"?c=u.top*h:e.v_alignment==="bottom"?c=o.height-u.bottom*h-f:c=o.height/2-f/2,qe(d,c,0,f)}}function cce(){var r;return typeof((r=navigator.clipboard)==null?void 0:r.readText)=="function"}function nRe(r){if(!r)return"topCenter";let e=r.y+r.height/2,t=window.innerHeight/2;return e&lt;t?"bottomCenter":"topCenter"}function RP(r){return Object.assign({},r)}function pce(r,e){let{x:n,y:o,width:i,height:s}=r;return{x:e.x+n-2/2,y:e.y+o-2/2,width:i+2,height:s+2}}var Ew=oe(Wr());function _w({store:r,drawnType:e,uploadThumb:t}){let{lnsClient:n}=ie,o=Do(),i=0,s=new Map;async function a({documentId:p,index:h,card:f,op:m,thumbs:g}){var E;let v=he.get().strings,b=Xn.forDocument(e,p,h),C=b.getLayerMetadata(),x=m.ignore_base;(C==null?void 0:C.ignore_base)===!0&amp;&amp;(x=!0);let y=((E=C==null?void 0:C.generation)!=null?E:0)+1,S=C==null?void 0:C.canvas;(!S||S.width==0&amp;&amp;S.height==0)&amp;&amp;(S=f.drawnGeometry(e).canvas);let T={version:"1.1.0.0",index:h,garbage:m.deleted.map(O=&gt;O.id),generation:y,ignore_base:x,canvas:S},w=y_(m.strokes.map(O=&gt;O.content)),k;if(e==="annotation")try{k=await n.updateDocumentAnnotation({documentId:p,index:h,document_comment:{...T,contents:w}})}catch(O){OP(r,52,(0,Ew.sprintf)(v.couldntSave,v.annotation))(O);return}else try{k=await n.updateDocumentExtension({documentId:p,index:h,document_comment:{...T,contents:w}})}catch(O){OP(r,53,(0,Ew.sprintf)(v.couldntSave,v.drawn))(O);return}let A=k.generation,I=g;if(k.generation&gt;y){fe.log(`forward generation: req=${y} res=${k.generation}`);let O=await b.updateDocumentLayer({afterGeneration:y-1});if(O.type==="error"){OP(r,e==="drawn"?53:52,(0,Ew.sprintf)(v.couldntSave,v.drawn))(O.error);return}let Q=mr.get(f),j=f.drawnGeometry(e);A=b.getLayerMetadata().generation,I=Q[e].redrawThumbnails({geometry:j,contents:b.packContents()})}else b.setLayerMetadata(T);t&amp;&amp;l(p,h,{documentId:p,index:h,generation:A,thumbs:I,card:f})}function l(p,h,f){s.set($h(p,h),f),i=o(u,3*1e3)}async function u(){let p=Array.from(s.values()).map(d);s=new Map,await Promise.all(p)}async function d(p){let h=he.get().strings,{index:f,documentId:m,generation:g,thumbs:v,card:b}=p;if(e==="annotation")try{let C=await io(v.medium,"image/png","thumb.png");await n.uploadDocumentAnnotationThumbnail({generation:g,index:f,documentId:m,data:C})}catch(C){OP(r,54,(0,Ew.sprintf)(h.couldntSave,h.annotationThumbnail))(C)}else try{let{medium:C}=e6(b),x=await io(C,"image/png","thumb.png");await n.uploadDocumentThumbnail({documentId:m,index:f,generation:g,data:x})}catch(C){OP(r,55,(0,Ew.sprintf)(h.couldntSave,h.documentThumbnail))(C)}}function c(){clearTimeout(i),u()}return{update:a,close:c}}function OP(r,e,t){return n=&gt;{if(Je.catchError(n))return;fe.error(n);let o=he.get().strings,{message:i}=ot(n,{400:a=&gt;{let l=a.asJson();return(l==null?void 0:l.error)==="generation error"?o.newerDataExistsOnServer:o.status400Msg},403:o.status403AccessDenied,404:o.status404ItemNotFound}),s={title:t,message:i,okMessage:o.back,onOk:()=&gt;r.reduce(me(e,void 0))};r.reduce(me(e,s))}}var Fw=oe(ve());var lh=({error:r,button:e})=&gt;{let t=pe();return Fw.default.createElement("div",{className:"editorLoadError"},Fw.default.createElement("div",{className:"editorLoadErrorDialog"},Fw.default.createElement("div",{className:"editorLoadErrorDialogTitle editorLoadErrorDialogChild"},t.loadingFailed),Fw.default.createElement("div",{className:"editorLoadErrorDialogMessage editorLoadErrorDialogChild"},r.message),e&amp;&amp;Fw.default.createElement("div",{className:"editorLoadErrorDialogReloadButton editorLoadErrorDialogChild",role:"button",onClick:e.onClick},e.title)))};var dl=oe(ve());var Mw=({onStartQuizAnswerTogether:r,onClose:e})=&gt;{let t=he.get().strings,n=()=&gt;{r("normal"),e()},o=()=&gt;{r("game"),e()};return dl.default.createElement("div",{className:"quizSharingModeDialog"},dl.default.createElement(rr,{round:!0},dl.default.createElement(Et,{className:"quizSharingModeDialogHeader"},dl.default.createElement(Ft,null,dl.default.createElement(Mt,null,dl.default.createElement(Gt,{className:"quizSharingModeDialogCloseButton",onClick:e},t.close)),dl.default.createElement(Vt,null,dl.default.createElement("span",{className:"quizSharingModeDialogHeaderTitle"},t.selectQuizSharingMode)))),dl.default.createElement(ur,null,dl.default.createElement("div",{className:"quizSharingModeDialogBody"},dl.default.createElement(Gt,{onClick:o,className:"quizSharingModeDialogButtonGame"},dl.default.createElement("span",null,t.quizSharingModeGame)),dl.default.createElement(Gt,{onClick:n,className:"quizSharingModeDialogButtonNormal"},dl.default.createElement("span",null,t.quizSharingModeNormal))))))};var iRe={enableRightClick:!0,enableCardEditTool:!0,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,canLeave:!0,drawnType:"drawn",shouldSyncPlayController(r,e){return e.publisher===r.userInfo.user_id&amp;&amp;r.screenSharingForSelf}},UP=class extends es.default.Component{constructor(t){super(t);this.contentSizeAnchorElement=es.default.createRef();this.textEditingTargetHistory=new GB;this.onKeyDown=t=&gt;{var l;let{selectedTool:n,addUrlDialogOpen:o,quizView:i,attendanceView:s,narrationRecording:a}=this.state.store;n===2||o||a||i!==void 0||s!==void 0||el(this.props.store)||(l=this.editorRenderer)==null||l.handleKey(t)};this.onCopy=()=&gt;{var a;let t=this.props.store,n=this.state.store;if(!av()||!aRe(t,n))return;let o=(a=t.desktop)==null?void 0:a.focusingCard;if(!o)return;let i=this.noteContext.getNote().getCardSafe(o.id);if(!i)return;let s=he.get().strings;xM(t,i).then(()=&gt;{t.reduce(Jt({type:"normal",text:s.copiedToClipboard}))}).catch(l=&gt;{let{message:u}=ot(l,{default:s.failedToCopyCards});t.reduce(Jt({type:"error",text:u}))})};this.onPaste=async t=&gt;{if(!hce(this.props.store,this.state.store)||!this.editorRenderer)return;let{clipboardData:o}=t;if(!o)return;let i=Nr(this.props.store,this.props.store.userInfo.user_id),s=await Dx(o,i);!s||lv({store:this.props.store,data:s})};this.onCommandMessage=t=&gt;{var o,i,s,a,l,u,d,c,p,h;if(on(this.props.store))return;let n=(o=this.editorRenderer)==null?void 0:o.card.id;if(t instanceof zh)this.onNoteEffect(t);else if(t instanceof oc)t.cardId===n&amp;&amp;((i=this.editorRenderer)==null||i.onTextCardDroppedInSelf(t),this.state.store.setAddCardDialogOpen(!1),this.state.store.setTool(2),(s=this.editorText.current)==null||s.reset());else if(t instanceof b0){if(t.cardId===n){let f=this.editorRenderer.createDroppedSheet(t);this.uploadSheetAsset(t.sheetType,f).then(()=&gt;{var m;(m=this.editorRenderer)==null||m.onSheetDropped(f),this.state.store.setAddCardDialogOpen(!1)})}}else if(t instanceof Qm)t.creatorCardId===n&amp;&amp;((a=this.editorRenderer)==null||a.onCardInsertedInSelf(t));else if(t instanceof A0)t.cardId===n&amp;&amp;((l=this.editorRenderer)==null||l.onWebCardInsertedFromQr(t));else if(t instanceof ip||t instanceof b1)t.cardId===n&amp;&amp;((u=this.editorRenderer)==null||u.onWebCardInserted(t));else if(t instanceof y1)t.cardId===n&amp;&amp;((d=this.editorRenderer)==null||d.onPictureCardCreateFromExtension(t));else if(t instanceof E0)t.parentCardId===n&amp;&amp;((c=this.editorRenderer)==null||c.onCardPastedInEditor(t));else if(t instanceof T0)t.creatorCardId===n&amp;&amp;this.onCapturedPhotoInserted(t);else if(t instanceof D0)t.creatorCardId===n&amp;&amp;this.onCapturedVideoInserted(t);else if(t instanceof k0)t.creatorCardId===n&amp;&amp;this.uploadSheetAsset(t.sheetType,t.card).then(()=&gt;{var f;(f=this.editorRenderer)==null||f.onCardInsertedInSelf(t)});else if(t instanceof P0)t.cardId===n&amp;&amp;((p=this.editorRenderer)==null||p.onLocalFileInserted(t));else if(t instanceof Xm){let f=this.context;if(!Kx(this.props.store,t.files))return;this.props.store.reduce(we(29,f.insertingFile)),(h=this.editorRenderer)==null||h.onLocalFilePasted(t).catch(m=&gt;{if(!(m instanceof Oh))if(m instanceof Np||m instanceof Sc){let g=m.message;m instanceof Np?g=(0,IW.sprintf)(f.unsupportedFileErrorMsg,m.type,m.extension):m instanceof Sc&amp;&amp;(g=f.unsupportedFileErrorWithoutOptMsg),this.props.store.reduce(Co(29,{title:f.couldntInsertFile,message:g,okMessage:f.back,color:"info",onOk:()=&gt;{this.props.store.reduce(Co(29,void 0))}}))}else throw m}).finally(()=&gt;{this.props.store.reduce(we(29,null))})}};this.onWebcardCreateInEditor=t=&gt;{var a;if(fe.log("onWebcardCreateInEditor"),this.state.store.narrationRecording)return;this.state.store.setTool(0),this.state.store.setAddUrlDialogOpen(!1);let n=he.get().strings;if(!this.canWebCardExtInsertEvent(this.props.store,this.state.store)){alert(n.cannotCreateWebCardFromExtension);return}let o=t.detail,i=x2(o.imageStr),s;o.url?s=new b1(this.props.card.id,o.url,(a=o.title)!=null?a:n.webCard,i):s=new y1(this.props.card.id,i),At(s)};this.onStoreChanged=t=&gt;{this.setState({store:t})};this.stopScreenSharingIfUrlChangedNotRoot=(t,n)=&gt;{var u,d,c;let o=Xt(t);if(typeof o!="number"||(u=this.editorRenderer)!=null&amp;&amp;u.screenSharingRootCards(n))return;let i=(d=this.editorRenderer)==null?void 0:d.getScreenSharingRootCard();if(!i)return;let s=this.noteContext.noteId(),a=[...i.iteratorOverGroup()].map(p=&gt;g0(o,s,p.id,t.twa)),l=(c=t.pushState)==null?void 0:c.url;a.some(p=&gt;p===window.location.pathname)&amp;&amp;(!l||a.some(p=&gt;p===l))||this.stopScreenSharing(t)};this.onCardSelected=t=&gt;{let n=this.state.store;n.selectedTool===2&amp;&amp;[...t.familyIterator()].every(i=&gt;!al(i))&amp;&amp;n.setTool(0);let o=!n.slideshowPlaying;!!this.props.store.screenSharingState&amp;&amp;this.editorRenderer&amp;&amp;o&amp;&amp;(o=this.editorRenderer.screenSharingRootCards(t)),this.props.store.reduce(nU(t.id,o))};this.onDrawnUpdate=({card:t,op:n,thumbs:o})=&gt;{var s;let{store:i}=this.props;if(i.reduce(da({state:"unsaved",cardIdList:[t.id],type:"drawn"})),this.noteContext.setDrawnSaveTimer(t.id),(s=i.screenSharingState)!=null&amp;&amp;s.fullscreen){let{document:a}=i.screenSharingState.fullscreen;this.layerUpdater.update({documentId:a,index:t.indexOverGroup(),card:t,thumbs:o,op:n})}};this.handleSingle=(t,n)=&gt;{this.pointerEventRouter.handleSingle(t,n)};this.handleDoubleMove=(t,n)=&gt;{this.pointerEventRouter.handleDoubleMove(t,n)};this.handleFreeMove=(t,n)=&gt;{let o=this.state.store.selectedTool,i=!!this.props.store.screenSharingState,s=this.props.card,a=()=&gt;{var d;return n?(d=this.editorRenderer)==null?void 0:d.getHandlingComponent():this.editorRenderer.getObjectUnderPoint(t)},l=()=&gt;{var m,g,v,b,C,x,y,S,T;if(o===1){let w="default",k=a();return((m=k==null?void 0:k.card)==null?void 0:m.id)===s.id&amp;&amp;(k==null?void 0:k.eventTarget)&amp;&amp;wc(k.eventTarget)&amp;&amp;(w=Bk(s.pinned,on(this.props.store),k.eventTarget)),w}if(i){if(n)return"grabbing";let w=(g=this.editorRenderer)==null?void 0:g.getObjectUnderPoint(t);return(w==null?void 0:w.eventTarget)==="card"||((v=w==null?void 0:w.eventTarget)==null?void 0:v.startsWith("quizButton"))||((b=w==null?void 0:w.eventTarget)==null?void 0:b.startsWith("attendanceButton"))?"pointer":"grab"}let d=this.editorText.current;if(n&amp;&amp;(d==null?void 0:d.textSelecting))return(C=this.editingCard.gadgets.title)!=null&amp;&amp;C.vertical?"vertical-text":"text";let c=a(),p=c==null?void 0:c.card,h=c==null?void 0:c.eventTarget,f=(x=p==null?void 0:p.pinned)!=null?x:s==null?void 0:s.pinned;if(h&amp;&amp;h!=="card")return n&amp;&amp;["bbLeftTop","connectorHandle","foldHandle","connection"].includes(h)?"grabbing":Bk(f,on(this.props.store),h);if(n)return"grabbing";if(o===2){if((p==null?void 0:p.id)===this.editingCard.id||!p&amp;&amp;s.id===this.editingCard.id){let w=d==null?void 0:d.hitTestTextBody({pointInCanvas:t});return(y=w==null?void 0:w.cursor)!=null?y:"grab"}return p&amp;&amp;p.gadgets.title&amp;&amp;!p.isFolded?(S=p.gadgets.title)!=null&amp;&amp;S.vertical?"vertical-text":"text":!p&amp;&amp;s.gadgets.title&amp;&amp;s.gadgets.title.text.length&gt;0?s.gadgets.title.vertical?"vertical-text":"text":"grab"}return p?!on(this.props.store)&amp;&amp;al(p)&amp;&amp;!p.isFolded?(T=p.gadgets.title)!=null&amp;&amp;T.vertical?"vertical-text":"text":"pointer":"grab"},u=this.canvas.current;u.style.cursor=l()};this.onSingle=(t,n)=&gt;{var i,s,a,l;t==="down"&amp;&amp;this.updatePointerEventTarget(n);let o=(i=this.pointerEventTarget)==null?void 0:i.handleSingle(t,n);t==="move"&amp;&amp;!o&amp;&amp;this.pointerEventTarget===this.editorText.current&amp;&amp;n.down&amp;&amp;(this.editorRenderer.handleSingle("down",n.down),this.editorRenderer.handleSingle("move",n),this.pointerEventTarget=this.editorRenderer),t==="move"&amp;&amp;this.pointerEventTarget!==this.editorText.current&amp;&amp;((s=this.editorText.current)==null||s.setCaretVisible(!1)),t==="up"&amp;&amp;(this.state.store.selectedTool===2&amp;&amp;this.focusLastEditedTextCard(),this.pointerEventTarget=void 0,(a=this.editorText.current)==null||a.setCaretVisible(!0),(l=this.editorText.current)==null||l.updateTextFrameIfNeeded())};this.onDoubleMove=(t,n)=&gt;{this.editorRenderer.handleDoubleMove(t,n)};this.onLongPress=t=&gt;{var o,i,s;let n=this.editorText.current;if(n&amp;&amp;this.state.store.selectedTool===2){let a=this.props.card,l=(o=this.editorRenderer)==null?void 0:o.getCardUnderPoint(t);if(l){if(l.id===this.editingCard.id)return n.handleLongPress(t),!0;if(l.id===a.id&amp;&amp;al(a))return this.onEditableTextCardClicked(a,t),n.handleLongPress(t),!0;if(al(l))return this.onEditableTextCardClicked(l,t),n.handleLongPress(t),!0}else if(al(a))return this.onEditableTextCardClicked(a,t),n.handleLongPress(t),!0}return(s=(i=this.editorRenderer)==null?void 0:i.handleLongPress(t))!=null?s:!1};this.onDoubleClick=t=&gt;{var l,u;let n=this.editorRenderer.handleDoubleClick(t),o=this.props.store.editor;if(!n||!this.editorRenderer||!o)return!1;let i=o[o.length-1].cardId,s=n.renderer.card,a=on(this.props.store);if(al(s))a||this.state.store.setTextToolWithCaretPoint(t);else if(s instanceof jr){let{store:d}=this.props;((l=s.content.quiz_author)==null?void 0:l.id)===String(d.userInfo.user_id)?this.state.store.setQuizView({card:s,mode:"create"}):this.state.store.setQuizView({card:s,mode:"answer"})}else if(s instanceof Vo){let d=s.content.uri;d?Sw(d):a||(xw(this.props.store.isWebCardExtensionInstalled),this.state.store.setAddUrlDialogOpen(!0))}else if(s instanceof wn)this.state.store.setAttendanceView({card:s,mode:"open"});else if(s.id===i&amp;&amp;!a){let d=window.devicePixelRatio,c=Bs(t,1/d),p=new oc({cardId:i,color:cn(),backcolor:is,position:c,unmodified:!0});this.editorRenderer.onTextCardDroppedInSelf(p),this.state.store.setTool(2),(u=this.editorText.current)==null||u.reset()}return n.renderer.handlingComponent=void 0,n!==void 0};this.onTextButtonClickedInHeader=()=&gt;{if(this.selectTextEditableCard()===void 0){let n=this.editorRenderer;if(!n)return;let o=this.props.store.screen,[i,s]=[o.width/2,o.height/2],a=new oc({cardId:this.props.card.id,color:cn(),backcolor:is,position:{x:i,y:s},unmodified:!0});n.onTextCardDroppedInSelf(a)}this.state.store.setTool(2)};this.extractQuizCard=()=&gt;{var n;let t=(n=this.editorRenderer)==null?void 0:n.card;if(t instanceof jr&amp;&amp;t.content.quiz_author!==void 0&amp;&amp;t.content.quiz_author.id!=="")return t};this.onQuizButtonClicked=t=&gt;{let n=this.state.store,o=this.extractQuizCard();if(!!o)switch(n.setTool(0),t){case 0:this.state.store.setQuizSharingModeDialogOpen(!0);break;case 1:n.setQuizView({card:o,mode:"create"});break;case 2:n.setQuizView({card:o,mode:"result"});break;case 3:n.setQuizView({card:o,mode:"answer"});break;case 4:let i=zP(o.content.preset,this.context);window.open(i);break}};this.onStartQuizAnswerTogether=t=&gt;{let{store:n}=this.props,o=this.state.store,i=this.extractQuizCard();if(!i)return;let s=this.editorRenderer;if(!s)return;o.setQuizView({card:i,mode:t==="normal"?"result":"game"});let a=s.getFullScreenSharingState();Gy({store:n,editorRendererState:a,authorId:n.userInfo.user_id,card:i,anonymous:!1,presentedQuizSharingMode:t})};this.onQuizCardFrameContainerDismiss=()=&gt;{let t=this.editorRenderer;if(!t)return;t.initQuizButtonState(),this.state.store.setQuizView(void 0);let{store:n}=this.props;if(!n.screenSharingState)return;let o=this.editorRenderer;!o||Ux(n,o.getFullScreenSharingState(),void 0)};this.onAttendanceButtonClicked=t=&gt;{let n=this.editorRenderer;if(!n)return;let o=n.card;if(!(o instanceof wn))return;let i=this.state.store,{store:s}=this.props,a=s.userInfo.is_teacher;switch(i.setTool(0),t){case 0:case 1:if(a&amp;&amp;t===1?i.setAttendanceView({card:o,mode:"teacherAnswer"}):i.setAttendanceView({card:o,mode:"open"}),s.screenSharingForSelf){let d=n.getFullScreenSharingState(),c=o.content.attendance_id;gv(s,d,c)}break;case 2:let l=this.context,u=HP(a,l);window.open(u);break}};this.onAttendanceCardFrameContainerDismiss=()=&gt;{this.state.store.setAttendanceView(void 0);let{store:t}=this.props;if(!t.screenSharingState)return;let n=this.editorRenderer;!n||gv(t,n.getFullScreenSharingState(),void 0)};this.bringChildToFront=(t,n)=&gt;{if(!this.props.store.screenSharingState)for(let i of[t,...t.parentsIterator()])this.props.card.bringChildToFront(i,i===t||n)};this.canvas=es.default.createRef(),this.editorText=es.default.createRef();let n=ih();n.subscribe(this.onStoreChanged);let{onCardInsertionCompleted:o,onCardClicked:i,onCardFullscreenButtonClicked:s,onCardLoadingStateChanged:a,...l}=this.props.cardRendererCallback;this.layerUpdater=_w({store:this.props.store,drawnType:"drawn",uploadThumb:!1}),this.cardRendererCallback={onCardInsertionCompleted:u=&gt;{this.state.store.activateTextEditor&amp;&amp;(this.props.store.reduce(Hi({id:u.id,pinned:u.pinned,favorite:u.favorite,canPin:u.canPin(),canRotate:u.canRotate(),canAlign:u.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(u.bounds)}),Ar(!1),hn(void 0)),this.state.store.setTool(2))},onCardClicked:(u,d)=&gt;{let c=this.props.store;c.screenSharingState!==void 0||on(c)?i(mv(u,this.props.card)||u,d):al(u)&amp;&amp;(u.id===this.props.card.id||!u.isFolded)?this.onEditableTextCardClicked(u,d):(this.state.store.selectedTool!==2&amp;&amp;i(mv(u,this.props.card)||u,d),this.state.store.setTool(0),this.props.store.reduce(ti()))},onCardFullscreenButtonClicked:u=&gt;{var d;(d=this.editorRenderer)==null||d.clearCardModificationMonitor(),this.state.store.setTool(0),s(mv(u,this.props.card)||u)},onCardLoadingStateChanged:(u,d,c)=&gt;{Vp(c)&amp;&amp;Op({store:this.props.store,isRoot:u.id===this.props.card.id,level:d,errors:c})},...l},this.state={store:n},this.noteContext=t.noteContext}componentDidMount(){let{store:t}=this.props,n=this.canvas.current;this.processor=new Gn(n),this.processor.onSingle=this.handleSingle,this.processor.onDoubleMove=this.handleDoubleMove,this.freeMoveProcessor=new Ha(n,{enableDragEventPropagation:!0}),this.freeMoveProcessor.onFreeMove=this.handleFreeMove,this.pointerEventRouter=new Qx(this),this.pointerEventRouter.onLongPress=this.onLongPress,this.pointerEventRouter.onSingle=this.onSingle,this.pointerEventRouter.onDoubleClick=this.onDoubleClick,this.pointerEventRouter.onDoubleMove=this.onDoubleMove;let o=this.props.store.editor.length,i=this.props.card;this.editorRenderer=new Id({canvas:n,state:{store:this.props.store,card:this.props.card,editorStore:this.state.store,screen:this.props.store.screen,viewStack:this.props.store.editor,noteMtx:this.props.noteMtx,documentLoading:!1},role:iRe,playManager:new Ed,callback:{onCardSelected:this.onCardSelected,onPop:s=&gt;this.onBack(s),onTrashBoxHit:s=&gt;{t.reduce(_1(s?"editorTrashBox":void 0))},onDrawnMarkedAsUnsaved:this.onDrawnUpdate,onEnsureDrawnGadget:s=&gt;{let a=s.drawnGeometry("drawn");We(On(s.id,{"gadgets.drawn":a}))},onZoomScroll:s=&gt;{var a,l;this.state.store.setZoom(s.a),(a=this.editorText.current)==null||a.updateTextFrameIfNeeded(),(l=this.editorText.current)==null||l.updateTextInputBounds(),this.updateDomTransform()},getCardOnNote:s=&gt;{if(!!this.props.noteRendererCallback.hasCard(s))return this.props.noteRendererCallback.getCard(s)},onQuizButtonClicked:this.onQuizButtonClicked,onAttendanceButtonClicked:this.onAttendanceButtonClicked,bringChildToFront:this.bringChildToFront,...this.cardRendererCallback},remotePointerManager:this.props.remotePointerManager,remoteStrokeBus:this.props.remoteStrokeBus}),this.subscription=ap(this.onCommandMessage),this.initialize({editorSize:o,card:i}),this.loadFontIfNeeded(i),this.editorRenderer.scheduleRender(),this.laserLayerCallback={onHandleSingle:()=&gt;{},onHandleDoubleMove:this.editorRenderer.handleDoubleMove,onHandleWheel:this.editorRenderer.handleWheel},window.addEventListener("keydown",this.onKeyDown),window.addEventListener("webcardcreate",this.onWebcardCreateInEditor),document.addEventListener("copy",this.onCopy),document.addEventListener("paste",this.onPaste),this.updateDomTransform()}updateDomTransform(){var o;let t=(o=this.editorRenderer)==null?void 0:o.getDomMatrixSet();if(!t)return;let n=this.contentSizeAnchorElement.current;!n||(n.style.transform=t.contentSize.toCSSTransform())}loadFontIfNeeded(t){(t instanceof jr||t instanceof wn)&amp;&amp;Promise.all([Ot.regularFont.getOrFetch(),Ot.boldFont.getOrFetch()]).then(()=&gt;{this.props.store.reduce(ho())})}async uploadSheetAsset(t,n){let o=await fetch(Zk(t)),i=this.context,s=a=&gt;{this.props.store.reduce(me(29,{title:i.couldntLoadFileTitle,message:a,okMessage:i.back,onOk:()=&gt;this.props.store.reduce(me(29,void 0))}))};if(o.status!==200)return s((0,IW.sprintf)(i.couldntDownloadFileErrorMsg,o.status));try{let a=new File([await o.arrayBuffer()],"file.pdf",{type:"application/pdf"}),l=[{width:n.content.page_size.width,height:n.content.page_size.height}],u=rl.fromThinkingTool(a);qi(this.props.store,{file:a,metadata:l,extension:".pdf",cardIdList:[n.id],thumbnailsGenerator:()=&gt;u.generateThumbnails()})}catch(a){fe.error(a),s(i.corruptFileErrorMsg)}}async updateWebcardUrlAndThumbnail(t,n){if(n.thumbnailFile){let o=await ki.fromFile(n.thumbnailFile),i=Zo.get(ha(n.thumbnailFile));qi(this.props.store,{file:n.thumbnailFile,metadata:o.getMetadata(),description:n.title,extension:i,cardIdList:[t.id],thumbnailsGenerator:()=&gt;o.generateThumbnails()})}We(On(t.id,{"content.uri":n.url}))}canWebCardExtInsertEvent(t,n){let{quizView:o,attendanceView:i}=n;return!(o||i||el(t)||P1(t)||t.screenSharingState)}onCapturedPhotoInserted(t){this.onCapturedPhotoInsertedInternal(t).finally(()=&gt;{URL.revokeObjectURL(t.url)})}async onCapturedPhotoInsertedInternal(t){let n=he.get().strings,{store:o}=this.props,{card:i,imageFile:s}=t,{contentType:a,image:l,name:u,extension:d}=s;if(a!==Gh)throw new Error(`cannot yet handle files of type "${a}`);let c=await io(l,a,u),p=s.getMetadata();qi(o,{file:c,metadata:p,extension:d,cardIdList:[i.id],thumbnailsGenerator:()=&gt;s.generateThumbnails(),downloadOnCancel:!0}),t.type==="inside"&amp;&amp;o.reduce(Jt({type:"normal",text:n.didInsertPhoto})),this.editorRenderer.onCardInsertedInSelf(t)}onCapturedVideoInserted(t){this.onCapturedVideoInsertedInternal(t).finally(()=&gt;{URL.revokeObjectURL(t.url)})}async onCapturedVideoInsertedInternal(t){let n=he.get().strings,{store:o}=this.props,{card:i,videoFile:s}=t,{contentType:a,video:l,name:u,extension:d}=s;if(!Qu(a))throw new Error(`cannot yet handle files of type "${a}"`);let c=l.src,p=await VS(c,u,a),h=s.getMetadata(),f=[i.id];ie.fileManager.setContentLocalFileAsset(f,p),qi(o,{file:p,metadata:h,extension:d,cardIdList:f,thumbnailsGenerator:()=&gt;s.generateThumbnails(),downloadOnCancel:!0}),t.type==="inside"&amp;&amp;o.reduce(Jt({type:"normal",text:n.didInsertVideo})),this.editorRenderer.onCardInsertedInSelf(t)}onNoteEffect(t){this.editorRenderer.onNoteEffect(t)}deleteUnmodifiedEmptyCard(){var n;let t=(n=this.editorRenderer)==null?void 0:n.clearCardModificationMonitor();if(t){let o=this.props.card.getCard(t.id);(o==null?void 0:o.lastModified.getTime())===t.lastModified.getTime()&amp;&amp;We(du(t.id))}}componentWillUnmount(){let{store:t,card:n}=this.props;this.stopScreenSharing(t),this.reset(),this.noteContext.hasDrawnSaveTimer(n.id)&amp;&amp;Sv({store:t,note:this.noteContext.getNote(),cardId:n.id}),t.reduce(zi(!0)),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("webcardcreate",this.onWebcardCreateInEditor),document.removeEventListener("copy",this.onCopy),document.removeEventListener("paste",this.onPaste)}componentDidUpdate(t,n,o){var y,S,T,w,k,A,I;let{card:i,store:s}=this.props,{card:a,store:l}=t,u=this.state.store.selectedTool;this.makeTeacherToolVisibleIfFinger(),u===2&amp;&amp;this.focusTextEditCard();let d=(y=l.desktop)==null?void 0:y.focusingCard,c=(S=s.desktop)==null?void 0:S.focusingCard,p=c&amp;&amp;(d==null?void 0:d.id)!==c.id&amp;&amp;n.store.selectedTool===2&amp;&amp;u===2,h=n.store.selectedTool===2&amp;&amp;u!==2;if((p||h)&amp;&amp;this.deleteUnmodifiedEmptyCard(),(u===1||u===3||u===0&amp;&amp;this.state.store.activeFingerTool==="laser"||h&amp;&amp;(d==null?void 0:d.id)===i.id)&amp;&amp;this.props.store.reduce(ti()),this.state.store.moveMode&amp;&amp;this.props.store.reduce(Ar(!1)),d&amp;&amp;(d.id!==(c==null?void 0:c.id)||i!==a)){let E=(T=a.getCard(d.id))!=null?T:i.getCard(d.id);if(E){let O=Kt(E,this.cardRendererCallback);O.setTextSelectedRange(void 0),O.setTextCompositionRange(void 0)}}if(i!==a){this.stopScreenSharingIfUrlChangedNotRoot(s,i);let E=this.props.store.editor;this.initialize({card:this.props.card,editorSize:E.length}),this.noteContext.hasDrawnSaveTimer(a.id)&amp;&amp;Sv({store:s,note:this.noteContext.getNote(),cardId:a.id})}a.isDescendantOf(i.id)&amp;&amp;(this.state.store.selectedTool!==0||this.state.store.activeFingerTool!=="finger")&amp;&amp;(this.state.store.setTool(0),this.state.store.setActiveFingerTool("finger")),el(this.props.store)&amp;&amp;(this.state.store.avPlaying&amp;&amp;this.editorRenderer.playManager.pause(this.state.store),this.state.store.selectedTool===2&amp;&amp;this.onTextBlur(),el(l)||s.reduce(ti()));let m=s.screen,g=l.screen;this.editorRenderer.onNextState({card:i,store:s,editorStore:this.state.store,viewStack:s.editor,screen:m,noteMtx:this.props.noteMtx,documentLoading:!1}),this.updateTextEditorFocus(this.state.store.selectedTool,n.store.selectedTool),this.state.store.selectedTool===2&amp;&amp;(m.keyboardHeight!==g.keyboardHeight&amp;&amp;this.ensureTextCaretVisible(),Jc(m,g)||s.reduce(ho())),m.keyboardHeight!==g.keyboardHeight&amp;&amp;m.keyboardHeight===0&amp;&amp;(fe.log("close: virtual keyboard."),(w=this.editorRenderer)==null||w.setBounceAnimation(),(k=this.editorText.current)==null||k.blur()),n.store.selectedTool!==this.state.store.selectedTool&amp;&amp;s.reduce(Ar(!1),hn(void 0));let v=!this.state.store.slideshowPlaying&amp;&amp;n.store.slideshowPlaying,b=!!this.props.store.screenSharingState,C=!b&amp;&amp;!!t.store.screenSharingState,x=(I=(A=this.editorRenderer)==null?void 0:A.screenSharingRootCards(i))!=null?I:!1;(v&amp;&amp;(!b||x)||C)&amp;&amp;s.reduce(nU(i.id)),$E(l,s)&amp;&amp;this.state.store.selectedTool!==0&amp;&amp;(this.state.store.setTool(0),this.state.store.setActiveFingerTool("finger"))}makeTeacherToolVisibleIfFinger(){let t=this.state.store,n=t.selectedTool===0&amp;&amp;t.toolVisible;this.props.store.teacherToolVisible!==n&amp;&amp;this.props.store.reduce(zi(n))}focusTextEditCard(){var o,i;let t=this.selectTextEditableCard(),n=this.editorRenderer;if(n&amp;&amp;t){if(((i=(o=this.props.store.desktop)==null?void 0:o.focusingCard)==null?void 0:i.id)===t.id)return;this.props.store.reduce(Hi({id:t.id,pinned:t.pinned,favorite:t.favorite,canPin:t.canPin(),canRotate:t.canRotate(),canAlign:t.canAlign(),bounds:n.boundingBoxRectToScreen(t.bounds)}),Ar(!1),hn(void 0))}}initialize(t){this.editorText.current&amp;&amp;this.editorText.current.initialize(),this.state.store.setTextHistoryTool({canUndo:!1,canRedo:!1}),this.state.store.setHideAnnotation(!1),this.state.store.setLoadError(void 0),this.editorRenderer.runStrokeOperation("clearHistory"),Cg.reset(),this.processor.onSingle=this.handleSingle,this.processor.onDoubleMove=this.handleDoubleMove,this.freeMoveProcessor.onFreeMove=this.handleFreeMove}stopScreenSharing(t){var i;let n=(i=t.screenSharingState)==null?void 0:i.sessionId,o=Xt(t);n&amp;&amp;typeof o=="number"&amp;&amp;Uf({courseId:o,sessionId:n,store:t,showDialog:!1})}get editingCard(){var n,o;let t=(o=(n=this.props.store.desktop)==null?void 0:n.focusingCard)==null?void 0:o.id;if(t){let i=this.props.card.getCard(t);if(i)return i}return this.props.card}selectTextEditableCard(){var a;let t=this.props.card;if(!this.props.store.desktop||!this.editorRenderer)return;let n=(a=this.props.store.desktop.focusingCard)==null?void 0:a.id,o=this.editorRenderer.getCardTransform().a/devicePixelRatio,i=l=&gt;al(l)&amp;&amp;l.isVisibleInCardTree(t)&amp;&amp;xx(l,o).resizable;if(n){let l=this.props.card.getCard(n);if(l&amp;&amp;i(l))return this.textEditingTargetHistory.push(l.id),l}let s=this.textEditingTargetHistory.lastTargeted(t);if(s&amp;&amp;!i(s)&amp;&amp;(s=void 0),s||al(this.props.card)&amp;&amp;(s=this.props.card),!s){for(let l of this.props.card.rflatTree())if(i(l)){s=l;break}}return s&amp;&amp;this.textEditingTargetHistory.push(s.id),s}updatePointerEventTarget(t){let n=this.editorRenderer;if(!n){this.pointerEventTarget=void 0;return}let o=this.editorText.current;if(!o){this.pointerEventTarget=this.editorRenderer;return}let{selectedTool:i}=this.state.store;if(i!==2){this.pointerEventTarget=this.editorRenderer;return}let s=this.editingCard,a=this.props.card,l=n.getCardUnderPoint(t);if(l===a)a===s?this.pointerEventTarget=o:this.pointerEventTarget=n;else if(l===s){let u=n.getObjectUnderPoint(t);(u==null?void 0:u.eventTarget)==="card"?this.pointerEventTarget=o:this.pointerEventTarget=n}else this.pointerEventTarget=n}focusLastEditedTextCard(){var n;if(((n=this.props.store.desktop)==null?void 0:n.focusingCard)!==void 0)return;let t=this.textEditingTargetHistory.lastTargeted(this.props.card);!t||t.id!==this.props.card.id&amp;&amp;this.props.store.reduce(Hi({id:t.id,pinned:t.pinned,favorite:t.favorite,canPin:t.canPin(),canRotate:t.canRotate(),canAlign:t.canAlign(),bounds:this.editorRenderer.boundingBoxRectToScreen(t.bounds)}))}shouldHandleLongPress(t){return this.editorRenderer.shouldHandleLongPress(t)}shouldHandleDoubleClick(t){return this.editorRenderer.shouldHandleDoubleClick(t)}reset(){var t,n,o,i;this.canvas.current&amp;&amp;((t=this.processor)==null||t.unbind(),(n=this.freeMoveProcessor)==null||n.unbind()),(o=this.editorRenderer)==null||o.close(),(i=this.subscription)==null||i.close(),this.layerUpdater.close()}onBack(t){var o;let n=!this.props.store.screenSharingState||((o=this.editorRenderer)==null?void 0:o.screenSharingRootCards(this.props.card));this.props.store.reduce(ti(),hn(void 0),XE({deleted:t,updateEditorState:n}))}render(){var d,c,p;let t=window.innerWidth,n=window.innerHeight,o=this.state.store.selectedTool===0&amp;&amp;this.state.store.activeFingerTool==="laser",i=this.selectTextEditableCard(),s=this.props.card,a=(c=(d=this.editorRenderer)==null?void 0:d.toolOpacity)!=null?c:1,l=this.state.store.quizView&amp;&amp;s.getCard(this.state.store.quizView.cardId),u=this.state.store.attendanceView&amp;&amp;s.getCard(this.state.store.attendanceView.cardId);return es.default.createElement("div",{style:{position:"fixed",top:0,left:0,minWidth:"100%",minHeight:"100%",background:nn({...v0,a:a*255}).toRGBAHex()}},es.default.createElement("canvas",{ref:this.canvas,className:"canvas",style:{width:`${t}px`,height:`${n}px`},width:t*window.devicePixelRatio,height:n*window.devicePixelRatio}),es.default.createElement("div",{className:"editorContentSizeAnchor",ref:this.contentSizeAnchorElement}),this.state.store.loadError&amp;&amp;es.default.createElement(lh,{error:this.state.store.loadError,button:{title:this.context.reload,onClick:()=&gt;location.reload()}}),o&amp;&amp;this.canvas.current&amp;&amp;es.default.createElement(Ad,{canvasSize:this.canvas.current,callback:this.laserLayerCallback,consumer:(p=this.editorRenderer)==null?void 0:p.laserPointerConsumer}),i&amp;&amp;this.editorRenderer&amp;&amp;es.default.createElement(LP,{ref:this.editorText,store:this.props.store,editorStore:this.state.store,callback:this,rootCard:this.props.card,card:i,delegate:{renderRect:()=&gt;this.renderRect(i)},playManager:this.editorRenderer.playManager}),es.default.createElement(tr,{className:"centralizedModalWrapper",open:this.state.store.addUrlDialogOpen,overlay:!0,onClose:()=&gt;this.state.store.setAddUrlDialogOpen(!1)},es.default.createElement(j2,{store:this.props.store,invokeType:1,onCreate:h=&gt;{this.updateWebcardUrlAndThumbnail(this.editingCard,h)},onDismiss:()=&gt;this.state.store.setAddUrlDialogOpen(!1)})),es.default.createElement(tr,{className:"centralizedModalWrapper",open:this.state.store.quizSharingModeDialogOpen,overlay:!0,onClose:()=&gt;this.state.store.setQuizSharingModeDialogOpen(!1)},es.default.createElement(Mw,{onStartQuizAnswerTogether:this.onStartQuizAnswerTogether,onClose:()=&gt;this.state.store.setQuizSharingModeDialogOpen(!1)})),this.editorRenderer&amp;&amp;es.default.createElement(es.default.Fragment,null,es.default.createElement(ice,{store:this.props.store,editorStore:this.state.store,card:this.props.card,focusingCard:this.editingCard,drawToolDispatcher:this.editorRenderer,textActionDispatcher:this.editorText.current||sRe(),getEditorRenderer:()=&gt;this.editorRenderer,opacity:a,playManager:this.editorRenderer.playManager,editorHeaderDispatcher:{onTextButtonClicked:this.onTextButtonClickedInHeader},onBack:h=&gt;this.onBack(h)}),this.state.store.quizView&amp;&amp;l instanceof jr&amp;&amp;es.default.createElement(Mv,{card:l,store:this.props.store,onClosing:()=&gt;this.state.store.setQuizView({card:l,mode:"closing"}),onDismiss:this.onQuizCardFrameContainerDismiss,viewMode:this.state.store.quizView.mode,updateCoverDataBeforeUnload:!0}),this.state.store.attendanceView&amp;&amp;u instanceof wn&amp;&amp;es.default.createElement(Nv,{card:u,onDismiss:this.onAttendanceCardFrameContainerDismiss,viewMode:this.state.store.attendanceView.mode,updateCoverDataBeforeUnload:this.props.store.userInfo.is_teacher}),this.state.store.selectedTool!==2&amp;&amp;this.state.store.quizView===void 0&amp;&amp;this.state.store.attendanceView===void 0&amp;&amp;es.default.createElement(Bv,{card:this.props.card,editorStore:this.state.store,store:this.props.store,screen:this.props.store.screen,editable:!on(this.props.store),onCardSelected:h=&gt;{this.onCardSelected(h)},opacity:a,cardRendererCallback:this.cardRendererCallback,playManager:this.editorRenderer.playManager})))}renderRect(t){let n=new ft;if(this.editorRenderer){let o=window.devicePixelRatio;n=this.editorRenderer.getCardTransform().scale(1/o)}return n.transformRect(qe(),t.bounds)}onTextSelectionChange({caretRect:t,selectionRange:n,compositionRange:o}){let i=this.editorRenderer;if(!i||!Kt(i.card,i.callback))return;let a=this.editingCard,l=Kt(a,i.callback);if(!!l&amp;&amp;(l.setTextSelectedRange(n),l.setTextCompositionRange(o),this.ensureTextCaretVisible(),this.state.store.selectedTool===2&amp;&amp;t)){let u=i.getCardTransform().scale(1/window.devicePixelRatio).inverted().transformRect(qe(),t);We(VY(a.id,this.props.store.userInfo,u))}}onTextUndoHistoryChange({canUndo:t,canRedo:n}){this.state.store.setTextHistoryTool({canUndo:t,canRedo:n})}onTextBlur(){this.state.store.setTool(0)}onTypingAttributeChange(t){this.state.store.setTypingAttributes(t)}copyTextCard(t){var o,i;(o=this.editorRenderer)==null||o.clearCardModificationMonitor();let n=this.props.card.id===t;(i=this.editorText.current)==null||i.reset(),this.state.store.setActivateTextEditor(!0),At(new F0(t,n))}updateTextEditorFocus(t,n){let o=this.editorText.current;!o||t!==n&amp;&amp;(t===2?o.focus():o.blur())}ensureTextCaretVisible(){let t=this.editorText.current,n=this.editorRenderer;if(!t||!n||this.state.store.selectedTool!==2)return;let o=t.currentCaretRect;if(!o||this.props.card!==n.card)return;let i=this.editingCard,s=n.rectEditorToScreen(qe(i.bounds.x,i.bounds.y)),a=qe(o.x+s.x,o.y+s.y,o.width,o.height);n.ensureTextCaretVisible(a)}onEditableTextCardClicked(t,n){let o=this.editorRenderer.boundingBoxRectToScreen(t.bounds);this.props.store.reduce(Hi({id:t.id,pinned:t.pinned,favorite:t.favorite,canPin:t.canPin(),canRotate:t.canRotate(),canAlign:t.canAlign(),bounds:o}),Ar(!1),hn(void 0)),this.state.store.setTextToolWithCaretPoint(n)}};UP.contextType=Gm;function zP(r,e){switch(r){case"test":return e.helpPageLinkForQuizCardTest;case"survey":return e.helpPageLinkForQuizCardSurvey}}function HP(r,e){return r?e.helpPageLinkForAttendanceCardTeacher:e.helpPageLinkForAttendanceCardStudent}function sRe(){return{toggleVertical(){},undo(){},redo(){},changeColor(r){},toggleBoldface(){},changeListStyle(){},changeLineHeightMultiple(r){},changeAlignment(r,e){},changeTextSize(r,e){},copyTextCard(r){},selectWordAt(r){},fontSizeInputWillFocus(){},fontSizeInputDidBlurred(){},fontSizeDidChanged(r,e){}}}function aRe(r,e){return hce(r,e)}function hce(r,e){let{selectedTool:t,narrationRecording:n,addCardDialogOpen:o,addUrlDialogOpen:i,quizView:s,attendanceView:a}=e;return!(t!==0&amp;&amp;t!==3||n||o||i||s||a||el(r)||P1(r)||r.screenSharingState)}var fce=({store:r})=&gt;{let e=pe(),t=Sd(),n=(0,En.useRef)(null),[o,i]=(0,En.useState)(void 0),{editor:s,screen:a,noteStates:l}=r,{courseId:u,noteId:d,isShared:c,positionPopoverOpen:p}=t,{width:h,height:f}=a;(0,En.useEffect)(()=&gt;{r.pageVisible&amp;&amp;Or(u)&amp;&amp;r.drawer&amp;&amp;r.courseId!==void 0&amp;&amp;Zp(r,u)},[u,r.pageVisible]),(0,En.useEffect)(()=&gt;{if(!o)return;let T=C(o);return document.addEventListener("copy",T),()=&gt;{document.removeEventListener("copy",T)}},[o]),jn(()=&gt;(document.addEventListener("paste",x),window.addEventListener("webcardcreate",y),()=&gt;{document.removeEventListener("paste",x),window.removeEventListener("webcardcreate",y)}));let m=(0,En.useRef)(r);(0,En.useEffect)(()=&gt;{m.current=r},[r]),(0,En.useEffect)(()=&gt;{let T=n.current,w,k;if(c){Ee(u!=="self-study");let A=r.sharedNoteFiles[d];if(!A){rw(r,{noteId:d,courseId:u,pushState:!1});return}w=nw.create({store:r,canvas:T,noteId:d,...A}),k=oC.get(d,m).subscribe()}else{let A=r.noteFiles[d];if(!A){iw(r,{noteId:d,courseId:u,pushState:!1});return}let I=yd(d,A.note);w=new eB({store:r,canvas:T,note:I})}return i(w),r.reduce(dU(!0)),()=&gt;{w.close(),k==null||k.close(),r.reduce(dU(!1),Hq(d))}},[d,c,r.noteFiles[d],r.sharedNoteFiles[d]]),(0,En.useEffect)(()=&gt;{o==null||o.onNextStore(r)},[r]);let g=l[t.noteId],v=window.devicePixelRatio,b=s&amp;&amp;s[s.length-1];(0,En.useEffect)(()=&gt;{b&amp;&amp;o&amp;&amp;!o.getNote().hasCard(b.cardId)&amp;&amp;r.reduce(XE({deleted:!0}))},[b,o]);let C=T=&gt;()=&gt;{var I;let w=m.current;if(!av()||!cRe(w))return;let k=(I=w.desktop)==null?void 0:I.focusingCard;if(!k)return;let A=T.getNote().getCardSafe(k.id);!A||xM(w,A).then(()=&gt;{w.reduce(Jt({type:"normal",text:e.copiedToClipboard}))}).catch(E=&gt;{let{message:O}=ot(E,{default:e.failedToCopyCards});w.reduce(Jt({type:"error",text:O}))})},x=async T=&gt;{let w=m.current;if(!pRe(w))return;let{clipboardData:k}=T;if(!k)return;let A=Nr(w,w.userInfo.user_id),I=await Dx(k,A);!I||lv({store:w,data:I})},y=T=&gt;{var Q;fe.log("onWebcardCreate in desktop");let w=m.current;if(!hRe(w)){let{editor:j}=w;j||alert(e.failedCreateWebCardFromExtension);return}if(!n.current)return;w.reduce(U1(!1));let k=T.detail,A=x2(k.imageStr),I=n.current.getBoundingClientRect(),E={x:I.right,y:I.top},O;k.url?O=new Yu(E,{url:k.url,title:(Q=k.title)!=null?Q:e.webCard,thumbnailFile:A}):O=new y0(E,A),At(O)};return En.default.createElement("div",null,En.default.createElement("canvas",{className:"2d-canvas",key:"2d-canvas",ref:n,...(T=&gt;({width:h*v,height:f*v,style:{width:h,height:f,display:T?"block":"none"}}))(!0)}),En.default.createElement(tr,{open:(g==null?void 0:g.saveState)instanceof Ju,overlay:!0,onClose:()=&gt;{}},En.default.createElement(nde,{store:r,rejection:g==null?void 0:g.saveState})),En.default.createElement(uRe,{store:r,noteState:g}),En.default.createElement(dRe,{store:r}),!t.isShared&amp;&amp;En.default.createElement(lRe,{store:r,state:g}),b&amp;&amp;o&amp;&amp;o.getNote().hasCard(b.cardId)&amp;&amp;En.default.createElement(UP,{store:r,cardRendererCallback:o.getManager().cardRendererCallback,card:o.getNote().getCard(b.cardId),noteMtx:o.getRenderer().applyTransform(),noteRendererCallback:o.getNote(),remotePointerManager:o.getRemotePointerManager(),remoteStrokeBus:o.getRemoteStrokeBus(),noteContext:o}),o&amp;&amp;En.default.createElement(gle,{store:r,noteContext:o}),p&amp;&amp;En.default.createElement(pde,{store:r,position:p,noteContext:o,editor:b}),t.isShared&amp;&amp;En.default.createElement(ede,null),r.userPreference.debugFeatures.showDrawnAssetState&amp;&amp;En.default.createElement(fde,null))},lRe=({store:r,state:e})=&gt;{if(!e)return null;let t=pe();return e.saveState==="unsaved"?En.default.createElement("div",{role:"button",className:"noteSaveIndicator",onClick:()=&gt;{r.reduce(sY())}},t.unsaved):e.saveState==="saving"?En.default.createElement("div",{className:"noteSaveIndicator"},t.saving):e.saveState==="done"?En.default.createElement("div",{className:"noteSaveIndicator"},t.saved):null},uRe=({store:r,noteState:e})=&gt;{let[t,n]=(0,En.useState)(!1);(0,En.useEffect)(()=&gt;{var s;let i=(s=r.desktop)==null?void 0:s.noteId;typeof i=="number"&amp;&amp;r.noteNeedsReload[i]&amp;&amp;((e==null?void 0:e.saveState)==="done"?n(!0):r.reduce(jE(i,!1)))},[r.noteNeedsReload]);let o=pe();return En.default.createElement(tr,{open:t,overlay:!0,onClose:()=&gt;{}},En.default.createElement(Vm,{title:o.noteChangedFromOtherDevice},En.default.createElement(la,null,En.default.createElement(Ui,{disableAfterSubmit:!0,onClick:()=&gt;location.assign(location.href)},o.okay))))},dRe=({store:r})=&gt;{let e=()=&gt;{r.reduce(U1(!1))};return En.default.createElement(tr,{className:"centralizedModalWrapper",open:r.addWebCardDialogOpen,overlay:!0,onClose:e},En.default.createElement(j2,{store:r,invokeType:0,onCreate:(t,n)=&gt;{let o=new Yu(n,t);At(o)},onDismiss:e}))};function EW(r){let{editor:e}=r;return!(e||Bq(r)||P1(r)||el(r))}function cRe(r){return r.addWebCardDialogOpen?!1:EW(r)}function pRe(r){return r.addWebCardDialogOpen?!1:EW(r)}function hRe(r){return EW(r)}var $n=oe(ve());var gR=oe(ve());var fRe=({backgroundColor:r,subColor:e,textColor:t,store:n,onDismiss:o})=&gt;{let i=()=&gt;{let l=gC();!l||(At(new Dl({backcolor:r,color:t,startPosition:l})),o())};return gR.default.createElement("div",{className:"textCardDialogCell",draggable:!0,onDragStart:l=&gt;{let u={backcolor:r.toARGBHex(),color:t.toARGBHex(),isTransparent:!1,name:"addTextCard"};l.dataTransfer.setData("application/x-loilo-text-card-drag",JSON.stringify(u)),l.dataTransfer.effectAllowed="copy"},onDragEnd:l=&gt;{At(new np({x:l.pageX,y:l.pageY},!0)),o()},style:{backgroundColor:r.toCSSRGBA(),borderBottom:`3px solid ${e.toCSSRGBA()}`,cursor:"pointer"},onClick:i})},mce=({store:r,onDismiss:e})=&gt;gR.default.createElement("div",{className:"textCardDialog"},dE.map((t,n)=&gt;gR.default.createElement(fRe,{subColor:mt(t.subColor),textColor:mt(t.textColor),backgroundColor:mt(t.backgroundColor),key:n,store:r,onDismiss:e})));var Fd=oe(ve()),Nw=oe(ve());var mRe=({store:r,preset:e,onCreate:t,onDismiss:n})=&gt;{let o=pe(),i=Fd.default.useCallback(async()=&gt;{if(!gC())return;let d=Vr.getEndpoint("loilonote-quiz");if(d){r.reduce(we(29,o.creatingTestCard));let c=new Qp({lnsEndpoint:r.lnsEndpoint,lnqEndpoint:d,logEnabled:r.logEnabled,locale:r.locale,appTokenManager:Vr}),p=await c.createQuiz(e).catch(h=&gt;{fe.error(h),r.reduce(we(29,null),me(29,{title:o.failedCreateTestCard,message:o.reloadForTestCard,okMessage:o.reload,onOk:async()=&gt;new Promise(()=&gt;{let f=new URL(location.href);f.searchParams.set("refresh","1"),location.assign(f.href)})}))});if(p){fe.log("\u30AF\u30A4\u30BA\u306E\u4F5C\u6210\u306B\u6210\u529F\u3057\u307E\u3057\u305F"),fe.log(`\u65B0\u3057\u3044\u30AF\u30A4\u30BAid: ${p.quizId}`);let h=await c.getCoverData(p.quizId).catch(f=&gt;{fe.error(f),r.reduce(we(29,o.failedCreateTestCard),me(29,{title:o.failedCreateTestCard,message:o.reloadForTestCard,okMessage:o.reload,onOk:async()=&gt;new Promise(()=&gt;{let m=new URL(location.href);m.searchParams.set("refresh","1"),location.assign(m.href)})}))});if(h){fe.log({coverInfo:h});let f={quiz_id:p.quizId,preset:e,quiz_author:h.author,title:h.title,question_count:h.questionCount,isAnswered:!1,is_result_opened:!0};fe.log("CoverInfo\u306E\u53D6\u5F97\u306B\u6210\u529F\u3057\u307E\u3057\u305F"),fe.log({newQuizContentBase:f}),r.reduce(we(29,null),Jt({type:"normal",text:o.createdTestCard})),t(f)}else fe.log("CoverInfo\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F")}}n()},[e]),{title:s,buttonImagePath:a,className:l}=vRe(e,o);return Fd.default.createElement(gce,{onClick:i,buttonImagePath:a,title:s,className:l})},gRe=({store:r,onCreate:e,onDismiss:t})=&gt;{let n=pe(),o=(0,Nw.useRef)(r);(0,Nw.useEffect)(()=&gt;{o.current=r},[r]);let i=(0,Nw.useCallback)(()=&gt;{r.reduce(we(29,null),me(29,{title:n.failedCreateAttendanceCard,okMessage:n.back,onOk:()=&gt;r.reduce(me(29,void 0))}))},[r]),s=async()=&gt;{if(!gC())return;let u=await Vr.issue("loilonote-attendance"),d=Vr.getEndpoint("loilonote-attendance");if(!u||!d)return;let c=29;r.reduce(we(c,n.creatingAttendanceCard));let p=new hv({lnsEndpoint:r.lnsEndpoint,lnaEndpoint:d,logEnabled:r.logEnabled,locale:r.locale}),h=await p.create(u.app_token).catch(i);if(!h)return;let{attendanceId:f}=h,m=await p.getCoverData(f,u.app_token).catch(i);if(!m)return;let{author:g,title:v}=m,b={attendanceId:f,author:g,title:v};r.reduce(we(c,null),Jt({type:"normal",text:n.createdAttendanceCard})),e(b)};return Fd.default.createElement(gce,{className:"attendanceMenuTitle",buttonImagePath:"/svg/attendance_60x60_margin_less.svg",onClick:()=&gt;{s().finally(t)},title:n.attendance})},gce=({buttonImagePath:r,title:e,className:t,onClick:n})=&gt;Fd.default.createElement("div",{className:"menuButton",onClick:n,role:"button"},Fd.default.createElement(lr,{className:"menuButtonIcon",src:r,alt:e}),Fd.default.createElement("div",{className:"menuTitle"},Fd.default.createElement("div",{style:{width:50,height:11}},Fd.default.createElement("div",{className:t,style:{left:-75,width:200}},e))));function vRe(r,e){switch(r){case"test":return{title:e.quizPresetTest,buttonImagePath:e.testBtnImgPath,className:"quizTestMenuTitle"};case"survey":return{title:e.quizPresetSurvey,buttonImagePath:e.surveyBtnImgPath,className:"quizSurveyMenuTitle"}}}var vce=({store:r,onCreate:e,onDismiss:t})=&gt;Fd.default.createElement("div",{className:"testCardDialog"},_W()&amp;&amp;G6.map((n,o)=&gt;Fd.default.createElement(mRe,{preset:n,key:o,store:r,onCreate:e,onDismiss:t})),FW()&amp;&amp;r.userInfo.is_teacher&amp;&amp;Fd.default.createElement(gRe,{store:r,onCreate:e,onDismiss:t}));function _W(){return Vr.getEndpoint("loilonote-quiz")!==void 0}function FW(){return Vr.getEndpoint("loilonote-attendance")!==void 0}function bce(r){return Pa(r,{attendanceId:wl,author:e=&gt;Pa(e,{name:wl,id:wl}),title:wl})}var cl=oe(ve());var yce=({onDismiss:r})=&gt;{let e=pe(),t=hJ()?e.helpWebCardExtensionUrlForEdge:e.helpWebCardExtensionUrl;return cl.default.createElement("div",{className:"leadingWebCardExtDialog"},cl.default.createElement("div",{className:"leadingWebCardExtDialogHeader"},cl.default.createElement(Et,{round:!0,inPopover:!0},cl.default.createElement(Ft,null,cl.default.createElement(Mt,null,cl.default.createElement(gt,{onClick:r},e.close)),cl.default.createElement(jt,null)))),cl.default.createElement("div",{className:"leadingWebCardExtText"},cl.default.createElement("p",null,e.webCardExtensionLeadingText)),cl.default.createElement("div",{className:"leadingWebCardExtLinkBox"},cl.default.createElement("div",{className:"leadingWebCardExtLink"},cl.default.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener"},e.learnMore))),cl.default.createElement("div",{className:"leadingWebCardExtDialogImg"},cl.default.createElement(lr,{src:"/img/LeadingWebCardExt.png"})))};var vR,gC=()=&gt;vR,Cce=({store:r})=&gt;{let e=pe(),t=m=&gt;{let g=sa(m.currentTarget.getBoundingClientRect());vR=tn(g),r.reduce(()=&gt;({addSheetDialogOpen:{$set:!0}}))},n=()=&gt;{r.reduce(cg(!0))},o=m=&gt;{let g=sa(m.currentTarget.getBoundingClientRect()),v=tn(g);vR=v,r.screen.isMobile?At(new Dl({backcolor:cn(),color:To(),startPosition:v})):r.reduce(()=&gt;({addTextCardDialogOpen:{$set:!0}}))},i=m=&gt;{!r.isWebCardExtensionInstalled&amp;&amp;r.leadingWebCardExtensionDialogState==="ready"?(kde(),r.reduce(()=&gt;({leadingWebCardExtensionDialogState:{$set:"open"}}))):(xw(r.isWebCardExtensionInstalled),r.reduce(U1(!0)))},s=m=&gt;{let g=sa(m.currentTarget.getBoundingClientRect());vR=tn(g),r.reduce(()=&gt;({addQuizCardDialogOpen:{$set:!0}}))},a=()=&gt;{r.reduce(()=&gt;({addSheetDialogOpen:{$set:!1}}))},l=()=&gt;{r.reduce(()=&gt;({addTextCardDialogOpen:{$set:!1}}))},u=()=&gt;{r.reduce(()=&gt;({addQuizCardDialogOpen:{$set:!1}}))},d=()=&gt;{r.reduce(G1(void 0))},c=m=&gt;{let g=gC();!g||At(new Db(m,g))},p=m=&gt;{let g=gC();!g||(bie(m)?At(new C0(g,m)):bce(m)&amp;&amp;At(new S0(g,m)))},h=_W()||FW(),f=on(r);return $n.default.createElement("div",{className:"menu","data-disabled":f},$n.default.createElement(MW,{title:e.camera,imageSrc:"/svg/camera_margin_less.svg",onClick:n}),$n.default.createElement("div",{className:"menuButton",style:{position:"relative"}},$n.default.createElement("div",{style:{textAlign:"center"},onClick:o,"data-collapse-on-mobile":!1},$n.default.createElement(lr,{className:"menuButtonIcon",src:e.textCardMenuBtnImgPath,alt:e.text}),$n.default.createElement("div",{className:"menuTitle"},e.text)),$n.default.createElement(xt,{open:r.addTextCardDialogOpen&amp;&amp;!f,onClose:l,anchor:"middleRight",arrowColor:"#565e6b",triOffset:{top:110}},$n.default.createElement(mce,{store:r,onDismiss:l}))),$n.default.createElement(MW,{title:"Web",imageSrc:"/svg/web_margin_less.svg",onClick:i}),$n.default.createElement(bRe,{title:e.file,imageSrc:"/svg/picture_margin_less.svg"}),$n.default.createElement(yRe,{onClick:t}),$n.default.createElement(tr,{open:r.addSheetDialogOpen&amp;&amp;!f,onClose:a,overlay:!0},$n.default.createElement(Pw,{onSelect:c,onDismiss:a,dismissOnSelect:!0,draggable:!0})),$n.default.createElement(tr,{className:"centralizedModalWrapper",open:r.leadingWebCardExtensionDialogState==="open",onClose:d,overlay:!0},$n.default.createElement(yce,{onDismiss:d})),h&amp;&amp;$n.default.createElement("div",{className:"relative",style:{width:"100%"}},$n.default.createElement(MW,{title:e.quiz,onClick:s,imageSrc:e.quizCardMenuBtnImgPath}),$n.default.createElement(xt,{open:r.addQuizCardDialogOpen&amp;&amp;!f,onClose:u,anchor:r.screen.isMobile&amp;&amp;Mh(r.screen)==="portrait"?"topCenter":"middleRight",arrowColor:"rgb(248, 248, 248)"},$n.default.createElement(vce,{store:r,onCreate:p,onDismiss:u}))))},MW=({imageSrc:r,title:e,collapseOnMobile:t=!1,titleClass:n,...o})=&gt;$n.default.createElement("div",{className:"menuButton","data-collapse-on-mobile":t,...o},$n.default.createElement(lr,{className:"menuButtonIcon",src:r,alt:e}),$n.default.createElement("div",{className:n!=null?n:"menuTitle"},e)),bRe=({imageSrc:r,title:e,collapseOnMobile:t=!1})=&gt;{let n=(0,$n.useRef)(null),o=s=&gt;{let a=sa(s.currentTarget.getBoundingClientRect()),l=tn(a),u=n.current;u instanceof HTMLInputElement&amp;&amp;(u.click(),u.onchange=()=&gt;{!u.files||u.files.length===0||(At(new Uh(u.files,l)),u.value="")})},i=[...Zo.keys(),...R0.keys()].join(", ");return $n.default.createElement("div",{className:"menuButton","data-collapse-on-mobile":t,onClick:o},$n.default.createElement(lr,{className:"menuButtonIcon",src:r,alt:e}),$n.default.createElement("div",{className:"menuTitle"},e),$n.default.createElement("input",{ref:n,hidden:!0,type:"file",accept:i,multiple:!0}))},yRe=({onClick:r})=&gt;{let e=pe(),t=50,n=200,o=11,i=t/2-n/2;return $n.default.createElement("div",{className:"menuButton",role:"button",onClick:r},$n.default.createElement(lr,{className:"menuButtonIcon",src:"/svg/tt_margin_less.svg",alt:e.thinkingTool}),$n.default.createElement("div",{className:"menuTitle"},$n.default.createElement("div",{style:{width:t,height:o}},$n.default.createElement("div",{className:"thinkingToolTitle",style:{left:i,width:n}},e.thinkingTool))))};var pl=oe(ve());var Sce=new Map([["materialBox",{iconImageSrc:"/svg/material_box_icon.svg",arrowHoverImageSrc:"/svg/left_arrow_colored_material_box.svg"}],["submitButton",{iconImageSrc:"/svg/submit_icon.svg",arrowHoverImageSrc:"/svg/left_arrow_colored_submit.svg"}],["sendButton",{iconImageSrc:"/svg/send_icon.svg",arrowHoverImageSrc:"/svg/left_arrow_colored_send.svg"}]]),GP=function({type:e,uploading:t,badge:n,text:o,onEffect:i,onClick:s,arriving:a=!1,invalid:l=!1}){var f,m;let u=Me(),{desktop:d,fixedUIHit:c}=u;if(!d)return null;let p=(0,pl.useRef)(null);(0,pl.useEffect)(()=&gt;{let g=p.current.getBoundingClientRect();i(qe(g.left,g.top,g.width,g.height))});let h=c!==e&amp;&amp;(c==="sendButton"||c==="materialBox"||c==="submitButton");return pl.default.createElement("div",{className:"uploadStatusButton","data-invalid":l,ref:p,onClick:s},pl.default.createElement("div",{className:"uploadStatusButtonIconWrapper","data-hold":!!d.heldCard,"data-hover-another":h},pl.default.createElement(lr,{className:"uploadStatusButtonIcon","data-uploading":t,src:(f=Sce.get(e))==null?void 0:f.iconImageSrc,alt:o}),!on(u)&amp;&amp;pl.default.createElement(lr,{className:"uploadStatusButtonArrow",src:c===e?(m=Sce.get(e))==null?void 0:m.arrowHoverImageSrc:"/svg/left_arrow_white.svg"}),a&amp;&amp;pl.default.createElement("div",{className:"uploadStatusButtonArrivingAnimation"}),t&amp;&amp;pl.default.createElement(lr,{src:"/svg/loading-white.svg",alt:"uploadingIndicator",className:"uploadStatusButtonLoading"})),pl.default.createElement("div",{className:"uploadStatusButtonText"},o),typeof n=="number"&amp;&amp;pl.default.createElement("div",{className:"uploadStatusButtonBadge"},n&gt;999?"999+":n),n==="dot"&amp;&amp;pl.default.createElement("div",{className:"uploadStatusButtonDotMark"}),n==="check"&amp;&amp;pl.default.createElement("div",{className:"uploadStatusButtonBadge check"}))};var Hv=oe(ve());var xce=r=&gt;{if(r.length===0)return;let e=new Map;for(let n of r){if(n.type!=="submit")continue;let o=n.data.submission_number,i=n.data.author_id;if(!o||!i)continue;let s=e.get(o);s!=null&amp;&amp;s.some(a=&gt;a===i)||(s===void 0?s=[i]:s.push(i),e.set(o,s))}return Array.from(e.values()).map(n=&gt;n.length).reduce((n,o)=&gt;n+o)};var wce=()=&gt;{var u,d,c,p;let r=Me(),{courseId:e}=Sd();Ee(typeof e=="number");let[t,n]=(0,Hv.useState)();(0,Hv.useEffect)(()=&gt;{r.userInfo.is_teacher&amp;&amp;n(o())},[r.mobilePushes,e]);let o=()=&gt;{var f,m;Ee(r.userInfo.is_teacher);let h=(m=(f=r.mobilePushes.byCourseId[e])==null?void 0:f.map(g=&gt;r.mobilePushes.byId[g]))==null?void 0:m.filter(g=&gt;(g==null?void 0:g.data.type)==="submit");if(!!h)return xce(h)},[i,s]=(0,Hv.useState)(),a=(d=(u=r.submissions.byActiveInCourse[e])==null?void 0:u.map(h=&gt;r.submissions.byKey[h]))==null?void 0:d.filter(h=&gt;!(h!=null&amp;&amp;h.submitted)),l=(p=(c=r.mobilePushes.byCourseId[e])==null?void 0:c.map(h=&gt;r.mobilePushes.byId[h]))==null?void 0:p.some(h=&gt;h.type==="reveal_submission_answers");return(0,Hv.useEffect)(()=&gt;{r.userInfo.is_teacher||(a&amp;&amp;a.length&gt;0?s(a.length):l?s("dot"):a&amp;&amp;(a==null?void 0:a.length)===0?s("check"):s(void 0))},[a==null?void 0:a.length,l]),Hv.default.createElement(GP,{type:"submitButton",uploading:r.submitting,text:pe().submit,badge:r.userInfo.is_teacher?t:i,onClick:()=&gt;r.reduce(J0(!0)),onEffect:h=&gt;Ib("submitButton",h)})};var Tce=oe(ve()),bR=oe(Wr());var Dce=({store:r})=&gt;{let{savingAssetThumbsCount:e,savingAssetsCount:t}=r,n=pe(),o="",i=he.get(),s=i.pluralSafeSuffix(t),a=i.pluralSafeSuffix(e);return t&gt;0&amp;&amp;e&gt;0?o+=(0,bR.sprintf)(n.pendingFileAndThumbUploadCount,t,e,s,a):t&gt;0?o+=(0,bR.sprintf)(n.pendingFileUploadCount,t,s):e&gt;0&amp;&amp;(o+=(0,bR.sprintf)(n.pendingThumbUploadCount,e,a)),Tce.default.createElement("div",{className:"assetSaveIndicator"},o)};var Md=oe(ve());var kce=()=&gt;{let r=Me(),e=(0,Md.useRef)(void 0),t=Qh(r),n=!r.noteManagerReady,[{title:o,warn:i},s]=CRe(),[a,l]=(0,Md.useState)(!1),[u,d]=(0,Md.useState)(()=&gt;()=&gt;{});return(0,Md.useEffect)(()=&gt;{if(n){l(!1);return}!e.current&amp;&amp;t&amp;&amp;(s(t),l(!0)),e.current&amp;&amp;t&amp;&amp;e.current!==t&amp;&amp;s(t),e.current&amp;&amp;!t&amp;&amp;(d(()=&gt;()=&gt;{s(t)}),l(!1)),e.current=t},[n,t,e.current]),Md.default.createElement(Mn,{timeout:250,unmountOnExit:!0,in:a,classNames:"up",onExited:u},Md.default.createElement("div",{className:"sharedNoteIndicatorContainer","data-menu":t!=="readPermission"},Md.default.createElement("div",{className:"sharedNoteIndicator","data-warn":i},o)))},CRe=()=&gt;{let r=pe(),[e,t]=(0,Md.useState)({title:"",warn:!1});return[e,o=&gt;{var l;let i=SRe.get(o),s=i?r[i]:"",a=(l=xRe.get(o))!=null?l:!1;t({title:s,warn:a})}]},SRe=new Map([["readPermission","sharedInViewOnly"],["noConnection","reconnectingToSharedNote"]]),xRe=new Map([["readPermission",!1],["noConnection",!0]]);var Pce=()=&gt;{var u,d;let r=Me(),e=r.desktop,t=pe(),n=(0,Mi.useRef)(e);(0,Mi.useEffect)(()=&gt;{n.current=e},[e]),jn(()=&gt;{if(!on(r))return window.addEventListener("webcardcreate",o),()=&gt;{window.removeEventListener("webcardcreate",o)}});let o=()=&gt;{n.current||r.reduce(Co(59,{title:t.failedCreateWebCardFromExtensionTitle,message:t.failedCreateWebCardFromExtension,okMessage:t.back,onOk:()=&gt;r.reduce(me(59,void 0)),color:"info"}))},i=()=&gt;{r.reduce(cp(!0))};if(!e)return null;let s;typeof e.courseId=="number"&amp;&amp;(s=((d=(u=r.mobilePushes.byCourseId[e.courseId])==null?void 0:u.filter(c=&gt;{var p;return["share","distribute","comment_on_submission_answer"].includes((p=r.mobilePushes.byId[c])==null?void 0:p.type)}))==null?void 0:d.length)||void 0);let a=e.courseId==="self-study"&amp;&amp;!e.heldCard,l=Qh(r)==="readPermission";return Mi.default.createElement("div",{className:"desktop"},Mi.default.createElement(UH.Provider,{value:e},Mi.default.createElement("div",{className:"menuWrapper","data-readonly":l},Mi.default.createElement(Gt,{className:"desktopBackButton","data-readonly":l,onClick:i},Mi.default.createElement("div",{className:"navHeaderBackButtonIcon desktopBackButtonIcon"}),Mi.default.createElement("span",null,t.back)),!l&amp;&amp;Mi.default.createElement(Cce,{store:r}),Mi.default.createElement("div",{className:"mstMenu","data-readonly":l},Mi.default.createElement(GP,{type:"materialBox",text:t.materialsStorage,onEffect:c=&gt;Ib("materialBox",c),uploading:r.uploadingMaterialCount&gt;0,onClick:()=&gt;r.reduce(Zh(!0))}),typeof e.courseId=="number"&amp;&amp;Mi.default.createElement(wce,null),Mi.default.createElement(GP,{type:"sendButton",text:t.send,uploading:r.sendingTasks.length&gt;0,onClick:()=&gt;{var c;typeof((c=r.desktop)==null?void 0:c.courseId)=="number"&amp;&amp;r.reduce(iS(!0))},onEffect:c=&gt;Ib("sendButton",c),arriving:!!r.arrivedDocument,badge:s,invalid:a})),!on(r)&amp;&amp;Mi.default.createElement("div",{className:"desktopTrashBox"},Mi.default.createElement(ww,{store:r,type:"desktopTrashBox"}))),Mi.default.createElement(hae,{store:r}),Mi.default.createElement(fce,{store:r}),!r.editor&amp;&amp;Mi.default.createElement(Dce,{store:r}),Mi.default.createElement(kce,null)))};var Va=oe(ve()),Ace=oe(ve());var Ice=()=&gt;{let r=Me(),{checkingScreenLockState:e}=r,t=Xt(r),n=typeof t=="number"?r.screenLockStates[t]:!1,o=n&amp;&amp;!r.userInfo.is_teacher,i=pe();if((0,Ace.useEffect)(()=&gt;{e==="done"&amp;&amp;n&amp;&amp;(alert(i.teacherLockedScreens),r.reduce(Q0(null)))},[e,n]),typeof t!="number"||!o)return null;let s=au(r,t),a=ls(r,t),l=()=&gt;{Lle(r,t)};return Va.default.createElement("div",{className:"screenLock"},Va.default.createElement("div",{className:"screenLockInner"},Va.default.createElement("div",{className:"screenLockPanel"},Va.default.createElement("div",{className:"screenLockGroupCourseInfo"},Va.default.createElement("div",{className:"screenLockGroupName"},s),Va.default.createElement("div",{className:"screenLockCourseName"},a)),Va.default.createElement("hr",{className:"screenLockHr"}),Va.default.createElement("div",{className:"screenLockTitle"},i.screensAreLocked),Va.default.createElement("div",{className:"screenLockParagraph"},i.focusOnTheTeacher),Va.default.createElement("div",{className:"screenLockPin screenLockPinLT"}),Va.default.createElement("div",{className:"screenLockPin screenLockPinLB"}),Va.default.createElement("div",{className:"screenLockPin screenLockPinRT"}),Va.default.createElement("div",{className:"screenLockPin screenLockPinRB"})),Va.default.createElement(Gt,{className:"screenLockConfirmButton",disabled:e==="fetching",onClick:l},Va.default.createElement("div",null,e==="fetching"?i.checking:i.checkScreenLock))))};var $P=oe(ve());var qt=oe(ve());var Fce=oe(Wr());var Nd=oe(ve());var Ece=oe(Wr()),_ce=({url:r,authorName:e,anonymous:t,onDismiss:n,onConfirm:o})=&gt;{let i=pe(),s=t?i.webPageSharedText:(0,Ece.sprintf)(i.webPageSharedTextBy,e);return Nd.default.createElement("div",{className:"sharedURLConfirmDialog"},Nd.default.createElement(Et,{round:!0,inPopover:!0},Nd.default.createElement(Ft,null,Nd.default.createElement(Mt,null,Nd.default.createElement(gt,{onClick:n},i.close)),Nd.default.createElement(jt,null))),Nd.default.createElement("div",{className:"sharedURLConfirmDialogContentWrapper"},Nd.default.createElement("div",null,s),Nd.default.createElement("div",{className:"sharedURLText",title:r},r),Nd.default.createElement("div",{className:"sharedURLConfirmDialogOpenLink"},Nd.default.createElement("a",{onClick:o},i.openWebPage))))};var wRe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!1,enableAttendanceCoverButtons:!1,enableFullScreenSharing:!1,drawnType:"annotation",canLeave:!1,shouldSyncPlayController(r,e){return!0}},Mce=({store:r,notification:e,courseId:t})=&gt;{var et,_e,xe,Ge;let n=(0,qt.useRef)(null),o=(0,qt.useRef)(null),i=(0,qt.useRef)(),s=(0,qt.useRef)(),a=(0,qt.useRef)(),l=(0,qt.useRef)(null),[u,d]=(0,qt.useState)(),[c,p]=(0,qt.useState)(),[h,f]=(0,qt.useState)(),[m,g]=(0,qt.useState)(),[v,b]=(0,qt.useState)(0),[C,x]=(0,qt.useState)(!1),[y,S]=(0,qt.useState)(void 0),[T,w]=(0,qt.useState)(void 0),{document:k,page:A,scale:I,center:E,zoom:O,playToken:Q,currentTime:j,isPlaying:U,needsDecorateFavorite:B,presentedWebURL:z,presentedQuizId:N,presentedAttendanceId:V}=e.fullscreen,re=(et=e.fullscreen.playbackRate)!=null?et:1,ce=u==null?void 0:u[A],ge=ce;if(O){let ct=ce==null?void 0:ce.getCard(O.id);ct&amp;&amp;(ge=ct,I=O.scale,E=O.center,Q=O.playToken,U=O.isPlaying,re=(_e=O.playbackRate)!=null?_e:1,j=O.currentTime,B=O.needsDecorateFavorite)}let{x:ae,y:Y}=E,{screenHeight:W,screenWidth:G,id:ee,publisher:F}=e,{screen:{width:L,height:$}}=r,P=(0,qt.useRef)(X6(r,ee,t)),X=pe();Al(()=&gt;{var Be,Ze,St;P.current=X6(r,ee,t);let ct=(Be=h==null?void 0:h.avInitialized)!=null?Be:!1,bt=(h==null?void 0:h.loadError)===void 0;P.current.setAvLoaded(bt&amp;&amp;ct),P.current.setCardLoaded((St=(Ze=a.current)==null?void 0:Ze.isReady())!=null?St:!1),P.current.notify()},[ee]),(0,qt.useEffect)(()=&gt;{P.current.notify();let ct=setTimeout(()=&gt;{r.reduce(we(33,X.preparingScreenSharing))},1e3);sv(()=&gt;ie.lnsClient.downloadDocument(k).then(Is).then(bt=&gt;Es({id:k,file:bt,remapIds:!1,author:Nr(r,F)})),async({error:bt,retryCount:Be,totalConsumedTimeMs:Ze})=&gt;{if(bt instanceof sr&amp;&amp;bt.status===202&amp;&amp;(Be&lt;5||Ze&lt;6e4))return{delay:$b,unit:1e3};throw bt}).then(bt=&gt;{K(bt),d(Array.from(bt.iteratorOverGroup())),clearTimeout(ct),r.reduce(we(33,null))}).catch(bt=&gt;{let Be=()=&gt;{r.reduce(me(33,void 0),we(33,null),pp(t,void 0))};if(bt instanceof sr)r.reduce(me(33,{title:X.couldntReceiveScreenShare,message:(0,Fce.sprintf)(X.screenSharingTimedOutErrorMsg,bt.status),okMessage:X.endScreenShareReceiving,onOk:Be}));else{let Ze=xd({error:bt,isDocument:!0,courseId:t,targetId:`documents/${k}`,title:X.couldntReceiveScreenShare,okMessage:X.endScreenShareReceiving,onOk:Be});r.reduce(me(33,Ze))}})},[k]);let K=ct=&gt;{for(let bt of ct.memberAndChildrenIteratorOverGroup()){let Be=mr.get(bt);Be.drawn.clear(),Be.annotation.clear()}};(0,qt.useEffect)(()=&gt;{if(!ce||k!==ce.headGroup().document.id||!ge)return;let ct=ih(),bt=ct.subscribe(wt=&gt;{f(wt),P.current.setAvLoaded(wt.loadError===void 0&amp;&amp;wt.avInitialized),P.current.notify()}),Ze={...fo,onCardLoadingStateChanged:(wt,dr,Oe)=&gt;{var Fe,rt,Ct;Oe==="loaded"?((Fe=a.current)==null?void 0:Fe.addLoadedList(wt))&amp;&amp;((rt=a.current)==null?void 0:rt.isReady())&amp;&amp;(P.current.setCardLoaded(!0),P.current.notify()):Vp(Oe)&amp;&amp;Op({store:r,isRoot:!!((Ct=a.current)!=null&amp;&amp;Ct.isTargetCard(wt)),level:dr,errors:Oe})}},St=ge.descendantsCount()+1;a.current=new Hk(ge.id,St);let Ne=J(),Ce=new Id({canvas:Ne,state:{editorStore:ct,card:ge,screen:r.screen,store:r,noteMtx:new ft,viewStack:[{cardId:ge.id}],documentLoading:!1},role:wRe,playManager:new Ed,callback:{onCardSelected:()=&gt;{},onPop:()=&gt;()=&gt;{},onDrawnMarkedAsUnsaved:()=&gt;{},onTrashBoxHit(wt){},onEnsureDrawnGadget(wt){wt.gadgets.drawn=wt.drawnGeometry("drawn")},onZoomScroll:()=&gt;{},...Ze},decorateFavorites:B!=null?B:!1,mtx:te(ge)}),Te=(wt,dr)=&gt;{Ce.handleSingle(wt,dr),wt==="up"&amp;&amp;(Ce.hideTool(3e3),g(!0))},ze=(wt,dr,Oe)=&gt;{wt.style.cursor=Oe?"grabbing":"grab"};return s.current={onHandleSingle:Te,onHandleDoubleMove:Ce.handleDoubleMove,onHandleWheel:Ce.handleWheel,onHandleFreeMove:ze},Ce.setToolVisible(!0),Ce.hideTool(3e3),Ce.scheduleRender(),p(Ce),f(ct),()=&gt;{bt.close(),Ce.close()}},[u]),(0,qt.useEffect)(()=&gt;{z?x(!0):(C&amp;&amp;x(!1),l.current&amp;&amp;l.current.close())},[z]),nd(()=&gt;{l.current&amp;&amp;l.current.close()}),(0,qt.useEffect)(()=&gt;{if(N){let ct=(ge==null?void 0:ge.author.id)===r.userInfo.user_id,bt=e.fullscreen.presentedQuizSharingMode,Be;switch(bt){case"normal":Be=ct?"create":"answer";break;case"game":Be="game";break;default:Be=void 0}S(Be)}else y&amp;&amp;S(void 0)},[N]),(0,qt.useEffect)(()=&gt;{V?w("open"):T&amp;&amp;w(void 0)},[V]),(0,qt.useEffect)(()=&gt;{var bt,Be;if(!c||!ce||!h||!ge)return;if(!((bt=a.current)!=null&amp;&amp;bt.isTargetCard(ge))){P.current.setCardLoaded(!1),P.current.notify();let Ze=ge.descendantsCount()+1;a.current=new Hk(ge.id,Ze)}if(((Be=ce.document)==null?void 0:Be.id)!==k)return;let ct=te(ge);c.onNextState({card:ge,editorStore:h,noteMtx:new ft,screen:r.screen,store:r,viewStack:[{cardId:ge.id}],documentLoading:!1},ct.clone())},[c,A,I,ae,Y,L,$,W,G,ge==null?void 0:ge.id]),(0,qt.useEffect)(()=&gt;{h==null||h.setLoadError(void 0)},[ge==null?void 0:ge.id]);let R=(xe=h==null?void 0:h.avInitialized)!=null?xe:!1;(0,qt.useEffect)(()=&gt;{R&amp;&amp;h&amp;&amp;!h.avPlaying&amp;&amp;(c==null||c.playManager.beginSeek(h),c==null||c.playManager.seek(h,j),c==null||c.playManager.endSeek(h,c.card))},[j]),(0,qt.useEffect)(()=&gt;{h==null||h.setAvSpeedScale(re)},[R,re]),(0,qt.useEffect)(()=&gt;{R&amp;&amp;h&amp;&amp;(c==null||c.playManager.beginSeek(h),c==null||c.playManager.seek(h,j),c==null||c.playManager.endSeek(h,c.card),U?c==null||c.playManager.play(h):c==null||c.playManager.pause(h))},[R,U,Q]),(0,qt.useEffect)(()=&gt;{c&amp;&amp;(c.decorateFavorite=B,r.reduce(ho()))},[B]);let H=ct=&gt;{var Be;if(!c||!u||!h||!ge)return;let bt=u[A];((Be=bt==null?void 0:bt.headGroup().document)==null?void 0:Be.id)===k&amp;&amp;c.onNextState({card:ge,editorStore:h,noteMtx:new ft,screen:r.screen,store:r,viewStack:[{cardId:ge.id}],documentLoading:!1},ct==null?void 0:ct.clone())};(0,qt.useEffect)(()=&gt;{m&amp;&amp;H(i.current),g(!1)},[m]),(0,qt.useEffect)(()=&gt;H(),[r,h,u]);let J=()=&gt;{let ct=o.current,bt=window.devicePixelRatio,Be=ct.getBoundingClientRect(),Ze=Be.width/G,St=Be.height/W,Ne=Ze&lt;St?Ze:St,Ce=$e(Math.floor(G*Ne*bt),Math.floor(W*Ne*bt));return Jc(n.current,Ce)||(n.current.width=Ce.width,n.current.height=Ce.height,n.current.style.width=G*Ne+"px",n.current.style.height=W*Ne+"px"),b(Ne),n.current},te=ct=&gt;{let bt=J(),Be=$e(bt.getBoundingClientRect()),Ze=window.devicePixelRatio,St=eN({canvasSize:Nt(Be,Ze),cardSize:ct.size,scale:I,center:E});return i.current=St},de=(Ge=h==null?void 0:h.avVolume)!=null?Ge:0;h!=null&amp;&amp;h.avMuted&amp;&amp;(de=0);let se=()=&gt;{let ct=h==null?void 0:h.avMuted;h==null||h.setAvMuted(!ct)},be=()=&gt;{z&amp;&amp;(l.current=Sw(z))},Pe=(ct,bt,Be)=&gt;{Be==="up"&amp;&amp;ct===0?(h==null||h.setAvVolume(bt),h==null||h.setAvMuted(!0),c==null||c.setToolVisible(!0),c==null||c.hideTool(3e3)):(h==null||h.setAvMuted(!1),h==null||h.setAvVolume(ct),c==null||c.setToolVisible(!0))},ke=ge instanceof zn||ge instanceof Qn,Ie=ge==null?void 0:ge.gadgets.naration,Ve=n.current&amp;&amp;c,Ae=e.fullscreen.authorId,lt=r.users.byId[Ae];(0,qt.useEffect)(()=&gt;{lt||lp(r,Ae)},[lt]);let vt=zt(lt);return(0,qt.useEffect)(()=&gt;{h!=null&amp;&amp;h.forcedMute&amp;&amp;(c==null||c.hideTool(3e3))},[h==null?void 0:h.forcedMute]),qt.default.createElement(qt.default.Fragment,null,qt.default.createElement("div",{className:"screenSharingFullscreen",ref:o,onMouseMove:()=&gt;{g(!0)}},qt.default.createElement("canvas",{ref:n}),(h==null?void 0:h.loadError)&amp;&amp;qt.default.createElement(lh,{error:h.loadError}),Ve&amp;&amp;qt.default.createElement(Ad,{canvasSize:n.current,notification:e,scale:v,callback:s.current})),ge instanceof jr&amp;&amp;qt.default.createElement(qt.default.Fragment,null,y&amp;&amp;qt.default.createElement(Mv,{card:ge,store:r,onDismiss:()=&gt;S(void 0),onClosing:()=&gt;S("closing"),viewMode:y,updateCoverDataBeforeUnload:!1})),ge instanceof wn&amp;&amp;qt.default.createElement(qt.default.Fragment,null,T&amp;&amp;qt.default.createElement(Nv,{card:ge,viewMode:T,onDismiss:()=&gt;w(void 0),updateCoverDataBeforeUnload:!1})),z&amp;&amp;qt.default.createElement(eo,{open:C,onClose:()=&gt;x(!1),transition:"fade",container:"none"},qt.default.createElement(_ce,{url:z,authorName:vt,anonymous:!!e.anonymous,onDismiss:()=&gt;x(!1),onConfirm:()=&gt;be()})),h&amp;&amp;qt.default.createElement(Ba,{in:h.toolVisible},qt.default.createElement("div",{className:"fade",onMouseEnter:()=&gt;{c==null||c.setToolVisible(!0)},onMouseLeave:()=&gt;{c==null||c.hideTool(3e3)}},qt.default.createElement("div",{className:"editorHeader"},qt.default.createElement("div",{className:"editorHeaderInner"},qt.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},qt.default.createElement("div",{className:"flexSpacer"}),qt.default.createElement(Au,{store:r,courseId:t,sessionId:ee,publisher:F,forStudent:e.presenter!=null})))),qt.default.createElement("div",{className:"editorFooter fade"},qt.default.createElement("div",{className:"editorFooterInner"},(ke||Ie)&amp;&amp;qt.default.createElement("div",{className:"screenSharingVolumeTool"},qt.default.createElement("div",{className:"editorButton animeVolumeButton screenSharingVolumeButton",role:"button",onClick:se},qt.default.createElement("div",{className:`editorButtonIcon ${h.avMuted?"muteButtonIcon":"volumeButtonIcon"}`})),qt.default.createElement(Dw,{contentClassName:"screenSharingVolumeSlider",knobDiameter:15,onChange:Pe,volume:de})),!e.anonymous&amp;&amp;qt.default.createElement("div",{className:"screenSharingAuthorNameWrapper"},qt.default.createElement("div",{className:"screenSharingAuthorName"},vt)))))))};var Fu=oe(ve()),WP=oe(ve());var Nce=({store:r,notification:e,courseId:t})=&gt;{let{comparison:n,id:o,publisher:i,anonymous:s}=e,a=(0,WP.useRef)(new Gk(r,o,t)),l=(0,WP.useRef)([]),u=()=&gt;{let y=!0;for(let S of n.items)if(l.current.indexOf(S.document)===-1){y=!1;break}a.current.notifyReadyState(y)};(0,WP.useEffect)(()=&gt;{u()},[n.items.length,o]);let d=y=&gt;S=&gt;{if(S){let T=l.current.indexOf(y);l.current.splice(T,T&gt;-1?1:0),u()}else l.current.includes(y)||(l.current.push(y),u())},{screen:c}=r,p=c.width/e.screenWidth,h=c.height/e.screenHeight,f=Math.min(p,h),m=e.screenWidth*f,g=e.screenHeight*f,v={width:m+"px",height:g+"px"},b=m/n.columnCount,C=g/n.rowCount,x={display:"grid",gridTemplateColumns:`repeat(${n.columnCount}, ${b}px)`,gridTemplateRows:`repeat(${n.rowCount}, ${C}px)`};return Fu.default.createElement("div",{className:"screenSharingComparison"},Fu.default.createElement("div",{className:"screenSharingComparisonInner",style:v},Fu.default.createElement("div",{style:x},n.items.map(y=&gt;{let S=r.users.byId[y.authorId];S||lp(r,y.authorId);let T=zt(S),w={gridRow:Math.floor(y.order/n.columnCount)+1,gridColumn:y.order%n.columnCount+1};return Fu.default.createElement("div",{key:y.document,className:"screenSharingComparisonCell",style:w},Fu.default.createElement(Wl,{id:y.document,index:y.page,skipForKnown404Url:!1,updatable:!0,onLoadChanged:d(y.document)}),!s&amp;&amp;Fu.default.createElement("div",{className:"screenSharingComparisonCellAuthorName"},T))}))),Fu.default.createElement(Ad,{canvasSize:{width:m*window.devicePixelRatio,height:g*window.devicePixelRatio},notification:e,scale:f}),Fu.default.createElement("div",{className:"editorHeader"},Fu.default.createElement("div",{className:"editorHeaderInner"},Fu.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},Fu.default.createElement("div",{className:"flexSpacer"}),Fu.default.createElement(Au,{store:r,courseId:t,sessionId:o,publisher:i,forStudent:!1})))))};var Tr=oe(ve());var TRe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,canLeave:!0,drawnType:"drawn",shouldSyncPlayController(r,e){return e.presenter===r.userInfo.user_id}},Bce=({store:r,courseId:e,notification:t})=&gt;{var N,V,re,ce,ge,ae,Y,W,G,ee,F,L,$,P,X;let n=(0,Tr.useRef)(null),o=(0,Tr.useRef)(null),[i,s]=$r({viewStack:[]}),a=(0,Tr.useRef)(i),l=pe(),u=(0,Tr.useRef)(r),d=(0,Tr.useRef)(new Map);(0,Tr.useEffect)(()=&gt;{u.current=r},[r]),(0,Tr.useEffect)(()=&gt;(ie.lnsClient.downloadDocument(t.fullscreen.document).then(Is).then(async K=&gt;{var H;let R=await Es({id:t.fullscreen.document,file:K,author:Nr(r,(H=t.presenter)!=null?H:r.userInfo.user_id)});c(R);for(let J of R.memberAndChildrenIteratorOverGroup())d.current.set(J.id,J);s({head:R})}).catch(Je.handleError).catch(K=&gt;{fe.error(K);let R="documents/"+t.fullscreen.document;NN({store:r,targetId:R,courseId:e,onOk:()=&gt;{r.reduce(me(28,void 0))}})(K)}),r.reduce(Jt({type:"normal",text:l.yourTurnToPresent})),()=&gt;{r.reduce(Os(void 0))}),[]);let c=K=&gt;{for(let R of K.memberAndChildrenIteratorOverGroup())mr.get(R).annotation.clear()};(0,Tr.useEffect)(()=&gt;{var bt,Be;Ee(n.current!=null);let K=i.head;if(!K)return;let R=n.current,{page:H,currentTime:J,zoom:te}=t.fullscreen,de=(bt=K.memberAt(H))!=null?bt:K;te&amp;&amp;(de=(Be=de.getCard(te.id))!=null?Be:de);let se=_w({store:r,drawnType:"drawn",uploadThumb:!0}),be=ih({avSeekTime:J}),Pe=(Ze,St,Ne)=&gt;{Ze.id===Ne.cardId&amp;&amp;St.avSpeedScale!==Ne.avSpeedScale&amp;&amp;Ze.replaceContent({"metadata.playback_rate":Ne.avSpeedScale})};be.subscribe(Ze=&gt;{var Ce;let St=(Ce=a.current.renderer)==null?void 0:Ce.card,Ne=a.current.editorStore;St&amp;&amp;Ne&amp;&amp;Pe(St,Ne,Ze),s({editorStore:Ze})});let ke=({card:Ze,op:St,thumbs:Ne})=&gt;{Ee(Ze.document!=null);let{id:Ce,index:Te}=Ze.document;se.update({documentId:Ce,index:Te,card:Ze,op:St,thumbs:Ne})},Ie=({type:Ze,target:St})=&gt;St==="card"&amp;&amp;["down","up"].includes(Ze),Ve=Ze=&gt;{let St=a.current.viewStack,Ne=mv(Ze,_e.card)||Ze;St.push({cardId:Ne.id,animate:!0}),s({viewStack:St})},Ae=Ze=&gt;d.current.get(Ze),lt=(Ze,St,Ne)=&gt;{var Ce;Vp(Ne)&amp;&amp;Op({store:r,isRoot:Ze.id===((Ce=a.current.renderer)==null?void 0:Ce.card.id),level:St,errors:Ne})},et=[...[...de.parentsIterator()].reverse().map(Ze=&gt;({cardId:Ze.id})),{cardId:de.id}],_e=new Id({canvas:R,state:{store:r,editorStore:be,card:de,screen:r.screen,viewStack:[...et],noteMtx:new ft,documentLoading:!1},role:TRe,playManager:new Ed,callback:{onCardSelected:h,onPop:p,onDrawnMarkedAsUnsaved:ke,onTrashBoxHit(){},onEnsureDrawnGadget(Ze){Ze.gadgets.drawn=Ze.drawnGeometry("drawn")},onZoomScroll(){},onQuizButtonClicked:S,onAttendanceButtonClicked:w,...fo,shouldHandleCardEvent:Ie,onCardClicked:Ve,getCardOnNote:Ae,onCardLoadingStateChanged:lt},mtx:eN({canvasSize:$e(g,v),cardSize:de.size,scale:t.fullscreen.scale,center:t.fullscreen.center})});_e.scheduleRender();let xe=new Gn(R);xe.onSingle=_e.handleSingle,xe.onDoubleMove=_e.handleDoubleMove;let Ge=new Ha(R,{enableDragEventPropagation:!0});Ge.onFreeMove=E;let ct={onHandleSingle:()=&gt;{},onHandleDoubleMove:_e.handleDoubleMove,onHandleWheel:_e.handleWheel};return s({renderer:_e,editorStore:be,laserLayerCallback:ct,viewStack:et}),window.addEventListener("keydown",f),()=&gt;{xe.unbind(),Ge.unbind(),_e.close(),se.close(),window.removeEventListener("keydown",f)}},[i.head]),(0,Tr.useEffect)(()=&gt;{var be;let{renderer:K,editorStore:R,viewStack:H}=i;if(!K||!R)return;a.current=i;let J=u.current,te=H.length-1,de=H[te].cardId,se=(be=d.current.get(de))!=null?be:K.card;K.onNextState({store:J,card:se,editorStore:R,screen:J.screen,noteMtx:new ft,viewStack:[...H],documentLoading:!1})}),(0,Tr.useEffect)(()=&gt;{let{renderer:K}=i;if(!K)return;let{id:R,type:H,publisher:J,presenter:te,anonymous:de,clientId:se,fullscreen:be}=t,{authorId:Pe,document:ke,presentedQuizId:Ie,presentedAttendanceId:Ve}=be;r.reduce(Os({courseId:e,type:H,presenter:te,sessionId:R,publisher:J,clientId:se,anonymous:de===!0,fullscreen:{authorId:Pe,document:ke,presentedQuizId:Ie,presentedAttendanceId:Ve}}))},[i.renderer]),(0,Tr.useEffect)(()=&gt;{var K;(K=i.editorStore)==null||K.setLoadError(void 0)},[(N=i.renderer)==null?void 0:N.card]);let p=()=&gt;{let{renderer:K,editorStore:R}=a.current;if(!K||!R||!K.card.parent)return;let J=a.current.viewStack;J.pop(),s({viewStack:J})},h=K=&gt;{let{renderer:R,editorStore:H}=a.current;if(!R||!H)return;let J=a.current.viewStack;J[J.length-1]={cardId:K.id},s({viewStack:J})},f=K=&gt;{let R=a.current;if(!R)return;let{renderer:H,quizViewMode:J,attendanceViewMode:te}=R;J!==void 0||te!==void 0||H==null||H.handleKey(K)},m=window.devicePixelRatio,[g,v]=[Math.floor(r.screen.width*m),Math.floor(r.screen.height*m)],b=((V=i.editorStore)==null?void 0:V.selectedTool)===0&amp;&amp;((re=i.editorStore)==null?void 0:re.activeFingerTool)==="laser",C=(ge=(ce=i.renderer)==null?void 0:ce.toolOpacity)!=null?ge:1,x=(ae=i.renderer)==null?void 0:ae.card,y=()=&gt;{var R;let K=(R=a.current.renderer)==null?void 0:R.card;if(K instanceof jr)return K},S=K=&gt;{console.log("onClickHandler");let{renderer:R,editorStore:H}=a.current,J=y();if(!(!R||!H||!J))switch(H.setToolVisible(!0),K){case 0:H.setQuizSharingModeDialogOpen(!0);break;case 1:s({quizViewMode:"create"});break;case 2:s({quizViewMode:"result"});break;case 3:s({quizViewMode:"answer"});break;case 4:let te=zP(J.content.preset,l);window.open(te);break}},T=K=&gt;{let{renderer:R}=a.current,H=y();if(!R||!H)return;let J=R.getFullScreenSharingState();s({quizViewMode:K==="normal"?"result":"game",attendanceViewMode:void 0}),Gy({store:r,editorRendererState:J,card:H,anonymous:!1,authorId:r.userInfo.user_id,presentedQuizSharingMode:K})},w=K=&gt;{let{renderer:R,editorStore:H}=a.current;if(!R||!H)return;let J=u.current,{card:te}=R;if(te instanceof wn)switch(H.setToolVisible(!0),K){case 1:s({attendanceViewMode:"open"});break;case 0:if(s({attendanceViewMode:"open"}),J.userInfo.is_teacher){let be=R.getFullScreenSharingState();gv(J,be,te.content.attendance_id)}break;case 2:let de=J.userInfo.is_teacher,se=HP(de,l);window.open(se);break}},k=()=&gt;{s({quizViewMode:void 0});let{renderer:K}=a.current;!K||Ux(u.current,K.getFullScreenSharingState(),void 0)},A=()=&gt;{s({quizViewMode:"closing"})},I=()=&gt;{s({attendanceViewMode:void 0});let{renderer:K}=a.current;!K||gv(r,K.getFullScreenSharingState(),void 0)},E=(K,R)=&gt;{var Ve,Ae,lt;let{renderer:H,editorStore:J,quizViewMode:te,attendanceViewMode:de}=a.current;if(!H||!J)return;let{selectedTool:se,toolVisible:be}=J,Pe=n.current;if(!Pe)return;if(se===1){Pe.style.cursor="default";return}let Ie=R?"grabbing":"grab";if(!R&amp;&amp;!te&amp;&amp;!de){let vt=H.getObjectUnderPoint(K);(((Ve=vt==null?void 0:vt.eventTarget)==null?void 0:Ve.startsWith("quizButton"))||((Ae=vt==null?void 0:vt.eventTarget)==null?void 0:Ae.startsWith("attendanceButton"))||((lt=vt==null?void 0:vt.eventTarget)==null?void 0:lt.startsWith("card")))&amp;&amp;(Ie="pointer")}Pe.style.cursor=Ie},O=K=&gt;{let{renderer:R}=a.current;if(!R)return;let H=R.getFullScreenSharingState();!H||Ox(u.current,H,K)},Q=Ov({screen:r.screen,isScreenSharing:!0,boundsForScreenSharing:990}),j=((Y=i.editorStore)==null?void 0:Y.selectedTool)===1,U=Q?!j:!0;(W=i.renderer)!=null&amp;&amp;W.card.parent&amp;&amp;(U=!1);let[B,z]=(0,Tr.useState)(!1);return jn(()=&gt;z(!0)),Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement("div",{className:"submissionPreview"},!i.renderer&amp;&amp;Tr.default.createElement(_t,{absolute:"top"}),Tr.default.createElement("canvas",{ref:n,className:"canvas",width:g,height:v,style:{backgroundColor:i.renderer?"transparent":"#888",width:"100%",height:"100%"}}),((G=i.editorStore)==null?void 0:G.loadError)&amp;&amp;Tr.default.createElement(lh,{error:i.editorStore.loadError}),b&amp;&amp;Tr.default.createElement(Ad,{canvasSize:{width:g,height:v},callback:i.laserLayerCallback,consumer:(ee=i.renderer)==null?void 0:ee.laserPointerConsumer}),Tr.default.createElement(tr,{className:"centralizedModalWrapper",open:(L=(F=i.editorStore)==null?void 0:F.quizSharingModeDialogOpen)!=null?L:!1,onClose:()=&gt;{var K;return(K=a.current.editorStore)==null?void 0:K.setQuizSharingModeDialogOpen(!1)},overlay:!0,container:document.body},Tr.default.createElement(Mw,{onStartQuizAnswerTogether:T,onClose:()=&gt;{var K;return(K=a.current.editorStore)==null?void 0:K.setQuizSharingModeDialogOpen(!1)}})),i.editorStore&amp;&amp;x&amp;&amp;i.renderer&amp;&amp;!i.quizViewMode&amp;&amp;!i.attendanceViewMode&amp;&amp;Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement(Ba,{in:i.editorStore.toolVisible},Tr.default.createElement("div",{className:"editorHeader"},Tr.default.createElement("div",{className:"editorHeaderInner"},Tr.default.createElement("div",{className:"editorHeaderButtonGroupGrid"},Tr.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},i.renderer.card.parent&amp;&amp;Tr.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Tr.default.createElement("div",{role:"button",className:"editorButton",onClick:p},Tr.default.createElement("div",{className:"editorButtonIcon backButtonIcon"})))),Tr.default.createElement("div",{className:"editorHeaderButtonGroup"},Tr.default.createElement(Uv,{editorStore:i.editorStore,animateAppear:!1}),U&amp;&amp;Tr.default.createElement(Zf,{store:r,editorStore:i.editorStore,forDocument:!0,drawToolDispatcher:i.renderer,animateAppear:!1}),x instanceof Vo&amp;&amp;x.content.uri&amp;&amp;Tr.default.createElement(zv,{card:x,onClick:()=&gt;{i.renderer&amp;&amp;i.editorStore&amp;&amp;i.renderer.playManager.pause(i.editorStore)},onClickWithShare:()=&gt;O(x.content.uri),closedWindowCallback:()=&gt;O(void 0)})),Tr.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},Tr.default.createElement("div",{className:"flexSpacer"}),r.screenSharingState&amp;&amp;Tr.default.createElement(rm,{store:r,sharingState:r.screenSharingState}),Tr.default.createElement(Au,{store:r,courseId:e,sessionId:t.id,publisher:t.publisher,forStudent:!0})))),Q&amp;&amp;j&amp;&amp;Tr.default.createElement("div",{className:"editorHeaderInner"},Tr.default.createElement("div",{className:"editorHeaderButtonGroup"},Tr.default.createElement(Zf,{store:r,editorStore:i.editorStore,forDocument:!0,drawToolDispatcher:i.renderer,animateAppear:B}))))),Tr.default.createElement(Bv,{card:x,store:r,editorStore:i.editorStore,screen:r.screen,editable:!1,onCardSelected:h,playManager:i.renderer.playManager,opacity:C,cardRendererCallback:fo,popoverContainer:($=o.current)!=null?$:void 0})),((P=i.renderer)==null?void 0:P.card)instanceof jr&amp;&amp;i.quizViewMode&amp;&amp;Tr.default.createElement(Mv,{card:i.renderer.card,store:r,onDismiss:k,onClosing:A,viewMode:i.quizViewMode,updateCoverDataBeforeUnload:!1}),((X=i.renderer)==null?void 0:X.card)instanceof wn&amp;&amp;i.attendanceViewMode&amp;&amp;Tr.default.createElement(Nv,{card:i.renderer.card,viewMode:i.attendanceViewMode,onDismiss:I,updateCoverDataBeforeUnload:!1})),Tr.default.createElement("div",{ref:o}))};var Rce=()=&gt;{let r=Me(),e=Xt(r);if(typeof e!="number")return null;let t=r.screenSharingActionNotification[e];if(!t||Mb(t))return null;let n=r.userInfo.user_id;return t.publisher===n&amp;&amp;t.presenter===void 0?null:$P.default.createElement("div",{className:"screenSharing"},as(t)&amp;&amp;t.presenter!==n&amp;&amp;$P.default.createElement(Mce,{store:r,notification:t,courseId:e}),as(t)&amp;&amp;t.presenter===n&amp;&amp;$P.default.createElement(Bce,{store:r,notification:t,courseId:e}),D1(t)&amp;&amp;$P.default.createElement(Nce,{store:r,notification:t,courseId:e}))};var Vl=oe(ve()),Lce=oe(ve());var Oce=()=&gt;{let r=Me();return Vl.default.createElement(tr,{className:"centralizedModalWrapper userGroupJoinCodeDialogWrapper",open:r.userGroupJoinCode!=null,onClose:()=&gt;{r.reduce(()=&gt;({userGroupJoinCode:{$set:void 0}}))},container:"none"},Vl.default.createElement(DRe,{store:r}))},DRe=({store:r})=&gt;{if(!r.userGroupJoinCode)return null;let{code:e,userGroup:t}=r.userGroupJoinCode,n=e!=="",o=r.userGroups.attendancesById[t.id];(0,Lce.useEffect)(()=&gt;{dB(r,t.id)},[]);let i=o==null?void 0:o.length,s=()=&gt;{r.reduce(()=&gt;({userGroupJoinCode:{$set:void 0}}))},a=pe();return Vl.default.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialog"},Vl.default.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialogTitle"},Vl.default.createElement("div",{className:"userGroupJoinCodeDialogTitlePrefix"},a.groupName),Vl.default.createElement("div",{className:"userGroupJoinCodeDialogTitleGroupName"},t.name)),n&amp;&amp;Vl.default.createElement("div",{className:"userGroupJoinCodeDialogItem userGroupJoinCodeDialogCode"},e),Vl.default.createElement("div",{className:"userGroupJoinCodeDialogItem"},n?a.groupJoinInstructions:a.groupJoinCodeDeactivated),Vl.default.createElement("div",{className:"userGroupJoinCodeDialogItem"},Vl.default.createElement("span",null,a.membersJoinedCount),Vl.default.createElement("span",{style:{display:"inline-block",width:"3em",padding:"0 5px 0 0",textAlign:"right"}},i!=null?i:"")),Vl.default.createElement("div",{className:"userGroupJoinCodeDialogButtonWrap"},Vl.default.createElement(Gt,{onClick:s,className:"userGroupJoinCodeDialogButton"},a.close)))};var VP=oe(ve()),yR=oe(ve());var Uce=()=&gt;{let r=Me(),[e,t]=(0,yR.useState)(!1);return(0,yR.useEffect)(()=&gt;{let n=Object.values(r.restartLoadingDialogOpen).filter(o=&gt;o===!0).length;t(n&gt;0)},[r.restartLoadingDialogOpen]),e?VP.default.createElement(VP.default.Fragment,null,VP.default.createElement(_t,{absolute:"top"}),VP.default.createElement("div",{className:"restartLoadingDialog"})):null};var jP=oe(ve());var NW=()=&gt;{let r=Me(),e=r.updatingMessageOrder,[t]=Object.values(r.alerts);if(t)return jP.default.createElement(Wm,{...t});if(e.length===0)return null;let n=e.map(o=&gt;({id:o,message:r.updatingMessages[o]}));return n.some(o=&gt;o.message.length&gt;0)?jP.default.createElement($m,null,n.map(o=&gt;jP.default.createElement(wK,{key:o.id},o.message))):jP.default.createElement(HB,null)};var KP=oe(ve()),CR=oe(ve());var zce=()=&gt;{var n,o;let r=Me(),[e,t]=(0,CR.useState)(!1);return(0,CR.useEffect)(()=&gt;{r.toastMessage&amp;&amp;(t(!0),setTimeout(()=&gt;{t(!1)},3e3))},[r.toastMessage]),KP.default.createElement(Mn,{in:e,timeout:300,classNames:"toast",unmountOnExit:!0,onExited:()=&gt;r.reduce(Jt(void 0))},KP.default.createElement("div",{className:"toast"},KP.default.createElement("div",{className:"toastInner","data-toast-type":(n=r.toastMessage)==null?void 0:n.type,onClick:()=&gt;t(!1)},(o=r.toastMessage)==null?void 0:o.text.split(`
`).map((i,s)=&gt;KP.default.createElement("div",{key:s},i)))))};var Bd=oe(ve());var Hce=oe(ve()),Gce=oe(ve());var Wce=({children:r,zIndex:e,className:t="",onClick:n=()=&gt;{}})=&gt;{let o=(0,Gce.useRef)(null);return jn(()=&gt;{o.current.addEventListener("touchmove",i=&gt;{i.preventDefault()})}),Hce.default.createElement("div",{ref:o,className:`fullScreenPortal ${t}`,style:e?{zIndex:e}:{},onClick:n},r)};var Nn=oe(ve()),BW=oe(ve());var RW=oe(Wr());var $ce=function({store:e}){let t=pe(),n=e.fetchStates[nt.closedYears()],o=e.userInfo.is_teacher?e.closedYears.school:e.closedYears.user;(0,BW.useEffect)(()=&gt;{n!=="done"&amp;&amp;Lie(e)},[]);let i=a=&gt;()=&gt;{e.reduce(Zu({type:"closedCourseList",year:a}))},s=o&amp;&amp;o.length&gt;0;return Nn.default.createElement(rr,null,Nn.default.createElement(Et,null,Nn.default.createElement(Ft,null,Nn.default.createElement(Mt,null,Nn.default.createElement(gt,{onClick:()=&gt;e.reduce(Ob())},t.back)),Nn.default.createElement(Vt,null,t.endedCoursesTitle),Nn.default.createElement(jt,null)),n==="fetching"&amp;&amp;Nn.default.createElement(_t,{absolute:"bottom"})),Nn.default.createElement(ur,null,s?Nn.default.createElement(gn,null,o.map(a=&gt;Nn.default.createElement(xr,{onClick:i(a),showArrow:!0,key:a},Nn.default.createElement(mn,null,(0,RW.sprintf)(t.year,a))))):n==="done"&amp;&amp;Nn.default.createElement(jce,{isTeacher:e.userInfo.is_teacher})))},Vce=function({store:e,year:t}){var d,c;let n=pe(),o=nt.closedCoursesByYear(t),i=e.fetchStates[o],a=((c=(d=e.courses.byYear[t])==null?void 0:d.user)!=null?c:[]).map(p=&gt;e.courses.byId[p]),l=Nb(a);(0,BW.useEffect)(()=&gt;{i!="done"&amp;&amp;Oie(e,t)},[]);let u=p=&gt;()=&gt;{e.reduce(ug(p),Zu({type:"noteList",courseId:p}))};return Nn.default.createElement(rr,null,Nn.default.createElement(Et,null,Nn.default.createElement(Ft,null,Nn.default.createElement(Mt,null,Nn.default.createElement(gt,{onClick:()=&gt;e.reduce(Ob())},n.back)),Nn.default.createElement(Vt,null,Nn.default.createElement(bd,null,Nn.default.createElement(Ml,null,(0,RW.sprintf)(n.year,t)),Nn.default.createElement(vd,null,n.subjectTitle))),Nn.default.createElement(jt,null)),i==="fetching"&amp;&amp;Nn.default.createElement(_t,{absolute:"bottom"})),Nn.default.createElement(ur,null,i==="done"&amp;&amp;l.length===0&amp;&amp;Nn.default.createElement(jce,{isTeacher:e.userInfo.is_teacher}),i==="done"&amp;&amp;l.length&gt;0&amp;&amp;l.map(p=&gt;Nn.default.createElement(gn,{title:p[0].user_group_name,key:p[0].user_group_id},p.map(h=&gt;Nn.default.createElement(xr,{showArrow:!0,onClick:u(h.course_id),key:h.course_id},Nn.default.createElement(mn,null,h.subject_name))))),e.userInfo.is_teacher&amp;&amp;Nn.default.createElement(gn,{title:""},Nn.default.createElement(xr,{disabled:i!=="done",onClick:()=&gt;{e.reduce(Zu({type:"closedUnassignedCourseList",year:t}))},showArrow:!0},Nn.default.createElement(mn,null,n.otherTeachersCoursesTitle)))))},jce=({isTeacher:r})=&gt;{let e=pe();return Nn.default.createElement("div",{className:"drawerContentSubDesc"},Nn.default.createElement("p",null,r?e.teacherNoClosedCourseTitle:e.studentNoClosedCourseTitle))};var Kce=()=&gt;{let r=Me(),e=()=&gt;{r.desktop&amp;&amp;r.reduce(Yq())},{drawer:t}=r,n=null,o=t.viewStack[t.viewStack.length-1];return o.type==="courseList"?n=Bd.default.createElement(kue,{store:r}):o.type==="unassignedCourseList"?n=Bd.default.createElement(zG,{store:r}):o.type==="closedYearList"?n=Bd.default.createElement($ce,{store:r}):o.type==="noteList"?n=Bd.default.createElement(Hue,{courseId:o.courseId}):o.type==="closedCourseList"?n=Bd.default.createElement(Vce,{store:r,year:o.year}):o.type==="closedUnassignedCourseList"&amp;&amp;(n=Bd.default.createElement(zG,{store:r,forYear:o.year})),Bd.default.createElement("div",{className:"drawerWrapper"},Bd.default.createElement(Mn,{timeout:250,in:t.open,unmountOnExit:!0,classNames:"drawerPortal"},Bd.default.createElement(Wce,{className:"drawerPortal",onClick:e})),Bd.default.createElement(Mn,{timeout:250,in:t.open,unmountOnExit:!0,classNames:"drawer"},Bd.default.createElement("div",{className:"drawer"},n)))};var Bn=oe(ve()),qP=oe(ve());var yt=oe(ve()),SR=oe(ve());var qce=()=&gt;{let r=Me(),e=!r.screen.isMobile,t=()=&gt;{r.reduce(aS(!1))},n=pe(),o=({currentTarget:p})=&gt;{let h=p.selectedIndex,f=p.options[h].value;Ee(hK(f),"selected value should be of type AppLocale");let m=new URL(location.href);m.searchParams.set("hl",f),location.href=m.toString()},i=()=&gt;{r.reduce(Wi({experimentalFeatures:{enableSharedNote:{$set:!r.userPreference.experimentalFeatures.enableSharedNote}}}))},s=()=&gt;{r.reduce(Wi({experimentalFeatures:{enableSearch:{$set:!r.userPreference.experimentalFeatures.enableSearch}}}))},a=()=&gt;{r.reduce(Wi({debugFeatures:{showDrawnAssetState:{$set:!r.userPreference.debugFeatures.showDrawnAssetState}}}))},l=()=&gt;{let p=r.userPreference.debugFeatures.forceSharedNoteDisconnected,h=[Wi({debugFeatures:{forceSharedNoteDisconnected:{$set:!p}}})];p?(r.reduce(...h),location.reload()):(h.push(Y0("disconnected")),r.reduce(...h))},u=Object.entries(fK).map(([p,h])=&gt;yt.default.createElement("option",{key:p,value:p},n[h])),[d,c]=(0,SR.useState)();return(0,SR.useEffect)(()=&gt;{OH().then(p=&gt;{!p||(r.pushTokenState==="registered"?d=n.registered:r.pushTokenState==="register failed"||r.pushTokenState==="update failed"?d=n.error:d=n.unregistered,c(d))}).catch(p=&gt;{fe.log(p),c(n.error)})},[r.pushTokenState]),yt.default.createElement(eo,{open:r.preferenceOpen,onClose:t,transition:"up"},yt.default.createElement(rr,{round:e},yt.default.createElement(Et,null,yt.default.createElement(Ft,null,yt.default.createElement(Mt,null,yt.default.createElement(gt,{onClick:t},n.close)),yt.default.createElement(Vt,null,n.preferences),yt.default.createElement(jt,null))),yt.default.createElement(ur,{className:"userPreferencePanel"},yt.default.createElement(gn,{title:n.zoomTitle},yt.default.createElement(xr,{role:"general"},yt.default.createElement(mn,null,yt.default.createElement("label",{htmlFor:"userPreferenceInvertMouseWheel"},n.invertMouseWheel),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"userPreferenceInvertMouseWheel",type:"checkbox",checked:r.userPreference.invertMouseWheel,onChange:()=&gt;{r.reduce(Wi({invertMouseWheel:{$set:!r.userPreference.invertMouseWheel}}))}})))),yt.default.createElement(xr,{role:"general"},yt.default.createElement(mn,null,yt.default.createElement("div",null,n.mouseWheelSensitivity),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{type:"range",onChange:p=&gt;{let h=parseInt(p.target.value);r.reduce(Wi({mouseWheelMultiplier:{$set:h/100}}))},min:10,max:400,value:r.userPreference.mouseWheelMultiplier*100}),yt.default.createElement("div",{style:{paddingLeft:5,width:"44px"}},Math.round(r.userPreference.mouseWheelMultiplier*100),"%")))),yt.default.createElement(xr,{role:"general"},yt.default.createElement(mn,null,yt.default.createElement("div",null,n.trackpadPinchZoomSensitivity),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{type:"range",onChange:p=&gt;{let h=parseInt(p.target.value);r.reduce(Wi({trackpadPinchZoomMultiplier:{$set:h/100}}))},min:10,max:400,value:r.userPreference.trackpadPinchZoomMultiplier*100}),yt.default.createElement("div",{style:{paddingLeft:5,width:"44px"}},Math.round(r.userPreference.trackpadPinchZoomMultiplier*100),"%"))))),yt.default.createElement(gn,{title:n.languageSettingTitle},yt.default.createElement(xr,{role:"general"},yt.default.createElement(mn,null,yt.default.createElement("select",{className:"uiLangSelector",onChange:o,value:r.locale},u)))),yt.default.createElement(gn,{title:n.recordingSettingTitle},yt.default.createElement(xr,{role:"general"},yt.default.createElement(mn,null,yt.default.createElement("label",{htmlFor:"userPreferenceEnableNoiseReduction"},n.enableAudioNoiseReduction),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"userPreferenceEnableNoiseReduction",type:"checkbox",checked:r.userPreference.enableAudioNoiseReduction,onChange:()=&gt;{r.reduce(Wi({enableAudioNoiseReduction:{$set:!r.userPreference.enableAudioNoiseReduction}}))}}))))),yt.default.createElement(gn,{title:n.experimentalFeatures},r.userInfo.is_teacher&amp;&amp;yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,yt.default.createElement("label",{htmlFor:"experimentalFeaturesSharedNote"},n.enableSharedNote)),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"experimentalFeaturesSharedNote",type:"checkbox",checked:r.userPreference.experimentalFeatures.enableSharedNote,onChange:i}))),Vr.getEndpoint("loilonote-search")&amp;&amp;yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,yt.default.createElement("label",{htmlFor:"experimentalFeaturesSearch"},n.enableSearch)),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"experimentalFeaturesSearch",type:"checkbox",checked:r.userPreference.experimentalFeatures.enableSearch,onChange:s})))),yt.default.createElement(gn,{title:n.aboutThisApp},yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,n.version),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},r.appVersion)),d&amp;&amp;yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,n.pushTokenRegistration),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},d))),yt.default.createElement(gn,{title:n.connectionStatus},yt.default.createElement(kRe,{status:r.pushConnectionState})),LN(r)&amp;&amp;yt.default.createElement(gn,{title:"\u30C7\u30D0\u30C3\u30B0"},yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,yt.default.createElement("label",{htmlFor:"debugFeaturesDrawnAssetState"},"\u624B\u66F8\u304D\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u72B6\u614B\u3092\u8868\u793A\u3059\u308B")),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"debugFeaturesDrawnAssetState",type:"checkbox",checked:r.userPreference.debugFeatures.showDrawnAssetState,onChange:a}))),yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,yt.default.createElement("label",{htmlFor:"debugFeaturesForceSharedNoteDisconnected"},"\u5171\u6709\u30CE\u30FC\u30C8\u672A\u63A5\u7D9A\u72B6\u614B\u306EUI\u3092\u518D\u73FE\u3059\u308B")),yt.default.createElement(No,null),yt.default.createElement("div",{className:"userPreferenceInputGroup"},yt.default.createElement("input",{id:"debugFeaturesForceSharedNoteDisconnected",type:"checkbox",checked:r.userPreference.debugFeatures.forceSharedNoteDisconnected,onChange:l})))))))},kRe=({status:r})=&gt;{let e=pe(),t=e.connectedToPushServer;return r==="reconnecting"?t=e.reconnectingToPushServer:r==="error"&amp;&amp;(t=e.couldntConnectToPushServer),yt.default.createElement(xr,{role:"general"},yt.default.createElement(Ur,null,yt.default.createElement(sw,{status:r})),yt.default.createElement(Ur,null,yt.default.createElement("div",{style:{padding:"10px 0"}},t)))};var bn=oe(ve());var Yce=oe(Wr());var Xce=()=&gt;{let r=Me(),e=pe(),t=!r.screen.isMobile,n=()=&gt;r.reduce(a_(!1));return bn.default.createElement(eo,{open:r.passwordDialogOpen,onClose:n,transition:"up"},bn.default.createElement(rr,{round:t},bn.default.createElement(Et,null,bn.default.createElement(Ft,null,bn.default.createElement(Mt,null,bn.default.createElement(gt,{onClick:n},e.close)),bn.default.createElement(Vt,null,e.changePassword),bn.default.createElement(jt,null))),bn.default.createElement(ur,null,bn.default.createElement(Jce,{forInit:!1}))))},Qce=()=&gt;{let r=Me(),e=!r.screen.isMobile,t=pe();return bn.default.createElement("div",{className:"pageContainer"},bn.default.createElement("div",{className:"passwordInitializer"},bn.default.createElement("div",{className:"schoolName"},r.userInfo.school_name),bn.default.createElement("div",{className:"passwordInitializerInner","data-round":e},bn.default.createElement(Jce,{forInit:!0})),bn.default.createElement("div",{className:"logoutLink"},bn.default.createElement("a",{href:"/logout"},t.logout))))},Jce=({forInit:r})=&gt;{let e=pe(),t=Me(),[n,o]=$r({currentPassword:"",newPassword:"",newPasswordConfirm:"",sending:!1}),i=!!n.currentPassword&amp;&amp;!!n.newPassword&amp;&amp;!!n.newPasswordConfirm,s=()=&gt;{let a=62;o({sending:!0}),t.reduce(we(a,"")),ie.apiClient.updatePassword({currentPassword:n.currentPassword,newPassword:n.newPassword,newPasswordConfirm:n.newPasswordConfirm}).then(()=&gt;{t.reduce(eY({title:e.passwordUpdated,okMessage:e.reload,color:"info",onOk:async()=&gt;(location.reload(),new Promise(()=&gt;{}))}))}).catch(Je.handleError).catch(l=&gt;{let{message:u,unknownError:d}=ot(l,{400:c=&gt;{var h;let p=c.asJson();return(h=p==null?void 0:p.error)!=null&amp;&amp;h.msg?p==null?void 0:p.error.msg:e.invalidRequest},403:c=&gt;{var h;let p=c.asJson();return(p==null?void 0:p.message)==="old_password is incorrect."?e.currentPasswordIncorrect:(h=p==null?void 0:p.message)!=null&amp;&amp;h.includes("IP address")?e.ipAddressRestricted:e.accessDenied}});t.reduce(we(a,null),me(a,{title:e.couldntChangePassword,message:u,unknownError:d,onOk:()=&gt;{o({sending:!1}),t.reduce(me(a,void 0))},okMessage:e.back}))})};return bn.default.createElement("div",{className:"passwordDialog"},r&amp;&amp;bn.default.createElement("div",null,bn.default.createElement("div",{className:"passwordDialogDisplayName"},(0,Yce.sprintf)(e.hiUser,zt(t.userInfo))),bn.default.createElement("div",{className:"passwordDialogDisplayName"},e.welcomeToLns),bn.default.createElement("p",{className:"passwordDialogMessage"},e.setNewPassword)),bn.default.createElement("form",{onSubmit:a=&gt;{a.preventDefault(),s()}},bn.default.createElement("input",{type:"text",hidden:!0,readOnly:!0,autoComplete:"username",value:t.userInfo.username}),bn.default.createElement(fw,null,bn.default.createElement(cB,null,e.currentPassword),bn.default.createElement(mw,{type:"password",required:!0,pattern:hE,autoComplete:"current-password",onChange:a=&gt;{o({currentPassword:a.currentTarget.value})}})),!r&amp;&amp;bn.default.createElement(fw,{style:{textAlign:"center"}},bn.default.createElement("a",{href:e.forgotPasswordPageUrl,rel:"noopener",target:"_blank"},e.forgotPasswordLinkText)),bn.default.createElement(fw,null,bn.default.createElement(cB,null,e.newPassword),bn.default.createElement(mw,{type:"password",minLength:6,maxLength:128,pattern:hE,autoComplete:"new-password",required:!0,onChange:a=&gt;{o({newPassword:a.currentTarget.value})}})),bn.default.createElement(fw,null,bn.default.createElement(cB,null,e.newPasswordConfirm),bn.default.createElement(mw,{type:"password",minLength:6,maxLength:128,pattern:hE,autoComplete:"new-password",required:!0,onChange:a=&gt;{o({newPasswordConfirm:a.currentTarget.value})}})),bn.default.createElement(fw,null,bn.default.createElement(Rle,{disabled:!i||n.sending,value:e.submitPassword}))))};var PRe="WatchTutorial",Gv=r=&gt;r.id===PRe,xR=(r,e)=&gt;e!==void 0&amp;&amp;e.rev&gt;=r.rev,wR=(r,e)=&gt;r.filter(t=&gt;!Gv(t)&amp;&amp;!xR(t,e[t.id])),Zce=(r,e)=&gt;{let t=r.findIndex(n=&gt;!Gv(n)&amp;&amp;!xR(n,e[n.id]));if(t&gt;-1)return t};var epe=(r,e,t)=&gt;{let n=he.get().strings;return{title:n.failedPlayTutorial,okMessage:n.reload,onOk:()=&gt;{r.reduce(me(65,void 0)),t()},message:e.message,cancelMessage:n.close,onCancel:()=&gt;{r.reduce(me(65,void 0))}}};var tpe="https://assets.loilo.tv/loilonote/tutorial/",rpe=r=&gt;`${tpe}${r?"":"Dev"}WebTutorialList.json`,LW=r=&gt;tpe+r.path;var ARe=async r=&gt;{let e=he.get().strings,t;try{t=await fetch(rpe(r.releaseStage==="production"))}catch(n){return{type:"canceled",message:e.couldntGet_CheckInternetConnection}}if(t.ok){let n=await t.json(),o=SK(r.locale);return o in n?{type:"success",tutorial:n[o]}:{type:"unsupported"}}else return{type:"canceled",message:`Failed to fetch playlist (status: ${t.status})`}},TR=async r=&gt;{ei(nt.tutorial(),"fetching");let e=await ARe(r);if(e.type==="success"){let{tutorial:t}=e,n=r.userInfo.is_teacher?t.teacher:t.student,o=await ie.idb.checkedTutorials.getChecked(r.userInfo.user_id);r.reduce(()=&gt;({tutorials:{$set:{contents:[...n,t.finishTutorial],finishTutorial:t.finishTutorial}},checkedTutorials:{$set:o},tutorialDialogOpen:{$set:wR(n,o).length&gt;0}}),ei(nt.tutorial(),"done"))}else e.type==="unsupported"?r.reduce(ei(nt.tutorial(),null)):r.reduce(me(65,epe(r,e,()=&gt;{TR(r)})),ei(nt.tutorial(),null))},npe=r=&gt;{r.tutorials?r.reduce(()=&gt;({tutorialDialogOpen:{$set:!0}})):TR(r)},ope=(r,e)=&gt;{ie.idb.checkedTutorials.putChecked(r.userInfo.user_id,e),r.reduce(()=&gt;({checkedTutorials:{$set:e}}))},ipe=(r,e)=&gt;{let{id:t,rev:n}=e;ope(r,{...r.checkedTutorials,[t]:{rev:n}})},spe=r=&gt;{let{tutorials:e}=r;if(!e)return;let t={};for(let n of e.contents)Gv(n)||(t[n.id]={rev:n.rev});ope(r,t)};var ape=()=&gt;{let r=Me(),{userInfo:e}=r,t=pe(),[n,o]=(0,qP.useState)(),i=async()=&gt;{window.confirm(t.confirmLogout)&amp;&amp;location.replace("/logout")};(0,qP.useEffect)(()=&gt;{r.teacherToolOpen&amp;&amp;r.userProfileOpen&amp;&amp;r.reduce(a(!1))},[r.teacherToolOpen]),(0,qP.useEffect)(()=&gt;{o(r.maintenanceInfos.length&gt;0)},[r.maintenanceInfos]);let s=r.editor!=null||r.timelineOpen||r.materialBoxOpen||r.submissionBoxOpen,a=d=&gt;()=&gt;({userProfileOpen:{$set:d}}),l=()=&gt;{let d=[a(!0)];r.teacherToolOpen&amp;&amp;d.push(lg(!1)),r.reduce(...d)},u=Rq(r);return Bn.default.createElement(Bn.default.Fragment,null,Bn.default.createElement("div",{className:"userProfile",style:{display:s?"none":"flex"}},Bn.default.createElement("div",{className:"userProfileUserNameWrapper"},Bn.default.createElement("div",{className:"userProfileUserName",onClick:l},Bn.default.createElement("div",{style:{position:"relative"}},Bn.default.createElement("div",{className:"profileIcon"}),u&amp;&amp;Bn.default.createElement("div",{style:{position:"absolute",top:-3,left:-3}},Bn.default.createElement(pG,{status:u.severity}))),!r.screen.isMobile&amp;&amp;Bn.default.createElement("div",{className:"name"},zt(e)),Bn.default.createElement("div",{className:"arrowIcon"})),Bn.default.createElement("div",{className:"userProfilePopoverAnchor"},Bn.default.createElement(xt,{open:r.userProfileOpen,onClose:()=&gt;r.reduce(a(!1))},Bn.default.createElement("div",{className:"userProfilePopover"},Bn.default.createElement(Rr,null,Bn.default.createElement("div",{className:"userProfilePopoverAccountItem"},Bn.default.createElement("div",{style:{marginBottom:10}},r.isSsoUser?`${e.school_name}`:`${e.username}@${e.school_name}`),Bn.default.createElement("div",null,zt(e)))),Bn.default.createElement(L2,{href:bK(r.locale,r.userInfo.school_country),target:"_blank"},t.support),r.tutorials&amp;&amp;Bn.default.createElement(Rr,{role:"button",onClick:()=&gt;{r.reduce(a(!1)),npe(r)}},Bn.default.createElement("div",null,t.watchTutorial)),Bn.default.createElement(Rr,{role:"button",onClick:()=&gt;{r.reduce(a(!1),aS(!0))}},u&amp;&amp;Bn.default.createElement("div",{className:"userInfoNotificationCount"},u.count),Bn.default.createElement("div",null,t.preferences)),!r.isSsoUser&amp;&amp;Bn.default.createElement(Rr,{role:"button",onClick:()=&gt;{r.reduce(a(!1),a_(!0))}},t.changePassword),Bn.default.createElement(L2,{href:vK(r.locale),target:"_blank"},Bn.default.createElement("div",null,Bn.default.createElement("div",null,t.serviceStatus),n&amp;&amp;Bn.default.createElement("div",{className:"userProfileMaintenanceInfo"},t.maintenanceScheduled))),e.is_teacher&amp;&amp;Bn.default.createElement(L2,{href:`${r.lnsEndpoint}/users/sign_in`,target:"_blank"},t.adminPage),Bn.default.createElement(Rr,{role:"button",onClick:i},t.logoutOption))))),(!r.screen.isMobile||r.screen.width&gt;=480)&amp;&amp;Bn.default.createElement(FN,{store:r})),Bn.default.createElement(qce,null),Bn.default.createElement(Xce,null))};var Kn=oe(ve()),vC=oe(ve());var lpe=()=&gt;{let r=Me(),[e,t]=(0,vC.useState)(!1);if(!r.newSubmissionDialog)return null;let{courseId:n,submissionNumber:o}=r.newSubmissionDialog,i=()=&gt;{var l;n!==((l=r.desktop)==null?void 0:l.courseId)?t(!0):s()},s=()=&gt;{t(!1),r.reduce(lS())},a=he.get().strings;return Kn.default.createElement(Kn.default.Fragment,null,Kn.default.createElement(IRe,{store:r,courseId:r.newSubmissionDialog.courseId,submissionNumber:o,onWork:i,onClose:s}),Kn.default.createElement(eo,{open:e,onClose:()=&gt;t(!1),transition:"up",container:"none"},Kn.default.createElement(vw,{store:r,courseId:n,message:a.chooseNoteToWorkIn,onClose:()=&gt;t(!1),onReady:s,onReadyBefore:()=&gt;r.reduce(W1())})))},IRe=({store:r,courseId:e,submissionNumber:t,onWork:n,onClose:o})=&gt;{let[i,s]=(0,vC.useState)(!1),[a,l]=(0,vC.useState)(!1);if((0,vC.useEffect)(()=&gt;{var C;return e!==((C=r.desktop)==null?void 0:C.courseId)?(hN({store:r,courseId:e,submissionNumber:t}),Ua(r,e),l(!0)):s(!0),()=&gt;{s(!1)}},[e,t]),(0,vC.useEffect)(()=&gt;{let C=r.fetchStates[nt.courseAttributes(e)],x=r.fetchStates[nt.submission(e,t)];if(C instanceof Error||x instanceof Error){r.reduce(lS());return}!a||C!=="done"||x!=="done"||(l(!1),s(!0))},[r.submissions,r.courseAttributes]),!i)return null;let u=pn(e,t),d=r.submissions.byKey[u],c=he.get().strings;if(!d)return Kn.default.createElement(Ev,{onClose:o});let p=au(r,e),h=ls(r,e),f=d.message,m=new Date(d.expiry),g=Ks(m,c.submissionDeadlineFmt),b=new su(m.getTime()-Date.now()).ms&gt;0;return Kn.default.createElement(Kn.default.Fragment,null,Kn.default.createElement(tr,{className:"newSubmissionBoxDialog",open:!!d,onClose:o,overlay:!0,container:"none"},Kn.default.createElement("div",{className:"newSubmissionBoxDialogInner"},Kn.default.createElement(rr,{round:!0},Kn.default.createElement(Et,null,Kn.default.createElement(Ft,null,Kn.default.createElement(Mt,null),Kn.default.createElement(Vt,null,c.newTaskCreated),Kn.default.createElement(jt,null,Kn.default.createElement(lx,{onClick:o})))),Kn.default.createElement(ur,{className:"newSubmissionBoxDialogBody"},Kn.default.createElement("div",{className:"newSubmissionBoxDialogSubtitleContainer"},Kn.default.createElement("div",{className:"newSubmissionBoxDialogGroupNameWrapper"},Kn.default.createElement("div",{className:"newSubmissionBoxDialogGroupName"},Kn.default.createElement(nr,{container:"none"},p))),Kn.default.createElement("div",{className:"newSubmissionBoxDialogSubjectNameWrapper"},Kn.default.createElement("div",{className:"newSubmissionBoxDialogSubjectName"},Kn.default.createElement(nr,{container:"none"},h)))),Kn.default.createElement("div",{className:"newSubmissionBoxDialogTitleContainer"},b?Kn.default.createElement(lr,{className:"submissionBoxIcon",src:"/img/Waiting_For_AnswersIcon@2x.png"}):Kn.default.createElement(lr,{className:"submissionBoxIcon",src:"/img/ExpiredTaskIcon@2x.png"}),Kn.default.createElement(nr,{className:"newSubmissionBoxDialogSubmissionName",lineClamp:3,container:"none"},f)),b&amp;&amp;Kn.default.createElement("div",{className:"newSubmissionBoxDialogDeadline"},Kn.default.createElement(Cue,{isSubmitted:d.submitted},g)),Kn.default.createElement(Gt,{className:"newSubmissionBoxDialogWorkButton",onClick:n},c.getToWork))))))};var fl=oe(ve()),Ka=oe(ve());var bC=class{constructor(e,t){this.recorderResult=ss();this.onDataAvailable=e=&gt;{let t=e.data;t.size&gt;0&amp;&amp;this.dataStore.add(t)};this.onStop=()=&gt;{this.dataStore.close().then(({blob:e})=&gt;{this.recorderResult.resolve(e)}).catch(e=&gt;{throw e})};var u,d,c,p;this.cameraStream=e;let n=e.stream.getVideoTracks()[0],{width:o,height:i}=n.getSettings(),s=bC.getPreferredVideoBitRate(o,i);this.dataStore=QF(t),this.recorder=new MediaRecorder(this.cameraStream.stream,{mimeType:t,videoBitsPerSecond:s,audioBitsPerSecond:HD});let a=(d=(u=this.recorder)==null?void 0:u.audioBitsPerSecond)!=null?d:HD,l=(p=(c=this.recorder)==null?void 0:c.videoBitsPerSecond)!=null?p:s;this.maxLengthMS=bC.getVideoMaxLengthMS(a+l),this.recorder.ondataavailable=this.onDataAvailable,this.recorder.onstop=this.onStop,this.recorder.onerror=h=&gt;this.recorderResult.reject(h)}start(){this.recorder.start(500)}async stop(){return this.recorder.stop(),this.recorderResult}get state(){return this.recorder.state}static getPreferredVideoBitRate(e,t){if(!e||!t)return zD.small;let n=Math.min(e,t),o=nte;return n&lt;=o.small?zD.small:n&lt;=o.medium?zD.medium:zD.large}static getVideoMaxLengthMS(e){return Math.floor(77309411328e-1/e*1e3)}};async function upe(r){let e=Wh(r),t=await navigator.mediaDevices.getUserMedia(e);return{stream:t,dispose(){t.getTracks().forEach(n=&gt;n.stop())}}}var zc=oe(ve()),Tpe=oe(ve());var UW=oe(ve()),PR=oe(ve());function kR(r){return!!r&amp;&amp;r.videoWidth&gt;0&amp;&amp;r.videoHeight&gt;0}var Wv=100;function $v(r){let{sW:e,sH:t}=r;return e&gt;480&amp;&amp;t&gt;480?[0,0]:e&gt;t?ERe(r):_Re(r)}function OW({sW:r,sH:e,vW:t,vH:n,rotation:o=0}){let i=r&gt;e,s=t&gt;n,a=o%2===0?s:!s;return i===a}function ERe(r){if(!OW(r))return[0,0];let{sW:e,sH:t,vW:n,vH:o}=r,i=Math.max(n,o),s=Math.min(n,o),l=$i(e,t,i,s)*i,u=.5*(e-l);if(u&gt;=Wv)return[0,0];let d=Wv-u;return[-Math.min(u,d),0]}function _Re(r){if(!OW(r))return[0,0];let{sW:e,sH:t,vW:n,vH:o}=r,i=Math.min(n,o),s=Math.max(n,o),l=$i(e,t,i,s)*s,u=.5*(t-l);if(u&gt;=Wv)return[0,0];let d=Wv-u,c=Math.min(u,d);return[0,-c]}function FRe({sW:r,sH:e,vW:t,vH:n,translation:o}){let i=.5*(r-t),s=.5*(e-n),a=r&gt;e,[l,u]=o,d=new Sn(i+l,s+u,t,n),c=r-d.right,p=e-d.bottom,h=a?Math.max(Wv,c):c,f=a?p:Math.max(p,Wv);return{left:d.x,right:h,bottom:f}}function MRe(r,e){return r&gt;e?{left:0,right:Wv,bottom:0}:{left:0,right:0,bottom:Wv}}function dpe({sW:r,sH:e,vW:t,vH:n,translation:o}){let i=$i(r,e,t,n),[s,a]=[t*i,n*i];return OW({sW:r,sH:e,vW:t,vH:n})?FRe({sW:r,sH:e,vW:s,vH:a,translation:o}):MRe(r,e)}var DR=class{constructor(e,t){this.range=e;this.length=t}toValue(e){let{min:t,max:n,step:o}=this.range;if(e&lt;=0)return t;if(e&gt;=this.length)return n;let i=e/this.length,s=t+(n-t)*i,a=Math.floor((s-t)/o);return it(t+a*o,t,n)}toPixels(e){let{min:t,max:n}=this.range;if(e&lt;=t)return 0;if(e&gt;=n)return this.length;let o=Math.abs(t-e)/(n-t)*this.length;return it(o,0,this.length)}};var NRe=(r,e)=&gt;{let t=r.isHidden===e.isHidden&amp;&amp;r.stream.id===e.stream.id&amp;&amp;r.rotation===e.rotation;return e.ignoreScreenSizeChange===!0?t:t&amp;&amp;r.screenSize.width===e.screenSize.width&amp;&amp;r.screenSize.height===e.screenSize.height},Bw=r=&gt;{let{screen:e}=Me();return UW.default.createElement(BRe,{...r,screenSize:e})},BRe=(0,PR.memo)(({isHidden:r,stream:e,videoRef:t,onLoaded:n,screenSize:o,centered:i=!1,rotation:s=0})=&gt;{(0,PR.useEffect)(()=&gt;{var c;if(!!r)return(c=t.current)==null||c.addEventListener("loadeddata",l),()=&gt;{var p;return(p=t.current)==null?void 0:p.removeEventListener("loadeddata",l)}},[r]);let a=c=&gt;{c!==null&amp;&amp;(t.current=c,e!==null&amp;&amp;(c.srcObject=e))},l=({target:c})=&gt;{c instanceof HTMLVideoElement&amp;&amp;c.videoWidth&gt;2&amp;&amp;(c.removeEventListener("loadeddata",l),n(c.videoWidth,c.videoHeight))},u=r?"hidden":"visible",d="";if(kR(t.current)){let{width:c,height:p}=o,{videoWidth:h,videoHeight:f}=t.current,m=90*s,g=1;if(s%2===1){let C=$i(c,p,h,f);g=$i(c,p,f,h)/C}let[v,b]=[0,0];i||([v,b]=$v({sW:c,sH:p,vW:h,vH:f,rotation:s})),d=`translate(${v}px, ${b}px) rotate(${m}deg) scale(${g})`}return UW.default.createElement("video",{style:{visibility:u,transform:d},ref:a,className:"centeredPreview camFullSize",muted:!0,autoPlay:!0,playsInline:!0})},NRe);var _R=oe(ve()),zw=oe(ve());var Rd=oe(ve()),om=oe(ve());var Vv=oe(ve()),jv=oe(ve());var Rw=8,cpe=({video:r,startPlayback:e,freeze:t})=&gt;{let n=(0,jv.useRef)(null),o=(0,jv.useRef)(null),i=(0,jv.useRef)(!1),[s,a]=(0,jv.useState)(Rw);(0,jv.useEffect)(()=&gt;(o.current=new Gn(n.current,{ignoreDevicePixelRatio:!0}),o.current.onSingle=l,()=&gt;{var c;(c=o.current)==null||c.unbind()}),[]);let l=(c,p)=&gt;{if(!n.current||!_a(r.duration))return;c==="down"&amp;&amp;r.playbackRate!==0&amp;&amp;!i.current&amp;&amp;(i.current=!0,t());let{width:h}=n.current.getBoundingClientRect(),f=it(p.x,Rw,h),m=(f-Rw)/(h-Rw)*r.duration;r.currentTime=m,a(f),c==="up"&amp;&amp;i.current&amp;&amp;(i.current=!1,e())},{duration:u}=r,d=0;if(i.current)d=s;else if(n.current&amp;&amp;_a(u)){let{width:c}=n.current.getBoundingClientRect();d=r.currentTime/u*(c-Rw)+Rw}return Vv.default.createElement("div",{className:"cameraSliderWrapper"},Vv.default.createElement("div",{className:"cameraSlider camFullSize"},Vv.default.createElement("div",{ref:n,className:"cameraSliderBarWrapper"},Vv.default.createElement("div",{className:"cameraSliderBarInner camFullSize"},Vv.default.createElement("div",{className:"cameraSliderBar"}))),Vv.default.createElement("div",{className:"cameraSliderControlWrapper",style:{transform:`translateX(${d}px)`}},Vv.default.createElement("div",{className:"cameraSliderControl"}))))};var un=oe(ve());var nm=oe(ve()),AR=oe(ve());var YP="rgba(7, 14, 30, 0.9)",zW=({state:r,dispatcher:e})=&gt;{let{screen:{isMobile:t,width:n,height:o}}=Me(),[i,s]=(0,AR.useState)(!1),{isLoading:a,mode:l,resolutionIndex:u,resolutionOptions:d}=r,c=n&gt;o,p=d[u];if((0,AR.useEffect)(()=&gt;{var b;if(a||!p||l==="qr")return;let v=(b=NE(window.screen))!=null?b:!c;e.updateResolutionOptionState(v)},[t,c,a]),!p||l==="qr")return null;let h=()=&gt;{a||s(!i)},f=()=&gt;{s(!1)},m=v=&gt;{let b=d[v];b.equals(p)||e.setResolution(b)};return nm.default.createElement(RRe,{resolution:p,isMobile:t,disabled:a,onClick:h},nm.default.createElement(xt,{onClose:f,open:i,arrowColor:YP,anchor:t&amp;&amp;c?"middleRight":"bottomCenter",className:"resSelectorPopover"},d.map((v,b)=&gt;nm.default.createElement(Rr,{key:b,className:b===u?"cameraPopoverSelectedItem":"cameraPopoverItem",onClick:()=&gt;m(b),role:"button"},v.label))))},RRe=({isMobile:r,resolution:e,disabled:t,onClick:n,children:o})=&gt;r?nm.default.createElement(Kv,{onClick:n,disabled:t},nm.default.createElement(Lw,{iconClass:"resolutionButton",disabled:t}),o):nm.default.createElement("div",{className:"resolutionSelector",role:"button",onClick:n,"data-enabled":!t},nm.default.createElement("div",{className:"resolutionSelectorArrow","data-enabled":!t}),nm.default.createElement("div",{className:"centeredContent"},e.label),o);var hpe=oe(ve());var LRe=r=&gt;(ppe(r.videoObjectUrl),ppe(r.photoObjectUrl),{...r,isLoading:!0,isRecording:!1,isQrCodeScanning:!1,cameraUuid:Sr(),videoContentType:null,videoObjectUrl:null,photoObjectUrl:null,qrCodeContent:null,isQrContentPreviewing:!1,error:null,message:null,canSkipCreation:!1});function IR(r){return r==="audio"?"audioDeviceIndex":r==="qr"?"qrVideoDeviceIndex":"videoDeviceIndex"}var ORe=(r,e)=&gt;{let t=e==="audio"?r.audioDevices:r.videoDevices;if(!t||t.length&lt;2)return r;let n=IR(e),i=(r[n]+1)%t.length;return{...r,[n]:i,isLoading:!0,isQrCodeScanning:!1,lastSwitched:e==="video"?"audio":"video"}},URe=(r,e)=&gt;{if(r.mode==="qr"||!r.videoDevices||r.videoDevices.length&lt;1)return r;let{videoDevices:t,videoDeviceIndex:n,mode:o,resPrefs:i}=r,{deviceId:s}=t[n],a=W4(s,o==="photo"),l={...i,[a]:e};return{...r,isLoading:!0,isQrCodeScanning:!1,resPrefs:l}},zRe=(r,e,t)=&gt;{let n={videoDevices:e.video,audioDevices:e.audio,canSkipCreation:!VRe(r,e)};if(!t)return{...r,...n};let{videoDeviceId:o,audioDeviceId:i,qrVideoDeviceId:s}=t;if(r.cameraStream){let d=WW(r.cameraStream.stream);d.videoDeviceId&amp;&amp;r.mode==="qr"?s=d.videoDeviceId:d.videoDeviceId&amp;&amp;(o=d.videoDeviceId),d.audioDeviceId&amp;&amp;(i=d.audioDeviceId)}let a=e.video.findIndex(d=&gt;d.deviceId===o),l=e.audio.findIndex(d=&gt;d.deviceId===i),u=e.video.findIndex(d=&gt;d.deviceId===s);return a&gt;-1&amp;&amp;(n.videoDeviceIndex=a),l&gt;-1&amp;&amp;(n.audioDeviceIndex=l),u&gt;-1&amp;&amp;(n.qrVideoDeviceIndex=u),{...r,...n}},HRe=(r,e,t)=&gt;{let n=GRe(r,e),o={...r,...n,cameraStream:e,canSkipCreation:!1};if(r.mode==="qr")return o;let i=fpe(e,t);return{...o,...i,isFirstLaunch:!1}},WW=r=&gt;{let[e]=r.getVideoTracks(),t=e.getSettings().deviceId,[n]=r==null?void 0:r.getAudioTracks(),o=n==null?void 0:n.getSettings().deviceId;return{videoDeviceId:t,audioDeviceId:o}},GRe=(r,e)=&gt;{var a,l,u,d;let{videoDeviceId:t,audioDeviceId:n}=WW(e.stream),o=(l=(a=r.videoDevices)==null?void 0:a.findIndex(c=&gt;c.deviceId===t))!=null?l:-1,i=(d=(u=r.audioDevices)==null?void 0:u.findIndex(c=&gt;c.deviceId===n))!=null?d:-1,s={};if(o&gt;=0){let c=IR(r.mode==="qr"?"qr":"video");s[c]=o}return i&gt;=0&amp;&amp;(s.audioDeviceIndex=i),s},fpe=(r,e)=&gt;{let t=[],n=-1;try{let o=r.stream.getVideoTracks()[0],i=aq(o),s=lq(o);t=sq(i,s,e),n=t.findIndex(a=&gt;a.equals(i))}catch(o){fe.log("could not get resolution options",o)}return{resolutionOptions:t,resolutionIndex:n}},WRe=(r,e)=&gt;{let{cameraStream:t}=r;if(!t)return r;let n=fpe(t,e);return{...r,...n}},$Re=r=&gt;{let e=(r.photoRotation+3)%4;return{...r,photoRotation:e}};function ppe(r){r!==null&amp;&amp;r.length&gt;0&amp;&amp;window.URL.revokeObjectURL(r)}var GW=class{constructor(e,t){this.dispatch=e;this.onDismiss=t}dispatchPart(e){this.dispatch(t=&gt;({...t,...e}))}endLoad(){this.dispatchPart({isLoading:!1})}startRecording(){this.dispatchPart({isRecording:!0})}setMode(e){let t=e==="video"?"audio":"video";this.dispatchPart({isLoading:!0,lastSwitched:t,mode:e})}setScanningState(e){this.dispatchPart({isQrCodeScanning:e})}reset(){this.dispatch(LRe)}setResolution(e){this.dispatch(t=&gt;URe(t,e))}setNextDevice(e){this.dispatch(t=&gt;ORe(t,e))}setVideoUrl(e,t){this.dispatchPart({videoObjectUrl:e,isRecording:!1,videoContentType:t})}setPhotoUrl(e){this.dispatchPart({photoObjectUrl:e})}setQrCodeContent(e){this.dispatchPart({qrCodeContent:e})}startQrContentPreviewing(){this.dispatchPart({isQrContentPreviewing:!0,isQrCodeScanning:!1})}resetQrContentState(){this.dispatchPart({qrCodeContent:null,isQrContentPreviewing:!1})}setDevices(e,t){this.dispatch(n=&gt;zRe(n,e,t))}setCameraStream(e,t){this.dispatch(n=&gt;HRe(n,e,t))}updateResolutionOptionState(e){this.dispatch(t=&gt;WRe(t,e))}setError(e){this.dispatchPart({error:e,isRecording:!1,isQrCodeScanning:!1})}setMessage(e){this.dispatchPart({message:e})}rotatePhoto(){this.dispatch($Re)}dismissDialog(){this.dispatchPart({isQrCodeScanning:!1}),this.onDismiss()}endFirstLaunch(){this.dispatchPart({isFirstLaunch:!1})}resetCanSkipCreation(){this.dispatchPart({canSkipCreation:!1})}setIsVideoModeDisabled(e){this.dispatchPart({isVideoModeDisabled:e})}},mpe=(r,e,t)=&gt;{let{resolutions:n,videoDeviceId:o}=t,[i,s]=(0,hpe.useState)({isLoading:!0,isRecording:!1,mode:e,isQrCodeScanning:!1,cameraUuid:Sr(),videoDeviceIndex:0,audioDeviceIndex:0,qrVideoDeviceIndex:-1,videoContentType:null,videoObjectUrl:null,photoObjectUrl:null,qrCodeContent:null,isQrContentPreviewing:!1,videoDevices:null,audioDevices:null,cameraStream:null,resPrefs:n,error:null,lastSwitched:"video",message:null,photoRotation:0,resolutionOptions:[],resolutionIndex:-1,isFirstLaunch:o===null,canSkipCreation:!1,isVideoModeDisabled:!1,supportedVideoRecorderFormat:XF("video")});return[i,new GW(s,r)]},gpe=(r,e)=&gt;{let{mode:t,cameraStream:n}=r,{videoDeviceId:o,audioDeviceId:i}=WW(n.stream);if(t==="qr")return{mode:t,qrVideoDeviceId:o};let s={mode:t,videoDeviceId:o};if(t==="video"&amp;&amp;i&amp;&amp;(s.audioDeviceId=i),Object.entries(r.resPrefs).length&gt;0){let a={...e,...r.resPrefs};s.resolutions=a}return s};function vpe(r,e){var f;let{videoDevices:t,videoDeviceIndex:n,audioDevices:o,audioDeviceIndex:i,qrVideoDeviceIndex:s,resPrefs:a,mode:l,isFirstLaunch:u}=r,d,c;if(u)return{video:{resolution:U4}};d=t[n];let p=W4((f=d==null?void 0:d.deviceId)!=null?f:"",l==="photo"),h=a[p];return l==="photo"&amp;&amp;!h?h=U4:l==="video"?(c=o==null?void 0:o[i],h=h!=null?h:dq):l==="qr"&amp;&amp;(d=t[s],h=BE),{video:{resolution:h,deviceId:d==null?void 0:d.deviceId},audio:c?{enableNoiseReduction:e!=null?e:!1,deviceId:c.deviceId}:!1}}var HW=r=&gt;e=&gt;e.deviceId===r;function VRe(r,e){var c,p,h;let{videoDevices:t,videoDeviceIndex:n,qrVideoDeviceIndex:o,audioDevices:i,audioDeviceIndex:s,mode:a}=r;if(a==="qr"){let f=(c=t==null?void 0:t[o])==null?void 0:c.deviceId;return f?!e.video.some(HW(f)):!0}let l=(p=t==null?void 0:t[n])==null?void 0:p.deviceId;if(!l||!e.video.some(HW(l)))return!0;if(a==="photo")return!1;let d=(h=i==null?void 0:i[s])==null?void 0:h.deviceId;return d?!e.audio.some(HW(d)):!0}var XP=oe(ve()),Ow=oe(ve());var jRe=(r,e)=&gt;{let[t,n]=(0,Ow.useState)(!0),o=(0,Ow.useRef)(-1);return(0,Ow.useEffect)(()=&gt;(n(!0),o.current&gt;0&amp;&amp;window.clearTimeout(o.current),o.current=window.setTimeout(()=&gt;{o.current=-1,n(!1)},r),()=&gt;{o.current&amp;&amp;(window.clearTimeout(o.current),o.current=-1)}),e),t},$W=({type:r,label:e})=&gt;{let t=jRe(2e3,[e]);return XP.default.createElement(Mn,{in:t,appear:!0,enter:!0,exit:!0,unmountOnExit:!0,timeout:3e3,classNames:"fadeOutText"},XP.default.createElement("div",{className:"deviceDisplay"},XP.default.createElement("div",{className:`mediaDeviceIcon ${r}`}),XP.default.createElement("span",null,e)))};var hl=oe(ve()),bpe=oe(ve());var KRe=({index:r})=&gt;{let e={top:`${r*36}px`};return hl.default.createElement("div",{className:"cameraModeSelectorHighlight",style:e})};function VW(r,e){return r==="qr"?"QR":e[r]}var qRe=({mode:r,selected:e,disabled:t,onClick:n})=&gt;{let o=pe();return hl.default.createElement("div",{className:`cameraModeOption centeredContent ${e?"selectedCameraModeOptionColor":"cameraModeOptionColor"}`,onClick:n,"data-enabled":!t},VW(r,o))},YRe=({isLoading:r,isVideoModeDisabled:e,modes:t,modeIndex:n,setMode:o})=&gt;hl.default.createElement("div",{className:"cameraModeSelector",role:"button"},hl.default.createElement("div",{className:"cameraModeSelectorFlexContainer"},hl.default.createElement(KRe,{index:n}),t.map((i,s)=&gt;hl.default.createElement(qRe,{key:i,mode:i,selected:s===n,onClick:()=&gt;o(i),disabled:r||i==="video"&amp;&amp;e})))),XRe=({isLoading:r,modes:e,modeIndex:t,setMode:n,isLandscape:o,isVideoModeDisabled:i})=&gt;{let[s,a]=(0,bpe.useState)(!1),l=()=&gt;{a(!s)},u=pe(),d=o?"middleLeft":"topCenter";return hl.default.createElement("div",{className:"mobileModeSelector centeredContent",role:"button","data-enabled":!r,onClick:l},hl.default.createElement("div",{className:"centeredContent"},hl.default.createElement("div",null,VW(e[t],u)),hl.default.createElement(xt,{className:"mobileModeSelectorPopover",anchor:d,open:s,onClose:l,arrowColor:YP},e.map((c,p)=&gt;hl.default.createElement(Rr,{key:c,className:"mobileModeSelectorItem",role:"button","data-selected":p===t,onClick:()=&gt;n(c)},hl.default.createElement("div",{className:"mobileModeSelectorItemText","data-disabled":r||c==="video"&amp;&amp;i},VW(c,u)))))))},jW=({dispatcher:r,state:e})=&gt;{let{screen:{width:t,height:n,isMobile:o}}=Me(),{mode:i,isLoading:s,isVideoModeDisabled:a,supportedVideoRecorderFormat:l}=e,u=l?["photo","video","qr"]:["photo","qr"],d=Math.max(u.indexOf(i),0),c=pe(),h={isLoading:s,modes:u,modeIndex:d,isVideoModeDisabled:a,setMode:f=&gt;{if(!(s||f===i)){if(f==="video"&amp;&amp;a){r.setError({error:new Fb,title:c.micPermissionDeniedErrorMsg,message:c.noMicFoundErrorMsg,okMessage:c.getHelp,onOk:()=&gt;window.open(c.helpPageLinkToPermitCameraAndMic),cancelMessage:c.close});return}r.setMode(f)}}};return o?hl.default.createElement(XRe,{isLandscape:t&gt;n,...h}):hl.default.createElement(YRe,{...h})};var hi=oe(ve()),ja=oe(ve());function QRe(r,e){let{min:t,max:n,step:o}=e,i=Math.round(r/o)*o;return it(i,t,n)}var KW="exposureCompensation",qW="brightness",ER=class{constructor(e){this.track=e;let t=e.getCapabilities();KW in t?this.brightnessMetadata={key:KW,range:t[KW]}:qW in t?this.brightnessMetadata={key:qW,range:t[qW]}:this.brightnessMetadata=null}apply({brightness:e}){if(!Or(e)||!this.brightnessMetadata||this.brightness===e)return Promise.resolve();let{key:n,range:o}=this.brightnessMetadata,i=QRe(e,o);return this.track.applyConstraints({advanced:[{[n]:i}]})}get brightness(){if(this.brightnessMetadata)return this.track.getSettings()[this.brightnessMetadata.key]}};var YW=({state:r})=&gt;{let e=(0,ja.useMemo)(()=&gt;{if(!r.cameraStream)return;let{stream:t}=r.cameraStream,[n]=t.getVideoTracks();if(!ME(n))return;let o=n.getSettings();if(!!Ja(o))return new ER(n)},[r.cameraStream]);return r.mode==="qr"||!e||!e.brightnessMetadata?null:hi.default.createElement(JRe,{isLoading:r.isLoading,trackSettings:e})},JRe=({isLoading:r,trackSettings:e})=&gt;{var c;let{screen:t}=Me(),[n,o]=(0,ja.useState)(!1),[i,s]=(0,ja.useState)((c=e.brightness)!=null?c:0);(0,ja.useEffect)(()=&gt;{var p;s((p=e.brightness)!=null?p:0)},[e]);let a=()=&gt;{r||o(p=&gt;!p)},l=()=&gt;{o(!1)},u=p=&gt;{s(p),e.apply({brightness:p}).catch(fe.error)},d="middleLeft";return t.isMobile&amp;&amp;Mh(t)==="landscape"?d="middleRight":t.isMobile&amp;&amp;(d="bottomCenter"),hi.default.createElement(hi.default.Fragment,null,hi.default.createElement("div",{className:"brightnessButton"},hi.default.createElement(Kv,{disabled:r,onClick:a},hi.default.createElement(Lw,{iconClass:"brightnessButtonIcon",disabled:r})),hi.default.createElement(xt,{onClose:l,open:n,arrowColor:YP,anchor:d,className:"brightnessPopover"},hi.default.createElement("div",{className:"brightnessSliderContainer"},hi.default.createElement(ZRe,{settingName:"brightness",range:e.brightnessMetadata.range,value:i,setValue:u,vertical:!0},hi.default.createElement(lr,{src:"/svg/brightness_icon_yellow.svg",alt:"brightness slider thumb",className:"brightnessThumb"}))))))},ZRe=({range:r,value:e,setValue:t,settingName:n,vertical:o,children:i})=&gt;{let{min:s,max:a,step:l}=r,u=(d,c)=&gt;{t(d)};return hi.default.createElement("div",{className:`${n}Control`},hi.default.createElement(nLe,{value:e,step:l}),hi.default.createElement(eLe,{value:e,enabled:!0,min:s,max:a,step:l,onChange:u,thumbDiameter:30,thumbMargin:5,length:200,className:`${n}Slider`,vertical:o},i))},eLe=({children:r,onChange:e,step:t,min:n,max:o,value:i,thumbDiameter:s,thumbMargin:a,length:l,enabled:u=!0,className:d="",vertical:c})=&gt;{let p=(0,ja.useRef)(null),h=(0,ja.useRef)();(0,ja.useEffect)(()=&gt;(h.current=new Gn(p.current,{ignoreDevicePixelRatio:!0}),()=&gt;{var S;(S=h.current)==null||S.unbind(),h.current=void 0}),[]);let f=(0,ja.useMemo)(()=&gt;new DR({min:n,max:o,step:t},l),[n,o,t,l]),m=(0,ja.useRef)(0);(0,ja.useEffect)(()=&gt;{!h.current||(h.current.onSingle=(S,T)=&gt;{let w=c?T.y:T.x;if(S==="down"){let I=f.toPixels(i)+s;I&lt;=w&amp;&amp;w&lt;I+s&amp;&amp;(m.current=I+s/2-w)}let k=w-s/2+m.current,A=f.toValue(c?l-k:k);e(A,S)})},[i,s,e]);let g=f.toPixels(i),v=s/2+a,b=Math.max(0,g-v),C=Math.max(0,l-g-v),x=c?"vertical":"horizontal",y=c?"height":"width";return hi.default.createElement("div",{className:`cameraInputRange ${x} ${d}`,style:{[y]:`${l}px`},"data-enabled":u},hi.default.createElement(ype,{length:b,vertical:c}),hi.default.createElement(tLe,{diameter:s,margin:a},r),hi.default.createElement(ype,{length:C,vertical:c}),hi.default.createElement(rLe,{ref:p,thumbDiameter:s,length:l,vertical:c}))},tLe=({diameter:r,margin:e,children:t})=&gt;{let n=`${r}px`,o=`${r+2*e}px`;return hi.default.createElement("div",{className:"rangeThumbWrapper",style:{width:o,height:o}},hi.default.createElement("div",{className:"rangeThumb",style:{width:n,height:n}},t))},ype=({length:r,vertical:e})=&gt;{let t=e?{height:`${r}px`,width:"2px"}:{height:"2px",width:`${r}px`};return hi.default.createElement("div",{className:"rangeBar",style:t})},rLe=(0,ja.forwardRef)(({vertical:r,length:e,thumbDiameter:t},n)=&gt;{let[o,i]=r?["height","width"]:["width","height"];return hi.default.createElement("div",{className:"rangeTouchArea",ref:n,style:{[r?"bottom":"left"]:`${t/-2}px`,[i]:`${t}px`,[o]:`${e+t}px`}})}),nLe=({value:r,step:e})=&gt;{let t=Math.round(Math.log10(e)),n=Math.max(0,-1*t);return hi.default.createElement("div",{className:"sliderValue"},r.toFixed(n))};var Uw=({state:r,dispatcher:e})=&gt;{let{screen:{isMobile:t}}=Me(),{cancel:n}=pe(),{isRecording:o,isQrContentPreviewing:i}=r,s=()=&gt;{e.dismissDialog()};return o||i?null:un.default.createElement(un.default.Fragment,null,t?un.default.createElement(un.default.Fragment,null,un.default.createElement("div",{className:"primaryControlTray"},un.default.createElement("div",{className:"cameraToggleContainer"},un.default.createElement(Cpe,{state:r,dispatcher:e,isMobile:!0})),un.default.createElement("div",{className:"modeSelectorContainer"},un.default.createElement(jW,{state:r,dispatcher:e}))),un.default.createElement("div",{className:"secondaryControlTray"},un.default.createElement("div",{className:"cancelButtonPlaceHolder"}),un.default.createElement(Spe,{state:r,dispatcher:e}),un.default.createElement(zW,{state:r,dispatcher:e}),un.default.createElement(YW,{state:r,dispatcher:e})),un.default.createElement("button",{className:"mobileCancelButton iconButton centeredContent",onClick:s,role:"button"},un.default.createElement("div",{className:"crossIcon"}))):un.default.createElement(un.default.Fragment,null,un.default.createElement("div",{className:"primaryControlTray"},un.default.createElement("div",{className:"toggleButtonContainer"},un.default.createElement(Cpe,{state:r,dispatcher:e}),un.default.createElement(Spe,{state:r,dispatcher:e}),un.default.createElement(YW,{state:r,dispatcher:e})),un.default.createElement(jW,{state:r,dispatcher:e})),un.default.createElement("div",{className:"resSelectorContainer"},un.default.createElement(zW,{state:r,dispatcher:e})),un.default.createElement("button",{className:"cancelButton centeredContent",onClick:s,role:"button"},n)),un.default.createElement(oLe,{state:r}))},oLe=({state:r})=&gt;{let{isLoading:e,mode:t,videoDevices:n,audioDevices:o,videoDeviceIndex:i,qrVideoDeviceIndex:s,audioDeviceIndex:a}=r,l=t==="qr"?s:i,u=n==null?void 0:n[l],d=o==null?void 0:o[a];return un.default.createElement("div",{className:"deviceDisplayContainer"},!e&amp;&amp;u&amp;&amp;un.default.createElement($W,{type:"video",label:u.label}),t==="video"&amp;&amp;!e&amp;&amp;d&amp;&amp;un.default.createElement($W,{type:"audio",label:d.label}))},Cpe=({state:r,dispatcher:e,isMobile:t=!1})=&gt;{var p,h;let{isLoading:n,videoDevices:o}=r,i=r.mode==="qr"?"qr":"video",s=IR(i),a=r[s];if(o===null||o.length&lt;2)return null;let l=()=&gt;{e.setNextDevice(i)},u=(h=(p=o[a])==null?void 0:p.label)!=null?h:"";return un.default.createElement("div",{className:"cameraToggleButton",title:u},un.default.createElement(Kv,{disabled:n,onClick:l,className:t?"oblongControlIconButton":void 0},un.default.createElement(Lw,{className:t?"oblongControlIcon":void 0,iconClass:"videoToggleIconButton",disabled:n})))},Spe=({state:r,dispatcher:e})=&gt;{var c,p;let{mode:t,isLoading:n,audioDevices:o,audioDeviceIndex:i}=r,s=t==="video",a=o!==null&amp;&amp;o.length&gt;1;if(s&amp;&amp;!a)return null;let l=()=&gt;{n||(s?e.setNextDevice("audio"):e.rotatePhoto())},u=s&amp;&amp;(p=(c=o==null?void 0:o[i])==null?void 0:c.label)!=null?p:"";return un.default.createElement("div",{className:"secondaryToggleButton",title:u},un.default.createElement(Kv,{disabled:n,onClick:l},un.default.createElement(Lw,{iconClass:s?"audioToggleIconButton":"rotateIconButton",disabled:n})))},Kv=({onClick:r,disabled:e=!1,className:t="iconButton",children:n})=&gt;{let o=e?()=&gt;{}:r;return un.default.createElement("div",{className:`${t} centeredContent`,onClick:o,role:"button"},n)},Lw=({iconClass:r,disabled:e,className:t="cameraControlIcon"})=&gt;un.default.createElement("div",{className:`${t} ${r}`,"data-enabled":!e});var xpe=({onResetRequested:r,onImageUsed:e,videoObjectUrl:t,isInterrupted:n})=&gt;{let{screen:{width:o,height:i}}=Me(),s=(0,om.useRef)(null),[a,l]=(0,om.useState)([0,0]),[u,d]=(0,om.useState)(0),[c,p]=(0,om.useState)(!1);(0,om.useEffect)(()=&gt;{n&amp;&amp;c&amp;&amp;h()},[n]),(0,om.useEffect)(()=&gt;{if(s.current){let{videoWidth:y,videoHeight:S}=s.current,T=$v({sW:o,sH:i,vW:y,vH:S,rotation:0});l(T)}},[o,i]);let h=()=&gt;{let y=s.current;y.playbackRate===1&amp;&amp;(y.playbackRate=0,p(!1))},f=()=&gt;{let y=s.current;y.playbackRate===0&amp;&amp;(y.playbackRate=1,p(!0))},m=async()=&gt;{let y=s.current;y.paused?(y.playbackRate=1,await y.play(),p(!0)):f()},g=({target:y})=&gt;{if(!(y instanceof HTMLVideoElement))return;let{videoWidth:S,videoHeight:T}=y,w=$v({sW:o,sH:i,vW:S,vH:T,rotation:0});l(w),h()},v=({target:y})=&gt;{y instanceof HTMLVideoElement&amp;&amp;d(y.currentTime)},[b,C]=a,x=`translate(${b}px, ${C}px)`;return Rd.default.createElement("div",{className:"camFullSize"},Rd.default.createElement("video",{src:t,style:{transform:x},className:"centeredPreview camFullSize",ref:s,autoPlay:!1,preload:"auto",playsInline:!0,onLoadedData:g,onTimeUpdate:v,onPause:h}),Rd.default.createElement(iLe,{video:s.current,isPlaying:c,currentTime:u,translation:a,startPlayback:m,freeze:h}),Rd.default.createElement(XW,{onImageUsed:e,onResetRequested:r}))},iLe=({video:r,isPlaying:e,currentTime:t,translation:n,startPlayback:o,freeze:i})=&gt;{let{screen:{isMobile:s,width:a,height:l}}=Me();if(r===null)return null;let u=()=&gt;{e?i():o()},d={left:0,bottom:0,right:200};if(s&amp;&amp;kR(r)){let{videoWidth:p,videoHeight:h}=r;d=dpe({sW:a,sH:l,vW:p,vH:h,translation:n})}let c={left:`${d.left}px`,bottom:`${d.bottom}px`,right:`${d.right}px`};return Rd.default.createElement("div",{className:"videoPlaybackControls",style:c},Rd.default.createElement(Kv,{onClick:u},Rd.default.createElement(lr,{src:e?"/svg/pause_icon.svg":"/svg/play_icon.svg",className:"cameraControlIcon cameraControlIconShadow"})),Rd.default.createElement(cpe,{video:r,currentTime:t,startPlayback:o,freeze:i}))},XW=({onImageUsed:r,onResetRequested:e})=&gt;{let t=pe();return Rd.default.createElement("div",{className:"postCaptureActionButtonTray"},Rd.default.createElement("button",{onClick:e,className:"postCaptureActionButton",role:"button"},t.retake),Rd.default.createElement("button",{onClick:r,className:"postCaptureActionButton",role:"button"},t.use))};var wpe=({onResetRequested:r,onImageUsed:e,photoObjectUrl:t})=&gt;{let{screen:{width:n,height:o}}=Me(),[i,s]=(0,zw.useState)([0,0]),a=(0,zw.useRef)(null);(0,zw.useEffect)(()=&gt;{if(a.current){let{naturalWidth:p,naturalHeight:h}=a.current,f=$v({sW:n,sH:o,vW:p,vH:h,rotation:0});s(f)}},[n,o]);let l=p=&gt;{if(p.target instanceof HTMLImageElement){let{naturalWidth:h,naturalHeight:f}=p.target,m=$v({sW:n,sH:o,vW:h,vH:f,rotation:0});s(m)}},[u,d]=i,c=`translate(${u}px, ${d}px)`;return _R.default.createElement("div",{className:"camFullSize"},_R.default.createElement("img",{style:{transform:c},ref:a,alt:"captured by camera",className:"centeredPreview camFullSize",src:t,onLoad:l}),_R.default.createElement(XW,{onImageUsed:e,onResetRequested:r}))};var sLe=({state:r,dispatcher:e})=&gt;{let{cameraStream:t,isLoading:n,photoRotation:o}=r;Ee(t!==null,"cameraStream should not be null");let{stream:i}=t,s=(0,Tpe.useRef)(null),a=pe();return zc.default.createElement(zc.default.Fragment,null,zc.default.createElement(Bw,{isHidden:n,stream:i,videoRef:s,onLoaded:()=&gt;{e.endLoad()},rotation:o}),zc.default.createElement(Uw,{state:r,dispatcher:e}),zc.default.createElement("button",{disabled:n,onClick:()=&gt;{if(s.current===null)return;let d=s.current;oq(d,o).then(c=&gt;{e.setPhotoUrl(c)}).catch(c=&gt;{fe.warn(c),e.setError({error:c,title:a.errorOccurred,message:a.couldntGetPhotoData,okMessage:a.resetCamera,onOk:()=&gt;e.reset()})})},className:"cameraShutter",role:"button"},zc.default.createElement("div",{className:"photoShutterCircle"})))},Dpe=({state:r,dispatcher:e,onUsed:t})=&gt;{let{cameraUuid:n,photoObjectUrl:o,cameraStream:i}=r;return zc.default.createElement(zc.default.Fragment,null,i!==null&amp;&amp;o===null&amp;&amp;zc.default.createElement(sLe,{key:n,state:r,dispatcher:e}),o!==null&amp;&amp;zc.default.createElement(wpe,{onResetRequested:()=&gt;e.reset(),onImageUsed:()=&gt;{o&amp;&amp;t(o)},photoObjectUrl:o}))};var jl=oe(ve()),Ld=oe(ve());var aLe=(0,Ld.memo)(({start:r,className:e})=&gt;{let t=(0,Ld.useRef)(-1),n=()=&gt;Math.floor((Date.now()-r)/1e3),[o,i]=(0,Ld.useState)(n);return(0,Ld.useEffect)(()=&gt;(t.current&gt;0&amp;&amp;window.clearInterval(t.current),t.current=window.setInterval(()=&gt;{i(n())},500),()=&gt;{t.current&gt;0&amp;&amp;window.clearInterval(t.current)})),jl.default.createElement("div",{className:e},jh(o),jl.default.createElement("div",{className:"blinkingDot"}))},(r,e)=&gt;r.streamId===e.streamId),lLe=({state:r,dispatcher:e,isInterrupted:t})=&gt;{let{cameraStream:n,isLoading:o,isRecording:i,error:s,supportedVideoRecorderFormat:a}=r;Ee(n!==null,"cameraStream should not be null"),Ee(a!==void 0,"supportedVideoRecorderFormat should not be undefined");let l=(0,Ld.useRef)(null),u=(0,Ld.useRef)(null),d=(0,Ld.useRef)(-1),c=pe();(0,Ld.useEffect)(()=&gt;{var f,m;i&amp;&amp;t&amp;&amp;h(),s&amp;&amp;((f=u.current)==null?void 0:f.state)!=="inactive"&amp;&amp;h(),s&amp;&amp;((m=l.current)==null||m.pause())},[t,r.error]);let p=()=&gt;{let f=new bC(n,a);d.current=window.setTimeout(()=&gt;{h().then(()=&gt;{e.setMessage({message:c.videoRecordingTimeLimitReached,onOk:()=&gt;{e.setMessage(null)}})})},f.maxLengthMS),e.startRecording(),f.start(),u.current=f},h=async()=&gt;{try{if(!u.current)return;window.clearTimeout(d.current);let f=await u.current.stop();if(!Qu(f.type))throw new Error(`un-supported video MIME type: ${f.type}`);let m=URL.createObjectURL(f);e.setVideoUrl(m,f.type)}catch(f){fe.warn(f);let m=iu(f,c.unexpectedErrorOccurred);e.setError({error:m,title:c.errorOccurred,message:c.couldntGetVideoData,okMessage:c.resetCamera,onOk:()=&gt;{e.reset()}})}};return jl.default.createElement(jl.default.Fragment,null,jl.default.createElement(Bw,{isHidden:o,stream:n.stream,videoRef:l,onLoaded:()=&gt;e.endLoad()}),i&amp;&amp;jl.default.createElement(aLe,{start:Date.now(),streamId:n.stream.id,className:"durationCounter centeredContent"}),jl.default.createElement(Uw,{state:r,dispatcher:e}),jl.default.createElement("button",{disabled:o,onClick:i?h:p,className:"cameraShutter",role:"button"},jl.default.createElement("div",{className:i?"videoShutterCircleRecording":"videoShutterCircle"})))},kpe=({state:r,dispatcher:e,isInterrupted:t,onUsed:n})=&gt;{let o=pe(),{cameraStream:i,videoObjectUrl:s,videoContentType:a,cameraUuid:l}=r;return jl.default.createElement(jl.default.Fragment,null,i!==null&amp;&amp;s===null&amp;&amp;jl.default.createElement(lLe,{key:l,state:r,dispatcher:e,isInterrupted:t}),s!==null&amp;&amp;a!==null&amp;&amp;jl.default.createElement(xpe,{onResetRequested:()=&gt;{confirm(o.confirmResetVideoCamera)&amp;&amp;e.reset()},onImageUsed:()=&gt;{s&amp;&amp;a&amp;&amp;n(s,a)},videoObjectUrl:s,isInterrupted:t}))};var Ro=oe(ve()),Od=oe(ve()),Ppe=oe(O8());var QW=100,FR=class{constructor(e){this.worker=null;var n;this.video=e.video,this.imageSideLength=e.videoSideLength-2*QW,this.onFound=e.onFound,this.scanning=!1;let t=this.onMessage.bind(this);this.createWorker=()=&gt;e.workerFactory(t),this.canvas=(n=e.canvas)!=null?n:fr.create(this.imageSideLength,this.imageSideLength)}onMessage(e){var t,n;!this.scanning||((t=e.data)!=null&amp;&amp;t.error&amp;&amp;fe.warn(e.data.error),(n=e.data)!=null&amp;&amp;n.text?(this.setScanning(!1),this.onFound(e.data.text)):this.scan())}scan(){if(!this.scanning||!this.worker)return;let e=this.canvas.getContext2dForce(),t=this.imageSideLength;e.drawImage(this.video,QW,QW,t,t,0,0,t,t);let n=e.getImageData(0,0,t,t);this.worker.postMessage({buffer:n.data.buffer,imageSideLength:t})}setScanning(e){var t;e!==this.scanning&amp;&amp;(this.scanning=e,e?(this.worker=this.createWorker(),this.scan()):((t=this.worker)==null||t.terminate(),this.worker=null))}},MR=class{constructor(e,t){this.worker=new Worker(e),this.worker.onmessage=t}postMessage(e){var t;(t=this.worker)==null||t.postMessage(e,[e.buffer])}terminate(){var e;(e=this.worker)==null||e.terminate()}};var uLe=({state:r,dispatcher:e,onQrCodeUsed:t,videoRef:n})=&gt;{let{isLoading:o,qrCodeContent:i,cameraStream:s}=r,a=(0,Od.useRef)(null),l=(0,Od.useRef)(-1),u=(0,Od.useRef)(-1),[d,c]=(0,Od.useState)(()=&gt;{var x,y;return(y=(x=Ot.qrCodeWorkerScript.get())==null?void 0:x.value)!=null?y:""}),[p,h]=(0,Od.useState)(!1),f=pe();(0,Od.useEffect)(()=&gt;{d===""&amp;&amp;Ot.qrCodeWorkerScript.fetch().then(x=&gt;{x.type==="success"&amp;&amp;c(x.value)})},[]);let m=x=&gt;{var y;i||l.current&gt;0||(l.current=window.setTimeout(()=&gt;{var S;e.startQrContentPreviewing(),(S=n.current)==null||S.pause(),l.current=-1,h(!0)},200),e.setQrCodeContent(x),a.current=null,typeof((y=window==null?void 0:window.navigator)==null?void 0:y.vibrate)=="function"&amp;&amp;window.navigator.vibrate([100]))},g=BE.width;(0,Od.useEffect)(()=&gt;{o||i||a.current||!n.current||d===""||(a.current=new FR({video:n.current,videoSideLength:g,onFound:m,workerFactory:x=&gt;new MR(d,x)}),u.current=window.setTimeout(()=&gt;{var x;try{(x=a.current)==null||x.setScanning(!0)}catch(y){let S=iu(y,f.unexpectedErrorOccurred);e.setError({error:S,title:f.qrCodeScannerPrepError,message:"",okMessage:f.okay,onOk:()=&gt;{e.setError(null),e.setMode("photo")}})}},100))},[n.current,o,d,i]),(0,Od.useEffect)(()=&gt;()=&gt;{var x;(x=a.current)==null||x.setScanning(!1),a.current=null,window.clearTimeout(l.current),window.clearTimeout(u.current)},[s]);let v=async x=&gt;{x=="url"?t({type:x,url:i}):t({type:x,text:i})},b=()=&gt;{h(!1)},C=()=&gt;{e.resetQrContentState(),n.current!==null&amp;&amp;n.current.play()};return Ro.default.createElement(Ro.default.Fragment,null,!o&amp;&amp;!p&amp;&amp;Ro.default.createElement("div",{className:"qrModeGuidanceContainer"},Ro.default.createElement("div",{className:"qrModeGuidance"},f.qrModeGuidance)),!o&amp;&amp;Ro.default.createElement(cLe,{qrFound:!!i}),Ro.default.createElement(tr,{className:"qrPreviewFadeModal",overlay:!0,container:"none",open:p,onClose:b,onExited:C},Ro.default.createElement(dLe,{onDismiss:b,onUsed:v,text:i})))},dLe=({onDismiss:r,onUsed:e,text:t})=&gt;{let n=pe(),o=t?(0,Ppe.default)(t,{protocols:["http","https"]}):!1,i=o?decodeURI(t):t,s=o?"qrPreviewUrl":"qrPreviewText",a=o?n.createWebCard:n.createTextCard,l=()=&gt;{window.open(t,"_blank")},u=()=&gt;{e(o?"url":"text")};return Ro.default.createElement("div",{className:"qrPreviewModal"},Ro.default.createElement(Et,{round:!0},Ro.default.createElement(Ft,null,Ro.default.createElement(Mt,null),Ro.default.createElement(Vt,null,n.qrCodePreviewDialogTitle),Ro.default.createElement(jt,null))),Ro.default.createElement("div",{className:"qrPreviewBody"},Ro.default.createElement("div",{className:s},i)),Ro.default.createElement("div",{className:"qrPreviewFooter"},Ro.default.createElement(JW,{className:"secondary",onClick:r},n.cancel),o&amp;&amp;Ro.default.createElement(JW,{onClick:l},n.open),Ro.default.createElement(JW,{onClick:u},a)))},JW=({onClick:r,className:e,children:t})=&gt;Ro.default.createElement("div",{role:"button",className:`qrPreviewActionButton ${e}`,onClick:r},t),cLe=({qrFound:r})=&gt;Ro.default.createElement("div",{className:`centeredQrFrame ${r?"yellowFrame":""}`}),Ape=({state:r,dispatcher:e,onUsed:t})=&gt;{let{cameraStream:n,isLoading:o}=r,i=(0,Od.useRef)(null),s=(a,l)=&gt;{e.endLoad()};return n===null?null:Ro.default.createElement(Ro.default.Fragment,null,Ro.default.createElement(Bw,{isHidden:o,stream:n.stream,videoRef:i,onLoaded:s,rotation:r.photoRotation,centered:!0,ignoreScreenSizeChange:!0}),Ro.default.createElement(uLe,{state:r,dispatcher:e,onQrCodeUsed:t,videoRef:i}),Ro.default.createElement(Uw,{state:r,dispatcher:e}))};function Ipe(r,e,t){if(r.editor&amp;&amp;r.editor.length&gt;0){let n=r.editor[r.editor.length-1].cardId;return pLe(r,n,e,t)}else return hLe(r,t)}function pLe(r,e,t,n){let o=he.get().strings,i={id:r.userInfo.user_id,name:zt(r.userInfo)};return{onPhotoUsed:async u=&gt;{n();let d=await ki.fromObjectURL(u,Gh),{image:c,extension:p,name:h}=d,f=sf({asset:{description:h,extension:p},contentSize:$e(c.width,c.height),author:i});t({rootCardId:e,card:f,type:"picture",file:d,thumb:c,url:u})},onVideoUsed:async(u,d)=&gt;{n();let c=await ji.fromObjectUrl(u,d),[{width:p,height:h,duration:f}]=c.getMetadata();if(!p||!h||!f||f&lt;=0)throw new Error("video file has invalid metadata");let m=af({asset:{description:c.name,extension:c.extension},duration:f,author:i,contentSize:$e(p,h)}),g=await c.generateHeadThumbnail();t({rootCardId:e,card:m,type:"video",file:c,thumb:g,url:u})},onQrCodeUsed:async u=&gt;{if(n(),u.type==="url"){let d=u.url;r.reduce(we(59,o.creatingWebCard));let c={id:r.userInfo.user_id,name:r.userInfo.username},{thumbnailFile:p}=await kx(d,c),h=await ki.fromFile(p),{image:f}=h,m=zb({author:c,url:d});t({rootCardId:e,card:m,type:"web",file:h,thumb:f}),r.reduce(we(59,null))}else{let d=await tl({url:ie.res.src(o.textCardPlaceholderImgPath)}),c=pu({backcolor:"#FFFFFFFF",color:"#FF000000",author:i,text:u.text});t({rootCardId:e,card:c,type:"other",thumb:d})}}}}function hLe(r,e){let t=he.get().strings,n=De(r.screen.width*.5,0);return{onPhotoUsed:a=&gt;{e(),At(new x0(a,n))},onVideoUsed:(a,l)=&gt;{e(),Ee(l,"mimeType must be provided for video content"),At(new w0(a,l,n))},onQrCodeUsed:async a=&gt;{if(e(),a.type==="url"){let l=a.url;r.reduce(we(59,t.creatingWebCard));let u=await ie.apiClient.getOgpMetadata(l),d=await fk({author:{id:r.userInfo.user_id,name:r.userInfo.username},decodedUrl:decodeURI(l),title:u.title,description:u.description});r.reduce(we(59,null)),At(new Yu(n,{url:l,thumbnailFile:d,title:u.title}))}else At(new Dl({backcolor:dn("#FFFFFFFF"),color:dn("#FF000000"),startPosition:n,text:a.text}))}}}var Epe=()=&gt;{let r=Me(),e=()=&gt;{r.reduce(cg(!1))},[t,n]=(0,Ka.useState)();return fl.default.createElement(fl.default.Fragment,null,fl.default.createElement(tr,{open:r.cameraDialogOpen,onClose:e},fl.default.createElement(fLe,{store:r,setSelectorState:n,onDismiss:e})),t&amp;&amp;fl.default.createElement(mLe,{store:r,selectorState:t,setSelectorState:n}))},fLe=({store:r,setSelectorState:e,onDismiss:t})=&gt;{let n=pe(),o=(0,Ka.useRef)(()=&gt;{}),i=(0,Ka.useRef)(1),s=(0,Ka.useRef)(1),a=!1,l=!1,u=Xt(r);if(typeof u=="number"){a=r.screenLockStates[u];let N=r.screenSharingActionNotification[u];l=!!N&amp;&amp;T1(N)}let d=!r.pageVisible||a||l,c=r.userPreference.cameraPrefs,[p,h]=mpe(t,c.mode,c),{isLoading:f,mode:m,isRecording:g,videoDeviceIndex:v,audioDeviceIndex:b,qrVideoDeviceIndex:C,videoObjectUrl:x,photoObjectUrl:y,videoDevices:S,audioDevices:T,resPrefs:w,error:k,message:A,qrCodeContent:I}=p,E=!!y||!!x;(0,Ka.useEffect)(()=&gt;(r.reduce(zi(!1)),()=&gt;{r.reduce(zi(!0))}),[]);let O=(0,Ka.useMemo)(()=&gt;new FE,[]),Q=()=&gt;{O.getReport().then(N=&gt;{h.setDevices(N,c)}).catch(N=&gt;{if(N instanceof Fb)return m==="video"&amp;&amp;h.setMode("photo"),h.setIsVideoModeDisabled(!0),Q();N.name==="NotAllowedError"?h.setError({error:N,title:n.cameraMicPermissionDeniedErrorMsg,okMessage:n.getHelp,onOk:()=&gt;window.open(n.helpPageLinkToPermitCameraAndMic),cancelMessage:n.close,onCancel:()=&gt;{h.dismissDialog()}}):h.setError({error:N,title:n.generalCameraPrepError,message:N.name==="NotFoundError"?n.cantFindUsableDevice:N.message,okMessage:n.close,onOk:()=&gt;{h.dismissDialog()}})})};(0,Ka.useEffect)(()=&gt;{if(!nq()){let ce=Error("MediaCapture not supported");fe.warn(ce),h.setError({error:ce,title:n.generalCameraPrepError,message:n.browserDoesntSupportMediaCapture,okMessage:n.closeCamera,onOk:()=&gt;{h.dismissDialog()}});return}Q();let N=Do(),V=()=&gt;{N(Q,1e3)},re="ondevicechange"in navigator.mediaDevices;return re&amp;&amp;navigator.mediaDevices.addEventListener("devicechange",V),()=&gt;{re&amp;&amp;navigator.mediaDevices.removeEventListener("devicechange",V)}},[]),(0,Ka.useEffect)(()=&gt;{g||E||I&amp;&amp;!r.pageVisible||d&amp;&amp;h.dismissDialog()},[d]),(0,Ka.useEffect)(()=&gt;{if(!S||!T)return;if(p.canSkipCreation){h.resetCanSkipCreation();return}if(o.current(),E)return;let N=vpe(p,r.userPreference.enableAudioNoiseReduction);upe(N).then(V=&gt;{var ae;o.current=()=&gt;V.dispose(),i.current=1,s.current=1;let{width:re,height:ce}=r.screen,ge=(ae=NE(window.screen))!=null?ae:re&lt;=ce;h.setCameraStream(V,ge)}).catch(j)},[m,S,T,v,b,C,E,w]),(0,Ka.useEffect)(()=&gt;()=&gt;o.current(),[]),(0,Ka.useEffect)(()=&gt;{var N;d||(k?r.reduce(me(29,{title:(N=k.title)!=null?N:"",message:k.message,okMessage:k.okMessage,cancelMessage:k.cancelMessage,onOk:()=&gt;{var V;r.reduce(me(29,void 0)),(V=k.onOk)==null||V.call(k)},onCancel:()=&gt;{var V;r.reduce(me(29,void 0)),(V=k==null?void 0:k.onCancel)==null||V.call(k)}})):A&amp;&amp;r.reduce(Co(29,{title:"",message:A.message,okMessage:n.okay,color:"info",onOk:()=&gt;{r.reduce(me(29,void 0)),A.onOk()}})))},[d,k,A]),(0,Ka.useEffect)(()=&gt;{if(!p.cameraStream)return;let N=r.userPreference.cameraPrefs.resolutions,V=gpe(p,N);r.reduce(()=&gt;({userPreference:{cameraPrefs:{$merge:V}}}))},[p.cameraStream]);let j=N=&gt;{var ge,ae;if(p.isFirstLaunch){h.endFirstLaunch();return}let{lastSwitched:V}=p,re=(ge=S==null?void 0:S.length)!=null?ge:0,ce=(ae=T==null?void 0:T.length)!=null?ae:0;V==="video"&amp;&amp;re&gt;1&amp;&amp;s.current&lt;re?(s.current+=1,h.setNextDevice("video")):V==="audio"&amp;&amp;ce&gt;1&amp;&amp;i.current&lt;ce?(i.current+=1,h.setNextDevice("audio")):(fe.warn("could not create CameraStream",N),h.setError({error:N,title:n.generalCameraPrepError,message:N.message,okMessage:n.closeCamera,onOk:()=&gt;{h.dismissDialog()}}))},{onPhotoUsed:U,onVideoUsed:B,onQrCodeUsed:z}=Ipe(r,e,t);return fl.default.createElement("div",{className:"cameraDialogModalWrapper camFullSize"},fl.default.createElement("div",{className:"cameraRelativelyPositioned camFullSize"},f&amp;&amp;fl.default.createElement(_t,{absolute:"top"}),m==="photo"&amp;&amp;fl.default.createElement(Dpe,{state:p,dispatcher:h,onUsed:U}),m==="video"&amp;&amp;fl.default.createElement(kpe,{state:p,dispatcher:h,isInterrupted:d,onUsed:B}),m==="qr"&amp;&amp;fl.default.createElement(Ape,{state:p,dispatcher:h,onUsed:z})))},mLe=({store:r,selectorState:e,setSelectorState:t})=&gt;{let n=i=&gt;()=&gt;{i&amp;&amp;e.url!==void 0&amp;&amp;URL.revokeObjectURL(e.url),t(void 0)},o=i=&gt;async s=&gt;{let a=s?"inside":"next",l=i.card;i.type==="picture"&amp;&amp;(i==null?void 0:i.file)instanceof ki?At(new T0({creatorCardId:i.rootCardId,card:l,insertType:a,imageFile:i.file,url:i.url})):i.type==="video"&amp;&amp;(i==null?void 0:i.file)instanceof ji?At(new D0({creatorCardId:i.rootCardId,card:l,insertType:a,videoFile:i.file,url:i.url})):i.type==="web"&amp;&amp;(i==null?void 0:i.file)instanceof ki?At(new A0(i.rootCardId,l,i.file,a)):At(new Qm({cardId:i.rootCardId,card:l,type:a})),n(!1)()};return fl.default.createElement(tr,{className:"cameraAddTypeSelectDialog",open:e!==void 0,onClose:n(!1),overlay:!0,backDropStatic:!0},fl.default.createElement("div",{className:"cameraAddTypeSelectDialogInner"},fl.default.createElement(sW,{store:r,onBack:n(!0),onClick:o(e),thumb:e.thumb,card:e.card,forCamera:!0})))};var ts=oe(ve()),Hw=oe(ve());var NR=oe(Sh());function _pe(r){return`maintenances.${r.serviceCode}_${r.startTime}_${r.endTime}`}function Fpe(r,e){let t=_pe(e),n=ie.localStorage.get(t);if(!n)return!0;let o=new Date(e.startTime).getTime(),i=r.getTime()-new Date(n).getTime(),s=o-r.getTime();return i&gt;=24*36e5&amp;&amp;s&lt;=24*36e5}function Mpe(r,e){ie.localStorage.put(_pe(e),r.toISOString())}var Npe=()=&gt;{let r=Me(),e=pe(),[t,n]=(0,Hw.useState)([]);(0,Hw.useEffect)(()=&gt;{let i=new Date,s=r.maintenanceInfos.filter(a=&gt;Fpe(i,a));n(s)},[r.maintenanceInfos]),(0,Hw.useEffect)(()=&gt;{let i=new Date;t.forEach(s=&gt;Mpe(i,s))},[t]),(0,Hw.useEffect)(()=&gt;{let[i]=r.maintenanceInfos.filter(u=&gt;u.shouldStopAll).sort((u,d)=&gt;u.startTime.localeCompare(d.startTime));if(!i)return;let s=Date.now(),l=new Date(i.startTime).getTime()-s;if(l&lt;=24*36e5){let u=setTimeout(()=&gt;{n([]),r.reduce(tY({color:"info",title:e.underMaintenace,message:[i.title,i.description,`${e.endSchedule}: ${(0,NR.default)(i.endTime).format("llll")}`],okMessage:e.reload,onOk:()=&gt;location.reload()}))},Math.max(0,l));return()=&gt;clearTimeout(u)}},[r.maintenanceInfos]);let o=()=&gt;{n([])};return ts.default.createElement(tr,{className:"m10eDialogWrapper",overlay:!0,open:t.length&gt;0,onClose:o},ts.default.createElement(rr,{className:"m10eDialog",round:!0},ts.default.createElement(Et,{round:!0},ts.default.createElement(Ft,null,ts.default.createElement(Mt,null,ts.default.createElement(gt,{onClick:o},e.close)),ts.default.createElement(Vt,null,e.maintenanceNotification),ts.default.createElement(jt,null))),ts.default.createElement(ur,{round:!0},ts.default.createElement(gLe,{infos:r.maintenanceInfos}))))},gLe=({infos:r})=&gt;{let e=t=&gt;[t.serviceCode,t.startTime,t.endTime].join("_");return ts.default.createElement("div",{className:"m10eBody"},r.map(t=&gt;ts.default.createElement(vLe,{info:t,key:e(t)})))},vLe=({info:r})=&gt;{let e=pe();return ts.default.createElement("div",{className:"m10eSection"},ts.default.createElement("div",{className:"m10eTitle"},r.title),ts.default.createElement("div",{className:"m10eSubSection"},ts.default.createElement("div",{className:"m10ePara"},r.description),ts.default.createElement("div",{className:"m10ePara"},(0,NR.default)(r.startTime).format("llll")," ~"," ",(0,NR.default)(r.endTime).format("llll"))),ts.default.createElement("div",{className:"m10eSubSection"},ts.default.createElement("div",{className:"m10ePara"},ts.default.createElement("a",{href:r.url,target:"_blank"},e.seeDetail))))};var Yt=oe(ve());var ZW=[{type:"tiny",width:256,height:192},{type:"small",width:384,height:288},{type:"medium",width:512,height:384},{type:"large",width:760,height:570}],bLe=r=&gt;{let e=[ZW[0]];for(let t=1;t&lt;ZW.length;t++){let n=ZW[t];r.width&gt;=n.width&amp;&amp;r.height&gt;=BR(n)&amp;&amp;e.push(n)}return e},e7=55,Rpe=4,yLe=45,BR=r=&gt;yLe+r.height+e7+Rpe,Lpe=()=&gt;{let r=pe(),e=Me(),t=(0,Yt.useRef)(null),n=(0,Yt.useRef)(null),o=(0,Yt.useRef)(null),i=(0,Yt.useRef)(null),s=(0,Yt.useRef)(null),a=bLe(e.screen),[l,u]=$r({sizeIndex:Math.max(a.length-3,0),videoIndex:0,duration:0,listShown:!1,confirmShown:!1,isDragging:!1,isLoading:!1,tutorials:void 0,closeAndCheckAll:!1}),d=(I=l.sizeIndex)=&gt;a[I%a.length],c=()=&gt;e.tutorials!==void 0&amp;&amp;Gv(e.tutorials.contents[l.videoIndex]),p=(I,E,O=!1,Q)=&gt;{let j=it(I,0,window.innerWidth-d(Q).width),U=it(E,0,window.innerHeight-BR(d(Q))),{style:B}=o.current;B.transform=`translate(${j}px, ${U}px)`,B.right="unset",B.bottom="unset",B.transition=O?"transform, 0.5s":""},h=()=&gt;{let I=l.sizeIndex+1;u({sizeIndex:I});let{left:E,top:O}=o.current.getBoundingClientRect(),Q=d(I),j=d(l.sizeIndex),U=E-(Q.width-j.width)/2,B=O-(BR(Q)-BR(j))/2;p(U,B,!0,I)},f=I=&gt;!l.isDragging&amp;&amp;I(),m=()=&gt;{c()?e.reduce(()=&gt;({tutorialDialogOpen:{$set:!1}})):u({confirmShown:!0})},g=()=&gt;{u({listShown:!l.listShown})},v=()=&gt;{c()?e.reduce(()=&gt;({tutorialDialogOpen:{$set:!1}})):(ipe(e,e.tutorials.contents[l.videoIndex]),u({videoIndex:l.videoIndex+1}))},b=I=&gt;{if(!e.tutorials)return!1;let E=e.tutorials.contents[I];return xR(E,e.checkedTutorials[E.id])};(0,Yt.useEffect)(()=&gt;{TR(e)},[]),(0,Yt.useEffect)(()=&gt;{var I;e.tutorialDialogOpen&amp;&amp;e.tutorials&amp;&amp;u({videoIndex:(I=Zce(e.tutorials.contents,e.checkedTutorials))!=null?I:0})},[e.tutorialDialogOpen]),(0,Yt.useEffect)(()=&gt;{let I={x:0,y:0};if(!n.current)return;let E=new Gn(n.current,{onlyEventOnTarget:!1,ignoreDevicePixelRatio:!0,preventOnTouch:!1});return E.onSingle=(O,Q)=&gt;{if(O==="down"&amp;&amp;(I=sa(o.current.getBoundingClientRect())),O==="move"&amp;&amp;Q.down){let j=Q.x-Q.down.x,U=Q.y-Q.down.y;if(Math.hypot(Math.abs(j),Math.abs(U))&lt;=5)return;u({isDragging:!0});let B=I.x+j,z=I.y+U;p(B,z)}O==="up"&amp;&amp;setTimeout(()=&gt;{u({isDragging:!1})},50)},()=&gt;{E.unbind()}},[e.tutorialDialogOpen,l.sizeIndex,e.screen]),(0,Yt.useEffect)(()=&gt;{var I;if(o.current){let{left:E,top:O}=(I=o.current)==null?void 0:I.getBoundingClientRect();p(E,O,!0)}},[e.screen]),(0,Yt.useEffect)(()=&gt;{var I;if(o.current){let{left:E,top:O}=(I=o.current)==null?void 0:I.getBoundingClientRect();p(E,O)}},[e.tutorialDialogOpen]),(0,Yt.useEffect)(()=&gt;{var I;l.listShown&amp;&amp;((I=document.querySelector(`[data-index="${l.videoIndex}"]`))==null||I.scrollIntoView())},[l.listShown]),(0,Yt.useEffect)(()=&gt;{if(!e.tutorialDialogOpen)return;let I=()=&gt;{i.current&amp;&amp;t.current&amp;&amp;(i.current.style.transform=`scaleX(${t.current.currentTime/l.duration})`),s.current=requestAnimationFrame(I)};return s.current=requestAnimationFrame(I),()=&gt;{s.current&amp;&amp;cancelAnimationFrame(s.current)}},[e.tutorialDialogOpen,l.duration]);let C=()=&gt;{if(!e.tutorials)return"";let I=e.tutorials.contents[l.videoIndex];return Gv(I)?I.title:`${l.videoIndex+1}. ${I.title}`},x=()=&gt;e.tutorials?e.tutorials.contents.filter(I=&gt;!Gv(I)).map((I,E)=&gt;Yt.default.createElement(Rr,{className:"tutorialItem",key:E,"data-index":E,onClick:()=&gt;{u({videoIndex:E})}},Yt.default.createElement(Bpe,{checked:b(E)}),Yt.default.createElement("span",null,E+1,". ",I.title))):[],y=Yt.default.createElement(Et,{className:"tutorialDialogHeader",round:!0},Yt.default.createElement(Gt,{onClick:()=&gt;f(g)},e.tutorials&amp;&amp;Yt.default.createElement(Yt.default.Fragment,null,b(l.videoIndex)&amp;&amp;Yt.default.createElement(Bpe,{checked:!0}),Yt.default.createElement("div",{className:"tutorialTitle","data-size":d().type},C()),Yt.default.createElement("div",{className:"tutorialItemListAnchor"},Yt.default.createElement("div",{className:"tutorialItemListArrow"}),Yt.default.createElement(xt,{open:l.listShown,onClose:()=&gt;{}},Yt.default.createElement("div",{className:"tutorialItemListPopover",style:{maxHeight:d().height+e7}},x()))))),Yt.default.createElement("div",{className:"tutorialHeaderActionWrapper"},a.length&gt;1&amp;&amp;Yt.default.createElement(Yt.default.Fragment,null,Yt.default.createElement("div",{className:"tutorialHeaderAction tutorialArrowIcon",role:"button",onClick:()=&gt;f(h)}),Yt.default.createElement("div",{className:"tutorialHeaderButtonsBorder"})),Yt.default.createElement("div",{className:"tutorialHeaderAction tutorialCloseIcon",role:"button",onClick:()=&gt;f(m)}))),S=()=&gt;{u({isLoading:!1});let I=()=&gt;e.reduce(me(65,void 0)),E={title:r.failedPlayTutorial,okMessage:r.reload,cancelMessage:r.close,onOk:()=&gt;{I(),t.current.load()},onCancel:I};e.reduce(me(65,E))},T=Yt.default.createElement(Yt.default.Fragment,null,Yt.default.createElement("div",{className:"tutorialDialogVideo",style:d()},e.tutorials&amp;&amp;Yt.default.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,loop:!0,ref:t,src:LW(e.tutorials.contents[l.videoIndex]),onLoadedMetadata:I=&gt;{u({duration:I.currentTarget.duration})},onLoadStart:()=&gt;u({isLoading:!0}),onLoadedData:()=&gt;u({isLoading:!1}),onError:S})),l.isLoading||e.fetchStates[nt.tutorial()]==="fetching"?Yt.default.createElement(_t,{height:Rpe,style:{background:"#D0D0D0"}}):Yt.default.createElement("div",{className:"tutorialProgressBar"},Yt.default.createElement("div",{className:"tutorialProgressBarIndicator",ref:i}))),w=Yt.default.createElement("div",{className:"tutorialDialogFooter",style:{height:`${e7}px`}},Yt.default.createElement(Gt,{className:"tutorialOkButton",onClick:()=&gt;f(v),disabled:!e.tutorials||l.isLoading},c()?Yt.default.createElement("div",null,r.close):Yt.default.createElement(Yt.default.Fragment,null,Yt.default.createElement("div",{className:"tutorialOkIcon"}),Yt.default.createElement("div",null,r.understood)))),k=e.tutorials&amp;&amp;wR(e.tutorials.contents,e.checkedTutorials).length&gt;0,A=Yt.default.createElement(tr,{open:l.confirmShown,onClose:()=&gt;{}},Yt.default.createElement(Vm,{title:r.closeTutorialTitle},Yt.default.createElement("div",{className:"tutorialCloseDialogContent"},Yt.default.createElement("p",null,r.closeTutorialMsg),e.tutorials&amp;&amp;Yt.default.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,loop:!0,src:LW(e.tutorials.finishTutorial)}),Yt.default.createElement("p",null,k&amp;&amp;Yt.default.createElement("label",null,Yt.default.createElement("input",{type:"checkbox",onChange:I=&gt;{u({closeAndCheckAll:I.target.checked})}}),r.closeTutorialCheckLabel))),Yt.default.createElement(la,null,Yt.default.createElement(Ui,{onClick:()=&gt;{u({confirmShown:!1})}},r.cancel),Yt.default.createElement(Ui,{onClick:()=&gt;{l.closeAndCheckAll&amp;&amp;spe(e),e.reduce(()=&gt;({tutorialDialogOpen:{$set:!1}})),u({confirmShown:!1,closeAndCheckAll:!1})}},r.end))));return Yt.default.createElement("div",{className:"tutorialContainer",ref:n},Yt.default.createElement(Mn,{timeout:250,unmountOnExit:!0,in:e.tutorialDialogOpen,appear:e.tutorialDialogOpen,classNames:"fade"},Yt.default.createElement("div",{className:"tutorialDialog",style:{width:d().width},ref:o},y,T,w)),A)},Bpe=({checked:r})=&gt;Yt.default.createElement("div",{className:"tutorialTitleCheck","data-checked":r});var Gw=oe(ve()),RR=oe(ve());var t7=oe(Wr());var Ope=()=&gt;{let r=Me(),[e,t]=(0,RR.useState)(),n=Gw.default.useRef(-1),o=pe(),i=!r.desktop||r.timelineOpen||r.submissionBoxOpen||r.materialBoxOpen||r.addSheetDialogOpen||r.addTextCardDialogOpen||r.cameraDialogOpen||r.userProfileOpen||r.preferenceOpen||r.passwordDialogOpen||r.userStatusListOpen||r.editor||up(r)||k1(r),s=a=&gt;{let l=a[0],u=l.split(`
`)[0],d=l.split(`
`)[1];if(a.length&gt;1){let c=a.length-1;d?d+=`${(0,t7.sprintf)(o.others,c)}`:u+=`${(0,t7.sprintf)(o.others,c)}`}return{firstLine:u,secondLine:d}};return(0,RR.useEffect)(()=&gt;{if(!!e&amp;&amp;i){t(void 0),window.clearTimeout(n.current),n.current=-1;return}if(r.mobilePushMessages.length&lt;=0||i)return;let a=s(r.mobilePushMessages);t(a),r.reduce(rse()),window.clearTimeout(n.current),n.current=-1,n.current=window.setTimeout(()=&gt;{t(void 0),n.current=-1},5e3)},[r.mobilePushMessages.length,i]),Gw.default.createElement(Mn,{in:!!e,appear:!!e,timeout:200,classNames:"pushForegroundNotification",unmountOnExit:!0},Gw.default.createElement("div",{className:"pushForegroundNotification"},Gw.default.createElement("div",{className:"pushForegroundNotificationContent"},e==null?void 0:e.firstLine,Gw.default.createElement("br",null),e==null?void 0:e.secondLine)))};var Mu=oe(ve());var or=oe(ve()),Zs=oe(ve());var Ww=oe(ve()),uh=oe(ve());var Upe=function({store:e,pageIndex:t,pageCount:n,outerClassName:o,innerClassName:i,onPageChange:s,onClick:a,getPage:l,disabled:u,screenSize:d,cellSize:c,dragManager:p}){let h=(0,uh.useRef)(null),f=(0,uh.useRef)(null),m=(0,uh.useRef)(0),g=(y,S)=&gt;{!h.current||(S||(h.current.style.transform=`translate(${y}px, 0)`),m.current=y)},v=()=&gt;m.current,[b,C]=(0,uh.useState)(null),x=(0,uh.useRef)(t);return(0,uh.useEffect)(()=&gt;{if(u)return;Ee(h.current!=null),Ee(f.current!=null);let y=f.current.getBoundingClientRect().width,S=new Gn(f.current,{ignoreDevicePixelRatio:!0,onlyEventOnTarget:!1}),T,w=0,k=!1,A=()=&gt;{T={anim:As({from:v(),to:0,duration:.5,easing:ms}),type:"bounce"}},I=O=&gt;{T={anim:As({from:v(),to:O?-y:y,duration:.5,easing:ms}),type:O?"forward":"backward"}};w=performance.now();let E=O=&gt;{if(k)return;let Q=(O-w)/1e3;w=O,T&amp;&amp;(g(T.anim.update(Q)),T.anim.finished&amp;&amp;(T.type!=="bounce"&amp;&amp;s(T.type==="forward"?t+1:t-1),T=void 0)),requestAnimationFrame(E)};if(S.onSingle=(O,Q)=&gt;{if(!h.current)return;O==="down"&amp;&amp;(T=void 0);let j=v()&lt;0,U=!j&amp;&amp;t==0||j&amp;&amp;t===n-1;O==="move"&amp;&amp;(p.set(!0),g(U?v()+Q.dx/10:v()+Q.dx)),O==="up"&amp;&amp;(p.set(!1),oi(Q)?(g(0),a()):Sne(Q,!0)||Math.abs(v())&gt;y/2?U?A():I(j):A())},requestAnimationFrame(E),t&gt;x.current){Ee(b!=null);let O=[b[1],b[2],l(t+1)];C(O)}else if(t&lt;x.current){Ee(b!=null);let O=[l(t-1),b[0],b[1]];C(O)}else C([l(t-1),l(t),l(t+1)]);return x.current=t,()=&gt;{g(0,!0),T=void 0,k=!0,S.unbind()}},[d,t,n,u]),(0,uh.useEffect)(()=&gt;{C([l(t-1),l(t),l(t+1)])},[d,c]),Ww.default.createElement("div",{className:o,ref:f},Ww.default.createElement("div",{className:i,ref:h,style:{transform:`translate(${m.current}px, 0)`}},b&amp;&amp;Ww.default.createElement(Ww.default.Fragment,null,b[0],b[1],b[2])))},zpe=({children:r,className:e="",...t})=&gt;Ww.default.createElement("div",{className:"uiPagerPage "+e,...t},r);var Gpe=({courseId:r,onClose:e})=&gt;{var Q,j;let t=Me(),n=(()=&gt;{let[U,B]=(0,Zs.useState)(!1);return{get:()=&gt;U,set:V=&gt;B(V)}})(),o=()=&gt;{var B;let U=(B=t.screenSharingState)==null?void 0:B.sessionId;U&amp;&amp;Uf({courseId:r,sessionId:U,store:t,showDialog:!1}),e()},i=Gr(t.submissionNumber),s=pn(r,i),a=t.submissions.byKey[s],l=(Q=t.submissionAnswers.bySubmissionKey[s])!=null?Q:[],[u,d]=(0,Zs.useState)(()=&gt;{var B;let U=(B=t.submissionComparisonIds)!=null?B:[];return Hpe(t,U)});(0,Zs.useEffect)(()=&gt;{if(!t.userInfo.is_teacher)return;let U=u.map(B=&gt;B==null?void 0:B.author_id).filter(B=&gt;B!==null);U.length&lt;=0||jy({store:t,courseId:r,submissionNumber:i,authors:U})},[t.mobilePushes]),(0,Zs.useEffect)(()=&gt;{let B=zE({targetIds:u.map(z=&gt;{var N;return(N=z==null?void 0:z.id)!=null?N:null}),currentIds:l,getSubmissionAnswer:z=&gt;t.submissionAnswers.byId[z]}).map(z=&gt;{var N;return z&amp;&amp;(N=t.submissionAnswers.byId[z])!=null?N:null});d(B)},[l]);let{cols:c,rows:p}=q6(t.screen,u.length),[h,f]=gs({store:t,initialState:!1}),[m,g]=(0,Zs.useState)(),[v,b]=(0,Zs.useState)(),C=t.screen.width/c,x=t.screen.height/p;(0,Zs.useEffect)(()=&gt;{let U=u.filter(z=&gt;!!z).map(z=&gt;z.id),B=Hpe(t,U);d(B)},[c,p]);let y=(0,Zs.useRef)(t);y.current=t;let S=(0,Zs.useRef)(new ZM(()=&gt;y.current)).current;if((0,Zs.useEffect)(()=&gt;{var B,z;if(((B=t.screenSharingState)==null?void 0:B.type)!=="comparison"||((z=t.submissionAnswer)==null?void 0:z.id))return;let U=u.filter(N=&gt;N===null||ua(N,t.userInfo,a.hide_author));S.update(U)},[c,p,u,t.screen,t.submissionAnswerPageIndexStates,(j=t.screenSharingState)==null?void 0:j.type]),(0,Zs.useEffect)(()=&gt;{var U;if(!t.submissionAnswer&amp;&amp;((U=t.screenSharingState)==null?void 0:U.type)==="fullscreen"){let B=t.screenSharingState.anonymous,z=u.filter(ce=&gt;ce===null||ua(ce,t.userInfo,a.hide_author)),N=zk(t,z),V=N.items.map(ce=&gt;ce.document),re=Uk({store:t,anonymous:B,documentDependency:V,body:N});t.reduce(Os(Wy(t.screenSharingState.sessionId,r,re)))}},[t.submissionAnswer]),!a)return or.default.createElement(Ev,{onClose:o});let T=U=&gt;{let B=U.filter(V=&gt;!!V),{rows:z,cols:N}=q6(t.screen,B.length);if(z!==p||N!==c){d(B);return}d(U)},w=({from:U,to:B,done:z})=&gt;{if(z){let N=[...u],V=N[B];N[B]=N[U],N[U]=V,T(N),g(void 0)}else g(B)},k=U=&gt;()=&gt;{let B=[...u];B[U]=null,T(B)},A=pe(),I=()=&gt;{t.teacherToolOpen&amp;&amp;t.reduce(lg(!1)),b("edit")},E=u.filter(U=&gt;!!U),O=E.length&lt;2?A.use:A.useAll;return or.default.createElement(or.default.Fragment,null,or.default.createElement("div",{className:"submissionComparison"},or.default.createElement("div",{className:"editorHeader",style:{zIndex:1}},or.default.createElement("div",{className:"editorHeaderInner"},v!==void 0&amp;&amp;or.default.createElement("div",{className:"editorHeaderButtonGroupGrid"},or.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},or.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},or.default.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:()=&gt;b(void 0)},A.complete))),or.default.createElement("div",null),or.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},or.default.createElement("div",{className:"flexSpacer"}),t.screenSharingState&amp;&amp;or.default.createElement(or.default.Fragment,null,or.default.createElement(rm,{store:t,sharingState:t.screenSharingState}),or.default.createElement("div",{className:"editorHeaderScreenSharingText"},A.sharing)))),v===void 0&amp;&amp;or.default.createElement("div",{className:"editorHeaderButtonGroupGrid"},or.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},or.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},or.default.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:o},A.end)),or.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},or.default.createElement("div",{className:"editorButton",role:"button",onClick:()=&gt;b("draw")},or.default.createElement("div",{className:"editorSvgButtonIcon laserIcon","data-finger-tool-type":"laser"})))),or.default.createElement("div",null),or.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},or.default.createElement("div",{className:"flexSpacer"}),t.screenSharingState&amp;&amp;or.default.createElement(rm,{store:t,sharingState:t.screenSharingState}),or.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},or.default.createElement("div",{className:"editorButton editorTextButton",role:"button",onClick:I},A.edit)),!t.screenSharingState&amp;&amp;or.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},or.default.createElement("div",{className:"editorButton",onClick:()=&gt;f(!0),"data-disabled":E.length===0},or.default.createElement("div",{className:"editorButtonIcon exportButtonIcon"})),or.default.createElement(xt,{open:h,onClose:()=&gt;f(!1)},or.default.createElement(bw,{submission:a,courseId:r,answers:E},U=&gt;or.default.createElement(Rr,{onClick:U},O)))),or.default.createElement(Qle,{store:t,answerTable:u,onPopoverOpened:()=&gt;{f(!1)}}))))),or.default.createElement("div",{style:{display:"grid",gridTemplateColumns:`repeat(${c}, ${C}px)`,gridTemplateRows:`repeat(${p}, ${x}px)`}},u.map((U,B)=&gt;{let z=m===B;return U===null?or.default.createElement(CLe,{key:`empty-${B}`,hover:z}):or.default.createElement(SLe,{store:t,courseId:r,key:U.id,editing:v==="edit",rows:p,cols:c,hover:z,cellSize:{width:C,height:x},onHoverChange:w,onClickDelete:k(B),index:B,answer:U,answerTable:u,dragManager:n})})),v==="draw"&amp;&amp;or.default.createElement(Ad,{canvasSize:Nt(t.screen,window.devicePixelRatio),consumer:S})))},Hpe=(r,e)=&gt;Eie(r.screen,e).map(n=&gt;{var o;return n&amp;&amp;(o=r.submissionAnswers.byId[n])!=null?o:null}),CLe=({hover:r})=&gt;or.default.createElement("div",{className:"submissionComparisonCell","data-hover":r}),SLe=({store:r,courseId:e,rows:t,cols:n,hover:o,cellSize:i,editing:s,onClickDelete:a,onHoverChange:l,index:u,answer:d,answerTable:c,dragManager:p})=&gt;{var k;let h=d.id,f=(k=r.submissionAnswerPageIndexStates[h])!=null?k:0,{width:m,height:g}=i,v={width:g*4/3,height:g},b=(0,Zs.useRef)(null),C=(0,Zs.useRef)(null),x=(0,Zs.useRef)(De()),{submissionNumber:y}=r;Ee(typeof y=="number");let S=pn(e,y),T=r.submissions.byKey[S];(0,Zs.useEffect)(()=&gt;{if(Ee(b.current!=null&amp;&amp;C.current!=null),!s)return;let A=new Gn(b.current,{ignoreDevicePixelRatio:!0,onlyEventOnTarget:!1}),I=E=&gt;{let O,Q;return E.x&lt;0?Q=0:r.screen.width&lt;E.x?Q=n-1:Q=Math.floor(E.x/m),E.y&lt;0?O=0:r.screen.height&lt;E.y?O=t-1:O=Math.floor(E.y/g),[O,Q]};return A.onSingle=(E,O)=&gt;{E==="down"&amp;&amp;(x.current.x=0,x.current.y=0,C.current.style.transform=""),x.current.x+=O.dx,x.current.y+=O.dy;let Q=De(O.original.pageX,O.original.pageY),[j,U]=I(Q),B=j*n+U;if(B&lt;=t*n&amp;&amp;l({from:u,to:B,done:E==="up"}),E==="move"){p.set(!0);let[z,N]=[x.current.x,x.current.y];C.current.style.transform=`translate3d(${z}px, ${N}px, 0)`}else E==="up"&amp;&amp;(p.set(!1),C.current.style.transform="")},()=&gt;A.unbind()},[r.screen,s,t,n,c]);let w=()=&gt;p.get()?"grabbing":s?"grab":"pointer";return or.default.createElement("div",{className:"submissionComparisonCell","data-hover":o},or.default.createElement("div",{className:"submissionComparisonCellDrag",ref:C},or.default.createElement(Mn,{in:s,appear:s,classNames:"submissionComparisonCellOuter",timeout:250},or.default.createElement("div",{className:"submissionComparisonCellOuter"},or.default.createElement("div",{style:{position:"relative",overflow:"hidden"}},or.default.createElement("div",{className:"submissionComparisonCellInner",ref:b},or.default.createElement(Upe,{store:r,screenSize:r.screen,cellSize:i,disabled:s,childClassName:"submissionComparisonCellContent",onClick:()=&gt;{let A=c.filter(I=&gt;!!I).map(I=&gt;I.author_key);r.reduce(Gi({authorKey:d.author_key,generation:d.generation,id:h,pageIndex:f,orderedAuthors:A}))},onPageChange:A=&gt;{r.reduce(aY(h,A))},pageCount:d.page_count,pageIndex:f,getPage:A=&gt;or.default.createElement(zpe,{key:A,style:{cursor:w()},className:"submissionComparisonCellContent"},or.default.createElement(xLe,{id:h,pageIndex:A,data:d,style:v})),dragManager:p}))),!T.hide_author&amp;&amp;or.default.createElement("div",{className:"submissionComparisonCellAuthorName"},or.default.createElement(nr,{className:"submissionComparisonCellAuthorNamePadding"},d.author_name)),s&amp;&amp;or.default.createElement(Gt,{className:"submissionComparisonCellDeleteButton",onClick:a})))))},xLe=({style:r,id:e,pageIndex:t,data:n})=&gt;t&lt;0||n.page_count&lt;=t?null:or.default.createElement("div",{style:r,className:"relative"},or.default.createElement(Wl,{id:e,index:t,skipForKnown404Url:!1,updatable:!0,thumbnails:{document:n.document_thumbnail,annotation:n.annotation_thumbnail}}));var Rt=oe(ve());var r7=oe(Wr());var $pe=oe(Sh()),Zr=oe(ve());var Vpe=({className:r,answer:e,courseId:t,submission:n,card:o,onPopoverOpened:i,onClickHistory:s})=&gt;{let a=Me(),[l,u]=(0,Zr.useState)(!1),[d,c]=(0,Zr.useState)(),p=ua(e,a.userInfo,n.hide_author)&amp;&amp;(a.userInfo.is_teacher||e.author_id===a.userInfo.user_id),h;if(p){let f=e.author_id,m=e.submission_number,g=rg(t,m,f);h=a.submissionHistoryAttributes[g]}return(0,Zr.useEffect)(()=&gt;{p&amp;&amp;!h&amp;&amp;mN(a,{courseId:t,submissionNumber:e.submission_number,authorId:e.author_id})},[e.author_id]),(0,Zr.useEffect)(()=&gt;{d!==void 0&amp;&amp;h&amp;&amp;h.count&gt;d&amp;&amp;u(!0),c(h==null?void 0:h.count)},[h]),(0,Zr.useEffect)(()=&gt;{u(!1)},[e.author_id]),(0,Zr.useEffect)(()=&gt;{e.generation===(h==null?void 0:h.latest_generation)&amp;&amp;u(!1)},[e.generation]),!p||o.parent!==void 0||!!a.screenSharingState?null:Zr.default.createElement("div",{className:r},Zr.default.createElement(wLe,{courseId:t,answer:e,authorId:e.author_id,submission:n,count:d,mark:!!d&amp;&amp;l,onPopoverOpened:i,onClickHistory:s}))},wLe=({answer:r,authorId:e,courseId:t,submission:n,count:o,mark:i,onPopoverOpened:s,onClickHistory:a})=&gt;{let l=Me(),[u,d]=gs({store:l,initialState:!1,onPopoverOpened:s}),c=()=&gt;{d(!0)},p=()=&gt;{d(!1)};return Zr.default.createElement("div",{className:"relative"},Zr.default.createElement("div",{className:"editorButton",role:"button",onClick:c},Zr.default.createElement("div",{className:"editorButtonIcon submissionHistoryBoxButton"}),!!o&amp;&amp;Zr.default.createElement("div",{className:"submissionHistoryBoxBadge","data-updated":i},o)),u&amp;&amp;Zr.default.createElement(TLe,{open:u,onClose:p,courseId:t,answer:r,authorId:e,submission:n,onClickHistory:h=&gt;{a(h),p()}}))},TLe=({courseId:r,answer:e,authorId:t,submission:n,onClickHistory:o,onClose:i,...s})=&gt;{var S,T;let a=Me(),l=pe(),u=e.submission_number,d=nt.submissionHistory({courseId:r,submissionNumber:u,authorId:t}),c=a.fetchStates[d],p=rg(r,u,t),f=((S=a.submissionAnswers.byGenerationKey[p])!=null?S:[]).map(w=&gt;a.submissionAnswers.byId[w]).filter(w=&gt;w!==void 0),m=n.expiry,g=f.findIndex(w=&gt;m&amp;&amp;new Date(m).getTime()-new Date(w.timestamp).getTime()&gt;=0),v=g&gt;=0?f.slice(0,g):f,b=g&gt;=0?f.slice(g,f.length):[],C=(T=a.submissionHistoryAllLoaded.byKey[p])!=null?T:!1,x=DLe(a,r,e);(0,Zr.useEffect)(()=&gt;{c!=="fetching"&amp;&amp;(x?eH(a,{courseId:r,submissionNumber:u,authorId:t,authorKey:e.author_key}):Jie(a,{courseId:r,submissionNumber:u,authorId:t,authorKey:e.author_key,generation:Math.max(e.generation-1,0)}))},[]),(0,Zr.useEffect)(()=&gt;{c instanceof Error&amp;&amp;f.length===0&amp;&amp;i()},[c]);let y=()=&gt;{if(c!=="done"||C)return;let k=f.map(I=&gt;I.generation),A=Math.min(...k);eH(a,{courseId:r,submissionNumber:u,authorId:t,before_generation:A,authorKey:e.author_key})};return Zr.default.createElement(xt,{className:"relative",onClose:i,...s},Zr.default.createElement(fP,{className:"submissionHistoryPopover",disable:C||f.length===0||c!=="done",onLoadMore:y},f.length&gt;0&amp;&amp;Zr.default.createElement(lk,{component:null,appear:!1,enter:!0,exit:!1},v.map(w=&gt;Zr.default.createElement(Mn,{key:w.id,timeout:300,classNames:"expand"},Zr.default.createElement(Wpe,{key:w.id,answer:e,history:w,submission:n,onClick:o}))),m&amp;&amp;Zr.default.createElement(Mn,{timeout:0},Zr.default.createElement("div",{className:"submissionHistoryDueItem"},l.expiryDialogTitle+": "+(0,$pe.default)(m).format("lll"))),b.map(w=&gt;Zr.default.createElement(Mn,{key:w.id,timeout:300,classNames:"expand"},Zr.default.createElement(Wpe,{key:w.id,answer:e,history:w,submission:n,onClick:o}))))),c==="fetching"&amp;&amp;Zr.default.createElement(kLe,{historyCount:f.length}))},DLe=(r,e,t)=&gt;{let n=t.submission_number;return(0,Zr.useMemo)(()=&gt;{let o=t.author_key,i=W0({store:r,courseId:e,submissionNumber:n,authorKey:o});return t.generation===(i==null?void 0:i.generation)},[t,r.submissionAnswers])},kLe=({historyCount:r})=&gt;r&gt;0?Zr.default.createElement(_t,{absolute:"top"}):Zr.default.createElement(Rr,{className:"submissionHistoryPopoverLoading"},Zr.default.createElement(_t,{absolute:"top"})),Wpe=({answer:r,history:e,submission:t,onClick:n})=&gt;{let o=pe(),i=(0,Zr.useRef)(null),s=e.generation===r.generation;return jn(()=&gt;{var a;s&amp;&amp;((a=i.current)==null||a.scrollIntoView(!1))}),Zr.default.createElement(Rr,{ref:i,className:"submissionHistoryPopoverItem","data-selected":s,onClick:()=&gt;n(e)},Zr.default.createElement(PLe,{className:"submissionHistoryPopoverIndex",answer:e,submission:t}),Zr.default.createElement("div",{className:"submissionHistoryPopoverThumb"},Zr.default.createElement(Wl,{documentClassName:"submissionHistoryPopoverThumbImage",id:e.id,thumbnails:{document:e.document_thumbnail,annotation:e.annotation_thumbnail},index:0,updatable:!0,skipForKnown404Url:!0})),Zr.default.createElement("div",{className:"submissionHistoryPopoverSubmitDate"},Ks(new Date(e.timestamp),o.submissionListDateFullFmt)),s&amp;&amp;Zr.default.createElement("div",{className:"submissionHistoryPopoverCheckMark"}))},PLe=({className:r,answer:e,submission:t})=&gt;{let n=t.expiry,o=new Date(e.timestamp),i=n&amp;&amp;new Date(n).getTime()-o.getTime()&gt;0?Ca.submitted:Ca.submittedLate;return Zr.default.createElement("div",{className:r,style:{color:i}},e.generation+1)};var ALe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!0,enableAttendanceCoverButtons:!0,enableFullScreenSharing:!0,drawnType:"annotation",canLeave:!0,shouldSyncPlayController(r,e){return e.publisher===r.userInfo.user_id&amp;&amp;e.presenter===void 0}},QP=class extends Rt.default.Component{constructor(t){super(t);this.shouldHandleCardEvent=({type:t,target:n})=&gt;n==="card"&amp;&amp;["down","up"].includes(t);this.onCardClicked=t=&gt;{var a;let{store:n}=this.props,{editorStore:o,renderer:i}=this.state;if(!i||!o)return;let s=((a=mv(t,i.card))==null?void 0:a.id)||t.id;n.reduce(cU({cardId:s,animate:!0}))};this.createCardLoadingStateChangedCallback=()=&gt;{let t=Do();return(n,o,i)=&gt;{var s;i==="loaded"?t(()=&gt;this.props.store.reduce(ho()),300):Vp(i)&amp;&amp;Op({store:this.props.store,isRoot:((s=this.state.renderer)==null?void 0:s.card.id)===n.id,level:o,errors:i})}};this.canvasRef=Rt.default.createRef();this.loadingSubmissionAnswer=!1;this.onCommandMessage=t=&gt;{var s;if(!(t instanceof Km))return;let n=t.command,{renderer:o}=this.state;if(!o)return;let i=o.card;n.type==="cardEdited"&amp;&amp;n.cardId===((s=o.card)==null?void 0:s.id)&amp;&amp;(i.replaceContent(n.replacement),o.initQuizButtonState(),o.setNeedsDisplay())};this.onDrawnUpdate=async({card:t,op:n,thumbs:o})=&gt;{var u;let{store:i}=this.props,s=i.submissionAnswer;if(!s)return;let{id:a,pageIndex:l}=s;(u=this.layerUpdater)==null||u.update({documentId:a,index:l,card:t,op:n,thumbs:o})};this.onCardSelected=t=&gt;{let{store:n}=this.props,{editorStore:o,renderer:i,answerId:s}=this.state,a=n.submissionAnswers.byId[s];if(!i||!o||!a)return;let l=n.submissionAnswer;if(!l)return;let u=t.rootParent().indexOverGroup(),d=l.pageIndex,c=this.getZoomCardId(l);c&amp;&amp;c!==t.id?n.reduce(u_({cardId:t.id},!o.slideshowPlaying)):d!==u&amp;&amp;n.reduce(l_(a.id,u,!o.slideshowPlaying))};this.onPagerButtonClicked=t=&gt;{var n;(n=this.state.renderer)==null||n.startDocumentPager(t,!0)};this.onDocumentSelected=(t,n)=&gt;{this.changePage({direction:t,jumpToHead:n})};this.onDocumentLoading=t=&gt;{this.setState({documentLoading:t})};this.hasNextDocument=()=&gt;{let{store:t}=this.props,n=this.state.renderer;if(!n)return!1;let o=j0(t,n.card);return o?o.next!==void 0:!1};this.hasPreviousDocument=()=&gt;{let{store:t}=this.props,n=this.state.renderer;if(!n)return!1;let o=j0(t,n.card);return o?o.prev!==void 0:!1};this.onKeyDown=t=&gt;{var s;if((s=this.props.store.screenSharingState)!=null&amp;&amp;s.presenter)return;let{renderer:n,quizViewMode:o,attendanceViewMode:i}=this.state;o!==void 0||i!==void 0||el(this.props.store)||!n||n.handleKey(t)||t.key==="Escape"&amp;&amp;this.dismiss()};this.dismiss=()=&gt;{let t=this.props.store,{renderer:n,editorStore:o}=this.state;if(!n||!o){t.reduce(Gi(void 0));return}let i=t.submissionAnswer;if(!!i){if(i.zoomChildViewStack.length===0){t.reduce(Gi(void 0));return}t.reduce(pU())}};this.extractQuizCard=()=&gt;{var n;let t=(n=this.state.renderer)==null?void 0:n.card;if(t instanceof jr)return t};this.onQuizButtonClicked=t=&gt;{let n=this.state.editorStore;if(!n)return;let o=this.extractQuizCard();if(!!o)switch(n.setToolVisible(!0),t){case 0:n.setQuizSharingModeDialogOpen(!0);break;case 1:this.setState({quizViewMode:"create"});break;case 2:this.setState({quizViewMode:"result"});break;case 3:this.setState({quizViewMode:"answer"});break;case 4:let i=zP(o.content.preset,this.context);window.open(i);break}};this.onStartQuizAnswerTogether=t=&gt;{let{store:n}=this.props,{renderer:o,editorStore:i}=this.state;if(!o||!i)return;let s=this.extractQuizCard();if(!s)return;let a=String(n.userInfo.user_id),{quiz_author:l}=s.content,{submissionNumber:u}=n;if(!u)return;let d=pn(this.props.courseId,u),c=n.submissions.byKey[d];if(!!c&amp;&amp;(this.setState({quizViewMode:t==="normal"?"result":"game"}),a===(l==null?void 0:l.id))){let p=o.getFullScreenSharingState();Gy({store:n,card:s,anonymous:c.hide_author,authorId:n.userInfo.user_id,editorRendererState:p,presentedQuizSharingMode:t})}};this.onAttendanceButtonClicked=t=&gt;{let{store:n}=this.props,{renderer:o,editorStore:i}=this.state;if(!o||!i)return;let{card:s}=o;if(s instanceof wn)switch(i.setToolVisible(!0),t){case 0:{this.setState({attendanceViewMode:"open"});let{submissionNumber:l,userInfo:u,screenSharingForSelf:d}=n;if(!l)break;let c=pn(this.props.courseId,l),p=n.submissions.byKey[c];if(!p)break;if(u.is_teacher&amp;&amp;d&amp;&amp;o){let h=o.getFullScreenSharingState();Gy({store:n,card:s,anonymous:p.hide_author,authorId:u.user_id,editorRendererState:h,presentedQuizSharingMode:void 0})}break}case 1:this.setState({attendanceViewMode:"open"});break;case 2:let a=HP(n.userInfo.is_teacher,this.context);window.open(a);break}};this.onLoadHistory=async t=&gt;{let n=this.state.editorStore;n==null||n.setLoadError(void 0);let o=this.props.store,{submissionAnswer:i,submissionNumber:s}=o;!i||!s||i.id!==t.id&amp;&amp;(this.setState({documentLoading:"history"}),o.reduce(we(15,""),Gi({...i,authorKey:t.author_key,generation:t.generation,id:t.id,pageIndex:0})))};this.onFreeMove=(t,n)=&gt;{var d,c,p;if(!this.canvasRef.current)return;let o=this.state.editorStore;if((o==null?void 0:o.selectedTool)===1){this.canvasRef.current.style.cursor="default";return}let s=n?"grabbing":"grab",{renderer:a,quizViewMode:l,attendanceViewMode:u}=this.state;if(!n&amp;&amp;a&amp;&amp;!l&amp;&amp;!u){let h=a.getObjectUnderPoint(t);(((d=h==null?void 0:h.eventTarget)==null?void 0:d.startsWith("quizButton"))||((c=h==null?void 0:h.eventTarget)==null?void 0:c.startsWith("attendanceButton"))||((p=h==null?void 0:h.eventTarget)==null?void 0:p.startsWith("card")))&amp;&amp;(s="pointer")}this.canvasRef.current.style.cursor=s};let{store:n}=t;Ee(n.submissionAnswer,"submissionAnswer must be defined"),this.state={answerId:n.submissionAnswer.id},this.cardRendererCallback={...fo,shouldHandleCardEvent:this.shouldHandleCardEvent,onCardClicked:this.onCardClicked,onCardLoadingStateChanged:this.createCardLoadingStateChangedCallback()}}componentWillUnmount(){var n,o,i,s,a;this.clearDocumentLayerUpdateNotification(),this.props.store.reduce(zi(!0)),(n=this.state.processor)==null||n.unbind(),(o=this.state.freeMoveProcessor)==null||o.unbind(),(i=this.state.renderer)==null||i.close(),(s=this.layerUpdater)==null||s.close(),(a=this.subscription)==null||a.close();let{store:t}=this.props;!t.submissionComparisonIds&amp;&amp;t.screenSharingState&amp;&amp;Uf({store:this.props.store,sessionId:void 0,courseId:this.props.courseId,showDialog:!1}),window.removeEventListener("keydown",this.onKeyDown)}componentDidMount(){let t=this.props.store;this.layerUpdater=_w({store:t,drawnType:"annotation",uploadThumb:!0}),window.addEventListener("keydown",this.onKeyDown);let n=this.props.courseId,o=t.submissionNumber;if(!o){t.reduce(Gi(void 0));return}let i=t.submissionAnswer;if(!i)return;let s=t.submissionAnswers.byId[this.state.answerId];if(!s||s.author_key!==i.authorKey||s.generation!==i.generation){t.reduce(Gi(void 0));return}let a=W0({store:t,courseId:n,submissionNumber:o,authorKey:s.author_key});if(!a){t.reduce(Gi(void 0));return}let l=pn(n,o),u=t.submissions.byKey[l];u&amp;&amp;UE(s,u,t.userInfo)&amp;&amp;this.loadSubmissionAnswer(s,i,a.generation!==s.generation),this.subscription=ap(this.onCommandMessage)}async unsafeLoadSubmissionAnswer(t,n){var f,m,g;let{id:o}=t,i=this.canvasRef.current;if(!i)return;(f=this.state.editorStore)==null||f.setLoadError(void 0);let{store:s}=this.props,a=await ie.lnsClient.downloadDocument(o).then(Is).then(v=&gt;Es({id:o,file:v,author:t.author_id?Nr(s,t.author_id):Nr(s,s.userInfo.user_id)}));this.clearDrawnAnnotationMipmap(a);let l=(m=a.memberAt(n.pageIndex))!=null?m:a,u=(g=this.state.editorStore)!=null?g:this.createEditorStore();s.reduce(we(15,null));let d,c=[{cardId:l.id}];this.state.renderer?(this.clearDocumentLayerUpdateNotification(),d=this.state.renderer,d.onNextState({store:s,card:l,editorStore:u,screen:s.screen,noteMtx:new ft,viewStack:c,documentLoading:!1})):(d=this.createEditorRenderer({editorStore:u,card:l,canvas:i,viewStack:c}),d.scheduleRender());let p;this.state.processor?p=this.state.processor:(p=new Gn(i),p.onSingle=d.handleSingle,p.onDoubleMove=d.handleDoubleMove);let h;this.state.freeMoveProcessor?h=this.state.freeMoveProcessor:(h=new Ha(i,{enableDragEventPropagation:!0}),h.onFreeMove=this.onFreeMove),this.laserLayerCallback={onHandleSingle:()=&gt;{},onHandleDoubleMove:d.handleDoubleMove,onHandleWheel:d.handleWheel},this.setState({renderer:d,processor:p,freeMoveProcessor:h,editorStore:u,answerId:t.id,documentLoading:void 0})}clearDocumentLayerUpdateNotification(){var s;let t=this.state.renderer;if(!t)return;let n=(s=t.card.document)==null?void 0:s.id;if(!n)return;let o=[],i=t.card.headGroup();for(let a=0;a&lt;i.memberCountOverGroup();a++){let l=$h(n,a);o.push(ZE(l,void 0),e_(l,void 0))}this.props.store.reduce(...o)}clearDrawnAnnotationMipmap(t){for(let n of t.memberAndChildrenIteratorOverGroup()){if(!n.document){let l=mr.get(n);l.annotation.clear(),l.drawn.clear();continue}let o=$h(n.document.id,n.document.index),i=this.props.store.documentAnnotationLayerUpdateNotification[o],s=this.props.store.documentExtensionLayerUpdateNotification[o],a=mr.get(n);i&amp;&amp;a.annotation.clear(),s&amp;&amp;a.drawn.clear()}}async loadSubmissionAnswer(t,n,o){try{await this.unsafeLoadSubmissionAnswer(t,n),this.readMobilePush(t.author_id),o&amp;&amp;this.showToastMessage({type:"history"})}catch(i){if(Je.catchError(i))return;let{store:s}=this.props;fe.error(i);let a="documents/"+t.id;NN({store:s,targetId:a,courseId:this.props.courseId,onOk:()=&gt;{this.props.store.reduce(me(28,void 0),Gi(void 0))}})(i)}}createEditorStore(){let t=ih();return t.subscribe(n=&gt;{var a;let o=n.selectedTool===0&amp;&amp;n.toolVisible;this.props.store.teacherToolVisible!==o&amp;&amp;this.props.store.reduce(zi(o));let i=(a=this.state.renderer)==null?void 0:a.card,s=this.state.editorStore;i&amp;&amp;s&amp;&amp;this.updateCardContent(i,s,n),this.setState({editorStore:n})}),t}updateCardContent(t,n,o){t.id===o.cardId&amp;&amp;n.avSpeedScale!==o.avSpeedScale&amp;&amp;t.replaceContent({"metadata.playback_rate":o.avSpeedScale})}createEditorRenderer(t){let{editorStore:n,card:o,canvas:i,viewStack:s}=t,{store:a}=this.props,l=new Ed,u=o,d=c=&gt;{for(let p of o.iteratorOverGroup()){let h=p.getCard(c);if(h)return h}};return new Id({canvas:i,state:{store:a,editorStore:n,card:u,screen:a.screen,noteMtx:new ft,viewStack:s,documentLoading:!1},role:ALe,playManager:l,callback:{onCardSelected:this.onCardSelected,onPop:this.dismiss,onDrawnMarkedAsUnsaved:this.onDrawnUpdate,onTrashBoxHit(c){},onEnsureDrawnGadget(c){c.gadgets.drawn=c.drawnGeometry("drawn")},onZoomScroll:()=&gt;{this.forceUpdate()},onQuizButtonClicked:this.onQuizButtonClicked,onAttendanceButtonClicked:this.onAttendanceButtonClicked,getCardOnNote:d,...this.cardRendererCallback},documentPagerDelegate:{hasNextDocument:this.hasNextDocument,hasPreviousDocument:this.hasPreviousDocument,onDocumentSelected:this.onDocumentSelected,onDocumentLoading:this.onDocumentLoading}})}componentDidUpdate(t,n,o){var x,y,S;let{store:i,courseId:s}=this.props,{answerId:a,renderer:l,editorStore:u}=this.state,{submissionNumber:d,submissionAnswer:c,userInfo:p}=i;if(c===void 0||d===void 0||!l||!u)return;let h=pn(s,d),f=i.submissions.byKey[h];if(!f)return;let m=i.submissionAnswers.byId[a];if(m===void 0){fN(i,{courseId:s,submissionNumber:d,revealAnswer:ig({submission:f,userInfo:p})}),i.reduce(Gi(void 0));return}else if(m.id!==c.id){let T=i.submissionAnswers.byId[c.id];T?this.loadingSubmissionAnswer||(!!this.state.renderer&amp;&amp;ua(T,i.userInfo,f.hide_author)&amp;&amp;this.state.renderer.updateFullScreenSharingDocument({document:T.id,page:c.pageIndex,authorId:T.author_id}),this.loadingSubmissionAnswer=!0,this.loadSubmissionAnswer(T,c).finally(()=&gt;{this.loadingSubmissionAnswer=!1})):i.reduce(Gi(void 0));return}let g=l.card.rootParent().memberAt(c.pageIndex);if(!g){i.reduce(l_(m.id,0));return}let v=this.getNextRenderCard({root:g,previewAnswer:c});v!==l.card&amp;&amp;u.setLoadError(void 0),l.onNextState({store:i,card:v,editorStore:u,screen:i.screen,noteMtx:new ft,viewStack:[{cardId:g.id},...c.zoomChildViewStack],documentLoading:this.state.documentLoading!==void 0}),el(i)&amp;&amp;u.avPlaying&amp;&amp;l.playManager.pause(u);let b=i.screenSharingState,C=c.pageIndex;if((b==null?void 0:b.type)==="comparison"&amp;&amp;ua(m,i.userInfo,f.hide_author)){let{anonymous:T,publisher:w,presenter:k}=b,A=Ec({store:i,anonymous:T,presenter:k,publisher:w,fullscreen:{document:m.id,page:C,authorId:m.author_id,scale:1,center:{x:.5,y:.5},playToken:l.playManager.playToken,currentTime:u.avSeekTime,isPlaying:l.playManager.remotePlaying,isPlayEnded:u.avEnded,needsDecorateFavorite:l.card.favorite}});i.reduce(Os(Wy(b.sessionId,this.props.courseId,A)))}if(n.documentLoading&amp;&amp;this.state.documentLoading===void 0&amp;&amp;this.showToastMessage({type:n.documentLoading}),((x=t.store.mobilePushes.byCourseId[s])==null?void 0:x.length)&lt;((y=this.props.store.mobilePushes.byCourseId[s])==null?void 0:y.length)&amp;&amp;this.readMobilePush(m.author_id),!u.slideshowPlaying&amp;&amp;((S=n.editorStore)==null?void 0:S.slideshowPlaying)){let T=this.getZoomCardId(c);T?i.reduce(u_({cardId:T})):i.reduce(l_(m.id,C))}}getZoomCardId(t){let n=t.zoomChildViewStack.length-1,o;return n&gt;=0&amp;&amp;(o=t.zoomChildViewStack[n].cardId),o}getNextRenderCard(t){let{root:n,previewAnswer:o}=t,i,s=this.getStudentPresentationNotification();if(s)i=this.getNextCardByStudentPresentation({root:n,previewAnswer:o,notification:s});else{i=n;let a=this.getZoomCardId(o);if(a){let l=i.getCard(a);l?i=l:this.props.store.reduce(pU())}}return i}getNextCardByStudentPresentation(t){var v;let n=this.props.store,{root:o,previewAnswer:i,notification:s}=t,{authorKey:a,generation:l,id:u,pageIndex:d,orderedAuthors:c,zoomChildViewStack:p}=i;Ee(u===s.fullscreen.document,"fullscreen document must be the same as submissionPreview id");let h=s.fullscreen.page,f=o.memberAt(h),m=(v=s.fullscreen.zoom)==null?void 0:v.id;m&amp;&amp;(f=f.getCard(m));let g=this.getZoomCardId(i);if(h===d&amp;&amp;m===g)return f;if(!m||h!==d)n.reduce(Gi({authorKey:a,generation:l,id:u,pageIndex:h,orderedAuthors:c,zoomChildViewStack:m?[{cardId:m}]:void 0}));else{let b=p.findIndex(C=&gt;C.cardId===m);if(b&gt;=0){let C=p.splice(0,b+1);n.reduce(Gi({authorKey:a,generation:l,id:u,pageIndex:h,orderedAuthors:c,zoomChildViewStack:C}))}else!g||f.isDescendantOf(g)?n.reduce(cU({cardId:f.id})):n.reduce(u_({cardId:f.id}))}return f}getStudentPresentationNotification(){let t=this.props.store;if(!t.screenSharingForPresenter)return;let n=t.screenSharingActionNotification[this.props.courseId];if(as(n))return n}showToastMessage(t){let{type:n}=t,{store:o}=this.props,i=o.submissionNumber;if(!i)return;let s=o.submissionAnswers.byId[this.state.answerId];if(!s)return;let a=he.get().strings;if(n==="history"){let c=Ks(new Date(s.timestamp),a.submissionListDateFullFmt),p=(0,r7.sprintf)(a.submittersAnswer,c);o.reduce(Jt({type:"normal",text:p}));return}let l=pn(this.props.courseId,i),u=o.submissions.byKey[l],d;!u.hide_author&amp;&amp;s.author_name?d=(0,r7.sprintf)(a.submittersAnswer,s.author_name):n==="prev"?d=a.previousSomeonesAnswer:d=a.nextSomeonesAnswer,o.reduce(Jt({type:"normal",text:d}))}readMobilePush(t){t!==void 0&amp;&amp;this.props.store.submissionNumber!==void 0&amp;&amp;(!this.props.store.userInfo.is_teacher||jy({store:this.props.store,courseId:this.props.courseId,submissionNumber:this.props.store.submissionNumber,authors:[t]}))}changePage(t){let{direction:n,jumpToHead:o}=t,i=this.props.store,{submissionAnswer:s,submissionNumber:a}=i,l=this.state.renderer;if(!s||!a||!l)return;let u=j0(i,l.card);if(!u)return;this.setState({documentLoading:n});let d=s.orderedAuthors,c,p;if(n==="prev"&amp;&amp;u.prev){let h=u.prev;if(p=i.submissionAnswers.byId[h],!p)return;o?c=0:c=p.page_count-1}else if(n==="next"&amp;&amp;u.next){let h=u.next;if(p=i.submissionAnswers.byId[h],!p)return;c=0}else return;i.reduce(we(15,""),Gi({authorKey:p.author_key,generation:p.generation,id:p.id,pageIndex:c,orderedAuthors:d}))}render(){var S,T,w,k,A;let{store:t}=this.props,{renderer:n,editorStore:o,answerId:i}=this.state,s=t.submissionAnswers.byId[i];if(!s)return null;let a=pn(this.props.courseId,s.submission_number),l=t.submissions.byKey[a];if(!l)return Rt.default.createElement(Ev,{onClose:()=&gt;{t.reduce(Jh(void 0))}});let{width:u,height:d,dpr:c}=t.screen,[p,h]=[Math.floor(u*c),Math.floor(d*c)],f=(o==null?void 0:o.selectedTool)===0&amp;&amp;(o==null?void 0:o.activeFingerTool)==="laser",m=(S=n==null?void 0:n.toolOpacity)!=null?S:1,g=n==null?void 0:n.card,v=()=&gt;{if(this.setState({quizViewMode:void 0}),t.screenSharingForSelf&amp;&amp;this.state.renderer){let I=this.state.renderer.getFullScreenSharingState();Ux(t,I,void 0)}},b=()=&gt;{this.setState({quizViewMode:"closing"})},C=()=&gt;{if(this.setState({attendanceViewMode:void 0}),t.screenSharingForSelf&amp;&amp;this.state.renderer){let I=this.state.renderer.getFullScreenSharingState();gv(t,I,void 0)}},x={authorName:s.author_name,answerTimestamp:s.timestamp,expiry:(T=l.expiry)!=null?T:void 0,pageCount:s.page_count,pageIndex:(w=n==null?void 0:n.card.indexOverGroup())!=null?w:0,anonymous:l.hide_author},y=this.state.quizViewMode!==void 0||this.state.attendanceViewMode!==void 0;return Rt.default.createElement("div",{className:"submissionPreview"},f&amp;&amp;Rt.default.createElement(Ad,{canvasSize:{width:p,height:h},callback:this.laserLayerCallback,consumer:n==null?void 0:n.laserPointerConsumer}),!n&amp;&amp;Rt.default.createElement(_t,{absolute:"top"}),o&amp;&amp;g&amp;&amp;n&amp;&amp;!y&amp;&amp;Rt.default.createElement(Rt.default.Fragment,null,Rt.default.createElement(ELe,{store:t,courseId:this.props.courseId,editorStore:o,submission:l,answer:s,card:g,drawToolDispatcher:n,opacity:m,editorRendererScreenShareState:()=&gt;{var I;return(I=this.state.renderer)==null?void 0:I.getFullScreenSharingState()},playManager:n.playManager,onLoadHistory:this.onLoadHistory,onBack:this.dismiss}),!this.state.documentLoading&amp;&amp;Rt.default.createElement(Bv,{card:g,store:t,editorStore:o,screen:t.screen,editable:!1,onCardSelected:this.onCardSelected,onPagerButtonClicked:this.onPagerButtonClicked,opacity:m,cardRendererCallback:this.cardRendererCallback,playManager:n.playManager,timestampAuthorPageNumState:x})),Rt.default.createElement("canvas",{ref:this.canvasRef,className:"canvas",width:p,height:h,style:{backgroundColor:n?"transparent":"#888",width:"100%",height:"100%"}}),(o==null?void 0:o.loadError)&amp;&amp;Rt.default.createElement(lh,{error:o.loadError}),Rt.default.createElement(tr,{className:"centralizedModalWrapper",open:(A=(k=this.state.editorStore)==null?void 0:k.quizSharingModeDialogOpen)!=null?A:!1,overlay:!0,onClose:()=&gt;{var I;return(I=this.state.editorStore)==null?void 0:I.setQuizSharingModeDialogOpen(!1)}},Rt.default.createElement(Mw,{onStartQuizAnswerTogether:this.onStartQuizAnswerTogether,onClose:()=&gt;{var I;return(I=this.state.editorStore)==null?void 0:I.setQuizSharingModeDialogOpen(!1)}})),(n==null?void 0:n.card)instanceof jr&amp;&amp;this.state.quizViewMode&amp;&amp;Rt.default.createElement(Mv,{card:n.card,store:t,onDismiss:v,onClosing:b,viewMode:this.state.quizViewMode,updateCoverDataBeforeUnload:!1}),(n==null?void 0:n.card)instanceof wn&amp;&amp;this.state.attendanceViewMode&amp;&amp;Rt.default.createElement(Nv,{card:n.card,viewMode:this.state.attendanceViewMode,onDismiss:C,updateCoverDataBeforeUnload:!1}))}};QP.contextType=Gm;function ILe(r,e){Ee(e.document!=null,"document must be set");let t=e.document;Yie(r,{documentId:t.id,fallback:(n,o)=&gt;{let i=e.memberAt(n);return fe.log("fallback",n,o),o==="document"?gM(i):vM(i)}})}var ELe=({store:r,courseId:e,editorStore:t,answer:n,card:o,submission:i,drawToolDispatcher:s,opacity:a,editorRendererScreenShareState:l,playManager:u,onLoadHistory:d,onBack:c})=&gt;{let p=r.userInfo.is_teacher,h=n.author_id===r.userInfo.user_id,f=!!r.screenSharingState,m=!h,g=()=&gt;u.pause(t),[v,b]=gs({store:r,initialState:!1,onPopoverOpened:g}),[C,x]=gs({store:r,initialState:!1,onPopoverOpened:g}),y=()=&gt;{b(!1),x(!1)},S=()=&gt;{ILe(r,o),b(!1)},T=V=&gt;{d(V)};(0,Rt.useEffect)(()=&gt;{t.moveMode&amp;&amp;y()},[t.moveMode]);let w=pe(),k=o.parent===void 0,A=t.selectedTool===0,I=t.selectedTool===1,E=!1,O=!1;if(r.userInfo.is_teacher){let V=o instanceof Vo;E=Ov({screen:r.screen,isScreenSharing:f,isFingerMode:A,isFocusWebCard:V,bounds:1135}),O=MLe({screenWidth:r.screen.width,isScreenSharing:f,isRootCard:k,isWebCard:V})}let Q=E?!I:!0,j=E&amp;&amp;k?!A:!0,U=V=&gt;{let re=l();!re||Ox(r,re,V)},[B,z]=(0,Rt.useState)(!1);jn(()=&gt;z(!0));let N=i.hide_author;return Rt.default.createElement(Ba,{in:t.toolVisible,unmountOnExit:!1},Rt.default.createElement("div",{className:"editorHeader fade",style:{opacity:a&lt;1?a:void 0,display:t.toolVisible?"block":"none"}},Rt.default.createElement("div",{className:"editorHeaderInner"},Rt.default.createElement("div",{className:"editorHeaderButtonGroupGrid","data-pseudo-combined":O},Rt.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"left"},(!f||r.screenSharingForSelf)&amp;&amp;Rt.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Rt.default.createElement("div",{role:"button",className:"editorButton",onClick:c},Rt.default.createElement("div",{className:"editorButtonIcon backButtonIcon"})))),Rt.default.createElement("div",{className:"editorHeaderButtonGroup"},j&amp;&amp;Rt.default.createElement(Uv,{editorStore:t,animateAppear:!1}),p&amp;&amp;Q&amp;&amp;k&amp;&amp;Rt.default.createElement(Zf,{store:r,editorStore:t,forDocument:!0,drawToolDispatcher:s,animateAppear:!1}),o instanceof Vo&amp;&amp;o.content.uri&amp;&amp;Rt.default.createElement(Rt.default.Fragment,null,f&amp;&amp;Rt.default.createElement(zv,{card:o,onClick:()=&gt;u.pause(t),onClickWithShare:()=&gt;U(o.content.uri),closedWindowCallback:()=&gt;U(void 0)}),!f&amp;&amp;Rt.default.createElement(zv,{card:o,onClick:()=&gt;u.pause(t)}))),Rt.default.createElement("div",{className:"editorHeaderButtonGroup","data-align":"right"},Rt.default.createElement("div",{className:"flexSpacer"}),Rt.default.createElement(Vpe,{className:"editorButtonWrapper editorHeaderItem",courseId:e,answer:n,submission:i,card:o,onPopoverOpened:g,onClickHistory:T}),k&amp;&amp;!f&amp;&amp;Rt.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Rt.default.createElement("div",{className:"editorButton",role:"button",onClick:()=&gt;x(!0)},Rt.default.createElement("div",{className:"editorButtonIcon exportButtonIcon"})),Rt.default.createElement(bw,{submission:i,courseId:e,answers:[n]},V=&gt;Rt.default.createElement(_Le,{open:C,onClose:y,onClickUse:()=&gt;{V(),x(!1)},isTeacher:r.userInfo.is_teacher}))),r.screenSharingState&amp;&amp;Rt.default.createElement(rm,{store:r,sharingState:r.screenSharingState}),p&amp;&amp;u&amp;&amp;Rt.default.createElement(Rt.default.Fragment,null,k&amp;&amp;!f&amp;&amp;Rt.default.createElement("div",{className:"editorButtonWrapper editorHeaderItem"},Rt.default.createElement("div",{className:"editorButton editorTextButton","data-disabled":!m,onClick:()=&gt;b(!0)},Rt.default.createElement(lC,{lines:r.locale==="en-US"?[w.send,w.back]:[w.sendBack]})),Rt.default.createElement(FLe,{open:v,onClose:y,onClickReply:S})),ua(n,r.userInfo,N)&amp;&amp;Rt.default.createElement(Rt.default.Fragment,null,!N&amp;&amp;Rt.default.createElement(bP,{store:r,editorStore:t,card:o,presenter:n.author_id,authorId:n.author_id,anonymous:N,editorRendererState:l,playManager:u}),!r.screenSharingForPresenter&amp;&amp;Rt.default.createElement(bP,{store:r,editorStore:t,authorId:n.author_id,anonymous:N,card:o,editorRendererState:l,playManager:u})))))),E&amp;&amp;k&amp;&amp;Rt.default.createElement("div",{className:"editorHeaderInner"},Rt.default.createElement("div",{className:"editorHeaderButtonGroup"},A&amp;&amp;Rt.default.createElement(Uv,{editorStore:t,animateAppear:B}),p&amp;&amp;I&amp;&amp;Rt.default.createElement(Zf,{store:r,editorStore:t,forDocument:!0,drawToolDispatcher:s,animateAppear:B})))))},_Le=({isTeacher:r,onClickUse:e,...t})=&gt;{let n=pe();return Rt.default.createElement(xt,{...t},Rt.default.createElement(Rr,{onClick:e},n.use))},FLe=({open:r,onClose:e,onClickReply:t})=&gt;{let n=pe();return Rt.default.createElement(xt,{open:r,onClose:e},Rt.default.createElement("div",{className:"popoverDialog"},Rt.default.createElement("div",{className:"popoverDialogInner"},Rt.default.createElement("div",{className:"popoverDialogConfirmMessage"},n.confirmSendBack),Rt.default.createElement("div",{className:"popoverDialogButtonGroup"},Rt.default.createElement("div",{className:"popoverDialogButton popoverDialogCancelButton",role:"button",onClick:e},n.cancel),Rt.default.createElement("div",{className:"popoverDialogButton popoverDialogOkButton popoverDialogSendBackButton",role:"button",onClick:t},n.sendBack)))))},MLe=r=&gt;{let{screenWidth:e,isScreenSharing:t,isRootCard:n,isWebCard:o}=r;if(!n&amp;&amp;!t)return!1;let i=t?Yde:qde;return o&amp;&amp;(i+=fW),e&lt;=i};var jpe=()=&gt;{let r=Me(),{submissionBoxOpen:e,submissionNumber:t,submissionComparisonIds:n,desktop:o}=r,i=Xt(r);return Mu.default.createElement(Mu.default.Fragment,null,o&amp;&amp;Or(o.courseId)&amp;&amp;Mu.default.createElement(eo,{open:r.submittingDocument!==void 0,transition:"up",onClose:()=&gt;{r.reduce(Ub(void 0))}},Mu.default.createElement(vue,{store:r,onClose:()=&gt;{r.reduce(Ub(void 0))}})),Or(i)&amp;&amp;Mu.default.createElement(Mu.default.Fragment,null,Mu.default.createElement(tr,{open:e,overlay:!0,container:"none",onClose:()=&gt;Vx(r)},Mu.default.createElement(gue,{store:r,courseId:i,onClose:()=&gt;Vx(r)})),Mu.default.createElement(tr,{open:r.submissionComparisonIds!=null,container:"none",onClose:()=&gt;{r.reduce(mp(void 0))}},!!t&amp;&amp;e&amp;&amp;!!n&amp;&amp;Mu.default.createElement(Gpe,{courseId:i,onClose:()=&gt;{r.reduce(mp(void 0))}})),Mu.default.createElement(tr,{open:r.submissionAnswer!==void 0&amp;&amp;r.submissionNumber!==void 0,container:"none",onClose:()=&gt;{r.reduce(Gi(void 0))}},Mu.default.createElement(QP,{store:r,courseId:i}))))};var yC=oe(ve());var qo=oe(ve()),mhe=oe(Wr());async function Kpe({groupId:r,files:e,onProgress:t,onUpload:n,signal:o}){try{for(let i in e){let s=e[i];t(Number(i)+1);let{id:a,asset:l}=await NLe({file:s,extWithDot:pa(s.name),groupId:r,signal:o});n({id:a,name:s.name,asset:l})}return{type:"success",value:void 0}}catch(i){return o.aborted?{type:"cancelled"}:{type:"error",error:i}}}async function NLe({file:r,groupId:e,extWithDot:t,signal:n}){let{id:o}=await ie.lnsClient.uploadGenericFile({file:r,extWithDot:t,signal:n}),{metadata:i,thumbnailsGenerator:s}=await BLe(r),l=!Za(t)&amp;&amp;s?await RLe(s,n):[],u=CM(i,l,o6),d=await ie.lnsClient.createAsset({pageCount:i.length,assetGenericFileId:o,attachments:u.next().value});for(let p of u)await ie.lnsClient.sendPdfAttachments({uuid:d,attachments:p});let{id:c}=await ie.lnsClient.uploadDocumentMaterialWithAsset({name:r.name,asset:d,groupId:e,signal:n});return{id:c,asset:d}}async function BLe(r){try{let e=await Vg(r);return{metadata:e.getMetadata(),thumbnailsGenerator:e.generateThumbnails()}}catch(e){if(e instanceof Np)return{metadata:[{duration:0}]};throw e}}async function RLe(r,e){let t=[],n=0;for await(let o of r){if(o){let[i,s]=await Promise.all([io(o.small,"image/png","small.png"),io(o.medium,"image/png","medium.png")]),{id:a}=await ie.lnsClient.uploadGenericFile({file:i,extWithDot:".png",signal:e}),{id:l}=await ie.lnsClient.uploadGenericFile({file:s,extWithDot:".png",signal:e});t.push({index:n,small:a,medium:l})}n++}return t}var LLe=/[\\\n\r\/:;\?\*&lt;&gt;"\|]/,OLe=/^\.+?$/;function LR(r){if(pa(r).length===0)return"no-ext";if(LLe.test(r)||OLe.test(r))return"bad-chars"}function OR({category:r,userInfo:e}){return r==="private"?!0:e.is_teacher?r==="district-all"||r==="district-teacher"?e.district_document_group_write_permission===!0:!0:!1}var Zt=oe(ve());var ULe={enableRightClick:!1,enableCardEditTool:!1,enableQuizCoverButtons:!1,enableAttendanceCoverButtons:!1,enableFullScreenSharing:!1,canLeave:!0,drawnType:"annotation",shouldSyncPlayController(r,e){return!1}};function zLe(r,e,t){let n=r.extension.toLocaleLowerCase();if(_b(n)&amp;&amp;!r.asset_proxy)return e!==void 0;if(t){if(U0(n))return!0}else return!1;return!1}function HLe(r,e){let t=r.extension.toLocaleLowerCase();return U0(t)&amp;&amp;e!==null?!0:!!(_b(t)&amp;&amp;!r.asset_proxy)}var UR=({document:r,store:e,fromTrashBox:t,onClose:n})=&gt;{var I,E,O,Q,j;let o=pe(),i=(0,Zt.useRef)(null),s=(0,Zt.useRef)(null),a=(0,Zt.useRef)(),l=(0,Zt.useRef)(),[u,d]=(0,Zt.useState)(!1),[c,p]=(0,Zt.useState)(),h=o.cannotInsertWhileStillLoadingDocument,f;r.asset_proxy&amp;&amp;(f=e.assetMetadata[r.asset_proxy]);let m=(I=s.current)==null?void 0:I.getBoundingClientRect(),g=el(e),v=rd(),b=U=&gt;{l.current=U,C.current&amp;&amp;(C.current.loadError=void 0),v()},C=(0,Zt.useRef)(),x=U=&gt;{C.current=U,v()};(0,Zt.useEffect)(()=&gt;{let U=i.current;if(!U)return;let B=new Ha(U,{enableDragEventPropagation:!0});return B.onFreeMove=(z,N)=&gt;{U.style.cursor=N?"grabbing":"grab"},()=&gt;{B.unbind()}},[r.id]),(0,Zt.useEffect)(()=&gt;{let U=B=&gt;{if(B.target instanceof HTMLInputElement)return;let z=a.current;!z||g||z.handleKey(B)||B.key==="Escape"&amp;&amp;n()};return window.addEventListener("keydown",U),()=&gt;{window.removeEventListener("keydown",U)}},[g]),nd(()=&gt;{var U;e.reduce(zi(!0)),(U=a.current)==null||U.close(),a.current=void 0}),(0,Zt.useEffect)(()=&gt;{var U;r.asset_proxy&amp;&amp;!f&amp;&amp;SM(e,r.asset_proxy,r.extension.toLowerCase()===".pdf"),(U=C.current)==null||U.setLoadError(void 0)},[r.id]),(0,Zt.useEffect)(()=&gt;{let U=i.current;if(!U||r.asset_proxy&amp;&amp;!f)return;let B=s.current,{width:z,height:N}=B.getBoundingClientRect(),V=window.devicePixelRatio;U.width=z*V,U.height=N*V;let re=new Gn(U),ce=(W,G,ee)=&gt;{W.id===ee.cardId&amp;&amp;G.avSpeedScale!==ee.avSpeedScale&amp;&amp;W.replaceContent({"metadata.playback_rate":ee.avSpeedScale})},ge=W=&gt;{let G=ih();G.subscribe(F=&gt;{var P,X;let L=(P=a.current)==null?void 0:P.card,$=C.current;L&amp;&amp;$&amp;&amp;ce(L,$,F),x(F),(X=a.current)==null||X.setNeedsDisplay()});let ee=new Id({canvas:U,state:{store:e,editorStore:G,card:W,screen:{width:z,height:N,keyboardHeight:0},viewStack:[{cardId:W.id}],noteMtx:new ft,documentLoading:!1},role:ULe,decorateFavorites:!0,playManager:new Ed,callback:{onCardSelected:b,onPop:()=&gt;n(),onDrawnMarkedAsUnsaved:()=&gt;{},onTrashBoxHit(F){},onEnsureDrawnGadget(F){F.gadgets.drawn=F.drawnGeometry("drawn")},onZoomScroll:F=&gt;{var L;(L=C.current)==null||L.setZoom(F.a)},...fo,onCardLoadingStateChanged(F,L,$){var P;Vp($)&amp;&amp;Op({store:e,isRoot:F.id===((P=a.current)==null?void 0:P.card.id),level:L,errors:$})}}});re.onSingle=ee.handleSingle,re.onDoubleMove=ee.handleDoubleMove,ee.scheduleRender(),x(G),a.current=ee,l.current=W},ae=W=&gt;{fe.error(W);let G="documents/"+r.id;e.reduce(me(28,xd({error:W,isDocument:!0,targetId:G,courseId:T,okMessage:o.closeThisScreen,onOk:()=&gt;{n(),e.reduce(me(28,void 0))}})))},{asset_proxy:Y}=r;return Y?ie.lnsClient.getAssetMetadataAll(Y).then(async W=&gt;{let G=await ute({ext:r.extension,remote_id:Y,metadataList:W,author:{id:-1,name:""}});return G.forEach(ee=&gt;{mr.forCard(ee.id,r.id).content.load("small",ee)}),G}).then(ge).catch(ae):ie.lnsClient.downloadDocument(r.id).then(Is).then(W=&gt;{var G;return Es({id:r.id,file:W,snapshotId:r.comment_snapshot_id,author:Nr(e,(G=r.author_id)!=null?G:e.userInfo.user_id)})}).then(W=&gt;ge(W)).catch(ae),()=&gt;{re.unbind(),a.current&amp;&amp;(a.current.close(),a.current=void 0)}},[r.id,r.comment_snapshot_id,f]),(0,Zt.useEffect)(()=&gt;{let U=i.current;if(!U||!m||!a.current||!l.current||!C.current)return;let B=window.devicePixelRatio,z=$e(Math.floor(m.width*B),Math.floor(m.height*B));Jc(U,z)||(U.width=z.width,U.height=z.height),a.current.onNextState({store:e,card:l.current,editorStore:C.current,screen:{width:m.width,height:m.height,keyboardHeight:0},noteMtx:new ft,viewStack:[{cardId:l.current.id}],documentLoading:!1})},[s.current,l.current,e.teacherToolVisible,C.current,m]),(0,Zt.useEffect)(()=&gt;{var U;g&amp;&amp;C.current&amp;&amp;((U=a.current)==null||U.playManager.pause(C.current))},[g]);let y=zLe(r,a.current,f);!y&amp;&amp;f===null&amp;&amp;(h=o.unsupportedContentType);let S=U=&gt;{let B=sa(U.currentTarget.getBoundingClientRect()),z=tn(B),N=new Pb(r,z);e.desktop?(At(N),n()):(p(N),d(!0))},T=Xt(e),w=(O=(E=a.current)==null?void 0:E.toolOpacity)!=null?O:1,k=m!=null?m:e.screen,A={width:k.width,height:k.height,isMobile:e.screen.isMobile};return Zt.default.createElement(Zt.default.Fragment,null,Zt.default.createElement("div",{className:"documentPreview",style:{opacity:w}},Zt.default.createElement(Et,null,Zt.default.createElement(Ft,null,Zt.default.createElement(Mt,null,Zt.default.createElement(lx,{onClick:n}),Zt.default.createElement(Ure,null)),Zt.default.createElement(Vt,null,Zt.default.createElement(nr,null,r.name)),!t&amp;&amp;Zt.default.createElement(jt,{className:"documentNavHeaderGridCellRight"},Zt.default.createElement(GLe,{store:e,doc:r,card:l.current,editorStore:C.current}),Zt.default.createElement(gt,{onClick:S,disabled:!y,title:y?o.insertCardFromDocument:h},o.useFormally)))),Zt.default.createElement("div",{className:"documentDetailContent",ref:s,onDragOver:n},HLe(r,f)?Zt.default.createElement("div",{className:"documentCanvasWrapper"},!a.current&amp;&amp;Zt.default.createElement(_t,{absolute:"top"}),Zt.default.createElement("canvas",{ref:i,style:{width:"100%",height:"100%"}}),((Q=C.current)==null?void 0:Q.loadError)&amp;&amp;Zt.default.createElement(lh,{error:(j=C.current)==null?void 0:j.loadError}),Zt.default.createElement("div",{className:"documentDetailFooter"},a.current&amp;&amp;C.current&amp;&amp;l.current&amp;&amp;Zt.default.createElement(Ba,{in:C.current.toolVisible},Zt.default.createElement(Bv,{card:l.current,store:e,editorStore:C.current,screen:A,editable:!1,onCardSelected:b,cardRendererCallback:fo,opacity:1,playManager:a.current.playManager})))):Zt.default.createElement("div",{className:"unsupportedDocumentFile"},o.unsupportedContentType))),Or(T)&amp;&amp;Zt.default.createElement(eo,{open:u,onClose:()=&gt;{p(void 0),d(!1)},transition:"fade"},Zt.default.createElement(vw,{store:e,courseId:T,message:o.selectNoteForAddingMaterials,onClose:()=&gt;{p(void 0),d(!1)},onReady:()=&gt;{At(c),n()}})))},GLe=({store:r,editorStore:e,doc:t,card:n})=&gt;{let o=he.get().strings,[i,s]=(0,Zt.useState)(!1),[a,l]=(0,Zt.useState)("normal"),u=async()=&gt;{var g;let p=27;r.reduce(we(p,o.exportingCardAsPdf));let h=await Ot.regularFont.getOrFetch(),f=await Ot.boldFont.getOrFetch(),m=new Pv({ctx:ie,regularFont:h,boldFont:f});try{let v=await m.exportDocumentsAsPdf({documents:[{id:t.id,authorName:Nr(r,(g=t.author_id)!=null?g:r.userInfo.user_id).name}],selfAuthor:Nr(r,r.userInfo.user_id)});r.reduce(we(p,null));let b=La(t.name,".pdf");Ol(v,b)}catch(v){r.reduce(me(p,{title:o.couldntExportCard,...ot(v),onOk:()=&gt;r.reduce(me(p,void 0)),okMessage:o.back}),we(p,null))}},d=()=&gt;{s(!1)},c=t.asset_proxy?iue(o,t):vB({t:o,card:n,downloadFileName:t.name,editorStore:e});return Zt.default.createElement(Gt,{className:"documentPreviewShareButton"},Zt.default.createElement("div",{className:"documentPreviewShareIcon",onClick:()=&gt;{l("normal"),s(!0)}}),Zt.default.createElement(xt,{open:i,onClose:d},a==="export"&amp;&amp;Zt.default.createElement(Ra,{className:"documentSharePopoverContainer"},Zt.default.createElement(Et,{inPopover:!0},Zt.default.createElement(Ft,null,Zt.default.createElement(Mt,null,Zt.default.createElement(H2,{onClick:()=&gt;l("normal")})),Zt.default.createElement(Vt,null,o.exportCard),Zt.default.createElement(jt,null))),Zt.default.createElement("div",null,Zt.default.createElement(Iy,{iconSrc:"/svg/pdf.svg",text:o.pdfFile,onClick:()=&gt;{u(),d()},className:"documentSharePopoverItem"}))),a==="normal"&amp;&amp;Zt.default.createElement(Ra,{className:"documentSharePopoverContainer"},!t.asset_proxy&amp;&amp;Zt.default.createElement(Iy,{className:"documentSharePopoverItem",iconSrc:"/img/ExportMenuIcon@2x.png",text:o.exportCard+" (\u03B2)",onClick:()=&gt;l("export"),showArrow:!0}),Zt.default.createElement(XB,{store:r,menu:c,onClose:d,className:"documentSharePopoverItem"}))))};var im=oe(ve()),sm=oe(ve());var qpe=oe(bS());var $w=class extends Error{constructor(t){super("exceed exportable limits");this.type=t}},n7=class{constructor(){this.maxItemNumber=3e3;this.maxHierarchyNumber=100;this.document=0;this.group=1;this.hierarchy=0;this.maxHierarchy=0}addCount(e,t){if(this.document+=e,this.group+=t,this.document+this.group&gt;=this.maxItemNumber)throw new $w("items")}addHierarchy(){if(this.hierarchy+=1,this.maxHierarchy=Math.max(this.hierarchy,this.maxHierarchy),this.maxHierarchy&gt;this.maxHierarchyNumber)throw new $w("hierarchy")}decreaseHierarchy(){this.hierarchy-=1}},zR=class{constructor(e){this.structureMap={};this.docId2AssetId=new Map;this.retryable=!1;let t=this.outputFolderName(e.author.name,e.schoolName),o=new qpe.default().folder(t);if(!o)throw new Error("Failed to initialize document exporter zip folder");this.fileName=t,this.folder=o,this.ctx=e.ctx,this.author=e.author,this.appVersion=e.appVersion,this.signal=e.signal,this.onProgress=e.onProgress}async do(e){try{Ee(e!==void 0||this.retryable,"params must not be undefined or retryable must be true"),this.retryable=!1,e&amp;&amp;await this.analyze(e.curDir,e.selectedItems),await this.export();let t=await this.getBlob();return{type:"success",value:t}}catch(t){return t instanceof tp&amp;&amp;this.signal.aborted?{type:"cancelled"}:t instanceof sr&amp;&amp;t.status&gt;=500&amp;&amp;this.lastIndex!==void 0?(this.retryable=!0,{type:"error",error:t}):{type:"error",error:t}}}async getBlob(){Ee(Object.keys(this.structureMap).length&gt;0,"structureMap must not be empty");let e={creator:{app:"web",version:this.appVersion},folders:this.structureMap,documents_count:this.docId2AssetId.size};return this.folder.file("structure.json",JSON.stringify(e)),{blob:await this.folder.generateAsync({type:"blob",mimeType:"application/octet-stream",compression:"DEFLATE"}),name:this.fileName}}async analyze(e,t){Ee(e.contents!==void 0,"contents must not be undefined");let n={document:i=&gt;t==null?void 0:t.some(s=&gt;s.type==="document"&amp;&amp;s.id===i.id),group:i=&gt;t==null?void 0:t.some(s=&gt;s.type==="group"&amp;&amp;s.id===i.id)},o=new n7;await this.analyzeDocumentGroupRecursive(e.documentGroup,this.structureMap,o,n)}async analyzeDocumentGroupRecursive(e,t,n,o){n.addHierarchy();let i=e.id,s=await this.ctx.lnsClient.getDocumentGroupsContents(i,this.signal),a=s.documents,l=s.subfolders;o!==void 0&amp;&amp;(a=s.documents.filter(o.document),l=s.subfolders.filter(o.group)),n.addCount(a.length,l.length);for(let u of l)await this.analyzeDocumentGroupRecursive(u,t,n);t[o?"root":i]={name:o?"root":e.name,subfolders:l.map(u=&gt;u.id),documents:a.map(u=&gt;u.id)};for(let u of a)u.asset_proxy?this.docId2AssetId.set(u.id,[]):this.docId2AssetId.set(u.id,void 0);n.decreaseHierarchy()}async export(){var n;if(this.docId2AssetId.size&lt;1)return;let e=[...this.docId2AssetId.keys()].sort(),t=(n=this.lastIndex)!=null?n:0;Ee(t&lt;e.length,"invalid restart download index");for(let o=t;o&lt;e.length;o++){this.lastIndex=o,this.onProgress(o+1,e.length);let i=e[o],s=this.docId2AssetId.get(i);if(!s){let l=await this.ctx.lnsClient.downloadDocument(i,this.signal),u=await Is(l),d=Es({id:i,file:u,author:this.author});s=Dc([...d.memberAndChildrenIteratorOverGroup()].map(c=&gt;c.toJSON()))}let a=await this.ctx.lnsClient.exportDocument(e[o],s,this.signal);this.folder.file(`${e[o]}.loilocard`,a)}this.lastIndex=void 0}outputFolderName(e,t){let n=new Date,o=("0"+(n.getMonth()+1)).slice(-2),i=("0"+n.getDate()).slice(-2);return t!=null?`${t}_${e}_${n.getFullYear()}${o}${i}`:`${e}_${n.getFullYear()}${o}${i}`}};var Ype=()=&gt;{let r=Me(),e=(0,sm.useContext)(li),t=pe(),[n,o]=(0,sm.useState)(t.analyzingDocument),i=(0,sm.useMemo)(()=&gt;new AbortController,[]),s=(h,f)=&gt;{o(`${t.exportingDocument}
(${h}/${f})`)},a=(0,sm.useMemo)(()=&gt;new zR({ctx:ie,author:Nr(r,r.userInfo.user_id),schoolName:r.isSsoUser?void 0:r.userInfo.school_name,appVersion:r.appVersion,signal:i.signal,onProgress:s}),[]),l=h=&gt;{if(h.type==="error"){if(a.retryable){o(`${t.couldntExportDocument}`);return}u(h.error)}else h.type==="success"&amp;&amp;Ol(h.value.blob,La(h.value.name,".loilomaterials"));d()},u=h=&gt;{if(Je.catchError(h))return;fe.error(h);let f=t.couldntExportDocument;h instanceof $w&amp;&amp;(h.type==="items"?f=t.exceedNumberOfExportableItemsMsg:f=t.exceedNumberOfExportableHierarchyMsg);let m=67;r.reduce(we(m,null),me(m,{title:t.errorOccurred,message:f,okMessage:t.okay,onOk:()=&gt;r.reduce(me(m,void 0))}))};(0,sm.useEffect)(()=&gt;{Ee(e.history.length&gt;0,"history must be not empty"),Ee(e.selectedItems.length&gt;0,"selectedItems must be not empty");let h=e.history[e.history.length-1],f=e.selectedItems;a.do({curDir:h,selectedItems:f}).then(l).catch(u)},[]);let d=()=&gt;{e.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))},c=()=&gt;{a.do().then(l).catch(u)},p=()=&gt;{i.abort()};return im.default.createElement($m,null,im.default.createElement("div",{className:"uiDialogContent"},!a.retryable&amp;&amp;im.default.createElement(_t,null),im.default.createElement("div",{className:"uiDialogTitle"},t.export),im.default.createElement("div",{className:"uiDialogMessage materialExportDialogMessage"},n),im.default.createElement(la,null,im.default.createElement(Ui,{className:"uiDialogCancelButton",onClick:p},t.cancel),a.retryable&amp;&amp;im.default.createElement(Ui,{onClick:c},t.retry))))};var qv=oe(ve()),HR=oe(ve());var Xpe=oe(bS());async function Qpe({lnsClient:r,file:e,groupId:t,signal:n,onProgress:o}){var i;try{if(!e.name.endsWith(".loilomaterials"))throw new Error("invalid import file");let s=await Xpe.default.loadAsync(e),a=await((i=s.file("structure.json"))==null?void 0:i.async("string"));if(!a)throw new Error("structure.json not found");let l=JSON.parse(a);return await Jpe({lnsClient:r,importGroupId:t,exportGroupId:"root",structure:l,zip:s,signal:n,count:1,onProgress:o}),{type:"success",value:{}}}catch(s){return n.aborted?{type:"cancelled"}:{type:"error",error:s}}}async function Jpe({lnsClient:r,importGroupId:e,exportGroupId:t,structure:n,zip:o,signal:i,count:s,onProgress:a}){let l=s,u=n.folders[t];for(let d of u.subfolders){let c=n.folders[d],{id:p}=await r.createSubDocumentGroup(e,c.name,i);l=await Jpe({lnsClient:r,importGroupId:p,exportGroupId:d,structure:n,zip:o,signal:i,count:l,onProgress:a})}for(let d of u.documents){let c=o.file(`${d}.loilocard`);if(c){let p=await c.async("blob");await r.importDocument({groupId:e,file:p,signal:i}),a(l++,n.documents_count)}}return l}var Vw=oe(Wr());async function Zpe(r,{docIds:e,docGroupIds:t,destId:n,callback:o}){if(e.length&lt;1&amp;&amp;t.length&lt;1)throw new Error("selected documents do not exist");let i=he.get().strings;r.reduce(we(36,i.copyingDocument));try{let s=[];e.length&gt;0&amp;&amp;s.push(ie.lnsClient.copyDocuments(e,n)),t.length&gt;0&amp;&amp;s.push(ie.lnsClient.copyDocumentGroups(t,n)),await Promise.all(s).catch(Je.handleError),await o(),r.reduce(we(36,null))}catch(s){throw fe.error(s),r.reduce(we(36,null),me(36,{title:i.couldntCopyDocument,...ot(s,{400:i.invalidDocumentCopyDetails,403:i.documentCopyDenied}),okMessage:i.back,onOk:()=&gt;r.reduce(me(36,void 0))})),s}}async function ehe(r,{docIds:e,docGroupIds:t,destId:n,callback:o}){if(e.length&lt;1&amp;&amp;t.length&lt;1)throw new Error("selected documents do not exist");let i=he.get().strings;r.reduce(we(40,i.movingDocument));try{let s=[];e.length&gt;0&amp;&amp;s.push(ie.lnsClient.moveDocuments(e,n)),t.length&gt;0&amp;&amp;s.push(ie.lnsClient.moveDocumentGroups(t,n)),await Promise.all(s).catch(Je.handleError),await o(),r.reduce(we(40,null))}catch(s){throw fe.error(s),r.reduce(we(40,null),me(40,{title:i.couldntMoveDocument,...ot(s,{400:i.invalidDocumentMoveDetails,403:i.documentMoveDenied}),okMessage:i.back,onOk:()=&gt;r.reduce(me(40,void 0))})),s}}async function the(r,{docIds:e,docGroupIds:t,destinationDocGroupId:n}){Ee(e.length&gt;0||t.length&gt;0,"restored documents do not exist");let o=he.get().strings;r.reduce(we(41,o.restoringDocument));try{for(let i of e)await ie.lnsClient.restoreDocument({docId:i,restoreTo:n});for(let i of t)await ie.lnsClient.restoreDocumentGroup({docGroupId:i,restoreTo:n});r.reduce(we(41,null))}catch(i){if(Je.catchError(i))return;throw r.reduce(we(41,null),me(41,{title:o.couldntRestoreDocument,...ot(i,{400:o.invalidDocumentRestoreDetails,403:o.documentMoveDenied}),okMessage:o.back,onOk:()=&gt;r.reduce(me(41,void 0))})),i}}async function jw(r,{docGroupId:e,name:t,callback:n}){let o=he.get().strings,i=37;r.reduce(we(i,o.creatingFolder));try{let{id:s}=await ie.lnsClient.createSubDocumentGroup(e,t);await n({id:s,name:t}),r.reduce(we(i,null))}catch(s){if(Je.catchError(s))return;let a=ot(s,{400:l=&gt;{let u=l.asJson();return(u==null?void 0:u.result)===1?o.folderWithThisNameAlreadyExists:(u==null?void 0:u.result)===2?o.pleaseEnterFolderName:(u==null?void 0:u.result)===3?o.invalidFolderName:o.invalidRequest},403:o.folderCreationDenied,404:o.folderLocationNotFound});throw fe.error(s),r.reduce(we(i,null),me(i,{title:o.couldntCreateFolder,...a,okMessage:o.back,onOk:()=&gt;r.reduce(me(i,void 0))})),s}}async function rhe(r,{id:e,name:t,type:n}){let o=he.get().strings,i=n==="group"?o.folder:o.file;r.reduce(we(38,(0,Vw.sprintf)(o.renamingItem,i)));try{return n==="group"?await ie.lnsClient.renameDocumentGroup(e,t).catch(Je.handleError):await ie.lnsClient.renameDocument(e,t).catch(Je.handleError),r.reduce(we(38,null)),!0}catch(s){return fe.error(s),r.reduce(we(38,null),me(38,{title:(0,Vw.sprintf)(o.couldntRenameItem,i),...ot(s,{400:(0,Vw.sprintf)(o.itemNameInvalid,i),403:(0,Vw.sprintf)(o.itemRenameDenied,i),404:(0,Vw.sprintf)(o.itemNotFound,i)}),okMessage:o.back,onOk:()=&gt;r.reduce(me(38,void 0))})),!1}}async function nhe(r,e,t){let n=he.get().strings;r.reduce(we(39,n.deletingDocument));try{let o=[];t.length&gt;0&amp;&amp;o.push(ie.lnsClient.deleteDocumentGroups(t)),e.length&gt;0&amp;&amp;o.push(ie.lnsClient.deleteDocuments(e)),await Promise.all(o).catch(Je.handleError),r.reduce(we(39,null))}catch(o){fe.error(o),r.reduce(we(39,null),me(39,{title:n.couldntDeleteDocument,...ot(o,{400:n.fileOrFolderInvalid,403:n.fileOrFolderDeletionDenied}),okMessage:n.back,onOk:()=&gt;r.reduce(me(39,void 0))}))}}async function ohe({store:r,docGroupId:e,name:t}){let n=he.get().strings;Ee(r.uploadingDocument!=null,"uploadingDocument must be set");let{card:o}=r.uploadingDocument;r.reduce(O1(1),pg(void 0));let i=42;try{await Kp(r,o)}catch(l){r.reduce(O1(-1),me(i,{title:n.couldntUploadDocument,...ot(l),okMessage:n.okay,onOk(){r.reduce(me(i,void 0))}}));return}let s={id:r.userInfo.user_id,name:zt(r.userInfo)},a=await kne(o,s);try{await ie.lnsClient.uploadDocumentAsMaterial({...a,docGroupId:e,name:t}),r.reduce(O1(-1),Jt({type:"normal",text:n.didSaveToMaterialsStorage}))}catch(l){let u=ot(l,{400:n.invalidDocumentName,403:n.folderCreationDenied,404:n.folderNotFound});throw fe.error(l),r.reduce(O1(-1),me(42,{title:n.couldntSaveToMaterials,...u,okMessage:n.back,onOk:()=&gt;r.reduce(me(42,void 0))})),l}}var ihe=()=&gt;{let r=Me(),e=(0,HR.useContext)(li),t=pe(),[n,o]=$r({message:t.importDocument,ctrl:new AbortController}),i=(l,u)=&gt;{o({message:`${t.importDocument}
(${l}/${u})`})},s=l=&gt;{if(Je.catchError(l))return;fe.error(l);let u=68;r.reduce(we(u,null),me(u,{title:t.errorOccurred,message:t.couldntImportDocument,okMessage:t.okay,onOk:()=&gt;r.reduce(me(u,void 0))}))};(0,HR.useEffect)(()=&gt;{Ee(e.history.length&gt;0,"history must be not empty"),Ee(e.importingMaterial,"importing material must be not empty");let l=ba(t.folderForImportedItemsWillBeCreated,{defaultValue:ad(e.importingMaterial.name),maxLength:255});if(l===null){e.reduce(()=&gt;({importingMaterial:{$set:void 0}}));return}let u=e.history.length-1,d=e.history[u],c=async p=&gt;{Ee(e.importingMaterial,"importing material must be not empty"),Qpe({lnsClient:ie.lnsClient,file:e.importingMaterial,groupId:p.id,signal:n.ctrl.signal,onProgress:i}).then(h=&gt;{let f=[...d.contents.subfolders];f.push(p),e.reduce(()=&gt;({history:{[u]:{contents:{subfolders:{$set:f}}}}})),h.type==="error"&amp;&amp;s(h.error)}).finally(()=&gt;{e.reduce(()=&gt;({importingMaterial:{$set:void 0}}))})};jw(r,{docGroupId:d.documentGroup.id,name:l,callback:c}).catch(()=&gt;{e.reduce(()=&gt;({importingMaterial:{$set:void 0}}))})},[]);let a=()=&gt;{n.ctrl.abort()};return qv.default.createElement($m,null,qv.default.createElement("div",{className:"uiDialogContent"},qv.default.createElement(_t,null),qv.default.createElement("div",{className:"uiDialogTitle"},t.import),qv.default.createElement("div",{className:"uiDialogMessage materialExportDialogMessage"},n.message),qv.default.createElement(la,null,qv.default.createElement(Ui,{className:"uiDialogCancelButton",onClick:a},t.cancel))))};var so=oe(ve());var to=oe(ve());var ZP=oe(Wr());var ui=oe(ve());var o7=({document:r,onClick:e,selected:t,selectOpts:n,disabled:o,draggable:i,dateTimeFormat:s})=&gt;{let a=Ks(r.timestamp,s),l=d=&gt;{d.dataTransfer.setData("application/x-loilo-file-document",JSON.stringify(r)),d.dataTransfer.effectAllowed="copy"},{res:u}=ie;return ui.default.createElement(xr,{key:r.id,selectOpts:n,onClick:e,checked:t,disabled:o,draggable:i,onDragStart:l},ui.default.createElement(Ur,null,ui.default.createElement("div",{className:"materialBoxDialogThumbnail"},r.asset_proxy&amp;&amp;ui.default.createElement(fB,{src:u.assetThumbUrl({assetId:r.asset_proxy,index:0,size:"small"}),fallbackSrc:she(r.extension),alt:`thumbnail of document: '${r.name}'`}),!r.asset_proxy&amp;&amp;ui.default.createElement(Wl,{id:r.id,index:0,comment_snapshot_id:r.comment_snapshot_id,skipForKnown404Url:!0,fallbackSrc:she(r.extension)}))),ui.default.createElement(cP,null,ui.default.createElement($Le,{doc:r}),ui.default.createElement(WLe,{doc:r}),ui.default.createElement(th,null,a)))},dh=({onClick:r,disabled:e,selectOpts:t,title:n,showArrow:o,category:i,isTrashed:s,updatedAt:a})=&gt;{let l=pe(),u=s?i7(i):JP(i),d=a?Ks(a,l.fileUpdatedAtDateTimeFmt):void 0,c=s&amp;&amp;d;return ui.default.createElement(xr,{...{disabled:e,selectOpts:e?void 0:t,onClick:r,showArrow:o}},ui.default.createElement(Ur,null,ui.default.createElement(lr,{className:"materialBoxDialogFolderIcon",src:u,alt:"folder icon"})),!c&amp;&amp;ui.default.createElement(mn,null,ui.default.createElement(nr,{disablePopover:!0},n)),c&amp;&amp;ui.default.createElement(cP,null,ui.default.createElement(nr,{disablePopover:!0},n),ui.default.createElement(th,null,d)))};function JP(r){switch(r){case"private":return"/svg/materialbox/MaterialFolderPrivate.svg";case"school-class":return"/svg/materialbox/MaterialFolderClass.svg";case"school-teacher":return"/svg/materialbox/MaterialFolderTeacher.svg";case"school-all":return"/svg/materialbox/MaterialFolderSchool.svg";case"district-all":return"/svg/materialbox/MaterialFolderDistrict.svg";case"district-teacher":return"/svg/materialbox/MaterialFolderDistrictTeacher.svg";case"searched":return"/svg/materialbox/MaterialFolderPrivate.svg"}}function i7(r){switch(r){case"private":return"/svg/materialbox/TrashboxPrivate.svg";case"school-class":return"/svg/materialbox/TrashboxClass.svg";case"school-teacher":return"/svg/materialbox/TrashboxSchool.svg";case"school-all":return"/svg/materialbox/TrashboxSchool.svg";case"district-all":return"/svg/materialbox/TrashboxDistrict.svg";case"district-teacher":return"/svg/materialbox/TrashboxDistrict.svg";default:return""}}var she=r=&gt;Za(r)?ie.res.src("/svg/materialbox/MaterialAudioFile.svg"):ie.res.src("/svg/materialbox/MaterialFile.svg"),WLe=({doc:r})=&gt;{let e=r.name;return r.extension!==".lnfragment"&amp;&amp;(e+=r.extension.toLowerCase()),OG(r)?r.highlight_cards_text?ui.default.createElement(th,null,ui.default.createElement("span",null,e)):ui.default.createElement(aw,null,ui.default.createElement("span",null,e)):ui.default.createElement(aw,null," ",e," ")},$Le=({doc:r})=&gt;OG(r)&amp;&amp;r.highlight_cards_text?ui.default.createElement("div",{className:"searchHitsCards ellipsisText"},ui.default.createElement(AB,{highlight:r.highlight_cards_text[0]})):null;var WR=({askDestinationMessage:r,onClick:e})=&gt;{let t=Me(),{userInfo:n}=t,o=pe(),i,s=Xt(t);typeof s=="number"&amp;&amp;(i=t.courseAttributes.byId[s]);let a=r!==void 0,{district_name:l,district_root_document_group_id:u,district_teacher_document_group_id:d,is_teacher:c,school_document_group_id:p,teacher_document_group_id:h}=t.userInfo,f=!0,m=i!==void 0,g=u!==void 0&amp;&amp;l!==void 0,v=c&amp;&amp;d!==void 0&amp;&amp;l!==void 0;a&amp;&amp;(f=f&amp;&amp;c,m=m&amp;&amp;c,g=g&amp;&amp;c);let b=u!==void 0&amp;&amp;GR({userInfo:n,id:u,selectingMaterialDestination:a}),C=d!==void 0&amp;&amp;GR({userInfo:n,id:d,selectingMaterialDestination:a}),x=GR({userInfo:n,id:h,selectingMaterialDestination:a});return to.default.createElement(to.default.Fragment,null,r&amp;&amp;to.default.createElement("div",{className:"materialBoxDialogAskDestinationMessage"},r),to.default.createElement(gn,{title:" "},to.default.createElement(dh,{disabled:!1,title:o.myFolder,onClick:()=&gt;{e({id:"private",name:o.myFolder,category:"private"})},showArrow:!0,category:"private"})),(g||v)&amp;&amp;to.default.createElement(gn,{title:l},g&amp;&amp;to.default.createElement(dh,{title:(0,ZP.sprintf)(o.districtShared,l),disabled:!b,onClick:()=&gt;{e({id:u,name:(0,ZP.sprintf)(o.districtShared,l),category:"district-all"})},showArrow:b,category:"district-all"}),v&amp;&amp;to.default.createElement(dh,{title:o.teachersOnlyFolder,disabled:!C,onClick:()=&gt;e({id:d,name:o.teachersOnlyFolder,category:"district-teacher"}),showArrow:C,category:"district-teacher"})),f&amp;&amp;to.default.createElement(gn,{title:o.schoolWideFolder},to.default.createElement(dh,{title:o.schoolShared,disabled:!1,onClick:()=&gt;e({id:p,name:o.schoolShared,category:"school-all"}),showArrow:!0,category:"school-all"}),c&amp;&amp;to.default.createElement(dh,{title:o.teachersOnlyFolder,disabled:!x,onClick:()=&gt;e({id:h,name:o.teachersOnlyFolder,category:"school-teacher"}),showArrow:x,category:"school-teacher"})),m&amp;&amp;to.default.createElement(gn,{title:i==null?void 0:i.name},to.default.createElement(dh,{title:o.classShared,disabled:!1,onClick:()=&gt;e({id:i.document_groups.common_group_id,name:o.classShared,category:"school-class"}),showArrow:!0,category:"school-class"}),i.document_groups.class_group_ids.map(y=&gt;{let S=(0,ZP.sprintf)(o.classFolder,y.name);return to.default.createElement(dh,{disabled:!1,key:y.id,showArrow:!0,title:S,onClick:()=&gt;e({id:y.id,name:(0,ZP.sprintf)(o.classFolder,y.name),category:"school-class"}),category:"school-class"})})))},eA=({sortOrder:r,onChangeSortOrder:e,category:t,contents:n,onClickDocumentGroup:o,onClickDocument:i,selectingMaterialDestination:s,selectedFileId:a,disableSelectOpts:l=!1,disabledFolders:u=[],disableFileCell:d=!1})=&gt;{let c=Me(),p=(0,to.useContext)(li),h=pe(),{documents:f,subfolders:m}=n,g=l?void 0:(y,S)=&gt;{if(p.editMode==="copy"||p.editMode==="delete"||p.editMode==="move"||p.editMode==="export"||p.editMode==="restore"){let T=p.selectedItems.findIndex(w=&gt;w.id===y&amp;&amp;w.type===S);return{selected:T&gt;-1,selectionType:p.editMode==="delete"?"delete":"normal",onSelect:w=&gt;{w?p.reduce(()=&gt;({selectedItems:{$push:[{id:y,type:S}]}})):p.reduce(()=&gt;({selectedItems:{$splice:[[T,1]]}}))}}}},v=y=&gt;!p.showTrashBox&amp;&amp;!s&amp;&amp;(U0(y.extension)||_b(y.extension)&amp;&amp;!y.asset_proxy),b=f.length&lt;1&amp;&amp;m.length&lt;1,C=f.length&gt;1||m.length&gt;1,x=["name","updateDate","fileUpdateDateFolderName"];return!s&amp;&amp;p.showSearchedContents?to.default.createElement(gn,null,b&amp;&amp;to.default.createElement(js,null,h.noMatchesFound),m.map(y=&gt;{if(Nue(y)){let S=p.history.length-1,T=p.editMode!==void 0||S&lt;0||p.history[S].documentGroup.id!==y.id,w=T&amp;&amp;p.editMode===void 0,k=Bue(y.root_group_type);return to.default.createElement(dh,{key:y.id,showArrow:w,category:k,selectOpts:g&amp;&amp;g(y.id,"group"),onClick:()=&gt;o({id:y.id,name:y.name,category:k}),disabled:!T,title:y.name})}}),f.map(y=&gt;to.default.createElement(o7,{key:y.id,document:y,selectOpts:g&amp;&amp;g(y.id,"document"),selected:y.id===a,onClick:()=&gt;i(y),draggable:v(y),disabled:d,dateTimeFormat:h.fileUpdatedAtDateTimeFmt}))):to.default.createElement(gn,null,b&amp;&amp;to.default.createElement(js,null,h.thisIsAnEmptyFolder),!b&amp;&amp;to.default.createElement(lw,null,to.default.createElement(cw,null,to.default.createElement(VLe,null),to.default.createElement(No,null),to.default.createElement(jLe,{disabled:!C,sortKey:r.key,sortDirection:r.direction,sortKeys:x,titleForKey:KLe,onChange:(y,S)=&gt;e({key:y,direction:S})}))),m.sort(YLe(r)).map(y=&gt;{let S=GR({userInfo:c.userInfo,disabledFolders:u,id:y.id,selectingMaterialDestination:s,editMode:p.editMode}),T=S&amp;&amp;(p.editMode===void 0||s);return to.default.createElement(dh,{key:y.id,showArrow:T,category:t,selectOpts:g&amp;&amp;g(y.id,"group"),onClick:()=&gt;o({id:y.id,name:y.name,category:t}),disabled:!S,title:y.name,isTrashed:p.showTrashBox,updatedAt:y.updated_at})}),f.sort(XLe(r)).map(y=&gt;to.default.createElement(o7,{key:y.id,document:y,selectOpts:g&amp;&amp;g(y.id,"document"),selected:y.id===a,onClick:()=&gt;i(y),draggable:v(y),disabled:d,dateTimeFormat:h.fileUpdatedAtDateTimeFmt})))},VLe=()=&gt;{var a,l;let r=pe(),e=(0,to.useContext)(li),t=e.searchedContents||e.history[e.history.length-1].contents,n=(a=t==null?void 0:t.documents.length)!=null?a:0,o=(l=t==null?void 0:t.subfolders.length)!=null?l:0,i=e.selectedItems.length===n+o,s=()=&gt;{if(!!t)if(i)e.reduce(()=&gt;({selectedItems:{$set:[]}}));else{let u=t.subfolders.map(p=&gt;({id:p.id,type:"group"})),d=t.documents.map(p=&gt;({id:p.id,type:"document"})),c=[...u,...d];e.reduce(()=&gt;({selectedItems:{$set:c}}))}};return e.editMode!=="export"?null:to.default.createElement(Gt,{className:"primaryTextButton",onClick:s},i?r.releaseAll:r.selectAll)},jLe=lB();function KLe(r){let e=pe();switch(r){case"fileUpdateDateFolderName":return e.materialFileUpdateDateFolderNameOrder;case"name":return e.materialNameOrder;case"updateDate":return e.sortUpdateDateOrderForMaterialBox}}function GR(r){let{userInfo:e,disabledFolders:t,id:n,selectingMaterialDestination:o,editMode:i}=r;if(t!=null&amp;&amp;t.includes(n))return!1;let{district_document_group_write_permission:s,district_root_document_group_id:a,district_teacher_document_group_id:l,school_document_group_id:u,teacher_document_group_id:d,is_teacher:c}=e;return n===a?o?c&amp;&amp;s===!0:i===void 0:n===l?o?c&amp;&amp;s===!0:c&amp;&amp;i===void 0:n===u?o?c:i===void 0:n===d?o?c:c&amp;&amp;i===void 0:!0}function s7(r,e){let t=r.name.localeCompare(e.name);return t===0?r.id-e.id:t}function qLe(r,e){let t=new Date(r.timestamp).getTime()-new Date(e.timestamp).getTime();return t===0?s7(r,e):t}function ahe(r){return(e,t)=&gt;r(t,e)}function YLe(r){let{key:e,direction:t}=r,n;switch(e){case"name":case"fileUpdateDateFolderName":n=s7;break;case"updateDate":n=(o,i)=&gt;o.id-i.id;break}switch(t){case"ascending":return n;case"descending":return ahe(n)}}function XLe(r){let{key:e,direction:t}=r,n;switch(e){case"name":n=s7;break;case"updateDate":case"fileUpdateDateFolderName":n=qLe;break}switch(t){case"ascending":return n;case"descending":return ahe(n)}}var gr=oe(ve()),YR=oe(ve());var phe=oe(Wr());var ch=oe(ve());var Lo=oe(ve());var lhe=({selectingUploadDestination:r,sortOrder:e,onChangeSortOrder:t})=&gt;{var c,p;let n=Me(),o=pe(),i=(0,Lo.useContext)(li),s=async h=&gt;{i.editMode?i.editMode==="rename"&amp;&amp;typeof h.id=="number"&amp;&amp;await l(h.id,h.name,"group"):i.reduce(()=&gt;({history:{$push:[{documentGroup:h}]}}))},a=async h=&gt;{i.editMode?i.editMode==="rename"&amp;&amp;await l(h.id,h.name,"document"):i.reduce(()=&gt;({$merge:{document:h}}))},l=async(h,f,m)=&gt;{var x;let v=m==="group"?o.enterFolderName:o.enterFileName,b=ba(v,{defaultValue:f,maxLength:255});if(b===null||f===b||!await rhe(n,{id:h,name:b,type:m}))return;let C=tOe({history:i.history,id:h,nextName:b,type:m});C&amp;&amp;h===((x=i.document)==null?void 0:x.id)?i.reduce(()=&gt;({document:{name:{$set:b}},...C})):C&amp;&amp;i.reduce(()=&gt;C)},u=eOe(i.editMode),d=r?o.askWhichFolderToSaveItTo:void 0;if(i.showSearchedContents&amp;&amp;i.searchedContents)return Lo.default.createElement(ur,null,u&amp;&amp;Lo.default.createElement("div",{className:"drawerContentDesc"},u),Lo.default.createElement(eA,{sortOrder:e,onChangeSortOrder:t,contents:i.searchedContents,category:"searched",selectedFileId:(c=i.document)==null?void 0:c.id,onClickDocumentGroup:s,onClickDocument:a,disableFileCell:n.uploadingDocument!==void 0,selectingMaterialDestination:r}));{let h=i.history[i.history.length-1];return Lo.default.createElement(ur,null,u&amp;&amp;Lo.default.createElement("div",{className:"drawerContentDesc"},u),(h==null?void 0:h.error)&amp;&amp;Lo.default.createElement(js,null,o.couldntFetchData),Lo.default.createElement(Lo.default.Fragment,null,h===void 0&amp;&amp;Lo.default.createElement(WR,{askDestinationMessage:d,onClick:s}),(h==null?void 0:h.contents)&amp;&amp;Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(QLe,{category:h.documentGroup.category}),Lo.default.createElement(eA,{sortOrder:e,onChangeSortOrder:t,contents:h.contents,category:h.documentGroup.category,selectedFileId:(p=i.document)==null?void 0:p.id,onClickDocumentGroup:s,onClickDocument:a,disableFileCell:n.uploadingDocument!==void 0,selectingMaterialDestination:r}))))}},QLe=({category:r})=&gt;{let e=(0,Lo.useContext)(li);return Lo.default.createElement(Lo.default.Fragment,null,e.showTrashBox&amp;&amp;Lo.default.createElement(JLe,null),!e.showTrashBox&amp;&amp;Lo.default.createElement(ZLe,{category:r}))},JLe=()=&gt;{let r=pe();return Lo.default.createElement("div",{className:"materialBoxHeaderMessage"},Lo.default.createElement("div",{className:"materialBoxTrashBoxHeaderMessageText"},r.materialTrashBoxHeaderMessage))},ZLe=({category:r})=&gt;{let e=Me(),t=pe();return!e.userInfo.is_teacher||!(r==="district-all"||r==="school-all")?null:Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement("div",{className:"materialBoxHeaderMessage"},Lo.default.createElement("div",{className:"materialBoxHeaderMessageText",style:{backgroundColor:r==="district-all"?"#96E5A077":"#FFD54F77"}},t.materialBoxAccessibleMessageForTeacher)))};function eOe(r){let e=pe();return r==="copy"?e.selectItemsToCopy:r==="delete"?e.selectItemsToErase:r==="move"?e.selectItemsToMove:r==="rename"?e.selectItemToRename:r=="export"?e.selectItemsToExport:r=="restore"?e.selectItemsToRestore:""}function tOe({history:r,id:e,nextName:t,type:n}){let o=r.length-1,i=r[o];if(!!i.contents)if(n==="document"){let s=i.contents.documents.findIndex(a=&gt;a.id===e);if(s&gt;=0)return{history:{[o]:{contents:{documents:{[s]:{name:{$set:t}}}}}}}}else{let s=i.contents.subfolders.findIndex(a=&gt;a.id===e);if(s&gt;=0)return{history:{[o]:{contents:{subfolders:{[s]:{name:{$set:t}}}}}}}}}var VR=oe(ve());var Yv=oe(ve());var a7=mg(),$R="",uhe=()=&gt;{let r=(0,VR.useContext)(li),e=ie.materialDocumentSearchClient;jn(()=&gt;{e.connect()}),(0,VR.useEffect)(()=&gt;{e.updater(u=&gt;{u.request_id===$R&amp;&amp;r.reduce(()=&gt;({loading:{$set:!1},showSearchedContents:{$set:!0},searchedContents:{$set:u},searchedHistoryLength:{$set:r.history.length}}))})},[r.history.length]);let t=u=&gt;($R=Sr(),{text_query:u,request_id:$R});nd(()=&gt;{e.close()});let n=u=&gt;{u?(r.reduce(()=&gt;({loading:{$set:!0}})),u===r.searchQuery?a7.set(()=&gt;{e.send(t(u))},1e3):(r.reduce(()=&gt;({searchQuery:{$set:u}})),a7.set(()=&gt;{e.send(t(u))},250))):(r.reduce(()=&gt;({loading:{$set:!1}})),$R="",a7.clear(),r.reduce(()=&gt;({showSearchedContents:{$set:!1},searchQuery:{$set:""},searchedContents:{$set:void 0},searchedHistoryLength:{$set:void 0}})))},o=u=&gt;{u.preventDefault(),n(r.searchQuery)},i=u=&gt;{u.key=="Enter"&amp;&amp;o(u)},s=u=&gt;{let d=u.target.value;n(d)},a=()=&gt;{n(r.searchQuery)},l=pe();return Yv.default.createElement("form",{onSubmit:o},Yv.default.createElement("div",{className:"searchBoxContainer materialBoxSearchContainer"},Yv.default.createElement("div",{className:"searchBoxWrapper"},Yv.default.createElement("input",{type:"text",id:"materialDocumentSearch",className:"searchBox",value:r.searchQuery,placeholder:l.searchMaterial,onChange:s,onKeyDown:i,onFocus:a,autoComplete:"off"})),Yv.default.createElement("button",{type:"button",className:"searchBoxButton",onClick:o},Yv.default.createElement("div",{className:"searchIconWrapper"},Yv.default.createElement(lr,{className:"searchIcon",src:"/img/SearchIcon.png",alt:"search icon"})))))};async function jR(r){let e=[],t=[],n,o;do{let i=await ie.lnsClient.getTrashDocumentGroups({rootGroupId:r,documentGroupsPageCursorId:n});e=[...e,...i.groups],n=i.next_page_key}while(n);do{let i=await ie.lnsClient.getTrashDocuments({rootGroupId:r,documentsPageCursorId:o}),s=i.documents.map(a=&gt;rOe(a));t=[...t,...s],o=i.next_page_key}while(o);return{subfolders:e,documents:t}}function rOe(r){let{id:e,name:t,extension:n,author_id:o,timestamp:i,asset_proxy:s}=r;return{id:e,name:t,extension:n!=null?n:"",author_id:o,timestamp:i,asset_proxy:s}}var KR=r=&gt;{let e=r.history,t=r.history.length-1;return t&lt;0?!1:!!e[t].isTrashBox},qR=({onBack:r,selectingUploadDestination:e,sortOrder:t,onChangeSortOrder:n})=&gt;{let o=Me(),i=(0,ch.useContext)(li);return(0,ch.useEffect)(()=&gt;{let a=i.history.length-1;if(a&lt;0)return;let l=i.history[a],u=l.documentGroup.id;l.contents||(async()=&gt;{try{let d=i.history[0],p=KR(i)?await jR(d.documentGroup.id):await ie.lnsClient.getDocumentGroupsContents(u);i.reduce(dhe({id:u,contents:p}))}catch(d){if(Je.catchError(d))return;d instanceof Error&amp;&amp;i.reduce(dhe({id:u,error:d}))}finally{i.reduce(()=&gt;({loading:{$set:!1}}))}})()},[i.history.length]),ch.default.createElement(ch.default.Fragment,null,ch.default.createElement(che,{handleBack:()=&gt;{if(i.showSearchedContents)i.reduce(()=&gt;({searchQuery:{$set:""},showSearchedContents:{$set:!1},searchedContents:{$set:void 0},searchedHistoryLength:{$set:void 0}}));else if(i.history.length&gt;i.minHistoryLength){let a=i.history.length-1;a===i.searchedHistoryLength&amp;&amp;i.reduce(()=&gt;({showSearchedContents:{$set:!0}})),i.reduce(()=&gt;({history:{$splice:[[a,1]]}}))}else r()},selectingMaterialDestination:e}),o.userPreference.experimentalFeatures.enableSearch&amp;&amp;i.editMode===void 0&amp;&amp;!i.showTrashBox&amp;&amp;!e&amp;&amp;ch.default.createElement(uhe,null),ch.default.createElement(lhe,{selectingUploadDestination:e,sortOrder:t,onChangeSortOrder:n}))};function dhe({id:r,contents:e,error:t}){return n=&gt;{let o=n.history.map(s=&gt;s.documentGroup.id).lastIndexOf(r);if(o&lt;0)return{};let i={};return e&amp;&amp;(i.contents=e),t&amp;&amp;(i.error=t),{history:{[o]:{$merge:i}},showSearchedContents:{$set:!1}}}}var che=({handleBack:r,selectingMaterialDestination:e})=&gt;{let t=(0,YR.useContext)(li),n=Me(),o=pe(),{title:i,category:s,categoryDescription:a}=l7(n,t.history),l=async()=&gt;{let p=t.selectedItems.length,h=p&gt;1?o.confirmMultiFileDelete:o.confirmSingleFileDelete;if(!confirm((0,phe.sprintf)(h,p)))return;let{docIds:f,docGroupIds:m}=XR(t);try{await nhe(n,f,m);let g=t.history[t.history.length-1].contents,v=f0(g.subfolders,C=&gt;m.indexOf(C.id)&gt;-1),b=f0(g.documents,C=&gt;f.indexOf(C.id)&gt;-1);t.reduce(()=&gt;({document:{$set:void 0},selectedItems:{$set:[]},history:{[t.history.length-1]:{contents:{subfolders:{$set:v},documents:{$set:b}}}}}))}catch(g){}},u=()=&gt;{t.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[]}}))},d=t.history[t.history.length-1],c=(()=&gt;t.showTrashBox?KR(t):t.showSearchedContents||t.history.length&gt;0)();return gr.default.createElement(Et,null,gr.default.createElement(Ft,null,gr.default.createElement(Mt,null,t.showSearchedContents&amp;&amp;gr.default.createElement(gt,{onClick:r},o.endSearch),!t.showSearchedContents&amp;&amp;!t.editMode&amp;&amp;gr.default.createElement(gt,{onClick:r},o.back),!t.showSearchedContents&amp;&amp;t.editMode&amp;&amp;gr.default.createElement(gt,{onClick:u},o.cancel)),gr.default.createElement(Vt,null,gr.default.createElement("div",{className:"materialBoxDialogHeader"},t.showSearchedContents&amp;&amp;gr.default.createElement("div",{className:"materialBoxDialogHeaderTitle"},gr.default.createElement(nr,{className:"materialBoxDialogHeaderTitleText"},o.searchResult)),!t.showSearchedContents&amp;&amp;gr.default.createElement(gr.default.Fragment,null,!t.showTrashBox&amp;&amp;a&amp;&amp;gr.default.createElement(nr,{className:"materialBoxDialogHeaderCategory"},a),!t.showTrashBox&amp;&amp;gr.default.createElement("div",{className:"materialBoxDialogHeaderTitle"},s&amp;&amp;gr.default.createElement(lr,{className:"materialBoxDialogHeaderTitleIcon",src:JP(s),alt:"folder icon"}),gr.default.createElement(nr,{className:"materialBoxDialogHeaderTitleText"},i)),t.showTrashBox&amp;&amp;gr.default.createElement(nOe,null)))),gr.default.createElement(jt,null,c&amp;&amp;gr.default.createElement("div",{className:"relative"},e&amp;&amp;gr.default.createElement(gt,{onClick:hhe(n,t)},o.createFolder),!e&amp;&amp;!t.editMode&amp;&amp;gr.default.createElement(ev,{onClick:()=&gt;t.reduce(()=&gt;({popoverOpen:{$set:!0}}))}),!e&amp;&amp;t.editMode==="delete"&amp;&amp;gr.default.createElement(gt,{disabled:t.selectedItems.length===0,onClick:l},o.delete),!e&amp;&amp;t.editMode==="move"&amp;&amp;gr.default.createElement(gt,{disabled:t.selectedItems.length===0,onClick:()=&gt;t.reduce(()=&gt;({modalMode:{$set:"select"}}))},o.move),!e&amp;&amp;t.editMode==="copy"&amp;&amp;gr.default.createElement(gt,{disabled:t.selectedItems.length===0,onClick:()=&gt;t.reduce(()=&gt;({modalMode:{$set:"select"}}))},o.copy),!e&amp;&amp;t.editMode==="export"&amp;&amp;gr.default.createElement(gt,{disabled:t.selectedItems.length===0,onClick:()=&gt;t.reduce(()=&gt;({modalMode:{$set:"export"}}))},o.export),!e&amp;&amp;t.editMode==="restore"&amp;&amp;gr.default.createElement(gt,{disabled:t.selectedItems.length===0,onClick:()=&gt;t.reduce(()=&gt;({modalMode:{$set:"select"}}))},o.restore),!e&amp;&amp;gr.default.createElement(xt,{open:t.popoverOpen,onClose:()=&gt;t.reduce(()=&gt;({popoverOpen:{$set:!1}}))},gr.default.createElement(oOe,{category:s}))))),(d&amp;&amp;!d.contents&amp;&amp;!d.error||t.loading)&amp;&amp;gr.default.createElement(_t,{absolute:"bottom"}))},nOe=()=&gt;{let r=(0,YR.useContext)(li),{title:e,category:t,categoryDescription:n}=iOe(r.history,KR(r));return gr.default.createElement(gr.default.Fragment,null,n&amp;&amp;gr.default.createElement(Ml,{enablePopover:!0},n),gr.default.createElement("div",{className:"materialBoxDialogHeaderTitle"},t&amp;&amp;gr.default.createElement(lr,{className:"materialBoxDialogHeaderTitleIcon",src:i7(t),alt:"folder icon"}),gr.default.createElement(nr,{className:"materialBoxDialogHeaderTitleText"},e)))},oOe=({category:r})=&gt;{var c,p;let e=Me(),t=(0,YR.useContext)(li),n=h=&gt;()=&gt;{t.reduce(()=&gt;({$merge:{editMode:h,popoverOpen:!1}}))},o=r!=null&amp;&amp;!t.showSearchedContents&amp;&amp;OR({category:r,userInfo:e.userInfo}),s=!(t.searchedContents||t.history[t.history.length-1].contents),a=pe(),l=()=&gt;{let h=document.createElement("input");h.type="file",h.multiple=!0,h.onchange=()=&gt;{let f=h.files;if(!(!f||f.length===0)){for(let m of f){let g=LR(m.name),v;if(!!g){g==="no-ext"?v=a.filesNoExtCannotBeUploaded:v=a.fileWithInvalidNameContained,e.reduce(me(42,{title:a.couldntUploadDocument,message:v,okMessage:a.close,onOk:()=&gt;e.reduce(me(42,void 0))})),t.reduce(()=&gt;({popoverOpen:{$set:!1}}));return}}t.reduce(()=&gt;({popoverOpen:{$set:!1},uploadingFiles:{$set:Array.from(f)}}))}},h.click()},u=t.history[t.history.length-1],d=()=&gt;{t.reduce(()=&gt;({loading:{$set:!0},document:{$set:void 0},popoverOpen:{$set:!1},history:{$push:[{documentGroup:u.documentGroup,isTrashBox:!0}]}}))};return t.showTrashBox&amp;&amp;!t.loading?gr.default.createElement(gr.default.Fragment,null,gr.default.createElement(ph,{onClick:n("restore"),disabled:((c=u.contents)==null?void 0:c.documents.length)===0&amp;&amp;((p=u.contents)==null?void 0:p.subfolders.length)===0},a.restore)):gr.default.createElement(gr.default.Fragment,null,o&amp;&amp;gr.default.createElement(ph,{onClick:l,disabled:s},a.upload),o&amp;&amp;gr.default.createElement(ph,{onClick:hhe(e,t),disabled:s},a.createFolder),o&amp;&amp;gr.default.createElement(ph,{onClick:n("rename"),disabled:s},a.rename),o&amp;&amp;gr.default.createElement(ph,{onClick:n("move"),disabled:s},a.move),gr.default.createElement(ph,{onClick:n("copy"),disabled:s},a.copy),o&amp;&amp;gr.default.createElement(ph,{onClick:n("delete"),disabled:s},a.delete),o&amp;&amp;gr.default.createElement(ph,{onClick:d,disabled:s},a.trashBox),r==="private"&amp;&amp;!t.showSearchedContents&amp;&amp;gr.default.createElement(gr.default.Fragment,null,gr.default.createElement(ph,{onClick:sOe(t),disabled:s},a.import),gr.default.createElement(ph,{onClick:n("export"),disabled:s},a.export)))},ph=({onClick:r,disabled:e,children:t})=&gt;gr.default.createElement("div",{className:"uiPopoverItem","aria-disabled":e,role:"button",onClick:()=&gt;{e||r()}},t),l7=(r,e)=&gt;{let t=he.get().strings;if(e.length===0)return{title:t.materialsStorage};let n=e[e.length-1],o=Xt(r),i=ls(r,o),s=n.documentGroup.name,a=n.documentGroup.category,l;return a==="school-class"?l=i:a==="school-all"||a==="school-teacher"?l=t.schoolWideFolder:(a==="district-all"||a==="district-teacher")&amp;&amp;(l=r.userInfo.district_name),{title:s,category:a,categoryDescription:l}},iOe=(r,e)=&gt;{let t=he.get().strings,n=r[0],o=r[r.length-1],i=o.documentGroup.name,s=o.documentGroup.category;return e?{title:t.trashBox,category:s,categoryDescription:n.documentGroup.name}:{title:i,category:s,categoryDescription:n.documentGroup.name+" - "+t.trashBox}},hhe=(r,e)=&gt;()=&gt;{let t=he.get().strings,n=ba(t.pleaseEnterFolderName,{maxLength:255});if(n===null)return;let o=e.history.length-1,i=e.history[o].documentGroup.id;jw(r,{docGroupId:i,name:n,callback:async a=&gt;{let l=[...e.history[o].contents.subfolders];l.push(a),e.reduce(()=&gt;({popoverOpen:{$set:!1},history:{[o]:{contents:{subfolders:{$set:l}}}}}))}}).catch(()=&gt;{})},sOe=r=&gt;()=&gt;{let e=document.createElement("input");e.type="file",e.accept=".loilomaterials",e.multiple=!1,e.onchange=()=&gt;{if(!e.files||e.files.length&lt;1)return;let t=e.files[0];r.reduce(()=&gt;({popoverOpen:{$set:!1},importingMaterial:{$set:t}}))},e.click()};var fhe=()=&gt;{let r=(0,so.useContext)(li),e=Me(),t=pe(),n=uS({history:[]}),{history:o}=n,{docIds:i,docGroupIds:s}=XR(r),[a,l]=(0,so.useState)(e.userPreference.materialBoxSortOrder);(0,so.useEffect)(()=&gt;{e.reduce(Wi({materialBoxSortOrder:{$set:a}}))},[a]);let u=(0,so.useMemo)(()=&gt;aOe({isTeacher:e.userInfo.is_teacher,editMode:r.editMode,srcHistory:r.history,strings:t}),[]);jn(()=&gt;(n.reduce(()=&gt;({history:{$set:u}})),()=&gt;{n.reduce(()=&gt;({history:{$set:[]}}))}));let d=B=&gt;z=&gt;{let N=o.findIndex(V=&gt;V.documentGroup.id===B);N&lt;0||n.reduce(()=&gt;({history:{[N]:{contents:{$set:z}}}}))};(0,so.useEffect)(()=&gt;{let B=o.length-1,z=o[o.length-1];if(!z||z.contents)return;let N=z.documentGroup.id;ie.lnsClient.getDocumentGroupsContents(N).then(d(N)).catch(Je.handleError).catch(V=&gt;{n.reduce(()=&gt;({history:{[B]:{error:{$set:V}}}}))})},[o.length]);let c=()=&gt;{r.reduce(()=&gt;({modalMode:{$set:void 0}}))},p=()=&gt;{n.reduce(()=&gt;({history:{$splice:[[-1,1]]}}))},h=B=&gt;{n.reduce(()=&gt;({history:{$push:[{documentGroup:B}]}}))},f=B=&gt;{let z=B[B.length-1];if(!z)throw new Error("destination folder is invalid");return z.documentGroup.id},m=B=&gt;{let z=B.findIndex(re=&gt;{var ce,ge;if(i.length&gt;0)return(ce=re.contents)==null?void 0:ce.documents.some(ae=&gt;ae.id===i[0]);if(s.length&gt;0)return(ge=re.contents)==null?void 0:ge.subfolders.some(ae=&gt;ae.id===s[0])}),N=B[z];if(!N)throw new Error("selected items are invalid");let V=N.documentGroup.id;return{srcIndex:z,srcId:V}},g=async()=&gt;{let B=f(o),z=async()=&gt;{let N=r.history.findIndex(re=&gt;re.documentGroup.id===B);if(N&lt;0){r.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}));return}let V=await ie.lnsClient.getDocumentGroupsContents(B);r.reduce(()=&gt;({history:{[N]:{contents:{$set:V}}},editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))};try{await Zpe(e,{docIds:i,docGroupIds:s,destId:B,callback:z})}catch(N){r.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))}},v=async()=&gt;{let B=f(o),{srcIndex:z,srcId:N}=m(r.history);if(B===N){r.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}));return}let V=async()=&gt;{let re=await ie.lnsClient.getDocumentGroupsContents(N),ce={[z]:{contents:{$set:re}}},ge=r.history.findIndex(ae=&gt;ae.documentGroup.id===B);if(ge&gt;-1){let ae=await ie.lnsClient.getDocumentGroupsContents(B);ce={...ce,[ge]:{contents:{$set:ae}}}}r.reduce(()=&gt;({history:ce,editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))};try{await ehe(e,{docIds:i,docGroupIds:s,destId:B,callback:V})}catch(re){r.reduce(()=&gt;({$merge:{editMode:void 0,selectedItems:[],modalMode:void 0}}))}},b=async()=&gt;{let B=f(o),{srcIndex:z}=m(r.history),N=async()=&gt;{Ee(r.history.length&gt;0);let V=r.history[0],re=await jR(V.documentGroup.id),ce={[z]:{contents:{$set:re}}},ge=r.history.findIndex(ae=&gt;ae.documentGroup.id===B);if(ge&gt;-1){let ae=await ie.lnsClient.getDocumentGroupsContents(B);ce={...ce,[ge]:{contents:{$set:ae}}}}r.reduce(()=&gt;({document:{$set:void 0},history:ce,editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))};try{await the(e,{docIds:i,docGroupIds:s,destinationDocGroupId:B}),await N()}catch(V){fe.error(V),r.reduce(()=&gt;({document:{$set:void 0},editMode:{$set:void 0},selectedItems:{$set:[]},modalMode:{$set:void 0}}))}},C=async()=&gt;{},x="";r.editMode==="copy"?(x=t.copyToThisFolder,C=g):r.editMode==="move"?(x=t.moveToThisFolder,C=v):r.editMode==="restore"&amp;&amp;(x=t.restoreToThisFolder,C=b);let y=(B,z,N)=&gt;{let V=B.findIndex(ce=&gt;ce.documentGroup.id===z);return V&lt;0?void 0:{subfolders:[...B[V].contents.subfolders,N],index:V}},S=()=&gt;{let B=ba(t.pleaseEnterFolderName,{maxLength:255});if(B===null)return;let z=o[o.length-1].documentGroup.id;jw(e,{docGroupId:z,name:B,callback:async V=&gt;{let re=y(r.history,z,V);re&amp;&amp;r.reduce(()=&gt;({history:{[re.index]:{contents:{subfolders:{$set:re.subfolders}}}}}));let ce=y(o,z,V);ce&amp;&amp;n.reduce(()=&gt;({history:{[ce.index]:{contents:{subfolders:{$set:ce.subfolders}}}}}))}})};if(r.editMode!=="copy"&amp;&amp;r.editMode!=="move"&amp;&amp;r.editMode!=="restore")return null;let T;switch(r.editMode){case"copy":T=t.askWhichFolderToCopyItTo;break;case"move":T=t.askWhichFolderToMoveItTo;break;case"restore":T=t.askWhichFolderToRestoreItTo;break}let w;o.length&gt;0&amp;&amp;(w=o[o.length-1]);let k=o.length===0,A=u.length,I=o.length===A,E=!k&amp;&amp;w!==void 0,O=r.editMode==="move"&amp;&amp;r.history.length&gt;0&amp;&amp;o.length&gt;0&amp;&amp;f(o)===m(r.history).srcId,{title:Q,category:j,categoryDescription:U}=l7(e,o);return so.default.createElement(rr,{round:!e.screen.isMobile},so.default.createElement(Et,null,so.default.createElement(Ft,null,so.default.createElement(Mt,null,I&amp;&amp;so.default.createElement(gt,{onClick:c},t.cancel),!I&amp;&amp;so.default.createElement(gt,{onClick:p},t.back)),so.default.createElement(Vt,null,so.default.createElement("div",{className:"materialBoxDialogHeader"},U&amp;&amp;so.default.createElement("div",{className:"materialBoxDialogHeaderCategory"},U),so.default.createElement("div",{className:"materialBoxDialogHeaderTitle"},j&amp;&amp;so.default.createElement(lr,{className:"materialBoxDialogHeaderTitleIcon",src:JP(j),alt:"folder icon"}),so.default.createElement(nr,{className:"materialBoxDialogHeaderTitleText"},Q)))),so.default.createElement(jt,null,o.length&gt;0&amp;&amp;so.default.createElement(gt,{onClick:S},t.createFolder))),w&amp;&amp;!w.contents&amp;&amp;!w.error&amp;&amp;so.default.createElement(_t,{absolute:"bottom"})),so.default.createElement(ur,null,k&amp;&amp;so.default.createElement(WR,{askDestinationMessage:T,onClick:h}),!k&amp;&amp;w&amp;&amp;w.contents&amp;&amp;so.default.createElement(eA,{sortOrder:a,onChangeSortOrder:l,category:w.documentGroup.category,contents:w.contents,onClickDocumentGroup:h,onClickDocument:()=&gt;{},disableSelectOpts:!0,disabledFolders:s,disableFileCell:!0,selectingMaterialDestination:!0}),(w==null?void 0:w.error)&amp;&amp;so.default.createElement(js,null,t.couldntFetchData)),E&amp;&amp;so.default.createElement(Gt,{className:"materialDialogSaveButton",onClick:C,disabled:O},so.default.createElement("div",{className:"materialDialogSaveButtonInner"},x)))};function aOe(r){let{isTeacher:e,editMode:t,srcHistory:n,strings:o}=r;if(e){if(t!=="move"&amp;&amp;t!=="restore")return[];let i=n[0].documentGroup;return i.category!=="private"?[{documentGroup:i}]:[]}else return[{documentGroup:{id:"private",name:o.myFolder,category:"private"}}]}var li=qo.default.createContext(N0({history:[],minHistoryLength:0,modalMode:void 0,popoverOpen:!1,selectedItems:[],uploadingFiles:[],loading:!1,showTrashBox:!1,showSearchedContents:!1,searchQuery:""})),ghe=({onBack:r})=&gt;{let e=Me(),t=uS({history:[],minHistoryLength:0,modalMode:void 0,popoverOpen:!1,selectedItems:[],uploadingFiles:[],loading:!1,showTrashBox:!1,showSearchedContents:!1,searchQuery:""}),[n,o]=(0,qo.useState)(e.userPreference.materialBoxSortOrder);return(0,qo.useEffect)(()=&gt;{e.reduce(Wi({materialBoxSortOrder:{$set:n}}))},[n]),(0,qo.useEffect)(()=&gt;{let i=s=&gt;s.some(a=&gt;a.isTrashBox);t.reduce(()=&gt;({showTrashBox:{$set:i(t.history)}}))},[t.history.length]),qo.default.createElement(li.Provider,{value:t},qo.default.createElement(lOe,null,qo.default.createElement(rr,null,qo.default.createElement(qR,{sortOrder:n,onChangeSortOrder:o,onBack:r,selectingUploadDestination:!1}))),t.document&amp;&amp;qo.default.createElement(UR,{document:t.document,store:e,fromTrashBox:t.showTrashBox,onClose:()=&gt;t.reduce(()=&gt;({$unset:["document"]}))}),qo.default.createElement(eo,{open:t.modalMode==="select",transition:"up",onClose:()=&gt;t.reduce(()=&gt;({popoverOpen:{$set:!1}}))},qo.default.createElement(fhe,null)),qo.default.createElement(tr,{open:t.modalMode==="export",transition:"fade",onClose:()=&gt;t.reduce(()=&gt;({popoverOpen:{$set:!1}}))},qo.default.createElement(Ype,null)),qo.default.createElement(tr,{open:t.importingMaterial!==void 0,transition:"fade",onClose:()=&gt;t.reduce(()=&gt;({popoverOpen:{$set:!1}}))},qo.default.createElement(ihe,null)),qo.default.createElement(uOe,null))},lOe=({children:r})=&gt;{let e=qo.default.useContext(li),t=Me(),n=pe(),o=e.history[e.history.length-1],i=u=&gt;{u.stopPropagation()},s=o!==void 0&amp;&amp;e.editMode===void 0&amp;&amp;!e.showTrashBox&amp;&amp;!e.showSearchedContents&amp;&amp;OR({category:o.documentGroup.category,userInfo:t.userInfo});return qo.default.createElement("div",{className:"materialBox relative",onDragOver:u=&gt;{!u.dataTransfer.types.includes("Files")||(u.preventDefault(),u.stopPropagation(),u.dataTransfer.dropEffect="copy")},onDrop:u=&gt;{if(!!u.dataTransfer.types.includes("Files")){if(!s){t.reduce(me(42,{title:n.couldntUploadDocument,message:n.insufficientPermissionToDocumentGroup,okMessage:n.okay,onOk:()=&gt;t.reduce(me(42,void 0))}));return}u.preventDefault(),u.stopPropagation();try{let d=PK(u.dataTransfer.items,c=&gt;{var f,m;let p=c.getAsFile();if(!p)return;if((m=(f=c.webkitGetAsEntry)==null?void 0:f.call(c))!=null&amp;&amp;m.isDirectory)throw new co(n.folderCannotBeUploaded);let h=LR(p.name);if(h==="no-ext")throw new co(n.filesNoExtCannotBeUploaded);if(h==="bad-chars")throw new co(n.fileWithInvalidNameContained);return p});e.reduce(()=&gt;({uploadingFiles:{$set:d}}))}catch(d){let c=42;t.reduce(me(c,{title:n.couldntUploadDocument,...ot(d),okMessage:n.okay,onOk:()=&gt;t.reduce(me(c,void 0))}))}}},onClick:i},r)},uOe=()=&gt;{let r=qo.default.useContext(li),e=Me(),t=pe(),n=r.history[r.history.length-1],o=qo.default.useRef(new AbortController),[i,s]=(0,qo.useState)(0);(0,qo.useEffect)(()=&gt;{if(r.uploadingFiles.length===0)return;o.current=new AbortController;let c=42;Kpe({groupId:n.documentGroup.id,files:r.uploadingFiles,signal:o.current.signal,onProgress:p=&gt;{s(p)},onUpload:({id:p,name:h,asset:f})=&gt;{let m={id:p,name:ad(h),asset_proxy:f,author_id:e.userInfo.user_id,timestamp:new Date().toISOString(),extension:pa(h)};r.reduce(()=&gt;({history:{[r.history.length-1]:{contents:{documents:{$splice:[[-1,0,m]]}}}}}))}}).then(p=&gt;{if(p.type==="error"){let h=p.error;if(Je.catchError(h))return;e.reduce(me(c,{title:t.couldntUploadDocument,...ot(h),okMessage:t.close,onOk:()=&gt;e.reduce(me(c,void 0))}))}r.reduce(()=&gt;({uploadingFiles:{$set:[]}}))})},[r.uploadingFiles]);let a=r.uploadingFiles.length;if(a===0)return null;let l=he.get().pluralSafeSuffix(a),u=`${(0,mhe.sprintf)(t.uploadingXXX,t.file+l)}(${i}/${a})`;return qo.default.createElement(Cw,{title:u,cancelMessage:t.cancel,onCancel:()=&gt;o.current.abort()})},XR=r=&gt;{let e=r.selectedItems.filter(n=&gt;n.type==="document").map(n=&gt;n.id),t=r.selectedItems.filter(n=&gt;n.type==="group").map(n=&gt;n.id);return{docIds:e,docGroupIds:t}};var hh=oe(ve());var vhe=({onBack:r})=&gt;{let e=Me(),t=pe(),n=uS({history:e.userInfo.is_teacher?[]:[{documentGroup:{id:"private",name:t.myFolder,category:"private"}}],minHistoryLength:e.userInfo.is_teacher?0:1,popoverOpen:!1,modalMode:void 0,selectedItems:[],uploadingFiles:[],loading:!1,showTrashBox:!1,showSearchedContents:!1,searchQuery:""}),[o,i]=(0,hh.useState)(e.userPreference.materialBoxSortOrder);(0,hh.useEffect)(()=&gt;{e.reduce(Wi({materialBoxSortOrder:{$set:o}}))},[o]);let s=async d=&gt;{let{card:c}=e.uploadingDocument,p=ba(t.enterDocumentName,{defaultValue:dOe(c),maxLength:255});p!==null&amp;&amp;(ohe({store:e,name:p,docGroupId:d}),r())},a=()=&gt;{let d=n.history.length-1,c=n.history[d];s(c.documentGroup.id)},l=n.history.length===0,u=!e.screen.isMobile;return hh.default.createElement(li.Provider,{value:n},hh.default.createElement(rr,{round:u},hh.default.createElement(qR,{onBack:r,selectingUploadDestination:!0,sortOrder:o,onChangeSortOrder:i}),!l&amp;&amp;hh.default.createElement(Gt,{className:"materialDialogSaveButton",onClick:a},hh.default.createElement("div",{className:"materialDialogSaveButtonInner"},t.saveToThisFolder))))},dOe=r=&gt;{let e=he.get().strings,t=r.headGroup(),n=Lx(t);return t instanceof ga?n||e.photoDefaultFileName:t instanceof Rk?e.drawingDefaultFileName:t instanceof zn?n||e.videoDefaultFileName:t instanceof Vo?n||e.webDefaultFileName:t instanceof md?e.mapDefaultFileName:t instanceof Of?n||e.textDefaultFileName:t instanceof Yi?n||e.pdfDefaultFileName:t instanceof Qn?n||e.audioDefaultFileName:t instanceof jr?n||(t.content.preset==="test"?e.quizPresetTest:e.quizPresetSurvey):t instanceof wn?n||e.attendanceReport:""};var bhe=()=&gt;{let r=Me();return r.desktop?yC.default.createElement(yC.default.Fragment,null,yC.default.createElement(tr,{open:r.materialBoxOpen,overlay:!0,container:"none",onClose:()=&gt;r.reduce(Zh(!1))},yC.default.createElement(ghe,{onBack:()=&gt;{r.reduce(Zh(!1),pg(void 0))}})),yC.default.createElement(eo,{open:r.uploadingDocument!==void 0,transition:"up",onClose:()=&gt;{r.reduce(Zh(!1),pg(void 0))}},yC.default.createElement(vhe,{onBack:()=&gt;{r.reduce(Zh(!1),pg(void 0))}}))):null};var CC=oe(ve());function yhe(r){return{[404]:r.courseDoesntExist}}function cOe(r){return{[400]:r.invalidRequest,[403]:e=&gt;{let t=e.asJson();return(t==null?void 0:t.error_code)===0?r.ipAddressRestricted:(t==null?void 0:t.error_code)===5?r.insufficientPermission:(t==null?void 0:t.error_code)===13?r.cannotDeleteThisHistory:r.unexpectedErrorOccurred},[404]:r.status404ItemNotFound,[500]:r.unknownApiErrorMsg}}async function Che(r,e,t,n){let o=he.get().strings;await Ln(r,{fetchingId:nt.timelineEntries(e),promise:ie.lnsClient.getTimelineEntries(e,{before:t+1,count:1},n),doneReducer:i=&gt;{let s=i.entries.length!==0&amp;&amp;i.entries.some(l=&gt;l.id===t),a=[];if(!s){let l=he.get().strings,u=64;a.push(Co(u,{title:l.status404ItemNotFound,okMessage:l.okay,onOk:()=&gt;r.reduce(Co(u,void 0)),color:"info"})),a.push(sS(void 0))}return a},errorReducer:i=&gt;{if(n.aborted)return()=&gt;({});let s=75;return[me(s,{title:o.couldntFetchData,...ot(i,yhe(o)),okMessage:o.back,onOk:()=&gt;r.reduce(me(s,void 0))}),sS(void 0)]}})}async function tA(r,e,t,n={}){let o=he.get().strings;await Ln(r,{fetchingId:nt.timelineEntries(e),promise:ie.lnsClient.getTimelineEntries(e,n,t),doneReducer:i=&gt;s=&gt;{var u;let a=(u=s.timelineEntries.byCourseId[e])!=null?u:[],l=i.entries.map(d=&gt;d.id);return l.length&gt;0&amp;&amp;(a=Array.from(new Set(a.concat(l))),a.sort((d,c)=&gt;d-c)),{timelineEntries:{byId:{$merge:rn(i.entries.map(d=&gt;[d.id,d]))},byCourseId:{[e]:{$set:a}}}}},errorReducer:i=&gt;{if(t.aborted)return()=&gt;({});let s=75;return me(s,{title:o.couldntFetchData,...ot(i,yhe(o)),okMessage:o.back,onOk:()=&gt;r.reduce(me(s,void 0))})}})}function u7(r){r.reduce(iS(!1),cp(!r.desktop))}async function She(r,e,t){let n=he.get().strings,o=76;await Ln(r,{fetchingId:nt.timelineEntries(e),promise:ie.lnsClient.deleteTimelineEntry(e,t),beforeReducers:[we(o,n.deletingTimelineHistory)],doneReducer:()=&gt;uU(e,t),errorReducer:i=&gt;{let s=[me(o,{title:n.couldntDelete,...ot(i,cOe(n)),okMessage:n.back,onOk:()=&gt;r.reduce(me(o,void 0))})];return i instanceof sr&amp;&amp;i.status===404&amp;&amp;s.push(uU(e,t)),s}}),r.reduce(we(o,null))}function xhe(r,e){r.reduce(nY(e))}var qr=oe(ve()),Kw=oe(ve()),Ahe=oe(Wr());var QR=oe(Wr());async function whe({store:r,sendTo:e,taskId:t,courseId:n}){Ee(r.sendingDocument!=null,"sendingDocument must be set");let{card:o}=r.sendingDocument;r.reduce(fg(void 0),i_({id:t,sendTo:e,timestamp:new Date().toISOString()}));let i=32,s=he.get().strings;try{await Kp(r,o)}catch(u){r.reduce(ef(t),me(i,{title:s.couldntSendCards,...ot(u),okMessage:s.okay,onOk(){r.reduce(me(i,void 0))}}));return}let a=Nr(r,r.userInfo.user_id),l=await Ine({card:o,user:a,send_to:e,courseId:n});return ie.lnsClient.sendDocumentV2(l).then(()=&gt;{r.reduce(ef(t),Jt({type:"normal",text:s.didSendCards}))}).catch(Je.handleError).catch(u=&gt;{fe.error(u);let{message:d,unknownError:c}=ot(u,{[403]:p=&gt;{let h=p.asJson();return(h==null?void 0:h.error_code)===8?s.actionCannotBeCarriedOutOnClosedCourse:s.insufficientPermission}});r.reduce(ef(t),me(32,{title:s.couldntSendCards,message:d,unknownError:c,okMessage:s.back,onOk:()=&gt;r.reduce(me(32,void 0))}))})}async function The({store:r,taskId:e,noteInfo:t,courseId:n,idMapper:o=()=&gt;Sr()}){Ee(r.sendingDocument!=null,"sendingDocument must be set");let{card:i}=r.sendingDocument,s=he.get().strings;r.reduce(fg(void 0),i_({id:e,sendTo:"note",timestamp:new Date().toISOString()}));try{await Kp(r,i);let a=t.id,l=await ule(r,a),u=yd(a,l.note),d=Hy(i.copyGroup({srcIdMap:void 0,overGroup:!0,idMapper:o})),c=$y.getNextCardPosition(d.size,u),p=nf({head:d.headGroup(),destPosition:c});u.handleCommand(p);let h=l.version+1;await JN(r,{courseId:n,note:u,version:h}),$y.addCardPosition(d,u),await Phe(d,r.userInfo.user_id,t.id),khe(r,t.name),r.reduce(ef(e))}catch(a){if(Je.catchError(a))return;let{message:l,unknownError:u}=ot(a);a instanceof Ju&amp;&amp;(l=s.noteConflictDialogTitle,u=void 0),r.reduce(ef(e),me(32,{title:s.couldntSendCards,okMessage:s.back,message:l,unknownError:u,onOk:()=&gt;{r.reduce(me(32,void 0))}}))}}async function Dhe({store:r,taskId:e,noteInfo:t,idMapper:n=()=&gt;Sr()}){var g,v;Ee(r.sendingDocument!=null,"sendingDocument must be set");let{card:o}=r.sendingDocument;r.reduce(fg(void 0),i_({id:e,sendTo:"note",timestamp:new Date().toISOString()}));let i,s,a,l=t.id;try{await Kp(r,o);let b=await Yae(r,l);i=b.file,s=b.commands,a=b.socketClient}catch(b){if(Je.catchError(b))return;let C=he.get().strings;r.reduce(ef(e),me(32,{title:C.couldntSendCards,...ot(b),okMessage:C.back,onOk:()=&gt;r.reduce(me(32,void 0))}));return}let u=yd(t.id,i.note),d=(v=(g=i.share_metadata)==null?void 0:g.revision)!=null?v:jf,c=d;for(let b of s)u.handleCommand(b.payload),c=b.revision;let p=Hy(o.copyGroup({srcIdMap:void 0,overGroup:!0,idMapper:n})),h=$y.getNextCardPosition(p.size,u),f=nf({head:p.headGroup(),destPosition:h,startPosition:De(h.x,h.y-320)});a.setMessageHandler(async b=&gt;{await pOe({store:r,note:u,noteInfo:t,card:p,taskId:e,msg:b,socketClient:a,revision:c})});let m=a.createClientMessage(f,d,aa);a.emit(m)}var pOe=async r=&gt;{let{store:e,note:t,noteInfo:n,card:o,msg:i,socketClient:s,taskId:a}=r,l=r.revision;if(i.type==="command"){let u=i.sender,d=i.payload;if(d.revision)if(El(l,d.revision)&lt;0)l=d.revision;else{fe.warn(`"previous revision: curr=${l}, recv=${d.revision}"`);return}if(t.handleCommand(i.payload.payload),u.id===s.id)try{await qN({store:e,note:t,revision:l}),$y.addCardPosition(o,t),await Phe(o,e.userInfo.user_id,n.id),khe(e,n.name),e.reduce(ef(a))}catch(c){if(Je.catchError(c))return;let p=he.get().strings,{message:h,unknownError:f}=ot(c),m=p.back;if(c instanceof sr){let g=c.asJson();c.status===403?(g==null?void 0:g.error_code)===0?h=p.ipAddressRestricted:(g==null?void 0:g.error_code)===5&amp;&amp;(h=(0,QR.sprintf)(p.api403ErrorMsg,p.note)):c.status===404&amp;&amp;(h=(0,QR.sprintf)(p.xIsDeleted,p.note))}e.reduce(ef(a),me(32,{title:p.couldntSendCards,message:h,unknownError:f,okMessage:m,onOk:()=&gt;e.reduce(me(32,void 0))}))}finally{s.close()}}},khe=(r,e)=&gt;{let t=e,n=he.get().strings;e.length&gt;10&amp;&amp;(t=e.slice(0,10)+"\u2026");let o=(0,QR.sprintf)(n.sentToNote,t);r.reduce(Jt({text:o,type:"normal"}))},Phe=async(r,e,t)=&gt;{let n=[...r.iteratorOverGroup()].map(o=&gt;o.id);await ie.idb.sentCards.append(e,t,n).catch(o=&gt;{fe.error(o)})};var Ihe=({store:r,onClose:e,type:t})=&gt;{let[n,o]=(0,Kw.useState)(t),i=hOe({store:r,onClose:e}),s=d=&gt;{d.currentTarget===d.target&amp;&amp;e()},{isMobile:a}=r.screen,l=r.userInfo.is_teacher,u=pe();return qr.default.createElement("div",{className:"sendDialog",onClick:s,"data-teacher":l},!n&amp;&amp;qr.default.createElement(qr.default.Fragment,null,qr.default.createElement(Et,{round:!0},qr.default.createElement(Ft,null,qr.default.createElement(Mt,null,qr.default.createElement(gt,{onClick:e},u.cancel)),qr.default.createElement(Vt,null,u.sendToDialogTitle),qr.default.createElement(jt,null))),qr.default.createElement("div",{className:"sendDialogBody","data-teacher":l},l&amp;&amp;qr.default.createElement("div",{className:"sendDialogCell",role:"button",onClick:()=&gt;i({type:"users",to:"all"})},qr.default.createElement(lr,{className:"sendDialogCellIcon",src:"/svg/to_all.svg"}),qr.default.createElement("div",{className:"sendDialogCellTitle"},u.allMembers)),qr.default.createElement("div",{className:"sendDialogCell",role:"button",onClick:()=&gt;o("user")},qr.default.createElement(lr,{className:"sendDialogCellIcon",src:"/svg/to_persons.svg"}),qr.default.createElement("div",{className:"sendDialogCellTitle"},u.sendToIndividuals)),qr.default.createElement("div",{className:"sendDialogCell",role:"button",onClick:()=&gt;o("note")},qr.default.createElement(lr,{className:"sendDialogCellIcon",src:"/svg/to_note.svg"}),qr.default.createElement("div",{className:"sendDialogCellTitle"},u.myNote)))),qr.default.createElement(eo,{open:n==="user",onClose:()=&gt;{o(void 0),e()},transition:a?"up":void 0,container:"none"},qr.default.createElement(gOe,{store:r,onSend:d=&gt;{i({type:"users",to:d}),o(void 0)},onClose:()=&gt;{o(void 0),e()}})),qr.default.createElement(eo,{open:n==="note",onClose:()=&gt;{o(void 0),e()},transition:a?"up":void 0,container:"none"},qr.default.createElement(vOe,{store:r,onPick:(d,c)=&gt;{i({type:"note",to:{info:d,courseId:c}}),o(void 0)},onClose:()=&gt;{o(void 0),e()}})))},hOe=r=&gt;async e=&gt;{e.type==="users"?await fOe({...r,sendTo:e.to}):await mOe({...r,sendTo:e.to})},fOe=async({store:r,onClose:e,sendTo:t})=&gt;{let n=he.get().strings,o=Gr(Xt(r));if(t==="all"&amp;&amp;!confirm(n.confirmSendToAll)){e();return}let i=Sr();await whe({store:r,taskId:i,courseId:o,sendTo:t}),e()},mOe=async({store:r,onClose:e,sendTo:t})=&gt;{let n=Sr();t.info.is_shared?await Dhe({store:r,taskId:n,noteInfo:t.info}):await The({store:r,taskId:n,noteInfo:t.info,courseId:t.courseId}),e()},gOe=({store:r,onClose:e,onSend:t})=&gt;{let n=Gr(Xt(r)),o=r.tunnelStates[n],i=r.userInfo.is_teacher,s=r.courseAttributes.byId[n],[a,l]=(0,Kw.useState)([]);(0,Kw.useEffect)(()=&gt;{Ua(r,n)},[]),(0,Kw.useEffect)(()=&gt;{l([])},[o]);let u=g=&gt;{let v=a.indexOf(g);if(v&gt;-1){let b=[...a];b.splice(v,1),l(b)}else l([...a,g])},d=pe(),c=qr.default.useMemo(()=&gt;{let{students:g,teachers:v,allIds:b}=qh({store:r,courseId:n,includeSelf:!1});return!i&amp;&amp;!o&amp;&amp;(g=[]),{students:g,teachers:v,allIds:b}},[r.users,o]),p=!r.screen.isMobile,h=a.length&lt;=0?d.send:(0,Ahe.sprintf)(d.sendToMultiple,a.length),f=()=&gt;{l(i||o?[...c.allIds]:c.teachers.map(g=&gt;g.id))},m=()=&gt;{l([])};return qr.default.createElement(rr,{round:p},qr.default.createElement(Et,null,qr.default.createElement(Ft,null,qr.default.createElement(Mt,null,qr.default.createElement(gt,{onClick:e},d.cancel)),qr.default.createElement(Vt,null,d.sendToDialogTitle),qr.default.createElement(jt,null,qr.default.createElement(gt,{disabled:a.length===0,onClick:()=&gt;t(a)},h))),s===void 0&amp;&amp;qr.default.createElement(_t,{absolute:"bottom"})),qr.default.createElement(ur,{style:{backgroundColor:"white"}},s!==void 0&amp;&amp;qr.default.createElement(wv,{onClickUser:u,selectedIds:a,sections:[[d.teacher,c.teachers],[d.student,c.students]]})),qr.default.createElement(Gp,null,qr.default.createElement(uw,{onClickReleaseAll:m,onClickSelectAll:f,disableReleaseAll:a.length===0,disableSelectAll:a.length===c.students.length+c.teachers.length})))},vOe=({store:r,onPick:e,onClose:t})=&gt;{let n=pe(),[o,i]=$r({courseList:"joined"});return qr.default.createElement(qr.default.Fragment,null,!o.courseId&amp;&amp;o.courseList==="joined"&amp;&amp;qr.default.createElement(SB,{store:r,message:n.toWhichSubjectNotesDoYouWantToSend,showArrow:!0,onClickCell:s=&gt;{i({courseId:s})},onClickOtherTeacher:()=&gt;{i({courseList:"otherTeachers"})},closeDialog:t}),!o.courseId&amp;&amp;o.courseList==="otherTeachers"&amp;&amp;qr.default.createElement(DB,{store:r,showArrow:!0,onClickCell:s=&gt;{i({courseId:s})},onClickBack:()=&gt;{i({courseList:"joined"})}}),o.courseId&amp;&amp;qr.default.createElement(wG,{store:r,courseId:o.courseId,onClose:()=&gt;{i({courseId:void 0})},onSelect:s=&gt;{o.courseId&amp;&amp;e(s,o.courseId)}}))};var at=oe(ve());var qw=oe(Wr());var Ehe=Do(),_he=({store:r,courseId:e,onClose:t})=&gt;{let n=pe(),o=r.fetchStates[nt.timelineEntries(e)],[i,s]=(0,at.useState)([]),[a,l]=(0,at.useState)(!1),u=(0,at.useRef)(null),d=(0,at.useRef)(null),c=(0,at.useRef)(new AbortController),p=(0,at.useRef)(r);p.current=r,(0,at.useEffect)(()=&gt;{let x=r.timelineEntry;return x?(async()=&gt;(await Che(p.current,e,x,c.current.signal),tA(p.current,e,c.current.signal)))():tA(p.current,e,c.current.signal),Zie({store:p.current,courseId:e}),()=&gt;{Ehe(()=&gt;{},0),c.current.abort(),xhe(p.current,e)}},[]),(0,at.useEffect)(()=&gt;{let x=()=&gt;{var w;let T=d.current;T.scrollTop=T.scrollHeight-((w=u.current)!=null?w:0)},y=new MutationObserver(x),S=d.current;return y.observe(S,{attributes:!0,attributeFilter:["data-entry-count"]}),()=&gt;y.disconnect()},[]),(0,at.useEffect)(()=&gt;{let x=p.current.timelineEntries.byCourseId[e];o==="done"&amp;&amp;x&amp;&amp;i.length===x.length&amp;&amp;l(!0)},[o]),(0,at.useEffect)(()=&gt;{let x=p.current.timelineEntries.byCourseId[e];if(!x)return;i.length-x.length&gt;0?f(x):o==="done"&amp;&amp;h(x)},[p.current.timelineEntries]),(0,at.useEffect)(()=&gt;{let x=[];i.map(y=&gt;{var S;(S=y.share)!=null&amp;&amp;S.shared_with&amp;&amp;x.push(...y.share.shared_with.filter(T=&gt;!x.includes(T)))});for(let y of x)r.users.byId[y]||lp(r,y)},[i]);let h=x=&gt;{let y=x.filter(k=&gt;p.current.timelineEntries.byId[k]!==void 0).map(k=&gt;p.current.timelineEntries.byId[k]);y.length-i.length&lt;20&amp;&amp;l(!0),s(y);let S=p.current.timelineEntry,T=Math.min(...x),w=S&amp;&amp;S&lt;T&amp;&amp;!x.includes(S);if(!a&amp;&amp;w){let k=T;tA(r,e,c.current.signal,{before:k})}},f=x=&gt;{let y=x.map(S=&gt;p.current.timelineEntries.byId[S]);s(y)},m=x=&gt;()=&gt;{r.reduce(sS(x.id))},g=Fhe(r,r.timelineEntry,n),v=x=&gt;{let y=x.currentTarget;u.current=y.scrollHeight-y.scrollTop,!(a||o!=="done")&amp;&amp;Ehe(()=&gt;{var w;let S=(w=p.current.timelineEntries.byCourseId[e])!=null?w:[];if(S.length===0||y.scrollTop&gt;0||y.scrollHeight===0)return;let T=Math.min(...S);tA(r,e,c.current.signal,{before:T})},500)},b=async x=&gt;{!confirm(n.confirmDeleteTimelineHistory)||await She(r,e,x)},C=sg(r,e);return at.default.createElement(at.default.Fragment,null,at.default.createElement("div",{className:"timeline"},at.default.createElement(rr,null,at.default.createElement(Et,null,at.default.createElement(Ft,null,at.default.createElement(Mt,null,at.default.createElement(gt,{onClick:t},n.back)),at.default.createElement(Vt,null,at.default.createElement(bd,null,C&amp;&amp;at.default.createElement(Ml,{enablePopover:!0},C),at.default.createElement(vd,null,n.timelineTitle))),at.default.createElement(jt,null)),o==="fetching"&amp;&amp;at.default.createElement(_t,{absolute:"bottom"})),at.default.createElement("div",{ref:d,className:"navBody",onScroll:v,"data-entry-count":i.length},at.default.createElement("div",{className:"timelineBody"},at.default.createElement(lk,{component:null,appear:!1,enter:!1,exit:!0},i.map(x=&gt;at.default.createElement(Mn,{key:x.id,timeout:250,classNames:"fade"},at.default.createElement(bOe,{store:r,entry:x,onClick:m(x),onDelete:b,fetchState:o,userId:r.userInfo.user_id})))),r.sendingTasks.sort((x,y)=&gt;x.timestamp.localeCompare(y.timestamp)).map(x=&gt;{if(x.sendTo!=="note")return at.default.createElement(yOe,{key:x.id,store:r,to:x.sendTo})}).filter(x=&gt;!!x))))),r.timelineEntry&amp;&amp;g&amp;&amp;at.default.createElement(UR,{store:r,document:g,onClose:()=&gt;r.reduce(sS(void 0))}))},bOe=({store:r,entry:e,userId:t,onClick:n,onDelete:o,fetchState:i})=&gt;{var u,d,c,p,h,f,m,g,v,b,C;let s=pe(),a=Fhe(r,e.id,s),l=(x,y)=&gt;{if(x.is_admin)return!0;if(x.is_teacher){let S=x.user_id===y.id,T=y.isTeacher!==void 0&amp;&amp;!y.isTeacher;return S||T}return!1};if(e.type==="assignment"){let x=e.assignment,y=x.expiry&amp;&amp;new Date&lt;=new Date(x.expiry);return at.default.createElement(JR,{isMyEntry:x.author.id===t,isTeacherEntry:(d=(u=r.users.byId[x.author.id])==null?void 0:u.is_teacher)!=null?d:!1,timestamp:e.timestamp,displayName:x.author.display_name,entry:e},at.default.createElement("div",{className:"timelineEntryMessage"},x.message),at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement(lr,{className:"timelineEntryDescIcon",src:y?"/svg/clock_red.svg":"/svg/clock.svg",width:12,height:12}),(()=&gt;x.expiry===null?s.noExpiry:y?at.default.createElement("span",null,s.deadlineDate," : ",new Ls(x.expiry).toTimelineDate()):at.default.createElement("span",null,s.hasExpired," : ",new Ls(x.expiry).toTimelineDate()))()))}else if(e.type==="submission"){let x=e.submission,y=S=&gt;{S.dataTransfer.clearData(),S.dataTransfer.setData("application/x-loilo-file-document",JSON.stringify(a)),S.dataTransfer.effectAllowed="copy"};return at.default.createElement(JR,{isMyEntry:x.author.id===t,isTeacherEntry:(p=(c=r.users.byId[x.author.id])==null?void 0:c.is_teacher)!=null?p:!1,timestamp:e.timestamp,displayName:x.author.display_name,entry:e},at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{anchor:"topCenter"},x.submission_message))),at.default.createElement(d7,{onClick:n},at.default.createElement(Wl,{id:x.document.id,index:0,thumbnails:{document:x.snapshot_thumbnails.document,annotation:x.snapshot_thumbnails.annotation},comment_snapshot_id:x.comment_snapshot_id,onDragStart:r.desktop?y:void 0,skipForKnown404Url:!0})),at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement(lr,{className:"timelineEntryDescIcon",src:(h=r.users.byId[x.author.id])!=null&amp;&amp;h.is_teacher?"/svg/pencil_blue.svg":"/svg/pencil_orange.svg",width:12,height:12}),s.submit))}else if(e.type==="share"){let x=e.share,y=w=&gt;{w.dataTransfer.clearData(),w.dataTransfer.setData("application/x-loilo-file-document",JSON.stringify(a)),w.dataTransfer.effectAllowed="copy"},S=l(r.userInfo,{isTeacher:(f=r.users.byId[x.author.id])==null?void 0:f.is_teacher,id:x.author.id}),T={onDelete:o,disabled:i==="fetching"};return at.default.createElement(JR,{isMyEntry:x.author.id===t,isTeacherEntry:(g=(m=r.users.byId[x.author.id])==null?void 0:m.is_teacher)!=null?g:!1,timestamp:e.timestamp,displayName:x.author.display_name,deleteAction:S?T:void 0,entry:e},at.default.createElement(d7,{onClick:n},at.default.createElement(Wl,{id:x.document.id,index:0,thumbnails:{document:x.thumbnails.document,annotation:x.thumbnails.annotation},onDragStart:r.desktop?y:void 0,skipForKnown404Url:!0})),at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement(lr,{className:"timelineEntryDescIcon",src:(v=r.users.byId[x.author.id])!=null&amp;&amp;v.is_teacher?"/svg/user.svg":"/svg/user_orange.svg",width:12,height:12}),at.default.createElement(Mhe,{store:r,authorId:x.author.id,shared_with:x.shared_with})))}else if(e.reply){let x=e.reply,y=x.replied_document,S=y.author.display_name;y.author.id!==t&amp;&amp;x.hide_author&amp;&amp;(S=s.anonymous);let T=w=&gt;{w.dataTransfer.clearData(),w.dataTransfer.setData("application/x-loilo-file-document",JSON.stringify(a)),w.dataTransfer.effectAllowed="copy"};return at.default.createElement(JR,{isMyEntry:x.author.id===t,isTeacherEntry:(C=(b=r.users.byId[x.author.id])==null?void 0:b.is_teacher)!=null?C:!1,timestamp:e.timestamp,displayName:x.author.display_name,entry:e},at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{anchor:"topCenter"},x.submission_message))),at.default.createElement(d7,{onClick:n},at.default.createElement(Wl,{id:y.document.id,index:0,thumbnails:{document:x.snapshot_thumbnails.document,annotation:x.snapshot_thumbnails.annotation},comment_snapshot_id:x.comment_snapshot_id,onDragStart:r.desktop?T:void 0,skipForKnown404Url:!0})),at.default.createElement("div",{className:"timelineEntryDesc"},at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{anchor:"topCenter"},S)),at.default.createElement("span",{className:"timelineReplyText"},` / ${s.sendBack}`)))}return null},Fhe=(r,e,t)=&gt;{var o,i,s;if(!e)return;let n=r.timelineEntries.byId[e];if(!!n){if(n.share){let a=n.share,l=(0,qw.sprintf)(t.sharedBy,a.author.display_name);return{id:a.document.id,name:l,timestamp:n.timestamp,author_id:a.author.id,extension:(o=a.document.extension)!=null?o:"",asset_proxy:null}}else if(n.submission){let a=n.submission,l=(0,qw.sprintf)(t.submittedBy,a.author.display_name);return{id:a.document.id,name:l,timestamp:n.timestamp,extension:(i=a.document.extension)!=null?i:"",author_id:a.author.id,asset_proxy:null,comment_snapshot_id:a.comment_snapshot_id}}else if(n.reply){let a=n.reply,l=(0,qw.sprintf)(t.sentBackBy,a.author.display_name);return{id:a.replied_document.document.id,name:l,timestamp:n.timestamp,extension:(s=a.replied_document.document.extension)!=null?s:"",author_id:a.hide_author?void 0:a.author.id,asset_proxy:null,comment_snapshot_id:a.comment_snapshot_id}}}},Mhe=({store:r,authorId:e,shared_with:t})=&gt;{let n=pe(),[o,i]=(0,at.useState)(!1),s="";if(t==="all")return at.default.createElement("span",{className:"timelineSharedPrimary"},n.allMembers);let a=t.filter(p=&gt;p!==e).map(p=&gt;r.users.byId[p]).sort((p,h)=&gt;{var f,m;return(m=(f=tg(p==null?void 0:p.sort_key,h==null?void 0:h.sort_key))!=null?f:eg(p==null?void 0:p.username,h==null?void 0:h.username))!=null?m:Zm(p==null?void 0:p.id,h==null?void 0:h.id)});if(a.length===0)return null;let l=a[0];if(l?s=zt(l):s=n.unknownUser,a.length===1)return at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{anchor:"topCenter",className:"timelineSharedPrimary"},s));let u=he.get().pluralSafeSuffix(a.length-1),d=(0,qw.sprintf)(n.andOtherMembers,a.length-1,u),c=a.slice(1,a.length).map(p=&gt;p?zt(p):n.unknownUser);return at.default.createElement(at.default.Fragment,null,at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{className:"timelineSharedPrimary",anchor:"topCenter"},s)),at.default.createElement("span",{className:"timelineSharedDelimiter"},", "),at.default.createElement("span",{className:"timelineSharedSecondary",onClick:()=&gt;i(!o),role:"button"},d,at.default.createElement(xt,{anchor:"topCenter",arrowColor:"#323232",open:o,onClose:()=&gt;i(!1)},at.default.createElement("div",{className:"timelineSendToPopover"},c.map((p,h)=&gt;at.default.createElement("div",{key:h},p))))))},d7=({children:r,...e})=&gt;at.default.createElement("div",{className:"timelineEntryThumb",role:"button",...e},r),JR=({children:r,timestamp:e,displayName:t,isMyEntry:n,isTeacherEntry:o,deleteAction:i,entry:s})=&gt;{let a=pe();return at.default.createElement("div",{className:"timelineEntry","data-my-entry":n,"data-teacher-entry":o},at.default.createElement("div",{className:"timelineEntryInner"},at.default.createElement("div",{className:"timelineContent"},at.default.createElement("div",{className:"timelineDisplayName"},at.default.createElement("div",{className:"ellipsisTextOuter"},at.default.createElement(nr,{anchor:"topCenter"},t!=null?t:a.unknownUser))),at.default.createElement(COe,null,r),at.default.createElement("div",{className:"timelineDate"},new Ls(e).toTimelineDate())),at.default.createElement("div",{className:"timelineAction"},i&amp;&amp;at.default.createElement(SOe,{entry:s,deleteAction:i}))))},yOe=({store:r,to:e})=&gt;{let[t,n]=(0,at.useState)(1);(0,at.useEffect)(()=&gt;{setTimeout(()=&gt;{let a=t+1;a===4&amp;&amp;(a=1),n(a)},500)},[t]);let o=Array.from({length:t}).map(()=&gt;".").join(""),i=pe(),s=(0,qw.sprintf)(i.nowSharingIndicator,"",o);return at.default.createElement("div",{className:"timelineEntry"},at.default.createElement("div",{className:"timelineEntryInner","data-my-entry":"true","data-teacher-entry":r.userInfo.is_teacher},at.default.createElement("div",{className:"timelineSendingIndicator","data-my-entry":"true","data-teacher-entry":r.userInfo.is_teacher},at.default.createElement(Mhe,{store:r,authorId:r.userInfo.user_id,shared_with:e}),at.default.createElement("div",{className:"timelineSendingIndicatorMsg"},s))))},COe=({children:r})=&gt;at.default.createElement("div",{className:"timelineBalloon"},at.default.createElement("div",{className:"timelineBalloonArrow"}),at.default.createElement("div",{className:"timelineBalloonContent"},r)),SOe=({entry:r,deleteAction:e})=&gt;{let t=pe(),[n,o]=(0,at.useState)(!1);return at.default.createElement(Gt,{className:"timelineMoreButton"},at.default.createElement("div",{className:"timelineMoreIcon",onClick:()=&gt;o(!0)}),at.default.createElement(xt,{open:n,onClose:()=&gt;o(!1)},at.default.createElement(Rr,{className:"timelineMorePopoverItem",disabled:e.disabled,onClick:()=&gt;{e.disabled||(e.onDelete(r.id),o(!1))}},t.delete)))};var Nhe=()=&gt;{let r=Me(),e=r.timelineOpen,t=Xt(r),n=()=&gt;{r.reduce(fg(void 0))};return CC.default.createElement(CC.default.Fragment,null,CC.default.createElement(tr,{className:"centralizedModalWrapper",open:r.sendingDocument!==void 0,overlay:!0,onClose:n},CC.default.createElement(Ihe,{store:r,onClose:n,type:t==="self-study"?"note":void 0})),Or(t)&amp;&amp;CC.default.createElement(tr,{open:e,onClose:()=&gt;u7(r),overlay:!0,container:"none"},CC.default.createElement(_he,{store:r,courseId:t,onClose:()=&gt;u7(r)})))};var Bhe=ao.default.createContext();function Me(){return(0,ZR.useContext)(Bhe)}var Rhe=({store:r,localizedStrings:e})=&gt;ao.default.createElement(Bhe.Provider,{value:r},ao.default.createElement(xK,{value:e},ao.default.createElement(xOe,{store:r}))),xOe=({store:r})=&gt;!r.isSsoUser&amp;&amp;r.userInfo.password_change_required?ao.default.createElement(ao.default.Fragment,null,ao.default.createElement(Qce,null),ao.default.createElement("div",{id:O2},(0,ZR.useContext)(U2)),ao.default.createElement(NW,null)):ao.default.createElement(Bde,{store:r},ao.default.createElement(cae,null),ao.default.createElement(Pce,null),ao.default.createElement(Kce,null),ao.default.createElement(ape,null),ao.default.createElement(jpe,null),ao.default.createElement(bhe,null),ao.default.createElement(Nhe,null),ao.default.createElement(Lpe,null),ao.default.createElement(Epe,null),ao.default.createElement("div",{id:O2},(0,ZR.useContext)(U2)),ao.default.createElement(lpe,null),ao.default.createElement(Npe,null),ao.default.createElement(Ice,null),ao.default.createElement(Rce,null),ao.default.createElement(Hle,null),ao.default.createElement(Ope,null),ao.default.createElement(Oce,null),ao.default.createElement(Uce,null),ao.default.createElement(NW,null),ao.default.createElement(zce,null));var c7=oe(Sh());var Ohe=({initialState:r})=&gt;{let[e,t]=(0,am.useState)(()=&gt;{delete r.pushState;let a=[oU({width:window.innerWidth,height:window.innerHeight,keyboardHeight:0,dpr:window.devicePixelRatio}),s_(vq(r))],l;(document.referrer===cE||sessionStorage.getItem(cE)==="true")&amp;&amp;(sessionStorage.setItem(cE,"true"),l=tc(location.pathname),a.push(fY(!0)));let u=L4(r,...a),d=yq(u);return d.subscribe(c=&gt;t(c)),window.history.replaceState(G0(d),document.title,l),d});(0,am.useEffect)(()=&gt;{e.setHanged(e.sessionExpired)},[e.sessionExpired]);let n=gK(r.locale);c7.default.locale()!==n&amp;&amp;c7.default.locale(n),he.get().setLocale(r.locale);let o=he.get().strings,i=()=&gt;{document.documentElement.style.setProperty("--vh",`${$j(1)}px`),document.documentElement.style.setProperty("--devicePixelRatio",`${window.devicePixelRatio}`)},s=(0,am.useRef)(e);return jn(()=&gt;{i()}),(0,am.useEffect)(()=&gt;{ie.pushClient.delegate=a=&gt;{e.reduce(jq(a))}},[ie.pushClient]),(0,am.useEffect)(()=&gt;{s.current=e},[e]),(0,am.useEffect)(()=&gt;{let a=T=&gt;{let{sessionExpired:w}=s.current;!w&amp;&amp;Lq(s.current)&gt;0&amp;&amp;(T.preventDefault(),T.returnValue=o.confirmReloadWhileUnsavedChangesExist)},l=()=&gt;{s.current.pageVisible&amp;&amp;ie.lnsClient.notifyEnterBackground()},u=Do(),d=()=&gt;{let T=document.visibilityState==="visible";s.current.pageVisible!==T&amp;&amp;Hie(s.current,T)},c=()=&gt;{u(d,500)},p=T=&gt;{Je.catchError(T)||e.reduce(PE(T))},h=T=&gt;{T.promise.catch(p)},f=T=&gt;{T.error&amp;&amp;p(T.error)},m=Do(),g=()=&gt;{e.reduce(qq(document.hasFocus()))},v=()=&gt;{m(g,500)},b=(T,w)=&gt;{i(),e.reduce(oU({width:T.width,height:T.height,keyboardHeight:w,dpr:window.devicePixelRatio}))},C=()=&gt;{e.reduce(rY(!0))},x=()=&gt;{e.reduce(G1(void 0))},y=()=&gt;{!Ig()&amp;&amp;lF()&amp;&amp;Dde()&amp;&amp;e.reduce(G1("ready"))},S=new pR(b);return window.addEventListener("error",f),window.addEventListener("unhandledrejection",h),window.addEventListener("beforeunload",a),document.readyState==="complete"?y():window.addEventListener("load",y),window.addEventListener("unload",l),document.addEventListener("visibilitychange",c),window.addEventListener("focus",v),window.addEventListener("blur",v),window.addEventListener("webcardExtensionInstalled",C),window.addEventListener("webcardcreate",x),()=&gt;{window.removeEventListener("error",f),window.removeEventListener("unhandledrejection",h),window.removeEventListener("beforeunload",a),window.removeEventListener("load",y),window.removeEventListener("unload",l),document.removeEventListener("visibilitychange",c),window.removeEventListener("focus",v),window.removeEventListener("blur",v),window.removeEventListener("webcardExtensionInstalled",C),window.removeEventListener("webcardcreate",x),S.close()}},[]),Lhe.default.createElement(Rhe,{store:e,localizedStrings:o})};var Uhe=oe(ve());var zhe=({error:r})=&gt;{let e=vE(r);return Uhe.default.createElement(Wm,{...e})};var Hhe={name:"ja-Hira",weekdays:"\u306B\u3061\u3088\u3046\u3073_\u3052\u3064\u3088\u3046\u3073_\u304B\u3088\u3046\u3073_\u3059\u3044\u3088\u3046\u3073_\u3082\u304F\u3088\u3046\u3073_\u304D\u3093\u3088\u3046\u3073_\u3069\u3088\u3046\u3073".split("_"),weekdaysShort:"\u306B\u3061_\u3052\u3064_\u304B_\u3059\u3044_\u3082\u304F_\u304D\u3093_\u3069".split("_"),weekdaysMin:"\u306B\u3061_\u3052\u3064_\u304B_\u3059\u3044_\u3082\u304F_\u304D\u3093_\u3069".split("_"),months:"1\u304C\u3064_2\u304C\u3064_3\u304C\u3064_4\u304C\u3064_5\u304C\u3064_6\u304C\u3064_7\u304C\u3064_8\u304C\u3064_9\u304C\u3064_10\u304C\u3064_11\u304C\u3064_12\u304C\u3064".split("_"),monthsShort:"1\u304C\u3064_2\u304C\u3064_3\u304C\u3064_4\u304C\u3064_5\u304C\u3064_6\u304C\u3064_7\u304C\u3064_8\u304C\u3064_9\u304C\u3064_10\u304C\u3064_11\u304C\u3064_12\u304C\u3064".split("_"),ordinal:r=&gt;`${r}\u306B\u3061`,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061",LLL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 HH:mm",LLLL:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061",lll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061 HH:mm",llll:"YYYY\u306D\u3093M\u304C\u3064D\u306B\u3061\uFF08ddd\uFF09HH:mm"},meridiem:r=&gt;r&lt;12?"\u3054\u305C\u3093":"\u3054\u3054",relativeTime:{future:"%s\u3054",past:"%s\u307E\u3048",s:"\u3059\u3046\u3073\u3087\u3046",m:"1\u3075\u3093",mm:"%d\u3075\u3093",h:"1\u3058\u304B\u3093",hh:"%d\u3058\u304B\u3093",d:"1\u306B\u3061",dd:"%d\u306B\u3061",M:"1\u304B\u3052\u3064",MM:"%d\u304B\u3052\u3064",y:"1\u306D\u3093",yy:"%d\u306D\u3093"}};var Ghe=100,eL=class{constructor(e){this.options=e}async send(e){let{endpoint:t,authToken:n}=this.options,o=new zl({method:e.method,url:t+e.url,body:e.body,signal:e.signal});if(n&amp;&amp;o.addParam("auth_token",n),e.headers)for(let[i,s]of e.headers)o.headers.append(i,s);return Ac(o,{enableLog:this.options.enableDebug,noCache:e.noCache,responseType:e.responseType,keepalive:e.keepalive})}async getCourse(e){return this.send({method:"GET",url:`/api/courses/${e}`,responseType:"json"})}async linkCourse(e){let t=new URLSearchParams;return t.set("subject_id",e.subject_id+""),t.set("user_group_id",e.user_group_id+""),this.send({method:"POST",url:"/api/courses",body:t,responseType:"json"})}async createCourse(e){let t=new URLSearchParams;return t.set("subject_name",e.subject_name),t.set("user_group_id",e.user_group_id+""),this.send({method:"POST",url:"/api/courses",body:t,responseType:"json"})}async attendCourse(e){if(!e)throw new Error(`invalid course_id: ${e}`);return this.send({method:"POST",url:`/api/courses/${e}/attend`,responseType:"json"})}async leaveCourse(){return this.send({method:"POST",url:"/api/courses/0/attend",responseType:"json"})}async deleteCourse(e){return this.send({method:"DELETE",url:`/api/courses/${e}`,responseType:"json"})}async getCourses(e){return e?this.coursesTeacher():this.courseStudent()}async getClosedYears(e){let t=new URLSearchParams;return e.user&amp;&amp;t.append("target[]","user"),e.school&amp;&amp;t.append("target[]","school"),this.send({method:"GET",url:`/api/courses/closed?${t.toString()}`,responseType:"json"})}async getClosedCourses({year:e,target:t}){let n=new URLSearchParams;return t.user&amp;&amp;n.append("target[]","user"),t.school&amp;&amp;n.append("target[]","school"),await this.send({method:"GET",url:`/api/courses/closed/${e}?${n.toString()}`,responseType:"json"})}async courseStudent(){let e=await this.send({method:"GET",url:"/api/courses/student",responseType:"json"});return HE(e)}async coursesTeacher(){let e=await this.send({method:"GET",url:"/api/courses/teacher",responseType:"json"}),t=q4(e);return HE(t)}async coursesArchiveTeacher(){return this.send({method:"GET",url:"/api/courses/archive/teacher",responseType:"json"})}async getAllCourses(){let e=await this.send({method:"GET",url:"/api/courses/school",responseType:"json"});return HE(q4(e))}async coursesArchiveSchool(){return this.send({method:"GET",url:"/api/courses/archive/school",responseType:"json"})}async getCourseUserStatues(e){return this.send({method:"GET",url:`/api/courses/${e}/user_status`,responseType:"json"})}async getCourseTeacherStatues(e){return this.send({method:"GET",url:`/api/courses/${e}/teacher_status`,responseType:"json"})}async getCourseTemporaryTeachers(e){return this.send({method:"GET",url:`/api/courses/${e}/temporary_teachers`,responseType:"json"})}async getCourseAndNote(e,t){let{course:n,note:o}=await this.send({method:"GET",url:`/api/courses/${e}/notes/${t}`,responseType:"json"});return e==="self-study"?{note:o}:{course:n,note:o}}async sendDocumentV2(e){let t=new FormData;return t.set("data",e.data),e.send_to==="all"?t.set("send_to","all"):t.set("send_to",JSON.stringify(e.send_to)),t.set("thumbnails",JSON.stringify(e.thumbnails)),t.set("annotation_thumbnails",JSON.stringify(e.annotation_thumbnails)),this.send({method:"POST",url:`/api/courses/${e.courseId}/share/v2`,body:t,responseType:"json"})}async getMixedNotes(e){return this.send({method:"GET",url:`/api/courses/${e}/mixed_notes`,responseType:"json"}).then(t=&gt;t.map(rA))}async getSelfStudyNotes(){return this.send({method:"GET",url:"/api/notes/free",responseType:"json"}).then(e=&gt;e.map(rA))}async downloadNote(e,t){return this.send({method:"GET",url:`/api/notes/${e}`,noCache:!0,responseType:"arrayBuffer",signal:t})}async getNoteHeader(e){return this.send({method:"HEAD",url:`/api/notes/${e}`,responseType:"headers"}).then(t=&gt;{let n=t.get("loilo-note-version"),o=t.get("loilo-note-author"),i=t.get("loilo-note-last-device");if(!!n)return{version:parseInt(n),author_id:o?parseInt(o):void 0,device_id:i!=null?i:void 0}})}async deleteNote(e){return this.send({method:"DELETE",url:`/api/notes/${e}`,responseType:"json"})}async renameNote({noteId:e,noteName:t}){let n=new FormData;return n.set("id",e+""),n.set("name",t),this.send({method:"POST",url:`/api/notes/${e}/rename`,responseType:"json",body:n})}async copyNotes(e){let t=new FormData;return t.set("note_ids",JSON.stringify(e.noteIds)),e.destCourseId==="self-study"?t.set("destination_course_id","0"):t.set("destination_course_id",e.destCourseId+""),e.suffix&amp;&amp;t.set("name_suffix",e.suffix),this.send({method:"POST",url:"/api/notes/multi_copy",body:t,responseType:"json"})}async createNote({courseId:e,name:t,note:n,version:o,header:i}){let s=new FormData,a=await X1({note:n,version:o,header:i});return s.set("name",t),e!=="self-study"&amp;&amp;s.set("course_id",`${e}`),s.set("version",`${o}`),s.set("data",new Blob([a])),this.send({method:"POST",url:"/api/notes/upload",body:s,responseType:"json"})}async uploadNote({noteId:e,courseId:t,version:n,note:o,assets:i,header:s}){if(typeof e!="number")throw new Error("noteId is not number:"+e);let a=new FormData,l=await X1({note:o,version:n,header:s});a.set("id",`${e}`),t!=="self-study"&amp;&amp;a.set("course_id",`${t}`),a.set("version",`${n}`),a.set("data",new File([l],"note.lnnote",{type:"application/zip"})),a.set("assets",JSON.stringify(i));try{return await this.send({url:"/api/notes/upload",method:"POST",body:a,responseType:"json"})}catch(u){if(u instanceof sr&amp;&amp;u.status===400){fe.log(u.message,e,t,n);let d=JSON.parse(u.message);throw new Ju({resp:d,note:o,noteId:e,courseId:t})}throw u}}async makeNoteShared({noteId:e,protocolVersion:t,permissions:n=[],teacherPermission:o,studentPermission:i}){Ee(n.length&lt;=100,"members length should be &lt;= 100"),await this.send({method:"POST",url:`/api/notes/${e}/make_shared`,body:new jo({protocol_version:t,teacher_permission:o,student_permission:i,...n.length&gt;0?{members:JSON.stringify(n.map(({userId:s,...a})=&gt;({user_id:s,...a})))}:{}}),responseType:"json"})}async importNote({courseId:e,file:t,signal:n}){let o=new FormData;return e!=="self-study"&amp;&amp;o.set("course_id",e+""),o.set("file",t),this.send({method:"POST",url:"/api/notes/import",body:o,responseType:"json",signal:n}).then(rA)}async exportNote({noteId:e,assetUUIDs:t,signal:n}){let o=new URLSearchParams;return o.set("assets",JSON.stringify(t)),this.send({method:"POST",url:`/api/notes/${e}/export`,responseType:"blob",body:o,signal:n})}async getSharedNoteIndividualMembers(e){return this.send({method:"GET",url:`/api/notes/${e}/members`,responseType:"json"})}async addNoteMembersOld(e,t){return await this.send({method:"POST",url:`/api/notes/${e}/members`,body:new jo({user_ids:JSON.stringify(t)}),responseType:"json"})}async addSharedNotePermissions(e,t){return await this.send({method:"POST",url:`/api/notes/${e}/members`,body:new jo({permissions:JSON.stringify(t.map(({userId:n,permission:o})=&gt;({user_id:n,permission:o})))}),responseType:"json"})}async deleteSharedNotePermissions(e,t){return await this.send({method:"POST",url:`/api/notes/${e}/members/delete/v2`,body:new jo({user_ids:JSON.stringify(t)}),responseType:"json"})}async leaveNoteMember(e){await this.send({method:"POST",url:`/api/notes/${e}/members/leave`,responseType:"json"})}async createNoteSnapshot({noteId:e,commandRevision:t,protocolVersion:n,noteFile:o}){let i=new FormData;i.set("protocol_version",n),i.set("revision",t),i.set("file",o);try{await this.send({method:"POST",url:`/api/notes/${e}/snapshot`,body:i,responseType:"json"})}catch(s){if(s instanceof sr&amp;&amp;s.status===400){let a=s.asJson();if((a==null?void 0:a.rejection)==="revision_error")return;if(a)throw new ng(a)}throw s}}async downloadSnapshot({noteId:e,protocolVersion:t,signal:n}){try{return await this.send({method:"GET",url:`/api/notes/${e}/snapshot?protocol_version=${t}`,responseType:"arrayBuffer",signal:n})}catch(o){if(o instanceof sr&amp;&amp;o.status===400){let i=o.asJson();if(i)throw new og(i)}throw o}}async downloadAsset(e,t){return this.send({method:"GET",url:`/api/assets/${e}`,responseType:"blob",signal:t})}async getAssetInfo(e){return this.send({method:"GET",url:`/api/assets/${e}/info`,responseType:"json"})}async getAssetMetadataAll(e){return this.send({url:`/api/assets/${e}/metadata`,method:"GET",responseType:"json"})}async getAssetMetadata(e,t=0){return this.send({url:`/api/assets/${e}/metadata/${t}`,method:"GET",responseType:"json"})}async createAsset(e){let{pageCount:t,assetGenericFileId:n,attachments:o}=e,{metadata:i,thumbnails:s}=o,a=new jo({generic_file_id:n,page_count:t,metadata:JSON.stringify(i),thumbnails:JSON.stringify(s)});return(await this.send({method:"POST",url:"/api/assets",responseType:"json",body:a})).result}async sendPdfAttachments({uuid:e,attachments:t}){let{metadata:n,thumbnails:o}=t,i=new jo({metadata:JSON.stringify(n),thumbnails:JSON.stringify(o)});await this.send({method:"PUT",url:`/api/assets/${e}/metadata_and_thumbnails`,responseType:"json",body:i})}async getCoursesAttributes(e){return this.send({method:"GET",url:`/api/courses/attributes?ids=${e}`,responseType:"json"})}async lockScreen(e,t){let n=t?`?duration=${t}`:"";return this.send({method:"POST",url:`/api/courses/${e}/lock_screen${n}`,responseType:"json"})}async unlockScreen(e){return this.send({method:"POST",url:`/api/courses/${e}/unlock_screen`,responseType:"json"})}async getScreenSharingState(e){try{return await this.send({method:"GET",url:`/api/courses/${e}/screen_sharing`,responseType:"json"})}catch(t){if(t instanceof sr&amp;&amp;t.status===404)return;throw t}}async updateScreenSharing(e,t,n){return this.send({method:"PATCH",url:`/api/courses/${e}/screen_sharing/${t}`,body:new jo(n),responseType:"json"})}async updateScreenSharingReadyStatus(e,t,n){let o=new URLSearchParams,i=n?"1":"0";return o.set("state",i),this.send({method:"POST",url:`/api/courses/${e}/screen_sharing/${t}/ready`,body:o,responseType:"json"})}async getScreenSharingReadyStatus(e,t){return this.send({method:"GET",url:`/api/courses/${e}/screen_sharing/${t}/ready`,responseType:"json"})}async uploadDocumentForScreenSharing(e){let t=new FormData;return Whe(t,e,!1),this.send({method:"POST",url:`/api/courses/${e.courseId}/screen_sharing/documents`,body:t,responseType:"json"})}async startScreenSharing(e){return this.send({method:"POST",url:`/api/courses/${e.courseId}/screen_sharing`,body:new jo(e.command),responseType:"json"})}async stopScreenSharing(e,t){return this.send({method:"DELETE",url:`/api/courses/${e}/screen_sharing/${t}`,responseType:"json"})}async keepScreenSharingAlive(e,t,n){let o=new URLSearchParams([["expiration",n+""]]);return this.send({method:"POST",url:`/api/courses/${e}/screen_sharing/${t}/keepalive`,body:o,responseType:"json"})}async enableTunnel(e,t){let n=new URLSearchParams([["enabled",t+""]]);return this.send({method:"POST",url:`/api/courses/${e}/tunnel_enabled`,body:n,responseType:"json"})}async getUser(e){return this.send({method:"GET",url:`/api/users/${e}`,responseType:"json"})}async getUserGroups(){return this.send({method:"GET",url:"/api/user_groups",responseType:"json"})}async getUserGroupAttendances(e){return this.send({method:"GET",url:`/api/user_groups/${e}`,responseType:"json"})}async getUserGroupCode(e){return(await this.send({method:"GET",url:`/api/user_groups/${e}/code`,responseType:"json"})).code}async createUserGroup(e){let t=new URLSearchParams;return t.set("name",e),this.send({method:"POST",url:"/api/user_groups",body:t,responseType:"json"})}async joinUserGroup(e,t){let n=new URLSearchParams;return n.set("code",t),this.send({method:"POST",url:`/api/user_groups/${e}/join/v2`,body:n,responseType:"json"})}async getUserGroupInfoByCode(e){return this.send({method:"GET",url:`/api/user_groups/by_code/${e}`,responseType:"json"})}async deleteUserGroup(e){return this.send({method:"DELETE",url:`/api/user_groups/${e}`,responseType:"json"})}getSubjects(){return this.send({method:"GET",url:"/api/subjects",responseType:"json"})}async joinSubject(e){return this.send({method:"POST",url:`/api/subjects/${e}/join`,responseType:"json"})}async leaveSubject(e){return this.send({method:"POST",url:`/api/subjects/${e}/leave`,responseType:"json"})}async getDocumentGroupsContents(e,t){return this.send({method:"GET",url:`/api/document_groups/${e}/contents`,signal:t,responseType:"json"})}async getTrashDocumentGroups(e){let t=new URLSearchParams;return t.append("root_group_id",e.rootGroupId.toString()),t.append("limit",Ghe.toString()),e.documentGroupsPageCursorId&amp;&amp;t.append("next_page_key",e.documentGroupsPageCursorId),this.send({method:"GET",url:`/api/document_groups/trash?${t.toString()}`,signal:e==null?void 0:e.signal,responseType:"json"})}async getTrashDocuments(e){let t=new URLSearchParams;return t.append("root_group_id",e.rootGroupId.toString()),t.append("limit",Ghe.toString()),e!=null&amp;&amp;e.documentsPageCursorId&amp;&amp;t.append("next_page_key",e.documentsPageCursorId),this.send({method:"GET",url:`/api/documents/trash?${t.toString()}`,signal:e==null?void 0:e.signal,responseType:"json"})}async restoreDocumentGroup(e){let t=new URLSearchParams;return t.set("restore_to",e.restoreTo+""),this.send({method:"POST",url:`/api/document_groups/${e.docGroupId}/restore`,body:t,responseType:"json"})}async restoreDocument(e){let t=new URLSearchParams;return t.set("restore_to",e.restoreTo+""),this.send({method:"POST",url:`/api/documents/${e.docId}/restore`,body:t,responseType:"json"})}async deleteDocuments(e){let t=new URLSearchParams;return t.set("document_ids",JSON.stringify(e)),this.send({method:"POST",url:"/api/documents/delete",body:t,responseType:"json"})}async deleteDocumentGroups(e){let t=new URLSearchParams;return t.set("document_group_ids",JSON.stringify(e)),this.send({method:"POST",url:"/api/document_groups/delete",body:t,responseType:"json"})}async renameDocument(e,t){let n=new URLSearchParams;return n.set("name",t),this.send({method:"POST",url:`/api/documents/${e}/rename`,body:n,responseType:"json"})}async renameDocumentGroup(e,t){let n=new URLSearchParams;return n.set("name",t),this.send({method:"POST",url:`/api/document_groups/${e}/rename`,body:n,responseType:"json"})}async createSubDocumentGroup(e,t,n){let o=new URLSearchParams;return o.set("name",t),this.send({method:"POST",url:`/api/document_groups/${e}/new_subfolder`,body:o,signal:n,responseType:"json"})}async copyDocuments(e,t){let n=new URLSearchParams;return n.set("document_ids",JSON.stringify(e)),n.set("destination",t+""),this.send({method:"POST",url:"/api/documents/copy",body:n,responseType:"json"})}async copyDocumentGroups(e,t){let n=new URLSearchParams;return n.set("document_group_ids",JSON.stringify(e)),n.set("destination",t+""),this.send({method:"POST",url:"/api/document_groups/copy",body:n,responseType:"json"})}async moveDocuments(e,t){let n=new URLSearchParams;return n.set("document_ids",JSON.stringify(e)),n.set("destination",t+""),this.send({method:"POST",url:"/api/documents/move",body:n,responseType:"json"})}async moveDocumentGroups(e,t){let n=new URLSearchParams;return n.set("document_group_ids",JSON.stringify(e)),n.set("destination",t+""),this.send({method:"POST",url:"/api/document_groups/move",body:n,responseType:"json"})}async importDocument({groupId:e,file:t,signal:n}){let o=new FormData;return o.set("group_id",e+""),o.set("file",t),this.send({method:"POST",url:"/api/documents/import",body:o,signal:n,responseType:"json"})}async exportDocument(e,t,n){let o=new URLSearchParams;return t!==void 0&amp;&amp;t.length&gt;0&amp;&amp;o.set("assets",JSON.stringify(t)),this.send({method:"POST",url:`/api/documents/${e}/export`,body:o,signal:n,responseType:"arrayBuffer"})}async getTimelineEntries(e,t={},n){let{count:o,before:i,after:s}=t,a=[];return o&amp;&amp;a.push("count="+o),i&amp;&amp;a.push("before="+i),s&amp;&amp;a.push("after="+s),this.send({method:"GET",url:`/api/courses/${e}/timeline_entries?${a.join("&amp;")}`,responseType:"json",signal:n}).then(l=&gt;{let u=c=&gt;{var p,h,f,m,g,v,b;return c.timestamp==null?!1:c.type==="share"?((p=c.share)==null?void 0:p.document.page_count)!=null&amp;&amp;((h=c.share)==null?void 0:h.author.id)!=null:c.type==="reply"?((f=c.reply)==null?void 0:f.replied_document.document.page_count)!=null&amp;&amp;((m=c.reply)==null?void 0:m.replied_document.author.id)!=null:c.type==="submission"?((g=c.submission)==null?void 0:g.document.page_count)!=null&amp;&amp;((v=c.submission)==null?void 0:v.author.id)!=null:c.type==="assignment"?((b=c.assignment)==null?void 0:b.author.id)!=null:!1},d=l.entries.filter(u);return{...l,entries:d}})}async deleteTimelineEntry(e,t){return this.send({method:"DELETE",url:`/api/courses/${e}/timeline_entries/${t}`,responseType:"json"})}async getTimelineEntryUnreadCount(e){let{count:t}=await this.send({method:"GET",url:`/api/courses/${e}/timeline_entries/unread_count`,responseType:"json"});return t}async downloadDocument(e,t){return this.send({method:"GET",url:`/api/documents/${e}`,signal:t,responseType:"arrayBuffer"})}async getDocumentLayer({type:e,documentId:t,afterGeneration:n,index:o}){let i=e==="annotation"?`/api/documents/${t}/annotation_layers/${o}`:`/api/documents/${t}/extension_layers/${o}`;i+=`?after_generation=${n}`;try{let{contents:s,...a}=await this.send({method:"GET",url:i,responseType:"json"});return[{...a},v_(s)]}catch(s){if(s instanceof sr&amp;&amp;s.status===404)return;throw s}}async getDocumentLayerSnapshot({type:e,documentId:t,index:n,snapshotId:o}){let i=e==="annotation"?`/api/documents/${t}/annotation_layers/snapshots/${o}`:`/api/documents/${t}/extension_layers/snapshots/${o}`;typeof n=="number"&amp;&amp;(i+=`/${n}`);try{let s=await this.send({method:"GET",url:i,responseType:"json"});if(s===null)return;let{contents:a,...l}=s;return[{...l},v_(a)]}catch(s){if(s instanceof sr&amp;&amp;s.status===404)return;throw s}}async downloadDocumentAnnotationThumbnail(e,t,n){return this.send({url:`/api/documents/${e}/annotation_layers/thumbnail/${t}/${n}`,responseType:"arrayBuffer",method:"GET"})}async downloadDocumentExtensionThumbnail(e,t,n){return this.send({url:`/api/documents/${e}/extension_layers/thumbnail/${t}/${n}`,responseType:"arrayBuffer",method:"GET"})}async updateDocumentAnnotation({documentId:e,index:t,document_comment:n}){return this.send({method:"PATCH",url:`/api/documents/${e}/annotation_layers/${t}`,body:new jo({version:n.version,ignore_base:n.ignore_base,garbage:n.garbage,contents:n.contents,canvas:n.canvas}),responseType:"json"})}async updateDocumentExtension({documentId:e,index:t,document_comment:n}){return this.send({method:"PATCH",url:`/api/documents/${e}/extension_layers/${t}`,body:new jo({version:n.version,ignore_base:n.ignore_base,garbage:n.garbage,contents:n.contents,canvas:n.canvas}),responseType:"json"})}async uploadDocumentThumbnail({documentId:e,index:t,generation:n,data:o}){let i=new FormData;return i.set("generation",n+""),i.set("data",o),this.send({method:"POST",url:`/api/documents/${e}/thumbnail/${t}`,body:i,responseType:"json"})}async uploadDocumentAnnotationThumbnail({documentId:e,index:t,generation:n,data:o}){let i=new FormData;return n!==void 0&amp;&amp;i.set("generation",n+""),i.set("data",o),this.send({method:"POST",url:`/api/documents/${e}/annotation_layers/thumbnail/${t}`,body:i,responseType:"json"})}async replyToDocumentV2(e){let{documentId:t,thumbnails:n,annotation_thumbnails:o,with_remark:i=!1}=e,s=new FormData;n&amp;&amp;s.set("thumbnails",JSON.stringify(n)),o&amp;&amp;s.set("annotation_thumbnails",JSON.stringify(o)),s.set("with_remark",JSON.stringify(i));try{return await this.send({method:"POST",url:`/api/documents/${t}/reply/v2`,body:s,responseType:"json"}),"ok"}catch(a){if(a instanceof sr&amp;&amp;a.status===202){let l=a.asJson();if(l)return l}throw a}}async getSubmissions(e,t,n){let o=new URLSearchParams;t&amp;&amp;o.set("count",t+""),n&amp;&amp;o.set("before",n+"");let i=this.getUrlQuery(o);return this.send({method:"GET",url:`/api/courses/${e}/submissions${i}`,responseType:"json"})}getUrlQuery(e){let t=e.toString();return t?"?"+t:""}async getSubmissionInfo(e,t){return this.send({method:"GET",url:`/api/courses/${e}/submissions/${t}/info`,responseType:"json"})}async getSubmissionIsSubmitted(e,t){return(await this.send({method:"GET",url:`/api/courses/${e}/submissions/${t}/submitted`,responseType:"json"})).result}async getSubmissionAnswersV3({courseId:e,submissionNumber:t,limit:n,nextPageKey:o}){let i=new URLSearchParams;return n!=null&amp;&amp;i.set("limit",n+""),o!=null&amp;&amp;i.set("next_page_key",o+""),this.send({method:"GET",url:`/api/courses/${e}/submissions/${t}/documents/v3?${i.toString()}`,responseType:"json"})}async submitDocumentV2(e){let t=new FormData;return t.set("data",e.data),t.set("thumbnails",JSON.stringify(e.thumbnails)),t.set("annotation_thumbnails",JSON.stringify(e.annotation_thumbnails)),this.send({method:"POST",url:`/api/courses/${e.courseId}/submissions/${e.submission_number}/v2`,body:t,responseType:"json"})}async createSubmission(e,t={}){return this.updateSubmissionInternal({courseId:e,...t})}async updateSubmission(e,t,n){return this.updateSubmissionInternal({courseId:e,submissionId:t,...n})}async updateSubmissionInternal(e){let t=new URLSearchParams;return e.submission_message!==void 0&amp;&amp;t.set("submission_message",e.submission_message),e.expiry!==void 0&amp;&amp;t.set("expiry",e.expiry),e.hide_author!==void 0&amp;&amp;t.set("hide_author",e.hide_author+""),e.reveal_answer!==void 0&amp;&amp;t.set("reveal_answer",e.reveal_answer+""),e.preparation!==void 0&amp;&amp;t.set("preparation",e.preparation+""),e.submissionId?(await this.send({method:"PATCH",url:`/api/courses/${e.courseId}/submissions/${e.submissionId}`,body:t,responseType:"json"}),{submission_number:e.submissionId}):this.send({method:"POST",url:`/api/courses/${e.courseId}/submissions`,body:t,responseType:"json"})}async deleteSubmission(e,t){return this.send({method:"DELETE",url:`/api/courses/${e}/submissions/${t}`,responseType:"json"})}async getSubmissionMessage(e){let t=new URLSearchParams;return t.set("course_ids",JSON.stringify(e)),this.send({method:"GET",url:`/api/submission_messages/active?${t.toString()}`,responseType:"json"})}async getSubmissionHistoryAttributes(e){let{courseId:t,submissionNumber:n,authorId:o}=e;return this.send({method:"GET",url:`/api/courses/${t}/submissions/${n}/authors/${o}/history/attributes`,responseType:"json"})}async getSubmissionHistory(e){let{courseId:t,submissionNumber:n,authorId:o,limit:i,before_generation:s}=e,a=new URLSearchParams;return i&amp;&amp;a.set("limit",JSON.stringify(i)),s&amp;&amp;a.set("before_generation",JSON.stringify(s)),this.send({method:"GET",url:`/api/courses/${t}/submissions/${n}/authors/${o}/history?${a.toString()}`,responseType:"json"}).then(l=&gt;{let u=l.history.map(d=&gt;({...d,author_key:e.authorKey}));return{has_more:l.has_more,history:u}})}async notifyEnterBackground(){return this.send({method:"GET",url:"/api/status/enter_background",responseType:"json",keepalive:!0})}async uploadDocumentAsMaterial(e){let t=new FormData;return t.set("group_id",e.docGroupId+""),t.set("name",e.name),Whe(t,e),this.send({method:"POST",url:"/api/documents/as_material",body:t,responseType:"json"})}async uploadDocumentMaterialWithAsset({name:e,groupId:t,asset:n,signal:o}){let i=new URLSearchParams;return i.set("group_id",String(t)),i.set("asset",n),i.set("name",e),this.send({method:"POST",url:"/api/documents/assets",body:i,responseType:"json",signal:o})}async authenticateAppToken(e){let t=new URLSearchParams;return t.set("app_id",e+""),this.send({method:"POST",url:"/api/apps/authenticate",body:t,responseType:"json"})}async getUnreadMobilePushes(e){let t=e!==void 0?`?course_id=${e}`:"";return this.send({method:"GET",url:`/api/mobile_push${t}`,responseType:"json"})}async readMobilePushes(e){let t=new URLSearchParams;return t.set("selection",JSON.stringify(e)),this.send({method:"DELETE",url:`/api/mobile_push/selected?${t.toString()}`,responseType:"json"})}async registerMobilePush(e){let{token:t,releaseStage:n,lang:o}=e,i=new URLSearchParams;return i.set("token",t),i.set("platform","web"),i.set("attributes",JSON.stringify({environment:n})),i.set("lang",o),i.set("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone),this.send({method:"POST",url:"/api/mobile_push/device",body:i,responseType:"json"})}async changePassword({currentPassword:e,newPassword:t,newPasswordConfirm:n,language:o}){let i=new jo({old_password:e,new_password:t,new_password_confirmation:n,language:o});return this.send({method:"POST",url:"/api/users/password",body:i,responseType:"json"})}async uploadGenericFile(e){let{file:t,extWithDot:n,signal:o}=e,i=new URLSearchParams;return i.set("extension",n),await this.send({method:"POST",url:`/api/generic_files?${i.toString()}`,responseType:"json",headers:new Headers({"content-type":t.type}),body:t,signal:o})}async uploadNoteThumbnail(e,t,n){let o=new FormData;return o.set("version",`${t}`),o.set("thumbnails",JSON.stringify(n)),await this.send({method:"POST",url:`/api/notes/${e}/thumbnails`,body:o,responseType:"json"})}async uploadSharedNoteThumbnail(e,t,n){let o=new FormData;return o.set("revision",`${t}`),o.set("thumbnails",JSON.stringify(n)),await this.send({method:"POST",url:`/api/notes/${e}/snapshot/thumbnails`,body:o,responseType:"json"})}async getNoteInfo(e){return this.send({method:"GET",url:`/api/notes/${e}/info`,responseType:"json"}).then(rA)}async updateNoteInfo(e){let t=new jo({student_permission:e.studentPermission,teacher_permission:e.teacherPermission});return this.send({method:"PATCH",url:`/api/notes/${e.noteId}/info`,body:t,responseType:"json"}).then(rA)}async updateSharedNotePermissions(e,t){let n=new jo({permissions:JSON.stringify(t.map(({userId:i,permission:s})=&gt;({user_id:i,permission:s})))}),o=await this.send({method:"PATCH",url:`/api/notes/${e}/members`,body:n,responseType:"json"});return{notFound:o.not_found,updated:o.updated}}};function Whe(r,e,t=!0){if(r.set("assets",JSON.stringify(e.assetUUIDs)),r.set("page_count",e.pageCount+""),r.set("data",e.data),t){Ee(e.thumbnails.length===e.pageCount,"thumbnails count must be page count");let n=[];for(let s=0;s&lt;e.thumbnails.length;s++){let a=e.thumbnails[s],l=`thumbnail_${s}`;r.set(l,a),n.push(l)}r.set("thumbnail_index",JSON.stringify(n)),Ee(e.annotationThumbnails.length===e.pageCount,"annotation thumbnails count must be page count");let o=[];for(let s=0;s&lt;e.annotationThumbnails.length;s++){let a=e.annotationThumbnails[s];if(a){let l=`annotation_thumbnail_${s}`;o.push(l),r.set(l,a)}else o.push(null)}r.set("annotation_thumbnail_index",JSON.stringify(o)),Ee(e.annotations.length===e.pageCount,"annotations count must be page count");let i=[];for(let s=0;s&lt;e.annotations.length;s++){let a=e.annotations[s];if(a){let l=`annotation_${s}`,{canvas:u,version:d}=a;r.set(l,JSON.stringify({canvas:u,version:d})),i.push(l)}else i.push(null)}r.set("annotation_index",JSON.stringify(i))}}function rA(r){var e,t,n,o,i;return{...r,updated_at:(e=r.updated_at)!=null?e:void 0,created_at:(t=r.created_at)!=null?t:void 0,metadata_updated_at:(n=r.metadata_updated_at)!=null?n:void 0,last_device_id:(o=r.last_device_id)!=null?o:void 0,viewer_permission:(i=r.viewer_permission)!=null?i:void 0}}var $he=/^https?:\/\//,tL=class{constructor(e){this.lnsEndpoint=this.assertEndpoint(e.lnsEndpoint),this.cdnEndpoint=this.assertEndpoint(e.cdnEndpoint),this.authToken=e.authToken}assertEndpoint(e){if(e==="")return origin;if(!e.match($he))throw new Error("invalid endpoint: "+e);return e.endsWith("/")?e.substr(0,e.length-1):e}join(e,t){if(!t.startsWith("/"))throw new Error("resource path must start with / : "+t);return new URL(e+t)}lnsUrl(e){let t=this.join(this.lnsEndpoint,e);return t.searchParams.set("auth_token",this.authToken),t.toString()}src(e){return e.match($he)?e:this.join(this.cdnEndpoint,e).toString()}srcSet(e){return e.split(",").map(t=&gt;t.trim()).map(t=&gt;{let n=t.match(/^(.+?) (.*?)$/);return n?`${this.src(n[1])} ${n[2]}`:t}).join(", ")}cardThumbUrl(e,t="small"){let n=e.contentAssetId();if(!!n){if(e instanceof ga||e instanceof Vo||e instanceof zn||e instanceof md)return this.assetThumbUrl({assetId:n,index:0,size:t});if(e instanceof Yi)return this.assetThumbUrl({assetId:n,index:e.content.page_index,size:t})}}assetUrl(e){if(!!e)return this.lnsUrl(`/api/assets/${e}`)}assetThumbUrl({assetId:e,size:t,index:n}){return this.lnsUrl(`/api/assets/${e}/thumbnail/${n}/${t}`)}docOrAnnoThumbUrl({type:e,...t}){return e==="document"?this.documentThumbUrl(t):this.annotationLayerThumbUrl(t)}documentThumbUrl({docId:e,index:t,size:n,snapshotId:o}){return o!=null?this.lnsUrl(`/api/documents/${e}/snapshots/${o}/thumbnail/${t}/${n}`):this.lnsUrl(`/api/documents/${e}/thumbnail/${t}/${n}`)}annotationLayerThumbUrl({docId:e,index:t,size:n,snapshotId:o}){return o!=null?this.lnsUrl(`/api/documents/${e}/annotation_layers/snapshots/${o}/thumbnail/${t}/${n}`):this.lnsUrl(`/api/documents/${e}/annotation_layers/thumbnail/${t}/${n}`)}drawnThumbUrl(e,t,n){let o;if(e.document){if(t==="annotation"){let{id:i,index:s,commentSnapshotId:a}=e.document;a?o=this.annotationLayerThumbUrl({docId:i,index:s,snapshotId:a,size:n}):o=this.annotationLayerThumbUrl({docId:i,index:s,size:n})}}else{let i=e.drawnAssetId(t);i&amp;&amp;(o=this.assetThumbUrl({assetId:i,size:n,index:0}))}return o}noteThumbnailUrl({noteId:e,level:t}){return this.lnsUrl(`/api/notes/${e}/thumbnails/${t}`)}sharedNoteThumbnailUrl({noteId:e,level:t}){return this.lnsUrl(`/api/notes/${e}/snapshot/thumbnails/${t}`)}};var rL=class{constructor(e){this.opts=e}async send(e){return e.headers.set("x-csrf-token",this.opts.csrfToken),Ac(e,{enableLog:this.opts.enableLog,responseType:"json"})}async updatePassword(e){let t=new zl({method:"POST",url:"/api/password",body:new jo(e)});return this.send(t)}async setMobilePushToken(e){let t=new URLSearchParams;t.set("token",e);let n=new zl({method:"POST",url:"/api/push-token",body:t});await this.send(n)}async getOgpMetadata(e){let t=new URLSearchParams;t.set("url",e);let n=new zl({method:"POST",url:"/api/ogp",body:t});n.timeout={delay:5,unit:1e3};try{return(await this.send(n)).page}catch(o){return fe.error(o),{url:e,title:decodeURI(e)}}}};async function Vhe(r){return new Promise(e=&gt;{let t=indexedDB.deleteDatabase(r);t.onerror=n=&gt;{fe.error(n),e(!1)},t.onsuccess=()=&gt;{fe.log("idb deleted: "+r),e(!0)}})}async function jhe(r,e,t){return new Promise((n,o)=&gt;{let i=indexedDB.open(r,e);i.onerror=()=&gt;{o(i.error)},i.onsuccess=s=&gt;{let a=s.target.result;n(a),fe.log("db: opened")},i.onupgradeneeded=s=&gt;{fe.log("db: begin IDB upgrade");let a=s.target.result;for(let l of t)a.objectStoreNames.contains(l.name)||(a.createObjectStore(l.name,l.params),fe.log(`db: store '${l.name}' created`));for(let l=0;l&lt;a.objectStoreNames.length;l++){let u=a.objectStoreNames[l];t.some(d=&gt;d.name===u)||(a.deleteObjectStore(u),fe.log(`db: store '${u}' deleted`))}fe.log("db: end IDB upgrade")}})}var p7=class extends Error{constructor(t){super(t==null?void 0:t.message);this.error=t}},h7=class extends Error{constructor(){super("transaction aborted")}},nL=class{constructor(e){this.db=e}table(e){return new f7(this.db,e)}},f7=class{constructor(e,t){this.db=e;this.name=t}tx(e,t){return new Promise((n,o)=&gt;{let i,s=this.db.transaction(this.name,e),a=l=&gt;{fe.error(l),o(new p7(l))};s.oncomplete=()=&gt;{i?n(i.value):o(new Error("Unexpected completion of transaction"))},s.onerror=a,s.onabort=()=&gt;{o(new h7)},t(s).then(l=&gt;{i={value:l}}).catch(a)})}put(e){return this.tx("readwrite",t=&gt;new Promise((n,o)=&gt;{let i=t.objectStore(this.name).put(e);i.onsuccess=()=&gt;n(),i.onerror=o}))}delete(e){return this.tx("readwrite",t=&gt;new Promise((n,o)=&gt;{let i=t.objectStore(this.name).delete(e);i.onsuccess=()=&gt;n(),i.onerror=o}))}get(e){return this.tx("readonly",t=&gt;new Promise((n,o)=&gt;{let i=t.objectStore(this.name).get(e);i.onsuccess=()=&gt;n(i.result),i.onerror=o}))}clear(){return this.tx("readwrite",e=&gt;new Promise((t,n)=&gt;{let o=e.objectStore(this.name).clear();o.onsuccess=()=&gt;t(),o.onerror=n}))}};var fh=class{constructor(e,t){this.name=e;this.fetcher=t}async table(){return this.fetcher.fetch().then(e=&gt;e==null?void 0:e.table(this.name))}async get(e){let t=await this.table();if(!!t)try{let n=await t.get(e);return n?this.unwrap(n):void 0}catch(n){}}async put(e,t){let n=await this.table();if(!!n)try{let o=this.wrap(e,t);await n.put(o)}catch(o){}}async delete(e){let t=await this.table();return t==null?void 0:t.delete(e)}async clear(){let e=await this.table();return e==null?void 0:e.clear()}};function Khe(r){let{pathname:e}=new URL(r,"http://localhost");return`/lns${e}`}function qhe(r){return`urlNotFound?${Khe(r)}`}var m7=class extends fh{constructor(e){super(m7.schema.name,e)}putUrlNotFound(e){return this.put(qhe(e),!0)}async urlNotFound(e){return this.get(qhe(e))}unwrap(e){return e.value}wrap(e,t){return{key:e,value:t}}},Yw=m7;Yw.schema={name:"booleans",params:{keyPath:"key"}};var g7=class extends fh{constructor(e){super(g7.schema.name,e)}async getChecked(e){var t;return(t=await this.get(`${e}`))!=null?t:{}}putChecked(e,t){return this.put(`${e}`,t)}unwrap(e){return e.value}wrap(e,t){return{key:e,value:t}}},Xw=g7;Xw.schema={name:"checkedTutorials",params:{keyPath:"key"}};var v7=class extends fh{constructor(e){super(v7.schema.name,e)}async getETags(e){var t;return(t=await this.get(`${e}`))!=null?t:{}}putETags(e,t){return this.put(`${e}`,t)}unwrap(e){return e.value}wrap(e,t){return{key:e,value:t}}},Qw=v7;Qw.schema={name:"eTags",params:{keyPath:"key"}};function b7(r,e){return`${r}/${e}`}var y7=class extends fh{constructor(e){super(y7.schema.name,e)}async load(e,t){var n;return(n=await this.get(b7(e,t)))!=null?n:[]}async append(e,t,n){let o=await this.load(e,t);return o=o.concat(n),this.put(b7(e,t),o)}async deleteEntry(e,t){let n=b7(e,t);await this.delete(n)}unwrap(e){return e.value}wrap(e,t){return{key:e,value:t}}},Jw=y7;Jw.schema={name:"sentCards",params:{keyPath:"key"}};var wOe="app.loilonote.main",TOe=44;function Yhe(){let r=Wb(()=&gt;jhe(wOe,TOe,[Yw.schema,Xw.schema,Jw.schema,Qw.schema]).then(e=&gt;new nL(e)).catch(async e=&gt;{fe.error(e)}));return{open:async()=&gt;{await r.fetch()},booleans:new Yw(r),checkedTutorials:new Xw(r),sentCards:new Jw(r),eTags:new Qw(r)}}function Xhe(r){return`/courses/${r}`}function Qhe(r){return`/courses_only_teachers/${r}`}function Jhe(r){return`/notes/${r}`}function DOe(r){return e=&gt;{var t,n,o,i,s,a;e.action==="note_snapshot_created"?(t=r.onNoteSnapshotCreated)==null||t.call(r,e):e.action==="note_updated"?(n=r.onNoteUpdated)==null||n.call(r,e):e.action==="note_deleted"?(o=r.onNoteDeleted)==null||o.call(r,e):e.action==="some_note_members_added"?(i=r.onSomeNoteMembersAdded)==null||i.call(r,e):e.action==="some_note_members_deleted"?(s=r.onSomeNoteMembersDeleted)==null||s.call(r,e):e.action==="some_note_members_updated"&amp;&amp;((a=r.onSomeNoteMembersUpdated)==null||a.call(r,e))}}var oL=class{constructor({endpoint:e,issuer:t}){this.buses=new Fn(ic);this.requestBuf=[];this._connectionState="unknown";this.maxRetryCount=5;this.reconnectCount=0;this.endpoint=e,this.issuer=t,this.connect()}setConnectionState(e){var t;e!==this._connectionState&amp;&amp;(this._connectionState=e,(t=this.delegate)==null||t.call(this,e))}get connectionState(){return this._connectionState}connect(){this.setConnectionState(this.reconnectCount&gt;0?"reconnecting":"connecting"),fe.log(`connecting: ${this.endpoint}...`),this.issuer.mustIssue("loilonote-push").then(e=&gt;{let t=new URL(this.endpoint);t.protocol=t.protocol==="https:"?"wss:":"ws:",t.pathname="/notification",t.searchParams.set("app_token",e.app_token);let n=new WebSocket(t.toString());n.addEventListener("open",()=&gt;{this.onConnect(n)}),n.addEventListener("close",()=&gt;{this.onClosed()}),n.addEventListener("message",o=&gt;{try{this.onMessage(JSON.parse(o.data))}catch(i){fe.error("message parse error: ",i)}}),n.addEventListener("error",o=&gt;{fe.error("connection error",o),this.onError()})}).catch(e=&gt;{fe.error("couldn't issue appToken",e),this.onError()})}onConnect(e){fe.log(`connected: ${this.endpoint}`),this.sock=e,this.reconnectCount&gt;0&amp;&amp;this.resubscribe(),this.reconnectCount=0,this.flush(),this.setConnectionState("connected")}onClosed(){fe.log(`closed: ${this.endpoint}`),this.reconnect()}reconnect(){this.reconnectCount+=1;let e=Math.pow(2,this.reconnectCount);fe.log(`reconnecting to ${this.endpoint}... (count=${this.reconnectCount},delay=${e}s)`),Sp({unit:1e3,delay:e}).then(()=&gt;{this.connect()})}onError(){this.reconnectCount&gt;this.maxRetryCount?(fe.error(`couldn't connect to ${this.endpoint} after ${this.reconnectCount} retries`),this.setConnectionState("error")):this.reconnect()}onMessage(e){e.type==="subscribed"||e.type==="unsubscribed"?fe.log(e):e.type==="message"?(fe.log(e),this.buses.get(e.channel).publish(e.data)):e.type==="error"&amp;&amp;fe.error(e)}subscribeCourse(e,t){return this.subscribe(Xhe(e),t)}unsubscribeCourse(e,t){this.unsubscribe(Xhe(e),t)}subscribeCourseOnlyTeachers(e,t){return this.subscribe(Qhe(e),t)}unsubscribeCourseOnlyTeachers(e,t){this.unsubscribe(Qhe(e),t)}subscribeNote(e,t){return this.subscribe(Jhe(e),DOe(t))}unsubscribeNote(e,t){this.unsubscribe(Jhe(e),t)}send(e){this.sock?(fe.log(e),this.sock.send(JSON.stringify(e))):this.requestBuf.push(e)}resubscribe(){let e=Array.from(this.buses.keys());fe.log("resubscribe:",e);for(let t of e)this.sendSubscribe(t)}flush(){let e=this.requestBuf;this.requestBuf=[];for(let t of e)this.send(t)}subscribe(e,t){if(this.buses.has(e))return this.buses.get(e).subscribe(t);let n=this.buses.get(e).subscribe(t);return this.sendSubscribe(e),n}sendSubscribe(e){let t={type:"subscribe",channel:e};this.send(t)}unsubscribe(e,t){if(t&amp;&amp;(t.close(),this.buses.get(e).subscribers()&gt;0))return;this.buses.delete(e);let n={type:"unsubscribe",channel:e};this.send(n)}};var iL=class{constructor(e){this.ctx=e;this.localContentAssets=new Map}getContentAssetUrl(e){let t=this.getContentLocalFileAsset(e);return t||this.ctx.res.assetUrl(e.contentAssetId())}getContentLocalFileAsset(e){return this.localContentAssets.get(e.id)}setContentLocalFileAsset(e,t){if(typeof URL.createObjectURL!="function")return;let n=URL.createObjectURL(t);e.forEach(o=&gt;this.localContentAssets.set(o,n))}removeContentLocalFileAsset(e){let t=[...this.localContentAssets.entries()],n=[];for(let o of e){if(n.some(s=&gt;s===o))continue;let i=this.localContentAssets.get(o);if(i){URL.revokeObjectURL(i);let s=0,a=1;t.filter(l=&gt;l[a]===i).forEach(l=&gt;{this.localContentAssets.delete(l[s]),n.push(l[s])})}}}clearContentLocalFileAsset(){let e=[...this.localContentAssets.keys()];e.length!==0&amp;&amp;this.removeContentLocalFileAsset(e)}};var kOe={idbCleared:"20210311_01"},sL=class{constructor(e){this.storage=e;this.runId=Date.now().toString()}async run(){await this.do(kOe.idbCleared,()=&gt;Vhe("app.loilonote.assets"))}async do(e,t){let n="migrations."+e;this.storage.get(n)||await t()&amp;&amp;this.storage.put(n,this.runId)}};"allSettled"in Promise||(Promise.allSettled=Wne.bind(Promise));typeof Path2D=="undefined"&amp;&amp;(globalThis.Path2D=class{addPath(e,t){}arc(e,t,n,o,i,s){}arcTo(e,t,n,o,i){}bezierCurveTo(e,t,n,o,i,s){}closePath(){}ellipse(e,t,n,o,i,s,a,l){}lineTo(e,t){}moveTo(e,t){}quadraticCurveTo(e,t,n,o){}rect(e,t,n,o){}roundRect(e,t,n,o,i){}});var aL=class{constructor(e){this.options=e}url(e){return this.options.endpoint+e}async listCommandsRequest(e,t){let n=new zl({method:"GET",url:this.url(e)}),{start:o="-",end:i="+",count:s}=t;o&amp;&amp;n.url.searchParams.set("start",o),i&amp;&amp;n.url.searchParams.set("end",i),s&amp;&amp;n.url.searchParams.set("count",String(s));let a=await this.options.issuer.mustIssue("loilonote-share");return n.url.searchParams.set("appToken",a.app_token),n}async listNoteCommands(e,t){let n=await this.listCommandsRequest(`/api/shared-notes/${e}/commands`,t);return(await Ac(n,{responseType:"json",enableLog:this.options.enableDebug})).commands}};var nA=class{constructor({endpoint:e,issuer:t,pathname:n}){this.maxRetryCount=3;this.reconnectCount=0;this._updater=e=&gt;{};this.closeListener=()=&gt;{this.onClosed()};this.endpoint=e,this.issuer=t,this.pathname=n}updater(e){return this._updater=e,this}connect(){let e=ss();this.connecting=e,this.issuer.mustIssue("loilonote-search").then(t=&gt;{let n=new URL(this.endpoint);n.protocol=n.protocol==="https:"?"wss:":"ws:",n.pathname=this.pathname,n.searchParams.set("app_token",t.app_token);let o=new WebSocket(n.toString());o.addEventListener("open",()=&gt;{e.resolve(o)}),o.addEventListener("close",this.closeListener),o.addEventListener("error",i=&gt;{fe.error("connection error",i),e.reject(i)}),o.addEventListener("message",i=&gt;{try{this._updater(JSON.parse(i.data))}catch(s){fe.error("message parse error: ",s)}})}).catch(t=&gt;{e.reject(t)}),e.then(t=&gt;{this.connecting&amp;&amp;(this.onConnect(t),this.connecting=void 0)}).catch(t=&gt;{this.onError()})}close(){this.sock&amp;&amp;(this.sock.removeEventListener("close",this.closeListener),this.sock.close(),fe.log(`closed: ${this.endpoint}`)),this.connecting&amp;&amp;(this.connecting.then(e=&gt;{e.close()}).catch(()=&gt;{}),this.connecting=void 0)}send(e){var t;!((t=this.sock)!=null&amp;&amp;t.readyState)||this.sock.send(JSON.stringify(e))}onConnect(e){fe.log(`connected: ${this.endpoint}`),this.sock=e,this.reconnectCount=0}onClosed(){fe.log(`closed: ${this.endpoint}`),this.reconnect()}reconnect(){this.reconnectCount+=1;let e=Math.pow(2,this.reconnectCount);fe.log(`reconnecting to ${this.endpoint}... (count=${this.reconnectCount}, delay=${e}s)`),Sp({unit:1e3,delay:e}).then(()=&gt;{this.connect()})}onError(){this.reconnectCount&gt;this.maxRetryCount?fe.error(`couldn't connect to ${this.endpoint} after ${this.reconnectCount} retries`):this.reconnect()}};document.addEventListener("DOMContentLoaded",()=&gt;{var m,g;console.log("started.");let r=document.getElementById("initial-state");if(!r)throw new Error("#initial-state not found");let e=r.getAttribute("data-json");if(!e)throw new Error("initial state not found");let t=decodeURIComponent(atob(e));(m=r.parentElement)==null||m.removeChild(r);let n=JSON.parse(t);window.onorientationchange=(g=window.onorientationchange)!=null?g:()=&gt;{},fe.setEnabled(n.logEnabled);let o=n.logEnabled?[]:void 0;C7.default.start({apiKey:"e24061592088481839075dd6fb538e76",enabledReleaseStages:["local","development","staging","production"],releaseStage:n.releaseStage,appVersion:n.appVersion,enabledBreadcrumbTypes:o,redactedKeys:["auth_token","app_token","appToken"],trackInlineScripts:!1,onError:v=&gt;{fe.error(v);let b=Sr();return v.addMetadata("metadata","id",b),v.originalError&amp;&amp;(v.originalError.id=b),n.releaseStage!=="local"&amp;&amp;!Je.catchError(v.originalError)},plugins:[new Zhe.default]});let i=C7.default.getPlugin("react"),s=i==null?void 0:i.createErrorBoundary(lL.default);oA.default.extend(efe.default),oA.default.extend(tfe.default),oA.default.extend(rfe.default),oA.default.locale(Hhe,void 0,!0),ie.initialState=n,ie.res=new tL({cdnEndpoint:n.cdnEndpoint,lnsEndpoint:n.lnsEndpoint,authToken:n.authToken}),ie.lnsClient=new eL({endpoint:n.lnsEndpoint,authToken:n.authToken,enableDebug:n.logEnabled}),ie.apiClient=new rL({enableLog:n.logEnabled,csrfToken:n.csrfToken}),ie.fileManager=new iL(ie),ie.localStorage=new yM;let a=Vr.getEndpoint("loilonote-share");a&amp;&amp;(ie.shareClient=new aL({endpoint:a,enableDebug:n.logEnabled,issuer:Vr})),ie.pdf=gJ();let l=Vr.mustGetEndpoint("loilonote-push");ie.pushClient=new oL({endpoint:l,issuer:Vr});let u=Vr.getEndpoint("loilonote-search");u&amp;&amp;(ie.noteSearchClient=new nA({endpoint:u,issuer:Vr,pathname:"/api/notes"}),ie.materialDocumentSearchClient=new nA({endpoint:u,issuer:Vr,pathname:"/api/documents"})),ie.idb=Yhe();let d=document.getElementById("main"),c=()=&gt;{new sL(ie.localStorage).run(),ie.idb.open(),Ot.init()},p=v=&gt;{v.ctrlKey&amp;&amp;v.preventDefault()};document.body.addEventListener("wheel",p,{passive:!1});let h=(0,nfe.createRoot)(d),f=lL.default.createElement(Ohe,{initialState:n});s?h.render(lL.default.createElement(s,{FallbackComponent:zhe},f)):h.render(f),c()});})();
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
&lt;http://stuartk.com/jszip&gt;

(c) 2009-2016 Stuart Knightley &lt;stuart [at] stuartk.com&gt;
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh &lt;https://feross.org&gt;
 * @license  MIT
 */
/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022  thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
/*! https://mths.be/codepointat v0.2.0 by @mathias */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh &lt;https://feross.org/opensource&gt; */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
ts-ebml licensed under MIT. Copyright (c) legokichi duckscallion
split-graphemes licensed under MIT. Copyright (c) Daiki Iizuka
QR
*/
</pre></body></html>